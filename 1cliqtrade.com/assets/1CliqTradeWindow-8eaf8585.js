import{z as Fl,K as ah,ag as sh,L as fs,D as iy,O as Xc,a as p,d as vi,bT as Sp,be as ry,bw as gu,c6 as yu,b9 as oy,t as _t,r as g,k as Gt,o as R,l as N,S as mt,W as hi,b as nt,h,n as k,ac as Et,c as at,w as v,p as _e,f as M,V as Le,v as Ke,m as pt,bs as lh,g as ht,ae as bi,F as rt,$ as kt,cc as ny,ci as ay,y as di,M as wp,bA as Xo,e as Tc,bU as ll,j as De,I as Tp,u as pi,ad as uh,cz as Ti,i as yt,cA as Yi,_ as Oc,G as sy,cr as ly,ar as Oo,cD as ch,T as uy,co as ul,a8 as cy,a3 as dr,cF as dy,P as py,J as fy,cG as hy,cw as Ei,x as cl,cH as vy,cI as gy,cJ as yy,U as my,cK as Cy,cL as Za,cM as Sy,ah as wy,ai as Ty,cN as Oy,cO as Py,cP as Ey,aW as As,cQ as mu}from"./index-8e4e81f1.js";import{s as ot,m as he}from"./sharedFunctions-35bb9dec.js";import{g as Jc}from"./_commonjsHelpers-de833af9.js";import{V as ei}from"./VChip-92e480f5.js";import{V as Dt}from"./VTooltip-5cdbd8b8.js";import{V as Jt,a as _y}from"./VTextField-01778494.js";import{r as by}from"./validators-6a67b86a.js";import{u as rs,i as Pc,a as Dy,c as Ec,d as Ry,b as _c,e as xy}from"./install-f4f8b7fa.js";import{i as Ay,a as Ly,b as My,c as Ny,d as Fy,f as Iy,V as Op}from"./VAlert-e0ff6a0d.js";import{B as dh}from"./index.esm.min-e17c6e2d.js";import{_ as ki}from"./_plugin-vue_export-helper-c27b6911.js";import{i as bc,a as ky}from"./install-e7296703.js";import{i as Gy,a as Dc}from"./installMarkLine-d2caa0e5.js";import{a as dt,V as Di}from"./VRow-b7f01d5c.js";import{V as rr,a as It,b as Ci}from"./VList-9b82c2cd.js";import{V as yr}from"./VMenu-c4bd5c34.js";import{V as Zc,t as Vy,v as By}from"./VDataTable-4f24c634.js";import{V as or}from"./VCheckbox-6ba6afcd.js";import{V as ui,a as Ft}from"./VCard-354351a6.js";import{V as Hy}from"./VForm-5f1d4e49.js";import{a as ph,d as Wy,u as fh,b as dl,f as Uy,e as jy,V as Hi}from"./VInput-cf82db51.js";import{I as zy}from"./VImg-afe548b3.js";import{V as pl,a as xr}from"./VRadioGroup-67954da8.js";import{V as Ai}from"./VDialog-0796f45c.js";import{V as Sn}from"./VDivider-fd7c1266.js";import{V as Xn}from"./VSelect-32de11b2.js";/* empty css              */import{m as Yy,a as Pp,V as Ep}from"./VCheckboxBtn-bcfc7d4b.js";import Ky from"./Orders-e07ad8c6.js";import{V as Qy,a as dn}from"./VTabs-b1134c56.js";import"./VAvatar-a002db8e.js";import"./dialog-transition-d4838f6c.js";const qy=Fl({fluid:{type:Boolean,default:!1},...ah(),...sh()},"VContainer"),_p=fs()({name:"VContainer",props:qy(),setup(n,i){let{slots:e}=i;const{rtlClasses:t}=iy();return Xc(()=>p(n.tag,{class:["v-container",{"v-container--fluid":n.fluid},t.value,n.class],style:n.style},e)),{}}});/**
          * @ag-grid-community/all-modules - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue * @version v30.2.1
          * @link https://www.ag-grid.com/
          * @license MIT
          */function ao(n){return n==null||n===""?null:n}function ue(n,i){return i===void 0&&(i=!1),n!=null&&(n!==""||i)}function vt(n){return!ue(n)}function Cr(n){return n==null||n.length===0}function os(n){return n!=null&&typeof n.toString=="function"?n.toString():null}function Ar(n){if(n!==void 0){if(n===null||n==="")return null;if(typeof n=="number")return isNaN(n)?void 0:n;var i=parseInt(n,10);return isNaN(i)?void 0:i}}function io(n){if(n!==void 0)return n===null||n===""?!1:typeof n=="boolean"?n:/true/i.test(n)}function Xy(n){if(!(n==null||n===""))return n}function Jy(n,i){return n==null&&i==null?!0:n==null&&i!=null||n!=null&&i==null?!1:n===i}function Zy(n,i){var e=n?JSON.stringify(n):null,t=i?JSON.stringify(i):null;return e===t}function $y(n,i,e){e===void 0&&(e=!1);var t=n==null,r=i==null;if(n&&n.toNumber&&(n=n.toNumber()),i&&i.toNumber&&(i=i.toNumber()),t&&r)return 0;if(t)return-1;if(r)return 1;function o(a,s){return a>s?1:a<s?-1:0}if(typeof n!="string"||!e)return o(n,i);try{return n.localeCompare(i)}catch{return o(n,i)}}function Tn(n){if(n instanceof Set||n instanceof Map){var i=[];return n.forEach(function(e){return i.push(e)}),i}return Object.values(n)}var em=Object.freeze({__proto__:null,makeNull:ao,exists:ue,missing:vt,missingOrEmpty:Cr,toStringOrNull:os,attrToNumber:Ar,attrToBoolean:io,attrToString:Xy,referenceCompare:Jy,jsonEquals:Zy,defaultComparator:$y,values:Tn}),tm=function(){function n(){this.existingKeys={}}return n.prototype.addExistingKeys=function(i){for(var e=0;e<i.length;e++)this.existingKeys[i[e]]=!0},n.prototype.getUniqueKey=function(i,e){i=os(i);for(var t=0;;){var r=void 0;if(i?(r=i,t!==0&&(r+="_"+t)):e?(r=e,t!==0&&(r+="_"+t)):r=t,!this.existingKeys[r])return this.existingKeys[r]=!0,String(r);t++}},n}(),im=function(n){var i=typeof Symbol=="function"&&Symbol.iterator,e=i&&n[i],t=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&t>=n.length&&(n=void 0),{value:n&&n[t++],done:!n}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},rm=function(n,i){var e=typeof Symbol=="function"&&n[Symbol.iterator];if(!e)return n;var t=e.call(n),r,o=[],a;try{for(;(i===void 0||i-- >0)&&!(r=t.next()).done;)o.push(r.value)}catch(s){a={error:s}}finally{try{r&&!r.done&&(e=t.return)&&e.call(t)}finally{if(a)throw a.error}}return o};function Oi(n,i){var e,t;if(n!=null){if(Array.isArray(n)){for(var r=0;r<n.length;r++)i(r.toString(),n[r]);return}try{for(var o=im(Object.entries(n)),a=o.next();!a.done;a=o.next()){var s=rm(a.value,2),l=s[0],u=s[1];i(l,u)}}catch(c){e={error:c}}finally{try{a&&!a.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}}}function $c(n){for(var i={},e=Object.keys(n),t=0;t<e.length;t++){var r=e[t],o=n[r];i[r]=o}return i}function om(n){return JSON.parse(JSON.stringify(n))}function fl(n,i){if(n){var e=n,t={};return Object.keys(e).forEach(function(r){if(!(i&&i.indexOf(r)>=0)){var o=e[r],a=hl(o)&&o.constructor===Object;a?t[r]=fl(o):t[r]=o}}),t}}function hh(n,i){return n[i]}function vh(n,i,e){n[i]=e}function nm(n,i){for(var e=[],t=2;t<arguments.length;t++)e[t-2]=arguments[t];e.forEach(function(r){return gh(n,i,r)})}function gh(n,i,e,t){var r=hh(n,e);r!==void 0&&vh(i,e,t?t(r):r)}function yh(n){var i={};return n.filter(function(e){return e!=null}).forEach(function(e){Object.keys(e).forEach(function(t){return i[t]=null})}),Object.keys(i)}function lo(n){if(!n)return[];var i=Object;if(typeof i.values=="function")return i.values(n);var e=[];for(var t in n)n.hasOwnProperty(t)&&n.propertyIsEnumerable(t)&&e.push(n[t]);return e}function Sr(n,i,e,t){e===void 0&&(e=!0),t===void 0&&(t=!1),ue(i)&&Oi(i,function(r,o){var a=n[r];if(a!==o){if(t){var s=a==null&&o!=null;if(s){var l=typeof o=="object"&&o.constructor===Object,u=l;u&&(a={},n[r]=a)}}hl(o)&&hl(a)&&!Array.isArray(a)?Sr(a,o,e,t):(e||o!==void 0)&&(n[r]=o)}})}function am(n){return vt(n)||Object.keys(n).length===0}function sm(n,i,e){if(n==null)return e;for(var t=i.split("."),r=n;t.length>1;)if(r=r[t.shift()],r==null)return e;var o=r[t[0]];return o??e}function lm(n,i,e){if(n!=null){var t=i.split("."),r=n;t.forEach(function(o,a){r[o]||(r[o]={}),a<t.length-1&&(r=r[o])}),r[t[t.length-1]]=e}}function Jn(n,i,e){if(!(!i||!n)){if(!e)return n[i];for(var t=i.split("."),r=n,o=0;o<t.length;o++){if(r==null)return;r=r[t[o]]}return r}}function mh(n,i){Object.keys(n).forEach(function(r){var o=n[r];typeof o=="object"&&(n[r]=void 0)});var e=Object.getPrototypeOf(n),t={};Object.keys(e).forEach(function(r){var o=e[r];if(typeof o=="function"){var a=function(){console.warn("AG Grid: "+i+" function "+r+`() cannot be called as the grid has been destroyed.
                     Please don't call grid API functions on destroyed grids - as a matter of fact you shouldn't
                     be keeping the API reference, your application has a memory leak! Remove the API reference
                     when the grid is destroyed.`)};t[r]={value:a,writable:!0}}}),Object.defineProperties(n,t)}function hl(n){return typeof n=="object"&&n!==null}var um=Object.freeze({__proto__:null,iterateObject:Oi,cloneObject:$c,deepCloneObject:om,deepCloneDefinition:fl,getProperty:hh,setProperty:vh,copyPropertiesIfPresent:nm,copyPropertyIfPresent:gh,getAllKeysInObjects:yh,getAllValuesInObject:lo,mergeDeep:Sr,missingOrEmptyObject:am,get:sm,set:lm,getValueUsingField:Jn,removeAllReferences:mh,isNonNullObject:hl}),bp={};function Ut(n,i){bp[i]||(n(),bp[i]=!0)}function Il(n){if(n.name)return n.name;var i=/function\s+([^\(]+)/.exec(n.toString());return i&&i.length===2?i[1].trim():null}function kl(n){return!!(n&&n.constructor&&n.call&&n.apply)}function Ch(n){Sh(n,400)}var Cu=[],Su=!1;function Rc(n){Cu.push(n),!Su&&(Su=!0,window.setTimeout(function(){var i=Cu.slice();Cu.length=0,Su=!1,i.forEach(function(e){return e()})},0))}function Sh(n,i){i===void 0&&(i=0),n.length>0&&window.setTimeout(function(){return n.forEach(function(e){return e()})},i)}function zr(n,i){var e;return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var o=this;window.clearTimeout(e),e=window.setTimeout(function(){n.apply(o,t)},i)}}function xc(n,i){var e=0;return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var o=this,a=new Date().getTime();a-e<i||(e=a,n.apply(o,t))}}function ed(n,i,e,t){e===void 0&&(e=100);var r=new Date().getTime(),o=null,a=!1,s=function(){var l=new Date().getTime()-r>e;(n()||l)&&(i(),a=!0,o!=null&&(window.clearInterval(o),o=null),l&&t&&console.warn(t))};s(),a||(o=window.setInterval(s,10))}function cm(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return function(e){return n.reduce(function(t,r){return r(t)},e)}}function wh(n){n&&n()}var dm=function(){},pm=Object.freeze({__proto__:null,doOnce:Ut,getFunctionName:Il,isFunction:kl,executeInAWhile:Ch,executeNextVMTurn:Rc,executeAfter:Sh,debounce:zr,throttle:xc,waitUntil:ed,compose:cm,callIfPresent:wh,noop:dm}),je;(function(n){n.CommunityCoreModule="@ag-grid-community/core",n.InfiniteRowModelModule="@ag-grid-community/infinite-row-model",n.ClientSideRowModelModule="@ag-grid-community/client-side-row-model",n.CsvExportModule="@ag-grid-community/csv-export",n.EnterpriseCoreModule="@ag-grid-enterprise/core",n.RowGroupingModule="@ag-grid-enterprise/row-grouping",n.ColumnsToolPanelModule="@ag-grid-enterprise/column-tool-panel",n.FiltersToolPanelModule="@ag-grid-enterprise/filter-tool-panel",n.MenuModule="@ag-grid-enterprise/menu",n.SetFilterModule="@ag-grid-enterprise/set-filter",n.MultiFilterModule="@ag-grid-enterprise/multi-filter",n.StatusBarModule="@ag-grid-enterprise/status-bar",n.SideBarModule="@ag-grid-enterprise/side-bar",n.RangeSelectionModule="@ag-grid-enterprise/range-selection",n.MasterDetailModule="@ag-grid-enterprise/master-detail",n.RichSelectModule="@ag-grid-enterprise/rich-select",n.GridChartsModule="@ag-grid-enterprise/charts",n.ViewportRowModelModule="@ag-grid-enterprise/viewport-row-model",n.ServerSideRowModelModule="@ag-grid-enterprise/server-side-row-model",n.ExcelExportModule="@ag-grid-enterprise/excel-export",n.ClipboardModule="@ag-grid-enterprise/clipboard",n.SparklinesModule="@ag-grid-enterprise/sparklines",n.AdvancedFilterModule="@ag-grid-enterprise/advanced-filter",n.AngularModule="@ag-grid-community/angular",n.ReactModule="@ag-grid-community/react",n.VueModule="@ag-grid-community/vue"})(je||(je={}));var Sa=function(n,i){var e=typeof Symbol=="function"&&n[Symbol.iterator];if(!e)return n;var t=e.call(n),r,o=[],a;try{for(;(i===void 0||i-- >0)&&!(r=t.next()).done;)o.push(r.value)}catch(s){a={error:s}}finally{try{r&&!r.done&&(e=t.return)&&e.call(t)}finally{if(a)throw a.error}}return o},Dp=function(n,i){for(var e=0,t=i.length,r=n.length;e<t;e++,r++)n[r]=i[e];return n},gt=function(){function n(){}return n.register=function(i){n.__register(i,!0,void 0)},n.registerModules=function(i){n.__registerModules(i,!0,void 0)},n.__register=function(i,e,t){n.runVersionChecks(i),t!==void 0?(n.areGridScopedModules=!0,n.gridModulesMap[t]===void 0&&(n.gridModulesMap[t]={}),n.gridModulesMap[t][i.moduleName]=i):n.globalModulesMap[i.moduleName]=i,n.setModuleBased(e)},n.__unRegisterGridModules=function(i){delete n.gridModulesMap[i]},n.__registerModules=function(i,e,t){n.setModuleBased(e),i&&i.forEach(function(r){return n.__register(r,e,t)})},n.isValidModuleVersion=function(i){var e=Sa(i.version.split(".")||[],2),t=e[0],r=e[1],o=Sa(n.currentModuleVersion.split(".")||[],2),a=o[0],s=o[1];return t===a&&r===s},n.runVersionChecks=function(i){if(n.currentModuleVersion||(n.currentModuleVersion=i.version),i.version?n.isValidModuleVersion(i)||console.error("AG Grid: You are using incompatible versions of AG Grid modules. Major and minor versions should always match across modules. '"+i.moduleName+"' is version "+i.version+" but the other modules are version "+this.currentModuleVersion+". Please update all modules to the same version."):console.error("AG Grid: You are using incompatible versions of AG Grid modules. Major and minor versions should always match across modules. '"+i.moduleName+"' is incompatible. Please update all modules to the same version."),i.validate){var e=i.validate();if(!e.isValid){var t=e;console.error("AG Grid: "+t.message)}}},n.setModuleBased=function(i){n.moduleBased===void 0?n.moduleBased=i:n.moduleBased!==i&&Ut(function(){console.warn("AG Grid: You are mixing modules (i.e. @ag-grid-community/core) and packages (ag-grid-community) - you can only use one or the other of these mechanisms."),console.warn("Please see https://www.ag-grid.com/javascript-grid/packages-modules/ for more information.")},"ModulePackageCheck")},n.__setIsBundled=function(){n.isBundled=!0},n.__assertRegistered=function(i,e,t){var r;if(this.__isRegistered(i,t))return!0;var o=e+i,a;if(n.isBundled)a="AG Grid: unable to use "+e+` as 'ag-grid-enterprise' has not been loaded. Check you are using the Enterprise bundle:
        
        <script src="https://cdn.jsdelivr.net/npm/ag-grid-enterprise@AG_GRID_VERSION/dist/ag-grid-enterprise.min.js"><\/script>
        
For more info see: https://ag-grid.com/javascript-data-grid/getting-started/#getting-started-with-ag-grid-enterprise`;else if(n.moduleBased||n.moduleBased===void 0){var s=(r=Object.entries(je).find(function(l){var u=Sa(l,2);u[0];var c=u[1];return c===i}))===null||r===void 0?void 0:r[0];a="AG Grid: unable to use "+e+" as the "+s+" is not registered"+(n.areGridScopedModules?" for gridId: "+t:"")+`. Check if you have registered the module:
           
    import { ModuleRegistry } from '@ag-grid-community/core';
    import { `+s+" } from '"+i+`';
    
    ModuleRegistry.registerModules([ `+s+` ]);

For more info see: https://www.ag-grid.com/javascript-grid/modules/`}else a="AG Grid: unable to use "+e+` as package 'ag-grid-enterprise' has not been imported. Check that you have imported the package:
            
    import 'ag-grid-enterprise';
            
For more info see: https://www.ag-grid.com/javascript-grid/packages/`;return Ut(function(){console.warn(a)},o),!1},n.__isRegistered=function(i,e){var t;return!!n.globalModulesMap[i]||!!(!((t=n.gridModulesMap[e])===null||t===void 0)&&t[i])},n.__getRegisteredModules=function(i){return Dp(Dp([],Sa(Tn(n.globalModulesMap))),Sa(Tn(n.gridModulesMap[i]||{})))},n.__getGridRegisteredModules=function(i){var e;return Tn((e=n.gridModulesMap[i])!==null&&e!==void 0?e:{})||[]},n.__isPackageBased=function(){return!n.moduleBased},n.globalModulesMap={},n.gridModulesMap={},n.areGridScopedModules=!1,n}(),fm=function(n,i){var e=typeof Symbol=="function"&&n[Symbol.iterator];if(!e)return n;var t=e.call(n),r,o=[],a;try{for(;(i===void 0||i-- >0)&&!(r=t.next()).done;)o.push(r.value)}catch(s){a={error:s}}finally{try{r&&!r.done&&(e=t.return)&&e.call(t)}finally{if(a)throw a.error}}return o},hm=function(n,i){for(var e=0,t=i.length,r=n.length;e<t;e++,r++)n[r]=i[e];return n},vm=function(){function n(i,e){if(this.beanWrappers={},this.destroyed=!1,!(!i||!i.beanClasses)){this.contextParams=i,this.logger=e,this.logger.log(">> creating ag-Application Context"),this.createBeans();var t=this.getBeanInstances();this.wireBeans(t),this.logger.log(">> ag-Application Context ready - component is alive")}}return n.prototype.getBeanInstances=function(){return Tn(this.beanWrappers).map(function(i){return i.beanInstance})},n.prototype.createBean=function(i,e){if(!i)throw Error("Can't wire to bean since it is null");return this.wireBeans([i],e),i},n.prototype.wireBeans=function(i,e){this.autoWireBeans(i),this.methodWireBeans(i),this.callLifeCycleMethods(i,"preConstructMethods"),ue(e)&&i.forEach(e),this.callLifeCycleMethods(i,"postConstructMethods")},n.prototype.createBeans=function(){var i=this;this.contextParams.beanClasses.forEach(this.createBeanWrapper.bind(this)),Oi(this.beanWrappers,function(t,r){var o;r.bean.__agBeanMetaData&&r.bean.__agBeanMetaData.autowireMethods&&r.bean.__agBeanMetaData.autowireMethods.agConstructor&&(o=r.bean.__agBeanMetaData.autowireMethods.agConstructor);var a=i.getBeansForParameters(o,r.bean.name),s=new(r.bean.bind.apply(r.bean,hm([null],fm(a))));r.beanInstance=s});var e=Object.keys(this.beanWrappers).join(", ");this.logger.log("created beans: "+e)},n.prototype.createBeanWrapper=function(i){var e=i.__agBeanMetaData;if(!e){var t=void 0;i.prototype.constructor?t=Il(i.prototype.constructor):t=""+i,console.error("Context item "+t+" is not a bean");return}var r={bean:i,beanInstance:null,beanName:e.beanName};this.beanWrappers[e.beanName]=r},n.prototype.autoWireBeans=function(i){var e=this;i.forEach(function(t){e.forEachMetaDataInHierarchy(t,function(r,o){var a=r.agClassAttributes;a&&a.forEach(function(s){var l=e.lookupBeanInstance(o,s.beanName,s.optional);t[s.attributeName]=l})})})},n.prototype.methodWireBeans=function(i){var e=this;i.forEach(function(t){e.forEachMetaDataInHierarchy(t,function(r,o){Oi(r.autowireMethods,function(a,s){if(a!=="agConstructor"){var l=e.getBeansForParameters(s,o);t[a].apply(t,l)}})})})},n.prototype.forEachMetaDataInHierarchy=function(i,e){for(var t=Object.getPrototypeOf(i);t!=null;){var r=t.constructor;if(r.hasOwnProperty("__agBeanMetaData")){var o=r.__agBeanMetaData,a=this.getBeanName(r);e(o,a)}t=Object.getPrototypeOf(t)}},n.prototype.getBeanName=function(i){if(i.__agBeanMetaData&&i.__agBeanMetaData.beanName)return i.__agBeanMetaData.beanName;var e=i.toString(),t=e.substring(9,e.indexOf("("));return t},n.prototype.getBeansForParameters=function(i,e){var t=this,r=[];return i&&Oi(i,function(o,a){var s=t.lookupBeanInstance(e,a);r[Number(o)]=s}),r},n.prototype.lookupBeanInstance=function(i,e,t){if(t===void 0&&(t=!1),this.destroyed)return this.logger.log("AG Grid: bean reference "+e+" is used after the grid is destroyed!"),null;if(e==="context")return this;if(this.contextParams.providedBeanInstances&&this.contextParams.providedBeanInstances.hasOwnProperty(e))return this.contextParams.providedBeanInstances[e];var r=this.beanWrappers[e];return r?r.beanInstance:(t||console.error("AG Grid: unable to find bean reference "+e+" while initialising "+i),null)},n.prototype.callLifeCycleMethods=function(i,e){var t=this;i.forEach(function(r){return t.callLifeCycleMethodsOnBean(r,e)})},n.prototype.callLifeCycleMethodsOnBean=function(i,e,t){var r={};this.forEachMetaDataInHierarchy(i,function(a){var s=a[e];s&&s.forEach(function(l){l!=t&&(r[l]=!0)})});var o=Object.keys(r);o.forEach(function(a){return i[a]()})},n.prototype.getBean=function(i){return this.lookupBeanInstance("getBean",i,!0)},n.prototype.destroy=function(){if(!this.destroyed){this.destroyed=!0,this.logger.log(">> Shutting down ag-Application Context");var i=this.getBeanInstances();this.destroyBeans(i),this.contextParams.providedBeanInstances=null,gt.__unRegisterGridModules(this.contextParams.gridId),this.logger.log(">> ag-Application Context shut down - component is dead")}},n.prototype.destroyBean=function(i){i&&this.destroyBeans([i])},n.prototype.destroyBeans=function(i){var e=this;return i?(i.forEach(function(t){e.callLifeCycleMethodsOnBean(t,"preDestroyMethods","destroy");var r=t;typeof r.destroy=="function"&&r.destroy()}),[]):[]},n.prototype.isDestroyed=function(){return this.destroyed},n.prototype.getGridId=function(){return this.contextParams.gridId},n}();function Rp(n,i,e){var t=bn(n.constructor);t.preConstructMethods||(t.preConstructMethods=[]),t.preConstructMethods.push(i)}function Oe(n,i,e){var t=bn(n.constructor);t.postConstructMethods||(t.postConstructMethods=[]),t.postConstructMethods.push(i)}function Ki(n,i,e){var t=bn(n.constructor);t.preDestroyMethods||(t.preDestroyMethods=[]),t.preDestroyMethods.push(i)}function Ue(n){return function(i){var e=bn(i);e.beanName=n}}function T(n){return function(i,e,t){Th(i,n,!1,i,e,null)}}function Zt(n){return function(i,e,t){Th(i,n,!0,i,e,null)}}function Th(n,i,e,t,r,o){if(i===null){console.error("AG Grid: Autowired name should not be null");return}if(typeof o=="number"){console.error("AG Grid: Autowired should be on an attribute");return}var a=bn(n.constructor);a.agClassAttributes||(a.agClassAttributes=[]),a.agClassAttributes.push({attributeName:r,beanName:i,optional:e})}function er(n){return function(i,e,t){var r=typeof i=="function"?i:i.constructor,o;if(typeof t=="number"){var a=void 0;e?(o=bn(r),a=e):(o=bn(r),a="agConstructor"),o.autowireMethods||(o.autowireMethods={}),o.autowireMethods[a]||(o.autowireMethods[a]={}),o.autowireMethods[a][t]=n}}}function bn(n){return n.hasOwnProperty("__agBeanMetaData")||(n.__agBeanMetaData={}),n.__agBeanMetaData}var xp=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},wa=function(n,i){return function(e,t){i(e,t,n)}},Zo=function(){function n(){this.allSyncListeners=new Map,this.allAsyncListeners=new Map,this.globalSyncListeners=new Set,this.globalAsyncListeners=new Set,this.asyncFunctionsQueue=[],this.scheduled=!1,this.firedEvents={}}return n.prototype.setBeans=function(i,e,t,r,o){if(r===void 0&&(r=null),o===void 0&&(o=null),this.frameworkOverrides=t,this.gridOptionsService=e,r){var a=e.useAsyncEvents();this.addGlobalListener(r,a)}o&&this.addGlobalListener(o,!1)},n.prototype.getListeners=function(i,e,t){var r=e?this.allAsyncListeners:this.allSyncListeners,o=r.get(i);return!o&&t&&(o=new Set,r.set(i,o)),o},n.prototype.noRegisteredListenersExist=function(){return this.allSyncListeners.size===0&&this.allAsyncListeners.size===0&&this.globalSyncListeners.size===0&&this.globalAsyncListeners.size===0},n.prototype.addEventListener=function(i,e,t){t===void 0&&(t=!1),this.getListeners(i,t,!0).add(e)},n.prototype.removeEventListener=function(i,e,t){t===void 0&&(t=!1);var r=this.getListeners(i,t,!1);if(r&&(r.delete(e),r.size===0)){var o=t?this.allAsyncListeners:this.allSyncListeners;o.delete(i)}},n.prototype.addGlobalListener=function(i,e){e===void 0&&(e=!1),(e?this.globalAsyncListeners:this.globalSyncListeners).add(i)},n.prototype.removeGlobalListener=function(i,e){e===void 0&&(e=!1),(e?this.globalAsyncListeners:this.globalSyncListeners).delete(i)},n.prototype.dispatchEvent=function(i){var e=i;if(this.gridOptionsService){var t=this.gridOptionsService,r=t.api,o=t.columnApi,a=t.context;e.api=r,e.columnApi=o,e.context=a}this.dispatchToListeners(e,!0),this.dispatchToListeners(e,!1),this.firedEvents[e.type]=!0},n.prototype.dispatchEventOnce=function(i){this.firedEvents[i.type]||this.dispatchEvent(i)},n.prototype.dispatchToListeners=function(i,e){var t=this,r=i.type;if(e&&"event"in i){var o=i.event;o instanceof Event&&(i.eventPath=o.composedPath())}var a=function(u){return u.forEach(function(c){e?t.dispatchAsync(function(){return c(i)}):c(i)})},s=new Set(this.getListeners(r,e,!1));s.size>0&&a(s);var l=new Set(e?this.globalAsyncListeners:this.globalSyncListeners);l.forEach(function(u){e?t.dispatchAsync(function(){return t.frameworkOverrides.dispatchEvent(r,function(){return u(r,i)},!0)}):t.frameworkOverrides.dispatchEvent(r,function(){return u(r,i)},!0)})},n.prototype.dispatchAsync=function(i){this.asyncFunctionsQueue.push(i),this.scheduled||(window.setTimeout(this.flushAsyncQueue.bind(this),0),this.scheduled=!0)},n.prototype.flushAsyncQueue=function(){this.scheduled=!1;var i=this.asyncFunctionsQueue.slice();this.asyncFunctionsQueue=[],i.forEach(function(e){return e()})},xp([wa(0,er("loggerFactory")),wa(1,er("gridOptionsService")),wa(2,er("frameworkOverrides")),wa(3,er("globalEventListener")),wa(4,er("globalSyncEventListener"))],n.prototype,"setBeans",null),n=xp([Ue("eventService")],n),n}(),Ls=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},Ap=function(n,i){var e=typeof Symbol=="function"&&n[Symbol.iterator];if(!e)return n;var t=e.call(n),r,o=[],a;try{for(;(i===void 0||i-- >0)&&!(r=t.next()).done;)o.push(r.value)}catch(s){a={error:s}}finally{try{r&&!r.done&&(e=t.return)&&e.call(t)}finally{if(a)throw a.error}}return o},Lp=function(n,i){for(var e=0,t=i.length,r=n.length;e<t;e++,r++)n[r]=i[e];return n},gm=0;function Oh(){return gm++}var li=function(){function n(i,e,t,r){this.instanceId=Oh(),this.autoHeaderHeight=null,this.moving=!1,this.menuVisible=!1,this.lastLeftPinned=!1,this.firstRightPinned=!1,this.filterActive=!1,this.eventService=new Zo,this.tooltipEnabled=!1,this.rowGroupActive=!1,this.pivotActive=!1,this.aggregationActive=!1,this.colDef=i,this.userProvidedColDef=e,this.colId=t,this.primary=r,this.setState(i)}return n.prototype.getInstanceId=function(){return this.instanceId},n.prototype.setState=function(i){i.sort!==void 0?(i.sort==="asc"||i.sort==="desc")&&(this.sort=i.sort):(i.initialSort==="asc"||i.initialSort==="desc")&&(this.sort=i.initialSort);var e=Ar(i.sortIndex),t=Ar(i.initialSortIndex);e!==void 0?e!==null&&(this.sortIndex=e):t!==null&&(this.sortIndex=t);var r=io(i.hide),o=io(i.initialHide);r!==void 0?this.visible=!r:this.visible=!o,i.pinned!==void 0?this.setPinned(i.pinned):this.setPinned(i.initialPinned);var a=Ar(i.flex),s=Ar(i.initialFlex);a!==void 0?this.flex=a:s!==void 0&&(this.flex=s)},n.prototype.setColDef=function(i,e){this.colDef=i,this.userProvidedColDef=e,this.initMinAndMaxWidths(),this.initDotNotation(),this.eventService.dispatchEvent(this.createColumnEvent("colDefChanged","api"))},n.prototype.getUserProvidedColDef=function(){return this.userProvidedColDef},n.prototype.setParent=function(i){this.parent=i},n.prototype.getParent=function(){return this.parent},n.prototype.setOriginalParent=function(i){this.originalParent=i},n.prototype.getOriginalParent=function(){return this.originalParent},n.prototype.initialise=function(){this.initMinAndMaxWidths(),this.resetActualWidth("gridInitializing"),this.initDotNotation(),this.initTooltip(),this.validate()},n.prototype.initDotNotation=function(){var i=this.gridOptionsService.is("suppressFieldDotNotation");this.fieldContainsDots=ue(this.colDef.field)&&this.colDef.field.indexOf(".")>=0&&!i,this.tooltipFieldContainsDots=ue(this.colDef.tooltipField)&&this.colDef.tooltipField.indexOf(".")>=0&&!i},n.prototype.initMinAndMaxWidths=function(){var i=this.colDef;this.minWidth=this.columnUtils.calculateColMinWidth(i),this.maxWidth=this.columnUtils.calculateColMaxWidth(i)},n.prototype.initTooltip=function(){this.tooltipEnabled=ue(this.colDef.tooltipField)||ue(this.colDef.tooltipValueGetter)||ue(this.colDef.tooltipComponent)},n.prototype.resetActualWidth=function(i){i===void 0&&(i="api");var e=this.columnUtils.calculateColInitialWidth(this.colDef);this.setActualWidth(e,i,!0)},n.prototype.isEmptyGroup=function(){return!1},n.prototype.isRowGroupDisplayed=function(i){if(vt(this.colDef)||vt(this.colDef.showRowGroup))return!1;var e=this.colDef.showRowGroup===!0,t=this.colDef.showRowGroup===i;return e||t},n.prototype.isPrimary=function(){return this.primary},n.prototype.isFilterAllowed=function(){var i=!!this.colDef.filter;return i},n.prototype.isFieldContainsDots=function(){return this.fieldContainsDots},n.prototype.isTooltipEnabled=function(){return this.tooltipEnabled},n.prototype.isTooltipFieldContainsDots=function(){return this.tooltipFieldContainsDots},n.prototype.validate=function(){var i=this.colDef;function e(u,c,d){Ut(function(){d?console.warn(u,d):Ut(function(){return console.warn(u)},c)},c)}var t=this.gridOptionsService.isRowModelType("clientSide");if(t&&!gt.__isRegistered(je.RowGroupingModule,this.gridOptionsService.getGridId())){var r=["enableRowGroup","rowGroup","rowGroupIndex","enablePivot","enableValue","pivot","pivotIndex","aggFunc"],o=r.filter(function(u){return ue(i[u])});o.length>0&&gt.__assertRegistered(je.RowGroupingModule,o.map(function(u){return"colDef."+u}).join(", "),this.gridOptionsService.getGridId())}if((this.colDef.cellEditor==="agRichSelect"||this.colDef.cellEditor==="agRichSelectCellEditor")&&gt.__assertRegistered(je.RichSelectModule,this.colDef.cellEditor,this.gridOptionsService.getGridId()),this.gridOptionsService.is("treeData")){var a=["rowGroup","rowGroupIndex","pivot","pivotIndex"],o=a.filter(function(c){return ue(i[c])});o.length>0&&e("AG Grid: "+o.join()+" is not possible when doing tree data, your column definition should not have "+o.join(),"TreeDataCannotRowGroup")}if(ue(i.menuTabs))if(Array.isArray(i.menuTabs)){var s=["filterMenuTab"],l=["columnsMenuTab","generalMenuTab"],o=l.filter(function(c){return i.menuTabs.includes(c)});o.length>0&&gt.__assertRegistered(je.MenuModule,"menuTab(s): "+o.map(function(c){return"'"+c+"'"}).join(),this.gridOptionsService.getGridId()),i.menuTabs.forEach(function(c){!l.includes(c)&&!s.includes(c)&&e("AG Grid: '"+c+"' is not valid for 'colDef.menuTabs'. Valid values are: "+Lp(Lp([],Ap(s)),Ap(l)).map(function(d){return"'"+d+"'"}).join()+".","wrongValue_menuTabs_"+c)})}else e("AG Grid: The typeof 'colDef.menuTabs' should be an array not:"+typeof i.menuTabs,"wrongType_menuTabs");ue(i.columnsMenuParams)&&gt.__assertRegistered(je.MenuModule,"columnsMenuParams",this.gridOptionsService.getGridId()),ue(i.columnsMenuParams)&&gt.__assertRegistered(je.ColumnsToolPanelModule,"columnsMenuParams",this.gridOptionsService.getGridId()),ue(this.colDef.width)&&typeof this.colDef.width!="number"&&e("AG Grid: colDef.width should be a number, not "+typeof this.colDef.width,"ColumnCheck"),ue(i.columnGroupShow)&&i.columnGroupShow!=="closed"&&i.columnGroupShow!=="open"&&e("AG Grid: '"+i.columnGroupShow+"' is not valid for columnGroupShow. Valid values are 'open', 'closed', undefined, null","columnGroupShow_invalid")},n.prototype.addEventListener=function(i,e){this.eventService.addEventListener(i,e)},n.prototype.removeEventListener=function(i,e){this.eventService.removeEventListener(i,e)},n.prototype.createColumnFunctionCallbackParams=function(i){return{node:i,data:i.data,column:this,colDef:this.colDef,context:this.gridOptionsService.context,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi}},n.prototype.isSuppressNavigable=function(i){if(typeof this.colDef.suppressNavigable=="boolean")return this.colDef.suppressNavigable;if(typeof this.colDef.suppressNavigable=="function"){var e=this.createColumnFunctionCallbackParams(i),t=this.colDef.suppressNavigable;return t(e)}return!1},n.prototype.isCellEditable=function(i){return i.group&&!this.gridOptionsService.is("enableGroupEdit")?!1:this.isColumnFunc(i,this.colDef.editable)},n.prototype.isSuppressFillHandle=function(){return!!io(this.colDef.suppressFillHandle)},n.prototype.isAutoHeight=function(){return!!io(this.colDef.autoHeight)},n.prototype.isAutoHeaderHeight=function(){return!!io(this.colDef.autoHeaderHeight)},n.prototype.isRowDrag=function(i){return this.isColumnFunc(i,this.colDef.rowDrag)},n.prototype.isDndSource=function(i){return this.isColumnFunc(i,this.colDef.dndSource)},n.prototype.isCellCheckboxSelection=function(i){return this.isColumnFunc(i,this.colDef.checkboxSelection)},n.prototype.isSuppressPaste=function(i){return this.isColumnFunc(i,this.colDef?this.colDef.suppressPaste:null)},n.prototype.isResizable=function(){return!!io(this.colDef.resizable)},n.prototype.isColumnFunc=function(i,e){if(typeof e=="boolean")return e;if(typeof e=="function"){var t=this.createColumnFunctionCallbackParams(i),r=e;return r(t)}return!1},n.prototype.setMoving=function(i,e){e===void 0&&(e="api"),this.moving=i,this.eventService.dispatchEvent(this.createColumnEvent("movingChanged",e))},n.prototype.createColumnEvent=function(i,e){return{type:i,column:this,columns:[this],source:e,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context}},n.prototype.isMoving=function(){return this.moving},n.prototype.getSort=function(){return this.sort},n.prototype.setSort=function(i,e){e===void 0&&(e="api"),this.sort!==i&&(this.sort=i,this.eventService.dispatchEvent(this.createColumnEvent("sortChanged",e))),this.dispatchStateUpdatedEvent("sort")},n.prototype.setMenuVisible=function(i,e){e===void 0&&(e="api"),this.menuVisible!==i&&(this.menuVisible=i,this.eventService.dispatchEvent(this.createColumnEvent("menuVisibleChanged",e)))},n.prototype.isMenuVisible=function(){return this.menuVisible},n.prototype.isSortAscending=function(){return this.sort==="asc"},n.prototype.isSortDescending=function(){return this.sort==="desc"},n.prototype.isSortNone=function(){return vt(this.sort)},n.prototype.isSorting=function(){return ue(this.sort)},n.prototype.getSortIndex=function(){return this.sortIndex},n.prototype.setSortIndex=function(i){this.sortIndex=i,this.dispatchStateUpdatedEvent("sortIndex")},n.prototype.setAggFunc=function(i){this.aggFunc=i,this.dispatchStateUpdatedEvent("aggFunc")},n.prototype.getAggFunc=function(){return this.aggFunc},n.prototype.getLeft=function(){return this.left},n.prototype.getOldLeft=function(){return this.oldLeft},n.prototype.getRight=function(){return this.left+this.actualWidth},n.prototype.setLeft=function(i,e){e===void 0&&(e="api"),this.oldLeft=this.left,this.left!==i&&(this.left=i,this.eventService.dispatchEvent(this.createColumnEvent("leftChanged",e)))},n.prototype.isFilterActive=function(){return this.filterActive},n.prototype.setFilterActive=function(i,e,t){e===void 0&&(e="api"),this.filterActive!==i&&(this.filterActive=i,this.eventService.dispatchEvent(this.createColumnEvent("filterActiveChanged",e)));var r=this.createColumnEvent("filterChanged",e);t&&Sr(r,t),this.eventService.dispatchEvent(r)},n.prototype.isHovered=function(){return this.columnHoverService.isHovered(this)},n.prototype.setPinned=function(i){i===!0||i==="left"?this.pinned="left":i==="right"?this.pinned="right":this.pinned=null,this.dispatchStateUpdatedEvent("pinned")},n.prototype.setFirstRightPinned=function(i,e){e===void 0&&(e="api"),this.firstRightPinned!==i&&(this.firstRightPinned=i,this.eventService.dispatchEvent(this.createColumnEvent("firstRightPinnedChanged",e)))},n.prototype.setLastLeftPinned=function(i,e){e===void 0&&(e="api"),this.lastLeftPinned!==i&&(this.lastLeftPinned=i,this.eventService.dispatchEvent(this.createColumnEvent("lastLeftPinnedChanged",e)))},n.prototype.isFirstRightPinned=function(){return this.firstRightPinned},n.prototype.isLastLeftPinned=function(){return this.lastLeftPinned},n.prototype.isPinned=function(){return this.pinned==="left"||this.pinned==="right"},n.prototype.isPinnedLeft=function(){return this.pinned==="left"},n.prototype.isPinnedRight=function(){return this.pinned==="right"},n.prototype.getPinned=function(){return this.pinned},n.prototype.setVisible=function(i,e){e===void 0&&(e="api");var t=i===!0;this.visible!==t&&(this.visible=t,this.eventService.dispatchEvent(this.createColumnEvent("visibleChanged",e))),this.dispatchStateUpdatedEvent("hide")},n.prototype.isVisible=function(){return this.visible},n.prototype.isSpanHeaderHeight=function(){var i=this.getColDef();return!i.suppressSpanHeaderHeight&&!i.autoHeaderHeight},n.prototype.getColDef=function(){return this.colDef},n.prototype.getColumnGroupShow=function(){return this.colDef.columnGroupShow},n.prototype.getColId=function(){return this.colId},n.prototype.getId=function(){return this.colId},n.prototype.getUniqueId=function(){return this.colId},n.prototype.getDefinition=function(){return this.colDef},n.prototype.getActualWidth=function(){return this.actualWidth},n.prototype.getAutoHeaderHeight=function(){return this.autoHeaderHeight},n.prototype.setAutoHeaderHeight=function(i){var e=i!==this.autoHeaderHeight;return this.autoHeaderHeight=i,e},n.prototype.createBaseColDefParams=function(i){var e={node:i,data:i.data,colDef:this.colDef,column:this,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context};return e},n.prototype.getColSpan=function(i){if(vt(this.colDef.colSpan))return 1;var e=this.createBaseColDefParams(i),t=this.colDef.colSpan(e);return Math.max(t,1)},n.prototype.getRowSpan=function(i){if(vt(this.colDef.rowSpan))return 1;var e=this.createBaseColDefParams(i),t=this.colDef.rowSpan(e);return Math.max(t,1)},n.prototype.setActualWidth=function(i,e,t){e===void 0&&(e="api"),t===void 0&&(t=!1),this.minWidth!=null&&(i=Math.max(i,this.minWidth)),this.maxWidth!=null&&(i=Math.min(i,this.maxWidth)),this.actualWidth!==i&&(this.actualWidth=i,this.flex&&e!=="flex"&&e!=="gridInitializing"&&(this.flex=null),t||this.fireColumnWidthChangedEvent(e)),this.dispatchStateUpdatedEvent("width")},n.prototype.fireColumnWidthChangedEvent=function(i){this.eventService.dispatchEvent(this.createColumnEvent("widthChanged",i))},n.prototype.isGreaterThanMax=function(i){return this.maxWidth!=null?i>this.maxWidth:!1},n.prototype.getMinWidth=function(){return this.minWidth},n.prototype.getMaxWidth=function(){return this.maxWidth},n.prototype.getFlex=function(){return this.flex||0},n.prototype.setFlex=function(i){this.flex!==i&&(this.flex=i),this.dispatchStateUpdatedEvent("flex")},n.prototype.setMinimum=function(i){i===void 0&&(i="api"),ue(this.minWidth)&&this.setActualWidth(this.minWidth,i)},n.prototype.setRowGroupActive=function(i,e){e===void 0&&(e="api"),this.rowGroupActive!==i&&(this.rowGroupActive=i,this.eventService.dispatchEvent(this.createColumnEvent("columnRowGroupChanged",e))),this.dispatchStateUpdatedEvent("rowGroup")},n.prototype.isRowGroupActive=function(){return this.rowGroupActive},n.prototype.setPivotActive=function(i,e){e===void 0&&(e="api"),this.pivotActive!==i&&(this.pivotActive=i,this.eventService.dispatchEvent(this.createColumnEvent("columnPivotChanged",e))),this.dispatchStateUpdatedEvent("pivot")},n.prototype.isPivotActive=function(){return this.pivotActive},n.prototype.isAnyFunctionActive=function(){return this.isPivotActive()||this.isRowGroupActive()||this.isValueActive()},n.prototype.isAnyFunctionAllowed=function(){return this.isAllowPivot()||this.isAllowRowGroup()||this.isAllowValue()},n.prototype.setValueActive=function(i,e){e===void 0&&(e="api"),this.aggregationActive!==i&&(this.aggregationActive=i,this.eventService.dispatchEvent(this.createColumnEvent("columnValueChanged",e)))},n.prototype.isValueActive=function(){return this.aggregationActive},n.prototype.isAllowPivot=function(){return this.colDef.enablePivot===!0},n.prototype.isAllowValue=function(){return this.colDef.enableValue===!0},n.prototype.isAllowRowGroup=function(){return this.colDef.enableRowGroup===!0},n.prototype.getMenuTabs=function(i){var e=this.getColDef().menuTabs;return e==null&&(e=i),e},n.prototype.dispatchStateUpdatedEvent=function(i){this.eventService.dispatchEvent({type:n.EVENT_STATE_UPDATED,key:i})},n.EVENT_MOVING_CHANGED="movingChanged",n.EVENT_LEFT_CHANGED="leftChanged",n.EVENT_WIDTH_CHANGED="widthChanged",n.EVENT_LAST_LEFT_PINNED_CHANGED="lastLeftPinnedChanged",n.EVENT_FIRST_RIGHT_PINNED_CHANGED="firstRightPinnedChanged",n.EVENT_VISIBLE_CHANGED="visibleChanged",n.EVENT_FILTER_CHANGED="filterChanged",n.EVENT_FILTER_ACTIVE_CHANGED="filterActiveChanged",n.EVENT_SORT_CHANGED="sortChanged",n.EVENT_COL_DEF_CHANGED="colDefChanged",n.EVENT_MENU_VISIBLE_CHANGED="menuVisibleChanged",n.EVENT_ROW_GROUP_CHANGED="columnRowGroupChanged",n.EVENT_PIVOT_CHANGED="columnPivotChanged",n.EVENT_VALUE_CHANGED="columnValueChanged",n.EVENT_STATE_UPDATED="columnStateUpdated",Ls([T("gridOptionsService")],n.prototype,"gridOptionsService",void 0),Ls([T("columnUtils")],n.prototype,"columnUtils",void 0),Ls([T("columnHoverService")],n.prototype,"columnHoverService",void 0),Ls([Oe],n.prototype,"initialise",null),n}(),ym=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},xi=function(){function n(i,e,t,r){this.localEventService=new Zo,this.expandable=!1,this.instanceId=Oh(),this.expandableListenerRemoveCallback=null,this.colGroupDef=i,this.groupId=e,this.expanded=!!i&&!!i.openByDefault,this.padding=t,this.level=r}return n.prototype.destroy=function(){this.expandableListenerRemoveCallback&&this.reset(null,void 0)},n.prototype.reset=function(i,e){this.colGroupDef=i,this.level=e,this.originalParent=null,this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback(),this.children=void 0,this.expandable=void 0},n.prototype.getInstanceId=function(){return this.instanceId},n.prototype.setOriginalParent=function(i){this.originalParent=i},n.prototype.getOriginalParent=function(){return this.originalParent},n.prototype.getLevel=function(){return this.level},n.prototype.isVisible=function(){return this.children?this.children.some(function(i){return i.isVisible()}):!1},n.prototype.isPadding=function(){return this.padding},n.prototype.setExpanded=function(i){this.expanded=i===void 0?!1:i;var e={type:n.EVENT_EXPANDED_CHANGED};this.localEventService.dispatchEvent(e)},n.prototype.isExpandable=function(){return this.expandable},n.prototype.isExpanded=function(){return this.expanded},n.prototype.getGroupId=function(){return this.groupId},n.prototype.getId=function(){return this.getGroupId()},n.prototype.setChildren=function(i){this.children=i},n.prototype.getChildren=function(){return this.children},n.prototype.getColGroupDef=function(){return this.colGroupDef},n.prototype.getLeafColumns=function(){var i=[];return this.addLeafColumns(i),i},n.prototype.addLeafColumns=function(i){this.children&&this.children.forEach(function(e){e instanceof li?i.push(e):e instanceof n&&e.addLeafColumns(i)})},n.prototype.getColumnGroupShow=function(){var i=this.colGroupDef;if(i)return i.columnGroupShow},n.prototype.setupExpandable=function(){var i=this;this.setExpandable(),this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback();var e=this.onColumnVisibilityChanged.bind(this);this.getLeafColumns().forEach(function(t){return t.addEventListener("visibleChanged",e)}),this.expandableListenerRemoveCallback=function(){i.getLeafColumns().forEach(function(t){return t.removeEventListener("visibleChanged",e)}),i.expandableListenerRemoveCallback=null}},n.prototype.setExpandable=function(){if(!this.isPadding()){for(var i=!1,e=!1,t=!1,r=this.findChildrenRemovingPadding(),o=0,a=r.length;o<a;o++){var s=r[o];if(s.isVisible()){var l=s.getColumnGroupShow();l==="open"?(i=!0,t=!0):l==="closed"?(e=!0,t=!0):(i=!0,e=!0)}}var u=i&&e&&t;if(this.expandable!==u){this.expandable=u;var c={type:n.EVENT_EXPANDABLE_CHANGED};this.localEventService.dispatchEvent(c)}}},n.prototype.findChildrenRemovingPadding=function(){var i=[],e=function(t){t.forEach(function(r){var o=r instanceof n&&r.isPadding();o?e(r.children):i.push(r)})};return e(this.children),i},n.prototype.onColumnVisibilityChanged=function(){this.setExpandable()},n.prototype.addEventListener=function(i,e){this.localEventService.addEventListener(i,e)},n.prototype.removeEventListener=function(i,e){this.localEventService.removeEventListener(i,e)},n.EVENT_EXPANDED_CHANGED="expandedChanged",n.EVENT_EXPANDABLE_CHANGED="expandableChanged",ym([Ki],n.prototype,"destroy",null),n}(),mm={numericColumn:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"},rightAligned:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"}};function Ph(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];for(var e=0;e<n.length;e++){var t=n[e];if(ue(t))return t}return null}function Cm(n){return n!=null&&n.length>0}function ai(n){if(!(!n||!n.length))return n[n.length-1]}function Ko(n,i,e){return n==null&&i==null?!0:n!=null&&i!=null&&n.length===i.length&&n.every(function(t,r){return e?e(t,i[r]):i[r]===t})}function Sm(n,i){return Ko(n,i)}function Eh(n){return n.sort(function(i,e){return i-e})}function wm(n,i){if(n)for(var e=n.length-2;e>=0;e--){var t=n[e]===i,r=n[e+1]===i;t&&r&&n.splice(e+1,1)}}function td(n,i){var e=n.indexOf(i);e>=0&&(n[e]=n[n.length-1],n.pop())}function mr(n,i){var e=n.indexOf(i);e>=0&&n.splice(e,1)}function _h(n,i){for(var e=0;e<i.length;e++)td(n,i[e])}function bh(n,i){for(var e=0;e<i.length;e++)mr(n,i[e])}function ns(n,i,e){n.splice(e,0,i)}function Tm(n,i,e){if(!(n==null||i==null))for(var t=i.length-1;t>=0;t--){var r=i[t];ns(n,r,e)}}function Ac(n,i,e){bh(n,i),i.slice().reverse().forEach(function(t){return ns(n,t,e)})}function Lr(n,i){return n.indexOf(i)>-1}function Dh(n){return[].concat.apply([],n)}function Lc(n,i){i==null||n==null||i.forEach(function(e){return n.push(e)})}function Om(n){return n.map(os)}function Pm(n,i){if(n!=null)for(var e=n.length-1;e>=0;e--)i(n[e],e)}var Em=Object.freeze({__proto__:null,firstExistingValue:Ph,existsAndNotEmpty:Cm,last:ai,areEqual:Ko,shallowCompare:Sm,sortNumerically:Eh,removeRepeatsFromArray:wm,removeFromUnorderedArray:td,removeFromArray:mr,removeAllFromUnorderedArray:_h,removeAllFromArray:bh,insertIntoArray:ns,insertArrayIntoArray:Tm,moveInArray:Ac,includes:Lr,flatten:Dh,pushAll:Lc,toStrings:Om,forEachReverse:Pm}),Rh="__ag_Grid_Stop_Propagation",_m=["touchstart","touchend","touchmove","touchcancel","scroll"],wu={};function uo(n){n[Rh]=!0}function Kr(n){return n[Rh]===!0}var id=function(){var n={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"},i=function(e){if(typeof wu[e]=="boolean")return wu[e];var t=document.createElement(n[e]||"div");return e="on"+e,wu[e]=e in t};return i}();function vl(n,i,e){for(var t=i;t;){var r=n.getDomData(t,e);if(r)return r;t=t.parentElement}return null}function gl(n,i){return!i||!n?!1:Ah(i).indexOf(n)>=0}function xh(n){for(var i=[],e=n.target;e;)i.push(e),e=e.parentElement;return i}function Ah(n){var i=n;return i.path?i.path:i.composedPath?i.composedPath():xh(i)}function Lh(n,i,e,t){var r=Lr(_m,e),o=r?{passive:!0}:void 0;n&&n.addEventListener&&n.addEventListener(i,e,t,o)}var bm=Object.freeze({__proto__:null,stopPropagationForAgGrid:uo,isStopPropagationForAgGrid:Kr,isEventSupported:id,getCtrlForEventTarget:vl,isElementInEventPath:gl,createEventPath:xh,getEventPath:Ah,addSafePassiveEventListener:Lh}),pn=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},ve=function(){function n(){var i=this;this.destroyFunctions=[],this.destroyed=!1,this.__v_skip=!0,this.lastChangeSetIdLookup={},this.propertyListenerId=0,this.isAlive=function(){return!i.destroyed}}return n.prototype.getFrameworkOverrides=function(){return this.frameworkOverrides},n.prototype.getContext=function(){return this.context},n.prototype.destroy=function(){this.destroyFunctions.forEach(function(i){return i()}),this.destroyFunctions.length=0,this.destroyed=!0,this.dispatchEvent({type:n.EVENT_DESTROYED})},n.prototype.addEventListener=function(i,e){this.localEventService||(this.localEventService=new Zo),this.localEventService.addEventListener(i,e)},n.prototype.removeEventListener=function(i,e){this.localEventService&&this.localEventService.removeEventListener(i,e)},n.prototype.dispatchEventAsync=function(i){var e=this;window.setTimeout(function(){return e.dispatchEvent(i)},0)},n.prototype.dispatchEvent=function(i){this.localEventService&&this.localEventService.dispatchEvent(i)},n.prototype.addManagedListener=function(i,e,t){var r=this;if(!this.destroyed){i instanceof HTMLElement?Lh(this.getFrameworkOverrides(),i,e,t):i.addEventListener(e,t);var o=function(){return i.removeEventListener(e,t),r.destroyFunctions=r.destroyFunctions.filter(function(a){return a!==o}),null};return this.destroyFunctions.push(o),o}},n.prototype.setupGridOptionListener=function(i,e){var t=this;this.gridOptionsService.addEventListener(i,e);var r=function(){return t.gridOptionsService.removeEventListener(i,e),t.destroyFunctions=t.destroyFunctions.filter(function(o){return o!==r}),null};this.destroyFunctions.push(r)},n.prototype.addManagedPropertyListener=function(i,e){this.destroyed||this.setupGridOptionListener(i,e)},n.prototype.addManagedPropertyListeners=function(i,e){var t=this;if(!this.destroyed){var r=i.join("-")+this.propertyListenerId++,o=function(a){if(a.changeSet){if(a.changeSet&&a.changeSet.id===t.lastChangeSetIdLookup[r])return;t.lastChangeSetIdLookup[r]=a.changeSet.id}var s={type:"gridPropertyChanged",changeSet:a.changeSet};e(s)};i.forEach(function(a){return t.setupGridOptionListener(a,o)})}},n.prototype.addDestroyFunc=function(i){this.isAlive()?this.destroyFunctions.push(i):i()},n.prototype.createManagedBean=function(i,e){var t=this.createBean(i,e);return this.addDestroyFunc(this.destroyBean.bind(this,i,e)),t},n.prototype.createBean=function(i,e,t){return(e||this.getContext()).createBean(i,t)},n.prototype.destroyBean=function(i,e){return(e||this.getContext()).destroyBean(i)},n.prototype.destroyBeans=function(i,e){var t=this;return i&&i.forEach(function(r){return t.destroyBean(r,e)}),[]},n.EVENT_DESTROYED="destroyed",pn([T("frameworkOverrides")],n.prototype,"frameworkOverrides",void 0),pn([T("context")],n.prototype,"context",void 0),pn([T("eventService")],n.prototype,"eventService",void 0),pn([T("gridOptionsService")],n.prototype,"gridOptionsService",void 0),pn([T("localeService")],n.prototype,"localeService",void 0),pn([T("environment")],n.prototype,"environment",void 0),pn([Ki],n.prototype,"destroy",null),n}(),Dm=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Ms=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},Rm=function(n,i){return function(e,t){i(e,t,n)}},xm=function(n){Dm(i,n);function i(){return n!==null&&n.apply(this,arguments)||this}return i.prototype.setBeans=function(e){this.logger=e.create("ColumnFactory")},i.prototype.createColumnTree=function(e,t,r){var o=new tm,a=this.extractExistingTreeData(r),s=a.existingCols,l=a.existingGroups,u=a.existingColKeys;o.addExistingKeys(u);var c=this.recursivelyCreateColumns(e,0,t,s,o,l),d=this.findMaxDept(c,0);this.logger.log("Number of levels for grouped columns is "+d);var f=this.balanceColumnTree(c,0,d,o),y=function(S,w){S instanceof xi&&S.setupExpandable(),S.setOriginalParent(w)};return this.columnUtils.depthFirstOriginalTreeSearch(null,f,y),{columnTree:f,treeDept:d}},i.prototype.extractExistingTreeData=function(e){var t=[],r=[],o=[];return e&&this.columnUtils.depthFirstOriginalTreeSearch(null,e,function(a){if(a instanceof xi){var s=a;r.push(s)}else{var l=a;o.push(l.getId()),t.push(l)}}),{existingCols:t,existingGroups:r,existingColKeys:o}},i.prototype.createForAutoGroups=function(e,t){var r=this;return e.map(function(o){return r.createAutoGroupTreeItem(t,o)})},i.prototype.createAutoGroupTreeItem=function(e,t){for(var r=this.findDepth(e),o=t,a=r-1;a>=0;a--){var s=new xi(null,"FAKE_PATH_"+t.getId()+"}_"+a,!0,a);this.createBean(s),s.setChildren([o]),o.setOriginalParent(s),o=s}return r===0&&t.setOriginalParent(null),o},i.prototype.findDepth=function(e){for(var t=0,r=e;r&&r[0]&&r[0]instanceof xi;)t++,r=r[0].getChildren();return t},i.prototype.balanceColumnTree=function(e,t,r,o){for(var a=[],s=0;s<e.length;s++){var l=e[s];if(l instanceof xi){var u=l,c=this.balanceColumnTree(u.getChildren(),t+1,r,o);u.setChildren(c),a.push(u)}else{for(var d=void 0,f=void 0,y=r-1;y>=t;y--){var S=o.getUniqueKey(null,null),w=this.createMergedColGroupDef(null),E=new xi(w,S,!0,t);this.createBean(E),f&&f.setChildren([E]),f=E,d||(d=f)}if(d&&f){a.push(d);var _=e.some(function(L){return L instanceof xi});if(_){f.setChildren([l]);continue}else{f.setChildren(e);break}}a.push(l)}}return a},i.prototype.findMaxDept=function(e,t){for(var r=t,o=0;o<e.length;o++){var a=e[o];if(a instanceof xi){var s=a,l=this.findMaxDept(s.getChildren(),t+1);r<l&&(r=l)}}return r},i.prototype.recursivelyCreateColumns=function(e,t,r,o,a,s){if(!e)return[];for(var l=new Array(e.length),u=0;u<l.length;u++){var c=e[u];this.isColumnGroup(c)?l[u]=this.createColumnGroup(r,c,t,o,a,s):l[u]=this.createColumn(r,c,o,a)}return l},i.prototype.createColumnGroup=function(e,t,r,o,a,s){var l=this.createMergedColGroupDef(t),u=a.getUniqueKey(l.groupId||null,null),c=new xi(l,u,!1,r);this.createBean(c);var d=this.findExistingGroup(t,s);d&&s.splice(d.idx,1);var f=d?.group;f&&c.setExpanded(f.isExpanded());var y=this.recursivelyCreateColumns(l.children,r+1,e,o,a,s);return c.setChildren(y),c},i.prototype.createMergedColGroupDef=function(e){var t={};return Object.assign(t,this.gridOptionsService.get("defaultColGroupDef")),Object.assign(t,e),t},i.prototype.createColumn=function(e,t,r,o){var a=this.findExistingColumn(t,r);a&&r?.splice(a.idx,1);var s=a?.column;if(s){var u=this.addColumnDefaultAndTypes(t,s.getColId());s.setColDef(u,t),this.applyColumnState(s,u)}else{var l=o.getUniqueKey(t.colId,t.field),u=this.addColumnDefaultAndTypes(t,l);s=new li(u,t,l,e),this.context.createBean(s)}return this.dataTypeService.addColumnListeners(s),s},i.prototype.applyColumnState=function(e,t){var r=Ar(t.flex);r!==void 0&&e.setFlex(r);var o=e.getFlex()<=0;if(o){var a=Ar(t.width);if(a!=null)e.setActualWidth(a);else{var s=e.getActualWidth();e.setActualWidth(s)}}t.sort!==void 0&&(t.sort=="asc"||t.sort=="desc"?e.setSort(t.sort):e.setSort(void 0));var l=Ar(t.sortIndex);l!==void 0&&e.setSortIndex(l);var u=io(t.hide);u!==void 0&&e.setVisible(!u),t.pinned!==void 0&&e.setPinned(t.pinned)},i.prototype.findExistingColumn=function(e,t){if(t)for(var r=0;r<t.length;r++){var o=t[r].getUserProvidedColDef();if(o){var a=e.colId!=null;if(a){if(t[r].getId()===e.colId)return{idx:r,column:t[r]};continue}var s=e.field!=null;if(s){if(o.field===e.field)return{idx:r,column:t[r]};continue}if(o===e)return{idx:r,column:t[r]}}}},i.prototype.findExistingGroup=function(e,t){var r=e.groupId!=null;if(r)for(var o=0;o<t.length;o++){var a=t[o],s=a.getColGroupDef();if(s&&a.getId()===e.groupId)return{idx:o,group:a}}},i.prototype.addColumnDefaultAndTypes=function(e,t){var r={},o=this.gridOptionsService.get("defaultColDef");Sr(r,o,!1,!0);var a=this.dataTypeService.updateColDefAndGetColumnType(r,e,t);a&&this.assignColumnTypes(a,r),Sr(r,e,!1,!0);var s=this.gridOptionsService.get("autoGroupColumnDef"),l=this.gridOptionsService.isColumnsSortingCoupledToGroup();return e.rowGroup&&s&&l&&Sr(r,{sort:s.sort,initialSort:s.initialSort},!1,!0),this.dataTypeService.validateColDef(r),r},i.prototype.assignColumnTypes=function(e,t){if(e.length){var r=Object.assign({},mm),o=this.gridOptionsService.get("columnTypes")||{};Oi(o,function(a,s){a in r?console.warn("AG Grid: the column type '"+a+"' is a default column type and cannot be overridden."):r[a]=s}),e.forEach(function(a){var s=r[a.trim()];s?Sr(t,s,!1,!0):console.warn("AG Grid: colDef.type '"+a+"' does not correspond to defined gridOptions.columnTypes")})}},i.prototype.isColumnGroup=function(e){return e.children!==void 0},Ms([T("columnUtils")],i.prototype,"columnUtils",void 0),Ms([T("dataTypeService")],i.prototype,"dataTypeService",void 0),Ms([Rm(0,er("loggerFactory"))],i.prototype,"setBeans",null),i=Ms([Ue("columnFactory")],i),i}(ve),Am=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},Xi=function(){function n(i,e,t,r){this.displayedChildren=[],this.localEventService=new Zo,this.groupId=e,this.partId=t,this.providedColumnGroup=i,this.pinned=r}return n.createUniqueId=function(i,e){return i+"_"+e},n.prototype.reset=function(){this.parent=null,this.children=null,this.displayedChildren=null},n.prototype.getParent=function(){return this.parent},n.prototype.setParent=function(i){this.parent=i},n.prototype.getUniqueId=function(){return n.createUniqueId(this.groupId,this.partId)},n.prototype.isEmptyGroup=function(){return this.displayedChildren.length===0},n.prototype.isMoving=function(){var i=this.getProvidedColumnGroup().getLeafColumns();return!i||i.length===0?!1:i.every(function(e){return e.isMoving()})},n.prototype.checkLeft=function(){if(this.displayedChildren.forEach(function(r){r instanceof n&&r.checkLeft()}),this.displayedChildren.length>0)if(this.gridOptionsService.is("enableRtl")){var i=ai(this.displayedChildren),e=i.getLeft();this.setLeft(e)}else{var t=this.displayedChildren[0].getLeft();this.setLeft(t)}else this.setLeft(null)},n.prototype.getLeft=function(){return this.left},n.prototype.getOldLeft=function(){return this.oldLeft},n.prototype.setLeft=function(i){this.oldLeft=i,this.left!==i&&(this.left=i,this.localEventService.dispatchEvent(this.createAgEvent(n.EVENT_LEFT_CHANGED)))},n.prototype.getPinned=function(){return this.pinned},n.prototype.createAgEvent=function(i){return{type:i}},n.prototype.addEventListener=function(i,e){this.localEventService.addEventListener(i,e)},n.prototype.removeEventListener=function(i,e){this.localEventService.removeEventListener(i,e)},n.prototype.getGroupId=function(){return this.groupId},n.prototype.getPartId=function(){return this.partId},n.prototype.isChildInThisGroupDeepSearch=function(i){var e=!1;return this.children.forEach(function(t){i===t&&(e=!0),t instanceof n&&t.isChildInThisGroupDeepSearch(i)&&(e=!0)}),e},n.prototype.getActualWidth=function(){var i=0;return this.displayedChildren&&this.displayedChildren.forEach(function(e){i+=e.getActualWidth()}),i},n.prototype.isResizable=function(){if(!this.displayedChildren)return!1;var i=!1;return this.displayedChildren.forEach(function(e){e.isResizable()&&(i=!0)}),i},n.prototype.getMinWidth=function(){var i=0;return this.displayedChildren.forEach(function(e){i+=e.getMinWidth()||0}),i},n.prototype.addChild=function(i){this.children||(this.children=[]),this.children.push(i)},n.prototype.getDisplayedChildren=function(){return this.displayedChildren},n.prototype.getLeafColumns=function(){var i=[];return this.addLeafColumns(i),i},n.prototype.getDisplayedLeafColumns=function(){var i=[];return this.addDisplayedLeafColumns(i),i},n.prototype.getDefinition=function(){return this.providedColumnGroup.getColGroupDef()},n.prototype.getColGroupDef=function(){return this.providedColumnGroup.getColGroupDef()},n.prototype.isPadding=function(){return this.providedColumnGroup.isPadding()},n.prototype.isExpandable=function(){return this.providedColumnGroup.isExpandable()},n.prototype.isExpanded=function(){return this.providedColumnGroup.isExpanded()},n.prototype.setExpanded=function(i){this.providedColumnGroup.setExpanded(i)},n.prototype.addDisplayedLeafColumns=function(i){this.displayedChildren.forEach(function(e){e instanceof li?i.push(e):e instanceof n&&e.addDisplayedLeafColumns(i)})},n.prototype.addLeafColumns=function(i){this.children.forEach(function(e){e instanceof li?i.push(e):e instanceof n&&e.addLeafColumns(i)})},n.prototype.getChildren=function(){return this.children},n.prototype.getColumnGroupShow=function(){return this.providedColumnGroup.getColumnGroupShow()},n.prototype.getProvidedColumnGroup=function(){return this.providedColumnGroup},n.prototype.getPaddingLevel=function(){var i=this.getParent();return!this.isPadding()||!i||!i.isPadding()?0:1+i.getPaddingLevel()},n.prototype.calculateDisplayedColumns=function(){var i=this;this.displayedChildren=[];for(var e=this;e!=null&&e.isPadding();)e=e.getParent();var t=e?e.providedColumnGroup.isExpandable():!1;if(!t){this.displayedChildren=this.children,this.localEventService.dispatchEvent(this.createAgEvent(n.EVENT_DISPLAYED_CHILDREN_CHANGED));return}this.children.forEach(function(r){var o=r instanceof n&&(!r.displayedChildren||!r.displayedChildren.length);if(!o){var a=r.getColumnGroupShow();switch(a){case"open":e.providedColumnGroup.isExpanded()&&i.displayedChildren.push(r);break;case"closed":e.providedColumnGroup.isExpanded()||i.displayedChildren.push(r);break;default:i.displayedChildren.push(r);break}}}),this.localEventService.dispatchEvent(this.createAgEvent(n.EVENT_DISPLAYED_CHILDREN_CHANGED))},n.EVENT_LEFT_CHANGED="leftChanged",n.EVENT_DISPLAYED_CHILDREN_CHANGED="displayedChildrenChanged",Am([T("gridOptionsService")],n.prototype,"gridOptionsService",void 0),n}(),b=function(){function n(){}return n.EVENT_COLUMN_EVERYTHING_CHANGED="columnEverythingChanged",n.EVENT_NEW_COLUMNS_LOADED="newColumnsLoaded",n.EVENT_COLUMN_PIVOT_MODE_CHANGED="columnPivotModeChanged",n.EVENT_COLUMN_ROW_GROUP_CHANGED="columnRowGroupChanged",n.EVENT_EXPAND_COLLAPSE_ALL="expandOrCollapseAll",n.EVENT_COLUMN_PIVOT_CHANGED="columnPivotChanged",n.EVENT_GRID_COLUMNS_CHANGED="gridColumnsChanged",n.EVENT_COLUMN_VALUE_CHANGED="columnValueChanged",n.EVENT_COLUMN_MOVED="columnMoved",n.EVENT_COLUMN_VISIBLE="columnVisible",n.EVENT_COLUMN_PINNED="columnPinned",n.EVENT_COLUMN_GROUP_OPENED="columnGroupOpened",n.EVENT_COLUMN_RESIZED="columnResized",n.EVENT_DISPLAYED_COLUMNS_CHANGED="displayedColumnsChanged",n.EVENT_VIRTUAL_COLUMNS_CHANGED="virtualColumnsChanged",n.EVENT_ASYNC_TRANSACTIONS_FLUSHED="asyncTransactionsFlushed",n.EVENT_ROW_GROUP_OPENED="rowGroupOpened",n.EVENT_ROW_DATA_CHANGED="rowDataChanged",n.EVENT_ROW_DATA_UPDATED="rowDataUpdated",n.EVENT_PINNED_ROW_DATA_CHANGED="pinnedRowDataChanged",n.EVENT_RANGE_SELECTION_CHANGED="rangeSelectionChanged",n.EVENT_CHART_CREATED="chartCreated",n.EVENT_CHART_RANGE_SELECTION_CHANGED="chartRangeSelectionChanged",n.EVENT_CHART_OPTIONS_CHANGED="chartOptionsChanged",n.EVENT_CHART_DESTROYED="chartDestroyed",n.EVENT_TOOL_PANEL_VISIBLE_CHANGED="toolPanelVisibleChanged",n.EVENT_TOOL_PANEL_SIZE_CHANGED="toolPanelSizeChanged",n.EVENT_COLUMN_PANEL_ITEM_DRAG_START="columnPanelItemDragStart",n.EVENT_COLUMN_PANEL_ITEM_DRAG_END="columnPanelItemDragEnd",n.EVENT_MODEL_UPDATED="modelUpdated",n.EVENT_CUT_START="cutStart",n.EVENT_CUT_END="cutEnd",n.EVENT_PASTE_START="pasteStart",n.EVENT_PASTE_END="pasteEnd",n.EVENT_FILL_START="fillStart",n.EVENT_FILL_END="fillEnd",n.EVENT_RANGE_DELETE_START="rangeDeleteStart",n.EVENT_RANGE_DELETE_END="rangeDeleteEnd",n.EVENT_UNDO_STARTED="undoStarted",n.EVENT_UNDO_ENDED="undoEnded",n.EVENT_REDO_STARTED="redoStarted",n.EVENT_REDO_ENDED="redoEnded",n.EVENT_KEY_SHORTCUT_CHANGED_CELL_START="keyShortcutChangedCellStart",n.EVENT_KEY_SHORTCUT_CHANGED_CELL_END="keyShortcutChangedCellEnd",n.EVENT_CELL_CLICKED="cellClicked",n.EVENT_CELL_DOUBLE_CLICKED="cellDoubleClicked",n.EVENT_CELL_MOUSE_DOWN="cellMouseDown",n.EVENT_CELL_CONTEXT_MENU="cellContextMenu",n.EVENT_CELL_VALUE_CHANGED="cellValueChanged",n.EVENT_CELL_EDIT_REQUEST="cellEditRequest",n.EVENT_ROW_VALUE_CHANGED="rowValueChanged",n.EVENT_CELL_FOCUSED="cellFocused",n.EVENT_CELL_FOCUS_CLEARED="cellFocusCleared",n.EVENT_FULL_WIDTH_ROW_FOCUSED="fullWidthRowFocused",n.EVENT_ROW_SELECTED="rowSelected",n.EVENT_SELECTION_CHANGED="selectionChanged",n.EVENT_TOOLTIP_SHOW="tooltipShow",n.EVENT_TOOLTIP_HIDE="tooltipHide",n.EVENT_CELL_KEY_DOWN="cellKeyDown",n.EVENT_CELL_MOUSE_OVER="cellMouseOver",n.EVENT_CELL_MOUSE_OUT="cellMouseOut",n.EVENT_FILTER_CHANGED="filterChanged",n.EVENT_FILTER_MODIFIED="filterModified",n.EVENT_FILTER_OPENED="filterOpened",n.EVENT_ADVANCED_FILTER_BUILDER_VISIBLE_CHANGED="advancedFilterBuilderVisibleChanged",n.EVENT_SORT_CHANGED="sortChanged",n.EVENT_VIRTUAL_ROW_REMOVED="virtualRowRemoved",n.EVENT_ROW_CLICKED="rowClicked",n.EVENT_ROW_DOUBLE_CLICKED="rowDoubleClicked",n.EVENT_GRID_READY="gridReady",n.EVENT_GRID_PRE_DESTROYED="gridPreDestroyed",n.EVENT_GRID_SIZE_CHANGED="gridSizeChanged",n.EVENT_VIEWPORT_CHANGED="viewportChanged",n.EVENT_SCROLLBAR_WIDTH_CHANGED="scrollbarWidthChanged",n.EVENT_FIRST_DATA_RENDERED="firstDataRendered",n.EVENT_DRAG_STARTED="dragStarted",n.EVENT_DRAG_STOPPED="dragStopped",n.EVENT_CHECKBOX_CHANGED="checkboxChanged",n.EVENT_ROW_EDITING_STARTED="rowEditingStarted",n.EVENT_ROW_EDITING_STOPPED="rowEditingStopped",n.EVENT_CELL_EDITING_STARTED="cellEditingStarted",n.EVENT_CELL_EDITING_STOPPED="cellEditingStopped",n.EVENT_BODY_SCROLL="bodyScroll",n.EVENT_BODY_SCROLL_END="bodyScrollEnd",n.EVENT_HEIGHT_SCALE_CHANGED="heightScaleChanged",n.EVENT_PAGINATION_CHANGED="paginationChanged",n.EVENT_COMPONENT_STATE_CHANGED="componentStateChanged",n.EVENT_STORE_REFRESHED="storeRefreshed",n.EVENT_BODY_HEIGHT_CHANGED="bodyHeightChanged",n.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED="displayedColumnsWidthChanged",n.EVENT_SCROLL_VISIBILITY_CHANGED="scrollVisibilityChanged",n.EVENT_COLUMN_HOVER_CHANGED="columnHoverChanged",n.EVENT_FLASH_CELLS="flashCells",n.EVENT_PAGINATION_PIXEL_OFFSET_CHANGED="paginationPixelOffsetChanged",n.EVENT_DISPLAYED_ROWS_CHANGED="displayedRowsChanged",n.EVENT_LEFT_PINNED_WIDTH_CHANGED="leftPinnedWidthChanged",n.EVENT_RIGHT_PINNED_WIDTH_CHANGED="rightPinnedWidthChanged",n.EVENT_ROW_CONTAINER_HEIGHT_CHANGED="rowContainerHeightChanged",n.EVENT_HEADER_HEIGHT_CHANGED="headerHeightChanged",n.EVENT_COLUMN_HEADER_HEIGHT_CHANGED="columnHeaderHeightChanged",n.EVENT_ROW_DRAG_ENTER="rowDragEnter",n.EVENT_ROW_DRAG_MOVE="rowDragMove",n.EVENT_ROW_DRAG_LEAVE="rowDragLeave",n.EVENT_ROW_DRAG_END="rowDragEnd",n.EVENT_GRID_STYLES_CHANGED="gridStylesChanged",n.EVENT_POPUP_TO_FRONT="popupToFront",n.EVENT_COLUMN_ROW_GROUP_CHANGE_REQUEST="columnRowGroupChangeRequest",n.EVENT_COLUMN_PIVOT_CHANGE_REQUEST="columnPivotChangeRequest",n.EVENT_COLUMN_VALUE_CHANGE_REQUEST="columnValueChangeRequest",n.EVENT_COLUMN_AGG_FUNC_CHANGE_REQUEST="columnAggFuncChangeRequest",n.EVENT_KEYBOARD_FOCUS="keyboardFocus",n.EVENT_MOUSE_FOCUS="mouseFocus",n.EVENT_STORE_UPDATED="storeUpdated",n.EVENT_FILTER_DESTROYED="filterDestroyed",n.EVENT_ROW_DATA_UPDATE_STARTED="rowDataUpdateStarted",n.EVENT_ADVANCED_FILTER_ENABLED_CHANGED="advancedFilterEnabledChanged",n.EVENT_DATA_TYPES_INFERRED="dataTypesInferred",n.EVENT_FIELD_VALUE_CHANGED="fieldValueChanged",n.EVENT_FIELD_PICKER_VALUE_SELECTED="fieldPickerValueSelected",n}(),Mh=function(){function n(){this.existingIds={}}return n.prototype.getInstanceIdForKey=function(i){var e=this.existingIds[i],t;return typeof e!="number"?t=0:t=e+1,this.existingIds[i]=t,t},n}(),Lm=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Tu=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},ia="ag-Grid-AutoColumn",Mm=function(n){Lm(i,n);function i(){return n!==null&&n.apply(this,arguments)||this}return i.prototype.createAutoGroupColumns=function(e){var t=this,r=[],o=this.gridOptionsService.is("treeData"),a=this.gridOptionsService.isGroupMultiAutoColumn();return o&&a&&(console.warn('AG Grid: you cannot mix groupDisplayType = "multipleColumns" with treeData, only one column can be used to display groups when doing tree data'),a=!1),a?e.forEach(function(s,l){r.push(t.createOneAutoGroupColumn(s,l))}):r.push(this.createOneAutoGroupColumn()),r},i.prototype.updateAutoGroupColumns=function(e){var t=this;e.forEach(function(r,o){return t.updateOneAutoGroupColumn(r,o)})},i.prototype.createOneAutoGroupColumn=function(e,t){var r;e?r=ia+"-"+e.getId():r=ia;var o=this.createAutoGroupColDef(r,e,t);o.colId=r;var a=new li(o,null,r,!0);return this.context.createBean(a),a},i.prototype.updateOneAutoGroupColumn=function(e,t){var r=e.getColDef(),o=typeof r.showRowGroup=="string"?r.showRowGroup:void 0,a=o!=null?this.columnModel.getPrimaryColumn(o):void 0,s=this.createAutoGroupColDef(e.getId(),a??void 0,t);e.setColDef(s,null),this.columnFactory.applyColumnState(e,s)},i.prototype.createAutoGroupColDef=function(e,t,r){var o=this.createBaseColDef(t),a=this.gridOptionsService.get("autoGroupColumnDef");if(Sr(o,a),o=this.columnFactory.addColumnDefaultAndTypes(o,e),!this.gridOptionsService.is("treeData")){var s=vt(o.field)&&vt(o.valueGetter)&&vt(o.filterValueGetter)&&o.filter!=="agGroupColumnFilter";s&&(o.filter=!1)}r&&r>0&&(o.headerCheckboxSelection=!1);var l=this.gridOptionsService.isColumnsSortingCoupledToGroup(),u=o.valueGetter||o.field!=null;return l&&!u&&(o.sortIndex=void 0,o.initialSort=void 0),o},i.prototype.createBaseColDef=function(e){var t=this.gridOptionsService.get("autoGroupColumnDef"),r=this.localeService.getLocaleTextFunc(),o={headerName:r("group","Group")},a=t&&(t.cellRenderer||t.cellRendererSelector);if(a||(o.cellRenderer="agGroupCellRenderer"),e){var s=e.getColDef();Object.assign(o,{headerName:this.columnModel.getDisplayNameForColumn(e,"header"),headerValueGetter:s.headerValueGetter}),s.cellRenderer&&Object.assign(o,{cellRendererParams:{innerRenderer:s.cellRenderer,innerRendererParams:s.cellRendererParams}}),o.showRowGroup=e.getColId()}else o.showRowGroup=!0;return o},Tu([T("columnModel")],i.prototype,"columnModel",void 0),Tu([T("columnFactory")],i.prototype,"columnFactory",void 0),i=Tu([Ue("autoGroupColService")],i),i}(ve),Nm=/[&<>"']/g,Fm={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function Im(n){var i=String.fromCharCode;function e(d){var f=[];if(!d)return[];for(var y=d.length,S=0,w,E;S<y;)w=d.charCodeAt(S++),w>=55296&&w<=56319&&S<y?(E=d.charCodeAt(S++),(E&64512)==56320?f.push(((w&1023)<<10)+(E&1023)+65536):(f.push(w),S--)):f.push(w);return f}function t(d){if(d>=55296&&d<=57343)throw Error("Lone surrogate U+"+d.toString(16).toUpperCase()+" is not a scalar value")}function r(d,f){return i(d>>f&63|128)}function o(d){if(d>=0&&d<=31&&d!==10){var f=d.toString(16).toUpperCase(),y=f.padStart(4,"0");return"_x"+y+"_"}if(!(d&4294967168))return i(d);var S="";return d&4294965248?d&4294901760?d&4292870144||(S=i(d>>18&7|240),S+=r(d,12),S+=r(d,6)):(t(d),S=i(d>>12&15|224),S+=r(d,6)):S=i(d>>6&31|192),S+=i(d&63|128),S}for(var a=e(n),s=a.length,l=-1,u,c="";++l<s;)u=a[l],c+=o(u);return c}function km(n){return n[0].toUpperCase()+n.substr(1).toLowerCase()}function Ii(n,i){if(n==null)return null;var e=n.toString().toString();return i?e:e.replace(Nm,function(t){return Fm[t]})}function Nh(n){if(!n||n==null)return null;var i=/([a-z])([A-Z])/g,e=/([A-Z]+)([A-Z])([a-z])/g,t=n.replace(i,"$1 $2").replace(e,"$1 $2$3").replace(/\./g," ").split(" ");return t.map(function(r){return r.substring(0,1).toUpperCase()+(r.length>1?r.substring(1,r.length):"")}).join(" ")}function Fh(n){return n.replace(/[A-Z]/g,function(i){return"-"+i.toLocaleLowerCase()})}var Gm=Object.freeze({__proto__:null,utf8_encode:Im,capitalise:km,escapeString:Ii,camelCaseToHumanText:Nh,camelCaseToHyphenated:Fh});function Yo(n){var i=new Map;return n.forEach(function(e){return i.set(e[0],e[1])}),i}function Vm(n,i){var e=new Map;return n.forEach(function(t){return e.set(i(t),t)}),e}function Bm(n){var i=[];return n.forEach(function(e,t){return i.push(t)}),i}var Hm=Object.freeze({__proto__:null,convertToMap:Yo,mapById:Vm,keys:Bm}),Wm=function(){function n(){}return n.ColDefPropertyMap={headerName:void 0,columnGroupShow:void 0,headerClass:void 0,toolPanelClass:void 0,headerValueGetter:void 0,pivotKeys:void 0,groupId:void 0,colId:void 0,sort:void 0,initialSort:void 0,field:void 0,type:void 0,cellDataType:void 0,tooltipComponent:void 0,tooltipField:void 0,headerTooltip:void 0,cellClass:void 0,showRowGroup:void 0,filter:void 0,initialAggFunc:void 0,defaultAggFunc:void 0,aggFunc:void 0,pinned:void 0,initialPinned:void 0,chartDataType:void 0,cellEditorPopupPosition:void 0,headerGroupComponent:void 0,headerGroupComponentParams:void 0,cellStyle:void 0,cellRenderer:void 0,cellRendererParams:void 0,cellEditor:void 0,cellEditorParams:void 0,filterParams:void 0,pivotValueColumn:void 0,headerComponent:void 0,headerComponentParams:void 0,floatingFilterComponent:void 0,floatingFilterComponentParams:void 0,tooltipComponentParams:void 0,refData:void 0,columnsMenuParams:void 0,children:void 0,sortingOrder:void 0,allowedAggFuncs:void 0,menuTabs:void 0,pivotTotalColumnIds:void 0,cellClassRules:void 0,icons:void 0,sortIndex:void 0,initialSortIndex:void 0,flex:void 0,initialFlex:void 0,width:void 0,initialWidth:void 0,minWidth:void 0,maxWidth:void 0,rowGroupIndex:void 0,initialRowGroupIndex:void 0,pivotIndex:void 0,initialPivotIndex:void 0,suppressCellFlash:void 0,suppressColumnsToolPanel:void 0,suppressFiltersToolPanel:void 0,openByDefault:void 0,marryChildren:void 0,suppressStickyLabel:void 0,hide:void 0,initialHide:void 0,rowGroup:void 0,initialRowGroup:void 0,pivot:void 0,initialPivot:void 0,checkboxSelection:void 0,showDisabledCheckboxes:void 0,headerCheckboxSelection:void 0,headerCheckboxSelectionFilteredOnly:void 0,headerCheckboxSelectionCurrentPageOnly:void 0,suppressMenu:void 0,suppressMovable:void 0,lockPosition:void 0,lockVisible:void 0,lockPinned:void 0,unSortIcon:void 0,suppressSizeToFit:void 0,suppressAutoSize:void 0,enableRowGroup:void 0,enablePivot:void 0,enableValue:void 0,editable:void 0,suppressPaste:void 0,suppressNavigable:void 0,enableCellChangeFlash:void 0,rowDrag:void 0,dndSource:void 0,autoHeight:void 0,wrapText:void 0,sortable:void 0,resizable:void 0,singleClickEdit:void 0,floatingFilter:void 0,cellEditorPopup:void 0,suppressFillHandle:void 0,wrapHeaderText:void 0,autoHeaderHeight:void 0,dndSourceOnRowDrag:void 0,valueGetter:void 0,valueSetter:void 0,filterValueGetter:void 0,keyCreator:void 0,valueFormatter:void 0,valueParser:void 0,comparator:void 0,equals:void 0,pivotComparator:void 0,suppressKeyboardEvent:void 0,suppressHeaderKeyboardEvent:void 0,colSpan:void 0,rowSpan:void 0,getQuickFilterText:void 0,onCellValueChanged:void 0,onCellClicked:void 0,onCellDoubleClicked:void 0,onCellContextMenu:void 0,rowDragText:void 0,tooltipValueGetter:void 0,cellRendererSelector:void 0,cellEditorSelector:void 0,suppressSpanHeaderHeight:void 0,useValueFormatterForExport:void 0,useValueParserForImport:void 0},n.ALL_PROPERTIES=Object.keys(n.ColDefPropertyMap),n}(),Ao=function(n,i){var e=typeof Symbol=="function"&&n[Symbol.iterator];if(!e)return n;var t=e.call(n),r,o=[],a;try{for(;(i===void 0||i-- >0)&&!(r=t.next()).done;)o.push(r.value)}catch(s){a={error:s}}finally{try{r&&!r.done&&(e=t.return)&&e.call(t)}finally{if(a)throw a.error}}return o},Lo=function(n,i){for(var e=0,t=i.length,r=n.length;e<t;e++,r++)n[r]=i[e];return n},So=function(){function n(){}return n.STRING_PROPERTIES=["rowSelection","overlayLoadingTemplate","overlayNoRowsTemplate","gridId","quickFilterText","rowModelType","editType","domLayout","clipboardDelimiter","rowGroupPanelShow","multiSortKey","pivotColumnGroupTotals","pivotRowTotals","pivotPanelShow","fillHandleDirection","serverSideStoreType","groupDisplayType","treeDataDisplayType","colResizeDefault","tooltipTrigger","serverSidePivotResultFieldSeparator"],n.OBJECT_PROPERTIES=["components","rowStyle","context","autoGroupColumnDef","localeText","icons","datasource","serverSideDatasource","viewportDatasource","groupRowRendererParams","aggFuncs","fullWidthCellRendererParams","defaultColGroupDef","defaultColDef","defaultCsvExportParams","defaultExcelExportParams","columnTypes","rowClassRules","detailCellRendererParams","loadingCellRendererParams","loadingOverlayComponentParams","noRowsOverlayComponentParams","popupParent","statusBar","sideBar","chartThemeOverrides","customChartThemes","chartToolPanelsDef","dataTypeDefinitions","advancedFilterModel","advancedFilterParent","advancedFilterBuilderParams"],n.ARRAY_PROPERTIES=["sortingOrder","alignedGrids","rowData","columnDefs","excelStyles","pinnedTopRowData","pinnedBottomRowData","chartThemes","rowClass"],n.NUMBER_PROPERTIES=["rowHeight","detailRowHeight","rowBuffer","headerHeight","groupHeaderHeight","floatingFiltersHeight","pivotHeaderHeight","pivotGroupHeaderHeight","groupDefaultExpanded","pivotDefaultExpanded","viewportRowModelPageSize","viewportRowModelBufferSize","autoSizePadding","maxBlocksInCache","maxConcurrentDatasourceRequests","tooltipShowDelay","tooltipHideDelay","cacheOverflowSize","paginationPageSize","cacheBlockSize","infiniteInitialRowCount","serverSideInitialRowCount","scrollbarWidth","asyncTransactionWaitMillis","blockLoadDebounceMillis","keepDetailRowsCount","undoRedoCellEditingLimit","cellFlashDelay","cellFadeDelay","tabIndex"],n.BOOLEAN_PROPERTIES=["suppressMakeColumnVisibleAfterUnGroup","suppressRowClickSelection","suppressCellFocus","suppressHorizontalScroll","alwaysShowHorizontalScroll","alwaysShowVerticalScroll","debug","enableBrowserTooltips","enableCellExpressions","groupSelectsChildren","groupIncludeTotalFooter","groupSuppressBlankHeader","suppressMenuHide","suppressRowDeselection","unSortIcon","suppressMultiSort","alwaysMultiSort","singleClickEdit","suppressLoadingOverlay","suppressNoRowsOverlay","suppressAutoSize","skipHeaderOnAutoSize","suppressParentsInRowNodes","suppressColumnMoveAnimation","suppressMovableColumns","suppressFieldDotNotation","enableRangeSelection","enableRangeHandle","enableFillHandle","suppressClearOnFillReduction","deltaSort","suppressTouch","suppressAsyncEvents","allowContextMenuWithControlKey","suppressContextMenu","rememberGroupStateWhenNewData","enableCellChangeFlash","suppressDragLeaveHidesColumns","suppressRowGroupHidesColumns","suppressMiddleClickScrolls","suppressPreventDefaultOnMouseWheel","suppressCopyRowsToClipboard","copyHeadersToClipboard","copyGroupHeadersToClipboard","pivotMode","suppressAggFuncInHeader","suppressColumnVirtualisation","alwaysAggregateAtRootLevel","suppressAggAtRootLevel","suppressFocusAfterRefresh","functionsPassive","functionsReadOnly","animateRows","groupSelectsFiltered","groupRemoveSingleChildren","groupRemoveLowestSingleChildren","enableRtl","suppressClickEdit","rowDragEntireRow","rowDragManaged","suppressRowDrag","suppressMoveWhenRowDragging","rowDragMultiRow","enableGroupEdit","embedFullWidthRows","suppressPaginationPanel","groupHideOpenParents","groupAllowUnbalanced","pagination","paginationAutoPageSize","suppressScrollOnNewData","suppressScrollWhenPopupsAreOpen","purgeClosedRowNodes","cacheQuickFilter","includeHiddenColumnsInQuickFilter","excludeHiddenColumnsFromQuickFilter","ensureDomOrder","accentedSort","suppressChangeDetection","valueCache","valueCacheNeverExpires","aggregateOnlyChangedColumns","suppressAnimationFrame","suppressExcelExport","suppressCsvExport","treeData","masterDetail","suppressMultiRangeSelection","enterMovesDown","enterMovesDownAfterEdit","enterNavigatesVerticallyAfterEdit","enterNavigatesVertically","suppressPropertyNamesCheck","rowMultiSelectWithClick","suppressRowHoverHighlight","suppressRowTransform","suppressClipboardPaste","suppressLastEmptyLineOnPaste","enableCharts","enableChartToolPanelsButton","suppressChartToolPanelsButton","suppressMaintainUnsortedOrder","enableCellTextSelection","suppressBrowserResizeObserver","suppressMaxRenderedRowRestriction","excludeChildrenWhenTreeDataFiltering","tooltipMouseTrack","tooltipInteraction","keepDetailRows","paginateChildRows","preventDefaultOnContextMenu","undoRedoCellEditing","allowDragFromColumnsToolPanel","pivotSuppressAutoColumn","suppressExpandablePivotGroups","debounceVerticalScrollbar","detailRowAutoHeight","serverSideFilteringAlwaysResets","serverSideFilterAllLevels","serverSideSortingAlwaysResets","serverSideSortAllLevels","serverSideOnlyRefreshFilteredGroups","serverSideSortOnServer","serverSideFilterOnServer","suppressAggFilteredOnly","showOpenedGroup","suppressClipboardApi","suppressModelUpdateAfterUpdateTransaction","stopEditingWhenCellsLoseFocus","maintainColumnOrder","groupMaintainOrder","columnHoverHighlight","suppressReactUi","readOnlyEdit","suppressRowVirtualisation","enableCellEditingOnBackspace","resetRowDataOnUpdate","removePivotHeaderRowWhenSingleValueColumn","suppressCopySingleCellRanges","suppressGroupRowsSticky","suppressServerSideInfiniteScroll","rowGroupPanelSuppressSort","allowShowChangeAfterFilter","suppressCutToClipboard","enableAdvancedFilter","includeHiddenColumnsInAdvancedFilter"],n.FUNCTIONAL_PROPERTIES=["doesExternalFilterPass","processSecondaryColDef","processSecondaryColGroupDef","processPivotResultColDef","processPivotResultColGroupDef","getBusinessKeyForNode","isRowSelectable","rowDragText","groupRowRenderer","fullWidthCellRenderer","loadingCellRenderer","loadingOverlayComponent","noRowsOverlayComponent","detailCellRenderer","quickFilterParser","quickFilterMatcher"],n.CALLBACK_PROPERTIES=["getLocaleText","isExternalFilterPresent","getRowHeight","getRowClass","getRowStyle","getContextMenuItems","getMainMenuItems","processRowPostCreate","processCellForClipboard","getGroupRowAgg","isFullWidthRow","sendToClipboard","navigateToNextHeader","tabToNextHeader","navigateToNextCell","tabToNextCell","processCellFromClipboard","getDocument","postProcessPopup","getChildCount","getDataPath","isRowMaster","postSortRows","processHeaderForClipboard","processGroupHeaderForClipboard","paginationNumberFormatter","processDataFromClipboard","getServerSideGroupKey","isServerSideGroup","createChartContainer","getChartToolbarItems","fillOperation","isApplyServerSideTransaction","getServerSideStoreParams","getServerSideGroupLevelParams","isServerSideGroupOpenByDefault","isGroupOpenByDefault","initialGroupOrderComparator","groupIncludeFooter","loadingCellRendererSelector","getRowId","groupAggFiltering"],n.FUNCTION_PROPERTIES=Lo(Lo([],Ao(n.FUNCTIONAL_PROPERTIES)),Ao(n.CALLBACK_PROPERTIES)),n.ALL_PROPERTIES=Lo(Lo(Lo(Lo(Lo(Lo([],Ao(n.ARRAY_PROPERTIES)),Ao(n.OBJECT_PROPERTIES)),Ao(n.STRING_PROPERTIES)),Ao(n.NUMBER_PROPERTIES)),Ao(n.FUNCTION_PROPERTIES)),Ao(n.BOOLEAN_PROPERTIES)),n}(),Mc=function(){return Mc=Object.assign||function(n){for(var i,e=1,t=arguments.length;e<t;e++){i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(n[r]=i[r])}return n},Mc.apply(this,arguments)},Ta=function(n,i){var e=typeof Symbol=="function"&&n[Symbol.iterator];if(!e)return n;var t=e.call(n),r,o=[],a;try{for(;(i===void 0||i-- >0)&&!(r=t.next()).done;)o.push(r.value)}catch(s){a={error:s}}finally{try{r&&!r.done&&(e=t.return)&&e.call(t)}finally{if(a)throw a.error}}return o},Oa=function(n,i){for(var e=0,t=i.length,r=n.length;e<t;e++,r++)n[r]=i[e];return n},qo=function(){function n(){}return n.getCallbackForEvent=function(i){return!i||i.length<2?i:"on"+i[0].toUpperCase()+i.substr(1)},n.getCoercionLookup=function(){var i={};return Oa(Oa(Oa(Oa(Oa([],Ta(n.ARRAY_PROPERTIES)),Ta(n.OBJECT_PROPERTIES)),Ta(n.STRING_PROPERTIES)),Ta(n.FUNCTION_PROPERTIES)),Ta(n.EVENT_CALLBACKS)).forEach(function(e){return i[e]="none"}),n.BOOLEAN_PROPERTIES.forEach(function(e){return i[e]="boolean"}),n.NUMBER_PROPERTIES.forEach(function(e){return i[e]="number"}),i},n.getValue=function(i,e){var t=n.coercionLookup[i];if(t){var r=e;switch(t){case"number":{r=n.toNumber(e);break}case"boolean":{r=n.toBoolean(e);break}case"none":{i==="groupAggFiltering"&&typeof e!="function"&&(r=n.toBoolean(e));break}}return r}},n.getGridOptionKeys=function(i,e){return Object.keys(e?n.coercionLookup:i)},n.copyAttributesToGridOptions=function(i,e,t){t===void 0&&(t=!1),typeof i!="object"&&(i={});var r=i,o=n.getGridOptionKeys(e,t);return o.forEach(function(a){var s=e[a];if(typeof s<"u"){var l=n.getValue(a,s);l!==void 0&&(r[a]=l)}}),i},n.processOnChange=function(i,e){var t=this;if(!(!i||Object.keys(i).length===0)){this.changeSetId++;var r=Mc({},i);r.columnTypes&&(e.setColumnTypes(r.columnTypes.currentValue,"gridOptionsChanged"),delete r.columnTypes),r.autoGroupColumnDef&&(e.setAutoGroupColumnDef(r.autoGroupColumnDef.currentValue,"gridOptionsChanged"),delete r.autoGroupColumnDef),r.defaultColDef&&(e.setDefaultColDef(r.defaultColDef.currentValue,"gridOptionsChanged"),delete r.defaultColDef),r.columnDefs&&(e.setColumnDefs(r.columnDefs.currentValue,"gridOptionsChanged"),delete r.columnDefs);var o=Object.keys(r).map(function(l){var u=l,c=n.getValue(u,r[u].currentValue),d=e.__setPropertyOnly(u,c);return{gridKey:u,coercedValue:c,isChanged:d}}).filter(function(l){return l.isChanged}),a=o.map(function(l){return l.gridKey});o.forEach(function(l){return e.__updateProperty(l.gridKey,l.coercedValue,l.isChanged,{id:t.changeSetId,properties:a})});var s={type:b.EVENT_COMPONENT_STATE_CHANGED};Oi(i,function(l,u){s[l]=u}),e.dispatchEvent(s)}},n.toBoolean=function(i){return typeof i=="boolean"?i:typeof i=="string"?i.toUpperCase()==="TRUE"||i=="":!1},n.toNumber=function(i){if(typeof i=="number")return i;if(typeof i=="string")return Number(i)},n.EVENTS=Tn(b),n.EXCLUDED_INTERNAL_EVENTS=[b.EVENT_SCROLLBAR_WIDTH_CHANGED,b.EVENT_CHECKBOX_CHANGED,b.EVENT_HEIGHT_SCALE_CHANGED,b.EVENT_BODY_HEIGHT_CHANGED,b.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,b.EVENT_SCROLL_VISIBILITY_CHANGED,b.EVENT_COLUMN_HOVER_CHANGED,b.EVENT_FLASH_CELLS,b.EVENT_PAGINATION_PIXEL_OFFSET_CHANGED,b.EVENT_DISPLAYED_ROWS_CHANGED,b.EVENT_LEFT_PINNED_WIDTH_CHANGED,b.EVENT_RIGHT_PINNED_WIDTH_CHANGED,b.EVENT_ROW_CONTAINER_HEIGHT_CHANGED,b.EVENT_POPUP_TO_FRONT,b.EVENT_KEYBOARD_FOCUS,b.EVENT_MOUSE_FOCUS,b.EVENT_STORE_UPDATED,b.EVENT_COLUMN_PANEL_ITEM_DRAG_START,b.EVENT_COLUMN_PANEL_ITEM_DRAG_END,b.EVENT_FILL_START,b.EVENT_FILL_END,b.EVENT_KEY_SHORTCUT_CHANGED_CELL_START,b.EVENT_KEY_SHORTCUT_CHANGED_CELL_END,b.EVENT_FULL_WIDTH_ROW_FOCUSED,b.EVENT_HEADER_HEIGHT_CHANGED,b.EVENT_COLUMN_HEADER_HEIGHT_CHANGED,b.EVENT_CELL_FOCUS_CLEARED,b.EVENT_GRID_STYLES_CHANGED,b.EVENT_FILTER_DESTROYED,b.EVENT_ROW_DATA_UPDATE_STARTED,b.EVENT_ADVANCED_FILTER_ENABLED_CHANGED,b.EVENT_DATA_TYPES_INFERRED,b.EVENT_FIELD_VALUE_CHANGED,b.EVENT_FIELD_PICKER_VALUE_SELECTED],n.PUBLIC_EVENTS=n.EVENTS.filter(function(i){return!Lr(n.EXCLUDED_INTERNAL_EVENTS,i)}),n.EVENT_CALLBACKS=n.EVENTS.map(function(i){return n.getCallbackForEvent(i)}),n.STRING_PROPERTIES=So.STRING_PROPERTIES,n.OBJECT_PROPERTIES=So.OBJECT_PROPERTIES,n.ARRAY_PROPERTIES=So.ARRAY_PROPERTIES,n.NUMBER_PROPERTIES=So.NUMBER_PROPERTIES,n.BOOLEAN_PROPERTIES=So.BOOLEAN_PROPERTIES,n.FUNCTION_PROPERTIES=So.FUNCTION_PROPERTIES,n.ALL_PROPERTIES=So.ALL_PROPERTIES,n.ALL_PROPERTIES_SET=new Set(So.ALL_PROPERTIES),n.changeSetId=0,n.coercionLookup=n.getCoercionLookup(),n}(),Um=function(n){var i=typeof Symbol=="function"&&Symbol.iterator,e=i&&n[i],t=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&t>=n.length&&(n=void 0),{value:n&&n[t++],done:!n}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")};function Ih(n,i,e){var t={},r=n.filter(function(o){return!i.some(function(a){return a===o})});return r.length>0&&r.forEach(function(o){return t[o]=hs(o,e).values}),t}function hs(n,i,e,t){var r,o,a=i.map(function(S,w){return{value:S,relevance:jm(n.toLowerCase(),S.toLocaleLowerCase()),idx:w}});if(a.sort(function(S,w){return w.relevance-S.relevance}),e&&(a=a.filter(function(S){return S.relevance!==0})),a.length>0&&t&&t>0){var s=a[0].relevance,l=s*t;a=a.filter(function(S){return l-S.relevance<0})}var u=[],c=[];try{for(var d=Um(a),f=d.next();!f.done;f=d.next()){var y=f.value;u.push(y.value),c.push(y.idx)}}catch(S){r={error:S}}finally{try{f&&!f.done&&(o=d.return)&&o.call(d)}finally{if(r)throw r.error}}return{values:u,indices:c}}function jm(n,i){for(var e=n.replace(/\s/g,""),t=i.replace(/\s/g,""),r=0,o=-1,a=0;a<e.length;a++){var s=t.indexOf(e[a],o+1);s!==-1&&(o=s,r+=100-o*100/1e4*100)}return r}var zm=Object.freeze({__proto__:null,fuzzyCheckStrings:Ih,fuzzySuggestions:hs}),Ns=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},Mo=function(n,i){var e=typeof Symbol=="function"&&n[Symbol.iterator];if(!e)return n;var t=e.call(n),r,o=[],a;try{for(;(i===void 0||i-- >0)&&!(r=t.next()).done;)o.push(r.value)}catch(s){a={error:s}}finally{try{r&&!r.done&&(e=t.return)&&e.call(t)}finally{if(a)throw a.error}}return o},No=function(n,i){for(var e=0,t=i.length,r=n.length;e<t;e++,r++)n[r]=i[e];return n};function Rr(n,i,e,t){var r=e?"Please use '"+e+"' instead. ":"";Ut(function(){return console.warn("AG Grid: since v"+n+", '"+i+"' is deprecated. "+r+(t??""))},"Deprecated_"+i)}var Mp=["__ob__","__v_skip","__metadata__"],Ym=function(){function n(){this.deprecatedProperties={rememberGroupStateWhenNewData:{version:"24",message:"Now that transaction updates are possible and they keep group state, this feature is no longer needed."},serverSideFilteringAlwaysResets:{version:"28.0",newProp:"serverSideOnlyRefreshFilteredGroups",copyToNewProp:!0},serverSideSortingAlwaysResets:{version:"28.0",newProp:"serverSideSortAllLevels",copyToNewProp:!0},suppressReactUi:{version:"28",message:"The legacy React rendering engine is deprecated and will be removed in the next major version of the grid."},processSecondaryColDef:{version:"28",newProp:"processPivotResultColDef",copyToNewProp:!0},processSecondaryColGroupDef:{version:"28",newProp:"processPivotResultColGroupDef",copyToNewProp:!0},getServerSideStoreParams:{version:"28",newProp:"getServerSideGroupLevelParams",copyToNewProp:!0},serverSideInfiniteScroll:{version:"29",message:"Infinite Scrolling is now the default behaviour. This can be suppressed with `suppressServerSideInfiniteScroll`."},enableChartToolPanelsButton:{version:"29",message:"The Chart Tool Panels button is now enabled by default. To hide the Chart Tool Panels button and display the hamburger button instead, set suppressChartToolPanelsButton=true."},functionsPassive:{version:"29.2"},onColumnRowGroupChangeRequest:{version:"29.2"},onColumnPivotChangeRequest:{version:"29.2"},onColumnValueChangeRequest:{version:"29.2"},onColumnAggFuncChangeRequest:{version:"29.2"},serverSideFilterAllLevels:{version:"30",message:"All server-side group levels are now filtered by default. This can be toggled using `serverSideOnlyRefreshFilteredGroups`."},suppressAggAtRootLevel:{version:"30",message:"The root level aggregation is now suppressed by default. This can be toggled using  `alwaysAggregateAtRootLevel`."},excludeHiddenColumnsFromQuickFilter:{version:"30",message:"Hidden columns are now excluded from the Quick Filter by default. This can be toggled using `includeHiddenColumnsInQuickFilter`."},enterMovesDown:{version:"30",newProp:"enterNavigatesVertically",copyToNewProp:!0},enterMovesDownAfterEdit:{version:"30",newProp:"enterNavigatesVerticallyAfterEdit",copyToNewProp:!0},suppressParentsInRowNodes:{version:"30.2",message:"Using suppressParentsInRowNodes is no longer recommended. To serialize nodes it is now recommended to instead remove the parent node reference before serialization."}}}return n.prototype.pickOneWarning=function(i,e){console.warn("AG Grid: "+i+" and "+e+" do not work with each other, you need to pick one.")},n.prototype.init=function(){var i=this;if(this.checkForDeprecated(),this.checkForViolations(),this.gridOptions.suppressPropertyNamesCheck!==!0&&(this.checkGridOptionsProperties(),this.checkColumnDefProperties()),this.checkColumnDefViolations(),this.gridOptionsService.is("groupSelectsChildren")&&this.gridOptionsService.is("suppressParentsInRowNodes")&&console.warn("AG Grid: 'groupSelectsChildren' does not work with 'suppressParentsInRowNodes', this selection method needs the part in rowNode to work"),this.gridOptionsService.is("groupSelectsChildren")&&this.gridOptionsService.get("rowSelection")!=="multiple"&&console.warn("AG Grid: rowSelection must be 'multiple' for groupSelectsChildren to make sense"),this.gridOptionsService.is("groupRemoveSingleChildren")&&this.gridOptionsService.is("groupHideOpenParents")&&this.pickOneWarning("groupRemoveSingleChildren","groupHideOpenParents"),this.gridOptionsService.isRowModelType("serverSide")){var e=function(r,o){return"AG Grid: '"+r+"' is not supported on the Server-Side Row Model."+(o?" Please use "+o+" instead.":"")};this.gridOptionsService.exists("groupDefaultExpanded")&&console.warn(e("groupDefaultExpanded","isServerSideGroupOpenByDefault callback")),this.gridOptionsService.exists("groupIncludeFooter")&&this.gridOptionsService.is("suppressServerSideInfiniteScroll")&&console.warn(e("groupIncludeFooter")),this.gridOptionsService.exists("groupIncludeTotalFooter")&&console.warn(e("groupIncludeTotalFooter"))}this.gridOptionsService.is("enableRangeSelection")?gt.__assertRegistered(je.RangeSelectionModule,"enableRangeSelection",this.gridOptionsService.getGridId()):(this.gridOptionsService.is("enableRangeHandle")||this.gridOptionsService.is("enableFillHandle"))&&console.warn("AG Grid: 'enableRangeHandle' or 'enableFillHandle' will not work unless 'enableRangeSelection' is set to true");var t=function(r,o){return i.gridOptionsService.exists(r)&&gt.__assertRegistered(o,r,i.gridOptionsService.getGridId())};t("sideBar",je.SideBarModule),t("statusBar",je.StatusBarModule),t("enableCharts",je.GridChartsModule),t("getMainMenuItems",je.MenuModule),t("getContextMenuItems",je.MenuModule),t("allowContextMenuWithControlKey",je.MenuModule),t("enableAdvancedFilter",je.AdvancedFilterModule),t("treeData",je.RowGroupingModule),t("enableRangeSelection",je.RangeSelectionModule),t("masterDetail",je.MasterDetailModule)},n.prototype.checkColumnDefProperties=function(){var i=this;if(this.gridOptions.columnDefs!=null){var e=Wm.ALL_PROPERTIES,t=function(r,o){var a=Object.getOwnPropertyNames(r);i.checkProperties(a,No(No([],Mo(e)),Mo(Mp)),e,o,"https://www.ag-grid.com/javascript-data-grid/column-properties/"),r.children&&r.children.forEach(function(s){return t(s,"columnDefs.children")})};this.gridOptions.columnDefs.forEach(function(r){return t(r,"columnDefs")}),this.gridOptions.defaultColDef&&t(this.gridOptions.defaultColDef,"defaultColDef")}},n.prototype.checkColumnDefViolations=function(){var i,e=(i=this.gridOptionsService.get("rowModelType"))!==null&&i!==void 0?i:"clientSide",t={infinite:["headerCheckboxSelection","headerCheckboxSelectionFilteredOnly","headerCheckboxSelectionCurrentPageOnly"],viewport:["headerCheckboxSelection","headerCheckboxSelectionFilteredOnly","headerCheckboxSelectionCurrentPageOnly"],serverSide:["headerCheckboxSelectionFilteredOnly","headerCheckboxSelectionCurrentPageOnly"],clientSide:[]},r=t[e];if(r){var o=this.gridOptionsService.get("rowSelection")==="multiple",a=["headerCheckboxSelection","headerCheckboxSelectionFilteredOnly","headerCheckboxSelectionCurrentPageOnly"],s=function(l){o||a.forEach(function(u){u in l&&l[u]&&console.warn("AG Grid: Column property "+u+" is not supported unless rowSelection='multiple'.")}),r.forEach(function(u){u in l&&l[u]&&console.warn("AG Grid: Column property "+u+" is not supported with the row model type "+e+".")})};this.gridOptions.columnDefs!=null&&this.gridOptions.columnDefs.forEach(function(l){return s(l)}),this.gridOptions.autoGroupColumnDef!=null&&s(this.gridOptions.autoGroupColumnDef),this.gridOptions.defaultColDef!=null&&s(this.gridOptions.defaultColDef)}},n.prototype.checkGridOptionsProperties=function(){var i=Object.getOwnPropertyNames(this.gridOptions),e=No(No([],Mo(So.ALL_PROPERTIES)),Mo(qo.EVENT_CALLBACKS)),t=No(No(No(No([],Mo(e)),["api","columnApi"]),Mo(Mp)),Mo(Object.keys(this.deprecatedProperties)));this.checkProperties(i,t,e,"gridOptions","https://www.ag-grid.com/javascript-data-grid/grid-options/")},n.prototype.checkProperties=function(i,e,t,r,o){var a=Ih(i,e,t);Oi(a,function(s,l){Ut(function(){return console.warn("AG Grid: invalid "+r+" property '"+s+"' did you mean any of these: "+l.slice(0,8).join(", "))},"invalidProperty"+r+s)}),Object.keys(a).length>0&&Ut(function(){return console.warn("AG Grid: to see all the valid "+r+" properties please check: "+o)},"invalidProperties"+r+o)},n.prototype.checkForDeprecated=function(){var i=this.gridOptions;Object.entries(this.deprecatedProperties).forEach(function(e){var t,r=Mo(e,2),o=r[0],a=r[1],s=i[o];s&&(Rr(a.version,o,a.newProp,a.message),a.copyToNewProp&&a.newProp&&i[a.newProp]==null&&(i[a.newProp]=(t=a.newPropValue)!==null&&t!==void 0?t:s))}),i.serverSideStoreType&&(console.warn("AG Grid: since v29.0, `serverSideStoreType` has been replaced by `suppressServerSideInfiniteScroll`. Set to false to use Partial Store, and true to use Full Store."),i.suppressServerSideInfiniteScroll=i.serverSideStoreType!=="partial")},n.prototype.checkForViolations=function(){this.gridOptionsService.is("treeData")&&this.treeDataViolations()},n.prototype.treeDataViolations=function(){this.gridOptionsService.isRowModelType("clientSide")&&(this.gridOptionsService.exists("getDataPath")||console.warn("AG Grid: property usingTreeData=true with rowModel=clientSide, but you did not provide getDataPath function, please provide getDataPath function if using tree data.")),this.gridOptionsService.isRowModelType("serverSide")&&(this.gridOptionsService.exists("isServerSideGroup")||console.warn("AG Grid: property usingTreeData=true with rowModel=serverSide, but you did not provide isServerSideGroup function, please provide isServerSideGroup function if using tree data."),this.gridOptionsService.exists("getServerSideGroupKey")||console.warn("AG Grid: property usingTreeData=true with rowModel=serverSide, but you did not provide getServerSideGroupKey function, please provide getServerSideGroupKey function if using tree data."))},Ns([T("gridOptions")],n.prototype,"gridOptions",void 0),Ns([T("gridOptionsService")],n.prototype,"gridOptionsService",void 0),Ns([Oe],n.prototype,"init",null),n=Ns([Ue("gridOptionsValidator")],n),n}();function Nc(n,i){var e=["groupRows","multipleColumns","custom","singleColumn"];return e.indexOf(i)<0?(console.warn("AG Grid: '"+i+"' is not a valid groupDisplayType value - possible values are: '"+e.join("', '")+"'"),!1):i===n}function Km(n,i){var e=["auto","custom"];return e.indexOf(i)<0?(console.warn("AG Grid: '"+i+"' is not a valid treeDataDisplayType value - possible values are: '"+e.join("', '")+"'"),!1):i===n}var Qm=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),qi=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},qm=function(n,i){return function(e,t){i(e,t,n)}},Xm=function(n,i){var e={};for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&i.indexOf(t)<0&&(e[t]=n[t]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,t=Object.getOwnPropertySymbols(n);r<t.length;r++)i.indexOf(t[r])<0&&Object.prototype.propertyIsEnumerable.call(n,t[r])&&(e[t[r]]=n[t[r]]);return e},Vr=function(n,i){var e=typeof Symbol=="function"&&n[Symbol.iterator];if(!e)return n;var t=e.call(n),r,o=[],a;try{for(;(i===void 0||i-- >0)&&!(r=t.next()).done;)o.push(r.value)}catch(s){a={error:s}}finally{try{r&&!r.done&&(e=t.return)&&e.call(t)}finally{if(a)throw a.error}}return o},Br=function(n,i){for(var e=0,t=i.length,r=n.length;e<t;e++,r++)n[r]=i[e];return n},Np=function(n){var i=typeof Symbol=="function"&&Symbol.iterator,e=i&&n[i],t=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&t>=n.length&&(n=void 0),{value:n&&n[t++],done:!n}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},Jm=function(n){Qm(i,n);function i(){var e=n!==null&&n.apply(this,arguments)||this;return e.primaryHeaderRowCount=0,e.secondaryHeaderRowCount=0,e.gridHeaderRowCount=0,e.displayedColumnsLeft=[],e.displayedColumnsRight=[],e.displayedColumnsCenter=[],e.displayedColumns=[],e.displayedColumnsAndGroupsMap={},e.viewportColumns=[],e.viewportColumnsHash="",e.headerViewportColumns=[],e.viewportColumnsCenter=[],e.headerViewportColumnsCenter=[],e.autoHeightActiveAtLeastOnce=!1,e.rowGroupColumns=[],e.valueColumns=[],e.pivotColumns=[],e.ready=!1,e.autoGroupsNeedBuilding=!1,e.forceRecreateAutoGroups=!1,e.pivotMode=!1,e.bodyWidth=0,e.leftWidth=0,e.rightWidth=0,e.bodyWidthDirty=!0,e.shouldQueueResizeOperations=!1,e.resizeOperationQueue=[],e}return i.prototype.init=function(){var e=this;this.suppressColumnVirtualisation=this.gridOptionsService.is("suppressColumnVirtualisation");var t=this.gridOptionsService.is("pivotMode");this.isPivotSettingAllowed(t)&&(this.pivotMode=t),this.addManagedPropertyListeners(["groupDisplayType","treeData"],function(){return e.buildAutoGroupColumns()}),this.addManagedPropertyListener("autoGroupColumnDef",function(){return e.onAutoGroupColumnDefChanged()}),this.addManagedPropertyListener("defaultColDef",function(r){return e.onSharedColDefChanged(r.source)}),this.addManagedPropertyListener("columnTypes",function(r){return e.onSharedColDefChanged(r.source)})},i.prototype.buildAutoGroupColumns=function(){this.columnDefs&&(this.autoGroupsNeedBuilding=!0,this.forceRecreateAutoGroups=!0,this.updateGridColumns(),this.updateDisplayedColumns("gridOptionsChanged"))},i.prototype.onAutoGroupColumnDefChanged=function(){this.groupAutoColumns&&this.autoGroupColService.updateAutoGroupColumns(this.groupAutoColumns)},i.prototype.onSharedColDefChanged=function(e){e===void 0&&(e="api"),this.groupAutoColumns&&this.autoGroupColService.updateAutoGroupColumns(this.groupAutoColumns),this.createColumnsFromColumnDefs(!0,e)},i.prototype.setColumnDefs=function(e,t){t===void 0&&(t="api");var r=!!this.columnDefs;this.columnDefs=e,this.createColumnsFromColumnDefs(r,t)},i.prototype.recreateColumnDefs=function(e){e===void 0&&(e="api"),this.onSharedColDefChanged(e)},i.prototype.destroyOldColumns=function(e,t){var r={};if(e){this.columnUtils.depthFirstOriginalTreeSearch(null,e,function(a){r[a.getInstanceId()]=a}),t&&this.columnUtils.depthFirstOriginalTreeSearch(null,t,function(a){r[a.getInstanceId()]=null});var o=Object.values(r).filter(function(a){return a!=null});this.destroyBeans(o)}},i.prototype.destroyColumns=function(){this.destroyOldColumns(this.primaryColumnTree),this.destroyOldColumns(this.secondaryBalancedTree),this.destroyOldColumns(this.groupAutoColsBalancedTree)},i.prototype.createColumnsFromColumnDefs=function(e,t){var r=this;t===void 0&&(t="api");var o=e?this.compareColumnStatesAndDispatchEvents(t):void 0;this.valueCache.expire(),this.autoGroupsNeedBuilding=!0;var a=this.primaryColumns,s=this.primaryColumnTree,l=this.columnFactory.createColumnTree(this.columnDefs,!0,s);this.destroyOldColumns(this.primaryColumnTree,l.columnTree),this.primaryColumnTree=l.columnTree,this.primaryHeaderRowCount=l.treeDept+1,this.primaryColumns=this.getColumnsFromTree(this.primaryColumnTree),this.primaryColumnsMap={},this.primaryColumns.forEach(function(d){return r.primaryColumnsMap[d.getId()]=d}),this.extractRowGroupColumns(t,a),this.extractPivotColumns(t,a),this.extractValueColumns(t,a),this.ready=!0;var u=this.gridColsArePrimary===void 0,c=this.gridColsArePrimary||u||this.autoGroupsNeedBuilding;c&&(this.updateGridColumns(),e&&this.gridColsArePrimary&&!this.gridOptionsService.is("maintainColumnOrder")&&this.orderGridColumnsLikePrimary(),this.updateDisplayedColumns(t),this.checkViewportColumns()),this.dispatchEverythingChanged(t),o&&o(),this.dispatchNewColumnsLoaded(t)},i.prototype.dispatchNewColumnsLoaded=function(e){var t={type:b.EVENT_NEW_COLUMNS_LOADED,source:e};this.eventService.dispatchEvent(t)},i.prototype.dispatchEverythingChanged=function(e){e===void 0&&(e="api");var t={type:b.EVENT_COLUMN_EVERYTHING_CHANGED,source:e};this.eventService.dispatchEvent(t)},i.prototype.orderGridColumnsLikePrimary=function(){var e=this,t=this.primaryColumns;if(t){var r=t.filter(function(a){return e.gridColumns.indexOf(a)>=0}),o=this.gridColumns.filter(function(a){return r.indexOf(a)<0});this.gridColumns=Br(Br([],Vr(o)),Vr(r)),this.gridColumns=this.placeLockedColumns(this.gridColumns)}},i.prototype.getAllDisplayedAutoHeightCols=function(){return this.displayedAutoHeightCols},i.prototype.setViewport=function(){this.gridOptionsService.is("enableRtl")?(this.viewportLeft=this.bodyWidth-this.scrollPosition-this.scrollWidth,this.viewportRight=this.bodyWidth-this.scrollPosition):(this.viewportLeft=this.scrollPosition,this.viewportRight=this.scrollWidth+this.scrollPosition)},i.prototype.getDisplayedColumnsStartingAt=function(e){for(var t=e,r=[];t!=null;)r.push(t),t=this.getDisplayedColAfter(t);return r},i.prototype.checkViewportColumns=function(e){if(e===void 0&&(e=!1),this.displayedColumnsCenter!=null){var t=this.extractViewport();if(t){var r={type:b.EVENT_VIRTUAL_COLUMNS_CHANGED,afterScroll:e};this.eventService.dispatchEvent(r)}}},i.prototype.setViewportPosition=function(e,t,r){r===void 0&&(r=!1),(e!==this.scrollWidth||t!==this.scrollPosition||this.bodyWidthDirty)&&(this.scrollWidth=e,this.scrollPosition=t,this.bodyWidthDirty=!0,this.setViewport(),this.ready&&this.checkViewportColumns(r))},i.prototype.isPivotMode=function(){return this.pivotMode},i.prototype.isPivotSettingAllowed=function(e){return e&&this.gridOptionsService.is("treeData")?(console.warn("AG Grid: Pivot mode not available in conjunction Tree Data i.e. 'gridOptions.treeData: true'"),!1):!0},i.prototype.setPivotMode=function(e,t){if(t===void 0&&(t="api"),!(e===this.pivotMode||!this.isPivotSettingAllowed(this.pivotMode))){this.pivotMode=e,this.autoGroupsNeedBuilding=!0,this.updateGridColumns(),this.updateDisplayedColumns(t);var r={type:b.EVENT_COLUMN_PIVOT_MODE_CHANGED};this.eventService.dispatchEvent(r)}},i.prototype.getSecondaryPivotColumn=function(e,t){if(vt(this.secondaryColumns))return null;var r=this.getPrimaryColumn(t),o=null;return this.secondaryColumns.forEach(function(a){var s=a.getColDef().pivotKeys,l=a.getColDef().pivotValueColumn,u=Ko(s,e),c=l===r;u&&c&&(o=a)}),o},i.prototype.setBeans=function(e){this.logger=e.create("columnModel")},i.prototype.setFirstRightAndLastLeftPinned=function(e){var t,r;this.gridOptionsService.is("enableRtl")?(t=this.displayedColumnsLeft?this.displayedColumnsLeft[0]:null,r=this.displayedColumnsRight?ai(this.displayedColumnsRight):null):(t=this.displayedColumnsLeft?ai(this.displayedColumnsLeft):null,r=this.displayedColumnsRight?this.displayedColumnsRight[0]:null),this.gridColumns.forEach(function(o){o.setLastLeftPinned(o===t,e),o.setFirstRightPinned(o===r,e)})},i.prototype.autoSizeColumns=function(e){var t=this;if(this.shouldQueueResizeOperations){this.resizeOperationQueue.push(function(){return t.autoSizeColumns(e)});return}var r=e.columns,o=e.skipHeader,a=e.skipHeaderGroups,s=e.stopAtGroup,l=e.source,u=l===void 0?"api":l;this.animationFrameService.flushAllFrames();for(var c=[],d=-1,f=o??this.gridOptionsService.is("skipHeaderOnAutoSize"),y=a??f;d!==0;)d=0,this.actionOnGridColumns(r,function(S){if(c.indexOf(S)>=0)return!1;var w=t.autoWidthCalculator.getPreferredWidthForColumn(S,f);if(w>0){var E=t.normaliseColumnWidth(S,w);S.setActualWidth(E,u),c.push(S),d++}return!0},u);y||this.autoSizeColumnGroupsByColumns(r,u,s),this.dispatchColumnResizedEvent(c,!0,"autosizeColumns")},i.prototype.dispatchColumnResizedEvent=function(e,t,r,o){if(o===void 0&&(o=null),e&&e.length){var a={type:b.EVENT_COLUMN_RESIZED,columns:e,column:e.length===1?e[0]:null,flexColumns:o,finished:t,source:r};this.eventService.dispatchEvent(a)}},i.prototype.dispatchColumnChangedEvent=function(e,t,r){var o={type:e,columns:t,column:t&&t.length==1?t[0]:null,source:r};this.eventService.dispatchEvent(o)},i.prototype.dispatchColumnMovedEvent=function(e){var t=e.movedColumns,r=e.source,o=e.toIndex,a=e.finished,s={type:b.EVENT_COLUMN_MOVED,columns:t,column:t&&t.length===1?t[0]:null,toIndex:o,finished:a,source:r};this.eventService.dispatchEvent(s)},i.prototype.dispatchColumnPinnedEvent=function(e,t){if(e.length){var r=e.length===1?e[0]:null,o=this.getCommonValue(e,function(s){return s.getPinned()}),a={type:b.EVENT_COLUMN_PINNED,pinned:o??null,columns:e,column:r,source:t};this.eventService.dispatchEvent(a)}},i.prototype.dispatchColumnVisibleEvent=function(e,t){if(e.length){var r=e.length===1?e[0]:null,o=this.getCommonValue(e,function(s){return s.isVisible()}),a={type:b.EVENT_COLUMN_VISIBLE,visible:o,columns:e,column:r,source:t};this.eventService.dispatchEvent(a)}},i.prototype.autoSizeColumn=function(e,t,r){r===void 0&&(r="api"),e&&this.autoSizeColumns({columns:[e],skipHeader:t,skipHeaderGroups:!0,source:r})},i.prototype.autoSizeColumnGroupsByColumns=function(e,t,r){var o,a,s,l,u=new Set,c=this.getGridColumns(e);c.forEach(function(P){for(var V=P.getParent();V&&V!=r;)V.isPadding()||u.add(V),V=V.getParent()});var d,f=[];try{for(var y=Np(u),S=y.next();!S.done;S=y.next()){var w=S.value;try{for(var E=(s=void 0,Np(this.ctrlsService.getHeaderRowContainerCtrls())),_=E.next();!_.done;_=E.next()){var L=_.value;if(d=L.getHeaderCtrlForColumn(w),d)break}}catch(P){s={error:P}}finally{try{_&&!_.done&&(l=E.return)&&l.call(E)}finally{if(s)throw s.error}}d&&d.resizeLeafColumnsToFit(t)}}catch(P){o={error:P}}finally{try{S&&!S.done&&(a=y.return)&&a.call(y)}finally{if(o)throw o.error}}return f},i.prototype.autoSizeAllColumns=function(e,t){var r=this;if(t===void 0&&(t="api"),this.shouldQueueResizeOperations){this.resizeOperationQueue.push(function(){return r.autoSizeAllColumns(e,t)});return}var o=this.getAllDisplayedColumns();this.autoSizeColumns({columns:o,skipHeader:e,source:t})},i.prototype.getColumnsFromTree=function(e){var t=[],r=function(o){for(var a=0;a<o.length;a++){var s=o[a];s instanceof li?t.push(s):s instanceof xi&&r(s.getChildren())}};return r(e),t},i.prototype.getAllDisplayedTrees=function(){return this.displayedTreeLeft&&this.displayedTreeRight&&this.displayedTreeCentre?this.displayedTreeLeft.concat(this.displayedTreeCentre).concat(this.displayedTreeRight):null},i.prototype.getPrimaryColumnTree=function(){return this.primaryColumnTree},i.prototype.getHeaderRowCount=function(){return this.gridHeaderRowCount},i.prototype.getDisplayedTreeLeft=function(){return this.displayedTreeLeft},i.prototype.getDisplayedTreeRight=function(){return this.displayedTreeRight},i.prototype.getDisplayedTreeCentre=function(){return this.displayedTreeCentre},i.prototype.isColumnDisplayed=function(e){return this.getAllDisplayedColumns().indexOf(e)>=0},i.prototype.getAllDisplayedColumns=function(){return this.displayedColumns},i.prototype.getViewportColumns=function(){return this.viewportColumns},i.prototype.getDisplayedLeftColumnsForRow=function(e){return this.colSpanActive?this.getDisplayedColumnsForRow(e,this.displayedColumnsLeft):this.displayedColumnsLeft},i.prototype.getDisplayedRightColumnsForRow=function(e){return this.colSpanActive?this.getDisplayedColumnsForRow(e,this.displayedColumnsRight):this.displayedColumnsRight},i.prototype.isColSpanActive=function(){return this.colSpanActive},i.prototype.getDisplayedColumnsForRow=function(e,t,r,o){for(var a=[],s=null,l=function(d){var f=t[d],y=t.length-d,S=Math.min(f.getColSpan(e),y),w=[f];if(S>1){for(var E=S-1,_=1;_<=E;_++)w.push(t[d+_]);d+=E}var L;if(r?(L=!1,w.forEach(function(V){r(V)&&(L=!0)})):L=!0,L){if(a.length===0&&s){var P=o?o(f):!1;P&&a.push(s)}a.push(f)}s=f,u=d},u,c=0;c<t.length;c++)l(c),c=u;return a},i.prototype.getViewportCenterColumnsForRow=function(e){var t=this;if(!this.colSpanActive)return this.viewportColumnsCenter;var r=function(a){var s=a.getLeft();return ue(s)&&s>t.viewportLeft},o=this.suppressColumnVirtualisation?null:this.isColumnInRowViewport.bind(this);return this.getDisplayedColumnsForRow(e,this.displayedColumnsCenter,o,r)},i.prototype.getAriaColumnIndex=function(e){return this.getAllGridColumns().indexOf(e)+1},i.prototype.isColumnInHeaderViewport=function(e){return e.isAutoHeaderHeight()?!0:this.isColumnInRowViewport(e)},i.prototype.isColumnInRowViewport=function(e){if(e.isAutoHeight())return!0;var t=e.getLeft()||0,r=t+e.getActualWidth(),o=this.viewportLeft-200,a=this.viewportRight+200,s=t<o&&r<o,l=t>a&&r>a;return!s&&!l},i.prototype.getDisplayedColumnsLeftWidth=function(){return this.getWidthOfColsInList(this.displayedColumnsLeft)},i.prototype.getDisplayedColumnsRightWidth=function(){return this.getWidthOfColsInList(this.displayedColumnsRight)},i.prototype.updatePrimaryColumnList=function(e,t,r,o,a,s){var l=this;if(s===void 0&&(s="api"),!(!e||Cr(e))){var u=!1;if(e.forEach(function(d){var f=l.getPrimaryColumn(d);if(f){if(r){if(t.indexOf(f)>=0)return;t.push(f)}else{if(t.indexOf(f)<0)return;mr(t,f)}o(f),u=!0}}),!!u){this.autoGroupsNeedBuilding&&this.updateGridColumns(),this.updateDisplayedColumns(s);var c={type:a,columns:t,column:t.length===1?t[0]:null,source:s};this.eventService.dispatchEvent(c)}}},i.prototype.setRowGroupColumns=function(e,t){t===void 0&&(t="api"),this.autoGroupsNeedBuilding=!0,this.setPrimaryColumnList(e,this.rowGroupColumns,b.EVENT_COLUMN_ROW_GROUP_CHANGED,!0,this.setRowGroupActive.bind(this),t)},i.prototype.setRowGroupActive=function(e,t,r){e!==t.isRowGroupActive()&&(t.setRowGroupActive(e,r),e&&!this.gridOptionsService.is("suppressRowGroupHidesColumns")&&this.setColumnVisible(t,!1,r),!e&&!this.gridOptionsService.is("suppressMakeColumnVisibleAfterUnGroup")&&this.setColumnVisible(t,!0,r))},i.prototype.addRowGroupColumn=function(e,t){t===void 0&&(t="api"),e&&this.addRowGroupColumns([e],t)},i.prototype.addRowGroupColumns=function(e,t){t===void 0&&(t="api"),this.autoGroupsNeedBuilding=!0,this.updatePrimaryColumnList(e,this.rowGroupColumns,!0,this.setRowGroupActive.bind(this,!0),b.EVENT_COLUMN_ROW_GROUP_CHANGED,t)},i.prototype.removeRowGroupColumns=function(e,t){t===void 0&&(t="api"),this.autoGroupsNeedBuilding=!0,this.updatePrimaryColumnList(e,this.rowGroupColumns,!1,this.setRowGroupActive.bind(this,!1),b.EVENT_COLUMN_ROW_GROUP_CHANGED,t)},i.prototype.removeRowGroupColumn=function(e,t){t===void 0&&(t="api"),e&&this.removeRowGroupColumns([e],t)},i.prototype.addPivotColumns=function(e,t){t===void 0&&(t="api"),this.updatePrimaryColumnList(e,this.pivotColumns,!0,function(r){return r.setPivotActive(!0,t)},b.EVENT_COLUMN_PIVOT_CHANGED,t)},i.prototype.setPivotColumns=function(e,t){t===void 0&&(t="api"),this.setPrimaryColumnList(e,this.pivotColumns,b.EVENT_COLUMN_PIVOT_CHANGED,!0,function(r,o){o.setPivotActive(r,t)},t)},i.prototype.addPivotColumn=function(e,t){t===void 0&&(t="api"),this.addPivotColumns([e],t)},i.prototype.removePivotColumns=function(e,t){t===void 0&&(t="api"),this.updatePrimaryColumnList(e,this.pivotColumns,!1,function(r){return r.setPivotActive(!1,t)},b.EVENT_COLUMN_PIVOT_CHANGED,t)},i.prototype.removePivotColumn=function(e,t){t===void 0&&(t="api"),this.removePivotColumns([e],t)},i.prototype.setPrimaryColumnList=function(e,t,r,o,a,s){var l=this,u=new Map;t.forEach(function(c,d){return u.set(c,d)}),t.length=0,ue(e)&&e.forEach(function(c){var d=l.getPrimaryColumn(c);d&&t.push(d)}),t.forEach(function(c,d){var f=u.get(c);if(f===void 0){u.set(c,0);return}o&&f!==d||u.delete(c)}),(this.primaryColumns||[]).forEach(function(c){var d=t.indexOf(c)>=0;a(d,c)}),this.autoGroupsNeedBuilding&&this.updateGridColumns(),this.updateDisplayedColumns(s),this.dispatchColumnChangedEvent(r,Br([],Vr(u.keys())),s)},i.prototype.setValueColumns=function(e,t){t===void 0&&(t="api"),this.setPrimaryColumnList(e,this.valueColumns,b.EVENT_COLUMN_VALUE_CHANGED,!1,this.setValueActive.bind(this),t)},i.prototype.setValueActive=function(e,t,r){if(e!==t.isValueActive()&&(t.setValueActive(e,r),e&&!t.getAggFunc())){var o=this.aggFuncService.getDefaultAggFunc(t);t.setAggFunc(o)}},i.prototype.addValueColumns=function(e,t){t===void 0&&(t="api"),this.updatePrimaryColumnList(e,this.valueColumns,!0,this.setValueActive.bind(this,!0),b.EVENT_COLUMN_VALUE_CHANGED,t)},i.prototype.addValueColumn=function(e,t){t===void 0&&(t="api"),e&&this.addValueColumns([e],t)},i.prototype.removeValueColumn=function(e,t){t===void 0&&(t="api"),this.removeValueColumns([e],t)},i.prototype.removeValueColumns=function(e,t){t===void 0&&(t="api"),this.updatePrimaryColumnList(e,this.valueColumns,!1,this.setValueActive.bind(this,!1),b.EVENT_COLUMN_VALUE_CHANGED,t)},i.prototype.normaliseColumnWidth=function(e,t){var r=e.getMinWidth();ue(r)&&t<r&&(t=r);var o=e.getMaxWidth();return ue(o)&&e.isGreaterThanMax(t)&&(t=o),t},i.prototype.getPrimaryOrGridColumn=function(e){var t=this.getPrimaryColumn(e);return t||this.getGridColumn(e)},i.prototype.setColumnWidths=function(e,t,r,o){var a=this;o===void 0&&(o="api");var s=[];e.forEach(function(l){var u=a.getPrimaryOrGridColumn(l.key);if(u){s.push({width:l.newWidth,ratios:[1],columns:[u]});var c=a.gridOptionsService.get("colResizeDefault")==="shift";if(c&&(t=!t),t){var d=a.getDisplayedColAfter(u);if(!d)return;var f=u.getActualWidth()-l.newWidth,y=d.getActualWidth()+f;s.push({width:y,ratios:[1],columns:[d]})}}}),s.length!==0&&this.resizeColumnSets({resizeSets:s,finished:r,source:o})},i.prototype.checkMinAndMaxWidthsForSet=function(e){var t=e.columns,r=e.width,o=0,a=0,s=!0;t.forEach(function(c){var d=c.getMinWidth();o+=d||0;var f=c.getMaxWidth();ue(f)&&f>0?a+=f:s=!1});var l=r>=o,u=!s||r<=a;return l&&u},i.prototype.resizeColumnSets=function(e){var t=this,r=e.resizeSets,o=e.finished,a=e.source,s=!r||r.every(function(S){return t.checkMinAndMaxWidthsForSet(S)});if(!s){if(o){var l=r&&r.length>0?r[0].columns:null;this.dispatchColumnResizedEvent(l,o,a)}return}var u=[],c=[];r.forEach(function(S){var w=S.width,E=S.columns,_=S.ratios,L={},P={};E.forEach(function(F){return c.push(F)});for(var V=!0,ne=0,ee=function(){if(ne++,ne>1e3)return console.error("AG Grid: infinite loop in resizeColumnSets"),"break";V=!1;var F=[],U=0,Y=w;E.forEach(function(Ce,Q){var Ne=P[Ce.getId()];if(Ne)Y-=L[Ce.getId()];else{F.push(Ce);var xe=_[Q];U+=xe}});var K=1/U;F.forEach(function(Ce,Q){var Ne=Q===F.length-1,xe;Ne?xe=Y:(xe=Math.round(_[Q]*w*K),Y-=xe);var fe=Ce.getMinWidth(),q=Ce.getMaxWidth();ue(fe)&&xe<fe?(xe=fe,P[Ce.getId()]=!0,V=!0):ue(q)&&q>0&&xe>q&&(xe=q,P[Ce.getId()]=!0,V=!0),L[Ce.getId()]=xe})};V;){var re=ee();if(re==="break")break}E.forEach(function(F){var U=L[F.getId()],Y=F.getActualWidth();Y!==U&&(F.setActualWidth(U,a),u.push(F))})});var d=u.length>0,f=[];d&&(f=this.refreshFlexedColumns({resizingCols:c,skipSetLeft:!0}),this.setLeftValues(a),this.updateBodyWidths(),this.checkViewportColumns());var y=c.concat(f);(d||o)&&this.dispatchColumnResizedEvent(y,o,a,f)},i.prototype.setColumnAggFunc=function(e,t,r){if(r===void 0&&(r="api"),!!e){var o=this.getPrimaryColumn(e);o&&(o.setAggFunc(t),this.dispatchColumnChangedEvent(b.EVENT_COLUMN_VALUE_CHANGED,[o],r))}},i.prototype.moveRowGroupColumn=function(e,t,r){r===void 0&&(r="api");var o=this.rowGroupColumns[e],a=this.rowGroupColumns.slice(e,t);this.rowGroupColumns.splice(e,1),this.rowGroupColumns.splice(t,0,o);var s={type:b.EVENT_COLUMN_ROW_GROUP_CHANGED,columns:a,column:a.length===1?a[0]:null,source:r};this.eventService.dispatchEvent(s)},i.prototype.moveColumns=function(e,t,r,o){if(r===void 0&&(r="api"),o===void 0&&(o=!0),this.columnAnimationService.start(),t>this.gridColumns.length-e.length){console.warn("AG Grid: tried to insert columns in invalid location, toIndex = "+t),console.warn("AG Grid: remember that you should not count the moving columns when calculating the new index");return}var a=this.getGridColumns(e),s=!this.doesMovePassRules(a,t);s||(Ac(this.gridColumns,a,t),this.updateDisplayedColumns(r),this.dispatchColumnMovedEvent({movedColumns:a,source:r,toIndex:t,finished:o}),this.columnAnimationService.finish())},i.prototype.doesMovePassRules=function(e,t){var r=this.getProposedColumnOrder(e,t);return this.doesOrderPassRules(r)},i.prototype.doesOrderPassRules=function(e){return!(!this.doesMovePassMarryChildren(e)||!this.doesMovePassLockedPositions(e))},i.prototype.getProposedColumnOrder=function(e,t){var r=this.gridColumns.slice();return Ac(r,e,t),r},i.prototype.sortColumnsLikeGridColumns=function(e){var t=this;if(!(!e||e.length<=1)){var r=e.filter(function(o){return t.gridColumns.indexOf(o)<0}).length>0;r||e.sort(function(o,a){var s=t.gridColumns.indexOf(o),l=t.gridColumns.indexOf(a);return s-l})}},i.prototype.doesMovePassLockedPositions=function(e){var t=0,r=!0,o=function(a){return a?a===!0||a==="left"?0:2:1};return e.forEach(function(a){var s=o(a.getColDef().lockPosition);s<t&&(r=!1),t=s}),r},i.prototype.doesMovePassMarryChildren=function(e){var t=!0;return this.columnUtils.depthFirstOriginalTreeSearch(null,this.gridBalancedTree,function(r){if(r instanceof xi){var o=r,a=o.getColGroupDef(),s=a&&a.marryChildren;if(s){var l=[];o.getLeafColumns().forEach(function(y){var S=e.indexOf(y);l.push(S)});var u=Math.max.apply(Math,l),c=Math.min.apply(Math,l),d=u-c,f=o.getLeafColumns().length-1;d>f&&(t=!1)}}}),t},i.prototype.moveColumn=function(e,t,r){r===void 0&&(r="api"),this.moveColumns([e],t,r)},i.prototype.moveColumnByIndex=function(e,t,r){r===void 0&&(r="api");var o=this.gridColumns[e];this.moveColumn(o,t,r)},i.prototype.getColumnDefs=function(){var e=this;if(this.primaryColumns){var t=this.primaryColumns.slice();return this.gridColsArePrimary?t.sort(function(r,o){return e.gridColumns.indexOf(r)-e.gridColumns.indexOf(o)}):this.lastPrimaryOrder&&t.sort(function(r,o){return e.lastPrimaryOrder.indexOf(r)-e.lastPrimaryOrder.indexOf(o)}),this.columnDefFactory.buildColumnDefs(t,this.rowGroupColumns,this.pivotColumns)}},i.prototype.getBodyContainerWidth=function(){return this.bodyWidth},i.prototype.getContainerWidth=function(e){switch(e){case"left":return this.leftWidth;case"right":return this.rightWidth;default:return this.bodyWidth}},i.prototype.updateBodyWidths=function(){var e=this.getWidthOfColsInList(this.displayedColumnsCenter),t=this.getWidthOfColsInList(this.displayedColumnsLeft),r=this.getWidthOfColsInList(this.displayedColumnsRight);this.bodyWidthDirty=this.bodyWidth!==e;var o=this.bodyWidth!==e||this.leftWidth!==t||this.rightWidth!==r;if(o){this.bodyWidth=e,this.leftWidth=t,this.rightWidth=r;var a={type:b.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED};this.eventService.dispatchEvent(a)}},i.prototype.getValueColumns=function(){return this.valueColumns?this.valueColumns:[]},i.prototype.getPivotColumns=function(){return this.pivotColumns?this.pivotColumns:[]},i.prototype.isPivotActive=function(){return this.pivotColumns&&this.pivotColumns.length>0&&this.pivotMode},i.prototype.getRowGroupColumns=function(){return this.rowGroupColumns?this.rowGroupColumns:[]},i.prototype.getDisplayedCenterColumns=function(){return this.displayedColumnsCenter},i.prototype.getDisplayedLeftColumns=function(){return this.displayedColumnsLeft},i.prototype.getDisplayedRightColumns=function(){return this.displayedColumnsRight},i.prototype.getDisplayedColumns=function(e){switch(e){case"left":return this.getDisplayedLeftColumns();case"right":return this.getDisplayedRightColumns();default:return this.getDisplayedCenterColumns()}},i.prototype.getAllPrimaryColumns=function(){return this.primaryColumns?this.primaryColumns.slice():null},i.prototype.getSecondaryColumns=function(){return this.secondaryColumns?this.secondaryColumns.slice():null},i.prototype.getAllColumnsForQuickFilter=function(){return this.columnsForQuickFilter},i.prototype.getAllGridColumns=function(){return this.gridColumns},i.prototype.isEmpty=function(){return Cr(this.gridColumns)},i.prototype.isRowGroupEmpty=function(){return Cr(this.rowGroupColumns)},i.prototype.setColumnVisible=function(e,t,r){r===void 0&&(r="api"),this.setColumnsVisible([e],t,r)},i.prototype.setColumnsVisible=function(e,t,r){t===void 0&&(t=!1),r===void 0&&(r="api"),this.applyColumnState({state:e.map(function(o){return{colId:typeof o=="string"?o:o.getColId(),hide:!t}})},r)},i.prototype.setColumnPinned=function(e,t,r){r===void 0&&(r="api"),e&&this.setColumnsPinned([e],t,r)},i.prototype.setColumnsPinned=function(e,t,r){if(r===void 0&&(r="api"),this.gridOptionsService.isDomLayout("print")){console.warn("AG Grid: Changing the column pinning status is not allowed with domLayout='print'");return}this.columnAnimationService.start();var o;t===!0||t==="left"?o="left":t==="right"?o="right":o=null,this.actionOnGridColumns(e,function(a){return a.getPinned()!==o?(a.setPinned(o),!0):!1},r,function(){var a={type:b.EVENT_COLUMN_PINNED,pinned:o,column:null,columns:null,source:r};return a}),this.columnAnimationService.finish()},i.prototype.actionOnGridColumns=function(e,t,r,o){var a=this;if(!Cr(e)){var s=[];if(e.forEach(function(u){var c=a.getGridColumn(u);if(c){var d=t(c);d!==!1&&s.push(c)}}),!!s.length&&(this.updateDisplayedColumns(r),ue(o)&&o)){var l=o();l.columns=s,l.column=s.length===1?s[0]:null,this.eventService.dispatchEvent(l)}}},i.prototype.getDisplayedColBefore=function(e){var t=this.getAllDisplayedColumns(),r=t.indexOf(e);return r>0?t[r-1]:null},i.prototype.getDisplayedColAfter=function(e){var t=this.getAllDisplayedColumns(),r=t.indexOf(e);return r<t.length-1?t[r+1]:null},i.prototype.getDisplayedGroupAfter=function(e){return this.getDisplayedGroupAtDirection(e,"After")},i.prototype.getDisplayedGroupBefore=function(e){return this.getDisplayedGroupAtDirection(e,"Before")},i.prototype.getDisplayedGroupAtDirection=function(e,t){for(var r=e.getProvidedColumnGroup().getLevel()+e.getPaddingLevel(),o=e.getDisplayedLeafColumns(),a=t==="After"?ai(o):o[0],s="getDisplayedCol"+t;;){var l=this[s](a);if(!l)return null;var u=this.getColumnGroupAtLevel(l,r);if(u!==e)return u}},i.prototype.getColumnGroupAtLevel=function(e,t){for(var r=e.getParent(),o,a;;){var s=r.getProvidedColumnGroup();if(o=s.getLevel(),a=r.getPaddingLevel(),o+a<=t)break;r=r.getParent()}return r},i.prototype.isPinningLeft=function(){return this.displayedColumnsLeft.length>0},i.prototype.isPinningRight=function(){return this.displayedColumnsRight.length>0},i.prototype.getPrimaryAndSecondaryAndAutoColumns=function(){var e;return(e=[]).concat.apply(e,[this.primaryColumns||[],this.groupAutoColumns||[],this.secondaryColumns||[]])},i.prototype.createStateItemFromColumn=function(e){var t=e.isRowGroupActive()?this.rowGroupColumns.indexOf(e):null,r=e.isPivotActive()?this.pivotColumns.indexOf(e):null,o=e.isValueActive()?e.getAggFunc():null,a=e.getSort()!=null?e.getSort():null,s=e.getSortIndex()!=null?e.getSortIndex():null,l=e.getFlex()!=null&&e.getFlex()>0?e.getFlex():null,u={colId:e.getColId(),width:e.getActualWidth(),hide:!e.isVisible(),pinned:e.getPinned(),sort:a,sortIndex:s,aggFunc:o,rowGroup:e.isRowGroupActive(),rowGroupIndex:t,pivot:e.isPivotActive(),pivotIndex:r,flex:l};return u},i.prototype.getColumnState=function(){if(vt(this.primaryColumns)||!this.isAlive())return[];var e=this.getPrimaryAndSecondaryAndAutoColumns(),t=e.map(this.createStateItemFromColumn.bind(this));return this.orderColumnStateList(t),t},i.prototype.orderColumnStateList=function(e){var t=Yo(this.gridColumns.map(function(r,o){return[r.getColId(),o]}));e.sort(function(r,o){var a=t.has(r.colId)?t.get(r.colId):-1,s=t.has(o.colId)?t.get(o.colId):-1;return a-s})},i.prototype.resetColumnState=function(e){var t=this;e===void 0&&(e="api");var r=this.getColumnsFromTree(this.primaryColumnTree),o=[],a=1e3,s=1e3,l=[];this.groupAutoColumns&&(l=l.concat(this.groupAutoColumns)),r&&(l=l.concat(r)),l.forEach(function(u){var c=t.getColumnStateFromColDef(u);vt(c.rowGroupIndex)&&c.rowGroup&&(c.rowGroupIndex=a++),vt(c.pivotIndex)&&c.pivot&&(c.pivotIndex=s++),o.push(c)}),this.applyColumnState({state:o,applyOrder:!0},e)},i.prototype.getColumnStateFromColDef=function(e){var t=function(E,_){return E??_??null},r=e.getColDef(),o=t(r.sort,r.initialSort),a=t(r.sortIndex,r.initialSortIndex),s=t(r.hide,r.initialHide),l=t(r.pinned,r.initialPinned),u=t(r.width,r.initialWidth),c=t(r.flex,r.initialFlex),d=t(r.rowGroupIndex,r.initialRowGroupIndex),f=t(r.rowGroup,r.initialRowGroup);d==null&&(f==null||f==!1)&&(d=null,f=null);var y=t(r.pivotIndex,r.initialPivotIndex),S=t(r.pivot,r.initialPivot);y==null&&(S==null||S==!1)&&(y=null,S=null);var w=t(r.aggFunc,r.initialAggFunc);return{colId:e.getColId(),sort:o,sortIndex:a,hide:s,pinned:l,width:u,flex:c,rowGroup:f,rowGroupIndex:d,pivot:S,pivotIndex:y,aggFunc:w}},i.prototype.applyColumnState=function(e,t){var r=this;if(Cr(this.primaryColumns))return!1;if(e&&e.state&&!e.state.forEach)return console.warn("AG Grid: applyColumnState() - the state attribute should be an array, however an array was not found. Please provide an array of items (one for each col you want to change) for state."),!1;var o=function(u,c,d){var f=r.compareColumnStatesAndDispatchEvents(t);r.autoGroupsNeedBuilding=!0;var y=c.slice(),S={},w={},E=[],_=[],L=0,P=r.rowGroupColumns.slice(),V=r.pivotColumns.slice();u.forEach(function(F){var U=F.colId||"",Y=U.startsWith(ia);if(Y){E.push(F),_.push(F);return}var K=d(U);K?(r.syncColumnWithStateItem(K,F,e.defaultState,S,w,!1,t),mr(y,K)):(_.push(F),L+=1)});var ne=function(F){return r.syncColumnWithStateItem(F,null,e.defaultState,S,w,!1,t)};y.forEach(ne);var ee=function(F,U,Y,K){var Ce=F[Y.getId()],Q=F[K.getId()],Ne=Ce!=null,xe=Q!=null;if(Ne&&xe)return Ce-Q;if(Ne)return-1;if(xe)return 1;var fe=U.indexOf(Y),q=U.indexOf(K),Pe=fe>=0,Se=q>=0;return Pe&&Se?fe-q:Pe?-1:1};r.rowGroupColumns.sort(ee.bind(r,S,P)),r.pivotColumns.sort(ee.bind(r,w,V)),r.updateGridColumns();var re=r.groupAutoColumns?r.groupAutoColumns.slice():[];return E.forEach(function(F){var U=r.getAutoColumn(F.colId);mr(re,U),r.syncColumnWithStateItem(U,F,e.defaultState,null,null,!0,t)}),re.forEach(ne),r.applyOrderAfterApplyState(e),r.updateDisplayedColumns(t),r.dispatchEverythingChanged(t),f(),{unmatchedAndAutoStates:_,unmatchedCount:L}};this.columnAnimationService.start();var a=o(e.state||[],this.primaryColumns||[],function(u){return r.getPrimaryColumn(u)}),s=a.unmatchedAndAutoStates,l=a.unmatchedCount;return(s.length>0||ue(e.defaultState))&&(l=o(s,this.secondaryColumns||[],function(u){return r.getSecondaryColumn(u)}).unmatchedCount),this.columnAnimationService.finish(),l===0},i.prototype.applyOrderAfterApplyState=function(e){var t=this;if(!(!e.applyOrder||!e.state)){var r=[],o={};e.state.forEach(function(s){if(!(!s.colId||o[s.colId])){var l=t.gridColumnsMap[s.colId];l&&(r.push(l),o[s.colId]=!0)}});var a=0;if(this.gridColumns.forEach(function(s){var l=s.getColId(),u=o[l]!=null;if(!u){var c=l.startsWith(ia);c?ns(r,s,a++):r.push(s)}}),r=this.placeLockedColumns(r),!this.doesMovePassMarryChildren(r)){console.warn("AG Grid: Applying column order broke a group where columns should be married together. Applying new order has been discarded.");return}this.gridColumns=r}},i.prototype.compareColumnStatesAndDispatchEvents=function(e){var t=this,r={rowGroupColumns:this.rowGroupColumns.slice(),pivotColumns:this.pivotColumns.slice(),valueColumns:this.valueColumns.slice()},o=this.getColumnState(),a={};return o.forEach(function(s){a[s.colId]=s}),function(){var s=t.getPrimaryAndSecondaryAndAutoColumns(),l=function(_,L,P,V){var ne=L.map(V),ee=P.map(V),re=Ko(ne,ee);if(!re){var F=new Set(L);P.forEach(function(K){F.delete(K)||F.add(K)});var U=Br([],Vr(F)),Y={type:_,columns:U,column:U.length===1?U[0]:null,source:e};t.eventService.dispatchEvent(Y)}},u=function(_){var L=[];return s.forEach(function(P){var V=a[P.getColId()];V&&_(V,P)&&L.push(P)}),L},c=function(_){return _.getColId()};l(b.EVENT_COLUMN_ROW_GROUP_CHANGED,r.rowGroupColumns,t.rowGroupColumns,c),l(b.EVENT_COLUMN_PIVOT_CHANGED,r.pivotColumns,t.pivotColumns,c);var d=function(_,L){var P=_.aggFunc!=null,V=P!=L.isValueActive(),ne=P&&_.aggFunc!=L.getAggFunc();return V||ne},f=u(d);f.length>0&&t.dispatchColumnChangedEvent(b.EVENT_COLUMN_VALUE_CHANGED,f,e);var y=function(_,L){return _.width!=L.getActualWidth()};t.dispatchColumnResizedEvent(u(y),!0,e);var S=function(_,L){return _.pinned!=L.getPinned()};t.dispatchColumnPinnedEvent(u(S),e);var w=function(_,L){return _.hide==L.isVisible()};t.dispatchColumnVisibleEvent(u(w),e);var E=function(_,L){return _.sort!=L.getSort()||_.sortIndex!=L.getSortIndex()};u(E).length>0&&t.sortController.dispatchSortChangedEvents(e),t.normaliseColumnMovedEventForColumnState(o,e)}},i.prototype.getCommonValue=function(e,t){if(!(!e||e.length==0)){for(var r=t(e[0]),o=1;o<e.length;o++)if(r!==t(e[o]))return;return r}},i.prototype.normaliseColumnMovedEventForColumnState=function(e,t){var r=this,o=this.getColumnState(),a={};o.forEach(function(d){return a[d.colId]=d});var s={};e.forEach(function(d){a[d.colId]&&(s[d.colId]=!0)});var l=e.filter(function(d){return s[d.colId]}),u=o.filter(function(d){return s[d.colId]}),c=[];u.forEach(function(d,f){var y=l&&l[f];if(y&&y.colId!==d.colId){var S=r.getGridColumn(y.colId);S&&c.push(S)}}),c.length&&this.dispatchColumnMovedEvent({movedColumns:c,source:t,finished:!0})},i.prototype.syncColumnWithStateItem=function(e,t,r,o,a,s,l){if(e){var u=function(U,Y){var K={value1:void 0,value2:void 0},Ce=!1;return t&&(t[U]!==void 0&&(K.value1=t[U],Ce=!0),ue(Y)&&t[Y]!==void 0&&(K.value2=t[Y],Ce=!0)),!Ce&&r&&(r[U]!==void 0&&(K.value1=r[U]),ue(Y)&&r[Y]!==void 0&&(K.value2=r[Y])),K},c=u("hide").value1;c!==void 0&&e.setVisible(!c,l);var d=u("pinned").value1;d!==void 0&&e.setPinned(d);var f=this.columnUtils.calculateColMinWidth(e.getColDef()),y=u("flex").value1;y!==void 0&&e.setFlex(y);var S=e.getFlex()<=0;if(S){var w=u("width").value1;w!=null&&f!=null&&w>=f&&e.setActualWidth(w,l)}var E=u("sort").value1;E!==void 0&&(E==="desc"||E==="asc"?e.setSort(E,l):e.setSort(void 0,l));var _=u("sortIndex").value1;if(_!==void 0&&e.setSortIndex(_),!(s||!e.isPrimary())){var L=u("aggFunc").value1;L!==void 0&&(typeof L=="string"?(e.setAggFunc(L),e.isValueActive()||(e.setValueActive(!0,l),this.valueColumns.push(e))):(ue(L)&&console.warn("AG Grid: stateItem.aggFunc must be a string. if using your own aggregation functions, register the functions first before using them in get/set state. This is because it is intended for the column state to be stored and retrieved as simple JSON."),e.isValueActive()&&(e.setValueActive(!1,l),mr(this.valueColumns,e))));var P=u("rowGroup","rowGroupIndex"),V=P.value1,ne=P.value2;(V!==void 0||ne!==void 0)&&(typeof ne=="number"||V?(e.isRowGroupActive()||(e.setRowGroupActive(!0,l),this.rowGroupColumns.push(e)),o&&typeof ne=="number"&&(o[e.getId()]=ne)):e.isRowGroupActive()&&(e.setRowGroupActive(!1,l),mr(this.rowGroupColumns,e)));var ee=u("pivot","pivotIndex"),re=ee.value1,F=ee.value2;(re!==void 0||F!==void 0)&&(typeof F=="number"||re?(e.isPivotActive()||(e.setPivotActive(!0,l),this.pivotColumns.push(e)),a&&typeof F=="number"&&(a[e.getId()]=F)):e.isPivotActive()&&(e.setPivotActive(!1,l),mr(this.pivotColumns,e)))}}},i.prototype.getGridColumns=function(e){return this.getColumns(e,this.getGridColumn.bind(this))},i.prototype.getColumns=function(e,t){var r=[];return e&&e.forEach(function(o){var a=t(o);a&&r.push(a)}),r},i.prototype.getColumnWithValidation=function(e){if(e==null)return null;var t=this.getGridColumn(e);return t||console.warn("AG Grid: could not find column "+e),t},i.prototype.getPrimaryColumn=function(e){return this.primaryColumns?this.getColumn(e,this.primaryColumns,this.primaryColumnsMap):null},i.prototype.getGridColumn=function(e){return this.getColumn(e,this.gridColumns,this.gridColumnsMap)},i.prototype.lookupGridColumn=function(e){return this.gridColumnsMap[e]},i.prototype.getSecondaryColumn=function(e){return this.secondaryColumns?this.getColumn(e,this.secondaryColumns,this.secondaryColumnsMap):null},i.prototype.getColumn=function(e,t,r){if(!e)return null;if(typeof e=="string"&&r[e])return r[e];for(var o=0;o<t.length;o++)if(this.columnsMatch(t[o],e))return t[o];return this.getAutoColumn(e)},i.prototype.getSourceColumnsForGroupColumn=function(e){var t=e.getColDef().showRowGroup;if(!t)return null;if(t===!0)return this.rowGroupColumns.slice(0);var r=this.getPrimaryColumn(t);return r?[r]:null},i.prototype.getAutoColumn=function(e){var t=this;return!this.groupAutoColumns||!ue(this.groupAutoColumns)||vt(this.groupAutoColumns)?null:this.groupAutoColumns.find(function(r){return t.columnsMatch(r,e)})||null},i.prototype.columnsMatch=function(e,t){var r=e===t,o=e.getColDef()===t,a=e.getColId()==t;return r||o||a},i.prototype.getDisplayNameForColumn=function(e,t,r){if(r===void 0&&(r=!1),!e)return null;var o=this.getHeaderName(e.getColDef(),e,null,null,t);return r?this.wrapHeaderNameWithAggFunc(e,o):o},i.prototype.getDisplayNameForProvidedColumnGroup=function(e,t,r){var o=t?t.getColGroupDef():null;return o?this.getHeaderName(o,null,e,t,r):null},i.prototype.getDisplayNameForColumnGroup=function(e,t){return this.getDisplayNameForProvidedColumnGroup(e,e.getProvidedColumnGroup(),t)},i.prototype.getHeaderName=function(e,t,r,o,a){var s=e.headerValueGetter;if(s){var l={colDef:e,column:t,columnGroup:r,providedColumnGroup:o,location:a,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context};return typeof s=="function"?s(l):typeof s=="string"?this.expressionService.evaluate(s,l):(console.warn("AG Grid: headerValueGetter must be a function or a string"),"")}else{if(e.headerName!=null)return e.headerName;if(e.field)return Nh(e.field)}return""},i.prototype.wrapHeaderNameWithAggFunc=function(e,t){if(this.gridOptionsService.is("suppressAggFuncInHeader"))return t;var r=e.getColDef().pivotValueColumn,o=ue(r),a=null,s;if(o){var l=this.gridOptionsService.is("removePivotHeaderRowWhenSingleValueColumn")&&this.valueColumns.length===1,u=e.getColDef().pivotTotalColumnIds!==void 0;if(l&&!u)return t;a=r?r.getAggFunc():null,s=!0}else{var c=e.isValueActive(),d=this.pivotMode||!this.isRowGroupEmpty();c&&d?(a=e.getAggFunc(),s=!0):s=!1}if(s){var f=typeof a=="string"?a:"func",y=this.localeService.getLocaleTextFunc(),S=y(f,f);return S+"("+t+")"}return t},i.prototype.getColumnGroup=function(e,t){if(!e)return null;if(e instanceof Xi)return e;var r=this.getAllDisplayedTrees(),o=typeof t=="number",a=null;return this.columnUtils.depthFirstAllColumnTreeSearch(r,function(s){if(s instanceof Xi){var l=s,u=void 0;o?u=e===l.getGroupId()&&t===l.getPartId():u=e===l.getGroupId(),u&&(a=l)}}),a},i.prototype.isReady=function(){return this.ready},i.prototype.extractValueColumns=function(e,t){this.valueColumns=this.extractColumns(t,this.valueColumns,function(r,o){return r.setValueActive(o,e)},function(){},function(){},function(r){var o=r.aggFunc;if(o===null||o==="")return null;if(o!==void 0)return!!o},function(r){return r.initialAggFunc!=null&&r.initialAggFunc!=""}),this.valueColumns.forEach(function(r){var o=r.getColDef();o.aggFunc!=null&&o.aggFunc!=""?r.setAggFunc(o.aggFunc):r.getAggFunc()||r.setAggFunc(o.initialAggFunc)})},i.prototype.extractRowGroupColumns=function(e,t){this.rowGroupColumns=this.extractColumns(t,this.rowGroupColumns,function(r,o){return r.setRowGroupActive(o,e)},function(r){return r.rowGroupIndex},function(r){return r.initialRowGroupIndex},function(r){return r.rowGroup},function(r){return r.initialRowGroup})},i.prototype.extractColumns=function(e,t,r,o,a,s,l){e===void 0&&(e=[]),t===void 0&&(t=[]);var u=[],c=[];(this.primaryColumns||[]).forEach(function(y){var S=e.indexOf(y)<0,w=y.getColDef(),E=io(s(w)),_=io(l(w)),L=Ar(o(w)),P=Ar(a(w)),V,ne=E!==void 0,ee=L!==void 0,re=_!==void 0,F=P!==void 0;if(ne?V=E:ee?L===null?V=!1:V=L>=0:S?re?V=_:F?V=P!=null&&P>=0:V=!1:V=t.indexOf(y)>=0,V){var U=S?L!=null||P!=null:L!=null;U?u.push(y):c.push(y)}});var d=function(y){var S=o(y.getColDef()),w=a(y.getColDef());return S??w};u.sort(function(y,S){var w=d(y),E=d(S);return w===E?0:w<E?-1:1});var f=[].concat(u);return t.forEach(function(y){c.indexOf(y)>=0&&f.push(y)}),c.forEach(function(y){f.indexOf(y)<0&&f.push(y)}),t.forEach(function(y){f.indexOf(y)<0&&r(y,!1)}),f.forEach(function(y){t.indexOf(y)<0&&r(y,!0)}),f},i.prototype.extractPivotColumns=function(e,t){this.pivotColumns=this.extractColumns(t,this.pivotColumns,function(r,o){return r.setPivotActive(o,e)},function(r){return r.pivotIndex},function(r){return r.initialPivotIndex},function(r){return r.pivot},function(r){return r.initialPivot})},i.prototype.resetColumnGroupState=function(e){e===void 0&&(e="api");var t=[];this.columnUtils.depthFirstOriginalTreeSearch(null,this.primaryColumnTree,function(r){if(r instanceof xi){var o=r.getColGroupDef(),a={groupId:r.getGroupId(),open:o?o.openByDefault:void 0};t.push(a)}}),this.setColumnGroupState(t,e)},i.prototype.getColumnGroupState=function(){var e=[];return this.columnUtils.depthFirstOriginalTreeSearch(null,this.gridBalancedTree,function(t){t instanceof xi&&e.push({groupId:t.getGroupId(),open:t.isExpanded()})}),e},i.prototype.setColumnGroupState=function(e,t){var r=this;t===void 0&&(t="api"),this.columnAnimationService.start();var o=[];e.forEach(function(a){var s=a.groupId,l=a.open,u=r.getProvidedColumnGroup(s);u&&u.isExpanded()!==l&&(r.logger.log("columnGroupOpened("+u.getGroupId()+","+l+")"),u.setExpanded(l),o.push(u))}),this.updateGroupsAndDisplayedColumns(t),this.setFirstRightAndLastLeftPinned(t),o.forEach(function(a){var s={type:b.EVENT_COLUMN_GROUP_OPENED,columnGroup:a};r.eventService.dispatchEvent(s)}),this.columnAnimationService.finish()},i.prototype.setColumnGroupOpened=function(e,t,r){r===void 0&&(r="api");var o;e instanceof xi?o=e.getId():o=e||"",this.setColumnGroupState([{groupId:o,open:t}],r)},i.prototype.getProvidedColumnGroup=function(e){typeof e!="string"&&console.error("AG Grid: group key must be a string");var t=null;return this.columnUtils.depthFirstOriginalTreeSearch(null,this.gridBalancedTree,function(r){r instanceof xi&&r.getId()===e&&(t=r)}),t},i.prototype.calculateColumnsForDisplay=function(){var e=this,t;return this.pivotMode&&vt(this.secondaryColumns)?t=this.gridColumns.filter(function(r){var o=e.groupAutoColumns&&Lr(e.groupAutoColumns,r),a=e.valueColumns&&Lr(e.valueColumns,r);return o||a}):t=this.gridColumns.filter(function(r){var o=e.groupAutoColumns&&Lr(e.groupAutoColumns,r);return o||r.isVisible()}),t},i.prototype.checkColSpanActiveInCols=function(e){var t=!1;return e.forEach(function(r){ue(r.getColDef().colSpan)&&(t=!0)}),t},i.prototype.calculateColumnsForGroupDisplay=function(){var e=this;this.groupDisplayColumns=[],this.groupDisplayColumnsMap={};var t=function(r){var o=r.getColDef(),a=o.showRowGroup;o&&ue(a)&&(e.groupDisplayColumns.push(r),typeof a=="string"?e.groupDisplayColumnsMap[a]=r:a===!0&&e.getRowGroupColumns().forEach(function(s){e.groupDisplayColumnsMap[s.getId()]=r}))};this.gridColumns.forEach(t)},i.prototype.getGroupDisplayColumns=function(){return this.groupDisplayColumns},i.prototype.getGroupDisplayColumnForGroup=function(e){return this.groupDisplayColumnsMap[e]},i.prototype.updateDisplayedColumns=function(e){var t=this.calculateColumnsForDisplay();this.buildDisplayedTrees(t),this.updateGroupsAndDisplayedColumns(e),this.setFirstRightAndLastLeftPinned(e)},i.prototype.isSecondaryColumnsPresent=function(){return ue(this.secondaryColumns)},i.prototype.setSecondaryColumns=function(e,t){var r=this;t===void 0&&(t="api");var o=e&&e.length>0;if(!(!o&&vt(this.secondaryColumns))){if(o){this.processSecondaryColumnDefinitions(e);var a=this.columnFactory.createColumnTree(e,!1,this.secondaryBalancedTree||this.previousSecondaryColumns||void 0);this.destroyOldColumns(this.secondaryBalancedTree,a.columnTree),this.secondaryBalancedTree=a.columnTree,this.secondaryHeaderRowCount=a.treeDept+1,this.secondaryColumns=this.getColumnsFromTree(this.secondaryBalancedTree),this.secondaryColumnsMap={},this.secondaryColumns.forEach(function(s){return r.secondaryColumnsMap[s.getId()]=s}),this.previousSecondaryColumns=null}else this.previousSecondaryColumns=this.secondaryBalancedTree,this.secondaryBalancedTree=null,this.secondaryHeaderRowCount=-1,this.secondaryColumns=null,this.secondaryColumnsMap={};this.updateGridColumns(),this.updateDisplayedColumns(t)}},i.prototype.processSecondaryColumnDefinitions=function(e){var t=this.gridOptionsService.get("processPivotResultColDef")||this.gridOptionsService.get("processSecondaryColDef"),r=this.gridOptionsService.get("processPivotResultColGroupDef")||this.gridOptionsService.get("processSecondaryColGroupDef");if(!(!t&&!r)){var o=function(a){a.forEach(function(s){var l=ue(s.children);if(l){var u=s;r&&r(u),o(u.children)}else{var c=s;t&&t(c)}})};e&&o(e)}},i.prototype.updateGridColumns=function(){var e=this,t=this.gridBalancedTree;this.gridColsArePrimary?this.lastPrimaryOrder=this.gridColumns:this.lastSecondaryOrder=this.gridColumns;var r;if(this.secondaryColumns&&this.secondaryBalancedTree){var o=this.secondaryColumns.every(function(u){return e.gridColumnsMap[u.getColId()]!==void 0});this.gridBalancedTree=this.secondaryBalancedTree.slice(),this.gridHeaderRowCount=this.secondaryHeaderRowCount,this.gridColumns=this.secondaryColumns.slice(),this.gridColsArePrimary=!1,o&&(r=this.lastSecondaryOrder)}else this.primaryColumns&&(this.gridBalancedTree=this.primaryColumnTree.slice(),this.gridHeaderRowCount=this.primaryHeaderRowCount,this.gridColumns=this.primaryColumns.slice(),this.gridColsArePrimary=!0,r=this.lastPrimaryOrder);var a=this.createGroupAutoColumnsIfNeeded();if(a&&r){var s=Yo(this.groupAutoColumns.map(function(u){return[u,!0]}));r=r.filter(function(u){return!s.has(u)}),r=Br(Br([],Vr(this.groupAutoColumns)),Vr(r))}if(this.addAutoGroupToGridColumns(),this.orderGridColsLike(r),this.gridColumns=this.placeLockedColumns(this.gridColumns),this.calculateColumnsForGroupDisplay(),this.refreshQuickFilterColumns(),this.clearDisplayedAndViewportColumns(),this.colSpanActive=this.checkColSpanActiveInCols(this.gridColumns),this.gridColumnsMap={},this.gridColumns.forEach(function(u){return e.gridColumnsMap[u.getId()]=u}),this.setAutoHeightActive(),!Ko(t,this.gridBalancedTree)){var l={type:b.EVENT_GRID_COLUMNS_CHANGED};this.eventService.dispatchEvent(l)}},i.prototype.setAutoHeightActive=function(){if(this.autoHeightActive=this.gridColumns.filter(function(r){return r.isAutoHeight()}).length>0,this.autoHeightActive){this.autoHeightActiveAtLeastOnce=!0;var e=this.gridOptionsService.isRowModelType("clientSide")||this.gridOptionsService.isRowModelType("serverSide");if(!e){var t="AG Grid - autoHeight columns only work with Client Side Row Model and Server Side Row Model.";Ut(function(){return console.warn(t)},"autoHeightActive.wrongRowModel")}}},i.prototype.orderGridColsLike=function(e){if(!vt(e)){var t=Yo(e.map(function(c,d){return[c,d]})),r=!0;if(this.gridColumns.forEach(function(c){t.has(c)&&(r=!1)}),!r){var o=Yo(this.gridColumns.map(function(c){return[c,!0]})),a=e.filter(function(c){return o.has(c)}),s=Yo(a.map(function(c){return[c,!0]})),l=this.gridColumns.filter(function(c){return!s.has(c)}),u=a.slice();l.forEach(function(c){var d=c.getOriginalParent();if(!d){u.push(c);return}for(var f=[];!f.length&&d;){var y=d.getLeafColumns();y.forEach(function(E){var _=u.indexOf(E)>=0,L=f.indexOf(E)<0;_&&L&&f.push(E)}),d=d.getOriginalParent()}if(!f.length){u.push(c);return}var S=f.map(function(E){return u.indexOf(E)}),w=Math.max.apply(Math,Br([],Vr(S)));ns(u,c,w+1)}),this.gridColumns=u}}},i.prototype.isPrimaryColumnGroupsPresent=function(){return this.primaryHeaderRowCount>1},i.prototype.refreshQuickFilterColumns=function(){var e,t=(e=this.isPivotMode()?this.secondaryColumns:this.primaryColumns)!==null&&e!==void 0?e:[];this.groupAutoColumns&&(t=t.concat(this.groupAutoColumns)),this.columnsForQuickFilter=this.gridOptionsService.is("includeHiddenColumnsInQuickFilter")?t:t.filter(function(r){return r.isVisible()||r.isRowGroupActive()})},i.prototype.placeLockedColumns=function(e){var t=[],r=[],o=[];return e.forEach(function(a){var s=a.getColDef().lockPosition;s==="right"?o.push(a):s==="left"||s===!0?t.push(a):r.push(a)}),Br(Br(Br([],Vr(t)),Vr(r)),Vr(o))},i.prototype.addAutoGroupToGridColumns=function(){if(vt(this.groupAutoColumns)){this.destroyOldColumns(this.groupAutoColsBalancedTree),this.groupAutoColsBalancedTree=null;return}this.gridColumns=this.groupAutoColumns?this.groupAutoColumns.concat(this.gridColumns):this.gridColumns;var e=this.columnFactory.createForAutoGroups(this.groupAutoColumns,this.gridBalancedTree);this.destroyOldColumns(this.groupAutoColsBalancedTree,e),this.groupAutoColsBalancedTree=e,this.gridBalancedTree=e.concat(this.gridBalancedTree)},i.prototype.clearDisplayedAndViewportColumns=function(){this.viewportRowLeft={},this.viewportRowRight={},this.viewportRowCenter={},this.displayedColumnsLeft=[],this.displayedColumnsRight=[],this.displayedColumnsCenter=[],this.displayedColumns=[],this.viewportColumns=[],this.headerViewportColumns=[],this.viewportColumnsHash=""},i.prototype.updateGroupsAndDisplayedColumns=function(e){this.updateOpenClosedVisibilityInColumnGroups(),this.deriveDisplayedColumns(e),this.refreshFlexedColumns(),this.extractViewport(),this.updateBodyWidths();var t={type:b.EVENT_DISPLAYED_COLUMNS_CHANGED};this.eventService.dispatchEvent(t)},i.prototype.deriveDisplayedColumns=function(e){this.derivedDisplayedColumnsFromDisplayedTree(this.displayedTreeLeft,this.displayedColumnsLeft),this.derivedDisplayedColumnsFromDisplayedTree(this.displayedTreeCentre,this.displayedColumnsCenter),this.derivedDisplayedColumnsFromDisplayedTree(this.displayedTreeRight,this.displayedColumnsRight),this.joinDisplayedColumns(),this.setLeftValues(e),this.displayedAutoHeightCols=this.displayedColumns.filter(function(t){return t.isAutoHeight()})},i.prototype.isAutoRowHeightActive=function(){return this.autoHeightActive},i.prototype.wasAutoRowHeightEverActive=function(){return this.autoHeightActiveAtLeastOnce},i.prototype.joinDisplayedColumns=function(){this.gridOptionsService.is("enableRtl")?this.displayedColumns=this.displayedColumnsRight.concat(this.displayedColumnsCenter).concat(this.displayedColumnsLeft):this.displayedColumns=this.displayedColumnsLeft.concat(this.displayedColumnsCenter).concat(this.displayedColumnsRight)},i.prototype.setLeftValues=function(e){this.setLeftValuesOfColumns(e),this.setLeftValuesOfGroups()},i.prototype.setLeftValuesOfColumns=function(e){var t=this;if(this.primaryColumns){var r=this.primaryColumns.slice(0),o=this.gridOptionsService.is("enableRtl");[this.displayedColumnsLeft,this.displayedColumnsRight,this.displayedColumnsCenter].forEach(function(a){if(o){var s=t.getWidthOfColsInList(a);a.forEach(function(u){s-=u.getActualWidth(),u.setLeft(s,e)})}else{var l=0;a.forEach(function(u){u.setLeft(l,e),l+=u.getActualWidth()})}_h(r,a)}),r.forEach(function(a){a.setLeft(null,e)})}},i.prototype.setLeftValuesOfGroups=function(){[this.displayedTreeLeft,this.displayedTreeRight,this.displayedTreeCentre].forEach(function(e){e.forEach(function(t){if(t instanceof Xi){var r=t;r.checkLeft()}})})},i.prototype.derivedDisplayedColumnsFromDisplayedTree=function(e,t){t.length=0,this.columnUtils.depthFirstDisplayedColumnTreeSearch(e,function(r){r instanceof li&&t.push(r)})},i.prototype.extractViewportColumns=function(){this.suppressColumnVirtualisation?(this.viewportColumnsCenter=this.displayedColumnsCenter,this.headerViewportColumnsCenter=this.displayedColumnsCenter):(this.viewportColumnsCenter=this.displayedColumnsCenter.filter(this.isColumnInRowViewport.bind(this)),this.headerViewportColumnsCenter=this.displayedColumnsCenter.filter(this.isColumnInHeaderViewport.bind(this))),this.viewportColumns=this.viewportColumnsCenter.concat(this.displayedColumnsLeft).concat(this.displayedColumnsRight),this.headerViewportColumns=this.headerViewportColumnsCenter.concat(this.displayedColumnsLeft).concat(this.displayedColumnsRight)},i.prototype.getVirtualHeaderGroupRow=function(e,t){var r;switch(e){case"left":r=this.viewportRowLeft[t];break;case"right":r=this.viewportRowRight[t];break;default:r=this.viewportRowCenter[t];break}return vt(r)&&(r=[]),r},i.prototype.calculateHeaderRows=function(){this.viewportRowLeft={},this.viewportRowRight={},this.viewportRowCenter={};var e={};this.headerViewportColumns.forEach(function(r){return e[r.getId()]=!0});var t=function(r,o,a){for(var s=!1,l=0;l<r.length;l++){var u=r[l],c=!1;if(u instanceof li)c=e[u.getId()]===!0;else{var d=u,f=d.getDisplayedChildren();f&&(c=t(f,o,a+1))}c&&(s=!0,o[a]||(o[a]=[]),o[a].push(u))}return s};t(this.displayedTreeLeft,this.viewportRowLeft,0),t(this.displayedTreeRight,this.viewportRowRight,0),t(this.displayedTreeCentre,this.viewportRowCenter,0)},i.prototype.extractViewport=function(){var e=function(o){return o.getId()+"-"+(o.getPinned()||"normal")};this.extractViewportColumns();var t=this.viewportColumns.map(e).join("#"),r=this.viewportColumnsHash!==t;return r&&(this.viewportColumnsHash=t,this.calculateHeaderRows()),r},i.prototype.refreshFlexedColumns=function(e){var t;e===void 0&&(e={});var r=e.source?e.source:"flex";if(e.viewportWidth!=null&&(this.flexViewportWidth=e.viewportWidth),!this.flexViewportWidth)return[];var o=-1;if(e.resizingCols){for(var a=new Set(e.resizingCols),s=this.displayedColumnsCenter,l=s.length-1;l>=0;l--)if(a.has(s[l])){o=l;break}}for(var u=0,c=[],d=0,f=0,l=0;l<this.displayedColumnsCenter.length;l++){var y=this.displayedColumnsCenter[l].getFlex()&&l>o;y?(c.push(this.displayedColumnsCenter[l]),f+=this.displayedColumnsCenter[l].getFlex(),d+=(t=this.displayedColumnsCenter[l].getMinWidth())!==null&&t!==void 0?t:0):u+=this.displayedColumnsCenter[l].getActualWidth()}if(!c.length)return[];var S=[];u+d>this.flexViewportWidth&&(c.forEach(function(F){var U;return F.setActualWidth((U=F.getMinWidth())!==null&&U!==void 0?U:0,r)}),S=c,c=[]);var w=[],E;e:for(;;){E=this.flexViewportWidth-u;for(var _=E/f,l=0;l<c.length;l++){var L=c[l],P=_*L.getFlex(),V=0,ne=L.getMinWidth(),ee=L.getMaxWidth();if(ue(ne)&&P<ne?V=ne:ue(ee)&&P>ee&&(V=ee),V){L.setActualWidth(V,r),td(c,L),f-=L.getFlex(),S.push(L),u+=L.getActualWidth();continue e}w[l]=Math.round(P)}break}var re=E;return c.forEach(function(F,U){F.setActualWidth(Math.min(w[U],re),r),S.push(F),re-=w[U]}),e.skipSetLeft||this.setLeftValues(r),e.updateBodyWidths&&this.updateBodyWidths(),e.fireResizedEvent&&this.dispatchColumnResizedEvent(S,!0,r,c),c},i.prototype.sizeColumnsToFit=function(e,t,r,o){var a=this,s,l,u,c,d;if(t===void 0&&(t="sizeColumnsToFit"),this.shouldQueueResizeOperations){this.resizeOperationQueue.push(function(){return a.sizeColumnsToFit(e,t,r,o)});return}var f={};o&&((s=o?.columnLimits)===null||s===void 0||s.forEach(function(q){var Pe=q.key,Se=Xm(q,["key"]);f[typeof Pe=="string"?Pe:Pe.getColId()]=Se}));var y=this.getAllDisplayedColumns(),S=e===this.getWidthOfColsInList(y);if(!(e<=0||!y.length||S)){var w=[],E=[];y.forEach(function(q){q.getColDef().suppressSizeToFit===!0?E.push(q):w.push(q)});var _=w.slice(0),L=!1,P=function(q){mr(w,q),E.push(q)};for(w.forEach(function(q){var Pe,Se;q.resetActualWidth(t);var ge=f?.[q.getId()],le=(Pe=ge?.minWidth)!==null&&Pe!==void 0?Pe:o?.defaultMinWidth,ie=(Se=ge?.maxWidth)!==null&&Se!==void 0?Se:o?.defaultMaxWidth,ye=q.getActualWidth();typeof le=="number"&&ye<le?q.setActualWidth(le,t,!0):typeof ie=="number"&&ye>ie&&q.setActualWidth(ie,t,!0)});!L;){L=!0;var V=e-this.getWidthOfColsInList(E);if(V<=0)w.forEach(function(q){var Pe,Se,ge=(Se=(Pe=f?.[q.getId()])===null||Pe===void 0?void 0:Pe.minWidth)!==null&&Se!==void 0?Se:o?.defaultMinWidth;if(typeof ge=="number"){q.setActualWidth(ge,t,!0);return}q.setMinimum(t)});else for(var ne=V/this.getWidthOfColsInList(w),ee=V,re=w.length-1;re>=0;re--){var F=w[re],U=f?.[F.getId()],Y=(l=U?.minWidth)!==null&&l!==void 0?l:o?.defaultMinWidth,K=(u=U?.maxWidth)!==null&&u!==void 0?u:o?.defaultMaxWidth,Ce=(c=F.getMinWidth())!==null&&c!==void 0?c:0,Q=(d=F.getMaxWidth())!==null&&d!==void 0?d:Number.MAX_VALUE,Ne=typeof Y=="number"&&Y>Ce?Y:F.getMinWidth(),xe=typeof K=="number"&&K<Q?K:F.getMaxWidth(),fe=Math.round(F.getActualWidth()*ne);ue(Ne)&&fe<Ne?(fe=Ne,P(F),L=!1):ue(xe)&&fe>xe?(fe=xe,P(F),L=!1):re===0&&(fe=ee),F.setActualWidth(fe,t,!0),ee-=fe}}_.forEach(function(q){q.fireColumnWidthChangedEvent(t)}),this.setLeftValues(t),this.updateBodyWidths(),!r&&this.dispatchColumnResizedEvent(_,!0,t)}},i.prototype.buildDisplayedTrees=function(e){var t=[],r=[],o=[];e.forEach(function(s){switch(s.getPinned()){case"left":t.push(s);break;case"right":r.push(s);break;default:o.push(s);break}});var a=new Mh;this.displayedTreeLeft=this.displayedGroupCreator.createDisplayedGroups(t,a,"left",this.displayedTreeLeft),this.displayedTreeRight=this.displayedGroupCreator.createDisplayedGroups(r,a,"right",this.displayedTreeRight),this.displayedTreeCentre=this.displayedGroupCreator.createDisplayedGroups(o,a,null,this.displayedTreeCentre),this.updateDisplayedMap()},i.prototype.updateDisplayedMap=function(){var e=this;this.displayedColumnsAndGroupsMap={};var t=function(r){e.displayedColumnsAndGroupsMap[r.getUniqueId()]=r};this.columnUtils.depthFirstAllColumnTreeSearch(this.displayedTreeCentre,t),this.columnUtils.depthFirstAllColumnTreeSearch(this.displayedTreeLeft,t),this.columnUtils.depthFirstAllColumnTreeSearch(this.displayedTreeRight,t)},i.prototype.isDisplayed=function(e){var t=this.displayedColumnsAndGroupsMap[e.getUniqueId()];return t===e},i.prototype.updateOpenClosedVisibilityInColumnGroups=function(){var e=this.getAllDisplayedTrees();this.columnUtils.depthFirstAllColumnTreeSearch(e,function(t){t instanceof Xi&&t.calculateDisplayedColumns()})},i.prototype.getGroupAutoColumns=function(){return this.groupAutoColumns},i.prototype.createGroupAutoColumnsIfNeeded=function(){var e=this.forceRecreateAutoGroups;if(this.forceRecreateAutoGroups=!1,!this.autoGroupsNeedBuilding)return!1;this.autoGroupsNeedBuilding=!1;var t=this.gridOptionsService.isGroupUseEntireRow(this.pivotMode),r=this.pivotMode?this.gridOptionsService.is("pivotSuppressAutoColumn"):this.isGroupSuppressAutoColumn(),o=this.rowGroupColumns.length>0||this.gridOptionsService.is("treeData"),a=o&&!r&&!t;if(a){var s=this.autoGroupColService.createAutoGroupColumns(this.rowGroupColumns),l=!this.autoColsEqual(s,this.groupAutoColumns);if(l||e)return this.groupAutoColumns=s,!0}else this.groupAutoColumns=null;return!1},i.prototype.isGroupSuppressAutoColumn=function(){var e=this.gridOptionsService.get("groupDisplayType"),t=e?Nc("custom",e):!1;if(t)return!0;var r=this.gridOptionsService.get("treeDataDisplayType");return r?Km("custom",r):!1},i.prototype.autoColsEqual=function(e,t){return Ko(e,t,function(r,o){return r.getColId()===o.getColId()})},i.prototype.getWidthOfColsInList=function(e){return e.reduce(function(t,r){return t+r.getActualWidth()},0)},i.prototype.getGridBalancedTree=function(){return this.gridBalancedTree},i.prototype.getFirstDisplayedColumn=function(){var e=this.gridOptionsService.is("enableRtl"),t=["getDisplayedLeftColumns","getDisplayedCenterColumns","getDisplayedRightColumns"];e&&t.reverse();for(var r=0;r<t.length;r++){var o=this[t[r]]();if(o.length)return e?ai(o):o[0]}return null},i.prototype.setColumnHeaderHeight=function(e,t){var r=e.setAutoHeaderHeight(t);if(r){var o={type:b.EVENT_COLUMN_HEADER_HEIGHT_CHANGED,column:e,columns:[e],source:"autosizeColumnHeaderHeight"};this.eventService.dispatchEvent(o)}},i.prototype.getColumnGroupHeaderRowHeight=function(){return this.isPivotMode()?this.getPivotGroupHeaderHeight():this.getGroupHeaderHeight()},i.prototype.getColumnHeaderRowHeight=function(){var e=this.isPivotMode()?this.getPivotHeaderHeight():this.getHeaderHeight(),t=this.getAllDisplayedColumns().filter(function(r){return r.isAutoHeaderHeight()}).map(function(r){return r.getAutoHeaderHeight()||0});return Math.max.apply(Math,Br([e],Vr(t)))},i.prototype.getHeaderHeight=function(){var e;return(e=this.gridOptionsService.getNum("headerHeight"))!==null&&e!==void 0?e:this.environment.getFromTheme(25,"headerHeight")},i.prototype.getFloatingFiltersHeight=function(){var e;return(e=this.gridOptionsService.getNum("floatingFiltersHeight"))!==null&&e!==void 0?e:this.getHeaderHeight()},i.prototype.getGroupHeaderHeight=function(){var e;return(e=this.gridOptionsService.getNum("groupHeaderHeight"))!==null&&e!==void 0?e:this.getHeaderHeight()},i.prototype.getPivotHeaderHeight=function(){var e;return(e=this.gridOptionsService.getNum("pivotHeaderHeight"))!==null&&e!==void 0?e:this.getHeaderHeight()},i.prototype.getPivotGroupHeaderHeight=function(){var e;return(e=this.gridOptionsService.getNum("pivotGroupHeaderHeight"))!==null&&e!==void 0?e:this.getGroupHeaderHeight()},i.prototype.queueResizeOperations=function(){this.shouldQueueResizeOperations=!0},i.prototype.processResizeOperations=function(){this.shouldQueueResizeOperations=!1,this.resizeOperationQueue.forEach(function(e){return e()}),this.resizeOperationQueue=[]},i.prototype.resetColumnDefIntoColumn=function(e){var t=e.getUserProvidedColDef();if(!t)return!1;var r=this.columnFactory.addColumnDefaultAndTypes(t,e.getColId());return e.setColDef(r,t),!0},i.prototype.generateColumnStateForRowGroupAndPivotIndexes=function(e,t){var r=this,o={},a=function(s,l,u,c,d,f){if(!l.length||!r.primaryColumns)return[];for(var y=Object.keys(s),S=new Set(y),w=new Set(y),E=new Set(l.map(function(Y){var K=Y.getColId();return w.delete(K),K}).concat(y)),_=[],L={},P=0,V=0;V<r.primaryColumns.length;V++){var ne=r.primaryColumns[V].getColId();E.has(ne)&&(_.push(ne),L[ne]=P++)}var ee=1e3,re=!1,F=0,U=function(Y){for(var K=L[Y],Ce=F;Ce<K;Ce++){var Q=_[Ce];w.has(Q)&&(s[Q][d]=ee++,w.delete(Q))}F=K};l.forEach(function(Y){var K=Y.getColId();if(S.has(K))U(K),s[K][d]=ee++;else{var Ce=Y.getColDef(),Q=Ce[d]===null||Ce[d]===void 0&&Ce[f]==null;if(Q){if(!re){var Ne=Ce[u]||Ce[u]===void 0&&Ce[c];Ne?U(K):(w.forEach(function(xe){s[xe][d]=ee+L[xe]}),ee+=_.length,re=!0)}o[K]||(o[K]={colId:K}),o[K][d]=ee++}}})};return a(e,this.rowGroupColumns,"rowGroup","initialRowGroup","rowGroupIndex","initialRowGroupIndex"),a(t,this.pivotColumns,"pivot","initialPivot","pivotIndex","initialPivotIndex"),Object.values(o)},qi([T("expressionService")],i.prototype,"expressionService",void 0),qi([T("columnFactory")],i.prototype,"columnFactory",void 0),qi([T("displayedGroupCreator")],i.prototype,"displayedGroupCreator",void 0),qi([T("ctrlsService")],i.prototype,"ctrlsService",void 0),qi([T("autoWidthCalculator")],i.prototype,"autoWidthCalculator",void 0),qi([T("columnUtils")],i.prototype,"columnUtils",void 0),qi([T("columnAnimationService")],i.prototype,"columnAnimationService",void 0),qi([T("autoGroupColService")],i.prototype,"autoGroupColService",void 0),qi([Zt("aggFuncService")],i.prototype,"aggFuncService",void 0),qi([Zt("valueCache")],i.prototype,"valueCache",void 0),qi([Zt("animationFrameService")],i.prototype,"animationFrameService",void 0),qi([T("sortController")],i.prototype,"sortController",void 0),qi([T("columnDefFactory")],i.prototype,"columnDefFactory",void 0),qi([Oe],i.prototype,"init",null),qi([Ki],i.prototype,"destroyColumns",null),qi([qm(0,er("loggerFactory"))],i.prototype,"setBeans",null),i=qi([Ue("columnModel")],i),i}(ve),Zm=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),$m=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},eC=function(n){Zm(i,n);function i(){return n!==null&&n.apply(this,arguments)||this}return i.prototype.calculateColMinWidth=function(e){return e.minWidth!=null?e.minWidth:this.environment.getMinColWidth()},i.prototype.calculateColMaxWidth=function(e){return e.maxWidth!=null?e.maxWidth:Number.MAX_SAFE_INTEGER},i.prototype.calculateColInitialWidth=function(e){var t=this.calculateColMinWidth(e),r=this.calculateColMaxWidth(e),o,a=Ar(e.width),s=Ar(e.initialWidth);return a!=null?o=a:s!=null?o=s:o=200,Math.max(Math.min(o,r),t)},i.prototype.getOriginalPathForColumn=function(e,t){var r=[],o=!1,a=function(s,l){for(var u=0;u<s.length;u++){if(o)return;var c=s[u];if(c instanceof xi){var d=c;a(d.getChildren(),l+1),r[l]=c}else c===e&&(o=!0)}};return a(t,0),o?r:null},i.prototype.depthFirstOriginalTreeSearch=function(e,t,r){var o=this;t&&t.forEach(function(a){a instanceof xi&&o.depthFirstOriginalTreeSearch(a,a.getChildren(),r),r(a,e)})},i.prototype.depthFirstAllColumnTreeSearch=function(e,t){var r=this;e&&e.forEach(function(o){o instanceof Xi&&r.depthFirstAllColumnTreeSearch(o.getChildren(),t),t(o)})},i.prototype.depthFirstDisplayedColumnTreeSearch=function(e,t){var r=this;e&&e.forEach(function(o){o instanceof Xi&&r.depthFirstDisplayedColumnTreeSearch(o.getDisplayedChildren(),t),t(o)})},i=$m([Ue("columnUtils")],i),i}(ve),tC=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),iC=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},rC=function(n){tC(i,n);function i(){return n!==null&&n.apply(this,arguments)||this}return i.prototype.createDisplayedGroups=function(e,t,r,o){for(var a=this,s=this.mapOldGroupsById(o),l=[],u=e,c=function(){var d=u;u=[];for(var f=0,y=function(ne){var ee=f;f=ne;var re=d[ee],F=re instanceof Xi?re.getProvidedColumnGroup():re,U=F.getOriginalParent();if(U==null){for(var Y=ee;Y<ne;Y++)l.push(d[Y]);return}for(var K=a.createColumnGroup(U,t,s,r),Y=ee;Y<ne;Y++)K.addChild(d[Y]);u.push(K)},S=1;S<d.length;S++){var w=d[S],E=w instanceof Xi?w.getProvidedColumnGroup():w,_=E.getOriginalParent(),L=d[f],P=L instanceof Xi?L.getProvidedColumnGroup():L,V=P.getOriginalParent();_!==V&&y(S)}f<d.length&&y(d.length)};u.length;)c();return this.setupParentsIntoColumns(l,null),l},i.prototype.createColumnGroup=function(e,t,r,o){var a=e.getGroupId(),s=t.getInstanceIdForKey(a),l=Xi.createUniqueId(a,s),u=r[l];return u&&u.getProvidedColumnGroup()!==e&&(u=null),ue(u)?u.reset():(u=new Xi(e,a,s,o),this.context.createBean(u)),u},i.prototype.mapOldGroupsById=function(e){var t={},r=function(o){o.forEach(function(a){if(a instanceof Xi){var s=a;t[a.getUniqueId()]=s,r(s.getChildren())}})};return e&&r(e),t},i.prototype.setupParentsIntoColumns=function(e,t){var r=this;e.forEach(function(o){if(o.setParent(t),o instanceof Xi){var a=o;r.setupParentsIntoColumns(a.getChildren(),a)}})},i=iC([Ue("displayedGroupCreator")],i),i}(ve),oC=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),nC=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},aC=function(n){oC(i,n);function i(){var e=n!==null&&n.apply(this,arguments)||this;return e.componentsMappedByName={},e}return i.prototype.setupComponents=function(e){var t=this;e&&e.forEach(function(r){return t.addComponent(r)})},i.prototype.addComponent=function(e){var t=e.componentName.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),r=t.toUpperCase();this.componentsMappedByName[r]=e.componentClass},i.prototype.getComponentClass=function(e){return this.componentsMappedByName[e]},i=nC([Ue("agStackComponentsRegistry")],i),i}(ve);function Qr(n,i,e){e==null||e==""?rd(n,i):kr(n,i,e)}function kr(n,i,e){n.setAttribute(kh(i),e.toString())}function rd(n,i){n.removeAttribute(kh(i))}function kh(n){return"aria-"+n}function Wi(n,i){i?n.setAttribute("role",i):n.removeAttribute("role")}function Gh(n){var i;return n==="asc"?i="ascending":n==="desc"?i="descending":n==="mixed"?i="other":i="none",i}function Vh(n){return parseInt(n.getAttribute("aria-level"),10)}function Bh(n){return parseInt(n.getAttribute("aria-posinset"),10)}function sC(n){return n.getAttribute("aria-describedby")||""}function Po(n,i){Qr(n,"label",i)}function Gl(n,i){Qr(n,"labelledby",i)}function Hh(n,i){Qr(n,"description",i)}function Wh(n,i){Qr(n,"describedby",i)}function Uh(n,i){Qr(n,"live",i)}function jh(n,i){Qr(n,"level",i)}function od(n,i){Qr(n,"disabled",i)}function Vl(n,i){Qr(n,"hidden",i)}function nd(n,i){Qr(n,"activedescendant",i)}function Yr(n,i){kr(n,"expanded",i)}function zh(n){rd(n,"expanded")}function ad(n,i){kr(n,"setsize",i)}function sd(n,i){kr(n,"posinset",i)}function Yh(n,i){kr(n,"multiselectable",i)}function Kh(n,i){kr(n,"rowcount",i)}function ld(n,i){kr(n,"rowindex",i)}function Qh(n,i){kr(n,"colcount",i)}function ud(n,i){kr(n,"colindex",i)}function qh(n,i){kr(n,"colspan",i)}function Xh(n,i){kr(n,"sort",i)}function Jh(n){rd(n,"sort")}function Dn(n,i){Qr(n,"selected",i)}function Zh(n,i){kr(n,"checked",i===void 0?"mixed":i)}function $h(n,i){Qr(n,"controls",i.id),Gl(i,n.id)}function Bl(n,i){return i===void 0?n("ariaIndeterminate","indeterminate"):i===!0?n("ariaChecked","checked"):n("ariaUnchecked","unchecked")}var lC=Object.freeze({__proto__:null,setAriaRole:Wi,getAriaSortState:Gh,getAriaLevel:Vh,getAriaPosInSet:Bh,getAriaDescribedBy:sC,setAriaLabel:Po,setAriaLabelledBy:Gl,setAriaDescription:Hh,setAriaDescribedBy:Wh,setAriaLive:Uh,setAriaLevel:jh,setAriaDisabled:od,setAriaHidden:Vl,setAriaActiveDescendant:nd,setAriaExpanded:Yr,removeAriaExpanded:zh,setAriaSetSize:ad,setAriaPosInSet:sd,setAriaMultiSelectable:Yh,setAriaRowCount:Kh,setAriaRowIndex:ld,setAriaColCount:Qh,setAriaColIndex:ud,setAriaColSpan:qh,setAriaSort:Xh,removeAriaSort:Jh,setAriaSelected:Dn,setAriaChecked:Zh,setAriaControls:$h,getAriaCheckboxStateName:Bl}),Ou,Fs,Pu,Eu,_u,bu,Fc,Ic;function Fr(){return Ou===void 0&&(Ou=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),Ou}function cd(){if(Fs===void 0)if(Fr()){var n=navigator.userAgent.match(/version\/(\d+)/i);n&&(Fs=n[1]!=null?parseFloat(n[1]):0)}else Fs=0;return Fs}function Hl(){if(Pu===void 0){var n=window;Pu=!!n.chrome&&(!!n.chrome.webstore||!!n.chrome.runtime)||/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}return Pu}function dd(){return Eu===void 0&&(Eu=/(firefox)/i.test(navigator.userAgent)),Eu}function pd(){return _u===void 0&&(_u=/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)),_u}function $o(){return bu===void 0&&(bu=/iPad|iPhone|iPod/.test(navigator.platform)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1),bu}function Wl(){return!Fr()||cd()>=15}function yl(n){if(!n)return null;var i=n.tabIndex,e=n.getAttribute("tabIndex");return i===-1&&(e===null||e===""&&!dd())?null:i.toString()}function ev(){if(!document.body)return-1;var n=1e6,i=navigator.userAgent.toLowerCase().match(/firefox/)?6e6:1e9,e=document.createElement("div");for(document.body.appendChild(e);;){var t=n*2;if(e.style.height=t+"px",t>i||e.clientHeight!==t)break;n=t}return document.body.removeChild(e),n}function tv(){var n,i,e;return(i=(n=document.body)===null||n===void 0?void 0:n.clientWidth)!==null&&i!==void 0?i:window.innerHeight||((e=document.documentElement)===null||e===void 0?void 0:e.clientWidth)||-1}function iv(){var n,i,e;return(i=(n=document.body)===null||n===void 0?void 0:n.clientHeight)!==null&&i!==void 0?i:window.innerHeight||((e=document.documentElement)===null||e===void 0?void 0:e.clientHeight)||-1}function rv(){return Ic==null&&ov(),Ic}function ov(){var n=document.body,i=document.createElement("div");i.style.width=i.style.height="100px",i.style.opacity="0",i.style.overflow="scroll",i.style.msOverflowStyle="scrollbar",i.style.position="absolute",n.appendChild(i);var e=i.offsetWidth-i.clientWidth;e===0&&i.clientWidth===0&&(e=null),i.parentNode&&i.parentNode.removeChild(i),e!=null&&(Ic=e,Fc=e===0)}function as(){return Fc==null&&ov(),Fc}var uC=Object.freeze({__proto__:null,isBrowserSafari:Fr,getSafariVersion:cd,isBrowserChrome:Hl,isBrowserFirefox:dd,isMacOsUserAgent:pd,isIOSUserAgent:$o,browserSupportsPreventScroll:Wl,getTabIndex:yl,getMaxDivHeight:ev,getBodyWidth:tv,getBodyHeight:iv,getScrollbarWidth:rv,isInvisibleScrollbar:as});function Zn(n,i){return n.toString().padStart(i,"0")}function nv(n,i){for(var e=[],t=n;t<=i;t++)e.push(t);return e}function cC(n){return typeof n=="string"&&(n=parseInt(n,10)),typeof n=="number"?Math.floor(n):null}function dC(n,i){for(var e="",t=0;t<i;t++)e+=String.fromCharCode(n&255),n>>>=8;return e}function pC(n,i,e){return typeof n!="number"?"":fd(Math.round(n*100)/100,i,e)}function fd(n,i,e){return typeof n!="number"?"":n.toString().replace(".",e).replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+i)}function fC(n){return n==null?null:n.reduce(function(i,e){return i+e},0)}function hC(n,i){return n>=0?n:i}function vC(n,i){var e=parseInt(n,10);return!isNaN(e)&&isFinite(e)&&e>0?e:i}var gC=Object.freeze({__proto__:null,padStartWidthZeros:Zn,createArrayOfNumbers:nv,cleanNumber:cC,decToHex:dC,formatNumberTwoDecimalPlacesAndCommas:pC,formatNumberCommas:fd,sum:fC,zeroOrGreater:hC,oneOrGreater:vC}),Du=function(n,i){var e=typeof Symbol=="function"&&n[Symbol.iterator];if(!e)return n;var t=e.call(n),r,o=[],a;try{for(;(i===void 0||i-- >0)&&!(r=t.next()).done;)o.push(r.value)}catch(s){a={error:s}}finally{try{r&&!r.done&&(e=t.return)&&e.call(t)}finally{if(a)throw a.error}}return o};function Mr(n,i,e){if(i===void 0&&(i=!0),e===void 0&&(e="-"),!n)return null;var t=[n.getFullYear(),n.getMonth()+1,n.getDate()].map(function(r){return Zn(r,2)}).join(e);return i&&(t+=" "+[n.getHours(),n.getMinutes(),n.getSeconds()].map(function(r){return Zn(r,2)}).join(":")),t}var Ru=function(n){if(n>3&&n<21)return"th";var i=n%10;switch(i){case 1:return"st";case 2:return"nd";case 3:return"rd"}return"th"};function $n(n,i){i===void 0&&(i="YYYY-MM-DD");var e=Zn(n.getFullYear(),4),t=["January","February","March","April","May","June","July","August","September","October","November","December"],r=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],o={YYYY:function(){return e.slice(e.length-4,e.length)},YY:function(){return e.slice(e.length-2,e.length)},Y:function(){return""+n.getFullYear()},MMMM:function(){return t[n.getMonth()]},MMM:function(){return t[n.getMonth()].slice(0,3)},MM:function(){return Zn(n.getMonth()+1,2)},Mo:function(){return""+(n.getMonth()+1)+Ru(n.getMonth()+1)},M:function(){return""+(n.getMonth()+1)},Do:function(){return""+n.getDate()+Ru(n.getDate())},DD:function(){return Zn(n.getDate(),2)},D:function(){return""+n.getDate()},dddd:function(){return r[n.getDay()]},ddd:function(){return r[n.getDay()].slice(0,3)},dd:function(){return r[n.getDay()].slice(0,2)},do:function(){return""+n.getDay()+Ru(n.getDay())},d:function(){return""+n.getDay()}},a=new RegExp(Object.keys(o).join("|"),"g");return i.replace(a,function(s){return s in o?o[s]():s})}function pr(n){if(!n)return null;var i=Du(n.split(" "),2),e=i[0],t=i[1];if(!e)return null;var r=e.split("-").map(function(S){return parseInt(S,10)});if(r.filter(function(S){return!isNaN(S)}).length!==3)return null;var o=Du(r,3),a=o[0],s=o[1],l=o[2],u=new Date(a,s-1,l);if(u.getFullYear()!==a||u.getMonth()!==s-1||u.getDate()!==l)return null;if(!t||t==="00:00:00")return u;var c=Du(t.split(":").map(function(S){return parseInt(S,10)}),3),d=c[0],f=c[1],y=c[2];return d>=0&&d<24&&u.setHours(d),f>=0&&f<60&&u.setMinutes(f),y>=0&&y<60&&u.setSeconds(y),u}var yC=Object.freeze({__proto__:null,serialiseDate:Mr,dateToFormattedString:$n,parseDateTimeFromString:pr}),mC=function(n){var i=typeof Symbol=="function"&&Symbol.iterator,e=i&&n[i],t=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&t>=n.length&&(n=void 0),{value:n&&n[t++],done:!n}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},CC=function(n,i){var e=typeof Symbol=="function"&&n[Symbol.iterator];if(!e)return n;var t=e.call(n),r,o=[],a;try{for(;(i===void 0||i-- >0)&&!(r=t.next()).done;)o.push(r.value)}catch(s){a={error:s}}finally{try{r&&!r.done&&(e=t.return)&&e.call(t)}finally{if(a)throw a.error}}return o},Is;function kc(n,i,e){for(var t=n.parentElement,r=t&&t.firstChild;r;)i&&r.classList.toggle(i,r===n),e&&r.classList.toggle(e,r!==n),r=r.nextSibling}var av="[tabindex], input, select, button, textarea, [href]",hd=".ag-hidden, .ag-hidden *, [disabled], .ag-disabled:not(.ag-button), .ag-disabled *";function vd(n){var i=Element.prototype.matches||Element.prototype.msMatchesSelector,e="input, select, button, textarea",t=i.call(n,e),r=i.call(n,hd),o=tn(n),a=t&&!r&&o;return a}function Yt(n,i,e){e===void 0&&(e={});var t=e.skipAriaHidden;n.classList.toggle("ag-hidden",!i),t||Vl(n,!i)}function sv(n,i,e){e===void 0&&(e={});var t=e.skipAriaHidden;n.classList.toggle("ag-invisible",!i),t||Vl(n,!i)}function ra(n,i){var e="disabled",t=i?function(r){return r.setAttribute(e,"")}:function(r){return r.removeAttribute(e)};t(n),wd(n.querySelectorAll("input"),function(r){return t(r)})}function On(n,i,e){for(var t=0;n;){if(n.classList.contains(i))return!0;if(n=n.parentElement,typeof e=="number"){if(++t>e)break}else if(n===e)break}return!1}function en(n){var i=window.getComputedStyle(n),e=i.height,t=i.width,r=i.borderTopWidth,o=i.borderRightWidth,a=i.borderBottomWidth,s=i.borderLeftWidth,l=i.paddingTop,u=i.paddingRight,c=i.paddingBottom,d=i.paddingLeft,f=i.marginTop,y=i.marginRight,S=i.marginBottom,w=i.marginLeft,E=i.boxSizing;return{height:parseFloat(e),width:parseFloat(t),borderTopWidth:parseFloat(r),borderRightWidth:parseFloat(o),borderBottomWidth:parseFloat(a),borderLeftWidth:parseFloat(s),paddingTop:parseFloat(l),paddingRight:parseFloat(u),paddingBottom:parseFloat(c),paddingLeft:parseFloat(d),marginTop:parseFloat(f),marginRight:parseFloat(y),marginBottom:parseFloat(S),marginLeft:parseFloat(w),boxSizing:E}}function vs(n){var i=en(n);return i.boxSizing==="border-box"?i.height-i.paddingTop-i.paddingBottom:i.height}function Ul(n){var i=en(n);return i.boxSizing==="border-box"?i.width-i.paddingLeft-i.paddingRight:i.width}function gd(n){var i=en(n),e=i.marginBottom+i.marginTop;return Math.ceil(n.offsetHeight+e)}function ss(n){var i=en(n),e=i.marginLeft+i.marginRight;return Math.ceil(n.offsetWidth+e)}function yd(n){var i=n.getBoundingClientRect(),e=en(n),t=e.borderTopWidth,r=e.borderLeftWidth,o=e.borderRightWidth,a=e.borderBottomWidth;return{top:i.top+(t||0),left:i.left+(r||0),right:i.right+(o||0),bottom:i.bottom+(a||0)}}function ls(){if(typeof Is=="boolean")return Is;var n=document.createElement("div");return n.style.direction="rtl",n.style.width="1px",n.style.height="1px",n.style.position="fixed",n.style.top="0px",n.style.overflow="hidden",n.dir="rtl",n.innerHTML=`<div style="width: 2px">
            <span style="display: inline-block; width: 1px"></span>
            <span style="display: inline-block; width: 1px"></span>
        </div>`,document.body.appendChild(n),n.scrollLeft=1,Is=Math.floor(n.scrollLeft)===0,document.body.removeChild(n),Is}function us(n,i){var e=n.scrollLeft;return i&&(e=Math.abs(e),Hl()&&!ls()&&(e=n.scrollWidth-n.clientWidth-e)),e}function cs(n,i,e){e&&(ls()?i*=-1:(Fr()||Hl())&&(i=n.scrollWidth-n.clientWidth-i)),n.scrollLeft=i}function tr(n){for(;n&&n.firstChild;)n.removeChild(n.firstChild)}function SC(n,i){wo(n.querySelector(i))}function wo(n){n&&n.parentNode&&n.parentNode.removeChild(n)}function tn(n){return n.offsetParent!==null}function Ji(n){var i=document.createElement("div");return i.innerHTML=(n||"").trim(),i.firstChild}function wC(n,i){n.lastChild?n.insertAdjacentHTML("afterbegin",i):n.innerHTML=i}function TC(n,i){if(n.attributes&&n.attributes[i]){var e=n.attributes[i];return e.value}return null}function Gc(n){return n&&n.clientHeight?n.clientHeight:0}function Vc(n){return n&&n.clientWidth?n.clientWidth:0}function md(n,i,e){if(!(e&&e.nextSibling===i)){var t=document.activeElement,r=i.contains(t);e?e.nextSibling?n.insertBefore(i,e.nextSibling):n.appendChild(i):n.firstChild&&n.firstChild!==i&&n.insertAdjacentElement("afterbegin",i),r&&t&&Wl()&&t.focus({preventScroll:!0})}}function Cd(n,i){for(var e=0;e<i.length;e++){var t=i[e],r=n.children[e];r!==t&&n.insertBefore(t,r)}}function lv(n,i,e){e?e.insertAdjacentElement("afterend",i):n.firstChild?n.insertAdjacentElement("afterbegin",i):n.appendChild(i)}function OC(n,i){ue(n.firstChild)?n.insertBefore(i,n.firstChild):n.appendChild(i)}function Sd(n,i){var e,t;if(i)try{for(var r=mC(Object.entries(i)),o=r.next();!o.done;o=r.next()){var a=CC(o.value,2),s=a[0],l=a[1];if(!(!s||!s.length||l==null)){var u=Fh(s),c=l.toString(),d=c.replace(/\s*!important/g,""),f=d.length!=c.length?"important":void 0;n.style.setProperty(u,d,f)}}}catch(y){e={error:y}}finally{try{o&&!o.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}}function uv(n){return n.clientWidth<n.scrollWidth}function cv(n){return n.clientHeight<n.scrollHeight}function ds(n,i){i==="flex"?(n.style.removeProperty("width"),n.style.removeProperty("minWidth"),n.style.removeProperty("maxWidth"),n.style.flex="1 1 auto"):Nr(n,i)}function Nr(n,i){i=jl(i),n.style.width=i.toString(),n.style.maxWidth=i.toString(),n.style.minWidth=i.toString()}function PC(n,i){i==="flex"?(n.style.removeProperty("height"),n.style.removeProperty("minHeight"),n.style.removeProperty("maxHeight"),n.style.flex="1 1 auto"):Pn(n,i)}function Pn(n,i){i=jl(i),n.style.height=i.toString(),n.style.maxHeight=i.toString(),n.style.minHeight=i.toString()}function jl(n){return typeof n=="number"?n+"px":n}function gs(n){return n instanceof Node||n instanceof HTMLElement}function dv(n){if(n==null)return[];var i=[];return wd(n,function(e){return i.push(e)}),i}function pv(n,i){if(n)for(var e=0;e<n.length;e++){var t=n[e];i(t.name,t.value)}}function so(n,i,e){e==null?n.removeAttribute(i):n.setAttribute(i,e.toString())}function wd(n,i){if(n!=null)for(var e=0;e<n.length;e++)i(n[e])}function Td(n,i){n.then(function(e){var t=e.getGui();t!=null&&(typeof t=="object"?i.appendChild(t):i.innerHTML=t)})}var EC=Object.freeze({__proto__:null,radioCssClass:kc,FOCUSABLE_SELECTOR:av,FOCUSABLE_EXCLUDE:hd,isFocusableFormField:vd,setDisplayed:Yt,setVisible:sv,setDisabled:ra,isElementChildOfClass:On,getElementSize:en,getInnerHeight:vs,getInnerWidth:Ul,getAbsoluteHeight:gd,getAbsoluteWidth:ss,getElementRectWithOffset:yd,isRtlNegativeScroll:ls,getScrollLeft:us,setScrollLeft:cs,clearElement:tr,removeElement:SC,removeFromParent:wo,isVisible:tn,loadTemplate:Ji,appendHtml:wC,getElementAttribute:TC,offsetHeight:Gc,offsetWidth:Vc,ensureDomOrder:md,setDomChildOrder:Cd,insertWithDomOrder:lv,prependDC:OC,addStylesToElement:Sd,isHorizontalScrollShowing:uv,isVerticalScrollShowing:cv,setElementWidth:ds,setFixedWidth:Nr,setElementHeight:PC,setFixedHeight:Pn,formatSize:jl,isNodeOrElement:gs,copyNodeList:dv,iterateNamedNodeMap:pv,addOrRemoveAttribute:so,nodeListForEach:wd,bindCellRendererToHtmlElement:Td}),fv={columnGroupOpened:"expanded",columnGroupClosed:"contracted",columnSelectClosed:"tree-closed",columnSelectOpen:"tree-open",columnSelectIndeterminate:"tree-indeterminate",columnMovePin:"pin",columnMoveHide:"eye-slash",columnMoveMove:"arrows",columnMoveLeft:"left",columnMoveRight:"right",columnMoveGroup:"group",columnMoveValue:"aggregation",columnMovePivot:"pivot",dropNotAllowed:"not-allowed",groupContracted:"tree-closed",groupExpanded:"tree-open",setFilterGroupClosed:"tree-closed",setFilterGroupOpen:"tree-open",setFilterGroupIndeterminate:"tree-indeterminate",chart:"chart",close:"cross",cancel:"cancel",check:"tick",first:"first",previous:"previous",next:"next",last:"last",linked:"linked",unlinked:"unlinked",colorPicker:"color-picker",groupLoading:"loading",menu:"menu",filter:"filter",columns:"columns",maximize:"maximize",minimize:"minimize",menuPin:"pin",menuValue:"aggregation",menuAddRowGroup:"group",menuRemoveRowGroup:"group",clipboardCopy:"copy",clipboardCut:"cut",clipboardPaste:"paste",pivotPanel:"pivot",rowGroupPanel:"group",valuePanel:"aggregation",columnDrag:"grip",rowDrag:"grip",save:"save",csvExport:"csv",excelExport:"excel",smallDown:"small-down",smallLeft:"small-left",smallRight:"small-right",smallUp:"small-up",sortAscending:"asc",sortDescending:"desc",sortUnSort:"none",advancedFilterBuilder:"group",advancedFilterBuilderDrag:"grip",advancedFilterBuilderInvalid:"not-allowed",advancedFilterBuilderMoveUp:"up",advancedFilterBuilderMoveDown:"down",advancedFilterBuilderAdd:"plus",advancedFilterBuilderRemove:"minus"};function Dr(n,i,e){var t=Li(n,i,e);if(t){var r=t.className;if(typeof r=="string"&&r.indexOf("ag-icon")>-1||typeof r=="object"&&r["ag-icon"])return t}var o=document.createElement("span");return o.appendChild(t),o}function Li(n,i,e,t){var r=null,o=e&&e.getColDef().icons;if(o&&(r=o[n]),i&&!r){var a=i.get("icons");a&&(r=a[n])}if(r){var s=void 0;if(typeof r=="function")s=r();else if(typeof r=="string")s=r;else throw new Error("icon from grid options needs to be a string or a function");if(typeof s=="string")return Ji(s);if(gs(s))return s;console.warn("AG Grid: iconRenderer should return back a string or a dom object")}else{var l=document.createElement("span"),u=fv[n];return u||(t?u=n:(console.warn("AG Grid: Did not find icon "+n),u="")),l.setAttribute("class","ag-icon ag-icon-"+u),l.setAttribute("unselectable","on"),Wi(l,"presentation"),l}}var _C=Object.freeze({__proto__:null,iconNameClassMap:fv,createIcon:Dr,createIconNoSpan:Li}),J=function(){function n(){}return n.BACKSPACE="Backspace",n.TAB="Tab",n.ENTER="Enter",n.ESCAPE="Escape",n.SPACE=" ",n.LEFT="ArrowLeft",n.UP="ArrowUp",n.RIGHT="ArrowRight",n.DOWN="ArrowDown",n.DELETE="Delete",n.F2="F2",n.PAGE_UP="PageUp",n.PAGE_DOWN="PageDown",n.PAGE_HOME="Home",n.PAGE_END="End",n.A="KeyA",n.C="KeyC",n.D="KeyD",n.V="KeyV",n.X="KeyX",n.Y="KeyY",n.Z="KeyZ",n}(),bC=65,DC=67,RC=86,xC=68,AC=90,LC=89;function zl(n){if(n.altKey||n.ctrlKey||n.metaKey)return!1;var i=n.key.length===1;return i}function ml(n,i,e,t,r){var o=t?t.getColDef().suppressKeyboardEvent:void 0;if(!o)return!1;var a={event:i,editing:r,column:t,api:n.api,node:e,data:e.data,colDef:t.getColDef(),context:n.context,columnApi:n.columnApi};if(o){var s=o(a);if(s)return!0}return!1}function hv(n,i,e,t){var r=t.getDefinition(),o=r&&r.suppressHeaderKeyboardEvent;if(!ue(o))return!1;var a={api:n.api,columnApi:n.columnApi,context:n.context,colDef:r,column:t,headerRowIndex:e,event:i};return!!o(a)}function vv(n){var i=n.keyCode,e;switch(i){case bC:e=J.A;break;case DC:e=J.C;break;case RC:e=J.V;break;case xC:e=J.D;break;case AC:e=J.Z;break;case LC:e=J.Y;break;default:e=n.code}return e}function gv(n,i){return i===void 0&&(i=!1),n===J.DELETE?!0:!i&&n===J.BACKSPACE?pd():!1}var MC=Object.freeze({__proto__:null,isEventFromPrintableCharacter:zl,isUserSuppressingKeyboardEvent:ml,isUserSuppressingHeaderKeyboardEvent:hv,normaliseQwertyAzerty:vv,isDeleteKey:gv});function Od(n,i,e){if(e===0)return!1;var t=Math.abs(n.clientX-i.clientX),r=Math.abs(n.clientY-i.clientY);return Math.max(t,r)<=e}var NC=Object.freeze({__proto__:null,areEventsNear:Od});function FC(n,i){if(!n)return!1;for(var e=function(s,l){var u=i[s.id],c=i[l.id],d=u!==void 0,f=c!==void 0,y=d&&f,S=!d&&!f;return y?u-c:S?s.__objectId-l.__objectId:d?1:-1},t,r,o=!1,a=0;a<n.length-1;a++)if(t=n[a],r=n[a+1],e(t,r)>0){o=!0;break}return o?(n.sort(e),!0):!1}function IC(n,i){var e=[];t(n);function t(r){r&&r.forEach(function(o){if(o.group||o.hasChildren()){e.push(o.key);var a=e.join("|");i(o,a),t(o.childrenAfterGroup),e.pop()}})}}var kC=Object.freeze({__proto__:null,sortRowNodesByOrder:FC,traverseNodesWithKey:IC});function Pd(n){var i=new Set;return n.forEach(function(e){return i.add(e)}),i}var GC=Object.freeze({__proto__:null,convertToSet:Pd}),Ni=function(){return Ni=Object.assign||function(n){for(var i,e=1,t=arguments.length;e<t;e++){i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(n[r]=i[r])}return n},Ni.apply(this,arguments)},VC=Ni(Ni(Ni(Ni(Ni(Ni(Ni(Ni(Ni(Ni(Ni(Ni(Ni(Ni(Ni(Ni(Ni(Ni({},lC),Em),uC),yC),EC),bm),pm),zm),em),_C),MC),Hm),NC),gC),um),kC),GC),Gm),St=VC,oa=function(){function n(i,e){i===void 0&&(i=0),e===void 0&&(e=1),this.nextValue=i,this.step=e}return n.prototype.next=function(){var i=this.nextValue;return this.nextValue+=this.step,i},n.prototype.peek=function(){return this.nextValue},n.prototype.skip=function(i){this.nextValue+=i},n}(),Yn;(function(n){n[n.IN_PROGRESS=0]="IN_PROGRESS",n[n.RESOLVED=1]="RESOLVED"})(Yn||(Yn={}));var jr=function(){function n(i){var e=this;this.status=Yn.IN_PROGRESS,this.resolution=null,this.waiters=[],i(function(t){return e.onDone(t)},function(t){return e.onReject(t)})}return n.all=function(i){return new n(function(e){var t=i.length,r=new Array(t);i.forEach(function(o,a){o.then(function(s){r[a]=s,t--,t===0&&e(r)})})})},n.resolve=function(i){return i===void 0&&(i=null),new n(function(e){return e(i)})},n.prototype.then=function(i){var e=this;return new n(function(t){e.status===Yn.RESOLVED?t(i(e.resolution)):e.waiters.push(function(r){return t(i(r))})})},n.prototype.resolveNow=function(i,e){return this.status===Yn.RESOLVED?e(this.resolution):i},n.prototype.onDone=function(i){this.status=Yn.RESOLVED,this.resolution=i,this.waiters.forEach(function(e){return e(i)})},n.prototype.onReject=function(i){console.warn("TBI")},n}(),BC=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Cn=function(){return Cn=Object.assign||function(n){for(var i,e=1,t=arguments.length;e<t;e++){i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(n[r]=i[r])}return n},Cn.apply(this,arguments)},xu=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},Ur;(function(n){n[n.NOTHING=0]="NOTHING",n[n.WAITING_TO_SHOW=1]="WAITING_TO_SHOW",n[n.SHOWING=2]="SHOWING"})(Ur||(Ur={}));var eo;(function(n){n[n.HOVER=0]="HOVER",n[n.FOCUS=1]="FOCUS"})(eo||(eo={}));var Ed=function(n){BC(i,n);function i(e,t,r){var o=n.call(this)||this;return o.parentComp=e,o.tooltipShowDelayOverride=t,o.tooltipHideDelayOverride=r,o.DEFAULT_SHOW_TOOLTIP_DELAY=2e3,o.DEFAULT_HIDE_TOOLTIP_DELAY=1e4,o.SHOW_QUICK_TOOLTIP_DIFF=1e3,o.FADE_OUT_TOOLTIP_TIMEOUT=1e3,o.INTERACTIVE_HIDE_DELAY=100,o.interactionEnabled=!1,o.isInteractingWithTooltip=!1,o.state=Ur.NOTHING,o.tooltipInstanceCount=0,o.tooltipMouseTrack=!1,o}return i.prototype.postConstruct=function(){this.gridOptionsService.is("tooltipInteraction")&&(this.interactionEnabled=!0),this.tooltipTrigger=this.getTooltipTrigger(),this.tooltipShowDelay=this.getTooltipDelay("show"),this.tooltipHideDelay=this.getTooltipDelay("hide"),this.tooltipMouseTrack=this.gridOptionsService.is("tooltipMouseTrack");var e=this.parentComp.getGui();this.tooltipTrigger===eo.HOVER&&(this.addManagedListener(e,"mouseenter",this.onMouseEnter.bind(this)),this.addManagedListener(e,"mouseleave",this.onMouseLeave.bind(this))),this.tooltipTrigger===eo.FOCUS&&(this.addManagedListener(e,"focusin",this.onFocusIn.bind(this)),this.addManagedListener(e,"focusout",this.onFocusOut.bind(this))),this.addManagedListener(e,"mousemove",this.onMouseMove.bind(this)),this.interactionEnabled||(this.addManagedListener(e,"mousedown",this.onMouseDown.bind(this)),this.addManagedListener(e,"keydown",this.onKeyDown.bind(this)))},i.prototype.getGridOptionsTooltipDelay=function(e){var t=this.gridOptionsService.getNum(e);if(ue(t))return t<0&&Ut(function(){return console.warn("AG Grid: "+e+" should not be lower than 0")},e+"Warn"),Math.max(200,t)},i.prototype.getTooltipDelay=function(e){var t,r,o,a;return e==="show"?(r=(t=this.getGridOptionsTooltipDelay("tooltipShowDelay"))!==null&&t!==void 0?t:this.tooltipShowDelayOverride)!==null&&r!==void 0?r:this.DEFAULT_SHOW_TOOLTIP_DELAY:(a=(o=this.getGridOptionsTooltipDelay("tooltipHideDelay"))!==null&&o!==void 0?o:this.tooltipHideDelayOverride)!==null&&a!==void 0?a:this.DEFAULT_HIDE_TOOLTIP_DELAY},i.prototype.destroy=function(){this.setToDoNothing(),n.prototype.destroy.call(this)},i.prototype.getTooltipTrigger=function(){var e=this.gridOptionsService.get("tooltipTrigger");return!e||e==="hover"?eo.HOVER:eo.FOCUS},i.prototype.onMouseEnter=function(e){var t=this;this.interactionEnabled&&this.interactiveTooltipTimeoutId&&(this.unlockService(),this.startHideTimeout()),!$o()&&(i.isLocked?this.showTooltipTimeoutId=window.setTimeout(function(){t.prepareToShowTooltip(e)},this.INTERACTIVE_HIDE_DELAY):this.prepareToShowTooltip(e))},i.prototype.onMouseMove=function(e){this.lastMouseEvent&&(this.lastMouseEvent=e),this.tooltipMouseTrack&&this.state===Ur.SHOWING&&this.tooltipComp&&this.positionTooltip()},i.prototype.onMouseDown=function(){this.setToDoNothing()},i.prototype.onMouseLeave=function(){this.interactionEnabled?this.lockService():this.setToDoNothing()},i.prototype.onFocusIn=function(){this.prepareToShowTooltip()},i.prototype.onFocusOut=function(e){var t,r=e.relatedTarget,o=this.parentComp.getGui(),a=(t=this.tooltipComp)===null||t===void 0?void 0:t.getGui();this.isInteractingWithTooltip||o.contains(r)||this.interactionEnabled&&a?.contains(r)||this.setToDoNothing()},i.prototype.onKeyDown=function(){this.setToDoNothing()},i.prototype.prepareToShowTooltip=function(e){if(this.state!=Ur.NOTHING||i.isLocked)return!1;var t=0;return e&&(t=this.isLastTooltipHiddenRecently()?200:this.tooltipShowDelay),this.lastMouseEvent=e||null,this.showTooltipTimeoutId=window.setTimeout(this.showTooltip.bind(this),t),this.state=Ur.WAITING_TO_SHOW,!0},i.prototype.isLastTooltipHiddenRecently=function(){var e=new Date().getTime(),t=i.lastTooltipHideTime;return e-t<this.SHOW_QUICK_TOOLTIP_DIFF},i.prototype.setToDoNothing=function(){this.state===Ur.SHOWING&&this.hideTooltip(),this.onBodyScrollEventCallback&&(this.onBodyScrollEventCallback(),this.onBodyScrollEventCallback=void 0),this.onColumnMovedEventCallback&&(this.onColumnMovedEventCallback(),this.onColumnMovedEventCallback=void 0),this.clearTimeouts(),this.state=Ur.NOTHING,this.lastMouseEvent=null},i.prototype.showTooltip=function(){var e=Cn({},this.parentComp.getTooltipParams());if(!ue(e.value)){this.setToDoNothing();return}this.state=Ur.SHOWING,this.tooltipInstanceCount++;var t=this.newTooltipComponentCallback.bind(this,this.tooltipInstanceCount),r=this.userComponentFactory.getTooltipCompDetails(e);r.newAgStackInstance().then(t)},i.prototype.hideTooltip=function(e){if(!(!e&&this.isInteractingWithTooltip)){this.tooltipComp&&(this.destroyTooltipComp(),i.lastTooltipHideTime=new Date().getTime());var t={type:b.EVENT_TOOLTIP_HIDE,parentGui:this.parentComp.getGui()};this.eventService.dispatchEvent(t),this.state=Ur.NOTHING}},i.prototype.newTooltipComponentCallback=function(e,t){var r=this.state!==Ur.SHOWING||this.tooltipInstanceCount!==e;if(r){this.getContext().destroyBean(t);return}var o=t.getGui();this.tooltipComp=t,o.classList.contains("ag-tooltip")||o.classList.add("ag-tooltip-custom"),this.tooltipTrigger===eo.HOVER&&o.classList.add("ag-tooltip-animate"),this.interactionEnabled&&o.classList.add("ag-tooltip-interactive");var a=this.localeService.getLocaleTextFunc(),s=this.popupService.addPopup({eChild:o,ariaLabel:a("ariaLabelTooltip","Tooltip")});s&&(this.tooltipPopupDestroyFunc=s.hideFunc),this.positionTooltip(),this.tooltipTrigger===eo.FOCUS&&(this.onBodyScrollEventCallback=this.addManagedListener(this.eventService,b.EVENT_BODY_SCROLL,this.setToDoNothing.bind(this)),this.onColumnMovedEventCallback=this.addManagedListener(this.eventService,b.EVENT_COLUMN_MOVED,this.setToDoNothing.bind(this))),this.interactionEnabled&&(this.tooltipTrigger===eo.HOVER?(this.tooltipMouseEnterListener=this.addManagedListener(o,"mouseenter",this.onTooltipMouseEnter.bind(this))||null,this.tooltipMouseLeaveListener=this.addManagedListener(o,"mouseleave",this.onTooltipMouseLeave.bind(this))||null):(this.tooltipFocusInListener=this.addManagedListener(o,"focusin",this.onTooltipFocusIn.bind(this))||null,this.tooltipFocusOutListener=this.addManagedListener(o,"focusout",this.onTooltipFocusOut.bind(this))||null));var l={type:b.EVENT_TOOLTIP_SHOW,tooltipGui:o,parentGui:this.parentComp.getGui()};this.eventService.dispatchEvent(l),this.startHideTimeout()},i.prototype.onTooltipMouseEnter=function(){this.isInteractingWithTooltip=!0,this.unlockService()},i.prototype.onTooltipMouseLeave=function(){this.isInteractingWithTooltip=!1,this.lockService()},i.prototype.onTooltipFocusIn=function(){this.isInteractingWithTooltip=!0},i.prototype.onTooltipFocusOut=function(e){var t,r=this.parentComp.getGui(),o=(t=this.tooltipComp)===null||t===void 0?void 0:t.getGui(),a=e.relatedTarget;o?.contains(a)||(this.isInteractingWithTooltip=!1,r.contains(a)?this.startHideTimeout():this.hideTooltip())},i.prototype.positionTooltip=function(){var e={type:"tooltip",ePopup:this.tooltipComp.getGui(),nudgeY:18,skipObserver:this.tooltipMouseTrack};this.lastMouseEvent?this.popupService.positionPopupUnderMouseEvent(Cn(Cn({},e),{mouseEvent:this.lastMouseEvent})):this.popupService.positionPopupByComponent(Cn(Cn({},e),{eventSource:this.parentComp.getGui(),position:"under",keepWithinBounds:!0,nudgeY:5}))},i.prototype.destroyTooltipComp=function(){var e=this;this.tooltipComp.getGui().classList.add("ag-tooltip-hiding");var t=this.tooltipPopupDestroyFunc,r=this.tooltipComp,o=this.tooltipTrigger===eo.HOVER?this.FADE_OUT_TOOLTIP_TIMEOUT:0;window.setTimeout(function(){t(),e.getContext().destroyBean(r)},o),this.clearTooltipListeners(),this.tooltipPopupDestroyFunc=void 0,this.tooltipComp=void 0},i.prototype.clearTooltipListeners=function(){[this.tooltipMouseEnterListener,this.tooltipMouseLeaveListener,this.tooltipFocusInListener,this.tooltipFocusOutListener].forEach(function(e){e&&e()}),this.tooltipMouseEnterListener=this.tooltipMouseLeaveListener=this.tooltipFocusInListener=this.tooltipFocusOutListener=null},i.prototype.lockService=function(){var e=this;i.isLocked=!0,this.interactiveTooltipTimeoutId=window.setTimeout(function(){e.unlockService(),e.setToDoNothing()},this.INTERACTIVE_HIDE_DELAY)},i.prototype.unlockService=function(){i.isLocked=!1,this.clearInteractiveTimeout()},i.prototype.startHideTimeout=function(){this.clearHideTimeout(),this.hideTooltipTimeoutId=window.setTimeout(this.hideTooltip.bind(this),this.tooltipHideDelay)},i.prototype.clearShowTimeout=function(){this.showTooltipTimeoutId&&(window.clearTimeout(this.showTooltipTimeoutId),this.showTooltipTimeoutId=void 0)},i.prototype.clearHideTimeout=function(){this.hideTooltipTimeoutId&&(window.clearTimeout(this.hideTooltipTimeoutId),this.hideTooltipTimeoutId=void 0)},i.prototype.clearInteractiveTimeout=function(){this.interactiveTooltipTimeoutId&&(window.clearTimeout(this.interactiveTooltipTimeoutId),this.interactiveTooltipTimeoutId=void 0)},i.prototype.clearTimeouts=function(){this.clearShowTimeout(),this.clearHideTimeout(),this.clearInteractiveTimeout()},i.isLocked=!1,xu([T("popupService")],i.prototype,"popupService",void 0),xu([T("userComponentFactory")],i.prototype,"userComponentFactory",void 0),xu([Oe],i.prototype,"postConstruct",null),i}(ve),HC=function(){function n(i){this.cssClassStates={},this.getGui=i}return n.prototype.addCssClass=function(i){var e=this,t=(i||"").split(" ");if(t.length>1){t.forEach(function(a){return e.addCssClass(a)});return}var r=this.cssClassStates[i]!==!0;if(r&&i.length){var o=this.getGui();o&&o.classList.add(i),this.cssClassStates[i]=!0}},n.prototype.removeCssClass=function(i){var e=this,t=(i||"").split(" ");if(t.length>1){t.forEach(function(a){return e.removeCssClass(a)});return}var r=this.cssClassStates[i]!==!1;if(r&&i.length){var o=this.getGui();o&&o.classList.remove(i),this.cssClassStates[i]=!1}},n.prototype.containsCssClass=function(i){var e=this.getGui();return e?e.classList.contains(i):!1},n.prototype.addOrRemoveCssClass=function(i,e){var t=this;if(i){if(i.indexOf(" ")>=0){var r=(i||"").split(" ");if(r.length>1){r.forEach(function(s){return t.addOrRemoveCssClass(s,e)});return}}var o=this.cssClassStates[i]!==e;if(o&&i.length){var a=this.getGui();a&&a.classList.toggle(i,e),this.cssClassStates[i]=e}}},n}(),WC=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Au=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},UC=new oa,xt=function(n){WC(i,n);function i(e){var t=n.call(this)||this;return t.displayed=!0,t.visible=!0,t.compId=UC.next(),t.cssClassManager=new HC(function(){return t.eGui}),e&&t.setTemplate(e),t}return i.prototype.preConstructOnComponent=function(){this.usingBrowserTooltips=this.gridOptionsService.is("enableBrowserTooltips")},i.prototype.getCompId=function(){return this.compId},i.prototype.getTooltipParams=function(){return{value:this.tooltipText,location:"UNKNOWN"}},i.prototype.setTooltip=function(e,t,r){var o=this,a=function(){o.usingBrowserTooltips?o.getGui().removeAttribute("title"):o.tooltipFeature=o.destroyBean(o.tooltipFeature)},s=function(){o.usingBrowserTooltips?o.getGui().setAttribute("title",o.tooltipText):o.tooltipFeature=o.createBean(new Ed(o,t,r))};this.tooltipText!=e&&(this.tooltipText&&a(),e!=null&&(this.tooltipText=e,this.tooltipText&&s()))},i.prototype.createChildComponentsFromTags=function(e,t){var r=this,o=dv(e.childNodes);o.forEach(function(a){if(a instanceof HTMLElement){var s=r.createComponentFromElement(a,function(u){var c=u.getGui();c&&r.copyAttributesFromNode(a,u.getGui())},t);if(s){if(s.addItems&&a.children.length){r.createChildComponentsFromTags(a,t);var l=Array.prototype.slice.call(a.children);s.addItems(l)}r.swapComponentForNode(s,e,a)}else a.childNodes&&r.createChildComponentsFromTags(a,t)}})},i.prototype.createComponentFromElement=function(e,t,r){var o=e.nodeName,a=r?r[e.getAttribute("ref")]:void 0,s=this.agStackComponentsRegistry.getComponentClass(o);if(s){i.elementGettingCreated=e;var l=new s(a);return l.setParentComponent(this),this.createBean(l,null,t),l}return null},i.prototype.copyAttributesFromNode=function(e,t){pv(e.attributes,function(r,o){return t.setAttribute(r,o)})},i.prototype.swapComponentForNode=function(e,t,r){var o=e.getGui();t.replaceChild(o,r),t.insertBefore(document.createComment(r.nodeName),o),this.addDestroyFunc(this.destroyBean.bind(this,e)),this.swapInComponentForQuerySelectors(e,r)},i.prototype.swapInComponentForQuerySelectors=function(e,t){var r=this;this.iterateOverQuerySelectors(function(o){r[o.attributeName]===t&&(r[o.attributeName]=e)})},i.prototype.iterateOverQuerySelectors=function(e){for(var t=Object.getPrototypeOf(this);t!=null;){var r=t.__agComponentMetaData,o=Il(t.constructor);r&&r[o]&&r[o].querySelectors&&r[o].querySelectors.forEach(function(a){return e(a)}),t=Object.getPrototypeOf(t)}},i.prototype.activateTabIndex=function(e){var t=this.gridOptionsService.getNum("tabIndex")||0;e||(e=[]),e.length||e.push(this.getGui()),e.forEach(function(r){return r.setAttribute("tabindex",t.toString())})},i.prototype.setTemplate=function(e,t){var r=Ji(e);this.setTemplateFromElement(r,t)},i.prototype.setTemplateFromElement=function(e,t){this.eGui=e,this.eGui.__agComponent=this,this.wireQuerySelectors(),this.getContext()&&this.createChildComponentsFromTags(this.getGui(),t)},i.prototype.createChildComponentsPreConstruct=function(){this.getGui()&&this.createChildComponentsFromTags(this.getGui())},i.prototype.wireQuerySelectors=function(){var e=this;if(this.eGui){var t=this;this.iterateOverQuerySelectors(function(r){var o=function(l){return t[r.attributeName]=l},a=r.refSelector&&e.getAttribute("ref")===r.refSelector;if(a)o(e.eGui);else{var s=e.eGui.querySelector(r.querySelector);s&&o(s.__agComponent||s)}})}},i.prototype.getGui=function(){return this.eGui},i.prototype.getFocusableElement=function(){return this.eGui},i.prototype.getAriaElement=function(){return this.getFocusableElement()},i.prototype.setParentComponent=function(e){this.parentComponent=e},i.prototype.getParentComponent=function(){return this.parentComponent},i.prototype.setGui=function(e){this.eGui=e},i.prototype.queryForHtmlElement=function(e){return this.eGui.querySelector(e)},i.prototype.queryForHtmlInputElement=function(e){return this.eGui.querySelector(e)},i.prototype.appendChild=function(e,t){if(e!=null)if(t||(t=this.eGui),gs(e))t.appendChild(e);else{var r=e;t.appendChild(r.getGui())}},i.prototype.isDisplayed=function(){return this.displayed},i.prototype.setVisible=function(e,t){if(t===void 0&&(t={}),e!==this.visible){this.visible=e;var r=t.skipAriaHidden;sv(this.eGui,e,{skipAriaHidden:r})}},i.prototype.setDisplayed=function(e,t){if(t===void 0&&(t={}),e!==this.displayed){this.displayed=e;var r=t.skipAriaHidden;Yt(this.eGui,e,{skipAriaHidden:r});var o={type:i.EVENT_DISPLAYED_CHANGED,visible:this.displayed};this.dispatchEvent(o)}},i.prototype.destroy=function(){this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature)),this.parentComponent&&(this.parentComponent=void 0);var e=this.eGui;e&&e.__agComponent&&(e.__agComponent=void 0),n.prototype.destroy.call(this)},i.prototype.addGuiEventListener=function(e,t,r){var o=this;this.eGui.addEventListener(e,t,r),this.addDestroyFunc(function(){return o.eGui.removeEventListener(e,t)})},i.prototype.addCssClass=function(e){this.cssClassManager.addCssClass(e)},i.prototype.removeCssClass=function(e){this.cssClassManager.removeCssClass(e)},i.prototype.containsCssClass=function(e){return this.cssClassManager.containsCssClass(e)},i.prototype.addOrRemoveCssClass=function(e,t){this.cssClassManager.addOrRemoveCssClass(e,t)},i.prototype.getAttribute=function(e){var t=this.eGui;return t?t.getAttribute(e):null},i.prototype.getRefElement=function(e){return this.queryForHtmlElement('[ref="'+e+'"]')},i.EVENT_DISPLAYED_CHANGED="displayedChanged",Au([T("agStackComponentsRegistry")],i.prototype,"agStackComponentsRegistry",void 0),Au([Rp],i.prototype,"preConstructOnComponent",null),Au([Rp],i.prototype,"createChildComponentsPreConstruct",null),i}(ve);function be(n){return jC.bind(this,"[ref="+n+"]",n)}function jC(n,i,e,t,r){if(n===null){console.error("AG Grid: QuerySelector selector should not be null");return}if(typeof r=="number"){console.error("AG Grid: QuerySelector should be on an attribute");return}zC(e,"querySelectors",{attributeName:t,querySelector:n,refSelector:i})}function zC(n,i,e){var t=YC(n,Il(n.constructor));t[i]||(t[i]=[]),t[i].push(e)}function YC(n,i){return n.__agComponentMetaData||(n.__agComponentMetaData={}),n.__agComponentMetaData[i]||(n.__agComponentMetaData[i]={}),n.__agComponentMetaData[i]}var KC=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Fp=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},QC=function(n){KC(i,n);function i(){return n.call(this,`
            <div class="ag-floating-filter-input" role="presentation">
                <ag-input-text-field ref="eFloatingFilterText"></ag-input-text-field>
            </div>`)||this}return i.prototype.destroy=function(){n.prototype.destroy.call(this)},i.prototype.init=function(e){this.params=e;var t=this.columnModel.getDisplayNameForColumn(e.column,"header",!0),r=this.localeService.getLocaleTextFunc();this.eFloatingFilterText.setDisabled(!0).setInputAriaLabel(t+" "+r("ariaFilterInput","Filter Input"))},i.prototype.onParentModelChanged=function(e){var t=this;if(!e){this.eFloatingFilterText.setValue("");return}this.params.parentFilterInstance(function(r){if(r.getModelAsString){var o=r.getModelAsString(e);t.eFloatingFilterText.setValue(o)}})},i.prototype.onParamsUpdated=function(e){this.init(e)},Fp([be("eFloatingFilterText")],i.prototype,"eFloatingFilterText",void 0),Fp([T("columnModel")],i.prototype,"columnModel",void 0),i}(xt),yv=function(){function n(i,e,t,r){var o=this;this.alive=!0,this.context=i,this.eParent=r;var a=e.getDateCompDetails(t),s=a.newAgStackInstance();s.then(function(l){if(!o.alive){i.destroyBean(l);return}o.dateComp=l,l&&(r.appendChild(l.getGui()),l.afterGuiAttached&&l.afterGuiAttached(),o.tempValue&&l.setDate(o.tempValue),o.disabled!=null&&o.setDateCompDisabled(o.disabled))})}return n.prototype.destroy=function(){this.alive=!1,this.dateComp=this.context.destroyBean(this.dateComp)},n.prototype.getDate=function(){return this.dateComp?this.dateComp.getDate():this.tempValue},n.prototype.setDate=function(i){this.dateComp?this.dateComp.setDate(i):this.tempValue=i},n.prototype.setDisabled=function(i){this.dateComp?this.setDateCompDisabled(i):this.disabled=i},n.prototype.setDisplayed=function(i){Yt(this.eParent,i)},n.prototype.setInputPlaceholder=function(i){this.dateComp&&this.dateComp.setInputPlaceholder&&this.dateComp.setInputPlaceholder(i)},n.prototype.setInputAriaLabel=function(i){this.dateComp&&this.dateComp.setInputAriaLabel&&this.dateComp.setInputAriaLabel(i)},n.prototype.afterGuiAttached=function(i){this.dateComp&&typeof this.dateComp.afterGuiAttached=="function"&&this.dateComp.afterGuiAttached(i)},n.prototype.updateParams=function(i){var e;!((e=this.dateComp)===null||e===void 0)&&e.onParamsUpdated&&typeof this.dateComp.onParamsUpdated=="function"&&this.dateComp.onParamsUpdated(i)},n.prototype.setDateCompDisabled=function(i){this.dateComp!=null&&this.dateComp.setDisabled!=null&&this.dateComp.setDisabled(i)},n}(),mv=function(){function n(){this.customFilterOptions={}}return n.prototype.init=function(i,e){this.filterOptions=i.filterOptions||e,this.mapCustomOptions(),this.selectDefaultItem(i)},n.prototype.getFilterOptions=function(){return this.filterOptions},n.prototype.mapCustomOptions=function(){var i=this;this.filterOptions&&this.filterOptions.forEach(function(e){if(typeof e!="string"){var t=[["displayKey"],["displayName"],["predicate","test"]],r=function(o){return o.some(function(a){return e[a]!=null})?!0:(console.warn("AG Grid: ignoring FilterOptionDef as it doesn't contain one of '"+o+"'"),!1)};if(!t.every(r)){i.filterOptions=i.filterOptions.filter(function(o){return o===e})||[];return}i.customFilterOptions[e.displayKey]=e}})},n.prototype.selectDefaultItem=function(i){if(i.defaultOption)this.defaultOption=i.defaultOption;else if(this.filterOptions.length>=1){var e=this.filterOptions[0];typeof e=="string"?this.defaultOption=e:e.displayKey?this.defaultOption=e.displayKey:console.warn("AG Grid: invalid FilterOptionDef supplied as it doesn't contain a 'displayKey'")}else console.warn("AG Grid: no filter options for filter")},n.prototype.getDefaultOption=function(){return this.defaultOption},n.prototype.getCustomOption=function(i){return this.customFilterOptions[i]},n}(),Cv={applyFilter:"Apply",clearFilter:"Clear",resetFilter:"Reset",cancelFilter:"Cancel",textFilter:"Text Filter",numberFilter:"Number Filter",dateFilter:"Date Filter",setFilter:"Set Filter",filterOoo:"Filter...",empty:"Choose One",equals:"Equals",notEqual:"Not equal",lessThan:"Less than",greaterThan:"Greater than",inRange:"In range",inRangeStart:"From",inRangeEnd:"To",lessThanOrEqual:"Less than or equals",greaterThanOrEqual:"Greater than or equals",contains:"Contains",notContains:"Not contains",startsWith:"Starts with",endsWith:"Ends with",blank:"Blank",notBlank:"Not blank",andCondition:"AND",orCondition:"OR",dateFormatOoo:"yyyy-mm-dd"},qC=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Bc=function(){return Bc=Object.assign||function(n){for(var i,e=1,t=arguments.length;e<t;e++){i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(n[r]=i[r])}return n},Bc.apply(this,arguments)},Ip=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},rn=function(n){qC(i,n);function i(e,t){t===void 0&&(t={});var r=n.call(this)||this;return r.eFocusableElement=e,r.callbacks=t,r.callbacks=Bc({shouldStopEventPropagation:function(){return!1},onTabKeyDown:function(o){if(!o.defaultPrevented){var a=r.focusService.findNextFocusableElement(r.eFocusableElement,!1,o.shiftKey);a&&(a.focus(),o.preventDefault())}}},t),r}return i.prototype.postConstruct=function(){this.eFocusableElement.classList.add(i.FOCUS_MANAGED_CLASS),this.addKeyDownListeners(this.eFocusableElement),this.callbacks.onFocusIn&&this.addManagedListener(this.eFocusableElement,"focusin",this.callbacks.onFocusIn),this.callbacks.onFocusOut&&this.addManagedListener(this.eFocusableElement,"focusout",this.callbacks.onFocusOut)},i.prototype.addKeyDownListeners=function(e){var t=this;this.addManagedListener(e,"keydown",function(r){if(!(r.defaultPrevented||Kr(r))){if(t.callbacks.shouldStopEventPropagation(r)){uo(r);return}r.key===J.TAB?t.callbacks.onTabKeyDown(r):t.callbacks.handleKeyDown&&t.callbacks.handleKeyDown(r)}})},i.FOCUS_MANAGED_CLASS="ag-focus-managed",Ip([T("focusService")],i.prototype,"focusService",void 0),Ip([Oe],i.prototype,"postConstruct",null),i}(ve),XC=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Lu=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},Sv="ag-resizer-wrapper",JC='<div class="'+Sv+`">
        <div ref="eTopLeftResizer" class="ag-resizer ag-resizer-topLeft"></div>
        <div ref="eTopResizer" class="ag-resizer ag-resizer-top"></div>
        <div ref="eTopRightResizer" class="ag-resizer ag-resizer-topRight"></div>
        <div ref="eRightResizer" class="ag-resizer ag-resizer-right"></div>
        <div ref="eBottomRightResizer" class="ag-resizer ag-resizer-bottomRight"></div>
        <div ref="eBottomResizer" class="ag-resizer ag-resizer-bottom"></div>
        <div ref="eBottomLeftResizer" class="ag-resizer ag-resizer-bottomLeft"></div>
        <div ref="eLeftResizer" class="ag-resizer ag-resizer-left"></div>
    </div>`,wv=function(n){XC(i,n);function i(e,t){var r=n.call(this)||this;return r.element=e,r.dragStartPosition={x:0,y:0},r.position={x:0,y:0},r.lastSize={width:-1,height:-1},r.positioned=!1,r.resizersAdded=!1,r.resizeListeners=[],r.boundaryEl=null,r.isResizing=!1,r.isMoving=!1,r.resizable={},r.movable=!1,r.currentResizer=null,r.config=Object.assign({},{popup:!1},t),r}return i.prototype.center=function(){var e=this.offsetParent,t=e.clientHeight,r=e.clientWidth,o=r/2-this.getWidth()/2,a=t/2-this.getHeight()/2;this.offsetElement(o,a)},i.prototype.initialisePosition=function(){if(!this.positioned){var e=this.config,t=e.centered,r=e.forcePopupParentAsOffsetParent,o=e.minWidth,a=e.width,s=e.minHeight,l=e.height,u=e.x,c=e.y;this.offsetParent||this.setOffsetParent();var d=0,f=0,y=!!this.element.offsetParent;if(y){var S=this.findBoundaryElement(),w=window.getComputedStyle(S);if(w.minWidth!=null){var E=S.offsetWidth-this.element.offsetWidth;f=parseInt(w.minWidth,10)-E}if(w.minHeight!=null){var _=S.offsetHeight-this.element.offsetHeight;d=parseInt(w.minHeight,10)-_}}if(this.minHeight=s||d,this.minWidth=o||f,a&&this.setWidth(a),l&&this.setHeight(l),(!a||!l)&&this.refreshSize(),t)this.center();else if(u||c)this.offsetElement(u,c);else if(y&&r){var S=this.boundaryEl,L=!0;if(S||(S=this.findBoundaryElement(),L=!1),S){var P=parseFloat(S.style.top),V=parseFloat(S.style.left);L?this.offsetElement(isNaN(V)?0:V,isNaN(P)?0:P):this.setPosition(V,P)}}this.positioned=!!this.offsetParent}},i.prototype.isPositioned=function(){return this.positioned},i.prototype.getPosition=function(){return this.position},i.prototype.setMovable=function(e,t){if(!(!this.config.popup||e===this.movable)){this.movable=e;var r=this.moveElementDragListener||{eElement:t,onDragStart:this.onMoveStart.bind(this),onDragging:this.onMove.bind(this),onDragStop:this.onMoveEnd.bind(this)};e?(this.dragService.addDragSource(r),this.moveElementDragListener=r):(this.dragService.removeDragSource(r),this.moveElementDragListener=void 0)}},i.prototype.setResizable=function(e){var t=this;if(this.clearResizeListeners(),e?this.addResizers():this.removeResizers(),typeof e=="boolean"){if(e===!1)return;e={topLeft:e,top:e,topRight:e,right:e,bottomRight:e,bottom:e,bottomLeft:e,left:e}}Object.keys(e).forEach(function(r){var o=e,a=!!o[r],s=t.getResizerElement(r),l={dragStartPixels:0,eElement:s,onDragStart:function(u){return t.onResizeStart(u,r)},onDragging:t.onResize.bind(t),onDragStop:function(u){return t.onResizeEnd(u,r)}};(a||!t.isAlive()&&!a)&&(a?(t.dragService.addDragSource(l),t.resizeListeners.push(l),s.style.pointerEvents="all"):s.style.pointerEvents="none",t.resizable[r]=a)})},i.prototype.removeSizeFromEl=function(){this.element.style.removeProperty("height"),this.element.style.removeProperty("width"),this.element.style.removeProperty("flex")},i.prototype.restoreLastSize=function(){this.element.style.flex="0 0 auto";var e=this.lastSize,t=e.height,r=e.width;r!==-1&&(this.element.style.width=r+"px"),t!==-1&&(this.element.style.height=t+"px")},i.prototype.getHeight=function(){return this.element.offsetHeight},i.prototype.setHeight=function(e){var t=this.config.popup,r=this.element,o=!1;if(typeof e=="string"&&e.indexOf("%")!==-1)Pn(r,e),e=gd(r),o=!0;else if(e=Math.max(this.minHeight,e),this.positioned){var a=this.getAvailableHeight();a&&e>a&&(e=a)}this.getHeight()!==e&&(o?(r.style.maxHeight="unset",r.style.minHeight="unset"):t?Pn(r,e):(r.style.height=e+"px",r.style.flex="0 0 auto",this.lastSize.height=typeof e=="number"?e:parseFloat(e)))},i.prototype.getAvailableHeight=function(){var e=this.config,t=e.popup,r=e.forcePopupParentAsOffsetParent;this.positioned||this.initialisePosition();var o=this.offsetParent.clientHeight;if(!o)return null;var a=this.element.getBoundingClientRect(),s=this.offsetParent.getBoundingClientRect(),l=t?this.position.y:a.top,u=t?0:s.top,c=0;if(r){var d=this.element.parentElement;if(d){var f=d.getBoundingClientRect().bottom;c=f-a.bottom}}var y=o+u-l-c;return y},i.prototype.getWidth=function(){return this.element.offsetWidth},i.prototype.setWidth=function(e){var t=this.element,r=this.config.popup,o=!1;if(typeof e=="string"&&e.indexOf("%")!==-1)Nr(t,e),e=ss(t),o=!0;else if(this.positioned){e=Math.max(this.minWidth,e);var a=this.offsetParent.clientWidth,s=r?this.position.x:this.element.getBoundingClientRect().left;a&&e+s>a&&(e=a-s)}this.getWidth()!==e&&(o?(t.style.maxWidth="unset",t.style.minWidth="unset"):this.config.popup?Nr(t,e):(t.style.width=e+"px",t.style.flex=" unset",this.lastSize.width=typeof e=="number"?e:parseFloat(e)))},i.prototype.offsetElement=function(e,t){e===void 0&&(e=0),t===void 0&&(t=0);var r=this.config.forcePopupParentAsOffsetParent,o=r?this.boundaryEl:this.element;o&&(this.popupService.positionPopup({ePopup:o,keepWithinBounds:!0,skipObserver:this.movable||this.isResizable(),updatePosition:function(){return{x:e,y:t}}}),this.setPosition(parseFloat(o.style.left),parseFloat(o.style.top)))},i.prototype.constrainSizeToAvailableHeight=function(e){var t=this;if(this.config.forcePopupParentAsOffsetParent){var r=function(){var o=t.getAvailableHeight();t.element.style.setProperty("max-height",o+"px")};e?this.resizeObserverSubscriber=this.resizeObserverService.observeResize(this.popupService.getPopupParent(),r):(this.element.style.removeProperty("max-height"),this.resizeObserverSubscriber&&(this.resizeObserverSubscriber(),this.resizeObserverSubscriber=void 0))}},i.prototype.setPosition=function(e,t){this.position.x=e,this.position.y=t},i.prototype.updateDragStartPosition=function(e,t){this.dragStartPosition={x:e,y:t}},i.prototype.calculateMouseMovement=function(e){var t=e.e,r=e.isLeft,o=e.isTop,a=e.anywhereWithin,s=e.topBuffer,l=t.clientX-this.dragStartPosition.x,u=t.clientY-this.dragStartPosition.y,c=this.shouldSkipX(t,!!r,!!a,l)?0:l,d=this.shouldSkipY(t,!!o,s,u)?0:u;return{movementX:c,movementY:d}},i.prototype.shouldSkipX=function(e,t,r,o){var a=this.element.getBoundingClientRect(),s=this.offsetParent.getBoundingClientRect(),l=this.boundaryEl.getBoundingClientRect(),u=this.config.popup?this.position.x:a.left,c=u<=0&&s.left>=e.clientX||s.right<=e.clientX&&s.right<=l.right;return c?!0:(t?c=o<0&&e.clientX>u+s.left||o>0&&e.clientX<u+s.left:r?c=o<0&&e.clientX>l.right||o>0&&e.clientX<u+s.left:c=o<0&&e.clientX>l.right||o>0&&e.clientX<l.right,c)},i.prototype.shouldSkipY=function(e,t,r,o){r===void 0&&(r=0);var a=this.element.getBoundingClientRect(),s=this.offsetParent.getBoundingClientRect(),l=this.boundaryEl.getBoundingClientRect(),u=this.config.popup?this.position.y:a.top,c=u<=0&&s.top>=e.clientY||s.bottom<=e.clientY&&s.bottom<=l.bottom;return c?!0:(t?c=o<0&&e.clientY>u+s.top+r||o>0&&e.clientY<u+s.top:c=o<0&&e.clientY>l.bottom||o>0&&e.clientY<l.bottom,c)},i.prototype.createResizeMap=function(){var e=this.element;this.resizerMap={topLeft:{element:e.querySelector("[ref=eTopLeftResizer]")},top:{element:e.querySelector("[ref=eTopResizer]")},topRight:{element:e.querySelector("[ref=eTopRightResizer]")},right:{element:e.querySelector("[ref=eRightResizer]")},bottomRight:{element:e.querySelector("[ref=eBottomRightResizer]")},bottom:{element:e.querySelector("[ref=eBottomResizer]")},bottomLeft:{element:e.querySelector("[ref=eBottomLeftResizer]")},left:{element:e.querySelector("[ref=eLeftResizer]")}}},i.prototype.addResizers=function(){if(!this.resizersAdded){var e=this.element;if(e){var t=new DOMParser,r=t.parseFromString(JC,"text/html").body;e.appendChild(r.firstChild),this.createResizeMap(),this.resizersAdded=!0}}},i.prototype.removeResizers=function(){this.resizerMap=void 0;var e=this.element.querySelector("."+Sv);e&&this.element.removeChild(e),this.resizersAdded=!1},i.prototype.getResizerElement=function(e){return this.resizerMap[e].element},i.prototype.onResizeStart=function(e,t){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.currentResizer={isTop:!!t.match(/top/i),isRight:!!t.match(/right/i),isBottom:!!t.match(/bottom/i),isLeft:!!t.match(/left/i)},this.element.classList.add("ag-resizing"),this.resizerMap[t].element.classList.add("ag-active");var r=this.config,o=r.popup,a=r.forcePopupParentAsOffsetParent;!o&&!a&&this.applySizeToSiblings(this.currentResizer.isBottom||this.currentResizer.isTop),this.isResizing=!0,this.updateDragStartPosition(e.clientX,e.clientY)},i.prototype.getSiblings=function(){var e=this.element,t=e.parentElement;return t?Array.prototype.slice.call(t.children).filter(function(r){return!r.classList.contains("ag-hidden")}):null},i.prototype.getMinSizeOfSiblings=function(){for(var e=this.getSiblings()||[],t=0,r=0,o=0;o<e.length;o++){var a=e[o],s=!!a.style.flex&&a.style.flex!=="0 0 auto";if(a!==this.element){var l=this.minHeight||0,u=this.minWidth||0;if(s){var c=window.getComputedStyle(a);c.minHeight&&(l=parseInt(c.minHeight,10)),c.minWidth&&(u=parseInt(c.minWidth,10))}else l=a.offsetHeight,u=a.offsetWidth;t+=l,r+=u}}return{height:t,width:r}},i.prototype.applySizeToSiblings=function(e){var t=null,r=this.getSiblings();if(r){for(var o=0;o<r.length;o++){var a=r[o];a!==t&&(e?a.style.height=a.offsetHeight+"px":a.style.width=a.offsetWidth+"px",a.style.flex="0 0 auto",a===this.element&&(t=r[o+1]))}t&&(t.style.removeProperty("height"),t.style.removeProperty("min-height"),t.style.removeProperty("max-height"),t.style.flex="1 1 auto")}},i.prototype.isResizable=function(){return Object.values(this.resizable).some(function(e){return e})},i.prototype.onResize=function(e){if(!(!this.isResizing||!this.currentResizer)){var t=this.config,r=t.popup,o=t.forcePopupParentAsOffsetParent,a=this.currentResizer,s=a.isTop,l=a.isRight,u=a.isBottom,c=a.isLeft,d=l||c,f=u||s,y=this.calculateMouseMovement({e,isLeft:c,isTop:s}),S=y.movementX,w=y.movementY,E=this.position.x,_=this.position.y,L=0,P=0;if(d&&S){var V=c?-1:1,ne=this.getWidth(),ee=ne+S*V,re=!1;c&&(L=ne-ee,(E+L<=0||ee<=this.minWidth)&&(re=!0,L=0)),re||this.setWidth(ee)}if(f&&w){var V=s?-1:1,F=this.getHeight(),U=F+w*V,Y=!1;s?(P=F-U,(_+P<=0||U<=this.minHeight)&&(Y=!0,P=0)):!this.config.popup&&!this.config.forcePopupParentAsOffsetParent&&F<U&&this.getMinSizeOfSiblings().height+U>this.element.parentElement.offsetHeight&&(Y=!0),Y||this.setHeight(U)}this.updateDragStartPosition(e.clientX,e.clientY),((r||o)&&L||P)&&this.offsetElement(E+L,_+P)}},i.prototype.onResizeEnd=function(e,t){this.isResizing=!1,this.currentResizer=null,this.boundaryEl=null;var r={type:"resize",api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi};this.element.classList.remove("ag-resizing"),this.resizerMap[t].element.classList.remove("ag-active"),this.dispatchEvent(r)},i.prototype.refreshSize=function(){var e=this.element;this.config.popup&&(this.config.width||this.setWidth(e.offsetWidth),this.config.height||this.setHeight(e.offsetHeight))},i.prototype.onMoveStart=function(e){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.isMoving=!0,this.element.classList.add("ag-moving"),this.updateDragStartPosition(e.clientX,e.clientY)},i.prototype.onMove=function(e){if(this.isMoving){var t=this.position,r=t.x,o=t.y,a;this.config.calculateTopBuffer&&(a=this.config.calculateTopBuffer());var s=this.calculateMouseMovement({e,isTop:!0,anywhereWithin:!0,topBuffer:a}),l=s.movementX,u=s.movementY;this.offsetElement(r+l,o+u),this.updateDragStartPosition(e.clientX,e.clientY)}},i.prototype.onMoveEnd=function(){this.isMoving=!1,this.boundaryEl=null,this.element.classList.remove("ag-moving")},i.prototype.setOffsetParent=function(){this.config.forcePopupParentAsOffsetParent?this.offsetParent=this.popupService.getPopupParent():this.offsetParent=this.element.offsetParent},i.prototype.findBoundaryElement=function(){for(var e=this.element;e;){if(window.getComputedStyle(e).position!=="static")return e;e=e.parentElement}return this.element},i.prototype.clearResizeListeners=function(){for(;this.resizeListeners.length;){var e=this.resizeListeners.pop();this.dragService.removeDragSource(e)}},i.prototype.destroy=function(){n.prototype.destroy.call(this),this.moveElementDragListener&&this.dragService.removeDragSource(this.moveElementDragListener),this.constrainSizeToAvailableHeight(!1),this.clearResizeListeners(),this.removeResizers()},Lu([T("popupService")],i.prototype,"popupService",void 0),Lu([T("resizeObserverService")],i.prototype,"resizeObserverService",void 0),Lu([T("dragService")],i.prototype,"dragService",void 0),i}(ve),ZC=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Mu=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},Cl=function(n){ZC(i,n);function i(e){var t=n.call(this)||this;return t.filterNameKey=e,t.applyActive=!1,t.hidePopup=null,t.debouncePending=!1,t.appliedModel=null,t}return i.prototype.postConstruct=function(){this.resetTemplate(),this.createManagedBean(new rn(this.getFocusableElement(),{handleKeyDown:this.handleKeyDown.bind(this)})),this.positionableFeature=new wv(this.getPositionableElement(),{forcePopupParentAsOffsetParent:!0}),this.createBean(this.positionableFeature)},i.prototype.handleKeyDown=function(e){},i.prototype.getFilterTitle=function(){return this.translate(this.filterNameKey)},i.prototype.isFilterActive=function(){return!!this.appliedModel},i.prototype.resetTemplate=function(e){var t=this.getGui();t&&t.removeEventListener("submit",this.onFormSubmit);var r=`
            <form class="ag-filter-wrapper">
                <div class="ag-filter-body-wrapper ag-`+this.getCssIdentifier()+`-body-wrapper" ref="eFilterBody">
                    `+this.createBodyTemplate()+`
                </div>
            </form>`;this.setTemplate(r,e),t=this.getGui(),t&&t.addEventListener("submit",this.onFormSubmit)},i.prototype.isReadOnly=function(){return!!this.providedFilterParams.readOnly},i.prototype.init=function(e){var t=this;this.setParams(e),this.resetUiToDefaults(!0).then(function(){t.updateUiVisibility(),t.setupOnBtApplyDebounce()})},i.prototype.setParams=function(e){this.providedFilterParams=e,this.applyActive=i.isUseApplyButton(e),this.createButtonPanel()},i.prototype.createButtonPanel=function(){var e=this,t=this.providedFilterParams.buttons;if(!(!t||t.length<1||this.isReadOnly())){var r=document.createElement("div");r.classList.add("ag-filter-apply-panel");var o=function(a){var s,l;switch(a){case"apply":s=e.translate("applyFilter"),l=function(d){return e.onBtApply(!1,!1,d)};break;case"clear":s=e.translate("clearFilter"),l=function(){return e.onBtClear()};break;case"reset":s=e.translate("resetFilter"),l=function(){return e.onBtReset()};break;case"cancel":s=e.translate("cancelFilter"),l=function(d){e.onBtCancel(d)};break;default:console.warn("AG Grid: Unknown button type specified");return}var u=a==="apply"?"submit":"button",c=Ji(`<button
                    type="`+u+`"
                    ref="`+a+`FilterButton"
                    class="ag-button ag-standard-button ag-filter-apply-panel-button"
                >`+s+`
                </button>`);r.appendChild(c),e.addManagedListener(c,"click",l)};Pd(t).forEach(function(a){return o(a)}),this.getGui().appendChild(r)}},i.prototype.getDefaultDebounceMs=function(){return 0},i.prototype.setupOnBtApplyDebounce=function(){var e=this,t=i.getDebounceMs(this.providedFilterParams,this.getDefaultDebounceMs()),r=zr(this.checkApplyDebounce.bind(this),t);this.onBtApplyDebounce=function(){e.debouncePending=!0,r()}},i.prototype.checkApplyDebounce=function(){this.debouncePending&&(this.debouncePending=!1,this.onBtApply())},i.prototype.getModel=function(){return this.appliedModel?this.appliedModel:null},i.prototype.setModel=function(e){var t=this,r=e!=null?this.setModelIntoUi(e):this.resetUiToDefaults();return r.then(function(){t.updateUiVisibility(),t.applyModel("api")})},i.prototype.onBtCancel=function(e){var t=this;this.resetUiToActiveModel(this.getModel(),function(){t.handleCancelEnd(e)})},i.prototype.handleCancelEnd=function(e){this.providedFilterParams.closeOnApply&&this.close(e)},i.prototype.resetUiToActiveModel=function(e,t){var r=this,o=function(){r.onUiChanged(!1,"prevent"),t?.()};e!=null?this.setModelIntoUi(e).then(o):this.resetUiToDefaults().then(o)},i.prototype.onBtClear=function(){var e=this;this.resetUiToDefaults().then(function(){return e.onUiChanged()})},i.prototype.onBtReset=function(){this.onBtClear(),this.onBtApply()},i.prototype.applyModel=function(e){var t=this.getModelFromUi();if(!this.isModelValid(t))return!1;var r=this.appliedModel;return this.appliedModel=t,!this.areModelsEqual(r,t)},i.prototype.isModelValid=function(e){return!0},i.prototype.onFormSubmit=function(e){e.preventDefault()},i.prototype.onBtApply=function(e,t,r){if(e===void 0&&(e=!1),t===void 0&&(t=!1),r&&r.preventDefault(),this.applyModel(t?"rowDataUpdated":"ui")){var o="columnFilter";this.providedFilterParams.filterChangedCallback({afterFloatingFilter:e,afterDataChange:t,source:o})}var a=this.providedFilterParams.closeOnApply;a&&this.applyActive&&!e&&!t&&this.close(r)},i.prototype.onNewRowsLoaded=function(){},i.prototype.close=function(e){if(this.hidePopup){var t=e,r=t&&t.key,o;(r==="Enter"||r==="Space")&&(o={keyboardEvent:t}),this.hidePopup(o),this.hidePopup=null}},i.prototype.onUiChanged=function(e,t){if(e===void 0&&(e=!1),this.updateUiVisibility(),this.providedFilterParams.filterModifiedCallback(),this.applyActive&&!this.isReadOnly()){var r=this.isModelValid(this.getModelFromUi());ra(this.getRefElement("applyFilterButton"),!r)}e&&!t||t==="immediately"?this.onBtApply(e):(!this.applyActive&&!t||t==="debounce")&&this.onBtApplyDebounce()},i.prototype.afterGuiAttached=function(e){e&&(this.hidePopup=e.hidePopup),this.refreshFilterResizer(e?.container)},i.prototype.refreshFilterResizer=function(e){if(!(!this.positionableFeature||e==="toolPanel")){var t=e==="floatingFilter",r=this,o=r.positionableFeature,a=r.gridOptionsService;t?(o.restoreLastSize(),o.setResizable(a.is("enableRtl")?{bottom:!0,bottomLeft:!0,left:!0}:{bottom:!0,bottomRight:!0,right:!0})):(this.positionableFeature.removeSizeFromEl(),this.positionableFeature.setResizable(!1)),this.positionableFeature.constrainSizeToAvailableHeight(!0)}},i.prototype.afterGuiDetached=function(){this.checkApplyDebounce(),this.positionableFeature&&this.positionableFeature.constrainSizeToAvailableHeight(!1)},i.getDebounceMs=function(e,t){return i.isUseApplyButton(e)?(e.debounceMs!=null&&console.warn("AG Grid: debounceMs is ignored when apply button is present"),0):e.debounceMs!=null?e.debounceMs:t},i.isUseApplyButton=function(e){return!!e.buttons&&e.buttons.indexOf("apply")>=0},i.prototype.destroy=function(){var e=this.getGui();e&&e.removeEventListener("submit",this.onFormSubmit),this.hidePopup=null,this.positionableFeature&&(this.positionableFeature=this.destroyBean(this.positionableFeature)),n.prototype.destroy.call(this)},i.prototype.translate=function(e){var t=this.localeService.getLocaleTextFunc();return t(e,Cv[e])},i.prototype.getCellValue=function(e){var t=this.providedFilterParams,r=t.api,o=t.colDef,a=t.column,s=t.columnApi,l=t.context;return this.providedFilterParams.valueGetter({api:r,colDef:o,column:a,columnApi:s,context:l,data:e.data,getValue:function(u){return e.data[u]},node:e})},i.prototype.getPositionableElement=function(){return this.eFilterBody},Mu([T("rowModel")],i.prototype,"rowModel",void 0),Mu([be("eFilterBody")],i.prototype,"eFilterBody",void 0),Mu([Oe],i.prototype,"postConstruct",null),i}(xt),$C=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),eS=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},Tv=function(n){$C(i,n);function i(e,t){var r=n.call(this,t)||this;return r.labelSeparator="",r.labelAlignment="left",r.disabled=!1,r.label="",r.config=e||{},r}return i.prototype.postConstruct=function(){this.addCssClass("ag-labeled"),this.eLabel.classList.add("ag-label");var e=this.config,t=e.labelSeparator,r=e.label,o=e.labelWidth,a=e.labelAlignment;t!=null&&this.setLabelSeparator(t),r!=null&&this.setLabel(r),o!=null&&this.setLabelWidth(o),this.setLabelAlignment(a||this.labelAlignment),this.refreshLabel()},i.prototype.refreshLabel=function(){tr(this.eLabel),typeof this.label=="string"?this.eLabel.innerText=this.label+this.labelSeparator:this.label&&this.eLabel.appendChild(this.label),this.label===""?(Yt(this.eLabel,!1),Wi(this.eLabel,"presentation")):(Yt(this.eLabel,!0),Wi(this.eLabel,null))},i.prototype.setLabelSeparator=function(e){return this.labelSeparator===e?this:(this.labelSeparator=e,this.label!=null&&this.refreshLabel(),this)},i.prototype.getLabelId=function(){return this.eLabel.id=this.eLabel.id||"ag-"+this.getCompId()+"-label",this.eLabel.id},i.prototype.getLabel=function(){return this.label},i.prototype.setLabel=function(e){return this.label===e?this:(this.label=e,this.refreshLabel(),this)},i.prototype.setLabelAlignment=function(e){var t=this.getGui(),r=t.classList;return r.toggle("ag-label-align-left",e==="left"),r.toggle("ag-label-align-right",e==="right"),r.toggle("ag-label-align-top",e==="top"),this},i.prototype.setLabelEllipsis=function(e){return this.eLabel.classList.toggle("ag-label-ellipsis",e),this},i.prototype.setLabelWidth=function(e){return this.label==null?this:(ds(this.eLabel,e),this)},i.prototype.setDisabled=function(e){e=!!e;var t=this.getGui();return ra(t,e),t.classList.toggle("ag-disabled",e),this.disabled=e,this},i.prototype.isDisabled=function(){return!!this.disabled},eS([Oe],i.prototype,"postConstruct",null),i}(xt),tS=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Ov=function(n){tS(i,n);function i(e,t,r){var o=n.call(this,e,t)||this;return o.className=r,o}return i.prototype.postConstruct=function(){n.prototype.postConstruct.call(this),this.className&&this.addCssClass(this.className)},i.prototype.onValueChange=function(e){var t=this;return this.addManagedListener(this,b.EVENT_FIELD_VALUE_CHANGED,function(){return e(t.getValue())}),this},i.prototype.getWidth=function(){return this.getGui().clientWidth},i.prototype.setWidth=function(e){return Nr(this.getGui(),e),this},i.prototype.getPreviousValue=function(){return this.previousValue},i.prototype.getValue=function(){return this.value},i.prototype.setValue=function(e,t){return this.value===e?this:(this.previousValue=this.value,this.value=e,t||this.dispatchEvent({type:b.EVENT_FIELD_VALUE_CHANGED}),this)},i}(Tv),iS=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Pa=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},rS=`
    <div class="ag-picker-field" role="presentation">
        <div ref="eLabel"></div>
            <div ref="eWrapper" class="ag-wrapper ag-picker-field-wrapper ag-picker-collapsed">
            <div ref="eDisplayField" class="ag-picker-field-display"></div>
            <div ref="eIcon" class="ag-picker-field-icon" aria-hidden="true"></div>
        </div>
    </div>`,Pv=function(n){iS(i,n);function i(e){var t=n.call(this,e,e?.template||rS,e?.className)||this;if(t.isPickerDisplayed=!1,t.skipClick=!1,t.pickerGap=4,t.hideCurrentPicker=null,t.ariaRole=e?.ariaRole,t.onPickerFocusIn=t.onPickerFocusIn.bind(t),t.onPickerFocusOut=t.onPickerFocusOut.bind(t),!e)return t;var r=e.pickerGap,o=e.maxPickerHeight,a=e.variableWidth,s=e.minPickerWidth,l=e.maxPickerWidth;return r!=null&&(t.pickerGap=r),t.variableWidth=!!a,o!=null&&t.setPickerMaxHeight(o),s!=null&&t.setPickerMinWidth(s),l!=null&&t.setPickerMaxWidth(l),t}return i.prototype.postConstruct=function(){n.prototype.postConstruct.call(this),this.setupAria();var e="ag-"+this.getCompId()+"-display";this.eDisplayField.setAttribute("id",e);var t=this.getAriaElement();Wh(t,e),this.addManagedListener(t,"keydown",this.onKeyDown.bind(this)),this.addManagedListener(this.eLabel,"mousedown",this.onLabelOrWrapperMouseDown.bind(this)),this.addManagedListener(this.eWrapper,"mousedown",this.onLabelOrWrapperMouseDown.bind(this));var r=this.config.pickerIcon;if(r){var o=Li(r,this.gridOptionsService);o&&this.eIcon.appendChild(o)}},i.prototype.setupAria=function(){var e=this.getAriaElement();e.setAttribute("tabindex",(this.gridOptionsService.getNum("tabIndex")||0).toString()),Yr(e,!1),this.ariaRole&&Wi(e,this.ariaRole)},i.prototype.refreshLabel=function(){var e,t=this.getAriaElement();Gl(t,(e=this.getLabelId())!==null&&e!==void 0?e:""),n.prototype.refreshLabel.call(this)},i.prototype.onLabelOrWrapperMouseDown=function(e){if(e&&(e.preventDefault(),this.getFocusableElement().focus()),this.skipClick){this.skipClick=!1;return}this.isDisabled()||(this.isPickerDisplayed?this.hidePicker():this.showPicker())},i.prototype.onKeyDown=function(e){switch(e.key){case J.UP:case J.DOWN:case J.ENTER:case J.SPACE:e.preventDefault(),this.onLabelOrWrapperMouseDown();break;case J.ESCAPE:this.isPickerDisplayed&&(e.preventDefault(),e.stopPropagation(),this.hideCurrentPicker&&this.hideCurrentPicker());break}},i.prototype.showPicker=function(){this.isPickerDisplayed=!0,this.pickerComponent||(this.pickerComponent=this.createPickerComponent());var e=this.pickerComponent.getGui();e.addEventListener("focusin",this.onPickerFocusIn),e.addEventListener("focusout",this.onPickerFocusOut),this.hideCurrentPicker=this.renderAndPositionPicker(),this.toggleExpandedStyles(!0)},i.prototype.renderAndPositionPicker=function(){var e=this,t=this.gridOptionsService.getDocument(),r=this.pickerComponent.getGui();this.gridOptionsService.is("suppressScrollWhenPopupsAreOpen")||(this.destroyMouseWheelFunc=this.addManagedListener(t.body,"wheel",function(ee){r.contains(ee.target)||e.hidePicker()}));var o=this.localeService.getLocaleTextFunc(),a=this.config,s=a.pickerType,l=a.pickerAriaLabelKey,u=a.pickerAriaLabelValue,c=a.modalPicker,d=c===void 0?!0:c,f={modal:d,eChild:r,closeOnEsc:!0,closedCallback:function(){var ee=t.activeElement===t.body;e.beforeHidePicker(),ee&&e.isAlive()&&e.getFocusableElement().focus()},ariaLabel:o(l,u)},y=this.popupService.addPopup(f),S=this,w=S.maxPickerHeight,E=S.minPickerWidth,_=S.maxPickerWidth,L=S.pickerGap,P=S.variableWidth;P?(E&&(r.style.minWidth=E),r.style.width=jl(ss(this.eWrapper)),_&&(r.style.maxWidth=_)):ds(r,_??ss(this.eWrapper));var V=w??vs(this.popupService.getPopupParent())+"px";r.style.setProperty("max-height",V),r.style.position="absolute";var ne=this.gridOptionsService.is("enableRtl")?"right":"left";return this.popupService.positionPopupByComponent({type:s,eventSource:this.eWrapper,ePopup:r,position:"under",alignSide:ne,keepWithinBounds:!0,nudgeY:L}),y.hideFunc},i.prototype.beforeHidePicker=function(){this.destroyMouseWheelFunc&&(this.destroyMouseWheelFunc(),this.destroyMouseWheelFunc=void 0),this.toggleExpandedStyles(!1);var e=this.pickerComponent.getGui();e.removeEventListener("focusin",this.onPickerFocusIn),e.removeEventListener("focusout",this.onPickerFocusOut),this.isPickerDisplayed=!1,this.pickerComponent=void 0,this.hideCurrentPicker=null},i.prototype.toggleExpandedStyles=function(e){if(this.isAlive()){var t=this.getAriaElement();Yr(t,e),this.eWrapper.classList.toggle("ag-picker-expanded",e),this.eWrapper.classList.toggle("ag-picker-collapsed",!e)}},i.prototype.onPickerFocusIn=function(){this.togglePickerHasFocus(!0)},i.prototype.onPickerFocusOut=function(e){var t;!((t=this.pickerComponent)===null||t===void 0)&&t.getGui().contains(e.relatedTarget)||this.togglePickerHasFocus(!1)},i.prototype.togglePickerHasFocus=function(e){this.pickerComponent&&this.eWrapper.classList.toggle("ag-picker-has-focus",e)},i.prototype.hidePicker=function(){this.hideCurrentPicker&&this.hideCurrentPicker()},i.prototype.setAriaLabel=function(e){return Po(this.getAriaElement(),e),this},i.prototype.setInputWidth=function(e){return ds(this.eWrapper,e),this},i.prototype.getFocusableElement=function(){return this.eWrapper},i.prototype.setPickerGap=function(e){return this.pickerGap=e,this},i.prototype.setPickerMinWidth=function(e){return typeof e=="number"&&(e=e+"px"),this.minPickerWidth=e??void 0,this},i.prototype.setPickerMaxWidth=function(e){return typeof e=="number"&&(e=e+"px"),this.maxPickerWidth=e??void 0,this},i.prototype.setPickerMaxHeight=function(e){return typeof e=="number"&&(e=e+"px"),this.maxPickerHeight=e??void 0,this},i.prototype.destroy=function(){this.hidePicker(),n.prototype.destroy.call(this)},Pa([T("popupService")],i.prototype,"popupService",void 0),Pa([be("eLabel")],i.prototype,"eLabel",void 0),Pa([be("eWrapper")],i.prototype,"eWrapper",void 0),Pa([be("eDisplayField")],i.prototype,"eDisplayField",void 0),Pa([be("eIcon")],i.prototype,"eIcon",void 0),i}(Ov),oS=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),nS=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},kp=function(n){oS(i,n);function i(e){e===void 0&&(e="default");var t=n.call(this,'<div class="ag-list ag-'+e+'-list" role="listbox"></div>')||this;return t.cssIdentifier=e,t.options=[],t.itemEls=[],t}return i.prototype.init=function(){this.addManagedListener(this.getGui(),"keydown",this.handleKeyDown.bind(this))},i.prototype.handleKeyDown=function(e){var t=e.key;switch(t){case J.ENTER:if(!this.highlightedEl)this.setValue(this.getValue());else{var r=this.itemEls.indexOf(this.highlightedEl);this.setValueByIndex(r)}break;case J.DOWN:case J.UP:var o=t===J.DOWN,a=void 0;if(e.preventDefault(),!this.highlightedEl)a=this.itemEls[o?0:this.itemEls.length-1];else{var s=this.itemEls.indexOf(this.highlightedEl),l=s+(o?1:-1);l=Math.min(Math.max(l,0),this.itemEls.length-1),a=this.itemEls[l]}this.highlightItem(a);break}},i.prototype.addOptions=function(e){var t=this;return e.forEach(function(r){return t.addOption(r)}),this},i.prototype.addOption=function(e){var t=e.value,r=e.text,o=Ii(r||t);return this.options.push({value:t,text:o}),this.renderOption(t,o),this.updateIndices(),this},i.prototype.updateIndices=function(){var e=this.getGui().querySelectorAll(".ag-list-item");e.forEach(function(t,r){sd(t,r+1),ad(t,e.length)})},i.prototype.renderOption=function(e,t){var r=this,o=document.createElement("div");Wi(o,"option"),o.classList.add("ag-list-item","ag-"+this.cssIdentifier+"-list-item"),o.innerHTML="<span>"+t+"</span>",o.tabIndex=-1,this.itemEls.push(o),this.addManagedListener(o,"mouseover",function(){return r.highlightItem(o)}),this.addManagedListener(o,"mouseleave",function(){return r.clearHighlighted()}),this.addManagedListener(o,"click",function(){return r.setValue(e)}),this.getGui().appendChild(o)},i.prototype.setValue=function(e,t){if(this.value===e)return this.fireItemSelected(),this;if(e==null)return this.reset(),this;var r=this.options.findIndex(function(a){return a.value===e});if(r!==-1){var o=this.options[r];this.value=o.value,this.displayValue=o.text!=null?o.text:o.value,this.highlightItem(this.itemEls[r]),t||this.fireChangeEvent()}return this},i.prototype.setValueByIndex=function(e){return this.setValue(this.options[e].value)},i.prototype.getValue=function(){return this.value},i.prototype.getDisplayValue=function(){return this.displayValue},i.prototype.refreshHighlighted=function(){var e=this;this.clearHighlighted();var t=this.options.findIndex(function(r){return r.value===e.value});t!==-1&&this.highlightItem(this.itemEls[t])},i.prototype.reset=function(){this.value=null,this.displayValue=null,this.clearHighlighted(),this.fireChangeEvent()},i.prototype.highlightItem=function(e){e.offsetParent&&(this.clearHighlighted(),this.highlightedEl=e,this.highlightedEl.classList.add(i.ACTIVE_CLASS),Dn(this.highlightedEl,!0),this.highlightedEl.focus())},i.prototype.clearHighlighted=function(){!this.highlightedEl||!this.highlightedEl.offsetParent||(this.highlightedEl.classList.remove(i.ACTIVE_CLASS),Dn(this.highlightedEl,!1),this.highlightedEl=null)},i.prototype.fireChangeEvent=function(){this.dispatchEvent({type:b.EVENT_FIELD_VALUE_CHANGED}),this.fireItemSelected()},i.prototype.fireItemSelected=function(){this.dispatchEvent({type:i.EVENT_ITEM_SELECTED})},i.EVENT_ITEM_SELECTED="selectedItem",i.ACTIVE_CLASS="ag-active-item",nS([Oe],i.prototype,"init",null),i}(xt),aS=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Hc=function(){return Hc=Object.assign||function(n){for(var i,e=1,t=arguments.length;e<t;e++){i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(n[r]=i[r])}return n},Hc.apply(this,arguments)},_d=function(n){aS(i,n);function i(e){return n.call(this,Hc({pickerAriaLabelKey:"ariaLabelSelectField",pickerAriaLabelValue:"Select Field",pickerType:"ag-list",className:"ag-select",pickerIcon:"smallDown",ariaRole:"listbox"},e))||this}return i.prototype.postConstruct=function(){var e;n.prototype.postConstruct.call(this),this.createListComponent(),this.eWrapper.tabIndex=(e=this.gridOptionsService.getNum("tabIndex"))!==null&&e!==void 0?e:0},i.prototype.createListComponent=function(){var e=this;this.listComponent=this.createBean(new kp("select")),this.listComponent.setParentComponent(this),this.listComponent.addGuiEventListener("keydown",function(t){t.key===J.TAB&&(t.preventDefault(),t.stopImmediatePropagation(),e.getGui().dispatchEvent(new KeyboardEvent("keydown",{key:t.key,shiftKey:t.shiftKey,ctrlKey:t.ctrlKey,bubbles:!0})))}),this.listComponent.addManagedListener(this.listComponent,kp.EVENT_ITEM_SELECTED,function(){e.hidePicker(),e.dispatchEvent({type:i.EVENT_ITEM_SELECTED})}),this.listComponent.addManagedListener(this.listComponent,b.EVENT_FIELD_VALUE_CHANGED,function(){e.listComponent&&(e.setValue(e.listComponent.getValue(),!1,!0),e.hidePicker())})},i.prototype.createPickerComponent=function(){return this.listComponent},i.prototype.showPicker=function(){this.listComponent&&(n.prototype.showPicker.call(this),this.listComponent.refreshHighlighted())},i.prototype.addOptions=function(e){var t=this;return e.forEach(function(r){return t.addOption(r)}),this},i.prototype.addOption=function(e){return this.listComponent.addOption(e),this},i.prototype.setValue=function(e,t,r){if(this.value===e||!this.listComponent)return this;r||this.listComponent.setValue(e,!0);var o=this.listComponent.getValue();return o===this.getValue()?this:(this.eDisplayField.innerHTML=this.listComponent.getDisplayValue(),n.prototype.setValue.call(this,e,t))},i.prototype.destroy=function(){this.listComponent&&(this.destroyBean(this.listComponent),this.listComponent=void 0),n.prototype.destroy.call(this)},i.EVENT_ITEM_SELECTED="selectedItem",i}(Pv),sS=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Nu=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},Qo=function(n){sS(i,n);function i(e,t,r,o){r===void 0&&(r="text"),o===void 0&&(o="input");var a=n.call(this,e,`
            <div role="presentation">
                <div ref="eLabel" class="ag-input-field-label"></div>
                <div ref="eWrapper" class="ag-wrapper ag-input-wrapper" role="presentation">
                    <`+o+' ref="eInput" class="ag-input-field-input"></'+o+`>
                </div>
            </div>`,t)||this;return a.inputType=r,a.displayFieldTag=o,a}return i.prototype.postConstruct=function(){n.prototype.postConstruct.call(this),this.setInputType(),this.eLabel.classList.add(this.className+"-label"),this.eWrapper.classList.add(this.className+"-input-wrapper"),this.eInput.classList.add(this.className+"-input"),this.addCssClass("ag-input-field"),this.eInput.id=this.eInput.id||"ag-"+this.getCompId()+"-input";var e=this.config,t=e.width,r=e.value;t!=null&&this.setWidth(t),r!=null&&this.setValue(r),this.addInputListeners(),this.activateTabIndex([this.eInput])},i.prototype.refreshLabel=function(){ue(this.getLabel())?Gl(this.eInput,this.getLabelId()):this.eInput.removeAttribute("aria-labelledby"),n.prototype.refreshLabel.call(this)},i.prototype.addInputListeners=function(){var e=this;this.addManagedListener(this.eInput,"input",function(t){return e.setValue(t.target.value)})},i.prototype.setInputType=function(){this.displayFieldTag==="input"&&this.eInput.setAttribute("type",this.inputType)},i.prototype.getInputElement=function(){return this.eInput},i.prototype.setInputWidth=function(e){return ds(this.eWrapper,e),this},i.prototype.setInputName=function(e){return this.getInputElement().setAttribute("name",e),this},i.prototype.getFocusableElement=function(){return this.eInput},i.prototype.setMaxLength=function(e){var t=this.eInput;return t.maxLength=e,this},i.prototype.setInputPlaceholder=function(e){return so(this.eInput,"placeholder",e),this},i.prototype.setInputAriaLabel=function(e){return Po(this.eInput,e),this},i.prototype.setDisabled=function(e){return ra(this.eInput,e),n.prototype.setDisabled.call(this,e)},i.prototype.setAutoComplete=function(e){if(e===!0)so(this.eInput,"autocomplete",null);else{var t=typeof e=="string"?e:"off";so(this.eInput,"autocomplete",t)}return this},Nu([be("eLabel")],i.prototype,"eLabel",void 0),Nu([be("eWrapper")],i.prototype,"eWrapper",void 0),Nu([be("eInput")],i.prototype,"eInput",void 0),i}(Ov),lS=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Yl=function(n){lS(i,n);function i(e,t,r){t===void 0&&(t="ag-checkbox"),r===void 0&&(r="checkbox");var o=n.call(this,e,t,r)||this;return o.labelAlignment="right",o.selected=!1,o.readOnly=!1,o.passive=!1,o}return i.prototype.addInputListeners=function(){this.addManagedListener(this.eInput,"click",this.onCheckboxClick.bind(this)),this.addManagedListener(this.eLabel,"click",this.toggle.bind(this))},i.prototype.getNextValue=function(){return this.selected===void 0?!0:!this.selected},i.prototype.setPassive=function(e){this.passive=e},i.prototype.isReadOnly=function(){return this.readOnly},i.prototype.setReadOnly=function(e){this.eWrapper.classList.toggle("ag-disabled",e),this.eInput.disabled=e,this.readOnly=e},i.prototype.setDisabled=function(e){return this.eWrapper.classList.toggle("ag-disabled",e),n.prototype.setDisabled.call(this,e)},i.prototype.toggle=function(){if(!this.eInput.disabled){var e=this.isSelected(),t=this.getNextValue();this.passive?this.dispatchChange(t,e):this.setValue(t)}},i.prototype.getValue=function(){return this.isSelected()},i.prototype.setValue=function(e,t){return this.refreshSelectedClass(e),this.setSelected(e,t),this},i.prototype.setName=function(e){var t=this.getInputElement();return t.name=e,this},i.prototype.isSelected=function(){return this.selected},i.prototype.setSelected=function(e,t){this.isSelected()!==e&&(this.previousValue=this.isSelected(),e=this.selected=typeof e=="boolean"?e:void 0,this.eInput.checked=e,this.eInput.indeterminate=e===void 0,t||this.dispatchChange(this.selected,this.previousValue))},i.prototype.dispatchChange=function(e,t,r){this.dispatchEvent({type:b.EVENT_FIELD_VALUE_CHANGED,selected:e,previousValue:t,event:r});var o=this.getInputElement(),a={type:b.EVENT_CHECKBOX_CHANGED,id:o.id,name:o.name,selected:e,previousValue:t};this.eventService.dispatchEvent(a)},i.prototype.onCheckboxClick=function(e){if(!(this.passive||this.eInput.disabled)){var t=this.isSelected(),r=this.selected=e.target.checked;this.refreshSelectedClass(r),this.dispatchChange(r,t,e)}},i.prototype.refreshSelectedClass=function(e){this.eWrapper.classList.toggle("ag-checked",e===!0),this.eWrapper.classList.toggle("ag-indeterminate",e==null)},i}(Qo),uS=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Ev=function(n){uS(i,n);function i(e){return n.call(this,e,"ag-radio-button","radio")||this}return i.prototype.isSelected=function(){return this.eInput.checked},i.prototype.toggle=function(){this.eInput.disabled||this.isSelected()||this.setValue(!0)},i.prototype.addInputListeners=function(){n.prototype.addInputListeners.call(this),this.addManagedListener(this.eventService,b.EVENT_CHECKBOX_CHANGED,this.onChange.bind(this))},i.prototype.onChange=function(e){e.selected&&e.name&&this.eInput.name&&this.eInput.name===e.name&&e.id&&this.eInput.id!==e.id&&this.setValue(!1,!0)},i}(Yl),cS=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),dS=function(n,i){var e=typeof Symbol=="function"&&n[Symbol.iterator];if(!e)return n;var t=e.call(n),r,o=[],a;try{for(;(i===void 0||i-- >0)&&!(r=t.next()).done;)o.push(r.value)}catch(s){a={error:s}}finally{try{r&&!r.done&&(e=t.return)&&e.call(t)}finally{if(a)throw a.error}}return o},pS=function(n,i){for(var e=0,t=i.length,r=n.length;e<t;e++,r++)n[r]=i[e];return n},bd=function(){function n(i,e,t){this.localeService=i,this.optionsFactory=e,this.valueFormatter=t}return n.prototype.getModelAsString=function(i){var e=this;if(!i)return null;var t=i.operator!=null,r=this.localeService.getLocaleTextFunc();if(t){var o=i,a=o.conditions;if(!a){var s=o.condition1,l=o.condition2;a=[s,l]}var u=a.map(function(_){return e.getModelAsString(_)}),c=o.operator==="AND"?"andCondition":"orCondition";return u.join(" "+r(c,Cv[c])+" ")}else{if(i.type===wi.BLANK||i.type===wi.NOT_BLANK)return r(i.type,i.type);var d=i,f=this.optionsFactory.getCustomOption(d.type),y=f||{},S=y.displayKey,w=y.displayName,E=y.numberOfInputs;return S&&w&&E===0?(r(S,w),w):this.conditionToString(d,f)}},n.prototype.updateParams=function(i){this.optionsFactory=i.optionsFactory},n.prototype.formatValue=function(i){var e;return this.valueFormatter?(e=this.valueFormatter(i??null))!==null&&e!==void 0?e:"":String(i)},n}(),wi=function(n){cS(i,n);function i(){var e=n!==null&&n.apply(this,arguments)||this;return e.eTypes=[],e.eJoinOperatorPanels=[],e.eJoinOperatorsAnd=[],e.eJoinOperatorsOr=[],e.eConditionBodies=[],e.listener=function(){return e.onUiChanged()},e.lastUiCompletePosition=null,e.joinOperatorId=0,e}return i.prototype.getNumberOfInputs=function(e){var t=this.optionsFactory.getCustomOption(e);if(t){var r=t.numberOfInputs;return r??1}var o=[i.EMPTY,i.NOT_BLANK,i.BLANK];return e&&o.indexOf(e)>=0?0:e===i.IN_RANGE?2:1},i.prototype.onFloatingFilterChanged=function(e,t){this.setTypeFromFloatingFilter(e),this.setValueFromFloatingFilter(t),this.onUiChanged(!0)},i.prototype.setTypeFromFloatingFilter=function(e){var t=this;this.eTypes.forEach(function(r,o){o===0?r.setValue(e,!0):r.setValue(t.optionsFactory.getDefaultOption(),!0)})},i.prototype.getModelFromUi=function(){var e=this.getUiCompleteConditions();return e.length===0?null:this.maxNumConditions>1&&e.length>1?{filterType:this.getFilterType(),operator:this.getJoinOperator(),condition1:e[0],condition2:e[1],conditions:e}:e[0]},i.prototype.getConditionTypes=function(){return this.eTypes.map(function(e){return e.getValue()})},i.prototype.getConditionType=function(e){return this.eTypes[e].getValue()},i.prototype.getJoinOperator=function(){return this.eJoinOperatorsOr.length===0?this.defaultJoinOperator:this.eJoinOperatorsOr[0].getValue()===!0?"OR":"AND"},i.prototype.areModelsEqual=function(e,t){var r=this;if(!e&&!t)return!0;if(!e&&t||e&&!t)return!1;var o=!e.operator,a=!t.operator,s=!o&&a||o&&!a;if(s)return!1;var l;if(o){var u=e,c=t;l=this.areSimpleModelsEqual(u,c)}else{var d=e,f=t;l=d.operator===f.operator&&Ko(d.conditions,f.conditions,function(y,S){return r.areSimpleModelsEqual(y,S)})}return l},i.prototype.setModelIntoUi=function(e){var t=this,r=e.operator;if(r){var o=e;o.conditions||(o.conditions=[o.condition1,o.condition2]);var a=this.validateAndUpdateConditions(o.conditions),s=this.getNumConditions();if(a<s)this.removeConditionsAndOperators(a);else if(a>s)for(var l=s;l<a;l++)this.createJoinOperatorPanel(),this.createOption();var u=o.operator==="OR";this.eJoinOperatorsAnd.forEach(function(d){return d.setValue(!u,!0)}),this.eJoinOperatorsOr.forEach(function(d){return d.setValue(u,!0)}),o.conditions.forEach(function(d,f){t.eTypes[f].setValue(d.type,!0),t.setConditionIntoUi(d,f)})}else{var c=e;this.getNumConditions()>1&&this.removeConditionsAndOperators(1),this.eTypes[0].setValue(c.type,!0),this.setConditionIntoUi(c,0)}return this.lastUiCompletePosition=this.getNumConditions()-1,this.createMissingConditionsAndOperators(),this.onUiChanged(),jr.resolve()},i.prototype.validateAndUpdateConditions=function(e){var t=e.length;return t>this.maxNumConditions&&(e.splice(this.maxNumConditions),Ut(function(){return console.warn('AG Grid: Filter Model contains more conditions than "filterParams.maxNumConditions". Additional conditions have been ignored.')},"simpleFilterSetModelMaxNumConditions"),t=this.maxNumConditions),t},i.prototype.doesFilterPass=function(e){var t=this,r,o=this.getModel();if(o==null)return!0;var a=o.operator,s=[];if(a){var l=o;s.push.apply(s,pS([],dS((r=l.conditions)!==null&&r!==void 0?r:[])))}else s.push(o);var u=a&&a==="OR"?"some":"every";return s[u](function(c){return t.individualConditionPasses(e,c)})},i.prototype.setParams=function(e){n.prototype.setParams.call(this,e),this.setNumConditions(e),this.defaultJoinOperator=this.getDefaultJoinOperator(e.defaultJoinOperator),this.filterPlaceholder=e.filterPlaceholder,this.optionsFactory=new mv,this.optionsFactory.init(e,this.getDefaultFilterOptions()),this.createFilterListOptions(),this.createOption(),this.createMissingConditionsAndOperators(),this.isReadOnly()&&this.eFilterBody.setAttribute("tabindex","-1")},i.prototype.setNumConditions=function(e){var t,r;e.suppressAndOrCondition!=null&&Ut(function(){return console.warn('AG Grid: Since v29.2 "filterParams.suppressAndOrCondition" is deprecated. Use "filterParams.maxNumConditions = 1" instead.')},"simpleFilterSuppressAndOrCondition"),e.alwaysShowBothConditions!=null&&Ut(function(){return console.warn('AG Grid: Since v29.2 "filterParams.alwaysShowBothConditions" is deprecated. Use "filterParams.numAlwaysVisibleConditions = 2" instead.')},"simpleFilterAlwaysShowBothConditions"),this.maxNumConditions=(t=e.maxNumConditions)!==null&&t!==void 0?t:e.suppressAndOrCondition?1:2,this.maxNumConditions<1&&(Ut(function(){return console.warn('AG Grid: "filterParams.maxNumConditions" must be greater than or equal to zero.')},"simpleFilterMaxNumConditions"),this.maxNumConditions=1),this.numAlwaysVisibleConditions=(r=e.numAlwaysVisibleConditions)!==null&&r!==void 0?r:e.alwaysShowBothConditions?2:1,this.numAlwaysVisibleConditions<1&&(Ut(function(){return console.warn('AG Grid: "filterParams.numAlwaysVisibleConditions" must be greater than or equal to zero.')},"simpleFilterNumAlwaysVisibleConditions"),this.numAlwaysVisibleConditions=1),this.numAlwaysVisibleConditions>this.maxNumConditions&&(Ut(function(){return console.warn('AG Grid: "filterParams.numAlwaysVisibleConditions" cannot be greater than "filterParams.maxNumConditions".')},"simpleFilterNumAlwaysVisibleGreaterThanMaxNumConditions"),this.numAlwaysVisibleConditions=this.maxNumConditions)},i.prototype.createOption=function(){var e=this,t=this.createManagedBean(new _d);this.eTypes.push(t),t.addCssClass("ag-filter-select"),this.eFilterBody.appendChild(t.getGui());var r=this.createValueElement();this.eConditionBodies.push(r),this.eFilterBody.appendChild(r),this.putOptionsIntoDropdown(t),this.resetType(t);var o=this.getNumConditions()-1;this.forEachPositionInput(o,function(a){return e.resetInput(a)}),this.addChangedListeners(t,o)},i.prototype.createJoinOperatorPanel=function(){var e=document.createElement("div");this.eJoinOperatorPanels.push(e),e.classList.add("ag-filter-condition");var t=this.createJoinOperator(this.eJoinOperatorsAnd,e,"and"),r=this.createJoinOperator(this.eJoinOperatorsOr,e,"or");this.eFilterBody.appendChild(e);var o=this.eJoinOperatorPanels.length-1,a=this.joinOperatorId++;this.resetJoinOperatorAnd(t,o,a),this.resetJoinOperatorOr(r,o,a),this.isReadOnly()||(t.onValueChange(this.listener),r.onValueChange(this.listener))},i.prototype.createJoinOperator=function(e,t,r){var o=this.createManagedBean(new Ev);return e.push(o),o.addCssClass("ag-filter-condition-operator"),o.addCssClass("ag-filter-condition-operator-"+r),t.appendChild(o.getGui()),o},i.prototype.getDefaultJoinOperator=function(e){return e==="AND"||e==="OR"?e:"AND"},i.prototype.createFilterListOptions=function(){var e=this,t=this.optionsFactory.getFilterOptions();this.filterListOptions=t.map(function(r){return typeof r=="string"?e.createBoilerplateListOption(r):e.createCustomListOption(r)})},i.prototype.putOptionsIntoDropdown=function(e){this.filterListOptions.forEach(function(t){e.addOption(t)}),e.setDisabled(this.filterListOptions.length<=1)},i.prototype.createBoilerplateListOption=function(e){return{value:e,text:this.translate(e)}},i.prototype.createCustomListOption=function(e){var t=e.displayKey,r=this.optionsFactory.getCustomOption(e.displayKey);return{value:t,text:r?this.localeService.getLocaleTextFunc()(r.displayKey,r.displayName):this.translate(t)}},i.prototype.isAllowTwoConditions=function(){return this.maxNumConditions>=2},i.prototype.createBodyTemplate=function(){return""},i.prototype.getCssIdentifier=function(){return"simple-filter"},i.prototype.updateUiVisibility=function(){var e=this.getJoinOperator();this.updateNumConditions(),this.updateConditionStatusesAndValues(this.lastUiCompletePosition,e)},i.prototype.updateNumConditions=function(){for(var e,t=-1,r=!0,o=0;o<this.getNumConditions();o++)this.isConditionUiComplete(o)?t=o:r=!1;if(this.shouldAddNewConditionAtEnd(r))this.createJoinOperatorPanel(),this.createOption();else{var a=(e=this.lastUiCompletePosition)!==null&&e!==void 0?e:this.getNumConditions()-2;if(t<a){this.removeConditionsAndOperators(a+1);var s=t+1,l=a-s;l>0&&this.removeConditionsAndOperators(s,l),this.createMissingConditionsAndOperators()}}this.lastUiCompletePosition=t},i.prototype.updateConditionStatusesAndValues=function(e,t){var r=this;this.eTypes.forEach(function(a,s){var l=r.isConditionDisabled(s,e);a.setDisabled(l||r.filterListOptions.length<=1),s===1&&(ra(r.eJoinOperatorPanels[0],l),r.eJoinOperatorsAnd[0].setDisabled(l),r.eJoinOperatorsOr[0].setDisabled(l))}),this.eConditionBodies.forEach(function(a,s){Yt(a,r.isConditionBodyVisible(s))});var o=(t??this.getJoinOperator())==="OR";this.eJoinOperatorsAnd.forEach(function(a,s){a.setValue(!o,!0)}),this.eJoinOperatorsOr.forEach(function(a,s){a.setValue(o,!0)}),this.forEachInput(function(a,s,l,u){r.setElementDisplayed(a,s<u),r.setElementDisabled(a,r.isConditionDisabled(l,e))}),this.resetPlaceholder()},i.prototype.shouldAddNewConditionAtEnd=function(e){return e&&this.getNumConditions()<this.maxNumConditions&&!this.isReadOnly()},i.prototype.removeConditionsAndOperators=function(e,t){if(!(e>=this.getNumConditions())){this.removeComponents(this.eTypes,e,t),this.removeElements(this.eConditionBodies,e,t),this.removeValueElements(e,t);var r=Math.max(e-1,0);this.removeElements(this.eJoinOperatorPanels,r,t),this.removeComponents(this.eJoinOperatorsAnd,r,t),this.removeComponents(this.eJoinOperatorsOr,r,t)}},i.prototype.removeElements=function(e,t,r){var o=this.removeItems(e,t,r);o.forEach(function(a){return wo(a)})},i.prototype.removeComponents=function(e,t,r){var o=this,a=this.removeItems(e,t,r);a.forEach(function(s){wo(s.getGui()),o.destroyBean(s)})},i.prototype.removeItems=function(e,t,r){return r==null?e.splice(t):e.splice(t,r)},i.prototype.afterGuiAttached=function(e){if(n.prototype.afterGuiAttached.call(this,e),this.resetPlaceholder(),!e?.suppressFocus)if(this.isReadOnly())this.eFilterBody.focus();else{var t=this.getInputs(0)[0];if(!t)return;t instanceof Qo&&t.getInputElement().focus()}},i.prototype.afterGuiDetached=function(){n.prototype.afterGuiDetached.call(this);var e=this.getModel();(!this.areModelsEqual(e,this.getModelFromUi())||this.hasInvalidInputs())&&this.resetUiToActiveModel(e);for(var t=-1,r=-1,o=!1,a=this.getJoinOperator(),s=this.getNumConditions()-1;s>=0;s--)if(this.isConditionUiComplete(s))t===-1&&(t=s,r=s);else{var l=s>=this.numAlwaysVisibleConditions&&!this.isConditionUiComplete(s-1),u=s<t;(l||u)&&(this.removeConditionsAndOperators(s,1),o=!0,u&&r--)}var c=!1;this.getNumConditions()<this.numAlwaysVisibleConditions&&(this.createMissingConditionsAndOperators(),c=!0),this.shouldAddNewConditionAtEnd(r===this.getNumConditions()-1)&&(this.createJoinOperatorPanel(),this.createOption(),c=!0),c&&this.updateConditionStatusesAndValues(r,a),o&&this.updateJoinOperatorsDisabled(),this.lastUiCompletePosition=r},i.prototype.getPlaceholderText=function(e,t){var r=this.translate(e);if(kl(this.filterPlaceholder)){var o=this.filterPlaceholder,a=this.eTypes[t].getValue(),s=this.translate(a);r=o({filterOptionKey:a,filterOption:s,placeholder:r})}else typeof this.filterPlaceholder=="string"&&(r=this.filterPlaceholder);return r},i.prototype.resetPlaceholder=function(){var e=this,t=this.localeService.getLocaleTextFunc();this.forEachInput(function(r,o,a,s){if(r instanceof Qo){var l=o===0&&s>1?"inRangeStart":o===0?"filterOoo":"inRangeEnd",u=o===0&&s>1?t("ariaFilterFromValue","Filter from value"):o===0?t("ariaFilterValue","Filter Value"):t("ariaFilterToValue","Filter to Value");r.setInputPlaceholder(e.getPlaceholderText(l,a)),r.setInputAriaLabel(u)}})},i.prototype.setElementValue=function(e,t,r){e instanceof Qo&&e.setValue(t!=null?String(t):null,!0)},i.prototype.setElementDisplayed=function(e,t){e instanceof xt&&Yt(e.getGui(),t)},i.prototype.setElementDisabled=function(e,t){e instanceof xt&&ra(e.getGui(),t)},i.prototype.attachElementOnChange=function(e,t){e instanceof Qo&&e.onValueChange(t)},i.prototype.forEachInput=function(e){var t=this;this.getConditionTypes().forEach(function(r,o){t.forEachPositionTypeInput(o,r,e)})},i.prototype.forEachPositionInput=function(e,t){var r=this.getConditionType(e);this.forEachPositionTypeInput(e,r,t)},i.prototype.forEachPositionTypeInput=function(e,t,r){for(var o=this.getNumberOfInputs(t),a=this.getInputs(e),s=0;s<a.length;s++){var l=a[s];l!=null&&r(l,s,e,o)}},i.prototype.isConditionDisabled=function(e,t){return this.isReadOnly()?!0:e===0?!1:e>t+1},i.prototype.isConditionBodyVisible=function(e){var t=this.getConditionType(e),r=this.getNumberOfInputs(t);return r>0},i.prototype.isConditionUiComplete=function(e){if(e>=this.getNumConditions())return!1;var t=this.getConditionType(e);return!(t===i.EMPTY||this.getValues(e).some(function(r){return r==null}))},i.prototype.getNumConditions=function(){return this.eTypes.length},i.prototype.getUiCompleteConditions=function(){for(var e=[],t=0;t<this.getNumConditions();t++)this.isConditionUiComplete(t)&&e.push(this.createCondition(t));return e},i.prototype.createMissingConditionsAndOperators=function(){if(!this.isReadOnly())for(var e=this.getNumConditions();e<this.numAlwaysVisibleConditions;e++)this.createJoinOperatorPanel(),this.createOption()},i.prototype.resetUiToDefaults=function(e){var t=this;return this.removeConditionsAndOperators(this.isReadOnly()?1:this.numAlwaysVisibleConditions),this.eTypes.forEach(function(r){return t.resetType(r)}),this.eJoinOperatorsAnd.forEach(function(r,o){return t.resetJoinOperatorAnd(r,o,t.joinOperatorId+o)}),this.eJoinOperatorsOr.forEach(function(r,o){return t.resetJoinOperatorOr(r,o,t.joinOperatorId+o)}),this.joinOperatorId++,this.forEachInput(function(r){return t.resetInput(r)}),this.resetPlaceholder(),this.createMissingConditionsAndOperators(),this.lastUiCompletePosition=null,e||this.onUiChanged(),jr.resolve()},i.prototype.resetType=function(e){var t=this.localeService.getLocaleTextFunc(),r=t("ariaFilteringOperator","Filtering operator");e.setValue(this.optionsFactory.getDefaultOption(),!0).setAriaLabel(r).setDisabled(this.isReadOnly()||this.filterListOptions.length<=1)},i.prototype.resetJoinOperatorAnd=function(e,t,r){this.resetJoinOperator(e,t,this.isDefaultOperator("AND"),this.translate("andCondition"),r)},i.prototype.resetJoinOperatorOr=function(e,t,r){this.resetJoinOperator(e,t,this.isDefaultOperator("OR"),this.translate("orCondition"),r)},i.prototype.resetJoinOperator=function(e,t,r,o,a){this.updateJoinOperatorDisabled(e.setValue(r,!0).setName("ag-simple-filter-and-or-"+this.getCompId()+"-"+a).setLabel(o),t)},i.prototype.updateJoinOperatorsDisabled=function(){var e=this;this.eJoinOperatorsAnd.forEach(function(t,r){return e.updateJoinOperatorDisabled(t,r)}),this.eJoinOperatorsOr.forEach(function(t,r){return e.updateJoinOperatorDisabled(t,r)})},i.prototype.updateJoinOperatorDisabled=function(e,t){e.setDisabled(this.isReadOnly()||t>0)},i.prototype.resetInput=function(e){this.setElementValue(e,null),this.setElementDisabled(e,this.isReadOnly())},i.prototype.setConditionIntoUi=function(e,t){var r=this,o=this.mapValuesFromModel(e);this.forEachInput(function(a,s,l,u){l===t&&r.setElementValue(a,o[s]!=null?o[s]:null)})},i.prototype.setValueFromFloatingFilter=function(e){var t=this;this.forEachInput(function(r,o,a,s){t.setElementValue(r,o===0&&a===0?e:null,!0)})},i.prototype.isDefaultOperator=function(e){return e===this.defaultJoinOperator},i.prototype.addChangedListeners=function(e,t){var r=this;this.isReadOnly()||(e.onValueChange(this.listener),this.forEachPositionInput(t,function(o){r.attachElementOnChange(o,r.listener)}))},i.prototype.individualConditionPasses=function(e,t){var r=this.getCellValue(e.node),o=this.mapValuesFromModel(t),a=this.optionsFactory.getCustomOption(t.type),s=this.evaluateCustomFilter(a,o,r);return s??(r==null?this.evaluateNullValue(t.type):this.evaluateNonNullValue(o,r,t,e))},i.prototype.evaluateCustomFilter=function(e,t,r){if(e!=null){var o=e.predicate;if(o!=null&&!t.some(function(a){return a==null}))return o(t,r)}},i.prototype.isBlank=function(e){return e==null||typeof e=="string"&&e.trim().length===0},i.prototype.hasInvalidInputs=function(){return!1},i.EMPTY="empty",i.BLANK="blank",i.NOT_BLANK="notBlank",i.EQUALS="equals",i.NOT_EQUAL="notEqual",i.LESS_THAN="lessThan",i.LESS_THAN_OR_EQUAL="lessThanOrEqual",i.GREATER_THAN="greaterThan",i.GREATER_THAN_OR_EQUAL="greaterThanOrEqual",i.IN_RANGE="inRange",i.CONTAINS="contains",i.NOT_CONTAINS="notContains",i.STARTS_WITH="startsWith",i.ENDS_WITH="endsWith",i}(Cl),fS=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),ji=function(n){fS(i,n);function i(){return n!==null&&n.apply(this,arguments)||this}return i.prototype.setParams=function(e){n.prototype.setParams.call(this,e),this.scalarFilterParams=e},i.prototype.evaluateNullValue=function(e){switch(e){case i.EQUALS:case i.NOT_EQUAL:if(this.scalarFilterParams.includeBlanksInEquals)return!0;break;case i.GREATER_THAN:case i.GREATER_THAN_OR_EQUAL:if(this.scalarFilterParams.includeBlanksInGreaterThan)return!0;break;case i.LESS_THAN:case i.LESS_THAN_OR_EQUAL:if(this.scalarFilterParams.includeBlanksInLessThan)return!0;break;case i.IN_RANGE:if(this.scalarFilterParams.includeBlanksInRange)return!0;break;case i.BLANK:return!0;case i.NOT_BLANK:return!1}return!1},i.prototype.evaluateNonNullValue=function(e,t,r){var o=this.comparator(),a=e[0]!=null?o(e[0],t):0;switch(r.type){case i.EQUALS:return a===0;case i.NOT_EQUAL:return a!==0;case i.GREATER_THAN:return a>0;case i.GREATER_THAN_OR_EQUAL:return a>=0;case i.LESS_THAN:return a<0;case i.LESS_THAN_OR_EQUAL:return a<=0;case i.IN_RANGE:{var s=o(e[1],t);return this.scalarFilterParams.inRangeInclusive?a>=0&&s<=0:a>0&&s<0}case i.BLANK:return this.isBlank(t);case i.NOT_BLANK:return!this.isBlank(t);default:return console.warn('AG Grid: Unexpected type of filter "'+r.type+'", it looks like the filter was configured with incorrect Filter Options'),!0}},i}(wi),_v=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Wc=function(){return Wc=Object.assign||function(n){for(var i,e=1,t=arguments.length;e<t;e++){i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(n[r]=i[r])}return n},Wc.apply(this,arguments)},hS=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},Gp=1e3,Vp=1/0,bv=function(n){_v(i,n);function i(e,t,r){var o=n.call(this,t,r)||this;return o.dateFilterParams=e,o}return i.prototype.conditionToString=function(e,t){var r=e.type,o=(t||{}).numberOfInputs,a=r==wi.IN_RANGE||o===2,s=pr(e.dateFrom),l=pr(e.dateTo),u=this.dateFilterParams.inRangeFloatingFilterDateFormat;if(a){var c=s!==null?$n(s,u):"null",d=l!==null?$n(l,u):"null";return c+"-"+d}return s!=null?$n(s,u):""+r},i.prototype.updateParams=function(e){n.prototype.updateParams.call(this,e),this.dateFilterParams=e.dateFilterParams},i}(bd),Dv=function(n){_v(i,n);function i(){var e=n.call(this,"dateFilter")||this;return e.eConditionPanelsFrom=[],e.eConditionPanelsTo=[],e.dateConditionFromComps=[],e.dateConditionToComps=[],e.minValidYear=Gp,e.maxValidYear=Vp,e.minValidDate=null,e.maxValidDate=null,e}return i.prototype.afterGuiAttached=function(e){n.prototype.afterGuiAttached.call(this,e),this.dateConditionFromComps[0].afterGuiAttached(e)},i.prototype.mapValuesFromModel=function(e){var t=e||{},r=t.dateFrom,o=t.dateTo,a=t.type;return[r&&pr(r)||null,o&&pr(o)||null].slice(0,this.getNumberOfInputs(a))},i.prototype.comparator=function(){return this.dateFilterParams.comparator?this.dateFilterParams.comparator:this.defaultComparator.bind(this)},i.prototype.defaultComparator=function(e,t){var r=t;return t==null||r<e?-1:r>e?1:0},i.prototype.setParams=function(e){this.dateFilterParams=e,n.prototype.setParams.call(this,e);var t=function(r,o){if(e[r]!=null)if(isNaN(e[r]))console.warn("AG Grid: DateFilter "+r+" is not a number");else return e[r]==null?o:Number(e[r]);return o};this.minValidYear=t("minValidYear",Gp),this.maxValidYear=t("maxValidYear",Vp),this.minValidYear>this.maxValidYear&&console.warn("AG Grid: DateFilter minValidYear should be <= maxValidYear"),e.minValidDate?this.minValidDate=e.minValidDate instanceof Date?e.minValidDate:pr(e.minValidDate):this.minValidDate=null,e.maxValidDate?this.maxValidDate=e.maxValidDate instanceof Date?e.maxValidDate:pr(e.maxValidDate):this.maxValidDate=null,this.minValidDate&&this.maxValidDate&&this.minValidDate>this.maxValidDate&&console.warn("AG Grid: DateFilter minValidDate should be <= maxValidDate"),this.filterModelFormatter=new bv(this.dateFilterParams,this.localeService,this.optionsFactory)},i.prototype.createDateCompWrapper=function(e){var t=this,r=new yv(this.getContext(),this.userComponentFactory,{onDateChanged:function(){return t.onUiChanged()},filterParams:this.dateFilterParams},e);return this.addDestroyFunc(function(){return r.destroy()}),r},i.prototype.setElementValue=function(e,t){e.setDate(t)},i.prototype.setElementDisplayed=function(e,t){e.setDisplayed(t)},i.prototype.setElementDisabled=function(e,t){e.setDisabled(t)},i.prototype.getDefaultFilterOptions=function(){return i.DEFAULT_FILTER_OPTIONS},i.prototype.createValueElement=function(){var e=document.createElement("div");return e.classList.add("ag-filter-body"),this.createFromToElement(e,this.eConditionPanelsFrom,this.dateConditionFromComps,"from"),this.createFromToElement(e,this.eConditionPanelsTo,this.dateConditionToComps,"to"),e},i.prototype.createFromToElement=function(e,t,r,o){var a=document.createElement("div");a.classList.add("ag-filter-"+o),a.classList.add("ag-filter-date-"+o),t.push(a),e.appendChild(a),r.push(this.createDateCompWrapper(a))},i.prototype.removeValueElements=function(e,t){this.removeDateComps(this.dateConditionFromComps,e,t),this.removeDateComps(this.dateConditionToComps,e,t),this.removeItems(this.eConditionPanelsFrom,e,t),this.removeItems(this.eConditionPanelsTo,e,t)},i.prototype.removeDateComps=function(e,t,r){var o=this.removeItems(e,t,r);o.forEach(function(a){return a.destroy()})},i.prototype.isValidDateValue=function(e){if(e===null)return!1;if(this.minValidDate){if(e<this.minValidDate)return!1}else if(e.getUTCFullYear()<this.minValidYear)return!1;if(this.maxValidDate){if(e>this.maxValidDate)return!1}else if(e.getUTCFullYear()>this.maxValidYear)return!1;return!0},i.prototype.isConditionUiComplete=function(e){var t=this;if(!n.prototype.isConditionUiComplete.call(this,e))return!1;var r=!0;return this.forEachInput(function(o,a,s,l){s!==e||!r||a>=l||(r=r&&t.isValidDateValue(o.getDate()))}),r},i.prototype.areSimpleModelsEqual=function(e,t){return e.dateFrom===t.dateFrom&&e.dateTo===t.dateTo&&e.type===t.type},i.prototype.getFilterType=function(){return"date"},i.prototype.createCondition=function(e){var t=this.getConditionType(e),r={},o=this.getValues(e);return o.length>0&&(r.dateFrom=Mr(o[0])),o.length>1&&(r.dateTo=Mr(o[1])),Wc({dateFrom:null,dateTo:null,filterType:this.getFilterType(),type:t},r)},i.prototype.resetPlaceholder=function(){var e=this.localeService.getLocaleTextFunc(),t=this.translate("dateFormatOoo"),r=e("ariaFilterValue","Filter Value");this.forEachInput(function(o){o.setInputPlaceholder(t),o.setInputAriaLabel(r)})},i.prototype.getInputs=function(e){return e>=this.dateConditionFromComps.length?[null,null]:[this.dateConditionFromComps[e],this.dateConditionToComps[e]]},i.prototype.getValues=function(e){var t=[];return this.forEachPositionInput(e,function(r,o,a,s){o<s&&t.push(r.getDate())}),t},i.prototype.getModelAsString=function(e){var t;return(t=this.filterModelFormatter.getModelAsString(e))!==null&&t!==void 0?t:""},i.DEFAULT_FILTER_OPTIONS=[ji.EQUALS,ji.GREATER_THAN,ji.LESS_THAN,ji.NOT_EQUAL,ji.IN_RANGE,ji.BLANK,ji.NOT_BLANK],hS([T("userComponentFactory")],i.prototype,"userComponentFactory",void 0),i}(ji),vS=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Rv=function(n){vS(i,n);function i(){return n!==null&&n.apply(this,arguments)||this}return i.prototype.getDefaultDebounceMs=function(){return 0},i.prototype.destroy=function(){n.prototype.destroy.call(this)},i.prototype.isEventFromFloatingFilter=function(e){return e&&e.afterFloatingFilter},i.prototype.isEventFromDataChange=function(e){return e?.afterDataChange},i.prototype.getLastType=function(){return this.lastType},i.prototype.isReadOnly=function(){return this.readOnly},i.prototype.setLastTypeFromModel=function(e){if(!e){this.lastType=this.optionsFactory.getDefaultOption();return}var t=e.operator,r;if(t){var o=e;r=o.conditions[0]}else r=e;this.lastType=r.type},i.prototype.canWeEditAfterModelFromParentFilter=function(e){if(!e)return this.isTypeEditable(this.lastType);var t=e.operator;if(t)return!1;var r=e;return this.isTypeEditable(r.type)},i.prototype.init=function(e){this.setSimpleParams(e)},i.prototype.setSimpleParams=function(e){this.optionsFactory=new mv,this.optionsFactory.init(e.filterParams,this.getDefaultFilterOptions()),this.lastType=this.optionsFactory.getDefaultOption(),this.readOnly=!!e.filterParams.readOnly;var t=this.isTypeEditable(this.lastType);this.setEditable(t)},i.prototype.onParamsUpdated=function(e){this.setSimpleParams(e)},i.prototype.doesFilterHaveSingleInput=function(e){var t=this.optionsFactory.getCustomOption(e),r=(t||{}).numberOfInputs;return r==null||r==1},i.prototype.isTypeEditable=function(e){var t=[wi.IN_RANGE,wi.EMPTY,wi.BLANK,wi.NOT_BLANK];return!!e&&!this.isReadOnly()&&this.doesFilterHaveSingleInput(e)&&t.indexOf(e)<0},i}(xt),gS=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Fu=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},yS=function(n){gS(i,n);function i(){return n.call(this,`
            <div class="ag-floating-filter-input" role="presentation">
                <ag-input-text-field ref="eReadOnlyText"></ag-input-text-field>
                <div ref="eDateWrapper" style="display: flex;"></div>
            </div>`)||this}return i.prototype.getDefaultFilterOptions=function(){return Dv.DEFAULT_FILTER_OPTIONS},i.prototype.init=function(e){n.prototype.init.call(this,e),this.params=e,this.filterParams=e.filterParams,this.createDateComponent(),this.filterModelFormatter=new bv(this.filterParams,this.localeService,this.optionsFactory);var t=this.localeService.getLocaleTextFunc();this.eReadOnlyText.setDisabled(!0).setInputAriaLabel(t("ariaDateFilterInput","Date Filter Input"))},i.prototype.onParamsUpdated=function(e){n.prototype.onParamsUpdated.call(this,e),this.params=e,this.filterParams=e.filterParams,this.updateDateComponent(),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory,dateFilterParams:this.filterParams})},i.prototype.setEditable=function(e){Yt(this.eDateWrapper,e),Yt(this.eReadOnlyText.getGui(),!e)},i.prototype.onParentModelChanged=function(e,t){if(!(this.isEventFromFloatingFilter(t)||this.isEventFromDataChange(t))){n.prototype.setLastTypeFromModel.call(this,e);var r=!this.isReadOnly()&&this.canWeEditAfterModelFromParentFilter(e);if(this.setEditable(r),r){if(e){var o=e;this.dateComp.setDate(pr(o.dateFrom))}else this.dateComp.setDate(null);this.eReadOnlyText.setValue("")}else this.eReadOnlyText.setValue(this.filterModelFormatter.getModelAsString(e)),this.dateComp.setDate(null)}},i.prototype.onDateChanged=function(){var e=this,t=this.dateComp.getDate(),r=Mr(t);this.params.parentFilterInstance(function(o){if(o){var a=pr(r);o.onFloatingFilterChanged(e.getLastType()||null,a)}})},i.prototype.getDateComponentParams=function(){var e=Cl.getDebounceMs(this.params.filterParams,this.getDefaultDebounceMs());return{onDateChanged:zr(this.onDateChanged.bind(this),e),filterParams:this.params.column.getColDef().filterParams}},i.prototype.createDateComponent=function(){var e=this;this.dateComp=new yv(this.getContext(),this.userComponentFactory,this.getDateComponentParams(),this.eDateWrapper),this.addDestroyFunc(function(){return e.dateComp.destroy()})},i.prototype.updateDateComponent=function(){var e=this.getDateComponentParams(),t=this.gridOptionsService,r=t.api,o=t.columnApi,a=t.context;e.api=r,e.columnApi=o,e.context=a,this.dateComp.updateParams(e)},i.prototype.getFilterModelFormatter=function(){return this.filterModelFormatter},Fu([T("userComponentFactory")],i.prototype,"userComponentFactory",void 0),Fu([be("eReadOnlyText")],i.prototype,"eReadOnlyText",void 0),Fu([be("eDateWrapper")],i.prototype,"eDateWrapper",void 0),i}(Rv),mS=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),CS=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},SS=function(n,i){var e=typeof Symbol=="function"&&n[Symbol.iterator];if(!e)return n;var t=e.call(n),r,o=[],a;try{for(;(i===void 0||i-- >0)&&!(r=t.next()).done;)o.push(r.value)}catch(s){a={error:s}}finally{try{r&&!r.done&&(e=t.return)&&e.call(t)}finally{if(a)throw a.error}}return o},wS=function(n){mS(i,n);function i(){return n.call(this,`
            <div class="ag-filter-filter">
                <ag-input-text-field class="ag-date-filter" ref="eDateInput"></ag-input-text-field>
            </div>`)||this}return i.prototype.destroy=function(){n.prototype.destroy.call(this)},i.prototype.init=function(e){var t=this;this.params=e,this.setParams(e);var r=this.gridOptionsService.getDocument(),o=this.eDateInput.getInputElement();this.addManagedListener(o,"mousedown",function(){t.eDateInput.isDisabled()||t.usingSafariDatePicker||o.focus()}),this.addManagedListener(o,"input",function(a){a.target===r.activeElement&&(t.eDateInput.isDisabled()||t.params.onDateChanged())})},i.prototype.setParams=function(e){var t=this.eDateInput.getInputElement(),r=this.shouldUseBrowserDatePicker(e);this.usingSafariDatePicker=r&&Fr(),t.type=r?"date":"text";var o=e.filterParams||{},a=o.minValidYear,s=o.maxValidYear,l=o.minValidDate,u=o.maxValidDate;if(l&&a&&Ut(function(){return console.warn("AG Grid: DateFilter should not have both minValidDate and minValidYear parameters set at the same time! minValidYear will be ignored.")},"DateFilter.minValidDateAndMinValidYearWarning"),u&&s&&Ut(function(){return console.warn("AG Grid: DateFilter should not have both maxValidDate and maxValidYear parameters set at the same time! maxValidYear will be ignored.")},"DateFilter.maxValidDateAndMaxValidYearWarning"),l&&u){var c=SS([l,u].map(function(y){return y instanceof Date?y:pr(y)}),2),d=c[0],f=c[1];d&&f&&d.getTime()>f.getTime()&&Ut(function(){return console.warn("AG Grid: DateFilter parameter minValidDate should always be lower than or equal to parameter maxValidDate.")},"DateFilter.minValidDateAndMaxValidDateWarning")}l?l instanceof Date?t.min=$n(l):t.min=l:a&&(t.min=a+"-01-01"),u?u instanceof Date?t.max=$n(u):t.max=u:s&&(t.max=s+"-12-31")},i.prototype.onParamsUpdated=function(e){this.params=e,this.setParams(e)},i.prototype.getDate=function(){return pr(this.eDateInput.getValue())},i.prototype.setDate=function(e){this.eDateInput.setValue(Mr(e,!1))},i.prototype.setInputPlaceholder=function(e){this.eDateInput.setInputPlaceholder(e)},i.prototype.setDisabled=function(e){this.eDateInput.setDisabled(e)},i.prototype.afterGuiAttached=function(e){(!e||!e.suppressFocus)&&this.eDateInput.getInputElement().focus()},i.prototype.shouldUseBrowserDatePicker=function(e){return e.filterParams&&e.filterParams.browserDatePicker!=null?e.filterParams.browserDatePicker:Hl()||dd()||Fr()&&cd()>=14.1},CS([be("eDateInput")],i.prototype,"eDateInput",void 0),i}(xt),TS=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Rn=function(n){TS(i,n);function i(e,t,r){return t===void 0&&(t="ag-text-field"),r===void 0&&(r="text"),n.call(this,e,t,r)||this}return i.prototype.postConstruct=function(){n.prototype.postConstruct.call(this),this.config.allowedCharPattern&&this.preventDisallowedCharacters()},i.prototype.setValue=function(e,t){return this.eInput.value!==e&&(this.eInput.value=ue(e)?e:""),n.prototype.setValue.call(this,e,t)},i.prototype.setStartValue=function(e){this.setValue(e,!0)},i.prototype.preventDisallowedCharacters=function(){var e=new RegExp("["+this.config.allowedCharPattern+"]"),t=function(r){zl(r)&&r.key&&!e.test(r.key)&&r.preventDefault()};this.addManagedListener(this.eInput,"keydown",t),this.addManagedListener(this.eInput,"paste",function(r){var o,a=(o=r.clipboardData)===null||o===void 0?void 0:o.getData("text");a&&a.split("").some(function(s){return!e.test(s)})&&r.preventDefault()})},i}(Qo),OS=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Dd=function(n){OS(i,n);function i(e){return n.call(this,e,"ag-number-field","number")||this}return i.prototype.postConstruct=function(){var e=this;n.prototype.postConstruct.call(this),this.addManagedListener(this.eInput,"blur",function(){var t=parseFloat(e.eInput.value),r=isNaN(t)?"":e.normalizeValue(t.toString());e.value!==r&&e.setValue(r)}),this.addManagedListener(this.eInput,"wheel",this.onWheel.bind(this)),this.eInput.step="any"},i.prototype.onWheel=function(e){document.activeElement===this.eInput&&e.preventDefault()},i.prototype.normalizeValue=function(e){if(e==="")return"";this.precision!=null&&(e=this.adjustPrecision(e));var t=parseFloat(e);return this.min!=null&&t<this.min?e=this.min.toString():this.max!=null&&t>this.max&&(e=this.max.toString()),e},i.prototype.adjustPrecision=function(e,t){if(this.precision==null)return e;if(t){var r=parseFloat(e).toFixed(this.precision);return parseFloat(r).toString()}var o=String(e).split(".");if(o.length>1){if(o[1].length<=this.precision)return e;if(this.precision>0)return o[0]+"."+o[1].slice(0,this.precision)}return o[0]},i.prototype.setMin=function(e){return this.min===e?this:(this.min=e,so(this.eInput,"min",e),this)},i.prototype.setMax=function(e){return this.max===e?this:(this.max=e,so(this.eInput,"max",e),this)},i.prototype.setPrecision=function(e){return this.precision=e,this},i.prototype.setStep=function(e){return this.step===e?this:(this.step=e,so(this.eInput,"step",e),this)},i.prototype.setValue=function(e,t){var r=this;return this.setValueOrInputValue(function(o){return n.prototype.setValue.call(r,o,t)},function(){return r},e)},i.prototype.setStartValue=function(e){var t=this;return this.setValueOrInputValue(function(r){return n.prototype.setValue.call(t,r,!0)},function(r){t.eInput.value=r},e)},i.prototype.setValueOrInputValue=function(e,t,r){if(ue(r)){var o=this.isScientificNotation(r);if(o&&this.eInput.validity.valid)return e(r);if(!o){r=this.adjustPrecision(r);var a=this.normalizeValue(r);o=r!=a}if(o)return t(r)}return e(r)},i.prototype.getValue=function(){if(this.eInput.validity.valid){var e=this.eInput.value;return this.isScientificNotation(e)?this.adjustPrecision(e,!0):n.prototype.getValue.call(this)}},i.prototype.isScientificNotation=function(e){return typeof e=="string"&&e.includes("e")},i}(Rn),xv=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Av=function(n){xv(i,n);function i(){return n!==null&&n.apply(this,arguments)||this}return i.prototype.conditionToString=function(e,t){var r=(t||{}).numberOfInputs,o=e.type==wi.IN_RANGE||r===2;return o?this.formatValue(e.filter)+"-"+this.formatValue(e.filterTo):e.filter!=null?this.formatValue(e.filter):""+e.type},i}(bd);function Uc(n){var i=(n??{}).allowedCharPattern;return i??null}var Lv=function(n){xv(i,n);function i(){var e=n.call(this,"numberFilter")||this;return e.eValuesFrom=[],e.eValuesTo=[],e}return i.prototype.mapValuesFromModel=function(e){var t=e||{},r=t.filter,o=t.filterTo,a=t.type;return[this.processValue(r),this.processValue(o)].slice(0,this.getNumberOfInputs(a))},i.prototype.getDefaultDebounceMs=function(){return 500},i.prototype.comparator=function(){return function(e,t){return e===t?0:e<t?1:-1}},i.prototype.setParams=function(e){this.numberFilterParams=e,n.prototype.setParams.call(this,e),this.filterModelFormatter=new Av(this.localeService,this.optionsFactory,this.numberFilterParams.numberFormatter)},i.prototype.getDefaultFilterOptions=function(){return i.DEFAULT_FILTER_OPTIONS},i.prototype.setElementValue=function(e,t,r){var o=!r&&this.numberFilterParams.numberFormatter?this.numberFilterParams.numberFormatter(t??null):t;n.prototype.setElementValue.call(this,e,o)},i.prototype.createValueElement=function(){var e=Uc(this.numberFilterParams),t=document.createElement("div");return t.classList.add("ag-filter-body"),Wi(t,"presentation"),this.createFromToElement(t,this.eValuesFrom,"from",e),this.createFromToElement(t,this.eValuesTo,"to",e),t},i.prototype.createFromToElement=function(e,t,r,o){var a=this.createManagedBean(o?new Rn({allowedCharPattern:o}):new Dd);a.addCssClass("ag-filter-"+r),a.addCssClass("ag-filter-filter"),t.push(a),e.appendChild(a.getGui())},i.prototype.removeValueElements=function(e,t){this.removeComponents(this.eValuesFrom,e,t),this.removeComponents(this.eValuesTo,e,t)},i.prototype.getValues=function(e){var t=this,r=[];return this.forEachPositionInput(e,function(o,a,s,l){a<l&&r.push(t.processValue(t.stringToFloat(o.getValue())))}),r},i.prototype.areSimpleModelsEqual=function(e,t){return e.filter===t.filter&&e.filterTo===t.filterTo&&e.type===t.type},i.prototype.getFilterType=function(){return"number"},i.prototype.processValue=function(e){return e==null||isNaN(e)?null:e},i.prototype.stringToFloat=function(e){if(typeof e=="number")return e;var t=ao(e);return t!=null&&t.trim()===""&&(t=null),this.numberFilterParams.numberParser?this.numberFilterParams.numberParser(t):t==null||t.trim()==="-"?null:parseFloat(t)},i.prototype.createCondition=function(e){var t=this.getConditionType(e),r={filterType:this.getFilterType(),type:t},o=this.getValues(e);return o.length>0&&(r.filter=o[0]),o.length>1&&(r.filterTo=o[1]),r},i.prototype.getInputs=function(e){return e>=this.eValuesFrom.length?[null,null]:[this.eValuesFrom[e],this.eValuesTo[e]]},i.prototype.getModelAsString=function(e){var t;return(t=this.filterModelFormatter.getModelAsString(e))!==null&&t!==void 0?t:""},i.prototype.hasInvalidInputs=function(){var e=!1;return this.forEachInput(function(t){if(!t.getInputElement().validity.valid){e=!0;return}}),e},i.DEFAULT_FILTER_OPTIONS=[ji.EQUALS,ji.NOT_EQUAL,ji.LESS_THAN,ji.LESS_THAN_OR_EQUAL,ji.GREATER_THAN,ji.GREATER_THAN_OR_EQUAL,ji.IN_RANGE,ji.BLANK,ji.NOT_BLANK],i}(ji),Mv=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Sl=function(){return Sl=Object.assign||function(n){for(var i,e=1,t=arguments.length;e<t;e++){i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(n[r]=i[r])}return n},Sl.apply(this,arguments)},Nv=function(n){Mv(i,n);function i(){return n!==null&&n.apply(this,arguments)||this}return i.prototype.conditionToString=function(e,t){var r=(t||{}).numberOfInputs,o=e.type==wi.IN_RANGE||r===2;return o?e.filter+"-"+e.filterTo:e.filter!=null?""+e.filter:""+e.type},i}(bd),Rd=function(n){Mv(i,n);function i(){var e=n.call(this,"textFilter")||this;return e.eValuesFrom=[],e.eValuesTo=[],e}return i.trimInput=function(e){var t=e&&e.trim();return t===""?e:t},i.prototype.getDefaultDebounceMs=function(){return 500},i.prototype.setParams=function(e){this.textFilterParams=e,n.prototype.setParams.call(this,e),this.matcher=this.getTextMatcher(),this.formatter=this.textFilterParams.textFormatter||(this.textFilterParams.caseSensitive?i.DEFAULT_FORMATTER:i.DEFAULT_LOWERCASE_FORMATTER),this.filterModelFormatter=new Nv(this.localeService,this.optionsFactory)},i.prototype.getTextMatcher=function(){var e=this.textFilterParams.textCustomComparator;return e?(St.doOnce(function(){return console.warn("AG Grid - textCustomComparator is deprecated, use textMatcher instead.")},"textCustomComparator.deprecated"),function(t){var r=t.filterOption,o=t.value,a=t.filterText;return e(r,o,a)}):this.textFilterParams.textMatcher||i.DEFAULT_MATCHER},i.prototype.createCondition=function(e){var t=this.getConditionType(e),r={filterType:this.getFilterType(),type:t},o=this.getValuesWithSideEffects(e,!0);return o.length>0&&(r.filter=o[0]),o.length>1&&(r.filterTo=o[1]),r},i.prototype.getFilterType=function(){return"text"},i.prototype.areSimpleModelsEqual=function(e,t){return e.filter===t.filter&&e.filterTo===t.filterTo&&e.type===t.type},i.prototype.getInputs=function(e){return e>=this.eValuesFrom.length?[null,null]:[this.eValuesFrom[e],this.eValuesTo[e]]},i.prototype.getValues=function(e){return this.getValuesWithSideEffects(e,!1)},i.prototype.getValuesWithSideEffects=function(e,t){var r=this,o=[];return this.forEachPositionInput(e,function(a,s,l,u){var c;if(s<u){var d=ao(a.getValue());t&&r.textFilterParams.trimInput&&(d=(c=i.trimInput(d))!==null&&c!==void 0?c:null,a.setValue(d,!0)),o.push(d)}}),o},i.prototype.getDefaultFilterOptions=function(){return i.DEFAULT_FILTER_OPTIONS},i.prototype.createValueElement=function(){var e=document.createElement("div");return e.classList.add("ag-filter-body"),Wi(e,"presentation"),this.createFromToElement(e,this.eValuesFrom,"from"),this.createFromToElement(e,this.eValuesTo,"to"),e},i.prototype.createFromToElement=function(e,t,r){var o=this.createManagedBean(new Rn);o.addCssClass("ag-filter-"+r),o.addCssClass("ag-filter-filter"),t.push(o),e.appendChild(o.getGui())},i.prototype.removeValueElements=function(e,t){this.removeComponents(this.eValuesFrom,e,t),this.removeComponents(this.eValuesTo,e,t)},i.prototype.mapValuesFromModel=function(e){var t=e||{},r=t.filter,o=t.filterTo,a=t.type;return[r||null,o||null].slice(0,this.getNumberOfInputs(a))},i.prototype.evaluateNullValue=function(e){var t=[wi.NOT_EQUAL,wi.NOT_CONTAINS,wi.BLANK];return e?t.indexOf(e)>=0:!1},i.prototype.evaluateNonNullValue=function(e,t,r,o){var a=this,s=e.map(function(_){return a.formatter(_)})||[],l=this.formatter(t),u=this.textFilterParams,c=u.api,d=u.colDef,f=u.column,y=u.columnApi,S=u.context,w=u.textFormatter;if(r.type===wi.BLANK)return this.isBlank(t);if(r.type===wi.NOT_BLANK)return!this.isBlank(t);var E={api:c,colDef:d,column:f,columnApi:y,context:S,node:o.node,data:o.data,filterOption:r.type,value:l,textFormatter:w};return s.some(function(_){return a.matcher(Sl(Sl({},E),{filterText:_}))})},i.prototype.getModelAsString=function(e){var t;return(t=this.filterModelFormatter.getModelAsString(e))!==null&&t!==void 0?t:""},i.DEFAULT_FILTER_OPTIONS=[wi.CONTAINS,wi.NOT_CONTAINS,wi.EQUALS,wi.NOT_EQUAL,wi.STARTS_WITH,wi.ENDS_WITH,wi.BLANK,wi.NOT_BLANK],i.DEFAULT_FORMATTER=function(e){return e},i.DEFAULT_LOWERCASE_FORMATTER=function(e){return e==null?null:e.toString().toLowerCase()},i.DEFAULT_MATCHER=function(e){var t=e.filterOption,r=e.value,o=e.filterText;if(o==null)return!1;switch(t){case i.CONTAINS:return r.indexOf(o)>=0;case i.NOT_CONTAINS:return r.indexOf(o)<0;case i.EQUALS:return r===o;case i.NOT_EQUAL:return r!=o;case i.STARTS_WITH:return r.indexOf(o)===0;case i.ENDS_WITH:var a=r.lastIndexOf(o);return a>=0&&a===r.length-o.length;default:return!1}},i}(wi),Fv=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Iu=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},Iv=function(n){Fv(i,n);function i(e){var t=n.call(this)||this;return t.params=e,t.valueChangedListener=function(){},t}return i.prototype.setupGui=function(e){var t=this,r;this.eFloatingFilterTextInput=this.createManagedBean(new Rn((r=this.params)===null||r===void 0?void 0:r.config));var o=this.eFloatingFilterTextInput.getGui();e.appendChild(o),this.addManagedListener(o,"input",function(a){return t.valueChangedListener(a)}),this.addManagedListener(o,"keydown",function(a){return t.valueChangedListener(a)})},i.prototype.setEditable=function(e){this.eFloatingFilterTextInput.setDisabled(!e)},i.prototype.setAutoComplete=function(e){this.eFloatingFilterTextInput.setAutoComplete(e)},i.prototype.getValue=function(){return this.eFloatingFilterTextInput.getValue()},i.prototype.setValue=function(e,t){this.eFloatingFilterTextInput.setValue(e,t)},i.prototype.setValueChangedListener=function(e){this.valueChangedListener=e},i.prototype.setParams=function(e){this.setAriaLabel(e.ariaLabel),e.autoComplete!==void 0&&this.setAutoComplete(e.autoComplete)},i.prototype.setAriaLabel=function(e){this.eFloatingFilterTextInput.setInputAriaLabel(e)},i}(ve),kv=function(n){Fv(i,n);function i(){return n!==null&&n.apply(this,arguments)||this}return i.prototype.postConstruct=function(){this.setTemplate(`
            <div class="ag-floating-filter-input" role="presentation" ref="eFloatingFilterInputContainer"></div>
        `)},i.prototype.getDefaultDebounceMs=function(){return 500},i.prototype.onParentModelChanged=function(e,t){this.isEventFromFloatingFilter(t)||this.isEventFromDataChange(t)||(this.setLastTypeFromModel(e),this.setEditable(this.canWeEditAfterModelFromParentFilter(e)),this.floatingFilterInputService.setValue(this.getFilterModelFormatter().getModelAsString(e)))},i.prototype.init=function(e){this.setupFloatingFilterInputService(e),n.prototype.init.call(this,e),this.setTextInputParams(e)},i.prototype.setupFloatingFilterInputService=function(e){this.floatingFilterInputService=this.createFloatingFilterInputService(e),this.floatingFilterInputService.setupGui(this.eFloatingFilterInputContainer)},i.prototype.setTextInputParams=function(e){var t;this.params=e;var r=(t=e.browserAutoComplete)!==null&&t!==void 0?t:!1;if(this.floatingFilterInputService.setParams({ariaLabel:this.getAriaLabel(e),autoComplete:r}),this.applyActive=Cl.isUseApplyButton(this.params.filterParams),!this.isReadOnly()){var o=Cl.getDebounceMs(this.params.filterParams,this.getDefaultDebounceMs()),a=zr(this.syncUpWithParentFilter.bind(this),o);this.floatingFilterInputService.setValueChangedListener(a)}},i.prototype.onParamsUpdated=function(e){n.prototype.onParamsUpdated.call(this,e),this.setTextInputParams(e)},i.prototype.recreateFloatingFilterInputService=function(e){var t=this.floatingFilterInputService.getValue();tr(this.eFloatingFilterInputContainer),this.destroyBean(this.floatingFilterInputService),this.setupFloatingFilterInputService(e),this.floatingFilterInputService.setValue(t,!0)},i.prototype.getAriaLabel=function(e){var t=this.columnModel.getDisplayNameForColumn(e.column,"header",!0),r=this.localeService.getLocaleTextFunc();return t+" "+r("ariaFilterInput","Filter Input")},i.prototype.syncUpWithParentFilter=function(e){var t=this,r=e.key===J.ENTER;if(!(this.applyActive&&!r)){var o=this.floatingFilterInputService.getValue();this.params.filterParams.trimInput&&(o=Rd.trimInput(o),this.floatingFilterInputService.setValue(o,!0)),this.params.parentFilterInstance(function(a){a&&a.onFloatingFilterChanged(t.getLastType()||null,o||null)})}},i.prototype.setEditable=function(e){this.floatingFilterInputService.setEditable(e)},Iu([T("columnModel")],i.prototype,"columnModel",void 0),Iu([be("eFloatingFilterInputContainer")],i.prototype,"eFloatingFilterInputContainer",void 0),Iu([Oe],i.prototype,"postConstruct",null),i}(Rv),Gv=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),PS=function(n){Gv(i,n);function i(){var e=n!==null&&n.apply(this,arguments)||this;return e.valueChangedListener=function(){},e.numberInputActive=!0,e}return i.prototype.setupGui=function(e){var t=this;this.eFloatingFilterNumberInput=this.createManagedBean(new Dd),this.eFloatingFilterTextInput=this.createManagedBean(new Rn),this.eFloatingFilterTextInput.setDisabled(!0);var r=this.eFloatingFilterNumberInput.getGui(),o=this.eFloatingFilterTextInput.getGui();e.appendChild(r),e.appendChild(o),this.setupListeners(r,function(a){return t.valueChangedListener(a)}),this.setupListeners(o,function(a){return t.valueChangedListener(a)})},i.prototype.setEditable=function(e){this.numberInputActive=e,this.eFloatingFilterNumberInput.setDisplayed(this.numberInputActive),this.eFloatingFilterTextInput.setDisplayed(!this.numberInputActive)},i.prototype.setAutoComplete=function(e){this.eFloatingFilterNumberInput.setAutoComplete(e),this.eFloatingFilterTextInput.setAutoComplete(e)},i.prototype.getValue=function(){return this.getActiveInputElement().getValue()},i.prototype.setValue=function(e,t){this.getActiveInputElement().setValue(e,t)},i.prototype.getActiveInputElement=function(){return this.numberInputActive?this.eFloatingFilterNumberInput:this.eFloatingFilterTextInput},i.prototype.setValueChangedListener=function(e){this.valueChangedListener=e},i.prototype.setupListeners=function(e,t){this.addManagedListener(e,"input",t),this.addManagedListener(e,"keydown",t)},i.prototype.setParams=function(e){this.setAriaLabel(e.ariaLabel),e.autoComplete!==void 0&&this.setAutoComplete(e.autoComplete)},i.prototype.setAriaLabel=function(e){this.eFloatingFilterNumberInput.setInputAriaLabel(e),this.eFloatingFilterTextInput.setInputAriaLabel(e)},i}(ve),ES=function(n){Gv(i,n);function i(){return n!==null&&n.apply(this,arguments)||this}return i.prototype.init=function(e){var t;n.prototype.init.call(this,e),this.filterModelFormatter=new Av(this.localeService,this.optionsFactory,(t=e.filterParams)===null||t===void 0?void 0:t.numberFormatter)},i.prototype.onParamsUpdated=function(e){var t=Uc(e.filterParams);t!==this.allowedCharPattern&&this.recreateFloatingFilterInputService(e),n.prototype.onParamsUpdated.call(this,e),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory})},i.prototype.getDefaultFilterOptions=function(){return Lv.DEFAULT_FILTER_OPTIONS},i.prototype.getFilterModelFormatter=function(){return this.filterModelFormatter},i.prototype.createFloatingFilterInputService=function(e){return this.allowedCharPattern=Uc(e.filterParams),this.allowedCharPattern?this.createManagedBean(new Iv({config:{allowedCharPattern:this.allowedCharPattern}})):this.createManagedBean(new PS)},i}(kv),_S=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),bS=function(n){_S(i,n);function i(){return n!==null&&n.apply(this,arguments)||this}return i.prototype.init=function(e){n.prototype.init.call(this,e),this.filterModelFormatter=new Nv(this.localeService,this.optionsFactory)},i.prototype.onParamsUpdated=function(e){n.prototype.onParamsUpdated.call(this,e),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory})},i.prototype.getDefaultFilterOptions=function(){return Rd.DEFAULT_FILTER_OPTIONS},i.prototype.getFilterModelFormatter=function(){return this.filterModelFormatter},i.prototype.createFloatingFilterInputService=function(){return this.createManagedBean(new Iv)},i}(kv),wr=function(){function n(i,e){var t=this;e===void 0&&(e=!1),this.destroyFuncs=[],this.touching=!1,this.eventService=new Zo,this.eElement=i,this.preventMouseClick=e;var r=this.onTouchStart.bind(this),o=this.onTouchMove.bind(this),a=this.onTouchEnd.bind(this);this.eElement.addEventListener("touchstart",r,{passive:!0}),this.eElement.addEventListener("touchmove",o,{passive:!0}),this.eElement.addEventListener("touchend",a,{passive:!1}),this.destroyFuncs.push(function(){t.eElement.removeEventListener("touchstart",r,{passive:!0}),t.eElement.removeEventListener("touchmove",o,{passive:!0}),t.eElement.removeEventListener("touchend",a,{passive:!1})})}return n.prototype.getActiveTouch=function(i){for(var e=0;e<i.length;e++){var t=i[e].identifier===this.touchStart.identifier;if(t)return i[e]}return null},n.prototype.addEventListener=function(i,e){this.eventService.addEventListener(i,e)},n.prototype.removeEventListener=function(i,e){this.eventService.removeEventListener(i,e)},n.prototype.onTouchStart=function(i){var e=this;if(!this.touching){this.touchStart=i.touches[0],this.touching=!0,this.moved=!1;var t=this.touchStart;window.setTimeout(function(){var r=e.touchStart===t;if(e.touching&&r&&!e.moved){e.moved=!0;var o={type:n.EVENT_LONG_TAP,touchStart:e.touchStart,touchEvent:i};e.eventService.dispatchEvent(o)}},500)}},n.prototype.onTouchMove=function(i){if(this.touching){var e=this.getActiveTouch(i.touches);if(e){var t=!Od(e,this.touchStart,4);t&&(this.moved=!0)}}},n.prototype.onTouchEnd=function(i){if(this.touching){if(!this.moved){var e={type:n.EVENT_TAP,touchStart:this.touchStart};this.eventService.dispatchEvent(e),this.checkForDoubleTap()}this.preventMouseClick&&i.cancelable&&i.preventDefault(),this.touching=!1}},n.prototype.checkForDoubleTap=function(){var i=new Date().getTime();if(this.lastTapTime&&this.lastTapTime>0){var e=i-this.lastTapTime;if(e>n.DOUBLE_TAP_MILLIS){var t={type:n.EVENT_DOUBLE_TAP,touchStart:this.touchStart};this.eventService.dispatchEvent(t),this.lastTapTime=null}else this.lastTapTime=i}else this.lastTapTime=i},n.prototype.destroy=function(){this.destroyFuncs.forEach(function(i){return i()})},n.EVENT_TAP="tap",n.EVENT_DOUBLE_TAP="doubleTap",n.EVENT_LONG_TAP="longTap",n.DOUBLE_TAP_MILLIS=500,n}(),DS=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),fn=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},xd=function(n){DS(i,n);function i(e){var t=n.call(this)||this;return e||t.setTemplate(i.TEMPLATE),t}return i.prototype.attachCustomElements=function(e,t,r,o,a){this.eSortOrder=e,this.eSortAsc=t,this.eSortDesc=r,this.eSortMixed=o,this.eSortNone=a},i.prototype.setupSort=function(e,t){var r=this;t===void 0&&(t=!1),this.column=e,this.suppressOrder=t,this.setupMultiSortIndicator();var o=!!this.column.getColDef().sortable;o&&(this.addInIcon("sortAscending",this.eSortAsc,e),this.addInIcon("sortDescending",this.eSortDesc,e),this.addInIcon("sortUnSort",this.eSortNone,e),this.addManagedListener(this.eventService,b.EVENT_SORT_CHANGED,function(){return r.onSortChanged()}),this.addManagedListener(this.eventService,b.EVENT_COLUMN_ROW_GROUP_CHANGED,function(){return r.onSortChanged()}),this.onSortChanged())},i.prototype.addInIcon=function(e,t,r){if(t!=null){var o=Li(e,this.gridOptionsService,r);o&&t.appendChild(o)}},i.prototype.onSortChanged=function(){this.updateIcons(),this.suppressOrder||this.updateSortOrder()},i.prototype.updateIcons=function(){var e=this.sortController.getDisplaySortForColumn(this.column);if(this.eSortAsc){var t=e==="asc";Yt(this.eSortAsc,t,{skipAriaHidden:!0})}if(this.eSortDesc){var r=e==="desc";Yt(this.eSortDesc,r,{skipAriaHidden:!0})}if(this.eSortNone){var o=!this.column.getColDef().unSortIcon&&!this.gridOptionsService.is("unSortIcon"),a=e==null;Yt(this.eSortNone,!o&&a,{skipAriaHidden:!0})}},i.prototype.setupMultiSortIndicator=function(){var e=this;this.addInIcon("sortUnSort",this.eSortMixed,this.column);var t=this.column.getColDef().showRowGroup,r=this.gridOptionsService.isColumnsSortingCoupledToGroup();r&&t&&(this.addManagedListener(this.eventService,b.EVENT_SORT_CHANGED,function(){return e.updateMultiSortIndicator()}),this.addManagedListener(this.eventService,b.EVENT_COLUMN_ROW_GROUP_CHANGED,function(){return e.updateMultiSortIndicator()}),this.updateMultiSortIndicator())},i.prototype.updateMultiSortIndicator=function(){if(this.eSortMixed){var e=this.sortController.getDisplaySortForColumn(this.column)==="mixed";Yt(this.eSortMixed,e,{skipAriaHidden:!0})}},i.prototype.updateSortOrder=function(){var e=this,t;if(this.eSortOrder){var r=this.sortController.getColumnsWithSortingOrdered(),o=(t=this.sortController.getDisplaySortIndexForColumn(this.column))!==null&&t!==void 0?t:-1,a=r.some(function(l){var u;return(u=e.sortController.getDisplaySortIndexForColumn(l))!==null&&u!==void 0?u:-1>=1}),s=o>=0&&a;Yt(this.eSortOrder,s,{skipAriaHidden:!0}),o>=0?this.eSortOrder.innerHTML=(o+1).toString():tr(this.eSortOrder)}},i.TEMPLATE=`<span class="ag-sort-indicator-container">
            <span ref="eSortOrder" class="ag-sort-indicator-icon ag-sort-order ag-hidden" aria-hidden="true"></span>
            <span ref="eSortAsc" class="ag-sort-indicator-icon ag-sort-ascending-icon ag-hidden" aria-hidden="true"></span>
            <span ref="eSortDesc" class="ag-sort-indicator-icon ag-sort-descending-icon ag-hidden" aria-hidden="true"></span>
            <span ref="eSortMixed" class="ag-sort-indicator-icon ag-sort-mixed-icon ag-hidden" aria-hidden="true"></span>
            <span ref="eSortNone" class="ag-sort-indicator-icon ag-sort-none-icon ag-hidden" aria-hidden="true"></span>
        </span>`,fn([be("eSortOrder")],i.prototype,"eSortOrder",void 0),fn([be("eSortAsc")],i.prototype,"eSortAsc",void 0),fn([be("eSortDesc")],i.prototype,"eSortDesc",void 0),fn([be("eSortMixed")],i.prototype,"eSortMixed",void 0),fn([be("eSortNone")],i.prototype,"eSortNone",void 0),fn([T("columnModel")],i.prototype,"columnModel",void 0),fn([T("sortController")],i.prototype,"sortController",void 0),i}(xt),RS=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),hr=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},xS=function(n){RS(i,n);function i(){var e=n!==null&&n.apply(this,arguments)||this;return e.lastMovingChanged=0,e}return i.prototype.destroy=function(){n.prototype.destroy.call(this)},i.prototype.refresh=function(e){return this.params=e,this.workOutTemplate()!=this.currentTemplate||this.workOutShowMenu()!=this.currentShowMenu||this.workOutSort()!=this.currentSort?!1:(this.setDisplayName(e),!0)},i.prototype.workOutTemplate=function(){var e=Ph(this.params.template,i.TEMPLATE);return e=e&&e.trim?e.trim():e,e},i.prototype.init=function(e){this.params=e,this.currentTemplate=this.workOutTemplate(),this.setTemplate(this.currentTemplate),this.setupTap(),this.setupIcons(e.column),this.setMenu(),this.setupSort(),this.setupFilterIcon(),this.setDisplayName(e)},i.prototype.setDisplayName=function(e){if(this.currentDisplayName!=e.displayName){this.currentDisplayName=e.displayName;var t=Ii(this.currentDisplayName);this.eText&&(this.eText.innerHTML=t)}},i.prototype.setupIcons=function(e){this.addInIcon("menu",this.eMenu,e),this.addInIcon("filter",this.eFilter,e)},i.prototype.addInIcon=function(e,t,r){if(t!=null){var o=Li(e,this.gridOptionsService,r);o&&t.appendChild(o)}},i.prototype.setupTap=function(){var e=this,t=this.gridOptionsService;if(!t.is("suppressTouch")){var r=new wr(this.getGui(),!0),o=t.is("suppressMenuHide"),a=o&&ue(this.eMenu),s=a?new wr(this.eMenu,!0):r;if(this.params.enableMenu){var l=a?"EVENT_TAP":"EVENT_LONG_TAP",u=function(d){t.api.showColumnMenuAfterMouseClick(e.params.column,d.touchStart)};this.addManagedListener(s,wr[l],u)}if(this.params.enableSorting){var c=function(d){var f=d.touchStart.target;o&&e.eMenu.contains(f)||e.sortController.progressSort(e.params.column,!1,"uiColumnSorted")};this.addManagedListener(r,wr.EVENT_TAP,c)}this.addDestroyFunc(function(){return r.destroy()}),a&&this.addDestroyFunc(function(){return s.destroy()})}},i.prototype.workOutShowMenu=function(){var e=!this.gridOptionsService.is("suppressMenuHide"),t=$o()&&e,r=this.params.enableMenu&&!t;return r},i.prototype.setMenu=function(){var e=this;if(this.eMenu){if(this.currentShowMenu=this.workOutShowMenu(),!this.currentShowMenu){wo(this.eMenu);return}var t=this.gridOptionsService.is("suppressMenuHide");this.addManagedListener(this.eMenu,"click",function(){return e.showMenu(e.eMenu)}),this.eMenu.classList.toggle("ag-header-menu-always-show",t)}},i.prototype.showMenu=function(e){e||(e=this.eMenu),this.menuFactory.showMenuAfterButtonClick(this.params.column,e,"columnMenu")},i.prototype.workOutSort=function(){return this.params.enableSorting},i.prototype.setupSort=function(){var e=this;if(this.currentSort=this.params.enableSorting,this.eSortIndicator||(this.eSortIndicator=this.context.createBean(new xd(!0)),this.eSortIndicator.attachCustomElements(this.eSortOrder,this.eSortAsc,this.eSortDesc,this.eSortMixed,this.eSortNone)),this.eSortIndicator.setupSort(this.params.column),!!this.currentSort){var t=this.gridOptionsService.get("multiSortKey")==="ctrl";this.addManagedListener(this.params.column,li.EVENT_MOVING_CHANGED,function(){e.lastMovingChanged=new Date().getTime()}),this.eLabel&&this.addManagedListener(this.eLabel,"click",function(o){var a=e.params.column.isMoving(),s=new Date().getTime(),l=s-e.lastMovingChanged<50,u=a||l;if(!u){var c=t?o.ctrlKey||o.metaKey:o.shiftKey;e.params.progressSort(c)}});var r=function(){if(e.addOrRemoveCssClass("ag-header-cell-sorted-asc",e.params.column.isSortAscending()),e.addOrRemoveCssClass("ag-header-cell-sorted-desc",e.params.column.isSortDescending()),e.addOrRemoveCssClass("ag-header-cell-sorted-none",e.params.column.isSortNone()),e.params.column.getColDef().showRowGroup){var o=e.columnModel.getSourceColumnsForGroupColumn(e.params.column),a=o?.every(function(l){return e.params.column.getSort()==l.getSort()}),s=!a;e.addOrRemoveCssClass("ag-header-cell-sorted-mixed",s)}};this.addManagedListener(this.eventService,b.EVENT_SORT_CHANGED,r),this.addManagedListener(this.eventService,b.EVENT_COLUMN_ROW_GROUP_CHANGED,r)}},i.prototype.setupFilterIcon=function(){this.eFilter&&(this.addManagedListener(this.params.column,li.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this)),this.onFilterChanged())},i.prototype.onFilterChanged=function(){var e=this.params.column.isFilterActive();Yt(this.eFilter,e,{skipAriaHidden:!0})},i.TEMPLATE=`<div class="ag-cell-label-container" role="presentation">
            <span ref="eMenu" class="ag-header-icon ag-header-cell-menu-button" aria-hidden="true"></span>
            <div ref="eLabel" class="ag-header-cell-label" role="presentation">
                <span ref="eText" class="ag-header-cell-text"></span>
                <span ref="eFilter" class="ag-header-icon ag-header-label-icon ag-filter-icon" aria-hidden="true"></span>
                <ag-sort-indicator ref="eSortIndicator"></ag-sort-indicator>
            </div>
        </div>`,hr([T("sortController")],i.prototype,"sortController",void 0),hr([T("menuFactory")],i.prototype,"menuFactory",void 0),hr([T("columnModel")],i.prototype,"columnModel",void 0),hr([be("eFilter")],i.prototype,"eFilter",void 0),hr([be("eSortIndicator")],i.prototype,"eSortIndicator",void 0),hr([be("eMenu")],i.prototype,"eMenu",void 0),hr([be("eLabel")],i.prototype,"eLabel",void 0),hr([be("eText")],i.prototype,"eText",void 0),hr([be("eSortOrder")],i.prototype,"eSortOrder",void 0),hr([be("eSortAsc")],i.prototype,"eSortAsc",void 0),hr([be("eSortDesc")],i.prototype,"eSortDesc",void 0),hr([be("eSortMixed")],i.prototype,"eSortMixed",void 0),hr([be("eSortNone")],i.prototype,"eSortNone",void 0),i}(xt),AS=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),ku=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},LS=function(n){AS(i,n);function i(){return n.call(this,i.TEMPLATE)||this}return i.prototype.destroy=function(){n.prototype.destroy.call(this)},i.prototype.init=function(e){this.params=e,this.checkWarnings(),this.setupLabel(),this.addGroupExpandIcon(),this.setupExpandIcons()},i.prototype.checkWarnings=function(){var e=this.params;if(e.template){var t="AG Grid: A template was provided for Header Group Comp - templates are only supported for Header Comps (not groups)";Ut(function(){return console.warn(t)},"HeaderGroupComp.templateNotSupported")}},i.prototype.setupExpandIcons=function(){var e=this;this.addInIcon("columnGroupOpened","agOpened"),this.addInIcon("columnGroupClosed","agClosed");var t=function(a){if(!Kr(a)){var s=!e.params.columnGroup.isExpanded();e.columnModel.setColumnGroupOpened(e.params.columnGroup.getProvidedColumnGroup(),s,"uiColumnExpanded")}};this.addTouchAndClickListeners(this.eCloseIcon,t),this.addTouchAndClickListeners(this.eOpenIcon,t);var r=function(a){uo(a)};this.addManagedListener(this.eCloseIcon,"dblclick",r),this.addManagedListener(this.eOpenIcon,"dblclick",r),this.addManagedListener(this.getGui(),"dblclick",t),this.updateIconVisibility();var o=this.params.columnGroup.getProvidedColumnGroup();this.addManagedListener(o,xi.EVENT_EXPANDED_CHANGED,this.updateIconVisibility.bind(this)),this.addManagedListener(o,xi.EVENT_EXPANDABLE_CHANGED,this.updateIconVisibility.bind(this))},i.prototype.addTouchAndClickListeners=function(e,t){var r=new wr(e,!0);this.addManagedListener(r,wr.EVENT_TAP,t),this.addDestroyFunc(function(){return r.destroy()}),this.addManagedListener(e,"click",t)},i.prototype.updateIconVisibility=function(){var e=this.params.columnGroup;if(e.isExpandable()){var t=this.params.columnGroup.isExpanded();Yt(this.eOpenIcon,t),Yt(this.eCloseIcon,!t)}else Yt(this.eOpenIcon,!1),Yt(this.eCloseIcon,!1)},i.prototype.addInIcon=function(e,t){var r=Li(e,this.gridOptionsService,null);r&&this.getRefElement(t).appendChild(r)},i.prototype.addGroupExpandIcon=function(){if(!this.params.columnGroup.isExpandable()){Yt(this.eOpenIcon,!1),Yt(this.eCloseIcon,!1);return}},i.prototype.setupLabel=function(){var e,t=this.params,r=t.displayName,o=t.columnGroup;if(ue(r)){var a=Ii(r);this.getRefElement("agLabel").innerHTML=a}this.addOrRemoveCssClass("ag-sticky-label",!(!((e=o.getColGroupDef())===null||e===void 0)&&e.suppressStickyLabel))},i.TEMPLATE=`<div class="ag-header-group-cell-label" ref="agContainer" role="presentation">
            <span ref="agLabel" class="ag-header-group-text" role="presentation"></span>
            <span ref="agOpened" class="ag-header-icon ag-header-expand-icon ag-header-expand-icon-expanded"></span>
            <span ref="agClosed" class="ag-header-icon ag-header-expand-icon ag-header-expand-icon-collapsed"></span>
        </div>`,ku([T("columnModel")],i.prototype,"columnModel",void 0),ku([be("agOpened")],i.prototype,"eOpenIcon",void 0),ku([be("agClosed")],i.prototype,"eCloseIcon",void 0),i}(xt),MS=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),xn=function(n){MS(i,n);function i(){return n!==null&&n.apply(this,arguments)||this}return i.prototype.isPopup=function(){return!0},i.prototype.setParentComponent=function(e){e.addCssClass("ag-has-popup"),n.prototype.setParentComponent.call(this,e)},i.prototype.destroy=function(){var e=this.parentComponent,t=e&&e.isAlive();t&&e.getGui().classList.remove("ag-has-popup"),n.prototype.destroy.call(this)},i}(xt),NS=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),FS=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},IS=function(n){NS(i,n);function i(){return n.call(this,i.TEMPLATE)||this}return i.prototype.init=function(e){this.params=e,this.focusAfterAttached=e.cellStartedEdit,this.eTextArea.setMaxLength(e.maxLength||200).setCols(e.cols||60).setRows(e.rows||10),ue(e.value,!0)&&this.eTextArea.setValue(e.value.toString(),!0),this.addGuiEventListener("keydown",this.onKeyDown.bind(this)),this.activateTabIndex()},i.prototype.onKeyDown=function(e){var t=e.key;(t===J.LEFT||t===J.UP||t===J.RIGHT||t===J.DOWN||e.shiftKey&&t===J.ENTER)&&e.stopPropagation()},i.prototype.afterGuiAttached=function(){var e=this.localeService.getLocaleTextFunc();this.eTextArea.setInputAriaLabel(e("ariaInputEditor","Input Editor")),this.focusAfterAttached&&this.eTextArea.getFocusableElement().focus()},i.prototype.getValue=function(){var e=this.eTextArea.getValue();return!ue(e)&&!ue(this.params.value)?this.params.value:this.params.parseValue(e)},i.TEMPLATE=`<div class="ag-large-text">
            <ag-input-text-area ref="eTextArea" class="ag-large-text-input"></ag-input-text-area>
        </div>`,FS([be("eTextArea")],i.prototype,"eTextArea",void 0),i}(xn),kS=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Bp=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},GS=function(n){kS(i,n);function i(){var e=n.call(this,`<div class="ag-cell-edit-wrapper">
                <ag-select class="ag-cell-editor" ref="eSelect"></ag-select>
            </div>`)||this;return e.startedByEnter=!1,e}return i.prototype.init=function(e){this.focusAfterAttached=e.cellStartedEdit;var t=this,r=t.eSelect,o=t.valueFormatterService,a=t.gridOptionsService,s=e.values,l=e.value,u=e.eventKey;if(vt(s)){console.warn("AG Grid: no values found for select cellEditor");return}this.startedByEnter=u!=null?u===J.ENTER:!1;var c=!1;s.forEach(function(S){var w={value:S},E=o.formatValue(e.column,null,S),_=E!=null;w.text=_?E:S,r.addOption(w),c=c||l===S}),c?r.setValue(e.value,!0):e.values.length&&r.setValue(e.values[0],!0);var d=e.valueListGap,f=e.valueListMaxWidth,y=e.valueListMaxHeight;d!=null&&r.setPickerGap(d),y!=null&&r.setPickerMaxHeight(y),f!=null&&r.setPickerMaxWidth(f),a.get("editType")!=="fullRow"&&this.addManagedListener(this.eSelect,_d.EVENT_ITEM_SELECTED,function(){return e.stopEditing()})},i.prototype.afterGuiAttached=function(){var e=this;this.focusAfterAttached&&this.eSelect.getFocusableElement().focus(),this.startedByEnter&&setTimeout(function(){e.isAlive()&&e.eSelect.showPicker()})},i.prototype.focusIn=function(){this.eSelect.getFocusableElement().focus()},i.prototype.getValue=function(){return this.eSelect.getValue()},i.prototype.isPopup=function(){return!1},Bp([T("valueFormatterService")],i.prototype,"valueFormatterService",void 0),Bp([be("eSelect")],i.prototype,"eSelect",void 0),i}(xn),VS=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),BS=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},Kl=function(n){VS(i,n);function i(e){var t=n.call(this,`
            <div class="ag-cell-edit-wrapper">
                `+e.getTemplate()+`
            </div>`)||this;return t.cellEditorInput=e,t}return i.prototype.init=function(e){this.params=e;var t=this.eInput;this.cellEditorInput.init(t,e);var r;if(e.cellStartedEdit){this.focusAfterAttached=!0;var o=e.eventKey;o===J.BACKSPACE||e.eventKey===J.DELETE?r="":o&&o.length===1?r=o:(r=this.cellEditorInput.getStartValue(),o!==J.F2&&(this.highlightAllOnFocus=!0))}else this.focusAfterAttached=!1,r=this.cellEditorInput.getStartValue();r!=null&&t.setStartValue(r),this.addManagedListener(t.getGui(),"keydown",function(a){var s=a.key;(s===J.PAGE_UP||s===J.PAGE_DOWN)&&a.preventDefault()})},i.prototype.afterGuiAttached=function(){var e,t,r=this.localeService.getLocaleTextFunc(),o=this.eInput;if(o.setInputAriaLabel(r("ariaInputEditor","Input Editor")),!!this.focusAfterAttached){Fr()||o.getFocusableElement().focus();var a=o.getInputElement();this.highlightAllOnFocus?a.select():(t=(e=this.cellEditorInput).setCaret)===null||t===void 0||t.call(e)}},i.prototype.focusIn=function(){var e=this.eInput,t=e.getFocusableElement(),r=e.getInputElement();t.focus(),r.select()},i.prototype.getValue=function(){return this.cellEditorInput.getValue()},i.prototype.isPopup=function(){return!1},BS([be("eInput")],i.prototype,"eInput",void 0),i}(xn),HS=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),WS=function(){function n(){}return n.prototype.getTemplate=function(){return'<ag-input-text-field class="ag-cell-editor" ref="eInput"></ag-input-text-field>'},n.prototype.init=function(i,e){this.eInput=i,this.params=e,e.maxLength!=null&&i.setMaxLength(e.maxLength)},n.prototype.getValue=function(){var i=this.eInput.getValue();return!ue(i)&&!ue(this.params.value)?this.params.value:this.params.parseValue(i)},n.prototype.getStartValue=function(){var i=this.params.useFormatter||this.params.column.getColDef().refData;return i?this.params.formatValue(this.params.value):this.params.value},n.prototype.setCaret=function(){var i=this.eInput.getValue(),e=ue(i)&&i.length||0;e&&this.eInput.getInputElement().setSelectionRange(e,e)},n}(),Hp=function(n){HS(i,n);function i(){return n.call(this,new WS)||this}return i}(Kl),US=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),jS=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},zS="",YS="",KS=function(n){US(i,n);function i(){var e=n.call(this,i.TEMPLATE)||this;return e.refreshCount=0,e}return i.prototype.init=function(e){this.eValue=this.queryForHtmlElement(".ag-value-change-value"),this.eDelta=this.queryForHtmlElement(".ag-value-change-delta"),this.refresh(e)},i.prototype.showDelta=function(e,t){var r=Math.abs(t),o=e.formatValue(r),a=ue(o)?o:r,s=t>=0;s?this.eDelta.innerHTML=zS+a:this.eDelta.innerHTML=YS+a,this.eDelta.classList.toggle("ag-value-change-delta-up",s),this.eDelta.classList.toggle("ag-value-change-delta-down",!s)},i.prototype.setTimerToRemoveDelta=function(){var e=this;this.refreshCount++;var t=this.refreshCount;window.setTimeout(function(){t===e.refreshCount&&e.hideDeltaValue()},2e3)},i.prototype.hideDeltaValue=function(){this.eValue.classList.remove("ag-value-change-value-highlight"),tr(this.eDelta)},i.prototype.refresh=function(e){var t=e.value;if(t===this.lastValue||(ue(e.valueFormatted)?this.eValue.innerHTML=e.valueFormatted:ue(e.value)?this.eValue.innerHTML=t:tr(this.eValue),this.filterManager.isSuppressFlashingCellsBecauseFiltering()))return!1;if(typeof t=="number"&&typeof this.lastValue=="number"){var r=t-this.lastValue;this.showDelta(e,r)}return this.lastValue&&this.eValue.classList.add("ag-value-change-value-highlight"),this.setTimerToRemoveDelta(),this.lastValue=t,!0},i.TEMPLATE='<span><span class="ag-value-change-delta"></span><span class="ag-value-change-value"></span></span>',jS([T("filterManager")],i.prototype,"filterManager",void 0),i}(xt),QS=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),qS=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},XS=function(n){QS(i,n);function i(){var e=n.call(this,i.TEMPLATE)||this;return e.refreshCount=0,e.eCurrent=e.queryForHtmlElement(".ag-value-slide-current"),e}return i.prototype.init=function(e){this.refresh(e)},i.prototype.addSlideAnimation=function(){var e=this;this.refreshCount++;var t=this.refreshCount;this.ePrevious&&this.getGui().removeChild(this.ePrevious),this.ePrevious=Ji('<span class="ag-value-slide-previous ag-value-slide-out"></span>'),this.ePrevious.innerHTML=this.eCurrent.innerHTML,this.getGui().insertBefore(this.ePrevious,this.eCurrent),window.setTimeout(function(){t===e.refreshCount&&e.ePrevious.classList.add("ag-value-slide-out-end")},50),window.setTimeout(function(){t===e.refreshCount&&(e.getGui().removeChild(e.ePrevious),e.ePrevious=null)},3e3)},i.prototype.refresh=function(e){var t=e.value;return vt(t)&&(t=""),t===this.lastValue||this.filterManager.isSuppressFlashingCellsBecauseFiltering()?!1:(this.addSlideAnimation(),this.lastValue=t,ue(e.valueFormatted)?this.eCurrent.innerHTML=e.valueFormatted:ue(e.value)?this.eCurrent.innerHTML=t:tr(this.eCurrent),!0)},i.TEMPLATE=`<span>
            <span class="ag-value-slide-current"></span>
        </span>`,qS([T("filterManager")],i.prototype,"filterManager",void 0),i}(xt),Kn=function(){return Kn=Object.assign||function(n){for(var i,e=1,t=arguments.length;e<t;e++){i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(n[r]=i[r])}return n},Kn.apply(this,arguments)},Nt=function(){function n(i){this.rowIndex=null,this.key=null,this.childrenMapped={},this.displayed=!1,this.rowTop=null,this.oldRowTop=null,this.selectable=!0,this.__objectId=n.OBJECT_ID_SEQUENCE++,this.__autoHeights={},this.alreadyRendered=!1,this.highlighted=null,this.hovered=!1,this.selected=!1,this.beans=i}return n.prototype.setData=function(i){this.setDataCommon(i,!1)},n.prototype.updateData=function(i){this.setDataCommon(i,!0)},n.prototype.setDataCommon=function(i,e){var t=this.data;this.data=i,this.beans.valueCache.onDataChanged(),this.updateDataOnDetailNode(),this.checkRowSelectable(),this.resetQuickFilterAggregateText();var r=this.createDataChangedEvent(i,t,e);this.dispatchLocalEvent(r)},n.prototype.updateDataOnDetailNode=function(){this.detailNode&&(this.detailNode.data=this.data)},n.prototype.createDataChangedEvent=function(i,e,t){return{type:n.EVENT_DATA_CHANGED,node:this,oldData:e,newData:i,update:t}},n.prototype.createLocalRowEvent=function(i){return{type:i,node:this}},n.prototype.getRowIndexString=function(){return this.rowPinned==="top"?"t-"+this.rowIndex:this.rowPinned==="bottom"?"b-"+this.rowIndex:this.rowIndex.toString()},n.prototype.createDaemonNode=function(){var i=new n(this.beans);return i.id=this.id,i.data=this.data,i.__daemon=!0,i.selected=this.selected,i.level=this.level,i},n.prototype.setDataAndId=function(i,e){var t=ue(this.id)?this.createDaemonNode():null,r=this.data;this.data=i,this.updateDataOnDetailNode(),this.setId(e),this.checkRowSelectable(),this.beans.selectionService.syncInRowNode(this,t);var o=this.createDataChangedEvent(i,r,!1);this.dispatchLocalEvent(o)},n.prototype.checkRowSelectable=function(){var i=this.beans.gridOptionsService.get("isRowSelectable");this.setRowSelectable(i?i(this):!0)},n.prototype.setRowSelectable=function(i){if(this.selectable!==i){this.selectable=i,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(n.EVENT_SELECTABLE_CHANGED));var e=this.beans.gridOptionsService.is("groupSelectsChildren");if(e){var t=this.calculateSelectedFromChildren();this.setSelectedParams({newValue:t??!1,source:"selectableChanged"})}}},n.prototype.setId=function(i){var e=this.beans.gridOptionsService.getCallback("getRowId");if(e)if(this.data){var t=this.getGroupKeys(!0);this.id=e({data:this.data,parentKeys:t.length>0?t:void 0,level:this.level}),this.id!==null&&typeof this.id=="string"&&this.id.startsWith(n.ID_PREFIX_ROW_GROUP)&&console.error("AG Grid: Row IDs cannot start with "+n.ID_PREFIX_ROW_GROUP+", this is a reserved prefix for AG Grid's row grouping feature."),this.id!==null&&typeof this.id!="string"&&(this.id=""+this.id)}else this.id=void 0;else this.id=i},n.prototype.getGroupKeys=function(i){i===void 0&&(i=!1);var e=[],t=this;for(i&&(t=t.parent);t&&t.level>=0;)e.push(t.key),t=t.parent;return e.reverse(),e},n.prototype.isPixelInRange=function(i){return!ue(this.rowTop)||!ue(this.rowHeight)?!1:i>=this.rowTop&&i<this.rowTop+this.rowHeight},n.prototype.setFirstChild=function(i){this.firstChild!==i&&(this.firstChild=i,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(n.EVENT_FIRST_CHILD_CHANGED)))},n.prototype.setLastChild=function(i){this.lastChild!==i&&(this.lastChild=i,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(n.EVENT_LAST_CHILD_CHANGED)))},n.prototype.setChildIndex=function(i){this.childIndex!==i&&(this.childIndex=i,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(n.EVENT_CHILD_INDEX_CHANGED)))},n.prototype.setRowTop=function(i){this.oldRowTop=this.rowTop,this.rowTop!==i&&(this.rowTop=i,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(n.EVENT_TOP_CHANGED)),this.setDisplayed(i!==null))},n.prototype.clearRowTopAndRowIndex=function(){this.oldRowTop=null,this.setRowTop(null),this.setRowIndex(null)},n.prototype.setDisplayed=function(i){this.displayed!==i&&(this.displayed=i,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(n.EVENT_DISPLAYED_CHANGED)))},n.prototype.setDragging=function(i){this.dragging!==i&&(this.dragging=i,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(n.EVENT_DRAGGING_CHANGED)))},n.prototype.setHighlighted=function(i){i!==this.highlighted&&(this.highlighted=i,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(n.EVENT_HIGHLIGHT_CHANGED)))},n.prototype.setHovered=function(i){this.hovered!==i&&(this.hovered=i)},n.prototype.isHovered=function(){return this.hovered},n.prototype.setAllChildrenCount=function(i){this.allChildrenCount!==i&&(this.allChildrenCount=i,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(n.EVENT_ALL_CHILDREN_COUNT_CHANGED)))},n.prototype.setMaster=function(i){this.master!==i&&(this.master&&!i&&(this.expanded=!1),this.master=i,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(n.EVENT_MASTER_CHANGED)))},n.prototype.setGroup=function(i){this.group!==i&&(this.group&&!i&&(this.expanded=!1),this.group=i,this.updateHasChildren(),this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(n.EVENT_GROUP_CHANGED)))},n.prototype.setRowHeight=function(i,e){e===void 0&&(e=!1),this.rowHeight=i,this.rowHeightEstimated=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(n.EVENT_HEIGHT_CHANGED))},n.prototype.setRowAutoHeight=function(i,e){this.__autoHeights||(this.__autoHeights={}),this.__autoHeights[e.getId()]=i,i!=null&&(this.checkAutoHeightsDebounced==null&&(this.checkAutoHeightsDebounced=zr(this.checkAutoHeights.bind(this),1)),this.checkAutoHeightsDebounced())},n.prototype.checkAutoHeights=function(){var i=this,e=!1,t=!0,r=0,o=this.__autoHeights;if(o!=null){var a=this.beans.columnModel.getAllDisplayedAutoHeightCols();if(a.forEach(function(l){var u=o[l.getId()];if(u==null)if(i.beans.columnModel.isColSpanActive()){var c=[];switch(l.getPinned()){case"left":c=i.beans.columnModel.getDisplayedLeftColumnsForRow(i);break;case"right":c=i.beans.columnModel.getDisplayedRightColumnsForRow(i);break;case null:c=i.beans.columnModel.getViewportCenterColumnsForRow(i);break}if(c.includes(l)){e=!0;return}u=-1}else{e=!0;return}else t=!1;u>r&&(r=u)}),!e&&((t||r<10)&&(r=this.beans.gridOptionsService.getRowHeightForNode(this).height),r!=this.rowHeight)){this.setRowHeight(r);var s=this.beans.rowModel;s.onRowHeightChangedDebounced&&s.onRowHeightChangedDebounced()}}},n.prototype.setRowIndex=function(i){this.rowIndex!==i&&(this.rowIndex=i,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(n.EVENT_ROW_INDEX_CHANGED)))},n.prototype.setUiLevel=function(i){this.uiLevel!==i&&(this.uiLevel=i,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(n.EVENT_UI_LEVEL_CHANGED)))},n.prototype.setExpanded=function(i,e){if(this.expanded!==i){this.expanded=i,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(n.EVENT_EXPANDED_CHANGED));var t=Object.assign({},this.createGlobalRowEvent(b.EVENT_ROW_GROUP_OPENED),{expanded:i,event:e||null});this.beans.rowNodeEventThrottle.dispatchExpanded(t),this.sibling&&this.beans.rowRenderer.refreshCells({rowNodes:[this]})}},n.prototype.createGlobalRowEvent=function(i){return{type:i,node:this,data:this.data,rowIndex:this.rowIndex,rowPinned:this.rowPinned,context:this.beans.gridOptionsService.context,api:this.beans.gridOptionsService.api,columnApi:this.beans.gridOptionsService.columnApi}},n.prototype.dispatchLocalEvent=function(i){this.eventService&&this.eventService.dispatchEvent(i)},n.prototype.setDataValue=function(i,e,t){var r=this,o=function(){var u;return typeof i!="string"?i:(u=r.beans.columnModel.getGridColumn(i))!==null&&u!==void 0?u:r.beans.columnModel.getPrimaryColumn(i)},a=o(),s=this.getValueFromValueService(a);if(this.beans.gridOptionsService.is("readOnlyEdit"))return this.dispatchEventForSaveValueReadOnly(a,s,e,t),!1;var l=this.beans.valueService.setValue(this,a,e,t);return this.dispatchCellChangedEvent(a,e,s),this.checkRowSelectable(),l},n.prototype.getValueFromValueService=function(i){var e=this.leafGroup&&this.beans.columnModel.isPivotMode(),t=this.group&&this.expanded&&!this.footer&&!e,r=this.beans.gridOptionsService.getGroupIncludeFooter(),o=r({node:this}),a=this.beans.gridOptionsService.is("groupSuppressBlankHeader"),s=t&&o&&!a,l=this.beans.valueService.getValue(i,this,!1,s);return l},n.prototype.dispatchEventForSaveValueReadOnly=function(i,e,t,r){var o={type:b.EVENT_CELL_EDIT_REQUEST,event:null,rowIndex:this.rowIndex,rowPinned:this.rowPinned,column:i,colDef:i.getColDef(),context:this.beans.gridOptionsService.context,api:this.beans.gridOptionsService.api,columnApi:this.beans.gridOptionsService.columnApi,data:this.data,node:this,oldValue:e,newValue:t,value:t,source:r};this.beans.eventService.dispatchEvent(o)},n.prototype.setGroupValue=function(i,e){var t=this.beans.columnModel.getGridColumn(i);vt(this.groupData)&&(this.groupData={});var r=t.getColId(),o=this.groupData[r];o!==e&&(this.groupData[r]=e,this.dispatchCellChangedEvent(t,e,o))},n.prototype.setAggData=function(i){var e=this,t=yh([this.aggData,i]),r=this.aggData;this.aggData=i,this.eventService&&t.forEach(function(o){var a=e.aggData?e.aggData[o]:void 0,s=r?r[o]:void 0;if(a!==s){var l=e.beans.columnModel.lookupGridColumn(o);l&&e.dispatchCellChangedEvent(l,a,s)}})},n.prototype.updateHasChildren=function(){var i=this.group&&!this.footer||this.childrenAfterGroup&&this.childrenAfterGroup.length>0,e=this.beans.gridOptionsService.isRowModelType("serverSide");if(e){var t=this.beans.gridOptionsService.is("treeData"),r=this.beans.gridOptionsService.get("isServerSideGroup");i=!this.stub&&!this.footer&&(t?!!r&&r(this.data):!!this.group)}i!==this.__hasChildren&&(this.__hasChildren=!!i,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(n.EVENT_HAS_CHILDREN_CHANGED)))},n.prototype.hasChildren=function(){return this.__hasChildren==null&&this.updateHasChildren(),this.__hasChildren},n.prototype.isEmptyRowGroupNode=function(){return this.group&&Cr(this.childrenAfterGroup)},n.prototype.dispatchCellChangedEvent=function(i,e,t){var r={type:n.EVENT_CELL_CHANGED,node:this,column:i,newValue:e,oldValue:t};this.dispatchLocalEvent(r)},n.prototype.resetQuickFilterAggregateText=function(){this.quickFilterAggregateText=null},n.prototype.isExpandable=function(){return!!(this.hasChildren()&&!this.footer||this.master)},n.prototype.isSelected=function(){return this.footer?this.sibling.isSelected():this.selected},n.prototype.depthFirstSearch=function(i){this.childrenAfterGroup&&this.childrenAfterGroup.forEach(function(e){return e.depthFirstSearch(i)}),i(this)},n.prototype.calculateSelectedFromChildren=function(){var i,e=!1,t=!1,r=!1;if(!(!((i=this.childrenAfterGroup)===null||i===void 0)&&i.length))return this.selectable?this.selected:null;for(var o=0;o<this.childrenAfterGroup.length;o++){var a=this.childrenAfterGroup[o],s=a.isSelected();if(!a.selectable){var l=a.calculateSelectedFromChildren();if(l===null)continue;s=l}switch(s){case!0:e=!0;break;case!1:t=!0;break;default:r=!0;break}}if(!(r||e&&t))return e?!0:t?!1:this.selectable?this.selected:null},n.prototype.setSelectedInitialValue=function(i){this.selected=i},n.prototype.selectThisNode=function(i,e,t){t===void 0&&(t="api");var r=!this.selectable&&i,o=this.selected===i;if(r||o)return!1;if(this.selected=i,this.eventService){this.dispatchLocalEvent(this.createLocalRowEvent(n.EVENT_ROW_SELECTED));var a=this.sibling;a&&a.footer&&a.dispatchLocalEvent(a.createLocalRowEvent(n.EVENT_ROW_SELECTED))}var s=Kn(Kn({},this.createGlobalRowEvent(b.EVENT_ROW_SELECTED)),{event:e||null,source:t});return this.beans.eventService.dispatchEvent(s),!0},n.prototype.setSelected=function(i,e,t){if(e===void 0&&(e=!1),t===void 0&&(t="api"),typeof t=="boolean"){console.warn("AG Grid: since version v30, rowNode.setSelected() property `suppressFinishActions` has been removed, please use `gridApi.setNodesSelected()` for bulk actions, and the event `source` property for ignoring events instead.");return}this.setSelectedParams({newValue:i,clearSelection:e,rangeSelect:!1,source:t})},n.prototype.setSelectedParams=function(i){return this.rowPinned?(console.warn("AG Grid: cannot select pinned rows"),0):this.id===void 0?(console.warn("AG Grid: cannot select node until id for node is known"),0):this.beans.selectionService.setNodesSelected(Kn(Kn({},i),{nodes:[this.footer?this.sibling:this]}))},n.prototype.isRowPinned=function(){return this.rowPinned==="top"||this.rowPinned==="bottom"},n.prototype.isParentOfNode=function(i){for(var e=this.parent;e;){if(e===i)return!0;e=e.parent}return!1},n.prototype.addEventListener=function(i,e){this.eventService||(this.eventService=new Zo),this.eventService.addEventListener(i,e)},n.prototype.removeEventListener=function(i,e){this.eventService&&(this.eventService.removeEventListener(i,e),this.eventService.noRegisteredListenersExist()&&(this.eventService=null))},n.prototype.onMouseEnter=function(){this.dispatchLocalEvent(this.createLocalRowEvent(n.EVENT_MOUSE_ENTER))},n.prototype.onMouseLeave=function(){this.dispatchLocalEvent(this.createLocalRowEvent(n.EVENT_MOUSE_LEAVE))},n.prototype.getFirstChildOfFirstChild=function(i){for(var e=this,t=!0,r=!1,o=null;t&&!r;){var a=e.parent,s=ue(a)&&e.firstChild;s?a.rowGroupColumn===i&&(r=!0,o=a):t=!1,e=a}return r?o:null},n.prototype.isFullWidthCell=function(){if(this.detail)return!0;var i=this.beans.gridOptionsService.getCallback("isFullWidthRow");return i?i({rowNode:this}):!1},n.prototype.getRoute=function(){if(this.key!=null){for(var i=[],e=this;e.key!=null;)i.push(e.key),e=e.parent;return i.reverse()}},n.prototype.createFooter=function(){var i=this;if(!this.sibling){var e=new Set(["eventService","__objectId","sticky"]),t=new n(this.beans);Object.keys(this).forEach(function(r){e.has(r)||(t[r]=i[r])}),t.footer=!0,t.setRowTop(null),t.setRowIndex(null),t.oldRowTop=null,t.id="rowGroupFooter_"+this.id,t.sibling=this,this.sibling=t}},n.prototype.destroyFooter=function(){this.sibling&&(this.sibling.setRowTop(null),this.sibling.setRowIndex(null),this.sibling=void 0)},n.ID_PREFIX_ROW_GROUP="row-group-",n.ID_PREFIX_TOP_PINNED="t-",n.ID_PREFIX_BOTTOM_PINNED="b-",n.OBJECT_ID_SEQUENCE=0,n.EVENT_ROW_SELECTED="rowSelected",n.EVENT_DATA_CHANGED="dataChanged",n.EVENT_CELL_CHANGED="cellChanged",n.EVENT_ALL_CHILDREN_COUNT_CHANGED="allChildrenCountChanged",n.EVENT_MASTER_CHANGED="masterChanged",n.EVENT_GROUP_CHANGED="groupChanged",n.EVENT_MOUSE_ENTER="mouseEnter",n.EVENT_MOUSE_LEAVE="mouseLeave",n.EVENT_HEIGHT_CHANGED="heightChanged",n.EVENT_TOP_CHANGED="topChanged",n.EVENT_DISPLAYED_CHANGED="displayedChanged",n.EVENT_FIRST_CHILD_CHANGED="firstChildChanged",n.EVENT_LAST_CHILD_CHANGED="lastChildChanged",n.EVENT_CHILD_INDEX_CHANGED="childIndexChanged",n.EVENT_ROW_INDEX_CHANGED="rowIndexChanged",n.EVENT_EXPANDED_CHANGED="expandedChanged",n.EVENT_HAS_CHILDREN_CHANGED="hasChildrenChanged",n.EVENT_SELECTABLE_CHANGED="selectableChanged",n.EVENT_UI_LEVEL_CHANGED="uiLevelChanged",n.EVENT_HIGHLIGHT_CHANGED="rowHighlightChanged",n.EVENT_DRAGGING_CHANGED="draggingChanged",n}(),JS=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),wl=function(){return wl=Object.assign||function(n){for(var i,e=1,t=arguments.length;e<t;e++){i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(n[r]=i[r])}return n},wl.apply(this,arguments)},Wp=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},Vv=function(n){JS(i,n);function i(){return n.call(this,`
            <div class="ag-selection-checkbox" role="presentation">
                <ag-checkbox role="presentation" ref="eCheckbox"></ag-checkbox>
            </div>`)||this}return i.prototype.postConstruct=function(){this.eCheckbox.setPassive(!0),Uh(this.eCheckbox.getInputElement(),"polite")},i.prototype.getCheckboxId=function(){return this.eCheckbox.getInputElement().id},i.prototype.onDataChanged=function(){this.onSelectionChanged()},i.prototype.onSelectableChanged=function(){this.showOrHideSelect()},i.prototype.onSelectionChanged=function(){var e=this.localeService.getLocaleTextFunc(),t=this.rowNode.isSelected(),r=Bl(e,t),o=e("ariaRowToggleSelection","Press Space to toggle row selection");this.eCheckbox.setValue(t,!0),this.eCheckbox.setInputAriaLabel(o+" ("+r+")")},i.prototype.onClicked=function(e,t,r){return this.rowNode.setSelectedParams({newValue:e,rangeSelect:r.shiftKey,groupSelectsFiltered:t,event:r,source:"checkboxSelected"})},i.prototype.init=function(e){var t=this;this.rowNode=e.rowNode,this.column=e.column,this.overrides=e.overrides,this.onSelectionChanged(),this.addManagedListener(this.eCheckbox.getInputElement(),"dblclick",function(s){uo(s)}),this.addManagedListener(this.eCheckbox.getInputElement(),"click",function(s){uo(s);var l=t.gridOptionsService.is("groupSelectsFiltered"),u=t.eCheckbox.getValue();if(t.shouldHandleIndeterminateState(u,l)){var c=t.onClicked(!0,l,s||{});c===0&&t.onClicked(!1,l,s)}else u?t.onClicked(!1,l,s):t.onClicked(!0,l,s||{})}),this.addManagedListener(this.rowNode,Nt.EVENT_ROW_SELECTED,this.onSelectionChanged.bind(this)),this.addManagedListener(this.rowNode,Nt.EVENT_DATA_CHANGED,this.onDataChanged.bind(this)),this.addManagedListener(this.rowNode,Nt.EVENT_SELECTABLE_CHANGED,this.onSelectableChanged.bind(this));var r=this.gridOptionsService.get("isRowSelectable"),o=r||typeof this.getIsVisible()=="function";if(o){var a=this.showOrHideSelect.bind(this);this.addManagedListener(this.eventService,b.EVENT_DISPLAYED_COLUMNS_CHANGED,a),this.addManagedListener(this.rowNode,Nt.EVENT_DATA_CHANGED,a),this.addManagedListener(this.rowNode,Nt.EVENT_CELL_CHANGED,a),this.showOrHideSelect()}this.eCheckbox.getInputElement().setAttribute("tabindex","-1")},i.prototype.shouldHandleIndeterminateState=function(e,t){return t&&(this.eCheckbox.getPreviousValue()===void 0||e===void 0)&&this.gridOptionsService.isRowModelType("clientSide")},i.prototype.showOrHideSelect=function(){var e,t,r,o,a=this.rowNode.selectable,s=this.getIsVisible();if(a)if(typeof s=="function"){var l=(e=this.overrides)===null||e===void 0?void 0:e.callbackParams,u=(t=this.column)===null||t===void 0?void 0:t.createColumnFunctionCallbackParams(this.rowNode);a=u?s(wl(wl({},l),u)):!1}else a=s??!1;var c=(r=this.column)===null||r===void 0?void 0:r.getColDef().showDisabledCheckboxes;if(c){this.eCheckbox.setDisabled(!a),this.setVisible(!0),this.setDisplayed(!0);return}if(!((o=this.overrides)===null||o===void 0)&&o.removeHidden){this.setDisplayed(a);return}this.setVisible(a)},i.prototype.getIsVisible=function(){var e,t;return this.overrides?this.overrides.isVisible:(t=(e=this.column)===null||e===void 0?void 0:e.getColDef())===null||t===void 0?void 0:t.checkboxSelection},Wp([be("eCheckbox")],i.prototype,"eCheckbox",void 0),Wp([Oe],i.prototype,"postConstruct",null),i}(xt),ZS=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),hn=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},ks=function(n){var i=typeof Symbol=="function"&&Symbol.iterator,e=i&&n[i],t=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&t>=n.length&&(n=void 0),{value:n&&n[t++],done:!n}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},nr;(function(n){n[n.ToolPanel=0]="ToolPanel",n[n.HeaderCell=1]="HeaderCell",n[n.RowDrag=2]="RowDrag",n[n.ChartPanel=3]="ChartPanel",n[n.AdvancedFilterBuilder=4]="AdvancedFilterBuilder"})(nr||(nr={}));var na;(function(n){n[n.Up=0]="Up",n[n.Down=1]="Down"})(na||(na={}));var ro;(function(n){n[n.Left=0]="Left",n[n.Right=1]="Right"})(ro||(ro={}));var zi=function(n){ZS(i,n);function i(){var t=n!==null&&n.apply(this,arguments)||this;return t.dragSourceAndParamsList=[],t.dropTargets=[],t}e=i,i.prototype.init=function(){this.ePinnedIcon=Dr("columnMovePin",this.gridOptionsService,null),this.eHideIcon=Dr("columnMoveHide",this.gridOptionsService,null),this.eMoveIcon=Dr("columnMoveMove",this.gridOptionsService,null),this.eLeftIcon=Dr("columnMoveLeft",this.gridOptionsService,null),this.eRightIcon=Dr("columnMoveRight",this.gridOptionsService,null),this.eGroupIcon=Dr("columnMoveGroup",this.gridOptionsService,null),this.eAggregateIcon=Dr("columnMoveValue",this.gridOptionsService,null),this.ePivotIcon=Dr("columnMovePivot",this.gridOptionsService,null),this.eDropNotAllowedIcon=Dr("dropNotAllowed",this.gridOptionsService,null)},i.prototype.addDragSource=function(t,r){r===void 0&&(r=!1);var o={eElement:t.eElement,dragStartPixels:t.dragStartPixels,onDragStart:this.onDragStart.bind(this,t),onDragStop:this.onDragStop.bind(this),onDragging:this.onDragging.bind(this),includeTouch:r};this.dragSourceAndParamsList.push({params:o,dragSource:t}),this.dragService.addDragSource(o)},i.prototype.removeDragSource=function(t){var r=this.dragSourceAndParamsList.find(function(o){return o.dragSource===t});r&&(this.dragService.removeDragSource(r.params),mr(this.dragSourceAndParamsList,r))},i.prototype.clearDragSourceParamsList=function(){var t=this;this.dragSourceAndParamsList.forEach(function(r){return t.dragService.removeDragSource(r.params)}),this.dragSourceAndParamsList.length=0,this.dropTargets.length=0},i.prototype.nudge=function(){this.dragging&&this.onDragging(this.eventLastTime,!0)},i.prototype.onDragStart=function(t,r){this.dragging=!0,this.dragSource=t,this.eventLastTime=r,this.dragItem=this.dragSource.getDragItem(),this.lastDropTarget=this.dragSource.dragSourceDropTarget,this.dragSource.onDragStarted&&this.dragSource.onDragStarted(),this.createGhost()},i.prototype.onDragStop=function(t){if(this.eventLastTime=null,this.dragging=!1,this.dragSource.onDragStopped&&this.dragSource.onDragStopped(),this.lastDropTarget&&this.lastDropTarget.onDragStop){var r=this.createDropTargetEvent(this.lastDropTarget,t,null,null,!1);this.lastDropTarget.onDragStop(r)}this.lastDropTarget=null,this.dragItem=null,this.removeGhost()},i.prototype.onDragging=function(t,r){var o=this,a,s,l,u,c=this.getHorizontalDirection(t),d=this.getVerticalDirection(t);this.eventLastTime=t,this.positionGhost(t);var f=this.dropTargets.filter(function(w){return o.isMouseOnDropTarget(t,w)}),y=this.findCurrentDropTarget(t,f);if(y!==this.lastDropTarget)this.leaveLastTargetIfExists(t,c,d,r),this.lastDropTarget!==null&&y===null&&((s=(a=this.dragSource).onGridExit)===null||s===void 0||s.call(a,this.dragItem)),this.lastDropTarget===null&&y!==null&&((u=(l=this.dragSource).onGridEnter)===null||u===void 0||u.call(l,this.dragItem)),this.enterDragTargetIfExists(y,t,c,d,r),this.lastDropTarget=y;else if(y&&y.onDragging){var S=this.createDropTargetEvent(y,t,c,d,r);y.onDragging(S)}},i.prototype.getAllContainersFromDropTarget=function(t){var r=t.getSecondaryContainers?t.getSecondaryContainers():null,o=[[t.getContainer()]];return r?o.concat(r):o},i.prototype.allContainersIntersect=function(t,r){var o,a;try{for(var s=ks(r),l=s.next();!l.done;l=s.next()){var u=l.value,c=u.getBoundingClientRect();if(c.width===0||c.height===0)return!1;var d=t.clientX>=c.left&&t.clientX<c.right,f=t.clientY>=c.top&&t.clientY<c.bottom;if(!d||!f)return!1}}catch(y){o={error:y}}finally{try{l&&!l.done&&(a=s.return)&&a.call(s)}finally{if(o)throw o.error}}return!0},i.prototype.isMouseOnDropTarget=function(t,r){var o,a,s=this.getAllContainersFromDropTarget(r),l=!1;try{for(var u=ks(s),c=u.next();!c.done;c=u.next()){var d=c.value;if(this.allContainersIntersect(t,d)){l=!0;break}}}catch(f){o={error:f}}finally{try{c&&!c.done&&(a=u.return)&&a.call(u)}finally{if(o)throw o.error}}return r.targetContainsSource&&!r.getContainer().contains(this.dragSource.eElement)?!1:l&&r.isInterestedIn(this.dragSource.type,this.dragSource.eElement)},i.prototype.findCurrentDropTarget=function(t,r){var o,a,s,l,u=r.length;if(u===0)return null;if(u===1)return r[0];var c=this.gridOptionsService.getRootNode(),d=c.elementsFromPoint(t.clientX,t.clientY);try{for(var f=ks(d),y=f.next();!y.done;y=f.next()){var S=y.value;try{for(var w=(s=void 0,ks(r)),E=w.next();!E.done;E=w.next()){var _=E.value,L=Dh(this.getAllContainersFromDropTarget(_));if(L.indexOf(S)!==-1)return _}}catch(P){s={error:P}}finally{try{E&&!E.done&&(l=w.return)&&l.call(w)}finally{if(s)throw s.error}}}}catch(P){o={error:P}}finally{try{y&&!y.done&&(a=f.return)&&a.call(f)}finally{if(o)throw o.error}}return null},i.prototype.enterDragTargetIfExists=function(t,r,o,a,s){if(t){if(t.onDragEnter){var l=this.createDropTargetEvent(t,r,o,a,s);t.onDragEnter(l)}this.setGhostIcon(t.getIconName?t.getIconName():null)}},i.prototype.leaveLastTargetIfExists=function(t,r,o,a){if(this.lastDropTarget){if(this.lastDropTarget.onDragLeave){var s=this.createDropTargetEvent(this.lastDropTarget,t,r,o,a);this.lastDropTarget.onDragLeave(s)}this.setGhostIcon(null)}},i.prototype.addDropTarget=function(t){this.dropTargets.push(t)},i.prototype.removeDropTarget=function(t){this.dropTargets=this.dropTargets.filter(function(r){return r.getContainer()!==t.getContainer()})},i.prototype.hasExternalDropZones=function(){return this.dropTargets.some(function(t){return t.external})},i.prototype.findExternalZone=function(t){var r=this.dropTargets.filter(function(o){return o.external});return r.find(function(o){return o.getContainer()===t.getContainer()})||null},i.prototype.getHorizontalDirection=function(t){var r=this.eventLastTime&&this.eventLastTime.clientX,o=t.clientX;return r===o?null:r>o?ro.Left:ro.Right},i.prototype.getVerticalDirection=function(t){var r=this.eventLastTime&&this.eventLastTime.clientY,o=t.clientY;return r===o?null:r>o?na.Up:na.Down},i.prototype.createDropTargetEvent=function(t,r,o,a,s){var l=t.getContainer(),u=l.getBoundingClientRect(),c=this,d=c.gridApi,f=c.columnApi,y=c.dragItem,S=c.dragSource,w=r.clientX-u.left,E=r.clientY-u.top;return{event:r,x:w,y:E,vDirection:a,hDirection:o,dragSource:S,fromNudge:s,dragItem:y,api:d,columnApi:f,dropZoneTarget:l}},i.prototype.positionGhost=function(t){var r=this.eGhost;if(r){var o=r.getBoundingClientRect(),a=o.height,s=tv()-2,l=iv()-2,u=yd(r.offsetParent),c=t.clientY,d=t.clientX,f=c-u.top-a/2,y=d-u.left-10,S=this.gridOptionsService.getDocument(),w=S.defaultView||window,E=w.pageYOffset||S.documentElement.scrollTop,_=w.pageXOffset||S.documentElement.scrollLeft;s>0&&y+r.clientWidth>s+_&&(y=s+_-r.clientWidth),y<0&&(y=0),l>0&&f+r.clientHeight>l+E&&(f=l+E-r.clientHeight),f<0&&(f=0),r.style.left=y+"px",r.style.top=f+"px"}},i.prototype.removeGhost=function(){this.eGhost&&this.eGhostParent&&this.eGhostParent.removeChild(this.eGhost),this.eGhost=null},i.prototype.createGhost=function(){this.eGhost=Ji(e.GHOST_TEMPLATE),this.mouseEventService.stampTopLevelGridCompWithGridInstance(this.eGhost);var t=this.environment.getTheme().theme;t&&this.eGhost.classList.add(t),this.eGhostIcon=this.eGhost.querySelector(".ag-dnd-ghost-icon"),this.setGhostIcon(null);var r=this.eGhost.querySelector(".ag-dnd-ghost-label"),o=this.dragSource.dragItemName;kl(o)&&(o=o()),r.innerHTML=Ii(o)||"",this.eGhost.style.height="25px",this.eGhost.style.top="20px",this.eGhost.style.left="20px";var a=this.gridOptionsService.getDocument(),s=null;try{s=a.fullscreenElement}catch{}finally{if(!s){var l=this.gridOptionsService.getRootNode(),u=l.querySelector("body");u?s=u:l instanceof ShadowRoot?s=l:s=l?.documentElement}}this.eGhostParent=s,this.eGhostParent?this.eGhostParent.appendChild(this.eGhost):console.warn("AG Grid: could not find document body, it is needed for dragging columns")},i.prototype.setGhostIcon=function(t,r){r===void 0&&(r=!1),tr(this.eGhostIcon);var o=null;switch(t||(t=this.dragSource.getDefaultIconName?this.dragSource.getDefaultIconName():e.ICON_NOT_ALLOWED),t){case e.ICON_PINNED:o=this.ePinnedIcon;break;case e.ICON_MOVE:o=this.eMoveIcon;break;case e.ICON_LEFT:o=this.eLeftIcon;break;case e.ICON_RIGHT:o=this.eRightIcon;break;case e.ICON_GROUP:o=this.eGroupIcon;break;case e.ICON_AGGREGATE:o=this.eAggregateIcon;break;case e.ICON_PIVOT:o=this.ePivotIcon;break;case e.ICON_NOT_ALLOWED:o=this.eDropNotAllowedIcon;break;case e.ICON_HIDE:o=this.eHideIcon;break}this.eGhostIcon.classList.toggle("ag-shake-left-to-right",r),!(o===this.eHideIcon&&this.gridOptionsService.is("suppressDragLeaveHidesColumns"))&&o&&this.eGhostIcon.appendChild(o)};var e;return i.ICON_PINNED="pinned",i.ICON_MOVE="move",i.ICON_LEFT="left",i.ICON_RIGHT="right",i.ICON_GROUP="group",i.ICON_AGGREGATE="aggregate",i.ICON_PIVOT="pivot",i.ICON_NOT_ALLOWED="notAllowed",i.ICON_HIDE="hide",i.GHOST_TEMPLATE=`<div class="ag-dnd-ghost ag-unselectable">
            <span class="ag-dnd-ghost-icon ag-shake-left-to-right"></span>
            <div class="ag-dnd-ghost-label"></div>
        </div>`,hn([T("dragService")],i.prototype,"dragService",void 0),hn([T("mouseEventService")],i.prototype,"mouseEventService",void 0),hn([T("columnApi")],i.prototype,"columnApi",void 0),hn([T("gridApi")],i.prototype,"gridApi",void 0),hn([Oe],i.prototype,"init",null),hn([Ki],i.prototype,"clearDragSourceParamsList",null),i=e=hn([Ue("dragAndDropService")],i),i}(ve),Ql=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),$a=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},Tl=function(n){Ql(i,n);function i(e,t,r,o,a,s){var l=n.call(this)||this;return l.cellValueFn=e,l.rowNode=t,l.column=r,l.customGui=o,l.dragStartPixels=a,l.suppressVisibilityChange=s,l.dragSource=null,l}return i.prototype.isCustomGui=function(){return this.customGui!=null},i.prototype.postConstruct=function(){if(this.customGui?this.setDragElement(this.customGui,this.dragStartPixels):(this.setTemplate('<div class="ag-drag-handle ag-row-drag" aria-hidden="true"></div>'),this.getGui().appendChild(Li("rowDrag",this.gridOptionsService,null)),this.addDragSource()),this.checkCompatibility(),!this.suppressVisibilityChange){var e=this.gridOptionsService.is("rowDragManaged")?new ew(this,this.beans,this.rowNode,this.column):new $S(this,this.beans,this.rowNode,this.column);this.createManagedBean(e,this.beans.context)}},i.prototype.setDragElement=function(e,t){this.setTemplateFromElement(e),this.addDragSource(t)},i.prototype.getSelectedNodes=function(){var e=this.gridOptionsService.is("rowDragMultiRow");if(!e)return[this.rowNode];var t=this.beans.selectionService.getSelectedNodes();return t.indexOf(this.rowNode)!==-1?t:[this.rowNode]},i.prototype.checkCompatibility=function(){var e=this.gridOptionsService.is("rowDragManaged"),t=this.gridOptionsService.is("treeData");t&&e&&Ut(function(){return console.warn("AG Grid: If using row drag with tree data, you cannot have rowDragManaged=true")},"RowDragComp.managedAndTreeData")},i.prototype.getDragItem=function(){return{rowNode:this.rowNode,rowNodes:this.getSelectedNodes(),columns:this.column?[this.column]:void 0,defaultTextValue:this.cellValueFn()}},i.prototype.getRowDragText=function(e){if(e){var t=e.getColDef();if(t.rowDragText)return t.rowDragText}return this.gridOptionsService.get("rowDragText")},i.prototype.addDragSource=function(e){var t=this;e===void 0&&(e=4),this.dragSource&&this.removeDragSource();var r=this.getRowDragText(this.column),o=this.localeService.getLocaleTextFunc();this.dragSource={type:nr.RowDrag,eElement:this.getGui(),dragItemName:function(){var a,s=t.getDragItem(),l=((a=s.rowNodes)===null||a===void 0?void 0:a.length)||1;return r?r(s,l):l===1?t.cellValueFn():l+" "+o("rowDragRows","rows")},getDragItem:function(){return t.getDragItem()},dragStartPixels:e,dragSourceDomDataKey:this.gridOptionsService.getDomDataKey()},this.beans.dragAndDropService.addDragSource(this.dragSource,!0)},i.prototype.removeDragSource=function(){this.dragSource&&this.beans.dragAndDropService.removeDragSource(this.dragSource),this.dragSource=null},$a([T("beans")],i.prototype,"beans",void 0),$a([Oe],i.prototype,"postConstruct",null),$a([Ki],i.prototype,"removeDragSource",null),i}(xt),Bv=function(n){Ql(i,n);function i(e,t,r){var o=n.call(this)||this;return o.parent=e,o.rowNode=t,o.column=r,o}return i.prototype.setDisplayedOrVisible=function(e){var t={skipAriaHidden:!0};if(e)this.parent.setDisplayed(!1,t);else{var r=!0,o=!1;this.column&&(r=this.column.isRowDrag(this.rowNode)||this.parent.isCustomGui(),o=kl(this.column.getColDef().rowDrag)),o?(this.parent.setDisplayed(!0,t),this.parent.setVisible(r,t)):(this.parent.setDisplayed(r,t),this.parent.setVisible(!0,t))}},i}(ve),$S=function(n){Ql(i,n);function i(e,t,r,o){var a=n.call(this,e,r,o)||this;return a.beans=t,a}return i.prototype.postConstruct=function(){this.addManagedPropertyListener("suppressRowDrag",this.onSuppressRowDrag.bind(this)),this.addManagedListener(this.rowNode,Nt.EVENT_DATA_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.rowNode,Nt.EVENT_CELL_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.rowNode,Nt.EVENT_CELL_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.beans.eventService,b.EVENT_NEW_COLUMNS_LOADED,this.workOutVisibility.bind(this)),this.workOutVisibility()},i.prototype.onSuppressRowDrag=function(){this.workOutVisibility()},i.prototype.workOutVisibility=function(){var e=this.gridOptionsService.is("suppressRowDrag");this.setDisplayedOrVisible(e)},$a([Oe],i.prototype,"postConstruct",null),i}(Bv),ew=function(n){Ql(i,n);function i(e,t,r,o){var a=n.call(this,e,r,o)||this;return a.beans=t,a}return i.prototype.postConstruct=function(){this.addManagedListener(this.beans.eventService,b.EVENT_SORT_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.beans.eventService,b.EVENT_FILTER_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.beans.eventService,b.EVENT_COLUMN_ROW_GROUP_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.beans.eventService,b.EVENT_NEW_COLUMNS_LOADED,this.workOutVisibility.bind(this)),this.addManagedListener(this.rowNode,Nt.EVENT_DATA_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.rowNode,Nt.EVENT_CELL_CHANGED,this.workOutVisibility.bind(this)),this.addManagedPropertyListener("suppressRowDrag",this.onSuppressRowDrag.bind(this)),this.workOutVisibility()},i.prototype.onSuppressRowDrag=function(){this.workOutVisibility()},i.prototype.workOutVisibility=function(){var e=this.beans.ctrlsService.getGridBodyCtrl(),t=e.getRowDragFeature(),r=t&&t.shouldPreventRowMove(),o=this.gridOptionsService.is("suppressRowDrag"),a=this.beans.dragAndDropService.hasExternalDropZones(),s=r&&!a||o;this.setDisplayedOrVisible(s)},$a([Oe],i.prototype,"postConstruct",null),i}(Bv),tw=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Ol=function(){return Ol=Object.assign||function(n){for(var i,e=1,t=arguments.length;e<t;e++){i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(n[r]=i[r])}return n},Ol.apply(this,arguments)},Ea=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},iw=function(n){tw(i,n);function i(){return n!==null&&n.apply(this,arguments)||this}return i.prototype.init=function(e,t,r,o,a,s,l){this.params=l,this.eGui=t,this.eCheckbox=r,this.eExpanded=o,this.eContracted=a,this.comp=e,this.compClass=s;var u=l.node,c=l.value,d=l.colDef,f=this.isTopLevelFooter();if(!f){var y=this.isEmbeddedRowMismatch();if(y)return;var S=d?.showRowGroup===!0,w=c==null&&!u.master;if(!S&&w)return;if(u.footer&&this.gridOptionsService.is("groupHideOpenParents")){var E=d&&d.showRowGroup,_=u.rowGroupColumn&&u.rowGroupColumn.getColId();if(E!==_)return}}this.setupShowingValueForOpenedParent(),this.findDisplayedGroupNode(),this.addFullWidthRowDraggerIfNeeded(),this.addExpandAndContract(),this.addCheckboxIfNeeded(),this.addValueElement(),this.setupIndent(),this.refreshAriaExpanded()},i.prototype.destroy=function(){n.prototype.destroy.call(this),this.expandListener=null},i.prototype.refreshAriaExpanded=function(){var e=this.params,t=e.node,r=e.eParentOfValue;if(this.expandListener&&(this.expandListener=this.expandListener()),!this.isExpandable()){zh(r);return}var o=function(){Yr(r,!!t.expanded)};this.expandListener=this.addManagedListener(t,Nt.EVENT_EXPANDED_CHANGED,o)||null,o()},i.prototype.isTopLevelFooter=function(){if(!this.gridOptionsService.is("groupIncludeTotalFooter")||this.params.value!=null||this.params.node.level!=-1)return!1;var e=this.params.colDef,t=e==null;if(t||e.showRowGroup===!0)return!0;var r=this.columnModel.getRowGroupColumns();if(!r||r.length===0)return!0;var o=r[0];return o.getId()===e.showRowGroup},i.prototype.isEmbeddedRowMismatch=function(){if(!this.params.fullWidth||!this.gridOptionsService.is("embedFullWidthRows"))return!1;var e=this.params.pinned==="left",t=this.params.pinned==="right",r=!e&&!t;return this.gridOptionsService.is("enableRtl")?this.columnModel.isPinningLeft()?!t:!r:this.columnModel.isPinningLeft()?!e:!r},i.prototype.findDisplayedGroupNode=function(){var e=this.params.column,t=this.params.node;if(this.showingValueForOpenedParent)for(var r=t.parent;r!=null;){if(r.rowGroupColumn&&e.isRowGroupDisplayed(r.rowGroupColumn.getId())){this.displayedGroupNode=r;break}r=r.parent}vt(this.displayedGroupNode)&&(this.displayedGroupNode=t)},i.prototype.setupShowingValueForOpenedParent=function(){var e=this.params.node,t=this.params.column;if(!this.gridOptionsService.is("groupHideOpenParents")){this.showingValueForOpenedParent=!1;return}if(!e.groupData){this.showingValueForOpenedParent=!1;return}var r=e.rowGroupColumn!=null;if(r){var o=e.rowGroupColumn.getId(),a=t.isRowGroupDisplayed(o);if(a){this.showingValueForOpenedParent=!1;return}}var s=e.groupData[t.getId()]!=null;this.showingValueForOpenedParent=s},i.prototype.addValueElement=function(){this.displayedGroupNode.footer?this.addFooterValue():(this.addGroupValue(),this.addChildCount())},i.prototype.addGroupValue=function(){var e=this.adjustParamsWithDetailsFromRelatedColumn(),t=this.getInnerCompDetails(e),r=e.valueFormatted,o=e.value,a=r;if(a==null)if(o===""&&this.params.node.group){var s=this.localeService.getLocaleTextFunc();a=s("blanks","(Blanks)")}else a=o??null;this.comp.setInnerRenderer(t,a)},i.prototype.adjustParamsWithDetailsFromRelatedColumn=function(){var e=this.displayedGroupNode.rowGroupColumn,t=this.params.column;if(!e)return this.params;var r=t!=null;if(r){var o=t.isRowGroupDisplayed(e.getId());if(!o)return this.params}var a=this.params,s=this.params,l=s.value,u=s.node,c=this.valueFormatterService.formatValue(e,u,l),d=Ol(Ol({},a),{valueFormatted:c});return d},i.prototype.addFooterValue=function(){var e=this.params.footerValueGetter,t="";if(e){var r=$c(this.params);r.value=this.params.value,typeof e=="function"?t=e(r):typeof e=="string"?t=this.expressionService.evaluate(e,r):console.warn("AG Grid: footerValueGetter should be either a function or a string (expression)")}else t="Total "+(this.params.value!=null?this.params.value:"");var o=this.getInnerCompDetails(this.params);this.comp.setInnerRenderer(o,t)},i.prototype.getInnerCompDetails=function(e){var t=this;if(e.fullWidth)return this.userComponentFactory.getFullWidthGroupRowInnerCellRenderer(this.gridOptionsService.get("groupRowRendererParams"),e);var r=this.userComponentFactory.getInnerRendererDetails(e,e),o=function(c){return c&&c.componentClass==t.compClass};if(r&&!o(r))return r;var a=this.displayedGroupNode.rowGroupColumn,s=a?a.getColDef():void 0;if(s){var l=this.userComponentFactory.getCellRendererDetails(s,e);if(l&&!o(l))return l;if(o(l)&&s.cellRendererParams&&s.cellRendererParams.innerRenderer){var u=this.userComponentFactory.getInnerRendererDetails(s.cellRendererParams,e);return u}}},i.prototype.addChildCount=function(){this.params.suppressCount||(this.addManagedListener(this.displayedGroupNode,Nt.EVENT_ALL_CHILDREN_COUNT_CHANGED,this.updateChildCount.bind(this)),this.updateChildCount())},i.prototype.updateChildCount=function(){var e=this.displayedGroupNode.allChildrenCount,t=this.isShowRowGroupForThisRow(),r=t&&e!=null&&e>=0,o=r?"("+e+")":"";this.comp.setChildCount(o)},i.prototype.isShowRowGroupForThisRow=function(){if(this.gridOptionsService.is("treeData"))return!0;var e=this.displayedGroupNode.rowGroupColumn;if(!e)return!1;var t=this.params.column,r=t==null||t.isRowGroupDisplayed(e.getId());return r},i.prototype.addExpandAndContract=function(){var e,t=this.params,r=Li("groupExpanded",this.gridOptionsService,null),o=Li("groupContracted",this.gridOptionsService,null);r&&this.eExpanded.appendChild(r),o&&this.eContracted.appendChild(o);var a=t.eGridCell,s=((e=this.params.column)===null||e===void 0?void 0:e.isCellEditable(t.node))&&this.gridOptionsService.is("enableGroupEdit");!s&&this.isExpandable()&&!t.suppressDoubleClickExpand&&this.addManagedListener(a,"dblclick",this.onCellDblClicked.bind(this)),this.addManagedListener(this.eExpanded,"click",this.onExpandClicked.bind(this)),this.addManagedListener(this.eContracted,"click",this.onExpandClicked.bind(this)),this.addManagedListener(a,"keydown",this.onKeyDown.bind(this)),this.addManagedListener(t.node,Nt.EVENT_EXPANDED_CHANGED,this.showExpandAndContractIcons.bind(this)),this.showExpandAndContractIcons();var l=this.onRowNodeIsExpandableChanged.bind(this);this.addManagedListener(this.displayedGroupNode,Nt.EVENT_ALL_CHILDREN_COUNT_CHANGED,l),this.addManagedListener(this.displayedGroupNode,Nt.EVENT_MASTER_CHANGED,l),this.addManagedListener(this.displayedGroupNode,Nt.EVENT_GROUP_CHANGED,l),this.addManagedListener(this.displayedGroupNode,Nt.EVENT_HAS_CHILDREN_CHANGED,l)},i.prototype.onExpandClicked=function(e){Kr(e)||(uo(e),this.onExpandOrContract(e))},i.prototype.onExpandOrContract=function(e){var t=this.displayedGroupNode,r=!t.expanded;!r&&t.sticky&&this.scrollToStickyNode(t),t.setExpanded(r,e)},i.prototype.scrollToStickyNode=function(e){var t=this.ctrlsService.getGridBodyCtrl(),r=t.getScrollFeature();r.setVerticalScrollPosition(e.rowTop-e.stickyRowTop)},i.prototype.isExpandable=function(){if(this.showingValueForOpenedParent)return!0;var e=this.displayedGroupNode,t=this.columnModel.isPivotMode()&&e.leafGroup,r=e.isExpandable()&&!e.footer&&!t;if(!r)return!1;var o=this.params.column,a=o!=null&&typeof o.getColDef().showRowGroup=="string";if(a){var s=this.isShowRowGroupForThisRow();return s}return!0},i.prototype.showExpandAndContractIcons=function(){var e=this,t=e.params,r=e.displayedGroupNode,o=e.columnModel,a=t.node,s=this.isExpandable();if(s){var l=this.showingValueForOpenedParent?!0:a.expanded;this.comp.setExpandedDisplayed(l),this.comp.setContractedDisplayed(!l)}else this.comp.setExpandedDisplayed(!1),this.comp.setContractedDisplayed(!1);var u=o.isPivotMode(),c=u&&r.leafGroup,d=s&&!c,f=a.footer&&a.level===-1;this.comp.addOrRemoveCssClass("ag-cell-expandable",d),this.comp.addOrRemoveCssClass("ag-row-group",d),u?this.comp.addOrRemoveCssClass("ag-pivot-leaf-group",c):f||this.comp.addOrRemoveCssClass("ag-row-group-leaf-indent",!d)},i.prototype.onRowNodeIsExpandableChanged=function(){this.showExpandAndContractIcons(),this.setIndent(),this.refreshAriaExpanded()},i.prototype.setupIndent=function(){var e=this.params.node,t=this.params.suppressPadding;t||(this.addManagedListener(e,Nt.EVENT_UI_LEVEL_CHANGED,this.setIndent.bind(this)),this.setIndent())},i.prototype.setIndent=function(){if(!this.gridOptionsService.is("groupHideOpenParents")){var e=this.params,t=e.node,r=!!e.colDef,o=this.gridOptionsService.is("treeData"),a=!r||o||e.colDef.showRowGroup===!0,s=a?t.uiLevel:0;this.indentClass&&this.comp.addOrRemoveCssClass(this.indentClass,!1),this.indentClass="ag-row-group-indent-"+s,this.comp.addOrRemoveCssClass(this.indentClass,!0)}},i.prototype.addFullWidthRowDraggerIfNeeded=function(){var e=this;if(!(!this.params.fullWidth||!this.params.rowDrag)){var t=new Tl(function(){return e.params.value},this.params.node);this.createManagedBean(t,this.context),this.eGui.insertAdjacentElement("afterbegin",t.getGui())}},i.prototype.isUserWantsSelected=function(){var e=this.params.checkbox;return typeof e=="function"||e===!0},i.prototype.addCheckboxIfNeeded=function(){var e=this,t=this.displayedGroupNode,r=this.isUserWantsSelected()&&!t.footer&&!t.rowPinned&&!t.detail;if(r){var o=new Vv;this.getContext().createBean(o),o.init({rowNode:this.params.node,column:this.params.column,overrides:{isVisible:this.params.checkbox,callbackParams:this.params,removeHidden:!0}}),this.eCheckbox.appendChild(o.getGui()),this.addDestroyFunc(function(){return e.getContext().destroyBean(o)})}this.comp.setCheckboxVisible(r)},i.prototype.onKeyDown=function(e){var t=e.key===J.ENTER;if(!(!t||this.params.suppressEnterExpand)){var r=this.params.column&&this.params.column.isCellEditable(this.params.node);r||this.onExpandOrContract(e)}},i.prototype.onCellDblClicked=function(e){if(!Kr(e)){var t=gl(this.eExpanded,e)||gl(this.eContracted,e);t||this.onExpandOrContract(e)}},Ea([T("expressionService")],i.prototype,"expressionService",void 0),Ea([T("valueFormatterService")],i.prototype,"valueFormatterService",void 0),Ea([T("columnModel")],i.prototype,"columnModel",void 0),Ea([T("userComponentFactory")],i.prototype,"userComponentFactory",void 0),Ea([T("ctrlsService")],i.prototype,"ctrlsService",void 0),i}(ve),rw=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),_a=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},Up=function(n){rw(i,n);function i(){return n.call(this,i.TEMPLATE)||this}return i.prototype.init=function(e){var t=this,r={setInnerRenderer:function(l,u){return t.setRenderDetails(l,u)},setChildCount:function(l){return t.eChildCount.innerHTML=l},addOrRemoveCssClass:function(l,u){return t.addOrRemoveCssClass(l,u)},setContractedDisplayed:function(l){return Yt(t.eContracted,l)},setExpandedDisplayed:function(l){return Yt(t.eExpanded,l)},setCheckboxVisible:function(l){return t.eCheckbox.classList.toggle("ag-invisible",!l)}},o=this.createManagedBean(new iw),a=!e.colDef,s=this.getGui();o.init(r,s,this.eCheckbox,this.eExpanded,this.eContracted,this.constructor,e),a&&Wi(s,"gridcell")},i.prototype.setRenderDetails=function(e,t){var r=this;if(e){var o=e.newAgStackInstance();if(!o)return;o.then(function(a){if(a){var s=function(){return r.context.destroyBean(a)};r.isAlive()?(r.eValue.appendChild(a.getGui()),r.addDestroyFunc(s)):s()}})}else this.eValue.innerText=t},i.prototype.destroy=function(){this.getContext().destroyBean(this.innerCellRenderer),n.prototype.destroy.call(this)},i.prototype.refresh=function(){return!1},i.TEMPLATE=`<span class="ag-cell-wrapper">
            <span class="ag-group-expanded" ref="eExpanded"></span>
            <span class="ag-group-contracted" ref="eContracted"></span>
            <span class="ag-group-checkbox ag-invisible" ref="eCheckbox"></span>
            <span class="ag-group-value" ref="eValue"></span>
            <span class="ag-group-child-count" ref="eChildCount"></span>
        </span>`,_a([be("eExpanded")],i.prototype,"eExpanded",void 0),_a([be("eContracted")],i.prototype,"eContracted",void 0),_a([be("eCheckbox")],i.prototype,"eCheckbox",void 0),_a([be("eValue")],i.prototype,"eValue",void 0),_a([be("eChildCount")],i.prototype,"eChildCount",void 0),i}(xt),ow=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),jp=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},nw=function(n){ow(i,n);function i(){return n.call(this,i.TEMPLATE)||this}return i.prototype.init=function(e){e.node.failedLoad?this.setupFailed():this.setupLoading()},i.prototype.setupFailed=function(){var e=this.localeService.getLocaleTextFunc();this.eLoadingText.innerText=e("loadingError","ERR")},i.prototype.setupLoading=function(){var e=Li("groupLoading",this.gridOptionsService,null);e&&this.eLoadingIcon.appendChild(e);var t=this.localeService.getLocaleTextFunc();this.eLoadingText.innerText=t("loadingOoo","Loading")},i.prototype.refresh=function(e){return!1},i.prototype.destroy=function(){n.prototype.destroy.call(this)},i.TEMPLATE=`<div class="ag-loading">
            <span class="ag-loading-icon" ref="eLoadingIcon"></span>
            <span class="ag-loading-text" ref="eLoadingText"></span>
        </div>`,jp([be("eLoadingIcon")],i.prototype,"eLoadingIcon",void 0),jp([be("eLoadingText")],i.prototype,"eLoadingText",void 0),i}(xt),aw=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),sw=function(n){aw(i,n);function i(){return n.call(this)||this}return i.prototype.destroy=function(){n.prototype.destroy.call(this)},i.prototype.init=function(e){var t,r=(t=this.gridOptionsService.get("overlayLoadingTemplate"))!==null&&t!==void 0?t:i.DEFAULT_LOADING_OVERLAY_TEMPLATE,o=this.localeService.getLocaleTextFunc(),a=r.replace("[LOADING...]",o("loadingOoo","Loading..."));this.setTemplate(a)},i.DEFAULT_LOADING_OVERLAY_TEMPLATE='<span class="ag-overlay-loading-center">[LOADING...]</span>',i}(xt),lw=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),uw=function(n){lw(i,n);function i(){return n.call(this)||this}return i.prototype.destroy=function(){n.prototype.destroy.call(this)},i.prototype.init=function(e){var t,r=(t=this.gridOptionsService.get("overlayNoRowsTemplate"))!==null&&t!==void 0?t:i.DEFAULT_NO_ROWS_TEMPLATE,o=this.localeService.getLocaleTextFunc(),a=r.replace("[NO_ROWS_TO_SHOW]",o("noRowsToShow","No Rows To Show"));this.setTemplate(a)},i.DEFAULT_NO_ROWS_TEMPLATE='<span class="ag-overlay-no-rows-center">[NO_ROWS_TO_SHOW]</span>',i}(xt),cw=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),dw=function(n){cw(i,n);function i(){return n.call(this,'<div class="ag-tooltip"></div>')||this}return i.prototype.init=function(e){var t=e.value;this.getGui().innerHTML=Ii(t)},i}(xn),pw=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),fw=function(){function n(){}return n.prototype.getTemplate=function(){return'<ag-input-number-field class="ag-cell-editor" ref="eInput"></ag-input-number-field>'},n.prototype.init=function(i,e){this.eInput=i,this.params=e,e.max!=null&&i.setMax(e.max),e.min!=null&&i.setMin(e.min),e.precision!=null&&i.setPrecision(e.precision),e.step!=null&&i.setStep(e.step),e.showStepperButtons&&i.getInputElement().classList.add("ag-number-field-input-stepper")},n.prototype.getValue=function(){var i=this.eInput.getValue();if(!ue(i)&&!ue(this.params.value))return this.params.value;var e=this.params.parseValue(i);if(e==null)return e;if(typeof e=="string"){if(e==="")return null;e=Number(e)}return isNaN(e)?null:e},n.prototype.getStartValue=function(){return this.params.value},n}(),hw=function(n){pw(i,n);function i(){return n.call(this,new fw)||this}return i}(Kl),vw=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),gw=function(){function n(){}return n.prototype.getTemplate=function(){return'<ag-input-date-field class="ag-cell-editor" ref="eInput"></ag-input-date-field>'},n.prototype.init=function(i,e){this.eInput=i,this.params=e,e.min!=null&&i.setMin(e.min),e.max!=null&&i.setMax(e.max),e.step!=null&&i.setStep(e.step)},n.prototype.getValue=function(){var i=this.eInput.getDate();return!ue(i)&&!ue(this.params.value)?this.params.value:i??null},n.prototype.getStartValue=function(){var i=this.params.value;if(i instanceof Date)return Mr(i,!1)},n}(),yw=function(n){vw(i,n);function i(){return n.call(this,new gw)||this}return i}(Kl),mw=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Cw=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},Sw=function(){function n(i){this.getDataTypeService=i}return n.prototype.getTemplate=function(){return'<ag-input-date-field class="ag-cell-editor" ref="eInput"></ag-input-date-field>'},n.prototype.init=function(i,e){this.eInput=i,this.params=e,e.min!=null&&i.setMin(e.min),e.max!=null&&i.setMax(e.max),e.step!=null&&i.setStep(e.step)},n.prototype.getValue=function(){var i=this.formatDate(this.eInput.getDate());return!ue(i)&&!ue(this.params.value)?this.params.value:this.params.parseValue(i??"")},n.prototype.getStartValue=function(){var i,e;return Mr((e=this.parseDate((i=this.params.value)!==null&&i!==void 0?i:void 0))!==null&&e!==void 0?e:null,!1)},n.prototype.parseDate=function(i){return this.getDataTypeService().getDateParserFunction()(i)},n.prototype.formatDate=function(i){return this.getDataTypeService().getDateFormatterFunction()(i)},n}(),ww=function(n){mw(i,n);function i(){var e=n.call(this,new Sw(function(){return e.dataTypeService}))||this;return e}return Cw([T("dataTypeService")],i.prototype,"dataTypeService",void 0),i}(Kl),Tw=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Ow=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},Pw=function(n){Tw(i,n);function i(){return n.call(this,i.TEMPLATE)||this}return i.prototype.init=function(e){var t=this;this.params=e,this.updateCheckbox(e),this.eCheckbox.getInputElement().setAttribute("tabindex","-1"),this.addManagedListener(this.eCheckbox.getInputElement(),"click",function(o){if(uo(o),!t.eCheckbox.isDisabled()){var a=t.eCheckbox.getValue();t.onCheckboxChanged(a)}}),this.addManagedListener(this.eCheckbox.getInputElement(),"dblclick",function(o){uo(o)});var r=this.gridOptionsService.getDocument();this.addManagedListener(this.params.eGridCell,"keydown",function(o){if(o.key===J.SPACE&&!t.eCheckbox.isDisabled()){t.params.eGridCell===r.activeElement&&t.eCheckbox.toggle();var a=t.eCheckbox.getValue();t.onCheckboxChanged(a),o.preventDefault()}})},i.prototype.refresh=function(e){return this.params=e,this.updateCheckbox(e),!0},i.prototype.updateCheckbox=function(e){var t,r,o,a,s=!0;if(e.node.group&&e.column){var l=e.column.getColId();l.startsWith(ia)?a=e.value==null||e.value===""?void 0:e.value==="true":e.node.aggData&&e.node.aggData[l]!==void 0?a=(t=e.value)!==null&&t!==void 0?t:void 0:s=!1}else a=(r=e.value)!==null&&r!==void 0?r:void 0;if(!s){this.eCheckbox.setDisplayed(!1);return}this.eCheckbox.setValue(a);var u=e.disabled!=null?e.disabled:!(!((o=e.column)===null||o===void 0)&&o.isCellEditable(e.node));this.eCheckbox.setDisabled(u);var c=this.localeService.getLocaleTextFunc(),d=Bl(c,a),f=u?d:c("ariaToggleCellValue","Press SPACE to toggle cell value")+" ("+d+")";this.eCheckbox.setInputAriaLabel(f)},i.prototype.onCheckboxChanged=function(e){var t=this.params,r=t.column,o=t.node,a=t.rowIndex,s=t.value,l={type:b.EVENT_CELL_EDITING_STARTED,column:r,colDef:r?.getColDef(),data:o.data,node:o,rowIndex:a,rowPinned:o.rowPinned,value:s};this.eventService.dispatchEvent(l);var u=this.params.node.setDataValue(this.params.column,e,"edit"),c={type:b.EVENT_CELL_EDITING_STOPPED,column:r,colDef:r?.getColDef(),data:o.data,node:o,rowIndex:a,rowPinned:o.rowPinned,value:s,oldValue:s,newValue:e,valueChanged:u};this.eventService.dispatchEvent(c)},i.TEMPLATE=`
        <div class="ag-cell-wrapper ag-checkbox-cell" role="presentation">
            <ag-checkbox role="presentation" ref="eCheckbox"></ag-checkbox>
        </div>`,Ow([be("eCheckbox")],i.prototype,"eCheckbox",void 0),i}(xt),Ew=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),_w=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},bw=function(n){Ew(i,n);function i(){return n.call(this,`
            <div class="ag-cell-wrapper ag-cell-edit-wrapper ag-checkbox-edit">
                <ag-checkbox role="presentation" ref="eCheckbox"></ag-checkbox>
            </div>`)||this}return i.prototype.init=function(e){var t=this,r;this.params=e;var o=(r=e.value)!==null&&r!==void 0?r:void 0;this.eCheckbox.setValue(o),this.eCheckbox.getInputElement().setAttribute("tabindex","-1"),this.setAriaLabel(o),this.addManagedListener(this.eCheckbox,b.EVENT_FIELD_VALUE_CHANGED,function(a){return t.setAriaLabel(a.selected)})},i.prototype.getValue=function(){return this.eCheckbox.getValue()},i.prototype.focusIn=function(){this.eCheckbox.getFocusableElement().focus()},i.prototype.afterGuiAttached=function(){this.params.cellStartedEdit&&this.focusIn()},i.prototype.isPopup=function(){return!1},i.prototype.setAriaLabel=function(e){var t=this.localeService.getLocaleTextFunc(),r=Bl(t,e),o=t("ariaToggleCellValue","Press SPACE to toggle cell value");this.eCheckbox.setInputAriaLabel(o+" ("+r+")")},_w([be("eCheckbox")],i.prototype,"eCheckbox",void 0),i}(xn),Dw=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Gu=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},zp=function(n,i){var e=typeof Symbol=="function"&&n[Symbol.iterator];if(!e)return n;var t=e.call(n),r,o=[],a;try{for(;(i===void 0||i-- >0)&&!(r=t.next()).done;)o.push(r.value)}catch(s){a={error:s}}finally{try{r&&!r.done&&(e=t.return)&&e.call(t)}finally{if(a)throw a.error}}return o},Yp=function(n,i){for(var e=0,t=i.length,r=n.length;e<t;e++,r++)n[r]=i[e];return n},Rw=function(n){Dw(i,n);function i(){var e=n!==null&&n.apply(this,arguments)||this;return e.agGridDefaults={agDateInput:wS,agColumnHeader:xS,agColumnGroupHeader:LS,agSortIndicator:xd,agTextColumnFloatingFilter:bS,agNumberColumnFloatingFilter:ES,agDateColumnFloatingFilter:yS,agReadOnlyFloatingFilter:QC,agAnimateShowChangeCellRenderer:KS,agAnimateSlideCellRenderer:XS,agGroupCellRenderer:Up,agGroupRowRenderer:Up,agLoadingCellRenderer:nw,agCheckboxCellRenderer:Pw,agCellEditor:Hp,agTextCellEditor:Hp,agNumberCellEditor:hw,agDateCellEditor:yw,agDateStringCellEditor:ww,agSelectCellEditor:GS,agLargeTextCellEditor:IS,agCheckboxCellEditor:bw,agTextColumnFilter:Rd,agNumberColumnFilter:Lv,agDateColumnFilter:Dv,agLoadingOverlay:sw,agNoRowsOverlay:uw,agTooltipComponent:dw},e.enterpriseAgDefaultCompsModule={agSetColumnFilter:je.SetFilterModule,agSetColumnFloatingFilter:je.SetFilterModule,agMultiColumnFilter:je.MultiFilterModule,agMultiColumnFloatingFilter:je.MultiFilterModule,agGroupColumnFilter:je.RowGroupingModule,agGroupColumnFloatingFilter:je.RowGroupingModule,agRichSelect:je.RichSelectModule,agRichSelectCellEditor:je.RichSelectModule,agDetailCellRenderer:je.MasterDetailModule,agSparklineCellRenderer:je.SparklinesModule},e.jsComps={},e}return i.prototype.init=function(){var e=this;this.gridOptions.components!=null&&Oi(this.gridOptions.components,function(t,r){return e.registerJsComponent(t,r)})},i.prototype.registerDefaultComponent=function(e,t){if(this.agGridDefaults[e]){console.error("Trying to overwrite a default component. You should call registerComponent");return}this.agGridDefaults[e]=t},i.prototype.registerJsComponent=function(e,t){this.jsComps[e]=t},i.prototype.retrieve=function(e,t){var r=this,o=function(d,f){return{componentFromFramework:f,component:d}},a=this.getFrameworkOverrides().frameworkComponent(t,this.gridOptions.components);if(a!=null)return o(a,!0);var s=this.jsComps[t];if(s){var l=this.getFrameworkOverrides().isFrameworkComponent(s);return o(s,l)}var u=this.agGridDefaults[t];if(u)return o(u,!1);var c=this.enterpriseAgDefaultCompsModule[t];return c?gt.__assertRegistered(c,"AG Grid '"+e+"' component: "+t,this.context.getGridId()):Ut(function(){r.warnAboutMissingComponent(e,t)},"MissingComp"+t),null},i.prototype.warnAboutMissingComponent=function(e,t){var r=Yp(Yp([],zp(Object.keys(this.agGridDefaults).filter(function(a){return!["agCellEditor","agGroupRowRenderer","agSortIndicator"].includes(a)}))),zp(Object.keys(this.jsComps))),o=hs(t,r,!0,.8).values;console.warn("AG Grid: Could not find '"+t+`' component. It was configured as "`+e+": '"+t+`'" but it wasn't found in the list of registered components.`),o.length>0&&console.warn("         Did you mean: ["+o.slice(0,3)+"]?"),console.warn("If using a custom component check it has been registered as described in: https://ag-grid.com/javascript-data-grid/components/")},Gu([T("gridOptions")],i.prototype,"gridOptions",void 0),Gu([Oe],i.prototype,"init",null),i=Gu([Ue("userComponentRegistry")],i),i}(ve),xw={propertyName:"dateComponent",cellRenderer:!1},Aw={propertyName:"headerComponent",cellRenderer:!1},Lw={propertyName:"headerGroupComponent",cellRenderer:!1},Kp={propertyName:"cellRenderer",cellRenderer:!0},Mw={propertyName:"cellEditor",cellRenderer:!1},Qp={propertyName:"innerRenderer",cellRenderer:!0},Nw={propertyName:"loadingOverlayComponent",cellRenderer:!1},Fw={propertyName:"noRowsOverlayComponent",cellRenderer:!1},Iw={propertyName:"tooltipComponent",cellRenderer:!1},jc={propertyName:"filter",cellRenderer:!1},kw={propertyName:"floatingFilterComponent",cellRenderer:!1},Gw={propertyName:"toolPanel",cellRenderer:!1},Vw={propertyName:"statusPanel",cellRenderer:!1},Bw={propertyName:"fullWidthCellRenderer",cellRenderer:!0},Hw={propertyName:"loadingCellRenderer",cellRenderer:!0},Ww={propertyName:"groupRowRenderer",cellRenderer:!0},Uw={propertyName:"detailCellRenderer",cellRenderer:!0},jw=function(){function n(){}return n.getFloatingFilterType=function(i){return this.filterToFloatingFilterMapping[i]},n.filterToFloatingFilterMapping={set:"agSetColumnFloatingFilter",agSetColumnFilter:"agSetColumnFloatingFilter",multi:"agMultiColumnFloatingFilter",agMultiColumnFilter:"agMultiColumnFloatingFilter",group:"agGroupColumnFloatingFilter",agGroupColumnFilter:"agGroupColumnFloatingFilter",number:"agNumberColumnFloatingFilter",agNumberColumnFilter:"agNumberColumnFloatingFilter",date:"agDateColumnFloatingFilter",agDateColumnFilter:"agDateColumnFloatingFilter",text:"agTextColumnFloatingFilter",agTextColumnFilter:"agTextColumnFloatingFilter"},n}(),zw=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),kn=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},Yw=function(n){zw(i,n);function i(){return n!==null&&n.apply(this,arguments)||this}return i.prototype.getHeaderCompDetails=function(e,t){return this.getCompDetails(e,Aw,"agColumnHeader",t)},i.prototype.getHeaderGroupCompDetails=function(e){var t=e.columnGroup.getColGroupDef();return this.getCompDetails(t,Lw,"agColumnGroupHeader",e)},i.prototype.getFullWidthCellRendererDetails=function(e){return this.getCompDetails(this.gridOptions,Bw,null,e,!0)},i.prototype.getFullWidthLoadingCellRendererDetails=function(e){return this.getCompDetails(this.gridOptions,Hw,"agLoadingCellRenderer",e,!0)},i.prototype.getFullWidthGroupCellRendererDetails=function(e){return this.getCompDetails(this.gridOptions,Ww,"agGroupRowRenderer",e,!0)},i.prototype.getFullWidthDetailCellRendererDetails=function(e){return this.getCompDetails(this.gridOptions,Uw,"agDetailCellRenderer",e,!0)},i.prototype.getInnerRendererDetails=function(e,t){return this.getCompDetails(e,Qp,null,t)},i.prototype.getFullWidthGroupRowInnerCellRenderer=function(e,t){return this.getCompDetails(e,Qp,null,t)},i.prototype.getCellRendererDetails=function(e,t){return this.getCompDetails(e,Kp,null,t)},i.prototype.getCellEditorDetails=function(e,t){return this.getCompDetails(e,Mw,"agCellEditor",t,!0)},i.prototype.getFilterDetails=function(e,t,r){return this.getCompDetails(e,jc,r,t,!0)},i.prototype.getDateCompDetails=function(e){return this.getCompDetails(this.gridOptions,xw,"agDateInput",e,!0)},i.prototype.getLoadingOverlayCompDetails=function(e){return this.getCompDetails(this.gridOptions,Nw,"agLoadingOverlay",e,!0)},i.prototype.getNoRowsOverlayCompDetails=function(e){return this.getCompDetails(this.gridOptions,Fw,"agNoRowsOverlay",e,!0)},i.prototype.getTooltipCompDetails=function(e){return this.getCompDetails(e.colDef,Iw,"agTooltipComponent",e,!0)},i.prototype.getSetFilterCellRendererDetails=function(e,t){return this.getCompDetails(e,Kp,null,t)},i.prototype.getFloatingFilterCompDetails=function(e,t,r){return this.getCompDetails(e,kw,r,t)},i.prototype.getToolPanelCompDetails=function(e,t){return this.getCompDetails(e,Gw,null,t,!0)},i.prototype.getStatusPanelCompDetails=function(e,t){return this.getCompDetails(e,Vw,null,t,!0)},i.prototype.getCompDetails=function(e,t,r,o,a){var s=this;a===void 0&&(a=!1);var l=t.propertyName,u=t.cellRenderer,c=this.getCompKeys(e,t,o),d=c.compName,f=c.jsComp,y=c.fwComp,S=c.paramsFromSelector,w=c.popupFromSelector,E=c.popupPositionFromSelector,_=function(ne){var ee=s.userComponentRegistry.retrieve(l,ne);ee&&(f=ee.componentFromFramework?void 0:ee.component,y=ee.componentFromFramework?ee.component:void 0)};if(d!=null&&_(d),f==null&&y==null&&r!=null&&_(r),f&&u&&!this.agComponentUtils.doesImplementIComponent(f)&&(f=this.agComponentUtils.adaptFunction(l,f)),!f&&!y){a&&console.error("AG Grid: Could not find component "+d+", did you forget to configure this component?");return}var L=this.mergeParamsWithApplicationProvidedParams(e,t,o,S),P=f==null,V=f||y;return{componentFromFramework:P,componentClass:V,params:L,type:t,popupFromSelector:w,popupPositionFromSelector:E,newAgStackInstance:function(){return s.newAgStackInstance(V,P,L,t)}}},i.prototype.getCompKeys=function(e,t,r){var o=this,a=t.propertyName,s,l,u,c,d,f;if(e){var y=e,S=y[a+"Selector"],w=S?S(r):null,E=function(_){if(typeof _=="string")s=_;else if(_!=null&&_!==!0){var L=o.getFrameworkOverrides().isFrameworkComponent(_);L?u=_:l=_}};w?(E(w.component),c=w.params,d=w.popup,f=w.popupPosition):E(y[a])}return{compName:s,jsComp:l,fwComp:u,paramsFromSelector:c,popupFromSelector:d,popupPositionFromSelector:f}},i.prototype.newAgStackInstance=function(e,t,r,o){var a=o.propertyName,s=!t,l;if(s)l=new e;else{var u=this.componentMetadataProvider.retrieve(a);l=this.frameworkComponentWrapper.wrap(e,u.mandatoryMethodList,u.optionalMethodList,o)}var c=this.initComponent(l,r);return c==null?jr.resolve(l):c.then(function(){return l})},i.prototype.mergeParamsWithApplicationProvidedParams=function(e,t,r,o){o===void 0&&(o=null);var a={context:this.gridOptionsService.context,columnApi:this.gridOptionsService.columnApi,api:this.gridOptionsService.api};Sr(a,r);var s=e,l=s&&s[t.propertyName+"Params"];if(typeof l=="function"){var u=l(r);Sr(a,u)}else typeof l=="object"&&Sr(a,l);return Sr(a,o),a},i.prototype.initComponent=function(e,t){if(this.context.createBean(e),e.init!=null)return e.init(t)},i.prototype.getDefaultFloatingFilterType=function(e,t){if(e==null)return null;var r=null,o=this.getCompKeys(e,jc),a=o.compName,s=o.jsComp,l=o.fwComp;if(a)r=jw.getFloatingFilterType(a);else{var u=s==null&&l==null&&e.filter===!0;u&&(r=t())}return r},kn([T("gridOptions")],i.prototype,"gridOptions",void 0),kn([T("agComponentUtils")],i.prototype,"agComponentUtils",void 0),kn([T("componentMetadataProvider")],i.prototype,"componentMetadataProvider",void 0),kn([T("userComponentRegistry")],i.prototype,"userComponentRegistry",void 0),kn([Zt("frameworkComponentWrapper")],i.prototype,"frameworkComponentWrapper",void 0),i=kn([Ue("userComponentFactory")],i),i}(ve),Pl;(function(n){n[n.SINGLE_SHEET=0]="SINGLE_SHEET",n[n.MULTI_SHEET=1]="MULTI_SHEET"})(Pl||(Pl={}));var Kw=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Vu=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},Qw=function(n){Kw(i,n);function i(){var e=n!==null&&n.apply(this,arguments)||this;return e.dragEndFunctions=[],e.dragSources=[],e}return i.prototype.removeAllListeners=function(){this.dragSources.forEach(this.removeListener.bind(this)),this.dragSources.length=0},i.prototype.removeListener=function(e){var t=e.dragSource.eElement,r=e.mouseDownListener;if(t.removeEventListener("mousedown",r),e.touchEnabled){var o=e.touchStartListener;t.removeEventListener("touchstart",o,{passive:!0})}},i.prototype.removeDragSource=function(e){var t=this.dragSources.find(function(r){return r.dragSource===e});t&&(this.removeListener(t),mr(this.dragSources,t))},i.prototype.isDragging=function(){return this.dragging},i.prototype.addDragSource=function(e){var t=this,r=this.onMouseDown.bind(this,e),o=e.eElement,a=e.includeTouch,s=e.stopPropagationForTouch;o.addEventListener("mousedown",r);var l=null,u=this.gridOptionsService.is("suppressTouch");a&&!u&&(l=function(c){vd(c.target)||(c.cancelable&&(c.preventDefault(),s&&c.stopPropagation()),t.onTouchStart(e,c))},o.addEventListener("touchstart",l,{passive:!1})),this.dragSources.push({dragSource:e,mouseDownListener:r,touchStartListener:l,touchEnabled:!!a})},i.prototype.getStartTarget=function(){return this.startTarget},i.prototype.onTouchStart=function(e,t){var r=this;this.currentDragParams=e,this.dragging=!1;var o=t.touches[0];this.touchLastTime=o,this.touchStart=o;var a=function(d){return r.onTouchMove(d,e.eElement)},s=function(d){return r.onTouchUp(d,e.eElement)},l=function(d){d.cancelable&&d.preventDefault()},u=t.target,c=[{target:this.gridOptionsService.getRootNode(),type:"touchmove",listener:l,options:{passive:!1}},{target:u,type:"touchmove",listener:a,options:{passive:!0}},{target:u,type:"touchend",listener:s,options:{passive:!0}},{target:u,type:"touchcancel",listener:s,options:{passive:!0}}];this.addTemporaryEvents(c),e.dragStartPixels===0&&this.onCommonMove(o,this.touchStart,e.eElement)},i.prototype.onMouseDown=function(e,t){var r=this,o=t;if(!(e.skipMouseEvent&&e.skipMouseEvent(t))&&!o._alreadyProcessedByDragService&&(o._alreadyProcessedByDragService=!0,t.button===0)){this.shouldPreventMouseEvent(t)&&t.preventDefault(),this.currentDragParams=e,this.dragging=!1,this.mouseStartEvent=t,this.startTarget=t.target;var a=function(d){return r.onMouseMove(d,e.eElement)},s=function(d){return r.onMouseUp(d,e.eElement)},l=function(d){return d.preventDefault()},u=this.gridOptionsService.getRootNode(),c=[{target:u,type:"mousemove",listener:a},{target:u,type:"mouseup",listener:s},{target:u,type:"contextmenu",listener:l}];this.addTemporaryEvents(c),e.dragStartPixels===0&&this.onMouseMove(t,e.eElement)}},i.prototype.addTemporaryEvents=function(e){e.forEach(function(t){var r=t.target,o=t.type,a=t.listener,s=t.options;r.addEventListener(o,a,s)}),this.dragEndFunctions.push(function(){e.forEach(function(t){var r=t.target,o=t.type,a=t.listener,s=t.options;r.removeEventListener(o,a,s)})})},i.prototype.isEventNearStartEvent=function(e,t){var r=this.currentDragParams.dragStartPixels,o=ue(r)?r:4;return Od(e,t,o)},i.prototype.getFirstActiveTouch=function(e){for(var t=0;t<e.length;t++)if(e[t].identifier===this.touchStart.identifier)return e[t];return null},i.prototype.onCommonMove=function(e,t,r){if(!this.dragging){if(!this.dragging&&this.isEventNearStartEvent(e,t))return;this.dragging=!0;var o={type:b.EVENT_DRAG_STARTED,target:r};this.eventService.dispatchEvent(o),this.currentDragParams.onDragStart(t),this.currentDragParams.onDragging(t)}this.currentDragParams.onDragging(e)},i.prototype.onTouchMove=function(e,t){var r=this.getFirstActiveTouch(e.touches);r&&this.onCommonMove(r,this.touchStart,t)},i.prototype.onMouseMove=function(e,t){this.shouldPreventMouseEvent(e)&&e.preventDefault(),this.onCommonMove(e,this.mouseStartEvent,t)},i.prototype.shouldPreventMouseEvent=function(e){var t=this.gridOptionsService.is("enableCellTextSelection"),r=Fr(),o=e.type==="mousemove";return(t&&o||r)&&e.cancelable&&this.mouseEventService.isEventFromThisGrid(e)&&!this.isOverFormFieldElement(e)},i.prototype.isOverFormFieldElement=function(e){var t=e.target,r=t?.tagName.toLocaleLowerCase();return!!r?.match("^a$|textarea|input|select|button")},i.prototype.onTouchUp=function(e,t){var r=this.getFirstActiveTouch(e.changedTouches);r||(r=this.touchLastTime),this.onUpCommon(r,t)},i.prototype.onMouseUp=function(e,t){this.onUpCommon(e,t)},i.prototype.onUpCommon=function(e,t){if(this.dragging){this.dragging=!1,this.currentDragParams.onDragStop(e);var r={type:b.EVENT_DRAG_STOPPED,target:t};this.eventService.dispatchEvent(r)}this.mouseStartEvent=null,this.startTarget=null,this.touchStart=null,this.touchLastTime=null,this.currentDragParams=null,this.dragEndFunctions.forEach(function(o){return o()}),this.dragEndFunctions.length=0},Vu([T("mouseEventService")],i.prototype,"mouseEventService",void 0),Vu([Ki],i.prototype,"removeAllListeners",null),i=Vu([Ue("dragService")],i),i}(ve),Hv=function(){function n(i){this.tickingInterval=null,this.onScrollCallback=null,this.scrollContainer=i.scrollContainer,this.scrollHorizontally=i.scrollAxis.indexOf("x")!==-1,this.scrollVertically=i.scrollAxis.indexOf("y")!==-1,this.scrollByTick=i.scrollByTick!=null?i.scrollByTick:20,i.onScrollCallback&&(this.onScrollCallback=i.onScrollCallback),this.scrollVertically&&(this.getVerticalPosition=i.getVerticalPosition,this.setVerticalPosition=i.setVerticalPosition),this.scrollHorizontally&&(this.getHorizontalPosition=i.getHorizontalPosition,this.setHorizontalPosition=i.setHorizontalPosition),this.shouldSkipVerticalScroll=i.shouldSkipVerticalScroll||function(){return!1},this.shouldSkipHorizontalScroll=i.shouldSkipHorizontalScroll||function(){return!1}}return n.prototype.check=function(i,e){e===void 0&&(e=!1);var t=e||this.shouldSkipVerticalScroll();if(!(t&&this.shouldSkipHorizontalScroll())){var r=this.scrollContainer.getBoundingClientRect(),o=this.scrollByTick;this.tickLeft=i.clientX<r.left+o,this.tickRight=i.clientX>r.right-o,this.tickUp=i.clientY<r.top+o&&!t,this.tickDown=i.clientY>r.bottom-o&&!t,this.tickLeft||this.tickRight||this.tickUp||this.tickDown?this.ensureTickingStarted():this.ensureCleared()}},n.prototype.ensureTickingStarted=function(){this.tickingInterval===null&&(this.tickingInterval=window.setInterval(this.doTick.bind(this),100),this.tickCount=0)},n.prototype.doTick=function(){this.tickCount++;var i;if(i=this.tickCount>20?200:this.tickCount>10?80:40,this.scrollVertically){var e=this.getVerticalPosition();this.tickUp&&this.setVerticalPosition(e-i),this.tickDown&&this.setVerticalPosition(e+i)}if(this.scrollHorizontally){var t=this.getHorizontalPosition();this.tickLeft&&this.setHorizontalPosition(t-i),this.tickRight&&this.setHorizontalPosition(t+i)}this.onScrollCallback&&this.onScrollCallback()},n.prototype.ensureCleared=function(){this.tickingInterval&&(window.clearInterval(this.tickingInterval),this.tickingInterval=null)},n}(),qw=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),qp=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},Bu="ag-list-item-hovered";(function(n){qw(i,n);function i(e,t,r){var o=n.call(this)||this;return o.comp=e,o.virtualList=t,o.params=r,o.currentDragValue=null,o.lastHoveredListItem=null,o}return i.prototype.postConstruct=function(){this.addManagedListener(this.params.eventSource,this.params.listItemDragStartEvent,this.listItemDragStart.bind(this)),this.addManagedListener(this.params.eventSource,this.params.listItemDragEndEvent,this.listItemDragEnd.bind(this)),this.createDropTarget(),this.createAutoScrollService()},i.prototype.listItemDragStart=function(e){this.currentDragValue=this.params.getCurrentDragValue(e),this.moveBlocked=this.params.isMoveBlocked(this.currentDragValue)},i.prototype.listItemDragEnd=function(){var e=this;window.setTimeout(function(){e.currentDragValue=null,e.moveBlocked=!1},10)},i.prototype.createDropTarget=function(){var e=this,t={isInterestedIn:function(r){return r===e.params.dragSourceType},getIconName:function(){return zi[e.moveBlocked?"ICON_NOT_ALLOWED":"ICON_MOVE"]},getContainer:function(){return e.comp.getGui()},onDragging:function(r){return e.onDragging(r)},onDragStop:function(){return e.onDragStop()},onDragLeave:function(){return e.onDragLeave()}};this.dragAndDropService.addDropTarget(t)},i.prototype.createAutoScrollService=function(){var e=this.virtualList.getGui();this.autoScrollService=new Hv({scrollContainer:e,scrollAxis:"y",getVerticalPosition:function(){return e.scrollTop},setVerticalPosition:function(t){return e.scrollTop=t}})},i.prototype.onDragging=function(e){if(!(!this.currentDragValue||this.moveBlocked)){var t=this.getListDragItem(e),r=this.virtualList.getComponentAt(t.rowIndex);if(r){var o=r.getGui().parentElement;this.lastHoveredListItem&&this.lastHoveredListItem.rowIndex===t.rowIndex&&this.lastHoveredListItem.position===t.position||(this.autoScrollService.check(e.event),this.clearHoveredItems(),this.lastHoveredListItem=t,kc(o,Bu),kc(o,"ag-item-highlight-"+t.position))}}},i.prototype.getListDragItem=function(e){var t=this.virtualList.getGui(),r=parseFloat(window.getComputedStyle(t).paddingTop),o=this.virtualList.getRowHeight(),a=this.virtualList.getScrollTop(),s=Math.max(0,(e.y-r+a)/o),l=this.params.getNumRows(this.comp)-1,u=Math.min(l,s)|0;return{rowIndex:u,position:Math.round(s)>s||s>l?"bottom":"top",component:this.virtualList.getComponentAt(u)}},i.prototype.onDragStop=function(){this.moveBlocked||(this.params.moveItem(this.currentDragValue,this.lastHoveredListItem),this.clearHoveredItems(),this.autoScrollService.ensureCleared())},i.prototype.onDragLeave=function(){this.clearHoveredItems(),this.autoScrollService.ensureCleared()},i.prototype.clearHoveredItems=function(){var e=this.virtualList.getGui();e.querySelectorAll("."+Bu).forEach(function(t){[Bu,"ag-item-highlight-top","ag-item-highlight-bottom"].forEach(function(r){t.classList.remove(r)})}),this.lastHoveredListItem=null},qp([T("dragAndDropService")],i.prototype,"dragAndDropService",void 0),qp([Oe],i.prototype,"postConstruct",null),i})(ve);var To;(function(n){n[n.Above=0]="Above",n[n.Below=1]="Below"})(To||(To={}));var $t;(function(n){n.EVERYTHING="group",n.FILTER="filter",n.SORT="sort",n.MAP="map",n.AGGREGATE="aggregate",n.FILTER_AGGREGATES="filter_aggregates",n.PIVOT="pivot",n.NOTHING="nothing"})($t||($t={}));var Xt=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o};function wn(n){var i=n,e=i!=null&&i.getFrameworkComponentInstance!=null;return e?i.getFrameworkComponentInstance():n}var Xw=function(){function n(){this.detailGridInfoMap={},this.destroyCalled=!1}return n.prototype.registerOverlayWrapperComp=function(i){this.overlayWrapperComp=i},n.prototype.registerSideBarComp=function(i){this.sideBarComp=i},n.prototype.init=function(){var i=this;switch(this.rowModel.getType()){case"clientSide":this.clientSideRowModel=this.rowModel;break;case"infinite":this.infiniteRowModel=this.rowModel;break;case"serverSide":this.serverSideRowModel=this.rowModel;break}this.ctrlsService.whenReady(function(){i.gridBodyCtrl=i.ctrlsService.getGridBodyCtrl()})},n.prototype.__getAlignedGridService=function(){return this.alignedGridsService},n.prototype.__getContext=function(){return this.context},n.prototype.getSetterMethod=function(i){return"set"+i.charAt(0).toUpperCase()+i.substring(1)},n.prototype.__setPropertyOnly=function(i,e){return this.gos.__setPropertyOnly(i,e)},n.prototype.__updateProperty=function(i,e,t,r){r===void 0&&(r=void 0),this.gos.set(i,e,t,{},r);var o=this.getSetterMethod(i),a=this;a[o]&&a[o](e)},n.prototype.getGridId=function(){return this.context.getGridId()},n.prototype.addDetailGridInfo=function(i,e){this.detailGridInfoMap[i]=e},n.prototype.removeDetailGridInfo=function(i){this.detailGridInfoMap[i]=void 0},n.prototype.getDetailGridInfo=function(i){return this.detailGridInfoMap[i]},n.prototype.forEachDetailGridInfo=function(i){var e=0;Oi(this.detailGridInfoMap,function(t,r){ue(r)&&(i(r,e),e++)})},n.prototype.getDataAsCsv=function(i){if(gt.__assertRegistered(je.CsvExportModule,"api.getDataAsCsv",this.context.getGridId()))return this.csvCreator.getDataAsCsv(i)},n.prototype.exportDataAsCsv=function(i){gt.__assertRegistered(je.CsvExportModule,"api.exportDataAsCSv",this.context.getGridId())&&this.csvCreator.exportDataAsCsv(i)},n.prototype.getExcelExportMode=function(i){var e=this.gos.get("defaultExcelExportParams"),t=Object.assign({exportMode:"xlsx"},e,i);return t.exportMode},n.prototype.assertNotExcelMultiSheet=function(i,e){if(!gt.__assertRegistered(je.ExcelExportModule,"api."+i,this.context.getGridId()))return!1;var t=this.getExcelExportMode(e);return this.excelCreator.getFactoryMode(t)===Pl.MULTI_SHEET?(console.warn("AG Grid: The Excel Exporter is currently on Multi Sheet mode. End that operation by calling 'api.getMultipleSheetAsExcel()' or 'api.exportMultipleSheetsAsExcel()'"),!1):!0},n.prototype.getDataAsExcel=function(i){if(this.assertNotExcelMultiSheet("getDataAsExcel",i))return this.excelCreator.getDataAsExcel(i)},n.prototype.exportDataAsExcel=function(i){this.assertNotExcelMultiSheet("exportDataAsExcel",i)&&this.excelCreator.exportDataAsExcel(i)},n.prototype.getSheetDataForExcel=function(i){if(gt.__assertRegistered(je.ExcelExportModule,"api.getSheetDataForExcel",this.context.getGridId())){var e=this.getExcelExportMode(i);return this.excelCreator.setFactoryMode(Pl.MULTI_SHEET,e),this.excelCreator.getSheetDataForExcel(i)}},n.prototype.getMultipleSheetsAsExcel=function(i){if(gt.__assertRegistered(je.ExcelExportModule,"api.getMultipleSheetsAsExcel",this.context.getGridId()))return this.excelCreator.getMultipleSheetsAsExcel(i)},n.prototype.exportMultipleSheetsAsExcel=function(i){if(gt.__assertRegistered(je.ExcelExportModule,"api.exportMultipleSheetsAsExcel",this.context.getGridId()))return this.excelCreator.exportMultipleSheetsAsExcel(i)},n.prototype.setTreeData=function(i){this.gos.set("treeData",i)},n.prototype.setGridAriaProperty=function(i,e){if(i){var t=this.ctrlsService.getGridBodyCtrl().getGui(),r="aria-"+i;e===null?t.removeAttribute(r):t.setAttribute(r,e)}},n.prototype.logMissingRowModel=function(i){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];console.error("AG Grid: api."+i+" can only be called when gridOptions.rowModelType is "+e.join(" or "))},n.prototype.setServerSideDatasource=function(i){this.serverSideRowModel?this.serverSideRowModel.setDatasource(i):this.logMissingRowModel("setServerSideDatasource","serverSide")},n.prototype.setCacheBlockSize=function(i){this.serverSideRowModel?(this.gos.set("cacheBlockSize",i),this.serverSideRowModel.resetRootStore()):this.logMissingRowModel("setCacheBlockSize","serverSide")},n.prototype.setDatasource=function(i){this.gos.isRowModelType("infinite")?this.rowModel.setDatasource(i):this.logMissingRowModel("setDatasource","infinite")},n.prototype.setViewportDatasource=function(i){this.gos.isRowModelType("viewport")?this.rowModel.setViewportDatasource(i):this.logMissingRowModel("setViewportDatasource","viewport")},n.prototype.setRowData=function(i){var e=this.immutableService==null;if(e){this.logMissingRowModel("setRowData","clientSide");return}this.immutableService.isActive()?this.immutableService.setRowData(i):(this.selectionService.reset(),this.clientSideRowModel.setRowData(i))},n.prototype.setPinnedTopRowData=function(i){this.pinnedRowModel.setPinnedTopRowData(i)},n.prototype.setPinnedBottomRowData=function(i){this.pinnedRowModel.setPinnedBottomRowData(i)},n.prototype.getPinnedTopRowCount=function(){return this.pinnedRowModel.getPinnedTopRowCount()},n.prototype.getPinnedBottomRowCount=function(){return this.pinnedRowModel.getPinnedBottomRowCount()},n.prototype.getPinnedTopRow=function(i){return this.pinnedRowModel.getPinnedTopRow(i)},n.prototype.getPinnedBottomRow=function(i){return this.pinnedRowModel.getPinnedBottomRow(i)},n.prototype.setColumnDefs=function(i,e){e===void 0&&(e="api"),this.columnModel.setColumnDefs(i,e),this.gos.set("columnDefs",i,!0,{source:e})},n.prototype.setAutoGroupColumnDef=function(i,e){e===void 0&&(e="api"),this.gos.set("autoGroupColumnDef",i,!0,{source:e})},n.prototype.setDefaultColDef=function(i,e){e===void 0&&(e="api"),this.gos.set("defaultColDef",i,!0,{source:e})},n.prototype.setColumnTypes=function(i,e){e===void 0&&(e="api"),this.gos.set("columnTypes",i,!0,{source:e})},n.prototype.expireValueCache=function(){this.valueCache.expire()},n.prototype.getVerticalPixelRange=function(){return this.gridBodyCtrl.getScrollFeature().getVScrollPosition()},n.prototype.getHorizontalPixelRange=function(){return this.gridBodyCtrl.getScrollFeature().getHScrollPosition()},n.prototype.setAlwaysShowHorizontalScroll=function(i){this.gos.set("alwaysShowHorizontalScroll",i)},n.prototype.setAlwaysShowVerticalScroll=function(i){this.gos.set("alwaysShowVerticalScroll",i)},n.prototype.refreshCells=function(i){i===void 0&&(i={}),this.rowRenderer.refreshCells(i)},n.prototype.flashCells=function(i){i===void 0&&(i={}),this.rowRenderer.flashCells(i)},n.prototype.redrawRows=function(i){i===void 0&&(i={});var e=i?i.rowNodes:void 0;this.rowRenderer.redrawRows(e)},n.prototype.setFunctionsReadOnly=function(i){this.gos.set("functionsReadOnly",i)},n.prototype.refreshHeader=function(){this.ctrlsService.getHeaderRowContainerCtrls().forEach(function(i){return i.refresh()})},n.prototype.isAnyFilterPresent=function(){return this.filterManager.isAnyFilterPresent()},n.prototype.isColumnFilterPresent=function(){return this.filterManager.isColumnFilterPresent()||this.filterManager.isAggregateFilterPresent()},n.prototype.isQuickFilterPresent=function(){return this.filterManager.isQuickFilterPresent()},n.prototype.getModel=function(){return this.rowModel},n.prototype.setRowNodeExpanded=function(i,e,t){i&&(t&&i.parent&&i.parent.level!==-1&&this.setRowNodeExpanded(i.parent,e,t),i.setExpanded(e))},n.prototype.onGroupExpandedOrCollapsed=function(){if(vt(this.clientSideRowModel)){this.logMissingRowModel("onGroupExpandedOrCollapsed","clientSide");return}this.clientSideRowModel.refreshModel({step:$t.MAP})},n.prototype.refreshClientSideRowModel=function(i){if(vt(this.clientSideRowModel)){this.logMissingRowModel("refreshClientSideRowModel","clientSide");return}this.clientSideRowModel.refreshModel(i)},n.prototype.isAnimationFrameQueueEmpty=function(){return this.animationFrameService.isQueueEmpty()},n.prototype.flushAllAnimationFrames=function(){this.animationFrameService.flushAllFrames()},n.prototype.getRowNode=function(i){return this.rowModel.getRowNode(i)},n.prototype.getSizesForCurrentTheme=function(){return{rowHeight:this.gos.getRowHeightAsNumber(),headerHeight:this.columnModel.getHeaderHeight()}},n.prototype.expandAll=function(){this.clientSideRowModel?this.clientSideRowModel.expandOrCollapseAll(!0):this.serverSideRowModel?this.serverSideRowModel.expandAll(!0):this.logMissingRowModel("expandAll","clientSide","serverSide")},n.prototype.collapseAll=function(){this.clientSideRowModel?this.clientSideRowModel.expandOrCollapseAll(!1):this.serverSideRowModel?this.serverSideRowModel.expandAll(!1):this.logMissingRowModel("expandAll","clientSide","serverSide")},n.prototype.addRenderedRowListener=function(i,e,t){this.rowRenderer.addRenderedRowListener(i,e,t)},n.prototype.getQuickFilter=function(){return this.gos.get("quickFilterText")},n.prototype.setQuickFilter=function(i){this.gos.set("quickFilterText",i)},n.prototype.setExcludeHiddenColumnsFromQuickFilter=function(i){Rr("30","setExcludeHiddenColumnsFromQuickFilter",void 0,"Hidden columns are now excluded from the Quick Filter by default. This can be toggled using `setIncludeHiddenColumnsInQuickFilter`"),this.setIncludeHiddenColumnsInQuickFilter(!i)},n.prototype.setIncludeHiddenColumnsInQuickFilter=function(i){this.gos.set("includeHiddenColumnsInQuickFilter",i)},n.prototype.setQuickFilterParser=function(i){this.gos.set("quickFilterParser",i)},n.prototype.setQuickFilterMatcher=function(i){this.gos.set("quickFilterMatcher",i)},n.prototype.getAdvancedFilterModel=function(){return gt.__assertRegistered(je.AdvancedFilterModule,"api.getAdvancedFilterModel",this.context.getGridId())?this.filterManager.getAdvancedFilterModel():null},n.prototype.setAdvancedFilterModel=function(i){this.gos.set("advancedFilterModel",i)},n.prototype.setEnableAdvancedFilter=function(i){this.gos.set("enableAdvancedFilter",i)},n.prototype.setIncludeHiddenColumnsInAdvancedFilter=function(i){this.gos.set("includeHiddenColumnsInAdvancedFilter",i)},n.prototype.setAdvancedFilterParent=function(i){this.gos.set("advancedFilterParent",i)},n.prototype.setAdvancedFilterBuilderParams=function(i){this.gos.set("advancedFilterBuilderParams",i)},n.prototype.showAdvancedFilterBuilder=function(){gt.__assertRegistered(je.AdvancedFilterModule,"api.setAdvancedFilterModel",this.context.getGridId())&&this.filterManager.showAdvancedFilterBuilder("api")},n.prototype.setNodesSelected=function(i){var e=i.nodes.every(function(s){return s.rowPinned?(console.warn("AG Grid: cannot select pinned rows"),!1):s.id===void 0?(console.warn("AG Grid: cannot select node until id for node is known"),!1):!0});if(e){var t=i.nodes,r=i.source,o=i.newValue,a=t;this.selectionService.setNodesSelected({nodes:a,source:r??"api",newValue:o})}},n.prototype.selectAll=function(i){i===void 0&&(i="apiSelectAll"),this.selectionService.selectAllRowNodes({source:i})},n.prototype.deselectAll=function(i){i===void 0&&(i="apiSelectAll"),this.selectionService.deselectAllRowNodes({source:i})},n.prototype.selectAllFiltered=function(i){i===void 0&&(i="apiSelectAllFiltered"),this.selectionService.selectAllRowNodes({source:i,justFiltered:!0})},n.prototype.deselectAllFiltered=function(i){i===void 0&&(i="apiSelectAllFiltered"),this.selectionService.deselectAllRowNodes({source:i,justFiltered:!0})},n.prototype.getServerSideSelectionState=function(){return vt(this.serverSideRowModel)?(this.logMissingRowModel("getServerSideSelectionState","serverSide"),null):this.selectionService.getServerSideSelectionState()},n.prototype.setServerSideSelectionState=function(i){if(vt(this.serverSideRowModel)){this.logMissingRowModel("setServerSideSelectionState","serverSide");return}this.selectionService.setServerSideSelectionState(i)},n.prototype.selectAllOnCurrentPage=function(i){i===void 0&&(i="apiSelectAllCurrentPage"),this.selectionService.selectAllRowNodes({source:i,justCurrentPage:!0})},n.prototype.deselectAllOnCurrentPage=function(i){i===void 0&&(i="apiSelectAllCurrentPage"),this.selectionService.deselectAllRowNodes({source:i,justCurrentPage:!0})},n.prototype.sizeColumnsToFit=function(i){this.gridBodyCtrl.sizeColumnsToFit(i)},n.prototype.showLoadingOverlay=function(){this.overlayWrapperComp.showLoadingOverlay()},n.prototype.showNoRowsOverlay=function(){this.overlayWrapperComp.showNoRowsOverlay()},n.prototype.hideOverlay=function(){this.overlayWrapperComp.hideOverlay()},n.prototype.getSelectedNodes=function(){return this.selectionService.getSelectedNodes()},n.prototype.getSelectedRows=function(){return this.selectionService.getSelectedRows()},n.prototype.getBestCostNodeSelection=function(){if(vt(this.clientSideRowModel)){this.logMissingRowModel("getBestCostNodeSelection","clientSide");return}return this.selectionService.getBestCostNodeSelection()},n.prototype.getRenderedNodes=function(){return this.rowRenderer.getRenderedNodes()},n.prototype.ensureColumnVisible=function(i,e){e===void 0&&(e="auto"),this.gridBodyCtrl.getScrollFeature().ensureColumnVisible(i,e)},n.prototype.ensureIndexVisible=function(i,e){this.gridBodyCtrl.getScrollFeature().ensureIndexVisible(i,e)},n.prototype.ensureNodeVisible=function(i,e){e===void 0&&(e=null),this.gridBodyCtrl.getScrollFeature().ensureNodeVisible(i,e)},n.prototype.forEachLeafNode=function(i){if(vt(this.clientSideRowModel)){this.logMissingRowModel("forEachLeafNode","clientSide");return}this.clientSideRowModel.forEachLeafNode(i)},n.prototype.forEachNode=function(i,e){this.rowModel.forEachNode(i,e)},n.prototype.forEachNodeAfterFilter=function(i){if(vt(this.clientSideRowModel)){this.logMissingRowModel("forEachNodeAfterFilter","clientSide");return}this.clientSideRowModel.forEachNodeAfterFilter(i)},n.prototype.forEachNodeAfterFilterAndSort=function(i){if(vt(this.clientSideRowModel)){this.logMissingRowModel("forEachNodeAfterFilterAndSort","clientSide");return}this.clientSideRowModel.forEachNodeAfterFilterAndSort(i)},n.prototype.getFilterInstance=function(i,e){return this.filterManager.getFilterInstance(i,e)},n.prototype.destroyFilter=function(i){var e=this.columnModel.getPrimaryColumn(i);if(e)return this.filterManager.destroyFilter(e,"api")},n.prototype.getStatusPanel=function(i){if(gt.__assertRegistered(je.StatusBarModule,"api.getStatusPanel",this.context.getGridId())){var e=this.statusBarService.getStatusPanel(i);return wn(e)}},n.prototype.getColumnDef=function(i){var e=this.columnModel.getPrimaryColumn(i);return e?e.getColDef():null},n.prototype.getColumnDefs=function(){return this.columnModel.getColumnDefs()},n.prototype.onFilterChanged=function(i){i===void 0&&(i="api"),this.filterManager.onFilterChanged({source:i})},n.prototype.onSortChanged=function(){this.sortController.onSortChanged("api")},n.prototype.setFilterModel=function(i){this.filterManager.setFilterModel(i)},n.prototype.getFilterModel=function(){return this.filterManager.getFilterModel()},n.prototype.getFocusedCell=function(){return this.focusService.getFocusedCell()},n.prototype.clearFocusedCell=function(){return this.focusService.clearFocusedCell()},n.prototype.setFocusedCell=function(i,e,t){this.focusService.setFocusedCell({rowIndex:i,column:e,rowPinned:t,forceBrowserFocus:!0})},n.prototype.setSuppressRowDrag=function(i){this.gos.set("suppressRowDrag",i)},n.prototype.setSuppressMoveWhenRowDragging=function(i){this.gos.set("suppressMoveWhenRowDragging",i)},n.prototype.setSuppressRowClickSelection=function(i){this.gos.set("suppressRowClickSelection",i)},n.prototype.addRowDropZone=function(i){this.gridBodyCtrl.getRowDragFeature().addRowDropZone(i)},n.prototype.removeRowDropZone=function(i){var e=this.dragAndDropService.findExternalZone(i);e&&this.dragAndDropService.removeDropTarget(e)},n.prototype.getRowDropZoneParams=function(i){return this.gridBodyCtrl.getRowDragFeature().getRowDropZone(i)},n.prototype.setHeaderHeight=function(i){this.gos.set("headerHeight",i)},n.prototype.setDomLayout=function(i){this.gos.set("domLayout",i)},n.prototype.setEnableCellTextSelection=function(i){this.gridBodyCtrl.setCellTextSelection(i)},n.prototype.setFillHandleDirection=function(i){this.gos.set("fillHandleDirection",i)},n.prototype.setGroupHeaderHeight=function(i){this.gos.set("groupHeaderHeight",i)},n.prototype.setFloatingFiltersHeight=function(i){this.gos.set("floatingFiltersHeight",i)},n.prototype.setPivotHeaderHeight=function(i){this.gos.set("pivotHeaderHeight",i)},n.prototype.setPivotGroupHeaderHeight=function(i){this.gos.set("pivotGroupHeaderHeight",i)},n.prototype.setPivotMode=function(i){this.columnModel.setPivotMode(i)},n.prototype.setAnimateRows=function(i){this.gos.set("animateRows",i)},n.prototype.setIsExternalFilterPresent=function(i){this.gos.set("isExternalFilterPresent",i)},n.prototype.setDoesExternalFilterPass=function(i){this.gos.set("doesExternalFilterPass",i)},n.prototype.setNavigateToNextCell=function(i){this.gos.set("navigateToNextCell",i)},n.prototype.setTabToNextCell=function(i){this.gos.set("tabToNextCell",i)},n.prototype.setTabToNextHeader=function(i){this.gos.set("tabToNextHeader",i)},n.prototype.setNavigateToNextHeader=function(i){this.gos.set("navigateToNextHeader",i)},n.prototype.setRowGroupPanelShow=function(i){this.gos.set("rowGroupPanelShow",i)},n.prototype.setGetGroupRowAgg=function(i){this.gos.set("getGroupRowAgg",i)},n.prototype.setGetBusinessKeyForNode=function(i){this.gos.set("getBusinessKeyForNode",i)},n.prototype.setGetChildCount=function(i){this.gos.set("getChildCount",i)},n.prototype.setProcessRowPostCreate=function(i){this.gos.set("processRowPostCreate",i)},n.prototype.setGetRowId=function(i){this.gos.set("getRowId",i)},n.prototype.setGetRowClass=function(i){this.gos.set("getRowClass",i)},n.prototype.setIsFullWidthRow=function(i){this.gos.set("isFullWidthRow",i)},n.prototype.setIsRowSelectable=function(i){this.gos.set("isRowSelectable",i)},n.prototype.setIsRowMaster=function(i){this.gos.set("isRowMaster",i)},n.prototype.setPostSortRows=function(i){this.gos.set("postSortRows",i)},n.prototype.setGetDocument=function(i){this.gos.set("getDocument",i)},n.prototype.setGetContextMenuItems=function(i){this.gos.set("getContextMenuItems",i)},n.prototype.setGetMainMenuItems=function(i){this.gos.set("getMainMenuItems",i)},n.prototype.setProcessCellForClipboard=function(i){this.gos.set("processCellForClipboard",i)},n.prototype.setSendToClipboard=function(i){this.gos.set("sendToClipboard",i)},n.prototype.setProcessCellFromClipboard=function(i){this.gos.set("processCellFromClipboard",i)},n.prototype.setProcessSecondaryColDef=function(i){Rr("28.0","setProcessSecondaryColDef","setProcessPivotResultColDef"),this.setProcessPivotResultColDef(i)},n.prototype.setProcessSecondaryColGroupDef=function(i){Rr("28.0","setProcessSecondaryColGroupDef","setProcessPivotResultColGroupDef"),this.setProcessPivotResultColGroupDef(i)},n.prototype.setProcessPivotResultColDef=function(i){this.gos.set("processPivotResultColDef",i)},n.prototype.setProcessPivotResultColGroupDef=function(i){this.gos.set("processPivotResultColGroupDef",i)},n.prototype.setPostProcessPopup=function(i){this.gos.set("postProcessPopup",i)},n.prototype.setInitialGroupOrderComparator=function(i){this.gos.set("initialGroupOrderComparator",i)},n.prototype.setGetChartToolbarItems=function(i){this.gos.set("getChartToolbarItems",i)},n.prototype.setPaginationNumberFormatter=function(i){this.gos.set("paginationNumberFormatter",i)},n.prototype.setGetServerSideStoreParams=function(i){Rr("28.0","setGetServerSideStoreParams","setGetServerSideGroupLevelParams"),this.setGetServerSideGroupLevelParams(i)},n.prototype.setGetServerSideGroupLevelParams=function(i){this.gos.set("getServerSideGroupLevelParams",i)},n.prototype.setIsServerSideGroupOpenByDefault=function(i){this.gos.set("isServerSideGroupOpenByDefault",i)},n.prototype.setIsApplyServerSideTransaction=function(i){this.gos.set("isApplyServerSideTransaction",i)},n.prototype.setIsServerSideGroup=function(i){this.gos.set("isServerSideGroup",i)},n.prototype.setGetServerSideGroupKey=function(i){this.gos.set("getServerSideGroupKey",i)},n.prototype.setGetRowStyle=function(i){this.gos.set("getRowStyle",i)},n.prototype.setGetRowHeight=function(i){this.gos.set("getRowHeight",i)},n.prototype.assertSideBarLoaded=function(i){return gt.__assertRegistered(je.SideBarModule,"api."+i,this.context.getGridId())},n.prototype.isSideBarVisible=function(){return this.assertSideBarLoaded("isSideBarVisible")&&this.sideBarComp.isDisplayed()},n.prototype.setSideBarVisible=function(i){this.assertSideBarLoaded("setSideBarVisible")&&this.sideBarComp.setDisplayed(i)},n.prototype.setSideBarPosition=function(i){this.assertSideBarLoaded("setSideBarPosition")&&this.sideBarComp.setSideBarPosition(i)},n.prototype.openToolPanel=function(i){this.assertSideBarLoaded("openToolPanel")&&this.sideBarComp.openToolPanel(i,"api")},n.prototype.closeToolPanel=function(){this.assertSideBarLoaded("closeToolPanel")&&this.sideBarComp.close("api")},n.prototype.getOpenedToolPanel=function(){return this.assertSideBarLoaded("getOpenedToolPanel")?this.sideBarComp.openedItem():null},n.prototype.refreshToolPanel=function(){this.assertSideBarLoaded("refreshToolPanel")&&this.sideBarComp.refresh()},n.prototype.isToolPanelShowing=function(){return this.assertSideBarLoaded("isToolPanelShowing")&&this.sideBarComp.isToolPanelShowing()},n.prototype.getToolPanelInstance=function(i){if(this.assertSideBarLoaded("getToolPanelInstance")){var e=this.sideBarComp.getToolPanelInstance(i);return wn(e)}},n.prototype.getSideBar=function(){if(this.assertSideBarLoaded("getSideBar"))return this.sideBarComp.getDef()},n.prototype.setSideBar=function(i){this.gos.set("sideBar",i)},n.prototype.setSuppressClipboardPaste=function(i){this.gos.set("suppressClipboardPaste",i)},n.prototype.resetRowHeights=function(){if(ue(this.clientSideRowModel)){if(this.columnModel.isAutoRowHeightActive()){console.warn("AG Grid: calling gridApi.resetRowHeights() makes no sense when using Auto Row Height.");return}this.clientSideRowModel.resetRowHeights()}},n.prototype.setGroupRemoveSingleChildren=function(i){this.gos.set("groupRemoveSingleChildren",i)},n.prototype.setGroupRemoveLowestSingleChildren=function(i){this.gos.set("groupRemoveLowestSingleChildren",i)},n.prototype.setGroupDisplayType=function(i){this.gos.set("groupDisplayType",i)},n.prototype.setGroupIncludeFooter=function(i){this.gos.set("groupIncludeFooter",i)},n.prototype.setGroupIncludeTotalFooter=function(i){this.gos.set("groupIncludeTotalFooter",i)},n.prototype.setRowClass=function(i){this.gos.set("rowClass",i)},n.prototype.setDeltaSort=function(i){this.gos.set("deltaSort",i)},n.prototype.setRowCount=function(i,e){if(this.serverSideRowModel){if(this.columnModel.isRowGroupEmpty()){this.serverSideRowModel.setRowCount(i,e);return}console.error("AG Grid: setRowCount cannot be used while using row grouping.");return}if(this.infiniteRowModel){this.infiniteRowModel.setRowCount(i,e);return}this.logMissingRowModel("setRowCount","infinite","serverSide")},n.prototype.onRowHeightChanged=function(){this.clientSideRowModel?this.clientSideRowModel.onRowHeightChanged():this.serverSideRowModel&&this.serverSideRowModel.onRowHeightChanged()},n.prototype.getValue=function(i,e){var t=this.columnModel.getPrimaryColumn(i);return vt(t)&&(t=this.columnModel.getGridColumn(i)),vt(t)?null:this.valueService.getValue(t,e)},n.prototype.addEventListener=function(i,e){var t=this.gos.useAsyncEvents();this.eventService.addEventListener(i,e,t)},n.prototype.addGlobalListener=function(i){var e=this.gos.useAsyncEvents();this.eventService.addGlobalListener(i,e)},n.prototype.removeEventListener=function(i,e){var t=this.gos.useAsyncEvents();this.eventService.removeEventListener(i,e,t)},n.prototype.removeGlobalListener=function(i){var e=this.gos.useAsyncEvents();this.eventService.removeGlobalListener(i,e)},n.prototype.dispatchEvent=function(i){this.eventService.dispatchEvent(i)},n.prototype.destroy=function(){if(!this.destroyCalled){this.destroyCalled=!0,this.dispatchEvent({type:b.EVENT_GRID_PRE_DESTROYED});var i=this.ctrlsService.getGridCtrl();i&&i.destroyGridUi(),this.context.destroy()}},n.prototype.cleanDownReferencesToAvoidMemoryLeakInCaseApplicationIsKeepingReferenceToDestroyedGrid=function(){setTimeout(mh.bind(window,this,"Grid API"),100)},n.prototype.warnIfDestroyed=function(i){return this.destroyCalled&&console.warn("AG Grid: Grid API method "+i+" was called on a grid that was destroyed."),this.destroyCalled},n.prototype.resetQuickFilter=function(){this.warnIfDestroyed("resetQuickFilter")||this.filterManager.resetQuickFilterCache()},n.prototype.getCellRanges=function(){return this.rangeService?this.rangeService.getCellRanges():(gt.__assertRegistered(je.RangeSelectionModule,"api.getCellRanges",this.context.getGridId()),null)},n.prototype.addCellRange=function(i){if(this.rangeService){this.rangeService.addCellRange(i);return}gt.__assertRegistered(je.RangeSelectionModule,"api.addCellRange",this.context.getGridId())},n.prototype.clearRangeSelection=function(){this.rangeService&&this.rangeService.removeAllCellRanges(),gt.__assertRegistered(je.RangeSelectionModule,"gridApi.clearRangeSelection",this.context.getGridId())},n.prototype.undoCellEditing=function(){this.undoRedoService.undo("api")},n.prototype.redoCellEditing=function(){this.undoRedoService.redo("api")},n.prototype.getCurrentUndoSize=function(){return this.undoRedoService.getCurrentUndoStackSize()},n.prototype.getCurrentRedoSize=function(){return this.undoRedoService.getCurrentRedoStackSize()},n.prototype.getChartModels=function(){if(gt.__assertRegistered(je.GridChartsModule,"api.getChartModels",this.context.getGridId()))return this.chartService.getChartModels()},n.prototype.getChartRef=function(i){if(gt.__assertRegistered(je.GridChartsModule,"api.getChartRef",this.context.getGridId()))return this.chartService.getChartRef(i)},n.prototype.getChartImageDataURL=function(i){if(gt.__assertRegistered(je.GridChartsModule,"api.getChartImageDataURL",this.context.getGridId()))return this.chartService.getChartImageDataURL(i)},n.prototype.downloadChart=function(i){if(gt.__assertRegistered(je.GridChartsModule,"api.downloadChart",this.context.getGridId()))return this.chartService.downloadChart(i)},n.prototype.openChartToolPanel=function(i){if(gt.__assertRegistered(je.GridChartsModule,"api.openChartToolPanel",this.context.getGridId()))return this.chartService.openChartToolPanel(i)},n.prototype.closeChartToolPanel=function(i){if(gt.__assertRegistered(je.GridChartsModule,"api.closeChartToolPanel",this.context.getGridId()))return this.chartService.closeChartToolPanel(i.chartId)},n.prototype.createRangeChart=function(i){if(gt.__assertRegistered(je.GridChartsModule,"api.createRangeChart",this.context.getGridId()))return this.chartService.createRangeChart(i)},n.prototype.createPivotChart=function(i){if(gt.__assertRegistered(je.GridChartsModule,"api.createPivotChart",this.context.getGridId()))return this.chartService.createPivotChart(i)},n.prototype.createCrossFilterChart=function(i){if(gt.__assertRegistered(je.GridChartsModule,"api.createCrossFilterChart",this.context.getGridId()))return this.chartService.createCrossFilterChart(i)},n.prototype.updateChart=function(i){gt.__assertRegistered(je.GridChartsModule,"api.updateChart",this.context.getGridId())&&this.chartService.updateChart(i)},n.prototype.restoreChart=function(i,e){if(gt.__assertRegistered(je.GridChartsModule,"api.restoreChart",this.context.getGridId()))return this.chartService.restoreChart(i,e)},n.prototype.copyToClipboard=function(i){gt.__assertRegistered(je.ClipboardModule,"api.copyToClipboard",this.context.getGridId())&&this.clipboardService.copyToClipboard(i)},n.prototype.cutToClipboard=function(i){gt.__assertRegistered(je.ClipboardModule,"api.cutToClipboard",this.context.getGridId())&&this.clipboardService.cutToClipboard(i,"api")},n.prototype.copySelectedRowsToClipboard=function(i){gt.__assertRegistered(je.ClipboardModule,"api.copySelectedRowsToClipboard",this.context.getGridId())&&this.clipboardService.copySelectedRowsToClipboard(i)},n.prototype.copySelectedRangeToClipboard=function(i){gt.__assertRegistered(je.ClipboardModule,"api.copySelectedRangeToClipboard",this.context.getGridId())&&this.clipboardService.copySelectedRangeToClipboard(i)},n.prototype.copySelectedRangeDown=function(){gt.__assertRegistered(je.ClipboardModule,"api.copySelectedRangeDown",this.context.getGridId())&&this.clipboardService.copyRangeDown()},n.prototype.pasteFromClipboard=function(){gt.__assertRegistered(je.ClipboardModule,"api.pasteFromClipboard",this.context.getGridId())&&this.clipboardService.pasteFromClipboard()},n.prototype.showColumnMenuAfterButtonClick=function(i,e){var t=this.columnModel.getGridColumn(i);this.menuFactory.showMenuAfterButtonClick(t,e,"columnMenu")},n.prototype.showColumnMenuAfterMouseClick=function(i,e){var t=this.columnModel.getGridColumn(i);if(t||(t=this.columnModel.getPrimaryColumn(i)),!t){console.error("AG Grid: column '"+i+"' not found");return}this.menuFactory.showMenuAfterMouseEvent(t,e)},n.prototype.hidePopupMenu=function(){this.contextMenuFactory&&this.contextMenuFactory.hideActiveMenu(),this.menuFactory.hideActiveMenu()},n.prototype.setPopupParent=function(i){this.gos.set("popupParent",i)},n.prototype.tabToNextCell=function(i){return this.navigationService.tabToNextCell(!1,i)},n.prototype.tabToPreviousCell=function(i){return this.navigationService.tabToNextCell(!0,i)},n.prototype.getCellRendererInstances=function(i){i===void 0&&(i={});var e=this.rowRenderer.getCellRendererInstances(i),t=e.map(wn);return t},n.prototype.getCellEditorInstances=function(i){i===void 0&&(i={});var e=this.rowRenderer.getCellEditorInstances(i),t=e.map(wn);return t},n.prototype.getEditingCells=function(){return this.rowRenderer.getEditingCells()},n.prototype.stopEditing=function(i){i===void 0&&(i=!1),this.rowRenderer.stopEditing(i)},n.prototype.startEditingCell=function(i){var e=this.columnModel.getGridColumn(i.colKey);if(!e){console.warn("AG Grid: no column found for "+i.colKey);return}var t={rowIndex:i.rowIndex,rowPinned:i.rowPinned||null,column:e},r=i.rowPinned==null;r&&this.gridBodyCtrl.getScrollFeature().ensureIndexVisible(i.rowIndex);var o=this.navigationService.getCellByPosition(t);o&&(this.focusService.isCellFocused(t)||this.focusService.setFocusedCell(t),o.startRowOrCellEdit(i.key))},n.prototype.addAggFunc=function(i,e){this.aggFuncService&&this.aggFuncService.addAggFunc(i,e)},n.prototype.addAggFuncs=function(i){this.aggFuncService&&this.aggFuncService.addAggFuncs(i)},n.prototype.clearAggFuncs=function(){this.aggFuncService&&this.aggFuncService.clear()},n.prototype.applyServerSideTransaction=function(i){if(!this.serverSideTransactionManager){this.logMissingRowModel("applyServerSideTransaction","serverSide");return}return this.serverSideTransactionManager.applyTransaction(i)},n.prototype.applyServerSideTransactionAsync=function(i,e){if(!this.serverSideTransactionManager){this.logMissingRowModel("applyServerSideTransactionAsync","serverSide");return}return this.serverSideTransactionManager.applyTransactionAsync(i,e)},n.prototype.applyServerSideRowData=function(i){var e,t,r=(e=i.startRow)!==null&&e!==void 0?e:0,o=(t=i.route)!==null&&t!==void 0?t:[];if(r<0){console.warn("AG Grid: invalid value "+i.startRow+" for startRow, the value should be >= 0");return}this.serverSideRowModel?this.serverSideRowModel.applyRowData(i.successParams,r,o):this.logMissingRowModel("setServerSideDatasource","serverSide")},n.prototype.retryServerSideLoads=function(){if(!this.serverSideRowModel){this.logMissingRowModel("retryServerSideLoads","serverSide");return}this.serverSideRowModel.retryLoads()},n.prototype.flushServerSideAsyncTransactions=function(){if(!this.serverSideTransactionManager){this.logMissingRowModel("flushServerSideAsyncTransactions","serverSide");return}return this.serverSideTransactionManager.flushAsyncTransactions()},n.prototype.applyTransaction=function(i){if(!this.clientSideRowModel){this.logMissingRowModel("applyTransaction","clientSide");return}return this.clientSideRowModel.updateRowData(i)},n.prototype.applyTransactionAsync=function(i,e){if(!this.clientSideRowModel){this.logMissingRowModel("applyTransactionAsync","clientSide");return}this.clientSideRowModel.batchUpdateRowData(i,e)},n.prototype.flushAsyncTransactions=function(){if(!this.clientSideRowModel){this.logMissingRowModel("flushAsyncTransactions","clientSide");return}this.clientSideRowModel.flushAsyncTransactions()},n.prototype.setSuppressModelUpdateAfterUpdateTransaction=function(i){this.gos.set("suppressModelUpdateAfterUpdateTransaction",i)},n.prototype.refreshInfiniteCache=function(){this.infiniteRowModel?this.infiniteRowModel.refreshCache():this.logMissingRowModel("refreshInfiniteCache","infinite")},n.prototype.purgeInfiniteCache=function(){this.infiniteRowModel?this.infiniteRowModel.purgeCache():this.logMissingRowModel("purgeInfiniteCache","infinite")},n.prototype.refreshServerSide=function(i){if(!this.serverSideRowModel){this.logMissingRowModel("refreshServerSide","serverSide");return}this.serverSideRowModel.refreshStore(i)},n.prototype.refreshServerSideStore=function(i){return Rr("28.0","refreshServerSideStore","refreshServerSide"),this.refreshServerSide(i)},n.prototype.getServerSideStoreState=function(){return Rr("28.0","getServerSideStoreState","getServerSideGroupLevelState"),this.getServerSideGroupLevelState()},n.prototype.getServerSideGroupLevelState=function(){return this.serverSideRowModel?this.serverSideRowModel.getStoreState():(this.logMissingRowModel("getServerSideGroupLevelState","serverSide"),[])},n.prototype.getInfiniteRowCount=function(){if(this.infiniteRowModel)return this.infiniteRowModel.getRowCount();this.logMissingRowModel("getInfiniteRowCount","infinite")},n.prototype.isLastRowIndexKnown=function(){if(this.infiniteRowModel)return this.infiniteRowModel.isLastRowIndexKnown();this.logMissingRowModel("isLastRowIndexKnown","infinite")},n.prototype.getCacheBlockState=function(){return this.rowNodeBlockLoader.getBlockState()},n.prototype.getFirstDisplayedRow=function(){return this.rowRenderer.getFirstVirtualRenderedRow()},n.prototype.getLastDisplayedRow=function(){return this.rowRenderer.getLastVirtualRenderedRow()},n.prototype.getDisplayedRowAtIndex=function(i){return this.rowModel.getRow(i)},n.prototype.getDisplayedRowCount=function(){return this.rowModel.getRowCount()},n.prototype.setDataTypeDefinitions=function(i){this.gos.set("dataTypeDefinitions",i)},n.prototype.setPagination=function(i){this.gos.set("pagination",i)},n.prototype.paginationIsLastPageFound=function(){return this.paginationProxy.isLastPageFound()},n.prototype.paginationGetPageSize=function(){return this.paginationProxy.getPageSize()},n.prototype.paginationSetPageSize=function(i){this.gos.set("paginationPageSize",i)},n.prototype.paginationGetCurrentPage=function(){return this.paginationProxy.getCurrentPage()},n.prototype.paginationGetTotalPages=function(){return this.paginationProxy.getTotalPages()},n.prototype.paginationGetRowCount=function(){return this.paginationProxy.getMasterRowCount()},n.prototype.paginationGoToNextPage=function(){this.paginationProxy.goToNextPage()},n.prototype.paginationGoToPreviousPage=function(){this.paginationProxy.goToPreviousPage()},n.prototype.paginationGoToFirstPage=function(){this.paginationProxy.goToFirstPage()},n.prototype.paginationGoToLastPage=function(){this.paginationProxy.goToLastPage()},n.prototype.paginationGoToPage=function(i){this.paginationProxy.goToPage(i)},Xt([Zt("immutableService")],n.prototype,"immutableService",void 0),Xt([Zt("csvCreator")],n.prototype,"csvCreator",void 0),Xt([Zt("excelCreator")],n.prototype,"excelCreator",void 0),Xt([T("rowRenderer")],n.prototype,"rowRenderer",void 0),Xt([T("navigationService")],n.prototype,"navigationService",void 0),Xt([T("filterManager")],n.prototype,"filterManager",void 0),Xt([T("columnModel")],n.prototype,"columnModel",void 0),Xt([T("selectionService")],n.prototype,"selectionService",void 0),Xt([T("gridOptionsService")],n.prototype,"gos",void 0),Xt([T("valueService")],n.prototype,"valueService",void 0),Xt([T("alignedGridsService")],n.prototype,"alignedGridsService",void 0),Xt([T("eventService")],n.prototype,"eventService",void 0),Xt([T("pinnedRowModel")],n.prototype,"pinnedRowModel",void 0),Xt([T("context")],n.prototype,"context",void 0),Xt([T("rowModel")],n.prototype,"rowModel",void 0),Xt([T("sortController")],n.prototype,"sortController",void 0),Xt([T("paginationProxy")],n.prototype,"paginationProxy",void 0),Xt([T("focusService")],n.prototype,"focusService",void 0),Xt([T("dragAndDropService")],n.prototype,"dragAndDropService",void 0),Xt([Zt("rangeService")],n.prototype,"rangeService",void 0),Xt([Zt("clipboardService")],n.prototype,"clipboardService",void 0),Xt([Zt("aggFuncService")],n.prototype,"aggFuncService",void 0),Xt([T("menuFactory")],n.prototype,"menuFactory",void 0),Xt([Zt("contextMenuFactory")],n.prototype,"contextMenuFactory",void 0),Xt([T("valueCache")],n.prototype,"valueCache",void 0),Xt([T("animationFrameService")],n.prototype,"animationFrameService",void 0),Xt([Zt("statusBarService")],n.prototype,"statusBarService",void 0),Xt([Zt("chartService")],n.prototype,"chartService",void 0),Xt([Zt("undoRedoService")],n.prototype,"undoRedoService",void 0),Xt([Zt("rowNodeBlockLoader")],n.prototype,"rowNodeBlockLoader",void 0),Xt([Zt("ssrmTransactionManager")],n.prototype,"serverSideTransactionManager",void 0),Xt([T("ctrlsService")],n.prototype,"ctrlsService",void 0),Xt([Oe],n.prototype,"init",null),Xt([Ki],n.prototype,"cleanDownReferencesToAvoidMemoryLeakInCaseApplicationIsKeepingReferenceToDestroyedGrid",null),n=Xt([Ue("gridApi")],n),n}(),Jw=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),ba=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},Wv=function(n){Jw(i,n);function i(){var t=n!==null&&n.apply(this,arguments)||this;return t.quickFilter=null,t.quickFilterParts=null,t}e=i,i.prototype.postConstruct=function(){var t=this;this.addManagedListener(this.eventService,b.EVENT_COLUMN_PIVOT_MODE_CHANGED,function(){return t.resetQuickFilterCache()}),this.addManagedListener(this.eventService,b.EVENT_NEW_COLUMNS_LOADED,function(){return t.resetQuickFilterCache()}),this.addManagedListener(this.eventService,b.EVENT_COLUMN_ROW_GROUP_CHANGED,function(){return t.resetQuickFilterCache()}),this.addManagedListener(this.eventService,b.EVENT_COLUMN_VISIBLE,function(){t.gridOptionsService.is("includeHiddenColumnsInQuickFilter")||t.resetQuickFilterCache()}),this.addManagedPropertyListener("quickFilterText",function(r){return t.setQuickFilter(r.currentValue)}),this.addManagedPropertyListener("includeHiddenColumnsInQuickFilter",function(){return t.onIncludeHiddenColumnsInQuickFilterChanged()}),this.quickFilter=this.parseQuickFilter(this.gridOptionsService.get("quickFilterText")),this.parser=this.gridOptionsService.get("quickFilterParser"),this.matcher=this.gridOptionsService.get("quickFilterMatcher"),this.setQuickFilterParts(),this.addManagedPropertyListeners(["quickFilterMatcher","quickFilterParser"],function(){return t.setQuickFilterParserAndMatcher()})},i.prototype.isQuickFilterPresent=function(){return this.quickFilter!==null},i.prototype.doesRowPassQuickFilter=function(t){var r=this,o=this.gridOptionsService.is("cacheQuickFilter");return this.matcher?this.doesRowPassQuickFilterMatcher(o,t):this.quickFilterParts.every(function(a){return o?r.doesRowPassQuickFilterCache(t,a):r.doesRowPassQuickFilterNoCache(t,a)})},i.prototype.resetQuickFilterCache=function(){this.rowModel.forEachNode(function(t){return t.quickFilterAggregateText=null})},i.prototype.setQuickFilterParts=function(){var t=this,r=t.quickFilter,o=t.parser;r?this.quickFilterParts=o?o(r):r.split(" "):this.quickFilterParts=null},i.prototype.parseQuickFilter=function(t){return ue(t)?this.gridOptionsService.isRowModelType("clientSide")?t.toUpperCase():(console.warn("AG Grid - Quick filtering only works with the Client-Side Row Model"),null):null},i.prototype.setQuickFilter=function(t){if(t!=null&&typeof t!="string"){console.warn("AG Grid - setQuickFilter() only supports string inputs, received: "+typeof t);return}var r=this.parseQuickFilter(t);this.quickFilter!==r&&(this.quickFilter=r,this.setQuickFilterParts(),this.dispatchEvent({type:e.EVENT_QUICK_FILTER_CHANGED}))},i.prototype.setQuickFilterParserAndMatcher=function(){var t=this.gridOptionsService.get("quickFilterParser"),r=this.gridOptionsService.get("quickFilterMatcher"),o=t!==this.parser||r!==this.matcher;this.parser=t,this.matcher=r,o&&(this.setQuickFilterParts(),this.dispatchEvent({type:e.EVENT_QUICK_FILTER_CHANGED}))},i.prototype.onIncludeHiddenColumnsInQuickFilterChanged=function(){this.columnModel.refreshQuickFilterColumns(),this.resetQuickFilterCache(),this.isQuickFilterPresent()&&this.dispatchEvent({type:e.EVENT_QUICK_FILTER_CHANGED})},i.prototype.doesRowPassQuickFilterNoCache=function(t,r){var o=this,a=this.columnModel.getAllColumnsForQuickFilter();return a.some(function(s){var l=o.getQuickFilterTextForColumn(s,t);return ue(l)&&l.indexOf(r)>=0})},i.prototype.doesRowPassQuickFilterCache=function(t,r){return this.checkGenerateQuickFilterAggregateText(t),t.quickFilterAggregateText.indexOf(r)>=0},i.prototype.doesRowPassQuickFilterMatcher=function(t,r){var o;t?(this.checkGenerateQuickFilterAggregateText(r),o=r.quickFilterAggregateText):o=this.getQuickFilterAggregateText(r);var a=this,s=a.quickFilterParts,l=a.matcher;return l(s,o)},i.prototype.checkGenerateQuickFilterAggregateText=function(t){t.quickFilterAggregateText||(t.quickFilterAggregateText=this.getQuickFilterAggregateText(t))},i.prototype.getQuickFilterTextForColumn=function(t,r){var o=this.valueService.getValue(t,r,!0),a=t.getColDef();if(a.getQuickFilterText){var s={value:o,node:r,data:r.data,column:t,colDef:a,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context};o=a.getQuickFilterText(s)}return ue(o)?o.toString().toUpperCase():null},i.prototype.getQuickFilterAggregateText=function(t){var r=this,o=[],a=this.columnModel.getAllColumnsForQuickFilter();return a.forEach(function(s){var l=r.getQuickFilterTextForColumn(s,t);ue(l)&&o.push(l)}),o.join(e.QUICK_FILTER_SEPARATOR)};var e;return i.EVENT_QUICK_FILTER_CHANGED="quickFilterChanged",i.QUICK_FILTER_SEPARATOR=`
`,ba([T("valueService")],i.prototype,"valueService",void 0),ba([T("columnModel")],i.prototype,"columnModel",void 0),ba([T("rowModel")],i.prototype,"rowModel",void 0),ba([Oe],i.prototype,"postConstruct",null),i=e=ba([Ue("quickFilterService")],i),i}(ve),Zw=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),El=function(){return El=Object.assign||function(n){for(var i,e=1,t=arguments.length;e<t;e++){i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(n[r]=i[r])}return n},El.apply(this,arguments)},Jr=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},$w=function(n){Zw(i,n);function i(){var e=n!==null&&n.apply(this,arguments)||this;return e.allColumnFilters=new Map,e.allColumnListeners=new Map,e.activeAggregateFilters=[],e.activeColumnFilters=[],e.processingFilterChange=!1,e.filterModelUpdateQueue=[],e}return i.prototype.init=function(){var e=this;this.addManagedListener(this.eventService,b.EVENT_GRID_COLUMNS_CHANGED,function(){return e.onColumnsChanged()}),this.addManagedListener(this.eventService,b.EVENT_COLUMN_VALUE_CHANGED,function(){return e.refreshFiltersForAggregations()}),this.addManagedListener(this.eventService,b.EVENT_COLUMN_PIVOT_CHANGED,function(){return e.refreshFiltersForAggregations()}),this.addManagedListener(this.eventService,b.EVENT_COLUMN_PIVOT_MODE_CHANGED,function(){return e.refreshFiltersForAggregations()}),this.addManagedListener(this.eventService,b.EVENT_NEW_COLUMNS_LOADED,function(){return e.updateAdvancedFilterColumns()}),this.addManagedListener(this.eventService,b.EVENT_COLUMN_VISIBLE,function(){return e.updateAdvancedFilterColumns()}),this.allowShowChangeAfterFilter=this.gridOptionsService.is("allowShowChangeAfterFilter"),this.externalFilterPresent=this.isExternalFilterPresentCallback(),this.updateAggFiltering(),this.addManagedPropertyListener("groupAggFiltering",function(){return e.updateAggFiltering()}),this.addManagedPropertyListener("advancedFilterModel",function(t){return e.setAdvancedFilterModel(t.currentValue)}),this.addManagedListener(this.eventService,b.EVENT_ADVANCED_FILTER_ENABLED_CHANGED,function(t){var r=t.enabled;return e.onAdvancedFilterEnabledChanged(r)}),this.addManagedListener(this.eventService,b.EVENT_DATA_TYPES_INFERRED,function(){return e.processFilterModelUpdateQueue()}),this.addManagedListener(this.quickFilterService,Wv.EVENT_QUICK_FILTER_CHANGED,function(){return e.onFilterChanged({source:"quickFilter"})})},i.prototype.isExternalFilterPresentCallback=function(){var e=this.gridOptionsService.getCallback("isExternalFilterPresent");return typeof e=="function"?e({}):!1},i.prototype.doesExternalFilterPass=function(e){var t=this.gridOptionsService.get("doesExternalFilterPass");return typeof t=="function"?t(e):!1},i.prototype.setFilterModel=function(e){var t=this;if(this.isAdvancedFilterEnabled()){this.warnAdvancedFilters();return}if(this.dataTypeService.isPendingInference()){this.filterModelUpdateQueue.push(e);return}var r=[],o=this.getFilterModel();if(e){var a=Pd(Object.keys(e));this.allColumnFilters.forEach(function(s,l){var u=e[l];r.push(t.setModelOnFilterWrapper(s.filterPromise,u)),a.delete(l)}),a.forEach(function(s){var l=t.columnModel.getPrimaryColumn(s)||t.columnModel.getGridColumn(s);if(!l){console.warn("AG Grid: setFilterModel() - no column found for colId: "+s);return}if(!l.isFilterAllowed()){console.warn("AG Grid: setFilterModel() - unable to fully apply model, filtering disabled for colId: "+s);return}var u=t.getOrCreateFilterWrapper(l,"NO_UI");if(!u){console.warn("AG-Grid: setFilterModel() - unable to fully apply model, unable to create filter for colId: "+s);return}r.push(t.setModelOnFilterWrapper(u.filterPromise,e[s]))})}else this.allColumnFilters.forEach(function(s){r.push(t.setModelOnFilterWrapper(s.filterPromise,null))});jr.all(r).then(function(){var s=t.getFilterModel(),l=[];t.allColumnFilters.forEach(function(u,c){var d=o?o[c]:null,f=s?s[c]:null;St.jsonEquals(d,f)||l.push(u.column)}),l.length>0&&t.onFilterChanged({columns:l,source:"api"})})},i.prototype.setModelOnFilterWrapper=function(e,t){return new jr(function(r){e.then(function(o){typeof o.setModel!="function"&&(console.warn("AG Grid: filter missing setModel method, which is needed for setFilterModel"),r()),(o.setModel(t)||jr.resolve()).then(function(){return r()})})})},i.prototype.getFilterModel=function(){var e={};return this.allColumnFilters.forEach(function(t,r){var o=t.filterPromise,a=o.resolveNow(null,function(l){return l});if(a==null)return null;if(typeof a.getModel!="function"){console.warn("AG Grid: filter API missing getModel method, which is needed for getFilterModel");return}var s=a.getModel();ue(s)&&(e[r]=s)}),e},i.prototype.isColumnFilterPresent=function(){return this.activeColumnFilters.length>0},i.prototype.isAggregateFilterPresent=function(){return!!this.activeAggregateFilters.length},i.prototype.isExternalFilterPresent=function(){return this.externalFilterPresent},i.prototype.isChildFilterPresent=function(){return this.isColumnFilterPresent()||this.isQuickFilterPresent()||this.isExternalFilterPresent()||this.isAdvancedFilterPresent()},i.prototype.isAdvancedFilterPresent=function(){return this.isAdvancedFilterEnabled()&&this.advancedFilterService.isFilterPresent()},i.prototype.onAdvancedFilterEnabledChanged=function(e){var t=this,r;e?this.allColumnFilters.size&&(this.allColumnFilters.forEach(function(o){return t.disposeFilterWrapper(o,"advancedFilterEnabled")}),this.onFilterChanged({source:"advancedFilter"})):!((r=this.advancedFilterService)===null||r===void 0)&&r.isFilterPresent()&&(this.advancedFilterService.setModel(null),this.onFilterChanged({source:"advancedFilter"}))},i.prototype.isAdvancedFilterEnabled=function(){var e;return(e=this.advancedFilterService)===null||e===void 0?void 0:e.isEnabled()},i.prototype.isAdvancedFilterHeaderActive=function(){return this.isAdvancedFilterEnabled()&&this.advancedFilterService.isHeaderActive()},i.prototype.doAggregateFiltersPass=function(e,t){return this.doColumnFiltersPass(e,t,!0)},i.prototype.updateActiveFilters=function(){var e=this;this.activeColumnFilters.length=0,this.activeAggregateFilters.length=0;var t=function(a){return a?a.isFilterActive?a.isFilterActive():(console.warn("AG Grid: Filter is missing isFilterActive() method"),!1):!1},r=!!this.gridOptionsService.getGroupAggFiltering(),o=function(a){var s=!a.isPrimary();if(s)return!0;var l=!e.columnModel.isPivotActive(),u=a.isValueActive();return!u||!l?!1:e.columnModel.isPivotMode()?!0:r};this.allColumnFilters.forEach(function(a){if(a.filterPromise.resolveNow(!1,t)){var s=a.filterPromise.resolveNow(null,function(l){return l});o(a.column)?e.activeAggregateFilters.push(s):e.activeColumnFilters.push(s)}})},i.prototype.updateFilterFlagInColumns=function(e,t){this.allColumnFilters.forEach(function(r){var o=r.filterPromise.resolveNow(!1,function(a){return a.isFilterActive()});r.column.setFilterActive(o,e,t)})},i.prototype.isAnyFilterPresent=function(){return this.isQuickFilterPresent()||this.isColumnFilterPresent()||this.isAggregateFilterPresent()||this.isExternalFilterPresent()},i.prototype.doColumnFiltersPass=function(e,t,r){for(var o=e.data,a=e.aggData,s=r?this.activeAggregateFilters:this.activeColumnFilters,l=r?a:o,u=0;u<s.length;u++){var c=s[u];if(!(c==null||c===t)){if(typeof c.doesFilterPass!="function")throw new Error("Filter is missing method doesFilterPass");if(!c.doesFilterPass({node:e,data:l}))return!1}}return!0},i.prototype.resetQuickFilterCache=function(){this.quickFilterService.resetQuickFilterCache()},i.prototype.refreshFiltersForAggregations=function(){var e=this.gridOptionsService.getGroupAggFiltering();e&&this.onFilterChanged()},i.prototype.callOnFilterChangedOutsideRenderCycle=function(e){var t=this,r=function(){return t.onFilterChanged(e)};this.rowRenderer.isRefreshInProgress()?setTimeout(r,0):r()},i.prototype.onFilterChanged=function(e){e===void 0&&(e={});var t=e.source,r=e.filterInstance,o=e.additionalEventAttributes,a=e.columns;this.updateDependantFilters(),this.updateActiveFilters(),this.updateFilterFlagInColumns("filterChanged",o),this.externalFilterPresent=this.isExternalFilterPresentCallback(),this.allColumnFilters.forEach(function(l){l.filterPromise&&l.filterPromise.then(function(u){u&&u!==r&&u.onAnyFilterChanged&&u.onAnyFilterChanged()})});var s={source:t,type:b.EVENT_FILTER_CHANGED,columns:a||[]};o&&Sr(s,o),this.processingFilterChange=!0,this.eventService.dispatchEvent(s),this.processingFilterChange=!1},i.prototype.isSuppressFlashingCellsBecauseFiltering=function(){return!this.allowShowChangeAfterFilter&&this.processingFilterChange},i.prototype.isQuickFilterPresent=function(){return this.quickFilterService.isQuickFilterPresent()},i.prototype.updateAggFiltering=function(){this.aggFiltering=!!this.gridOptionsService.getGroupAggFiltering()},i.prototype.isAggregateQuickFilterPresent=function(){return this.isQuickFilterPresent()&&(this.aggFiltering||this.columnModel.isPivotMode())},i.prototype.isNonAggregateQuickFilterPresent=function(){return this.isQuickFilterPresent()&&!(this.aggFiltering||this.columnModel.isPivotMode())},i.prototype.doesRowPassOtherFilters=function(e,t){return this.doesRowPassFilter({rowNode:t,filterInstanceToSkip:e})},i.prototype.doesRowPassAggregateFilters=function(e){return!(this.isAggregateQuickFilterPresent()&&!this.quickFilterService.doesRowPassQuickFilter(e.rowNode)||this.isAggregateFilterPresent()&&!this.doAggregateFiltersPass(e.rowNode,e.filterInstanceToSkip))},i.prototype.doesRowPassFilter=function(e){return!(this.isNonAggregateQuickFilterPresent()&&!this.quickFilterService.doesRowPassQuickFilter(e.rowNode)||this.isExternalFilterPresent()&&!this.doesExternalFilterPass(e.rowNode)||this.isColumnFilterPresent()&&!this.doColumnFiltersPass(e.rowNode,e.filterInstanceToSkip)||this.isAdvancedFilterPresent()&&!this.advancedFilterService.doesFilterPass(e.rowNode))},i.prototype.onNewRowsLoaded=function(e){this.allColumnFilters.forEach(function(t){t.filterPromise.then(function(r){r.onNewRowsLoaded&&r.onNewRowsLoaded()})}),this.updateFilterFlagInColumns(e,{afterDataChange:!0}),this.updateActiveFilters()},i.prototype.createValueGetter=function(e){var t=this;return function(r){var o=r.node;return t.valueService.getValue(e,o,!0)}},i.prototype.getFilterComponent=function(e,t,r){var o;if(r===void 0&&(r=!0),r)return((o=this.getOrCreateFilterWrapper(e,t))===null||o===void 0?void 0:o.filterPromise)||null;var a=this.cachedFilter(e);return a?a.filterPromise:null},i.prototype.isFilterActive=function(e){var t=this.cachedFilter(e);return!!t&&t.filterPromise.resolveNow(!1,function(r){return r.isFilterActive()})},i.prototype.getOrCreateFilterWrapper=function(e,t){var r=this;if(!e.isFilterAllowed())return null;var o=this.cachedFilter(e);if(o)t!=="NO_UI"&&this.putIntoGui(o,t);else{o=this.createFilterWrapper(e,t);var a=e.getColId();this.allColumnFilters.set(a,o),this.allColumnListeners.set(a,this.addManagedListener(e,li.EVENT_COL_DEF_CHANGED,function(){return r.checkDestroyFilter(a)}))}return o},i.prototype.cachedFilter=function(e){return this.allColumnFilters.get(e.getColId())},i.prototype.getDefaultFilter=function(e){var t;if(gt.__isRegistered(je.SetFilterModule,this.context.getGridId()))t="agSetColumnFilter";else{var r=e.getColDef().cellDataType;r==="number"?t="agNumberColumnFilter":r==="date"||r==="dateString"?t="agDateColumnFilter":t="agTextColumnFilter"}return t},i.prototype.getDefaultFloatingFilter=function(e){var t;if(gt.__isRegistered(je.SetFilterModule,this.context.getGridId()))t="agSetColumnFloatingFilter";else{var r=e.getColDef().cellDataType;r==="number"?t="agNumberColumnFloatingFilter":r==="date"||r==="dateString"?t="agDateColumnFloatingFilter":t="agTextColumnFloatingFilter"}return t},i.prototype.createFilterInstance=function(e){var t=this,r=this.getDefaultFilter(e),o=e.getColDef(),a,s=El(El({},this.createFilterParams(e,o)),{filterModifiedCallback:function(){var u={type:b.EVENT_FILTER_MODIFIED,column:e,filterInstance:a};t.eventService.dispatchEvent(u)},filterChangedCallback:function(u){var c,d=(c=u?.source)!==null&&c!==void 0?c:"api",f={filterInstance:a,additionalEventAttributes:u,columns:[e],source:d};t.callOnFilterChangedOutsideRenderCycle(f)},doesRowPassOtherFilter:function(u){return t.doesRowPassOtherFilters(a,u)}}),l=this.userComponentFactory.getFilterDetails(o,s,r);return l?{filterPromise:function(){var u=l.newAgStackInstance();return u&&u.then(function(c){return a=c}),u},compDetails:l}:{filterPromise:null,compDetails:null}},i.prototype.createFilterParams=function(e,t){var r={column:e,colDef:$c(t),rowModel:this.rowModel,filterChangedCallback:function(){},filterModifiedCallback:function(){},valueGetter:this.createValueGetter(e),doesRowPassOtherFilter:function(){return!0},api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context};return r},i.prototype.createFilterWrapper=function(e,t){var r,o={column:e,filterPromise:null,compiledElement:null,guiPromise:jr.resolve(null),compDetails:null},a=this.createFilterInstance(e),s=a.filterPromise,l=a.compDetails;return o.filterPromise=(r=s?.())!==null&&r!==void 0?r:null,o.compDetails=l,s&&this.putIntoGui(o,t),o},i.prototype.putIntoGui=function(e,t){var r=this,o=document.createElement("div");o.className="ag-filter",e.guiPromise=new jr(function(a){e.filterPromise.then(function(s){var l=s.getGui();ue(l)||console.warn("AG Grid: getGui method from filter returned "+l+", it should be a DOM element or an HTML template string."),typeof l=="string"&&(l=Ji(l)),o.appendChild(l),a(o);var u={type:b.EVENT_FILTER_OPENED,column:e.column,source:t,eGui:o};r.eventService.dispatchEvent(u)})})},i.prototype.onColumnsChanged=function(){var e=this,t=[];this.allColumnFilters.forEach(function(r,o){var a;r.column.isPrimary()?a=e.columnModel.getPrimaryColumn(o):a=e.columnModel.getGridColumn(o),!a&&(t.push(r.column),e.disposeFilterWrapper(r,"columnChanged"),e.disposeColumnListener(o))}),t.length>0?this.onFilterChanged({columns:t,source:"api"}):this.updateDependantFilters()},i.prototype.updateDependantFilters=function(){var e=this,t=this.columnModel.getGroupAutoColumns();t?.forEach(function(r){r.getColDef().filter==="agGroupColumnFilter"&&e.getOrCreateFilterWrapper(r,"NO_UI")})},i.prototype.isFilterAllowed=function(e){var t,r;if(this.isAdvancedFilterEnabled())return!1;var o=e.isFilterAllowed();if(!o)return!1;var a=this.allColumnFilters.get(e.getColId());return(r=(t=a?.filterPromise)===null||t===void 0?void 0:t.resolveNow(!0,function(s){var l,u;return typeof((l=s)===null||l===void 0?void 0:l.isFilterAllowed)=="function"?(u=s)===null||u===void 0?void 0:u.isFilterAllowed():!0}))!==null&&r!==void 0?r:!0},i.prototype.getFloatingFilterCompDetails=function(e,t){var r=this,o=e.getColDef(),a=this.createFilterParams(e,o),s=this.userComponentFactory.mergeParamsWithApplicationProvidedParams(o,jc,a),l=this.userComponentFactory.getDefaultFloatingFilterType(o,function(){return r.getDefaultFloatingFilter(e)});l==null&&(l="agReadOnlyFloatingFilter");var u=function(d){var f=r.getFilterComponent(e,"NO_UI");f?.then(function(y){d(wn(y))})},c={column:e,filterParams:s,currentParentModel:function(){return r.getCurrentFloatingFilterParentModel(e)},parentFilterInstance:u,showParentFilter:t,suppressFilterButton:!1};return this.userComponentFactory.getFloatingFilterCompDetails(o,c,l)},i.prototype.getCurrentFloatingFilterParentModel=function(e){var t=this.getFilterComponent(e,"NO_UI",!1);return t?t.resolveNow(null,function(r){return r&&r.getModel()}):null},i.prototype.destroyFilter=function(e,t){t===void 0&&(t="api");var r=e.getColId(),o=this.allColumnFilters.get(r);this.disposeColumnListener(r),o&&(this.disposeFilterWrapper(o,t),this.onFilterChanged({columns:[e],source:"api"}))},i.prototype.disposeColumnListener=function(e){var t=this.allColumnListeners.get(e);t&&(this.allColumnListeners.delete(e),t())},i.prototype.disposeFilterWrapper=function(e,t){var r=this;e.filterPromise.then(function(o){(o.setModel(null)||jr.resolve()).then(function(){r.getContext().destroyBean(o),e.column.setFilterActive(!1,"filterDestroyed"),r.allColumnFilters.delete(e.column.getColId());var a={type:b.EVENT_FILTER_DESTROYED,source:t,column:e.column};r.eventService.dispatchEvent(a)})})},i.prototype.checkDestroyFilter=function(e){var t=this.allColumnFilters.get(e);if(t){var r=t.column,o=(r.isFilterAllowed()?this.createFilterInstance(r):{compDetails:null}).compDetails;this.areFilterCompsDifferent(t.compDetails,o)&&this.destroyFilter(r,"columnChanged")}},i.prototype.areFilterCompsDifferent=function(e,t){if(!t||!e)return!0;var r=e.componentClass,o=t.componentClass,a=r===o||r?.render&&o?.render&&r.render===o.render;return!a},i.prototype.getAdvancedFilterModel=function(){return this.isAdvancedFilterEnabled()?this.advancedFilterService.getModel():null},i.prototype.setAdvancedFilterModel=function(e){this.isAdvancedFilterEnabled()&&(this.advancedFilterService.setModel(e??null),this.onFilterChanged({source:"advancedFilter"}))},i.prototype.showAdvancedFilterBuilder=function(e){this.isAdvancedFilterEnabled()&&this.advancedFilterService.getCtrl().toggleFilterBuilder(e,!0)},i.prototype.updateAdvancedFilterColumns=function(){this.isAdvancedFilterEnabled()&&this.advancedFilterService.updateValidity()&&this.onFilterChanged({source:"advancedFilter"})},i.prototype.hasFloatingFilters=function(){if(this.isAdvancedFilterEnabled())return!1;var e=this.columnModel.getAllGridColumns();return e?e.some(function(t){return t.getColDef().floatingFilter}):!1},i.prototype.getFilterInstance=function(e,t){if(this.isAdvancedFilterEnabled()){this.warnAdvancedFilters();return}var r=this.getFilterInstanceImpl(e,function(a){if(t){var s=wn(a);t(s)}}),o=wn(r);return o},i.prototype.getFilterInstanceImpl=function(e,t){var r=this.columnModel.getPrimaryColumn(e);if(r){var o=this.getFilterComponent(r,"NO_UI"),a=o&&o.resolveNow(null,function(s){return s});return a?setTimeout(t,0,a):o&&o.then(function(s){t(s)}),a}},i.prototype.warnAdvancedFilters=function(){Ut(function(){console.warn("AG Grid: Column Filter API methods have been disabled as Advanced Filters are enabled.")},"advancedFiltersCompatibility")},i.prototype.setupAdvancedFilterHeaderComp=function(e){var t;(t=this.advancedFilterService)===null||t===void 0||t.getCtrl().setupHeaderComp(e)},i.prototype.getHeaderRowCount=function(){return this.isAdvancedFilterHeaderActive()?1:0},i.prototype.getHeaderHeight=function(){return this.isAdvancedFilterHeaderActive()?this.advancedFilterService.getCtrl().getHeaderHeight():0},i.prototype.processFilterModelUpdateQueue=function(){var e=this;this.filterModelUpdateQueue.forEach(function(t){return e.setFilterModel(t)}),this.filterModelUpdateQueue=[]},i.prototype.destroy=function(){var e=this;n.prototype.destroy.call(this),this.allColumnFilters.forEach(function(t){return e.disposeFilterWrapper(t,"gridDestroyed")}),this.allColumnListeners.clear()},Jr([T("valueService")],i.prototype,"valueService",void 0),Jr([T("columnModel")],i.prototype,"columnModel",void 0),Jr([T("rowModel")],i.prototype,"rowModel",void 0),Jr([T("userComponentFactory")],i.prototype,"userComponentFactory",void 0),Jr([T("rowRenderer")],i.prototype,"rowRenderer",void 0),Jr([T("dataTypeService")],i.prototype,"dataTypeService",void 0),Jr([T("quickFilterService")],i.prototype,"quickFilterService",void 0),Jr([Zt("advancedFilterService")],i.prototype,"advancedFilterService",void 0),Jr([Oe],i.prototype,"init",null),i=Jr([Ue("filterManager")],i),i}(ve),eT=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Ad=function(n){eT(i,n);function i(e,t){var r=n.call(this,e)||this;return r.ctrl=t,r}return i.prototype.getCtrl=function(){return this.ctrl},i}(xt),tT=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Da=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},iT=function(n){tT(i,n);function i(e){return n.call(this,i.TEMPLATE,e)||this}return i.prototype.postConstruct=function(){var e=this,t=this.getGui(),r={addOrRemoveCssClass:function(o,a){return e.addOrRemoveCssClass(o,a)},addOrRemoveBodyCssClass:function(o,a){return e.eFloatingFilterBody.classList.toggle(o,a)},setButtonWrapperDisplayed:function(o){return Yt(e.eButtonWrapper,o)},setCompDetails:function(o){return e.setCompDetails(o)},getFloatingFilterComp:function(){return e.compPromise},setWidth:function(o){return t.style.width=o},setMenuIcon:function(o){return e.eButtonShowMainFilter.appendChild(o)}};this.ctrl.setComp(r,t,this.eButtonShowMainFilter,this.eFloatingFilterBody)},i.prototype.setCompDetails=function(e){var t=this;if(!e){this.destroyFloatingFilterComp(),this.compPromise=null;return}this.compPromise=e.newAgStackInstance(),this.compPromise.then(function(r){return t.afterCompCreated(r)})},i.prototype.destroyFloatingFilterComp=function(){this.floatingFilterComp&&(this.eFloatingFilterBody.removeChild(this.floatingFilterComp.getGui()),this.floatingFilterComp=this.destroyBean(this.floatingFilterComp))},i.prototype.afterCompCreated=function(e){if(e){if(!this.isAlive()){this.destroyBean(e);return}this.destroyFloatingFilterComp(),this.floatingFilterComp=e,this.eFloatingFilterBody.appendChild(e.getGui()),e.afterGuiAttached&&e.afterGuiAttached()}},i.TEMPLATE=`<div class="ag-header-cell ag-floating-filter" role="gridcell" tabindex="-1">
            <div ref="eFloatingFilterBody" role="presentation"></div>
            <div class="ag-floating-filter-button ag-hidden" ref="eButtonWrapper" role="presentation">
                <button type="button" class="ag-button ag-floating-filter-button-button" ref="eButtonShowMainFilter" tabindex="-1"></button>
            </div>
        </div>`,Da([be("eFloatingFilterBody")],i.prototype,"eFloatingFilterBody",void 0),Da([be("eButtonWrapper")],i.prototype,"eButtonWrapper",void 0),Da([be("eButtonShowMainFilter")],i.prototype,"eButtonShowMainFilter",void 0),Da([Oe],i.prototype,"postConstruct",null),Da([Ki],i.prototype,"destroyFloatingFilterComp",null),i}(Ad),rT=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),oT=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},Fi;(function(n){n.AUTO_HEIGHT="ag-layout-auto-height",n.NORMAL="ag-layout-normal",n.PRINT="ag-layout-print"})(Fi||(Fi={}));var Ld=function(n){rT(i,n);function i(e){var t=n.call(this)||this;return t.view=e,t}return i.prototype.postConstruct=function(){this.addManagedPropertyListener("domLayout",this.updateLayoutClasses.bind(this)),this.updateLayoutClasses()},i.prototype.updateLayoutClasses=function(){var e=this.getDomLayout(),t={autoHeight:e==="autoHeight",normal:e==="normal",print:e==="print"},r=t.autoHeight?Fi.AUTO_HEIGHT:t.print?Fi.PRINT:Fi.NORMAL;this.view.updateLayoutClasses(r,t)},i.prototype.getDomLayout=function(){var e,t=(e=this.gridOptionsService.get("domLayout"))!==null&&e!==void 0?e:"normal",r=["normal","print","autoHeight"];return r.indexOf(t)===-1?(Ut(function(){return console.warn("AG Grid: "+t+" is not valid for DOM Layout, valid values are 'normal', 'autoHeight', 'print'.")},"warn about dom layout values"),"normal"):t},oT([Oe],i.prototype,"postConstruct",null),i}(ve),nT=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),_l=function(){return _l=Object.assign||function(n){for(var i,e=1,t=arguments.length;e<t;e++){i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(n[r]=i[r])}return n},_l.apply(this,arguments)},Fo=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},$i;(function(n){n[n.Vertical=0]="Vertical",n[n.Horizontal=1]="Horizontal"})($i||($i={}));var ir;(function(n){n[n.Container=0]="Container",n[n.FakeContainer=1]="FakeContainer"})(ir||(ir={}));var aT=function(n){nT(i,n);function i(e){var t=n.call(this)||this;return t.lastScrollSource=[null,null],t.scrollLeft=-1,t.nextScrollTop=-1,t.scrollTop=-1,t.eBodyViewport=e,t.resetLastHScrollDebounced=zr(function(){return t.lastScrollSource[$i.Horizontal]=null},500),t.resetLastVScrollDebounced=zr(function(){return t.lastScrollSource[$i.Vertical]=null},500),t}return i.prototype.postConstruct=function(){var e=this;this.enableRtl=this.gridOptionsService.is("enableRtl"),this.addManagedListener(this.eventService,b.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,this.onDisplayedColumnsWidthChanged.bind(this)),this.ctrlsService.whenReady(function(t){e.centerRowContainerCtrl=t.centerRowContainerCtrl,e.onDisplayedColumnsWidthChanged(),e.addScrollListener()})},i.prototype.addScrollListener=function(){var e=this.ctrlsService.getFakeHScrollComp(),t=this.ctrlsService.getFakeVScrollComp();this.addManagedListener(this.centerRowContainerCtrl.getViewportElement(),"scroll",this.onHScroll.bind(this)),e.onScrollCallback(this.onFakeHScroll.bind(this));var r=this.gridOptionsService.is("debounceVerticalScrollbar"),o=r?zr(this.onVScroll.bind(this),100):this.onVScroll.bind(this),a=r?zr(this.onFakeVScroll.bind(this),100):this.onFakeVScroll.bind(this);this.addManagedListener(this.eBodyViewport,"scroll",o),t.onScrollCallback(a)},i.prototype.onDisplayedColumnsWidthChanged=function(){this.enableRtl&&this.horizontallyScrollHeaderCenterAndFloatingCenter()},i.prototype.horizontallyScrollHeaderCenterAndFloatingCenter=function(e){var t=this.centerRowContainerCtrl==null;if(!t){e===void 0&&(e=this.centerRowContainerCtrl.getCenterViewportScrollLeft());var r=this.enableRtl?e:-e,o=this.ctrlsService.getTopCenterRowContainerCtrl(),a=this.ctrlsService.getStickyTopCenterRowContainerCtrl(),s=this.ctrlsService.getBottomCenterRowContainerCtrl(),l=this.ctrlsService.getFakeHScrollComp(),u=this.ctrlsService.getHeaderRowContainerCtrl();u.setHorizontalScroll(-r),s.setContainerTranslateX(r),o.setContainerTranslateX(r),a.setContainerTranslateX(r);var c=this.centerRowContainerCtrl.getViewportElement(),d=this.lastScrollSource[$i.Horizontal]===ir.Container;e=Math.abs(e),d?l.setScrollPosition(e):cs(c,e,this.enableRtl)}},i.prototype.isControllingScroll=function(e,t){return this.lastScrollSource[t]==null?(this.lastScrollSource[t]=e,!0):this.lastScrollSource[t]===e},i.prototype.onFakeHScroll=function(){this.isControllingScroll(ir.FakeContainer,$i.Horizontal)&&this.onHScrollCommon(ir.FakeContainer)},i.prototype.onHScroll=function(){this.isControllingScroll(ir.Container,$i.Horizontal)&&this.onHScrollCommon(ir.Container)},i.prototype.onHScrollCommon=function(e){var t=this.centerRowContainerCtrl.getViewportElement(),r=t.scrollLeft;if(!this.shouldBlockScrollUpdate($i.Horizontal,r,!0)){var o;e===ir.Container?o=us(t,this.enableRtl):o=this.ctrlsService.getFakeHScrollComp().getScrollPosition(),this.doHorizontalScroll(Math.round(o)),this.resetLastHScrollDebounced()}},i.prototype.onFakeVScroll=function(){this.isControllingScroll(ir.FakeContainer,$i.Vertical)&&this.onVScrollCommon(ir.FakeContainer)},i.prototype.onVScroll=function(){this.isControllingScroll(ir.Container,$i.Vertical)&&this.onVScrollCommon(ir.Container)},i.prototype.onVScrollCommon=function(e){var t;e===ir.Container?t=this.eBodyViewport.scrollTop:t=this.ctrlsService.getFakeVScrollComp().getScrollPosition(),!this.shouldBlockScrollUpdate($i.Vertical,t,!0)&&(this.animationFrameService.setScrollTop(t),this.nextScrollTop=t,e===ir.Container?this.ctrlsService.getFakeVScrollComp().setScrollPosition(t):this.eBodyViewport.scrollTop=t,this.gridOptionsService.is("suppressAnimationFrame")?this.scrollGridIfNeeded():this.animationFrameService.schedule(),this.resetLastVScrollDebounced())},i.prototype.doHorizontalScroll=function(e){var t=this.ctrlsService.getFakeHScrollComp().getScrollPosition();this.scrollLeft===e&&e===t||(this.scrollLeft=e,this.fireScrollEvent($i.Horizontal),this.horizontallyScrollHeaderCenterAndFloatingCenter(e),this.centerRowContainerCtrl.onHorizontalViewportChanged(!0))},i.prototype.fireScrollEvent=function(e){var t=this,r={type:b.EVENT_BODY_SCROLL,direction:e===$i.Horizontal?"horizontal":"vertical",left:this.scrollLeft,top:this.scrollTop};this.eventService.dispatchEvent(r),window.clearTimeout(this.scrollTimer),this.scrollTimer=void 0,this.scrollTimer=window.setTimeout(function(){var o=_l(_l({},r),{type:b.EVENT_BODY_SCROLL_END});t.eventService.dispatchEvent(o)},100)},i.prototype.shouldBlockScrollUpdate=function(e,t,r){return r===void 0&&(r=!1),r&&!$o()?!1:e===$i.Vertical?this.shouldBlockVerticalScroll(t):this.shouldBlockHorizontalScroll(t)},i.prototype.shouldBlockVerticalScroll=function(e){var t=vs(this.eBodyViewport),r=this.eBodyViewport.scrollHeight;return e<0||e+t>r},i.prototype.shouldBlockHorizontalScroll=function(e){var t=this.centerRowContainerCtrl.getCenterWidth(),r=this.centerRowContainerCtrl.getViewportElement().scrollWidth;if(this.enableRtl&&ls()){if(e>0)return!0}else if(e<0)return!0;return Math.abs(e)+t>r},i.prototype.redrawRowsAfterScroll=function(){this.fireScrollEvent($i.Vertical)},i.prototype.checkScrollLeft=function(){this.scrollLeft!==this.centerRowContainerCtrl.getCenterViewportScrollLeft()&&this.onHScrollCommon(ir.Container)},i.prototype.scrollGridIfNeeded=function(){var e=this.scrollTop!=this.nextScrollTop;return e&&(this.scrollTop=this.nextScrollTop,this.redrawRowsAfterScroll()),e},i.prototype.setHorizontalScrollPosition=function(e,t){t===void 0&&(t=!1);var r=0,o=this.centerRowContainerCtrl.getViewportElement().scrollWidth-this.centerRowContainerCtrl.getCenterWidth();!t&&this.shouldBlockScrollUpdate($i.Horizontal,e)&&(this.enableRtl&&ls()?e=e>0?0:o:e=Math.min(Math.max(e,r),o)),cs(this.centerRowContainerCtrl.getViewportElement(),Math.abs(e),this.enableRtl),this.doHorizontalScroll(e)},i.prototype.setVerticalScrollPosition=function(e){this.eBodyViewport.scrollTop=e},i.prototype.getVScrollPosition=function(){var e={top:this.eBodyViewport.scrollTop,bottom:this.eBodyViewport.scrollTop+this.eBodyViewport.offsetHeight};return e},i.prototype.getHScrollPosition=function(){return this.centerRowContainerCtrl.getHScrollPosition()},i.prototype.isHorizontalScrollShowing=function(){return this.centerRowContainerCtrl.isHorizontalScrollShowing()},i.prototype.scrollHorizontally=function(e){var t=this.centerRowContainerCtrl.getViewportElement().scrollLeft;return this.setHorizontalScrollPosition(t+e),this.centerRowContainerCtrl.getViewportElement().scrollLeft-t},i.prototype.scrollToTop=function(){this.eBodyViewport.scrollTop=0},i.prototype.ensureNodeVisible=function(e,t){t===void 0&&(t=null);for(var r=this.rowModel.getRowCount(),o=-1,a=0;a<r;a++){var s=this.rowModel.getRow(a);if(typeof e=="function"){var l=e;if(s&&l(s)){o=a;break}}else if(e===s||e===s.data){o=a;break}}o>=0&&this.ensureIndexVisible(o,t)},i.prototype.ensureIndexVisible=function(e,t){if(!this.gridOptionsService.isDomLayout("print")){var r=this.paginationProxy.getRowCount();if(typeof e!="number"||e<0||e>=r){console.warn("AG Grid: Invalid row index for ensureIndexVisible: "+e);return}var o=this.gridOptionsService.is("pagination"),a=o&&!this.gridOptionsService.is("suppressPaginationPanel");a||this.paginationProxy.goToPageWithIndex(e);var s=this.ctrlsService.getGridBodyCtrl(),l=s.getStickyTopHeight(),u=this.paginationProxy.getRow(e),c;do{var d=u.rowTop,f=u.rowHeight,y=this.paginationProxy.getPixelOffset(),S=u.rowTop-y,w=S+u.rowHeight,E=this.getVScrollPosition(),_=this.heightScaler.getDivStretchOffset(),L=E.top+_,P=E.bottom+_,V=P-L,ne=this.heightScaler.getScrollPositionForPixel(S),ee=this.heightScaler.getScrollPositionForPixel(w-V),re=Math.min((ne+ee)/2,S),F=L+l>S,U=P<w,Y=null;t==="top"?Y=ne:t==="bottom"?Y=ee:t==="middle"?Y=re:F?Y=ne-l:U&&(Y=ee),Y!==null&&(this.setVerticalScrollPosition(Y),this.rowRenderer.redraw({afterScroll:!0})),c=d!==u.rowTop||f!==u.rowHeight}while(c);this.animationFrameService.flushAllFrames()}},i.prototype.ensureColumnVisible=function(e,t){t===void 0&&(t="auto");var r=this.columnModel.getGridColumn(e);if(r&&!r.isPinned()&&this.columnModel.isColumnDisplayed(r)){var o=this.getPositionedHorizontalScroll(r,t);o!==null&&this.centerRowContainerCtrl.setCenterViewportScrollLeft(o),this.centerRowContainerCtrl.onHorizontalViewportChanged(),this.animationFrameService.flushAllFrames()}},i.prototype.getPositionedHorizontalScroll=function(e,t){var r=this.isColumnOutsideViewport(e),o=r.columnBeforeStart,a=r.columnAfterEnd,s=this.centerRowContainerCtrl.getCenterWidth()<e.getActualWidth(),l=this.centerRowContainerCtrl.getCenterWidth(),u=this.enableRtl,c=(u?o:a)||s,d=u?a:o;t!=="auto"&&(c=t==="start",d=t==="end");var f=t==="middle";if(c||d||f){var y=this.getColumnBounds(e),S=y.colLeft,w=y.colMiddle,E=y.colRight;return f?w-l/2:c?u?E:S:u?S-l:E-l}return null},i.prototype.isColumnOutsideViewport=function(e){var t=this.getViewportBounds(),r=t.start,o=t.end,a=this.getColumnBounds(e),s=a.colLeft,l=a.colRight,u=this.enableRtl,c=u?r>l:o<l,d=u?o<s:r>s;return{columnBeforeStart:c,columnAfterEnd:d}},i.prototype.getColumnBounds=function(e){var t=this.enableRtl,r=this.columnModel.getBodyContainerWidth(),o=e.getActualWidth(),a=e.getLeft(),s=t?-1:1,l=t?r-a:a,u=l+o*s,c=l+o/2*s;return{colLeft:l,colMiddle:c,colRight:u}},i.prototype.getViewportBounds=function(){var e=this.centerRowContainerCtrl.getCenterWidth(),t=this.centerRowContainerCtrl.getCenterViewportScrollLeft(),r=t,o=e+t;return{start:r,end:o,width:e}},Fo([T("ctrlsService")],i.prototype,"ctrlsService",void 0),Fo([T("animationFrameService")],i.prototype,"animationFrameService",void 0),Fo([T("paginationProxy")],i.prototype,"paginationProxy",void 0),Fo([T("rowModel")],i.prototype,"rowModel",void 0),Fo([T("rowContainerHeightService")],i.prototype,"heightScaler",void 0),Fo([T("rowRenderer")],i.prototype,"rowRenderer",void 0),Fo([T("columnModel")],i.prototype,"columnModel",void 0),Fo([Oe],i.prototype,"postConstruct",null),i}(ve),sT=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),zc=function(){return zc=Object.assign||function(n){for(var i,e=1,t=arguments.length;e<t;e++){i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(n[r]=i[r])}return n},zc.apply(this,arguments)},Er=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},lT=function(n,i){var e=typeof Symbol=="function"&&n[Symbol.iterator];if(!e)return n;var t=e.call(n),r,o=[],a;try{for(;(i===void 0||i-- >0)&&!(r=t.next()).done;)o.push(r.value)}catch(s){a={error:s}}finally{try{r&&!r.done&&(e=t.return)&&e.call(t)}finally{if(a)throw a.error}}return o},uT=function(n,i){for(var e=0,t=i.length,r=n.length;e<t;e++,r++)n[r]=i[e];return n},cT=function(n){sT(i,n);function i(e){var t=n.call(this)||this;return t.isMultiRowDrag=!1,t.isGridSorted=!1,t.isGridFiltered=!1,t.isRowGroupActive=!1,t.eContainer=e,t}return i.prototype.postConstruct=function(){var e=this;this.gridOptionsService.isRowModelType("clientSide")&&(this.clientSideRowModel=this.rowModel);var t=function(){e.onSortChanged(),e.onFilterChanged(),e.onRowGroupChanged()};this.addManagedListener(this.eventService,b.EVENT_SORT_CHANGED,this.onSortChanged.bind(this)),this.addManagedListener(this.eventService,b.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this)),this.addManagedListener(this.eventService,b.EVENT_COLUMN_ROW_GROUP_CHANGED,this.onRowGroupChanged.bind(this)),this.addManagedListener(this.eventService,b.EVENT_MODEL_UPDATED,function(){t()}),t(),this.ctrlsService.whenReady(function(){var r=e.ctrlsService.getGridBodyCtrl();e.autoScrollService=new Hv({scrollContainer:r.getBodyViewportElement(),scrollAxis:"y",getVerticalPosition:function(){return r.getScrollFeature().getVScrollPosition().top},setVerticalPosition:function(o){return r.getScrollFeature().setVerticalScrollPosition(o)},onScrollCallback:function(){e.onDragging(e.lastDraggingEvent)}})})},i.prototype.onSortChanged=function(){this.isGridSorted=this.sortController.isSortActive()},i.prototype.onFilterChanged=function(){this.isGridFiltered=this.filterManager.isAnyFilterPresent()},i.prototype.onRowGroupChanged=function(){var e=this.columnModel.getRowGroupColumns();this.isRowGroupActive=!Cr(e)},i.prototype.getContainer=function(){return this.eContainer},i.prototype.isInterestedIn=function(e){return e===nr.RowDrag},i.prototype.getIconName=function(){var e=this.gridOptionsService.is("rowDragManaged");return e&&this.shouldPreventRowMove()?zi.ICON_NOT_ALLOWED:zi.ICON_MOVE},i.prototype.shouldPreventRowMove=function(){return this.isGridSorted||this.isGridFiltered||this.isRowGroupActive},i.prototype.getRowNodes=function(e){var t=this;if(!this.isFromThisGrid(e))return e.dragItem.rowNodes||[];var r=this.gridOptionsService.is("rowDragMultiRow"),o=uT([],lT(this.selectionService.getSelectedNodes())).sort(function(s,l){return s.rowIndex==null||l.rowIndex==null?0:t.getRowIndexNumber(s)-t.getRowIndexNumber(l)}),a=e.dragItem.rowNode;return r&&o.indexOf(a)!==-1?(this.isMultiRowDrag=!0,o):(this.isMultiRowDrag=!1,[a])},i.prototype.onDragEnter=function(e){e.dragItem.rowNodes=this.getRowNodes(e),this.dispatchGridEvent(b.EVENT_ROW_DRAG_ENTER,e),this.getRowNodes(e).forEach(function(t){t.setDragging(!0)}),this.onEnterOrDragging(e)},i.prototype.onDragging=function(e){this.onEnterOrDragging(e)},i.prototype.isFromThisGrid=function(e){var t=e.dragSource.dragSourceDomDataKey;return t===this.gridOptionsService.getDomDataKey()},i.prototype.isDropZoneWithinThisGrid=function(e){var t=this.ctrlsService.getGridBodyCtrl(),r=t.getGui(),o=e.dropZoneTarget;return!r.contains(o)},i.prototype.onEnterOrDragging=function(e){this.dispatchGridEvent(b.EVENT_ROW_DRAG_MOVE,e),this.lastDraggingEvent=e;var t=this.mouseEventService.getNormalisedPosition(e).y,r=this.gridOptionsService.is("rowDragManaged");r&&this.doManagedDrag(e,t),this.autoScrollService.check(e.event)},i.prototype.doManagedDrag=function(e,t){var r=this.isFromThisGrid(e),o=this.gridOptionsService.is("rowDragManaged"),a=e.dragItem.rowNodes;o&&this.shouldPreventRowMove()||(this.gridOptionsService.is("suppressMoveWhenRowDragging")||!r?this.isDropZoneWithinThisGrid(e)||this.clientSideRowModel.highlightRowAtPixel(a[0],t):this.moveRows(a,t))},i.prototype.getRowIndexNumber=function(e){return parseInt(ai(e.getRowIndexString().split("-")),10)},i.prototype.moveRowAndClearHighlight=function(e){var t=this,r=this.clientSideRowModel.getLastHighlightedRowNode(),o=r&&r.highlighted===To.Below,a=this.mouseEventService.getNormalisedPosition(e).y,s=e.dragItem.rowNodes,l=o?1:0;if(this.isFromThisGrid(e))s.forEach(function(d){d.rowTop<a&&(l-=1)}),this.moveRows(s,a,l);else{var u=this.gridOptionsService.getCallback("getRowId"),c=this.clientSideRowModel.getRowIndexAtPixel(a)+1;this.clientSideRowModel.getHighlightPosition(a)===To.Above&&c--,this.clientSideRowModel.updateRowData({add:s.map(function(d){return d.data}).filter(function(d){return!t.clientSideRowModel.getRowNode(u?u({data:d,level:0}):d.id)}),addIndex:c})}this.clearRowHighlight()},i.prototype.clearRowHighlight=function(){this.clientSideRowModel.highlightRowAtPixel(null)},i.prototype.moveRows=function(e,t,r){r===void 0&&(r=0);var o=this.clientSideRowModel.ensureRowsAtPixel(e,t,r);o&&(this.focusService.clearFocusedCell(),this.rangeService&&this.rangeService.removeAllCellRanges())},i.prototype.addRowDropZone=function(e){var t=this;if(!e.getContainer()){Ut(function(){return console.warn("AG Grid: addRowDropZone - A container target needs to be provided")},"add-drop-zone-empty-target");return}if(this.dragAndDropService.findExternalZone(e)){console.warn("AG Grid: addRowDropZone - target already exists in the list of DropZones. Use `removeRowDropZone` before adding it again.");return}var r={getContainer:e.getContainer};e.fromGrid?(e.fromGrid=void 0,r=e):(e.onDragEnter&&(r.onDragEnter=function(o){e.onDragEnter(t.draggingToRowDragEvent(b.EVENT_ROW_DRAG_ENTER,o))}),e.onDragLeave&&(r.onDragLeave=function(o){e.onDragLeave(t.draggingToRowDragEvent(b.EVENT_ROW_DRAG_LEAVE,o))}),e.onDragging&&(r.onDragging=function(o){e.onDragging(t.draggingToRowDragEvent(b.EVENT_ROW_DRAG_MOVE,o))}),e.onDragStop&&(r.onDragStop=function(o){e.onDragStop(t.draggingToRowDragEvent(b.EVENT_ROW_DRAG_END,o))})),this.dragAndDropService.addDropTarget(zc({isInterestedIn:function(o){return o===nr.RowDrag},getIconName:function(){return zi.ICON_MOVE},external:!0},r))},i.prototype.getRowDropZone=function(e){var t=this,r=this.getContainer.bind(this),o=this.onDragEnter.bind(this),a=this.onDragLeave.bind(this),s=this.onDragging.bind(this),l=this.onDragStop.bind(this);return e?{getContainer:r,onDragEnter:e.onDragEnter?function(u){o(u),e.onDragEnter(t.draggingToRowDragEvent(b.EVENT_ROW_DRAG_ENTER,u))}:o,onDragLeave:e.onDragLeave?function(u){a(u),e.onDragLeave(t.draggingToRowDragEvent(b.EVENT_ROW_DRAG_LEAVE,u))}:a,onDragging:e.onDragging?function(u){s(u),e.onDragging(t.draggingToRowDragEvent(b.EVENT_ROW_DRAG_MOVE,u))}:s,onDragStop:e.onDragStop?function(u){l(u),e.onDragStop(t.draggingToRowDragEvent(b.EVENT_ROW_DRAG_END,u))}:l,fromGrid:!0}:{getContainer:r,onDragEnter:o,onDragLeave:a,onDragging:s,onDragStop:l,fromGrid:!0}},i.prototype.draggingToRowDragEvent=function(e,t){var r=this.mouseEventService.getNormalisedPosition(t).y,o=r>this.paginationProxy.getCurrentPageHeight(),a=-1,s;o||(a=this.rowModel.getRowIndexAtPixel(r),s=this.rowModel.getRow(a));var l;switch(t.vDirection){case na.Down:l="down";break;case na.Up:l="up";break;default:l=null;break}var u={type:e,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context,event:t.event,node:t.dragItem.rowNode,nodes:t.dragItem.rowNodes,overIndex:a,overNode:s,y:r,vDirection:l};return u},i.prototype.dispatchGridEvent=function(e,t){var r=this.draggingToRowDragEvent(e,t);this.eventService.dispatchEvent(r)},i.prototype.onDragLeave=function(e){this.dispatchGridEvent(b.EVENT_ROW_DRAG_LEAVE,e),this.stopDragging(e),this.gridOptionsService.is("rowDragManaged")&&this.clearRowHighlight(),this.isFromThisGrid(e)&&(this.isMultiRowDrag=!1)},i.prototype.onDragStop=function(e){this.dispatchGridEvent(b.EVENT_ROW_DRAG_END,e),this.stopDragging(e),this.gridOptionsService.is("rowDragManaged")&&(this.gridOptionsService.is("suppressMoveWhenRowDragging")||!this.isFromThisGrid(e))&&!this.isDropZoneWithinThisGrid(e)&&this.moveRowAndClearHighlight(e)},i.prototype.stopDragging=function(e){this.autoScrollService.ensureCleared(),this.getRowNodes(e).forEach(function(t){t.setDragging(!1)})},Er([T("dragAndDropService")],i.prototype,"dragAndDropService",void 0),Er([T("rowModel")],i.prototype,"rowModel",void 0),Er([T("paginationProxy")],i.prototype,"paginationProxy",void 0),Er([T("columnModel")],i.prototype,"columnModel",void 0),Er([T("focusService")],i.prototype,"focusService",void 0),Er([T("sortController")],i.prototype,"sortController",void 0),Er([T("filterManager")],i.prototype,"filterManager",void 0),Er([T("selectionService")],i.prototype,"selectionService",void 0),Er([T("mouseEventService")],i.prototype,"mouseEventService",void 0),Er([T("ctrlsService")],i.prototype,"ctrlsService",void 0),Er([Zt("rangeService")],i.prototype,"rangeService",void 0),Er([Oe],i.prototype,"postConstruct",null),i}(ve),dT=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),ar=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},aa;(function(n){n.ANIMATION_ON="ag-row-animation",n.ANIMATION_OFF="ag-row-no-animation"})(aa||(aa={}));var Uv="ag-force-vertical-scroll",pT="ag-selectable",fT="ag-column-moving",hT=function(n){dT(i,n);function i(){var e=n!==null&&n.apply(this,arguments)||this;return e.stickyTopHeight=0,e}return i.prototype.getScrollFeature=function(){return this.bodyScrollFeature},i.prototype.getBodyViewportElement=function(){return this.eBodyViewport},i.prototype.setComp=function(e,t,r,o,a,s){this.comp=e,this.eGridBody=t,this.eBodyViewport=r,this.eTop=o,this.eBottom=a,this.eStickyTop=s,this.setCellTextSelection(this.gridOptionsService.is("enableCellTextSelection")),this.createManagedBean(new Ld(this.comp)),this.bodyScrollFeature=this.createManagedBean(new aT(this.eBodyViewport)),this.addRowDragListener(),this.setupRowAnimationCssClass(),this.addEventListeners(),this.addFocusListeners([o,r,a,s]),this.onGridColumnsChanged(),this.addBodyViewportListener(),this.setFloatingHeights(),this.disableBrowserDragging(),this.addStopEditingWhenGridLosesFocus(),this.filterManager.setupAdvancedFilterHeaderComp(o),this.ctrlsService.registerGridBodyCtrl(this)},i.prototype.getComp=function(){return this.comp},i.prototype.addEventListeners=function(){this.addManagedListener(this.eventService,b.EVENT_GRID_COLUMNS_CHANGED,this.onGridColumnsChanged.bind(this)),this.addManagedListener(this.eventService,b.EVENT_SCROLL_VISIBILITY_CHANGED,this.onScrollVisibilityChanged.bind(this)),this.addManagedListener(this.eventService,b.EVENT_PINNED_ROW_DATA_CHANGED,this.onPinnedRowDataChanged.bind(this)),this.addManagedListener(this.eventService,b.EVENT_HEADER_HEIGHT_CHANGED,this.onHeaderHeightChanged.bind(this))},i.prototype.addFocusListeners=function(e){var t=this;e.forEach(function(r){t.addManagedListener(r,"focusin",function(o){var a=o.target,s=On(a,"ag-root",r);r.classList.toggle("ag-has-focus",!s)}),t.addManagedListener(r,"focusout",function(o){var a=o.target,s=o.relatedTarget,l=r.contains(s),u=On(s,"ag-root",r),c=On(a,"ag-root",r);c||(!l||u)&&r.classList.remove("ag-has-focus")})})},i.prototype.setColumnMovingCss=function(e){this.comp.setColumnMovingCss(fT,e)},i.prototype.setCellTextSelection=function(e){e===void 0&&(e=!1),this.comp.setCellSelectableCss(pT,e)},i.prototype.onScrollVisibilityChanged=function(){var e=this,t=this.scrollVisibleService.isVerticalScrollShowing();this.setVerticalScrollPaddingVisible(t),this.setStickyTopWidth(t);var r=t&&this.gridOptionsService.getScrollbarWidth()||0,o=as()?16:0,a="calc(100% + "+(r+o)+"px)";this.animationFrameService.requestAnimationFrame(function(){return e.comp.setBodyViewportWidth(a)})},i.prototype.onGridColumnsChanged=function(){var e=this.columnModel.getAllGridColumns();this.comp.setColumnCount(e?e.length:0)},i.prototype.disableBrowserDragging=function(){this.addManagedListener(this.eGridBody,"dragstart",function(e){if(e.target instanceof HTMLImageElement)return e.preventDefault(),!1})},i.prototype.addStopEditingWhenGridLosesFocus=function(){var e=this;if(this.gridOptionsService.is("stopEditingWhenCellsLoseFocus")){var t=function(o){var a=o.relatedTarget;if(yl(a)===null){e.rowRenderer.stopEditing();return}var s=r.some(function(u){return u.contains(a)})&&e.mouseEventService.isElementInThisGrid(a);if(!s){var l=e.popupService;s=l.getActivePopups().some(function(u){return u.contains(a)})||l.isElementWithinCustomPopup(a)}s||e.rowRenderer.stopEditing()},r=[this.eBodyViewport,this.eBottom,this.eTop,this.eStickyTop];r.forEach(function(o){return e.addManagedListener(o,"focusout",t)})}},i.prototype.updateRowCount=function(){var e=this.headerNavigationService.getHeaderRowCount()+this.filterManager.getHeaderRowCount(),t=this.rowModel.isLastRowIndexKnown()?this.rowModel.getRowCount():-1,r=t===-1?-1:e+t;this.comp.setRowCount(r)},i.prototype.registerBodyViewportResizeListener=function(e){this.comp.registerBodyViewportResizeListener(e)},i.prototype.setVerticalScrollPaddingVisible=function(e){var t=e?"scroll":"hidden";this.comp.setPinnedTopBottomOverflowY(t)},i.prototype.isVerticalScrollShowing=function(){var e=this.gridOptionsService.is("alwaysShowVerticalScroll"),t=e?Uv:null,r=this.gridOptionsService.isDomLayout("normal");return this.comp.setAlwaysVerticalScrollClass(t,e),e||r&&cv(this.eBodyViewport)},i.prototype.setupRowAnimationCssClass=function(){var e=this,t=function(){var r=e.gridOptionsService.isAnimateRows()&&!e.rowContainerHeightService.isStretching(),o=r?aa.ANIMATION_ON:aa.ANIMATION_OFF;e.comp.setRowAnimationCssOnBodyViewport(o,r)};t(),this.addManagedListener(this.eventService,b.EVENT_HEIGHT_SCALE_CHANGED,t),this.addManagedPropertyListener("animateRows",t)},i.prototype.getGridBodyElement=function(){return this.eGridBody},i.prototype.addBodyViewportListener=function(){var e=this.onBodyViewportContextMenu.bind(this);this.addManagedListener(this.eBodyViewport,"contextmenu",e),this.mockContextMenuForIPad(e),this.addManagedListener(this.eBodyViewport,"wheel",this.onBodyViewportWheel.bind(this)),this.addManagedListener(this.eStickyTop,"wheel",this.onStickyTopWheel.bind(this)),this.addFullWidthContainerWheelListener()},i.prototype.addFullWidthContainerWheelListener=function(){var e=this,t=this.eBodyViewport.querySelector(".ag-full-width-container"),r=this.eBodyViewport.querySelector(".ag-center-cols-viewport");t&&r&&this.addManagedListener(t,"wheel",function(o){return e.onFullWidthContainerWheel(o,r)})},i.prototype.onFullWidthContainerWheel=function(e,t){!e.deltaX||Math.abs(e.deltaY)>Math.abs(e.deltaX)||!this.mouseEventService.isEventFromThisGrid(e)||(e.preventDefault(),t.scrollBy({left:e.deltaX}))},i.prototype.onBodyViewportContextMenu=function(e,t,r){if(!(!e&&!r)){if(this.gridOptionsService.is("preventDefaultOnContextMenu")){var o=e||r;o.preventDefault()}var a=(e||t).target;if(a===this.eBodyViewport||a===this.ctrlsService.getCenterRowContainerCtrl().getViewportElement()){if(!this.contextMenuFactory)return;e?this.contextMenuFactory.onContextMenu(e,null,null,null,null,this.eGridBody):r&&this.contextMenuFactory.onContextMenu(null,r,null,null,null,this.eGridBody)}}},i.prototype.mockContextMenuForIPad=function(e){if($o()){var t=new wr(this.eBodyViewport),r=function(o){e(void 0,o.touchStart,o.touchEvent)};this.addManagedListener(t,wr.EVENT_LONG_TAP,r),this.addDestroyFunc(function(){return t.destroy()})}},i.prototype.onBodyViewportWheel=function(e){this.gridOptionsService.is("suppressScrollWhenPopupsAreOpen")&&this.popupService.hasAnchoredPopup()&&e.preventDefault()},i.prototype.onStickyTopWheel=function(e){e.preventDefault(),e.offsetY&&this.scrollVertically(e.deltaY)},i.prototype.getGui=function(){return this.eGridBody},i.prototype.scrollVertically=function(e){var t=this.eBodyViewport.scrollTop;return this.bodyScrollFeature.setVerticalScrollPosition(t+e),this.eBodyViewport.scrollTop-t},i.prototype.addRowDragListener=function(){this.rowDragFeature=this.createManagedBean(new cT(this.eBodyViewport)),this.dragAndDropService.addDropTarget(this.rowDragFeature)},i.prototype.getRowDragFeature=function(){return this.rowDragFeature},i.prototype.onPinnedRowDataChanged=function(){this.setFloatingHeights()},i.prototype.setFloatingHeights=function(){var e=this.pinnedRowModel,t=e.getPinnedTopTotalHeight();t&&(t+=1);var r=e.getPinnedBottomTotalHeight();r&&(r+=1),this.comp.setTopHeight(t),this.comp.setBottomHeight(r),this.comp.setTopDisplay(t?"inherit":"none"),this.comp.setBottomDisplay(r?"inherit":"none"),this.setStickyTopOffsetTop()},i.prototype.setStickyTopHeight=function(e){e===void 0&&(e=0),this.comp.setStickyTopHeight(e+"px"),this.stickyTopHeight=e},i.prototype.getStickyTopHeight=function(){return this.stickyTopHeight},i.prototype.setStickyTopWidth=function(e){if(!e)this.comp.setStickyTopWidth("100%");else{var t=this.gridOptionsService.getScrollbarWidth();this.comp.setStickyTopWidth("calc(100% - "+t+"px)")}},i.prototype.onHeaderHeightChanged=function(){this.setStickyTopOffsetTop()},i.prototype.setStickyTopOffsetTop=function(){var e=this.ctrlsService.getGridHeaderCtrl(),t=e.getHeaderHeight()+this.filterManager.getHeaderHeight(),r=this.pinnedRowModel.getPinnedTopTotalHeight(),o=0;t>0&&(o+=t+1),r>0&&(o+=r+1),this.comp.setStickyTopTop(o+"px")},i.prototype.sizeColumnsToFit=function(e,t){var r=this,o=this.isVerticalScrollShowing(),a=o?this.gridOptionsService.getScrollbarWidth():0,s=Ul(this.eGridBody),l=s-a;if(l>0){this.columnModel.sizeColumnsToFit(l,"sizeColumnsToFit",!1,e);return}t===void 0?window.setTimeout(function(){r.sizeColumnsToFit(e,100)},0):t===100?window.setTimeout(function(){r.sizeColumnsToFit(e,500)},100):t===500?window.setTimeout(function(){r.sizeColumnsToFit(e,-1)},500):console.warn("AG Grid: tried to call sizeColumnsToFit() but the grid is coming back with zero width, maybe the grid is not visible yet on the screen?")},i.prototype.addScrollEventListener=function(e){this.eBodyViewport.addEventListener("scroll",e,{passive:!0})},i.prototype.removeScrollEventListener=function(e){this.eBodyViewport.removeEventListener("scroll",e)},ar([T("animationFrameService")],i.prototype,"animationFrameService",void 0),ar([T("rowContainerHeightService")],i.prototype,"rowContainerHeightService",void 0),ar([T("ctrlsService")],i.prototype,"ctrlsService",void 0),ar([T("columnModel")],i.prototype,"columnModel",void 0),ar([T("scrollVisibleService")],i.prototype,"scrollVisibleService",void 0),ar([Zt("contextMenuFactory")],i.prototype,"contextMenuFactory",void 0),ar([T("headerNavigationService")],i.prototype,"headerNavigationService",void 0),ar([T("dragAndDropService")],i.prototype,"dragAndDropService",void 0),ar([T("pinnedRowModel")],i.prototype,"pinnedRowModel",void 0),ar([T("rowRenderer")],i.prototype,"rowRenderer",void 0),ar([T("popupService")],i.prototype,"popupService",void 0),ar([T("mouseEventService")],i.prototype,"mouseEventService",void 0),ar([T("rowModel")],i.prototype,"rowModel",void 0),ar([T("filterManager")],i.prototype,"filterManager",void 0),i}(ve),bl;(function(n){n[n.FILL=0]="FILL",n[n.RANGE=1]="RANGE"})(bl||(bl={}));var Qn;(function(n){n[n.VALUE=0]="VALUE",n[n.DIMENSION=1]="DIMENSION"})(Qn||(Qn={}));var Ra="ag-cell-range-selected",vT="ag-cell-range-chart",gT="ag-cell-range-single-cell",yT="ag-cell-range-chart-category",mT="ag-cell-range-handle",CT="ag-cell-range-top",ST="ag-cell-range-right",wT="ag-cell-range-bottom",TT="ag-cell-range-left",OT=function(){function n(i,e){this.beans=i,this.cellCtrl=e}return n.prototype.setComp=function(i,e){this.cellComp=i,this.eGui=e,this.onRangeSelectionChanged()},n.prototype.onRangeSelectionChanged=function(){this.cellComp&&(this.rangeCount=this.beans.rangeService.getCellRangeCount(this.cellCtrl.getCellPosition()),this.hasChartRange=this.getHasChartRange(),this.cellComp.addOrRemoveCssClass(Ra,this.rangeCount!==0),this.cellComp.addOrRemoveCssClass(Ra+"-1",this.rangeCount===1),this.cellComp.addOrRemoveCssClass(Ra+"-2",this.rangeCount===2),this.cellComp.addOrRemoveCssClass(Ra+"-3",this.rangeCount===3),this.cellComp.addOrRemoveCssClass(Ra+"-4",this.rangeCount>=4),this.cellComp.addOrRemoveCssClass(vT,this.hasChartRange),Dn(this.eGui,this.rangeCount>0?!0:void 0),this.cellComp.addOrRemoveCssClass(gT,this.isSingleCell()),this.updateRangeBorders(),this.refreshHandle())},n.prototype.updateRangeBorders=function(){var i=this.getRangeBorders(),e=this.isSingleCell(),t=!e&&i.top,r=!e&&i.right,o=!e&&i.bottom,a=!e&&i.left;this.cellComp.addOrRemoveCssClass(CT,t),this.cellComp.addOrRemoveCssClass(ST,r),this.cellComp.addOrRemoveCssClass(wT,o),this.cellComp.addOrRemoveCssClass(TT,a)},n.prototype.isSingleCell=function(){var i=this.beans.rangeService;return this.rangeCount===1&&i&&!i.isMoreThanOneCell()},n.prototype.getHasChartRange=function(){var i=this.beans.rangeService;if(!this.rangeCount||!i)return!1;var e=i.getCellRanges();return e.length>0&&e.every(function(t){return Lr([Qn.DIMENSION,Qn.VALUE],t.type)})},n.prototype.updateRangeBordersIfRangeCount=function(){this.rangeCount>0&&(this.updateRangeBorders(),this.refreshHandle())},n.prototype.getRangeBorders=function(){var i=this,e=this.beans.gridOptionsService.is("enableRtl"),t=!1,r=!1,o=!1,a=!1,s=this.cellCtrl.getCellPosition().column,l=this.beans,u=l.rangeService,c=l.columnModel,d,f;e?(d=c.getDisplayedColAfter(s),f=c.getDisplayedColBefore(s)):(d=c.getDisplayedColBefore(s),f=c.getDisplayedColAfter(s));var y=u.getCellRanges().filter(function(L){return u.isCellInSpecificRange(i.cellCtrl.getCellPosition(),L)});d||(a=!0),f||(r=!0);for(var S=0;S<y.length&&!(t&&r&&o&&a);S++){var w=y[S],E=u.getRangeStartRow(w),_=u.getRangeEndRow(w);!t&&this.beans.rowPositionUtils.sameRow(E,this.cellCtrl.getCellPosition())&&(t=!0),!o&&this.beans.rowPositionUtils.sameRow(_,this.cellCtrl.getCellPosition())&&(o=!0),!a&&d&&w.columns.indexOf(d)<0&&(a=!0),!r&&f&&w.columns.indexOf(f)<0&&(r=!0)}return{top:t,right:r,bottom:o,left:a}},n.prototype.refreshHandle=function(){if(this.beans.rangeService){var i=this.shouldHaveSelectionHandle();this.selectionHandle&&!i&&(this.selectionHandle=this.beans.context.destroyBean(this.selectionHandle)),i&&this.addSelectionHandle(),this.cellComp.addOrRemoveCssClass(mT,!!this.selectionHandle)}},n.prototype.shouldHaveSelectionHandle=function(){var i=this.beans,e=i.gridOptionsService,t=i.rangeService,r=t.getCellRanges(),o=r.length;if(this.rangeCount<1||o<1)return!1;var a=ai(r),s=this.cellCtrl.getCellPosition(),l=e.is("enableFillHandle")&&!this.cellCtrl.isSuppressFillHandle(),u=e.is("enableRangeHandle"),c=o===1&&!this.cellCtrl.isEditing()&&(l||u);if(this.hasChartRange){var d=r[0].type===Qn.DIMENSION,f=d&&t.isCellInSpecificRange(s,r[0]);this.cellComp.addOrRemoveCssClass(yT,f),c=a.type===Qn.VALUE}return c&&a.endRow!=null&&t.isContiguousRange(a)&&t.isBottomRightCell(a,s)},n.prototype.addSelectionHandle=function(){var i=this.beans,e=i.gridOptionsService,t=i.rangeService,r=ai(t.getCellRanges()).type,o=e.is("enableFillHandle")&&vt(r),a=o?bl.FILL:bl.RANGE;this.selectionHandle&&this.selectionHandle.getType()!==a&&(this.selectionHandle=this.beans.context.destroyBean(this.selectionHandle)),this.selectionHandle||(this.selectionHandle=this.beans.selectionHandleFactory.createSelectionHandle(a)),this.selectionHandle.refresh(this.cellCtrl)},n.prototype.destroy=function(){this.beans.context.destroyBean(this.selectionHandle)},n}(),PT=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),ET=function(n){PT(i,n);function i(e,t){var r=n.call(this)||this;return r.cellCtrl=e,r.beans=t,r.column=e.getColumn(),r.rowNode=e.getRowNode(),r.setupColSpan(),r.setupRowSpan(),r}return i.prototype.setupRowSpan=function(){this.rowSpan=this.column.getRowSpan(this.rowNode)},i.prototype.setComp=function(e){this.eGui=e,this.onLeftChanged(),this.onWidthChanged(),this.applyRowSpan()},i.prototype.onDisplayColumnsChanged=function(){var e=this.getColSpanningList();Ko(this.colsSpanning,e)||(this.colsSpanning=e,this.onWidthChanged(),this.onLeftChanged())},i.prototype.setupColSpan=function(){this.column.getColDef().colSpan!=null&&(this.colsSpanning=this.getColSpanningList(),this.addManagedListener(this.beans.eventService,b.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayColumnsChanged.bind(this)),this.addManagedListener(this.beans.eventService,b.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,this.onWidthChanged.bind(this)))},i.prototype.onWidthChanged=function(){if(this.eGui){var e=this.getCellWidth();this.eGui.style.width=e+"px"}},i.prototype.getCellWidth=function(){return this.colsSpanning?this.colsSpanning.reduce(function(e,t){return e+t.getActualWidth()},0):this.column.getActualWidth()},i.prototype.getColSpanningList=function(){var e=this.column.getColSpan(this.rowNode),t=[];if(e===1)t.push(this.column);else for(var r=this.column,o=this.column.getPinned(),a=0;r&&a<e&&(t.push(r),r=this.beans.columnModel.getDisplayedColAfter(r),!(!r||vt(r)||o!==r.getPinned()));a++);return t},i.prototype.onLeftChanged=function(){if(this.eGui){var e=this.modifyLeftForPrintLayout(this.getCellLeft());this.eGui.style.left=e+"px"}},i.prototype.getCellLeft=function(){var e;return this.beans.gridOptionsService.is("enableRtl")&&this.colsSpanning?e=ai(this.colsSpanning):e=this.column,e.getLeft()},i.prototype.modifyLeftForPrintLayout=function(e){if(!this.cellCtrl.isPrintLayout()||this.column.getPinned()==="left")return e;var t=this.beans.columnModel.getDisplayedColumnsLeftWidth();if(this.column.getPinned()==="right"){var r=this.beans.columnModel.getBodyContainerWidth();return t+r+(e||0)}return t+(e||0)},i.prototype.applyRowSpan=function(){if(this.rowSpan!==1){var e=this.beans.gridOptionsService.getRowHeightAsNumber(),t=e*this.rowSpan;this.eGui.style.height=t+"px",this.eGui.style.zIndex="1"}},i.prototype.destroy=function(){n.prototype.destroy.call(this)},i}(ve),_T=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),bT=function(n){_T(i,n);function i(e,t){var r=n.call(this)||this;return r.staticClasses=[],r.cellCtrl=e,r.beans=t,r.column=e.getColumn(),r.rowNode=e.getRowNode(),r}return i.prototype.setComp=function(e){this.cellComp=e,this.applyUserStyles(),this.applyCellClassRules(),this.applyClassesFromColDef()},i.prototype.applyCellClassRules=function(){var e=this,t=this.column.getColDef(),r={value:this.cellCtrl.getValue(),data:this.rowNode.data,node:this.rowNode,colDef:t,column:this.column,rowIndex:this.rowNode.rowIndex,api:this.beans.gridOptionsService.api,columnApi:this.beans.gridOptionsService.columnApi,context:this.beans.gridOptionsService.context};this.beans.stylingService.processClassRules(t.cellClassRules,r,function(o){return e.cellComp.addOrRemoveCssClass(o,!0)},function(o){return e.cellComp.addOrRemoveCssClass(o,!1)})},i.prototype.applyUserStyles=function(){var e=this.column.getColDef();if(e.cellStyle){var t;if(typeof e.cellStyle=="function"){var r={column:this.column,value:this.cellCtrl.getValue(),colDef:e,data:this.rowNode.data,node:this.rowNode,rowIndex:this.rowNode.rowIndex,api:this.beans.gridOptionsService.api,columnApi:this.beans.gridOptionsService.columnApi,context:this.beans.gridOptionsService.context},o=e.cellStyle;t=o(r)}else t=e.cellStyle;t&&this.cellComp.setUserStyles(t)}},i.prototype.applyClassesFromColDef=function(){var e=this,t=this.column.getColDef(),r={value:this.cellCtrl.getValue(),data:this.rowNode.data,node:this.rowNode,column:this.column,colDef:t,rowIndex:this.rowNode.rowIndex,api:this.beans.gridOptionsService.api,columnApi:this.beans.gridOptionsService.columnApi,context:this.beans.gridOptionsService.context};this.staticClasses.length&&this.staticClasses.forEach(function(o){return e.cellComp.addOrRemoveCssClass(o,!1)}),this.staticClasses=this.beans.stylingService.getStaticCellClasses(t,r),this.staticClasses.length&&this.staticClasses.forEach(function(o){return e.cellComp.addOrRemoveCssClass(o,!0)})},i.prototype.destroy=function(){n.prototype.destroy.call(this)},i}(ve),DT=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Md=function(n){DT(i,n);function i(e,t){var r=n.call(this)||this;return r.ctrl=e,r.beans=t,r}return i.prototype.setComp=function(e){this.eGui=e,this.setupTooltip()},i.prototype.setBrowserTooltip=function(e){var t="title";e!=null&&e!=""?this.eGui.setAttribute(t,e):this.eGui.removeAttribute(t)},i.prototype.setupTooltip=function(){this.browserTooltips=this.beans.gridOptionsService.is("enableBrowserTooltips"),this.updateTooltipText(),this.browserTooltips?this.setBrowserTooltip(this.tooltip):this.createTooltipFeatureIfNeeded()},i.prototype.updateTooltipText=function(){this.tooltip=this.ctrl.getTooltipValue()},i.prototype.createTooltipFeatureIfNeeded=function(){var e=this,t,r,o,a;if(this.genericTooltipFeature==null){var s={getTooltipParams:function(){return e.getTooltipParams()},getGui:function(){return e.ctrl.getGui()}};this.genericTooltipFeature=this.createManagedBean(new Ed(s,(r=(t=this.ctrl).getTooltipShowDelayOverride)===null||r===void 0?void 0:r.call(t),(a=(o=this.ctrl).getTooltipHideDelayOverride)===null||a===void 0?void 0:a.call(o)),this.beans.context)}},i.prototype.refreshToolTip=function(){this.updateTooltipText(),this.browserTooltips&&this.setBrowserTooltip(this.tooltip)},i.prototype.getTooltipParams=function(){var e=this,t=this.ctrl,r=t.getColumn?t.getColumn():void 0,o=t.getColDef?t.getColDef():void 0,a=t.getRowNode?t.getRowNode():void 0;return{location:t.getLocation(),colDef:o,column:r,rowIndex:t.getRowIndex?t.getRowIndex():void 0,node:a,data:a?a.data:void 0,value:this.getTooltipText(),valueFormatted:t.getValueFormatted?t.getValueFormatted():void 0,hideTooltipCallback:function(){return e.genericTooltipFeature.hideTooltip(!0)}}},i.prototype.getTooltipText=function(){return this.tooltip},i.prototype.destroy=function(){n.prototype.destroy.call(this)},i}(ve),bt=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},jv=function(){function n(){}return n.prototype.postConstruct=function(){this.doingMasterDetail=this.gridOptionsService.is("masterDetail"),this.gridOptionsService.isRowModelType("clientSide")&&(this.clientSideRowModel=this.rowModel),this.gridOptionsService.isRowModelType("serverSide")&&(this.serverSideRowModel=this.rowModel)},bt([T("resizeObserverService")],n.prototype,"resizeObserverService",void 0),bt([T("paginationProxy")],n.prototype,"paginationProxy",void 0),bt([T("context")],n.prototype,"context",void 0),bt([T("columnApi")],n.prototype,"columnApi",void 0),bt([T("gridApi")],n.prototype,"gridApi",void 0),bt([T("gridOptionsService")],n.prototype,"gridOptionsService",void 0),bt([T("expressionService")],n.prototype,"expressionService",void 0),bt([T("environment")],n.prototype,"environment",void 0),bt([T("rowRenderer")],n.prototype,"rowRenderer",void 0),bt([T("templateService")],n.prototype,"templateService",void 0),bt([T("valueService")],n.prototype,"valueService",void 0),bt([T("eventService")],n.prototype,"eventService",void 0),bt([T("columnModel")],n.prototype,"columnModel",void 0),bt([T("headerNavigationService")],n.prototype,"headerNavigationService",void 0),bt([T("navigationService")],n.prototype,"navigationService",void 0),bt([T("columnAnimationService")],n.prototype,"columnAnimationService",void 0),bt([Zt("rangeService")],n.prototype,"rangeService",void 0),bt([T("focusService")],n.prototype,"focusService",void 0),bt([Zt("contextMenuFactory")],n.prototype,"contextMenuFactory",void 0),bt([T("popupService")],n.prototype,"popupService",void 0),bt([T("valueFormatterService")],n.prototype,"valueFormatterService",void 0),bt([T("stylingService")],n.prototype,"stylingService",void 0),bt([T("columnHoverService")],n.prototype,"columnHoverService",void 0),bt([T("userComponentFactory")],n.prototype,"userComponentFactory",void 0),bt([T("userComponentRegistry")],n.prototype,"userComponentRegistry",void 0),bt([T("animationFrameService")],n.prototype,"animationFrameService",void 0),bt([T("dragService")],n.prototype,"dragService",void 0),bt([T("dragAndDropService")],n.prototype,"dragAndDropService",void 0),bt([T("sortController")],n.prototype,"sortController",void 0),bt([T("filterManager")],n.prototype,"filterManager",void 0),bt([T("rowContainerHeightService")],n.prototype,"rowContainerHeightService",void 0),bt([T("frameworkOverrides")],n.prototype,"frameworkOverrides",void 0),bt([T("cellPositionUtils")],n.prototype,"cellPositionUtils",void 0),bt([T("rowPositionUtils")],n.prototype,"rowPositionUtils",void 0),bt([T("selectionService")],n.prototype,"selectionService",void 0),bt([Zt("selectionHandleFactory")],n.prototype,"selectionHandleFactory",void 0),bt([T("rowCssClassCalculator")],n.prototype,"rowCssClassCalculator",void 0),bt([T("rowModel")],n.prototype,"rowModel",void 0),bt([T("ctrlsService")],n.prototype,"ctrlsService",void 0),bt([T("ctrlsFactory")],n.prototype,"ctrlsFactory",void 0),bt([T("agStackComponentsRegistry")],n.prototype,"agStackComponentsRegistry",void 0),bt([T("valueCache")],n.prototype,"valueCache",void 0),bt([T("rowNodeEventThrottle")],n.prototype,"rowNodeEventThrottle",void 0),bt([T("localeService")],n.prototype,"localeService",void 0),bt([T("valueParserService")],n.prototype,"valueParserService",void 0),bt([Oe],n.prototype,"postConstruct",null),n=bt([Ue("beans")],n),n}(),RT=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),xT=function(n){RT(i,n);function i(e,t,r){var o=n.call(this)||this;return o.cellCtrl=e,o.beans=t,o.column=r,o}return i.prototype.onMouseEvent=function(e,t){if(!Kr(t))switch(e){case"click":this.onCellClicked(t);break;case"mousedown":case"touchstart":this.onMouseDown(t);break;case"dblclick":this.onCellDoubleClicked(t);break;case"mouseout":this.onMouseOut(t);break;case"mouseover":this.onMouseOver(t);break}},i.prototype.onCellClicked=function(e){if(this.isDoubleClickOnIPad()){this.onCellDoubleClicked(e),e.preventDefault();return}var t=this.beans,r=t.eventService,o=t.rangeService,a=t.gridOptionsService,s=e.ctrlKey||e.metaKey;o&&s&&o.getCellRangeCount(this.cellCtrl.getCellPosition())>1&&o.intersectLastRange(!0);var l=this.cellCtrl.createEvent(e,b.EVENT_CELL_CLICKED);r.dispatchEvent(l);var u=this.column.getColDef();u.onCellClicked&&window.setTimeout(function(){return u.onCellClicked(l)},0);var c=(a.is("singleClickEdit")||u.singleClickEdit)&&!a.is("suppressClickEdit");c&&!(e.shiftKey&&o?.getCellRanges().length!=0)&&this.cellCtrl.startRowOrCellEdit()},i.prototype.isDoubleClickOnIPad=function(){if(!$o()||id("dblclick"))return!1;var e=new Date().getTime(),t=e-this.lastIPadMouseClickEvent<200;return this.lastIPadMouseClickEvent=e,t},i.prototype.onCellDoubleClicked=function(e){var t=this.column.getColDef(),r=this.cellCtrl.createEvent(e,b.EVENT_CELL_DOUBLE_CLICKED);this.beans.eventService.dispatchEvent(r),typeof t.onCellDoubleClicked=="function"&&window.setTimeout(function(){return t.onCellDoubleClicked(r)},0);var o=!this.beans.gridOptionsService.is("singleClickEdit")&&!this.beans.gridOptionsService.is("suppressClickEdit");o&&this.cellCtrl.startRowOrCellEdit(null,e)},i.prototype.onMouseDown=function(e){var t=e.ctrlKey,r=e.metaKey,o=e.shiftKey,a=e.target,s=this,l=s.cellCtrl,u=s.beans,c=u.eventService,d=u.rangeService,f=u.focusService;if(!this.isRightClickInExistingRange(e)){var y=d&&d.getCellRanges().length!=0;if(!o||!y){var S=Fr()&&!l.isEditing()&&!vd(a);l.focusCell(S)}if(o&&y&&!f.isCellFocused(l.getCellPosition())){e.preventDefault();var w=f.getFocusedCell();if(w){var E=w.column,_=w.rowIndex,L=w.rowPinned,P=u.rowRenderer.getRowByPosition({rowIndex:_,rowPinned:L}),V=P?.getCellCtrl(E);V?.isEditing()&&V.stopEditing(),f.setFocusedCell({column:E,rowIndex:_,rowPinned:L,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})}}if(!this.containsWidget(a)){if(d){var ne=this.cellCtrl.getCellPosition();if(o)d.extendLatestRangeToCell(ne);else{var ee=t||r;d.setRangeToCell(ne,ee)}}c.dispatchEvent(this.cellCtrl.createEvent(e,b.EVENT_CELL_MOUSE_DOWN))}}},i.prototype.isRightClickInExistingRange=function(e){var t=this.beans.rangeService;if(t){var r=t.isCellInAnyRange(this.cellCtrl.getCellPosition()),o=e.button===2||e.ctrlKey&&this.beans.gridOptionsService.is("allowContextMenuWithControlKey");if(r&&o)return!0}return!1},i.prototype.containsWidget=function(e){return On(e,"ag-selection-checkbox",3)},i.prototype.onMouseOut=function(e){if(!this.mouseStayingInsideCell(e)){var t=this.cellCtrl.createEvent(e,b.EVENT_CELL_MOUSE_OUT);this.beans.eventService.dispatchEvent(t),this.beans.columnHoverService.clearMouseOver()}},i.prototype.onMouseOver=function(e){if(!this.mouseStayingInsideCell(e)){var t=this.cellCtrl.createEvent(e,b.EVENT_CELL_MOUSE_OVER);this.beans.eventService.dispatchEvent(t),this.beans.columnHoverService.setMouseOver([this.column])}},i.prototype.mouseStayingInsideCell=function(e){if(!e.target||!e.relatedTarget)return!1;var t=this.cellCtrl.getGui(),r=t.contains(e.target),o=t.contains(e.relatedTarget);return r&&o},i.prototype.destroy=function(){},i}(jv),AT=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),LT=function(n){AT(i,n);function i(e,t,r,o,a){var s=n.call(this)||this;return s.cellCtrl=e,s.beans=t,s.rowNode=o,s.rowCtrl=a,s}return i.prototype.setComp=function(e){this.eGui=e},i.prototype.onKeyDown=function(e){var t=e.key;switch(t){case J.ENTER:this.onEnterKeyDown(e);break;case J.F2:this.onF2KeyDown(e);break;case J.ESCAPE:this.onEscapeKeyDown(e);break;case J.TAB:this.onTabKeyDown(e);break;case J.BACKSPACE:case J.DELETE:this.onBackspaceOrDeleteKeyDown(t,e);break;case J.DOWN:case J.UP:case J.RIGHT:case J.LEFT:this.onNavigationKeyDown(e,t);break}},i.prototype.onNavigationKeyDown=function(e,t){this.cellCtrl.isEditing()||(e.shiftKey&&this.cellCtrl.isRangeSelectionEnabled()?this.onShiftRangeSelect(e):this.beans.navigationService.navigateToNextCell(e,t,this.cellCtrl.getCellPosition(),!0),e.preventDefault())},i.prototype.onShiftRangeSelect=function(e){if(this.beans.rangeService){var t=this.beans.rangeService.extendLatestRangeInDirection(e);t&&this.beans.navigationService.ensureCellVisible(t)}},i.prototype.onTabKeyDown=function(e){this.beans.navigationService.onTabKeyDown(this.cellCtrl,e)},i.prototype.onBackspaceOrDeleteKeyDown=function(e,t){var r=this,o=r.cellCtrl,a=r.beans,s=r.rowNode,l=a.gridOptionsService,u=a.rangeService,c=a.eventService;o.isEditing()||(c.dispatchEvent({type:b.EVENT_KEY_SHORTCUT_CHANGED_CELL_START}),gv(e,l.is("enableCellEditingOnBackspace"))?u&&l.is("enableRangeSelection")?u.clearCellRangeCellValues({dispatchWrapperEvents:!0,wrapperEventSource:"deleteKey"}):o.isCellEditable()&&s.setDataValue(o.getColumn(),null,"cellClear"):o.startRowOrCellEdit(e,t),c.dispatchEvent({type:b.EVENT_KEY_SHORTCUT_CHANGED_CELL_END}))},i.prototype.onEnterKeyDown=function(e){if(this.cellCtrl.isEditing()||this.rowCtrl.isEditing())this.cellCtrl.stopEditingAndFocus(!1,e.shiftKey);else if(this.beans.gridOptionsService.is("enterNavigatesVertically")){var t=e.shiftKey?J.UP:J.DOWN;this.beans.navigationService.navigateToNextCell(null,t,this.cellCtrl.getCellPosition(),!1)}else this.cellCtrl.startRowOrCellEdit(J.ENTER,e),this.cellCtrl.isEditing()&&e.preventDefault()},i.prototype.onF2KeyDown=function(e){this.cellCtrl.isEditing()||this.cellCtrl.startRowOrCellEdit(J.F2,e)},i.prototype.onEscapeKeyDown=function(e){this.cellCtrl.isEditing()&&(this.cellCtrl.stopRowOrCellEdit(!0),this.cellCtrl.focusCell(!0))},i.prototype.processCharacter=function(e){var t=e.target,r=t!==this.eGui;if(!(r||this.cellCtrl.isEditing())){var o=e.key;o===" "?this.onSpaceKeyDown(e):(this.cellCtrl.startRowOrCellEdit(o,e),e.preventDefault())}},i.prototype.onSpaceKeyDown=function(e){var t=this.beans.gridOptionsService;if(!this.cellCtrl.isEditing()&&t.isRowSelection()){var r=this.rowNode.isSelected(),o=!r;if(o||!t.is("suppressRowDeselection")){var a=this.beans.gridOptionsService.is("groupSelectsFiltered"),s=this.rowNode.setSelectedParams({newValue:o,rangeSelect:e.shiftKey,groupSelectsFiltered:a,event:e,source:"spaceKey"});r===void 0&&s===0&&this.rowNode.setSelectedParams({newValue:!1,rangeSelect:e.shiftKey,groupSelectsFiltered:a,event:e,source:"spaceKey"})}}e.preventDefault()},i.prototype.destroy=function(){n.prototype.destroy.call(this)},i}(ve),MT=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),NT=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},FT=function(n){MT(i,n);function i(e,t,r){var o=n.call(this,'<div class="ag-drag-handle ag-row-drag" draggable="true"></div>')||this;return o.rowNode=e,o.column=t,o.eCell=r,o}return i.prototype.postConstruct=function(){var e=this.getGui();e.appendChild(Li("rowDrag",this.gridOptionsService,null)),this.addGuiEventListener("mousedown",function(t){t.stopPropagation()}),this.addDragSource(),this.checkVisibility()},i.prototype.addDragSource=function(){this.addGuiEventListener("dragstart",this.onDragStart.bind(this))},i.prototype.onDragStart=function(e){var t=this,r=this.column.getColDef().dndSourceOnRowDrag;e.dataTransfer.setDragImage(this.eCell,0,0);var o=function(){try{var s=JSON.stringify(t.rowNode.data);e.dataTransfer.setData("application/json",s),e.dataTransfer.setData("text/plain",s)}catch{}};if(r){var a={rowNode:this.rowNode,dragEvent:e,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context};r(a)}else o()},i.prototype.checkVisibility=function(){var e=this.column.isDndSource(this.rowNode);this.setDisplayed(e)},NT([Oe],i.prototype,"postConstruct",null),i}(xt),IT=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Dl=function(){return Dl=Object.assign||function(n){for(var i,e=1,t=arguments.length;e<t;e++){i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(n[r]=i[r])}return n},Dl.apply(this,arguments)},kT="ag-cell",GT="ag-cell-auto-height",VT="ag-cell-normal-height",BT="ag-cell-focus",HT="ag-cell-first-right-pinned",WT="ag-cell-last-left-pinned",UT="ag-cell-not-inline-editing",jT="ag-column-hover",zT="ag-cell-wrap-text",YT=0,En=function(n){IT(i,n);function i(e,t,r,o){var a=n.call(this)||this;a.cellRangeFeature=null,a.cellPositionFeature=null,a.cellCustomStyleFeature=null,a.tooltipFeature=null,a.cellMouseListenerFeature=null,a.cellKeyboardListenerFeature=null,a.suppressRefreshCell=!1,a.onCellCompAttachedFuncs=[],a.column=e,a.rowNode=t,a.beans=r,a.rowCtrl=o,a.instanceId=e.getId()+"-"+YT++;var s=a.column.getColDef();return a.colIdSanitised=Ii(a.column.getId()),a.beans.gridOptionsService.is("suppressCellFocus")||(a.tabIndex=-1),a.isCellRenderer=s.cellRenderer!=null||s.cellRendererSelector!=null,a.createCellPosition(),a.addFeatures(),a.updateAndFormatValue(!0),a}return i.prototype.shouldRestoreFocus=function(){return this.beans.focusService.shouldRestoreFocus(this.cellPosition)},i.prototype.addFeatures=function(){var e=this;this.cellPositionFeature=new ET(this,this.beans),this.addDestroyFunc(function(){var r;(r=e.cellPositionFeature)===null||r===void 0||r.destroy(),e.cellPositionFeature=null}),this.cellCustomStyleFeature=new bT(this,this.beans),this.addDestroyFunc(function(){var r;(r=e.cellCustomStyleFeature)===null||r===void 0||r.destroy(),e.cellCustomStyleFeature=null}),this.cellMouseListenerFeature=new xT(this,this.beans,this.column),this.addDestroyFunc(function(){var r;(r=e.cellMouseListenerFeature)===null||r===void 0||r.destroy(),e.cellMouseListenerFeature=null}),this.cellKeyboardListenerFeature=new LT(this,this.beans,this.column,this.rowNode,this.rowCtrl),this.addDestroyFunc(function(){var r;(r=e.cellKeyboardListenerFeature)===null||r===void 0||r.destroy(),e.cellKeyboardListenerFeature=null});var t=this.beans.rangeService&&this.beans.gridOptionsService.is("enableRangeSelection");t&&(this.cellRangeFeature=new OT(this.beans,this),this.addDestroyFunc(function(){var r;(r=e.cellRangeFeature)===null||r===void 0||r.destroy(),e.cellRangeFeature=null})),this.column.isTooltipEnabled()&&this.addTooltipFeature()},i.prototype.addTooltipFeature=function(){var e=this,t=function(){var o=e.column.getColDef(),a=e.rowNode.data;if(o.tooltipField&&ue(a))return Jn(a,o.tooltipField,e.column.isTooltipFieldContainsDots());var s=o.tooltipValueGetter;return s?s({location:"cell",api:e.beans.gridOptionsService.api,columnApi:e.beans.gridOptionsService.columnApi,context:e.beans.gridOptionsService.context,colDef:e.column.getColDef(),column:e.column,rowIndex:e.cellPosition.rowIndex,node:e.rowNode,data:e.rowNode.data,value:e.value,valueFormatted:e.valueFormatted}):null},r={getColumn:function(){return e.column},getColDef:function(){return e.column.getColDef()},getRowIndex:function(){return e.cellPosition.rowIndex},getRowNode:function(){return e.rowNode},getGui:function(){return e.getGui()},getLocation:function(){return"cell"},getTooltipValue:t,getValueFormatted:function(){return e.valueFormatted}};this.tooltipFeature=new Md(r,this.beans),this.addDestroyFunc(function(){var o;(o=e.tooltipFeature)===null||o===void 0||o.destroy(),e.tooltipFeature=null})},i.prototype.setComp=function(e,t,r,o,a){var s,l,u,c;this.cellComp=e,this.eGui=t,this.printLayout=o,this.addDomData(),this.onCellFocused(this.focusEventToRestore),this.applyStaticCssClasses(),this.setWrapText(),this.onFirstRightPinnedChanged(),this.onLastLeftPinnedChanged(),this.onColumnHover(),this.setupControlComps(),r&&this.setupAutoHeight(r),this.setAriaColIndex(),(s=this.cellPositionFeature)===null||s===void 0||s.setComp(t),(l=this.cellCustomStyleFeature)===null||l===void 0||l.setComp(e),(u=this.tooltipFeature)===null||u===void 0||u.setComp(t),(c=this.cellKeyboardListenerFeature)===null||c===void 0||c.setComp(this.eGui),this.cellRangeFeature&&this.cellRangeFeature.setComp(e,t),a&&this.isCellEditable()?this.startEditing():this.showValue(),this.onCellCompAttachedFuncs.length&&(this.onCellCompAttachedFuncs.forEach(function(d){return d()}),this.onCellCompAttachedFuncs=[])},i.prototype.setupAutoHeight=function(e){var t=this;if(this.column.isAutoHeight()){var r=e.parentElement,o=this.beans.gridOptionsService.getRowHeightForNode(this.rowNode).height,a=function(u){if(!t.editing&&t.isAlive()){var c=en(r),d=c.paddingTop,f=c.paddingBottom,y=c.borderBottomWidth,S=c.borderTopWidth,w=d+f+y+S,E=e.offsetHeight,_=E+w;if(u<5){var L=t.beans.gridOptionsService.getDocument(),P=!L||!L.contains(e),V=_==0;if(P||V){t.beans.frameworkOverrides.setTimeout(function(){return a(u+1)},0);return}}var ne=Math.max(_,o);t.rowNode.setRowAutoHeight(ne,t.column)}},s=function(){return a(0)};s();var l=this.beans.resizeObserverService.observeResize(e,s);this.addDestroyFunc(function(){l(),t.rowNode.setRowAutoHeight(void 0,t.column)})}},i.prototype.getInstanceId=function(){return this.instanceId},i.prototype.getIncludeSelection=function(){return this.includeSelection},i.prototype.getIncludeRowDrag=function(){return this.includeRowDrag},i.prototype.getIncludeDndSource=function(){return this.includeDndSource},i.prototype.getColumnIdSanitised=function(){return this.colIdSanitised},i.prototype.getTabIndex=function(){return this.tabIndex},i.prototype.getIsCellRenderer=function(){return this.isCellRenderer},i.prototype.getValueToDisplay=function(){return this.valueFormatted!=null?this.valueFormatted:this.value},i.prototype.showValue=function(e){e===void 0&&(e=!1);var t=this.getValueToDisplay(),r;if(this.isCellRenderer){var o=this.createCellRendererParams();r=this.beans.userComponentFactory.getCellRendererDetails(this.column.getColDef(),o)}this.cellComp.setRenderDetails(r,t,e),this.refreshHandle()},i.prototype.setupControlComps=function(){var e=this.column.getColDef();this.includeSelection=this.isIncludeControl(e.checkboxSelection),this.includeRowDrag=this.isIncludeControl(e.rowDrag),this.includeDndSource=this.isIncludeControl(e.dndSource),this.cellComp.setIncludeSelection(this.includeSelection),this.cellComp.setIncludeDndSource(this.includeDndSource),this.cellComp.setIncludeRowDrag(this.includeRowDrag)},i.prototype.isForceWrapper=function(){var e=this.beans.gridOptionsService.is("enableCellTextSelection")||this.column.isAutoHeight();return e},i.prototype.isIncludeControl=function(e){var t=this.rowNode.rowPinned!=null,r=typeof e=="function",o=t?!1:r||e===!0;return o},i.prototype.refreshShouldDestroy=function(){var e=this.column.getColDef(),t=this.includeSelection!=this.isIncludeControl(e.checkboxSelection),r=this.includeRowDrag!=this.isIncludeControl(e.rowDrag),o=this.includeDndSource!=this.isIncludeControl(e.dndSource);return t||r||o},i.prototype.startEditing=function(e,t,r){var o=this;if(e===void 0&&(e=null),t===void 0&&(t=!1),r===void 0&&(r=null),!(!this.isCellEditable()||this.editing)){if(!this.cellComp){this.onCellCompAttachedFuncs.push(function(){o.startEditing(e,t,r)});return}var a=this.createCellEditorParams(e,t),s=this.column.getColDef(),l=this.beans.userComponentFactory.getCellEditorDetails(s,a),u=l?.popupFromSelector!=null?l.popupFromSelector:!!s.cellEditorPopup,c=l?.popupPositionFromSelector!=null?l.popupPositionFromSelector:s.cellEditorPopupPosition;this.setEditing(!0),this.cellComp.setEditDetails(l,u,c);var d=this.createEvent(r,b.EVENT_CELL_EDITING_STARTED);this.beans.eventService.dispatchEvent(d)}},i.prototype.setEditing=function(e){this.editing!==e&&(this.editing=e,this.refreshHandle())},i.prototype.stopRowOrCellEdit=function(e){e===void 0&&(e=!1),this.beans.gridOptionsService.get("editType")==="fullRow"?this.rowCtrl.stopRowEditing(e):this.stopEditing(e)},i.prototype.onPopupEditorClosed=function(){this.isEditing()&&this.stopEditingAndFocus()},i.prototype.takeValueFromCellEditor=function(e){var t={newValueExists:!1};if(e)return t;var r=this.cellComp.getCellEditor();if(!r)return t;var o=r.isCancelAfterEnd&&r.isCancelAfterEnd();if(o)return t;var a=r.getValue();return{newValue:a,newValueExists:!0}},i.prototype.saveNewValue=function(e,t){if(t===e)return!1;this.suppressRefreshCell=!0;var r=this.rowNode.setDataValue(this.column,t,"edit");return this.suppressRefreshCell=!1,r},i.prototype.stopEditing=function(e){if(e===void 0&&(e=!1),!this.editing)return!1;var t=this.takeValueFromCellEditor(e),r=t.newValue,o=t.newValueExists,a=this.rowNode.getValueFromValueService(this.column),s=!1;return o&&(s=this.saveNewValue(a,r)),this.setEditing(!1),this.cellComp.setEditDetails(),this.updateAndFormatValue(),this.refreshCell({forceRefresh:!0,suppressFlash:!0}),this.dispatchEditingStoppedEvent(a,r,!e&&!!s),s},i.prototype.dispatchEditingStoppedEvent=function(e,t,r){var o=Dl(Dl({},this.createEvent(null,b.EVENT_CELL_EDITING_STOPPED)),{oldValue:e,newValue:t,valueChanged:r});this.beans.eventService.dispatchEvent(o)},i.prototype.createCellEditorParams=function(e,t){return{value:this.rowNode.getValueFromValueService(this.column),eventKey:e,column:this.column,colDef:this.column.getColDef(),rowIndex:this.getCellPosition().rowIndex,node:this.rowNode,data:this.rowNode.data,api:this.beans.gridOptionsService.api,cellStartedEdit:t,columnApi:this.beans.gridOptionsService.columnApi,context:this.beans.gridOptionsService.context,onKeyDown:this.onKeyDown.bind(this),stopEditing:this.stopEditingAndFocus.bind(this),eGridCell:this.getGui(),parseValue:this.parseValue.bind(this),formatValue:this.formatValue.bind(this)}},i.prototype.createCellRendererParams=function(){var e=this,t={value:this.value,valueFormatted:this.valueFormatted,getValue:function(){return e.rowNode.getValueFromValueService(e.column)},setValue:function(r){return e.beans.valueService.setValue(e.rowNode,e.column,r)},formatValue:this.formatValue.bind(this),data:this.rowNode.data,node:this.rowNode,pinned:this.column.getPinned(),colDef:this.column.getColDef(),column:this.column,rowIndex:this.getCellPosition().rowIndex,api:this.beans.gridOptionsService.api,columnApi:this.beans.gridOptionsService.columnApi,context:this.beans.gridOptionsService.context,refreshCell:this.refreshCell.bind(this),eGridCell:this.getGui(),eParentOfValue:this.cellComp.getParentOfValue(),registerRowDragger:function(r,o,a,s){return e.registerRowDragger(r,o,s)}};return t},i.prototype.parseValue=function(e){return this.beans.valueParserService.parseValue(this.column,this.rowNode,e,this.getValue())},i.prototype.setFocusOutOnEditor=function(){if(this.editing){var e=this.cellComp.getCellEditor();e&&e.focusOut&&e.focusOut()}},i.prototype.setFocusInOnEditor=function(){if(this.editing){var e=this.cellComp.getCellEditor();e&&e.focusIn?e.focusIn():this.focusCell(!0)}},i.prototype.onCellChanged=function(e){if(this.cellComp){var t=e.column===this.column;t&&this.refreshCell({})}},i.prototype.refreshCell=function(e){var t,r,o;if(!(this.suppressRefreshCell||this.editing)&&this.cellComp){var a=this.column.getColDef(),s=e!=null&&!!e.newData,l=e!=null&&!!e.suppressFlash||!!a.suppressCellFlash,u=a.field==null&&a.valueGetter==null&&a.showRowGroup==null,c=e&&e.forceRefresh||u||s,d=this.updateAndFormatValue(),f=c||d;if(f){this.showValue(s);var y=this.beans.filterManager.isSuppressFlashingCellsBecauseFiltering(),S=!l&&!y&&(this.beans.gridOptionsService.is("enableCellChangeFlash")||a.enableCellChangeFlash);S&&this.flashCell(),(t=this.cellCustomStyleFeature)===null||t===void 0||t.applyUserStyles(),(r=this.cellCustomStyleFeature)===null||r===void 0||r.applyClassesFromColDef()}this.refreshToolTip(),(o=this.cellCustomStyleFeature)===null||o===void 0||o.applyCellClassRules()}},i.prototype.stopEditingAndFocus=function(e,t){e===void 0&&(e=!1),t===void 0&&(t=!1),this.stopRowOrCellEdit(),this.focusCell(!0),e||this.navigateAfterEdit(t)},i.prototype.navigateAfterEdit=function(e){var t=this.beans.gridOptionsService.is("enterNavigatesVerticallyAfterEdit");if(t){var r=e?J.UP:J.DOWN;this.beans.navigationService.navigateToNextCell(null,r,this.getCellPosition(),!1)}},i.prototype.flashCell=function(e){var t=e&&e.flashDelay,r=e&&e.fadeDelay;this.animateCell("data-changed",t,r)},i.prototype.animateCell=function(e,t,r){var o=this,a,s;if(this.cellComp){var l="ag-cell-"+e,u="ag-cell-"+e+"-animation",c=this.beans.gridOptionsService;t||(t=(a=c.getNum("cellFlashDelay"))!==null&&a!==void 0?a:500),ue(r)||(r=(s=c.getNum("cellFadeDelay"))!==null&&s!==void 0?s:1e3),this.cellComp.addOrRemoveCssClass(l,!0),this.cellComp.addOrRemoveCssClass(u,!1),window.setTimeout(function(){o.isAlive()&&(o.cellComp.addOrRemoveCssClass(l,!1),o.cellComp.addOrRemoveCssClass(u,!0),o.eGui.style.transition="background-color "+r+"ms",window.setTimeout(function(){o.isAlive()&&(o.cellComp.addOrRemoveCssClass(u,!1),o.eGui.style.transition="")},r))},t)}},i.prototype.onFlashCells=function(e){if(this.cellComp){var t=this.beans.cellPositionUtils.createId(this.getCellPosition()),r=e.cells[t];r&&this.animateCell("highlight")}},i.prototype.isCellEditable=function(){return this.column.isCellEditable(this.rowNode)},i.prototype.isSuppressFillHandle=function(){return this.column.isSuppressFillHandle()},i.prototype.formatValue=function(e){var t;return(t=this.callValueFormatter(e))!==null&&t!==void 0?t:e},i.prototype.callValueFormatter=function(e){return this.beans.valueFormatterService.formatValue(this.column,this.rowNode,e)},i.prototype.updateAndFormatValue=function(e){e===void 0&&(e=!1);var t=this.value,r=this.valueFormatted;this.value=this.rowNode.getValueFromValueService(this.column),this.valueFormatted=this.callValueFormatter(this.value);var o=e?!0:!this.valuesAreEqual(t,this.value)||this.valueFormatted!=r;return o},i.prototype.valuesAreEqual=function(e,t){var r=this.column.getColDef();return r.equals?r.equals(e,t):e===t},i.prototype.getComp=function(){return this.cellComp},i.prototype.getValue=function(){return this.value},i.prototype.getValueFormatted=function(){return this.valueFormatted},i.prototype.addDomData=function(){var e=this,t=this.getGui();this.beans.gridOptionsService.setDomData(t,i.DOM_DATA_KEY_CELL_CTRL,this),this.addDestroyFunc(function(){return e.beans.gridOptionsService.setDomData(t,i.DOM_DATA_KEY_CELL_CTRL,null)})},i.prototype.createEvent=function(e,t){var r={type:t,node:this.rowNode,data:this.rowNode.data,value:this.value,column:this.column,colDef:this.column.getColDef(),context:this.beans.gridOptionsService.context,api:this.beans.gridApi,columnApi:this.beans.columnApi,rowPinned:this.rowNode.rowPinned,event:e,rowIndex:this.rowNode.rowIndex};return r},i.prototype.processCharacter=function(e){var t;(t=this.cellKeyboardListenerFeature)===null||t===void 0||t.processCharacter(e)},i.prototype.onKeyDown=function(e){var t;(t=this.cellKeyboardListenerFeature)===null||t===void 0||t.onKeyDown(e)},i.prototype.onMouseEvent=function(e,t){var r;(r=this.cellMouseListenerFeature)===null||r===void 0||r.onMouseEvent(e,t)},i.prototype.getGui=function(){return this.eGui},i.prototype.refreshToolTip=function(){var e;(e=this.tooltipFeature)===null||e===void 0||e.refreshToolTip()},i.prototype.getColSpanningList=function(){return this.cellPositionFeature.getColSpanningList()},i.prototype.onLeftChanged=function(){var e;this.cellComp&&((e=this.cellPositionFeature)===null||e===void 0||e.onLeftChanged())},i.prototype.onDisplayedColumnsChanged=function(){this.eGui&&this.setAriaColIndex()},i.prototype.setAriaColIndex=function(){var e=this.beans.columnModel.getAriaColumnIndex(this.column);ud(this.getGui(),e)},i.prototype.isSuppressNavigable=function(){return this.column.isSuppressNavigable(this.rowNode)},i.prototype.onWidthChanged=function(){var e;return(e=this.cellPositionFeature)===null||e===void 0?void 0:e.onWidthChanged()},i.prototype.getColumn=function(){return this.column},i.prototype.getRowNode=function(){return this.rowNode},i.prototype.getBeans=function(){return this.beans},i.prototype.isPrintLayout=function(){return this.printLayout},i.prototype.appendChild=function(e){this.eGui.appendChild(e)},i.prototype.refreshHandle=function(){this.cellRangeFeature&&this.cellRangeFeature.refreshHandle()},i.prototype.getCellPosition=function(){return this.cellPosition},i.prototype.isEditing=function(){return this.editing},i.prototype.startRowOrCellEdit=function(e,t){t===void 0&&(t=null),this.cellComp&&(this.beans.gridOptionsService.get("editType")==="fullRow"?this.rowCtrl.startRowEditing(e,this):this.startEditing(e,!0,t))},i.prototype.getRowCtrl=function(){return this.rowCtrl},i.prototype.getRowPosition=function(){return{rowIndex:this.cellPosition.rowIndex,rowPinned:this.cellPosition.rowPinned}},i.prototype.updateRangeBordersIfRangeCount=function(){this.cellComp&&this.cellRangeFeature&&this.cellRangeFeature.updateRangeBordersIfRangeCount()},i.prototype.onRangeSelectionChanged=function(){this.cellComp&&this.cellRangeFeature&&this.cellRangeFeature.onRangeSelectionChanged()},i.prototype.isRangeSelectionEnabled=function(){return this.cellRangeFeature!=null},i.prototype.focusCell=function(e){e===void 0&&(e=!1),this.beans.focusService.setFocusedCell({rowIndex:this.getCellPosition().rowIndex,column:this.column,rowPinned:this.rowNode.rowPinned,forceBrowserFocus:e})},i.prototype.onRowIndexChanged=function(){this.createCellPosition(),this.onCellFocused(),this.cellRangeFeature&&this.cellRangeFeature.onRangeSelectionChanged()},i.prototype.onFirstRightPinnedChanged=function(){if(this.cellComp){var e=this.column.isFirstRightPinned();this.cellComp.addOrRemoveCssClass(HT,e)}},i.prototype.onLastLeftPinnedChanged=function(){if(this.cellComp){var e=this.column.isLastLeftPinned();this.cellComp.addOrRemoveCssClass(WT,e)}},i.prototype.onCellFocused=function(e){if(!this.beans.gridOptionsService.is("suppressCellFocus")){var t=this.beans.focusService.isCellFocused(this.cellPosition);if(!this.cellComp){t&&e?.forceBrowserFocus&&(this.focusEventToRestore=e);return}if(this.focusEventToRestore=void 0,this.cellComp.addOrRemoveCssClass(BT,t),t&&e&&e.forceBrowserFocus){var r=this.cellComp.getFocusableElement();r.focus({preventScroll:!!e.preventScrollOnBrowserFocus})}var o=this.beans.gridOptionsService.get("editType")==="fullRow";!t&&!o&&this.editing&&this.stopRowOrCellEdit()}},i.prototype.createCellPosition=function(){this.cellPosition={rowIndex:this.rowNode.rowIndex,rowPinned:ao(this.rowNode.rowPinned),column:this.column}},i.prototype.applyStaticCssClasses=function(){this.cellComp.addOrRemoveCssClass(kT,!0),this.cellComp.addOrRemoveCssClass(UT,!0);var e=this.column.isAutoHeight()==!0;this.cellComp.addOrRemoveCssClass(GT,e),this.cellComp.addOrRemoveCssClass(VT,!e)},i.prototype.onColumnHover=function(){if(this.cellComp&&this.beans.gridOptionsService.is("columnHoverHighlight")){var e=this.beans.columnHoverService.isHovered(this.column);this.cellComp.addOrRemoveCssClass(jT,e)}},i.prototype.onColDefChanged=function(){this.cellComp&&(this.setWrapText(),this.editing||this.refreshCell({forceRefresh:!0,suppressFlash:!0}))},i.prototype.setWrapText=function(){var e=this.column.getColDef().wrapText==!0;this.cellComp.addOrRemoveCssClass(zT,e)},i.prototype.dispatchCellContextMenuEvent=function(e){var t=this.column.getColDef(),r=this.createEvent(e,b.EVENT_CELL_CONTEXT_MENU);this.beans.eventService.dispatchEvent(r),t.onCellContextMenu&&window.setTimeout(function(){return t.onCellContextMenu(r)},0)},i.prototype.getCellRenderer=function(){return this.cellComp?this.cellComp.getCellRenderer():null},i.prototype.getCellEditor=function(){return this.cellComp?this.cellComp.getCellEditor():null},i.prototype.destroy=function(){this.onCellCompAttachedFuncs=[],n.prototype.destroy.call(this)},i.prototype.createSelectionCheckbox=function(){var e=new Vv;return this.beans.context.createBean(e),e.init({rowNode:this.rowNode,column:this.column}),e},i.prototype.createDndSource=function(){var e=new FT(this.rowNode,this.column,this.eGui);return this.beans.context.createBean(e),e},i.prototype.registerRowDragger=function(e,t,r){var o=this;if(this.customRowDragComp){this.customRowDragComp.setDragElement(e,t);return}var a=this.createRowDragComp(e,t,r);a&&(this.customRowDragComp=a,this.addDestroyFunc(function(){o.beans.context.destroyBean(a),o.customRowDragComp=null}))},i.prototype.createRowDragComp=function(e,t,r){var o=this,a=this.beans.gridOptionsService.is("pagination"),s=this.beans.gridOptionsService.is("rowDragManaged"),l=this.beans.gridOptionsService.isRowModelType("clientSide");if(s){if(!l){Ut(function(){return console.warn("AG Grid: managed row dragging is only allowed in the Client Side Row Model")},"CellComp.addRowDragging");return}if(a){Ut(function(){return console.warn("AG Grid: managed row dragging is not possible when doing pagination")},"CellComp.addRowDragging");return}}var u=new Tl(function(){return o.value},this.rowNode,this.column,e,t,r);return this.beans.context.createBean(u),u},i.DOM_DATA_KEY_CELL_CTRL="cellCtrl",i}(ve),KT=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),QT=function(n){var i=typeof Symbol=="function"&&Symbol.iterator,e=i&&n[i],t=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&t>=n.length&&(n=void 0),{value:n&&n[t++],done:!n}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},Hu=function(n,i){var e=typeof Symbol=="function"&&n[Symbol.iterator];if(!e)return n;var t=e.call(n),r,o=[],a;try{for(;(i===void 0||i-- >0)&&!(r=t.next()).done;)o.push(r.value)}catch(s){a={error:s}}finally{try{r&&!r.done&&(e=t.return)&&e.call(t)}finally{if(a)throw a.error}}return o},Wu=function(n,i){for(var e=0,t=i.length,r=n.length;e<t;e++,r++)n[r]=i[e];return n},ur;(function(n){n.Normal="Normal",n.FullWidth="FullWidth",n.FullWidthLoading="FullWidthLoading",n.FullWidthGroup="FullWidthGroup",n.FullWidthDetail="FullWidthDetail"})(ur||(ur={}));var qT=0,_n=function(n){KT(i,n);function i(e,t,r,o,a){var s=n.call(this)||this;return s.allRowGuis=[],s.active=!0,s.centerCellCtrls={list:[],map:{}},s.leftCellCtrls={list:[],map:{}},s.rightCellCtrls={list:[],map:{}},s.slideInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},s.fadeInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},s.lastMouseDownOnDragger=!1,s.emptyStyle={},s.updateColumnListsPending=!1,s.rowId=null,s.businessKeySanitised=null,s.beans=t,s.gridOptionsService=t.gridOptionsService,s.rowNode=e,s.paginationPage=t.paginationProxy.getCurrentPage(),s.useAnimationFrameForCreate=o,s.printLayout=a,s.instanceId=e.id+"-"+qT++,s.rowId=Ii(e.id),s.initRowBusinessKey(),s.rowFocused=t.focusService.isRowFocused(s.rowNode.rowIndex,s.rowNode.rowPinned),s.rowLevel=t.rowCssClassCalculator.calculateRowLevel(s.rowNode),s.setRowType(),s.setAnimateFlags(r),s.rowStyles=s.processStylesFromGridOptions(),s.isFullWidth()&&!s.gridOptionsService.is("suppressCellFocus")&&(s.tabIndex=-1),s.addListeners(),s}return i.prototype.initRowBusinessKey=function(){this.businessKeyForNodeFunc=this.gridOptionsService.get("getBusinessKeyForNode"),this.updateRowBusinessKey()},i.prototype.updateRowBusinessKey=function(){if(typeof this.businessKeyForNodeFunc=="function"){var e=this.businessKeyForNodeFunc(this.rowNode);this.businessKeySanitised=Ii(e)}},i.prototype.getRowId=function(){return this.rowId},i.prototype.getRowStyles=function(){return this.rowStyles},i.prototype.getTabIndex=function(){return this.tabIndex},i.prototype.isSticky=function(){return this.rowNode.sticky},i.prototype.getBeans=function(){return this.beans},i.prototype.getInstanceId=function(){return this.instanceId},i.prototype.setComp=function(e,t,r){var o={rowComp:e,element:t,containerType:r};this.allRowGuis.push(o),r===Bi.LEFT?this.leftGui=o:r===Bi.RIGHT?this.rightGui=o:r===Bi.FULL_WIDTH?this.fullWidthGui=o:this.centerGui=o,this.initialiseRowComp(o),this.rowType!=="FullWidthLoading"&&!this.rowNode.rowPinned&&this.beans.rowRenderer.dispatchFirstDataRenderedEvent()},i.prototype.unsetComp=function(e){switch(this.allRowGuis=this.allRowGuis.filter(function(t){return t.containerType!==e}),e){case Bi.LEFT:this.leftGui=void 0;break;case Bi.RIGHT:this.rightGui=void 0;break;case Bi.FULL_WIDTH:this.fullWidthGui=void 0;break;case Bi.CENTER:this.centerGui=void 0;break}},i.prototype.isCacheable=function(){return this.rowType===ur.FullWidthDetail&&this.gridOptionsService.is("keepDetailRows")},i.prototype.setCached=function(e){var t=e?"none":"";this.allRowGuis.forEach(function(r){return r.element.style.display=t})},i.prototype.initialiseRowComp=function(e){var t=this,r=this.gridOptionsService;this.listenOnDomOrder(e),this.onRowHeightChanged(e),this.updateRowIndexes(e),this.setFocusedClasses(e),this.setStylesFromGridOptions(!1,e),r.isRowSelection()&&this.rowNode.selectable&&this.onRowSelected(e),this.updateColumnLists(!this.useAnimationFrameForCreate);var o=e.rowComp,a=this.getInitialRowClasses(e.containerType);a.forEach(function(s){return o.addOrRemoveCssClass(s,!0)}),this.executeSlideAndFadeAnimations(e),this.rowNode.group&&Yr(e.element,this.rowNode.expanded==!0),this.setRowCompRowId(o),this.setRowCompRowBusinessKey(o),r.setDomData(e.element,i.DOM_DATA_KEY_ROW_CTRL,this),this.addDestroyFunc(function(){return r.setDomData(e.element,i.DOM_DATA_KEY_ROW_CTRL,null)}),this.useAnimationFrameForCreate?this.beans.animationFrameService.createTask(this.addHoverFunctionality.bind(this,e.element),this.rowNode.rowIndex,"createTasksP2"):this.addHoverFunctionality(e.element),this.isFullWidth()&&this.setupFullWidth(e),r.is("rowDragEntireRow")&&this.addRowDraggerToRow(e),this.useAnimationFrameForCreate&&this.beans.animationFrameService.addDestroyTask(function(){t.isAlive()&&e.rowComp.addOrRemoveCssClass("ag-after-created",!0)}),this.executeProcessRowPostCreateFunc()},i.prototype.setRowCompRowBusinessKey=function(e){this.businessKeySanitised!=null&&e.setRowBusinessKey(this.businessKeySanitised)},i.prototype.getBusinessKey=function(){return this.businessKeySanitised},i.prototype.setRowCompRowId=function(e){this.rowId=Ii(this.rowNode.id),this.rowId!=null&&e.setRowId(this.rowId)},i.prototype.executeSlideAndFadeAnimations=function(e){var t=this,r=e.containerType,o=this.slideInAnimation[r];o&&(Rc(function(){t.onTopChanged()}),this.slideInAnimation[r]=!1);var a=this.fadeInAnimation[r];a&&(Rc(function(){e.rowComp.addOrRemoveCssClass("ag-opacity-zero",!1)}),this.fadeInAnimation[r]=!1)},i.prototype.addRowDraggerToRow=function(e){if(this.gridOptionsService.is("enableRangeSelection")){Ut(function(){console.warn("AG Grid: Setting `rowDragEntireRow: true` in the gridOptions doesn't work with `enableRangeSelection: true`")},"rowDragAndRangeSelectionEnabled");return}var t=this.beans.localeService.getLocaleTextFunc(),r=new Tl(function(){return"1 "+t("rowDragRow","row")},this.rowNode,void 0,e.element,void 0,!0);this.createManagedBean(r,this.beans.context)},i.prototype.setupFullWidth=function(e){var t=this.getPinnedForContainer(e.containerType),r=this.createFullWidthParams(e.element,t);if(!(this.rowType==ur.FullWidthDetail&&!gt.__assertRegistered(je.MasterDetailModule,"cell renderer 'agDetailCellRenderer' (for master detail)",this.beans.context.getGridId()))){var o;switch(this.rowType){case ur.FullWidthDetail:o=this.beans.userComponentFactory.getFullWidthDetailCellRendererDetails(r);break;case ur.FullWidthGroup:o=this.beans.userComponentFactory.getFullWidthGroupCellRendererDetails(r);break;case ur.FullWidthLoading:o=this.beans.userComponentFactory.getFullWidthLoadingCellRendererDetails(r);break;default:o=this.beans.userComponentFactory.getFullWidthCellRendererDetails(r);break}e.rowComp.showFullWidth(o)}},i.prototype.isPrintLayout=function(){return this.printLayout},i.prototype.getFullWidthCellRenderer=function(){var e,t;return(t=(e=this.fullWidthGui)===null||e===void 0?void 0:e.rowComp)===null||t===void 0?void 0:t.getFullWidthCellRenderer()},i.prototype.getCellElement=function(e){var t=this.getCellCtrl(e);return t?t.getGui():null},i.prototype.executeProcessRowPostCreateFunc=function(){var e=this.gridOptionsService.getCallback("processRowPostCreate");if(!(!e||!this.areAllContainersReady())){var t={eRow:this.centerGui.element,ePinnedLeftRow:this.leftGui?this.leftGui.element:void 0,ePinnedRightRow:this.rightGui?this.rightGui.element:void 0,node:this.rowNode,rowIndex:this.rowNode.rowIndex,addRenderedRowListener:this.addEventListener.bind(this)};e(t)}},i.prototype.areAllContainersReady=function(){var e=!!this.leftGui||!this.beans.columnModel.isPinningLeft(),t=!!this.centerGui,r=!!this.rightGui||!this.beans.columnModel.isPinningRight();return e&&t&&r},i.prototype.setRowType=function(){var e=this.rowNode.stub,t=this.rowNode.isFullWidthCell(),r=this.beans.doingMasterDetail&&this.rowNode.detail,o=this.beans.columnModel.isPivotMode(),a=!!this.rowNode.group&&!this.rowNode.footer,s=a&&this.gridOptionsService.isGroupUseEntireRow(o);e?this.rowType=ur.FullWidthLoading:r?this.rowType=ur.FullWidthDetail:t?this.rowType=ur.FullWidth:s?this.rowType=ur.FullWidthGroup:this.rowType=ur.Normal},i.prototype.updateColumnLists=function(e,t){var r=this;if(e===void 0&&(e=!1),t===void 0&&(t=!1),!this.isFullWidth()){var o=e||this.gridOptionsService.is("suppressAnimationFrame")||this.printLayout;if(o){this.updateColumnListsImpl(t);return}this.updateColumnListsPending||(this.beans.animationFrameService.createTask(function(){r.active&&r.updateColumnListsImpl(!0)},this.rowNode.rowIndex,"createTasksP1"),this.updateColumnListsPending=!0)}},i.prototype.createCellCtrls=function(e,t,r){var o=this;r===void 0&&(r=null);var a={list:[],map:{}},s=function(l,u){a.list.push(u),a.map[l]=u};return t.forEach(function(l){var u=l.getInstanceId(),c=e.map[u];c||(c=new En(l,o.rowNode,o.beans,o)),s(u,c)}),e.list.forEach(function(l){var u=a.map[l.getColumn().getInstanceId()]!=null;if(!u){var c=!o.isCellEligibleToBeRemoved(l,r);if(c){s(l.getColumn().getInstanceId(),l);return}l.destroy()}}),a},i.prototype.updateColumnListsImpl=function(e){this.updateColumnListsPending=!1,this.createAllCellCtrls(),this.setCellCtrls(e)},i.prototype.setCellCtrls=function(e){var t=this;this.allRowGuis.forEach(function(r){var o=t.getCellCtrlsForContainer(r.containerType);r.rowComp.setCellCtrls(o,e)})},i.prototype.getCellCtrlsForContainer=function(e){switch(e){case Bi.LEFT:return this.leftCellCtrls.list;case Bi.RIGHT:return this.rightCellCtrls.list;case Bi.FULL_WIDTH:return[];case Bi.CENTER:return this.centerCellCtrls.list;default:var t=e;throw new Error("Unhandled case: "+t)}},i.prototype.createAllCellCtrls=function(){var e=this.beans.columnModel;if(this.printLayout)this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,e.getAllDisplayedColumns()),this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}};else{var t=e.getViewportCenterColumnsForRow(this.rowNode);this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,t);var r=e.getDisplayedLeftColumnsForRow(this.rowNode);this.leftCellCtrls=this.createCellCtrls(this.leftCellCtrls,r,"left");var o=e.getDisplayedRightColumnsForRow(this.rowNode);this.rightCellCtrls=this.createCellCtrls(this.rightCellCtrls,o,"right")}},i.prototype.isCellEligibleToBeRemoved=function(e,t){var r=!0,o=!1,a=e.getColumn();if(a.getPinned()!=t)return r;var s=e.isEditing(),l=this.beans.focusService.isCellFocused(e.getCellPosition()),u=s||l;if(u){var c=e.getColumn(),d=this.beans.columnModel.getAllDisplayedColumns(),f=d.indexOf(c)>=0;return f?o:r}return r},i.prototype.getDomOrder=function(){var e=this.gridOptionsService.is("ensureDomOrder");return e||this.gridOptionsService.isDomLayout("print")},i.prototype.listenOnDomOrder=function(e){var t=this,r=function(){e.rowComp.setDomOrder(t.getDomOrder())};this.addManagedPropertyListener("domLayout",r),this.addManagedPropertyListener("ensureDomOrder",r)},i.prototype.setAnimateFlags=function(e){if(!(this.isSticky()||!e)){var t=ue(this.rowNode.oldRowTop),r=this.beans.columnModel.isPinningLeft(),o=this.beans.columnModel.isPinningRight();if(t){if(this.isFullWidth()&&!this.gridOptionsService.is("embedFullWidthRows")){this.slideInAnimation.fullWidth=!0;return}this.slideInAnimation.center=!0,this.slideInAnimation.left=r,this.slideInAnimation.right=o}else{if(this.isFullWidth()&&!this.gridOptionsService.is("embedFullWidthRows")){this.fadeInAnimation.fullWidth=!0;return}this.fadeInAnimation.center=!0,this.fadeInAnimation.left=r,this.fadeInAnimation.right=o}}},i.prototype.isEditing=function(){return this.editingRow},i.prototype.stopRowEditing=function(e){this.stopEditing(e)},i.prototype.isFullWidth=function(){return this.rowType!==ur.Normal},i.prototype.getRowType=function(){return this.rowType},i.prototype.refreshFullWidth=function(){var e=this,t=function(u,c){if(!u)return!0;var d=u.rowComp.getFullWidthCellRenderer();if(!d||!d.refresh)return!1;var f=e.createFullWidthParams(u.element,c),y=d.refresh(f);return y},r=t(this.fullWidthGui,null),o=t(this.centerGui,null),a=t(this.leftGui,"left"),s=t(this.rightGui,"right"),l=r&&o&&a&&s;return l},i.prototype.addListeners=function(){var e=this;this.addManagedListener(this.rowNode,Nt.EVENT_HEIGHT_CHANGED,function(){return e.onRowHeightChanged()}),this.addManagedListener(this.rowNode,Nt.EVENT_ROW_SELECTED,function(){return e.onRowSelected()}),this.addManagedListener(this.rowNode,Nt.EVENT_ROW_INDEX_CHANGED,this.onRowIndexChanged.bind(this)),this.addManagedListener(this.rowNode,Nt.EVENT_TOP_CHANGED,this.onTopChanged.bind(this)),this.addManagedListener(this.rowNode,Nt.EVENT_EXPANDED_CHANGED,this.updateExpandedCss.bind(this)),this.addManagedListener(this.rowNode,Nt.EVENT_HAS_CHILDREN_CHANGED,this.updateExpandedCss.bind(this)),this.rowNode.detail&&this.addManagedListener(this.rowNode.parent,Nt.EVENT_DATA_CHANGED,this.onRowNodeDataChanged.bind(this)),this.addManagedListener(this.rowNode,Nt.EVENT_DATA_CHANGED,this.onRowNodeDataChanged.bind(this)),this.addManagedListener(this.rowNode,Nt.EVENT_CELL_CHANGED,this.onRowNodeCellChanged.bind(this)),this.addManagedListener(this.rowNode,Nt.EVENT_HIGHLIGHT_CHANGED,this.onRowNodeHighlightChanged.bind(this)),this.addManagedListener(this.rowNode,Nt.EVENT_DRAGGING_CHANGED,this.onRowNodeDraggingChanged.bind(this)),this.addManagedListener(this.rowNode,Nt.EVENT_UI_LEVEL_CHANGED,this.onUiLevelChanged.bind(this));var t=this.beans.eventService;this.addManagedListener(t,b.EVENT_PAGINATION_PIXEL_OFFSET_CHANGED,this.onPaginationPixelOffsetChanged.bind(this)),this.addManagedListener(t,b.EVENT_HEIGHT_SCALE_CHANGED,this.onTopChanged.bind(this)),this.addManagedListener(t,b.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(t,b.EVENT_VIRTUAL_COLUMNS_CHANGED,this.onVirtualColumnsChanged.bind(this)),this.addManagedListener(t,b.EVENT_CELL_FOCUSED,this.onCellFocused.bind(this)),this.addManagedListener(t,b.EVENT_CELL_FOCUS_CLEARED,this.onCellFocusCleared.bind(this)),this.addManagedListener(t,b.EVENT_PAGINATION_CHANGED,this.onPaginationChanged.bind(this)),this.addManagedListener(t,b.EVENT_MODEL_UPDATED,this.onModelUpdated.bind(this)),this.addManagedListener(t,b.EVENT_COLUMN_MOVED,this.onColumnMoved.bind(this)),this.addListenersForCellComps()},i.prototype.onColumnMoved=function(){this.updateColumnLists()},i.prototype.addListenersForCellComps=function(){var e=this;this.addManagedListener(this.rowNode,Nt.EVENT_ROW_INDEX_CHANGED,function(){e.getAllCellCtrls().forEach(function(t){return t.onRowIndexChanged()})}),this.addManagedListener(this.rowNode,Nt.EVENT_CELL_CHANGED,function(t){e.getAllCellCtrls().forEach(function(r){return r.onCellChanged(t)})})},i.prototype.onRowNodeDataChanged=function(e){var t=this,r=this.isFullWidth()!==!!this.rowNode.isFullWidthCell();if(r){this.beans.rowRenderer.redrawRow(this.rowNode);return}if(this.isFullWidth()){var o=this.refreshFullWidth();o||this.beans.rowRenderer.redrawRow(this.rowNode);return}this.getAllCellCtrls().forEach(function(a){return a.refreshCell({suppressFlash:!e.update,newData:!e.update})}),this.allRowGuis.forEach(function(a){t.setRowCompRowId(a.rowComp),t.updateRowBusinessKey(),t.setRowCompRowBusinessKey(a.rowComp)}),this.onRowSelected(),this.postProcessCss()},i.prototype.onRowNodeCellChanged=function(){this.postProcessCss()},i.prototype.postProcessCss=function(){this.setStylesFromGridOptions(!0),this.postProcessClassesFromGridOptions(),this.postProcessRowClassRules(),this.postProcessRowDragging()},i.prototype.onRowNodeHighlightChanged=function(){var e=this.rowNode.highlighted;this.allRowGuis.forEach(function(t){var r=e===To.Above,o=e===To.Below;t.rowComp.addOrRemoveCssClass("ag-row-highlight-above",r),t.rowComp.addOrRemoveCssClass("ag-row-highlight-below",o)})},i.prototype.onRowNodeDraggingChanged=function(){this.postProcessRowDragging()},i.prototype.postProcessRowDragging=function(){var e=this.rowNode.dragging;this.allRowGuis.forEach(function(t){return t.rowComp.addOrRemoveCssClass("ag-row-dragging",e)})},i.prototype.updateExpandedCss=function(){var e=this.rowNode.isExpandable(),t=this.rowNode.expanded==!0;this.allRowGuis.forEach(function(r){r.rowComp.addOrRemoveCssClass("ag-row-group",e),r.rowComp.addOrRemoveCssClass("ag-row-group-expanded",e&&t),r.rowComp.addOrRemoveCssClass("ag-row-group-contracted",e&&!t),Yr(r.element,e&&t)})},i.prototype.onDisplayedColumnsChanged=function(){this.updateColumnLists(!0),this.beans.columnModel.wasAutoRowHeightEverActive()&&this.rowNode.checkAutoHeights()},i.prototype.onVirtualColumnsChanged=function(){this.updateColumnLists(!1,!0)},i.prototype.getRowPosition=function(){return{rowPinned:ao(this.rowNode.rowPinned),rowIndex:this.rowNode.rowIndex}},i.prototype.onKeyboardNavigate=function(e){var t=this.allRowGuis.find(function(u){return u.element.contains(e.target)}),r=t?t.element:null,o=r===e.target;if(o){var a=this.rowNode,s=this.beans.focusService.getFocusedCell(),l={rowIndex:a.rowIndex,rowPinned:a.rowPinned,column:s&&s.column};this.beans.navigationService.navigateToNextCell(e,e.key,l,!0),e.preventDefault()}},i.prototype.onTabKeyDown=function(e){if(!(e.defaultPrevented||Kr(e))){var t=this.allRowGuis.find(function(s){return s.element.contains(e.target)}),r=t?t.element:null,o=r===e.target,a=null;o||(a=this.beans.focusService.findNextFocusableElement(r,!1,e.shiftKey)),(this.isFullWidth()&&o||!a)&&this.beans.navigationService.onTabKeyDown(this,e)}},i.prototype.onFullWidthRowFocused=function(e){var t,r=this.rowNode,o=e?this.isFullWidth()&&e.rowIndex===r.rowIndex&&e.rowPinned==r.rowPinned:!1,a=this.fullWidthGui?this.fullWidthGui.element:(t=this.centerGui)===null||t===void 0?void 0:t.element;a&&(a.classList.toggle("ag-full-width-focus",o),o&&a.focus({preventScroll:!0}))},i.prototype.refreshCell=function(e){this.centerCellCtrls=this.removeCellCtrl(this.centerCellCtrls,e),this.leftCellCtrls=this.removeCellCtrl(this.leftCellCtrls,e),this.rightCellCtrls=this.removeCellCtrl(this.rightCellCtrls,e),this.updateColumnLists()},i.prototype.removeCellCtrl=function(e,t){var r={list:[],map:{}};return e.list.forEach(function(o){o!==t&&(r.list.push(o),r.map[o.getInstanceId()]=o)}),r},i.prototype.onMouseEvent=function(e,t){switch(e){case"dblclick":this.onRowDblClick(t);break;case"click":this.onRowClick(t);break;case"touchstart":case"mousedown":this.onRowMouseDown(t);break}},i.prototype.createRowEvent=function(e,t){return{type:e,node:this.rowNode,data:this.rowNode.data,rowIndex:this.rowNode.rowIndex,rowPinned:this.rowNode.rowPinned,context:this.gridOptionsService.context,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,event:t}},i.prototype.createRowEventWithSource=function(e,t){var r=this.createRowEvent(e,t);return r.source=this,r},i.prototype.onRowDblClick=function(e){if(!Kr(e)){var t=this.createRowEventWithSource(b.EVENT_ROW_DOUBLE_CLICKED,e);this.beans.eventService.dispatchEvent(t)}},i.prototype.onRowMouseDown=function(e){if(this.lastMouseDownOnDragger=On(e.target,"ag-row-drag",3),!!this.isFullWidth()){var t=this.rowNode,r=this.beans.columnModel;this.beans.rangeService&&this.beans.rangeService.removeAllCellRanges(),this.beans.focusService.setFocusedCell({rowIndex:t.rowIndex,column:r.getAllDisplayedColumns()[0],rowPinned:t.rowPinned,forceBrowserFocus:!0})}},i.prototype.onRowClick=function(e){var t=Kr(e)||this.lastMouseDownOnDragger;if(!t){var r=this.createRowEventWithSource(b.EVENT_ROW_CLICKED,e);this.beans.eventService.dispatchEvent(r);var o=e.ctrlKey||e.metaKey,a=e.shiftKey,s=this.gridOptionsService.is("groupSelectsChildren");if(!(s&&this.rowNode.group||!this.rowNode.selectable||this.rowNode.rowPinned||!this.gridOptionsService.isRowSelection()||this.gridOptionsService.is("suppressRowClickSelection"))){var l=this.gridOptionsService.is("rowMultiSelectWithClick"),u=!this.gridOptionsService.is("suppressRowDeselection"),c="rowClicked";if(this.rowNode.isSelected())l?this.rowNode.setSelectedParams({newValue:!1,event:e,source:c}):o?u&&this.rowNode.setSelectedParams({newValue:!1,event:e,source:c}):this.rowNode.setSelectedParams({newValue:!0,clearSelection:!a,rangeSelect:a,event:e,source:c});else{var d=l?!1:!o;this.rowNode.setSelectedParams({newValue:!0,clearSelection:d,rangeSelect:a,event:e,source:c})}}}},i.prototype.setupDetailRowAutoHeight=function(e){var t=this;if(this.rowType===ur.FullWidthDetail&&this.gridOptionsService.is("detailRowAutoHeight")){var r=function(){var a=e.clientHeight;if(a!=null&&a>0){var s=function(){t.rowNode.setRowHeight(a),t.beans.clientSideRowModel?t.beans.clientSideRowModel.onRowHeightChanged():t.beans.serverSideRowModel&&t.beans.serverSideRowModel.onRowHeightChanged()};t.beans.frameworkOverrides.setTimeout(s,0)}},o=this.beans.resizeObserverService.observeResize(e,r);this.addDestroyFunc(o),r()}},i.prototype.createFullWidthParams=function(e,t){var r=this,o={fullWidth:!0,data:this.rowNode.data,node:this.rowNode,value:this.rowNode.key,valueFormatted:this.rowNode.key,rowIndex:this.rowNode.rowIndex,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context,eGridCell:e,eParentOfValue:e,pinned:t,addRenderedRowListener:this.addEventListener.bind(this),registerRowDragger:function(a,s,l,u){return r.addFullWidthRowDragging(a,s,l,u)}};return o},i.prototype.addFullWidthRowDragging=function(e,t,r,o){if(r===void 0&&(r=""),!!this.isFullWidth()){var a=new Tl(function(){return r},this.rowNode,void 0,e,t,o);this.createManagedBean(a,this.beans.context)}},i.prototype.onUiLevelChanged=function(){var e=this.beans.rowCssClassCalculator.calculateRowLevel(this.rowNode);if(this.rowLevel!=e){var t="ag-row-level-"+e,r="ag-row-level-"+this.rowLevel;this.allRowGuis.forEach(function(o){o.rowComp.addOrRemoveCssClass(t,!0),o.rowComp.addOrRemoveCssClass(r,!1)})}this.rowLevel=e},i.prototype.isFirstRowOnPage=function(){return this.rowNode.rowIndex===this.beans.paginationProxy.getPageFirstRow()},i.prototype.isLastRowOnPage=function(){return this.rowNode.rowIndex===this.beans.paginationProxy.getPageLastRow()},i.prototype.onModelUpdated=function(){this.refreshFirstAndLastRowStyles()},i.prototype.refreshFirstAndLastRowStyles=function(){var e=this.isFirstRowOnPage(),t=this.isLastRowOnPage();this.firstRowOnPage!==e&&(this.firstRowOnPage=e,this.allRowGuis.forEach(function(r){return r.rowComp.addOrRemoveCssClass("ag-row-first",e)})),this.lastRowOnPage!==t&&(this.lastRowOnPage=t,this.allRowGuis.forEach(function(r){return r.rowComp.addOrRemoveCssClass("ag-row-last",t)}))},i.prototype.stopEditing=function(e){var t,r;if(e===void 0&&(e=!1),!this.stoppingRowEdit){var o=this.getAllCellCtrls(),a=this.editingRow;this.stoppingRowEdit=!0;var s=!1;try{for(var l=QT(o),u=l.next();!u.done;u=l.next()){var c=u.value,d=c.stopEditing(e);a&&!e&&!s&&d&&(s=!0)}}catch(y){t={error:y}}finally{try{u&&!u.done&&(r=l.return)&&r.call(l)}finally{if(t)throw t.error}}if(s){var f=this.createRowEvent(b.EVENT_ROW_VALUE_CHANGED);this.beans.eventService.dispatchEvent(f)}a&&this.setEditingRow(!1),this.stoppingRowEdit=!1}},i.prototype.setInlineEditingCss=function(e){this.allRowGuis.forEach(function(t){t.rowComp.addOrRemoveCssClass("ag-row-inline-editing",e),t.rowComp.addOrRemoveCssClass("ag-row-not-inline-editing",!e)})},i.prototype.setEditingRow=function(e){this.editingRow=e,this.allRowGuis.forEach(function(r){return r.rowComp.addOrRemoveCssClass("ag-row-editing",e)});var t=e?this.createRowEvent(b.EVENT_ROW_EDITING_STARTED):this.createRowEvent(b.EVENT_ROW_EDITING_STOPPED);this.beans.eventService.dispatchEvent(t)},i.prototype.startRowEditing=function(e,t,r){if(e===void 0&&(e=null),t===void 0&&(t=null),r===void 0&&(r=null),!this.editingRow){var o=this.getAllCellCtrls().reduce(function(a,s){var l=s===t;return l?s.startEditing(e,l,r):s.startEditing(null,l,r),a?!0:s.isEditing()},!1);o&&this.setEditingRow(!0)}},i.prototype.getAllCellCtrls=function(){if(this.leftCellCtrls.list.length===0&&this.rightCellCtrls.list.length===0)return this.centerCellCtrls.list;var e=Wu(Wu(Wu([],Hu(this.centerCellCtrls.list)),Hu(this.leftCellCtrls.list)),Hu(this.rightCellCtrls.list));return e},i.prototype.postProcessClassesFromGridOptions=function(){var e=this,t=this.beans.rowCssClassCalculator.processClassesFromGridOptions(this.rowNode);!t||!t.length||t.forEach(function(r){e.allRowGuis.forEach(function(o){return o.rowComp.addOrRemoveCssClass(r,!0)})})},i.prototype.postProcessRowClassRules=function(){var e=this;this.beans.rowCssClassCalculator.processRowClassRules(this.rowNode,function(t){e.allRowGuis.forEach(function(r){return r.rowComp.addOrRemoveCssClass(t,!0)})},function(t){e.allRowGuis.forEach(function(r){return r.rowComp.addOrRemoveCssClass(t,!1)})})},i.prototype.setStylesFromGridOptions=function(e,t){var r=this;e&&(this.rowStyles=this.processStylesFromGridOptions()),this.forEachGui(t,function(o){return o.rowComp.setUserStyles(r.rowStyles)})},i.prototype.getPinnedForContainer=function(e){var t=e===Bi.LEFT?"left":e===Bi.RIGHT?"right":null;return t},i.prototype.getInitialRowClasses=function(e){var t=this.getPinnedForContainer(e),r={rowNode:this.rowNode,rowFocused:this.rowFocused,fadeRowIn:this.fadeInAnimation[e],rowIsEven:this.rowNode.rowIndex%2===0,rowLevel:this.rowLevel,fullWidthRow:this.isFullWidth(),firstRowOnPage:this.isFirstRowOnPage(),lastRowOnPage:this.isLastRowOnPage(),printLayout:this.printLayout,expandable:this.rowNode.isExpandable(),pinned:t};return this.beans.rowCssClassCalculator.getInitialRowClasses(r)},i.prototype.processStylesFromGridOptions=function(){var e=this.gridOptionsService.get("rowStyle");if(e&&typeof e=="function"){console.warn("AG Grid: rowStyle should be an object of key/value styles, not be a function, use getRowStyle() instead");return}var t=this.gridOptionsService.getCallback("getRowStyle"),r;if(t){var o={data:this.rowNode.data,node:this.rowNode,rowIndex:this.rowNode.rowIndex};r=t(o)}return r||e?Object.assign({},e,r):this.emptyStyle},i.prototype.onRowSelected=function(e){var t=this,r=!!this.rowNode.isSelected();this.forEachGui(e,function(o){o.rowComp.addOrRemoveCssClass("ag-row-selected",r),Dn(o.element,r?!0:void 0);var a=t.createAriaLabel();Po(o.element,a??"")})},i.prototype.createAriaLabel=function(){var e=this.rowNode.isSelected();if(!(e&&this.gridOptionsService.is("suppressRowDeselection"))){var t=this.beans.localeService.getLocaleTextFunc(),r=t(e?"ariaRowDeselect":"ariaRowSelect","Press SPACE to "+(e?"deselect":"select")+" this row.");return r}},i.prototype.isUseAnimationFrameForCreate=function(){return this.useAnimationFrameForCreate},i.prototype.addHoverFunctionality=function(e){var t=this;this.active&&(this.addManagedListener(e,"mouseenter",function(){return t.rowNode.onMouseEnter()}),this.addManagedListener(e,"mouseleave",function(){return t.rowNode.onMouseLeave()}),this.addManagedListener(this.rowNode,Nt.EVENT_MOUSE_ENTER,function(){!t.beans.dragService.isDragging()&&!t.gridOptionsService.is("suppressRowHoverHighlight")&&(e.classList.add("ag-row-hover"),t.rowNode.setHovered(!0))}),this.addManagedListener(this.rowNode,Nt.EVENT_MOUSE_LEAVE,function(){e.classList.remove("ag-row-hover"),t.rowNode.setHovered(!1)}))},i.prototype.roundRowTopToBounds=function(e){var t=this.beans.ctrlsService.getGridBodyCtrl(),r=t.getScrollFeature().getVScrollPosition(),o=this.applyPaginationOffset(r.top,!0)-100,a=this.applyPaginationOffset(r.bottom,!0)+100;return Math.min(Math.max(o,e),a)},i.prototype.getFrameworkOverrides=function(){return this.beans.frameworkOverrides},i.prototype.forEachGui=function(e,t){e?t(e):this.allRowGuis.forEach(t)},i.prototype.onRowHeightChanged=function(e){if(this.rowNode.rowHeight!=null){var t=this.rowNode.rowHeight,r=this.beans.environment.getDefaultRowHeight(),o=this.gridOptionsService.isGetRowHeightFunction(),a=o?this.gridOptionsService.getRowHeightForNode(this.rowNode).height:void 0,s=a?Math.min(r,a)-2+"px":void 0;this.forEachGui(e,function(l){l.element.style.height=t+"px",s&&l.element.style.setProperty("--ag-line-height",s)})}},i.prototype.addEventListener=function(e,t){n.prototype.addEventListener.call(this,e,t)},i.prototype.removeEventListener=function(e,t){n.prototype.removeEventListener.call(this,e,t)},i.prototype.destroyFirstPass=function(){this.active=!1,this.gridOptionsService.isAnimateRows()&&this.setupRemoveAnimation(),this.rowNode.setHovered(!1);var e=this.createRowEvent(b.EVENT_VIRTUAL_ROW_REMOVED);this.dispatchEvent(e),this.beans.eventService.dispatchEvent(e),n.prototype.destroy.call(this)},i.prototype.setupRemoveAnimation=function(){if(!this.isSticky()){var e=this.rowNode.rowTop!=null;if(e){var t=this.roundRowTopToBounds(this.rowNode.rowTop);this.setRowTop(t)}else this.allRowGuis.forEach(function(r){return r.rowComp.addOrRemoveCssClass("ag-opacity-zero",!0)})}},i.prototype.destroySecondPass=function(){this.allRowGuis.length=0;var e=function(t){return t.list.forEach(function(r){return r.destroy()}),{list:[],map:{}}};this.centerCellCtrls=e(this.centerCellCtrls),this.leftCellCtrls=e(this.leftCellCtrls),this.rightCellCtrls=e(this.rightCellCtrls)},i.prototype.setFocusedClasses=function(e){var t=this;this.forEachGui(e,function(r){r.rowComp.addOrRemoveCssClass("ag-row-focus",t.rowFocused),r.rowComp.addOrRemoveCssClass("ag-row-no-focus",!t.rowFocused)})},i.prototype.onCellFocused=function(){this.onCellFocusChanged()},i.prototype.onCellFocusCleared=function(){this.onCellFocusChanged()},i.prototype.onCellFocusChanged=function(){var e=this.beans.focusService.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned);e!==this.rowFocused&&(this.rowFocused=e,this.setFocusedClasses()),!e&&this.editingRow&&this.stopEditing(!1)},i.prototype.onPaginationChanged=function(){var e=this.beans.paginationProxy.getCurrentPage();this.paginationPage!==e&&(this.paginationPage=e,this.onTopChanged()),this.refreshFirstAndLastRowStyles()},i.prototype.onTopChanged=function(){this.setRowTop(this.rowNode.rowTop)},i.prototype.onPaginationPixelOffsetChanged=function(){this.onTopChanged()},i.prototype.applyPaginationOffset=function(e,t){if(t===void 0&&(t=!1),this.rowNode.isRowPinned()||this.rowNode.sticky)return e;var r=this.beans.paginationProxy.getPixelOffset(),o=t?1:-1;return e+r*o},i.prototype.setRowTop=function(e){if(!this.printLayout&&ue(e)){var t=this.applyPaginationOffset(e),r=this.rowNode.isRowPinned()||this.rowNode.sticky,o=r?t:this.beans.rowContainerHeightService.getRealPixelPosition(t),a=o+"px";this.setRowTopStyle(a)}},i.prototype.getInitialRowTop=function(e){var t=this.gridOptionsService.is("suppressRowTransform");return t?this.getInitialRowTopShared(e):void 0},i.prototype.getInitialTransform=function(e){var t=this.gridOptionsService.is("suppressRowTransform");return t?void 0:"translateY("+this.getInitialRowTopShared(e)+")"},i.prototype.getInitialRowTopShared=function(e){if(this.printLayout)return"";var t;if(this.isSticky())t=this.rowNode.stickyRowTop;else{var r=this.slideInAnimation[e]?this.roundRowTopToBounds(this.rowNode.oldRowTop):this.rowNode.rowTop,o=this.applyPaginationOffset(r);t=this.rowNode.isRowPinned()?o:this.beans.rowContainerHeightService.getRealPixelPosition(o)}return t+"px"},i.prototype.setRowTopStyle=function(e){var t=this.gridOptionsService.is("suppressRowTransform");this.allRowGuis.forEach(function(r){return t?r.rowComp.setTop(e):r.rowComp.setTransform("translateY("+e+")")})},i.prototype.getRowNode=function(){return this.rowNode},i.prototype.getCellCtrl=function(e){var t=null;return this.getAllCellCtrls().forEach(function(r){r.getColumn()==e&&(t=r)}),t!=null||this.getAllCellCtrls().forEach(function(r){r.getColSpanningList().indexOf(e)>=0&&(t=r)}),t},i.prototype.onRowIndexChanged=function(){this.rowNode.rowIndex!=null&&(this.onCellFocusChanged(),this.updateRowIndexes(),this.postProcessCss())},i.prototype.getRowIndex=function(){return this.rowNode.getRowIndexString()},i.prototype.updateRowIndexes=function(e){var t=this.rowNode.getRowIndexString(),r=this.beans.headerNavigationService.getHeaderRowCount()+this.beans.filterManager.getHeaderRowCount(),o=this.rowNode.rowIndex%2===0,a=r+this.rowNode.rowIndex+1;this.forEachGui(e,function(s){s.rowComp.setRowIndex(t),s.rowComp.addOrRemoveCssClass("ag-row-even",o),s.rowComp.addOrRemoveCssClass("ag-row-odd",!o),ld(s.element,a)})},i.prototype.getPinnedLeftRowElement=function(){return this.leftGui?this.leftGui.element:void 0},i.prototype.getPinnedRightRowElement=function(){return this.rightGui?this.rightGui.element:void 0},i.prototype.getBodyRowElement=function(){return this.centerGui?this.centerGui.element:void 0},i.prototype.getFullWidthRowElement=function(){return this.fullWidthGui?this.fullWidthGui.element:void 0},i.DOM_DATA_KEY_ROW_CTRL="renderedRow",i}(ve),XT=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),vr=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},JT=function(n,i){var e=typeof Symbol=="function"&&n[Symbol.iterator];if(!e)return n;var t=e.call(n),r,o=[],a;try{for(;(i===void 0||i-- >0)&&!(r=t.next()).done;)o.push(r.value)}catch(s){a={error:s}}finally{try{r&&!r.done&&(e=t.return)&&e.call(t)}finally{if(a)throw a.error}}return o},ZT=function(n){XT(i,n);function i(e){var t=n.call(this)||this;return t.element=e,t}return i.prototype.postConstruct=function(){this.addKeyboardListeners(),this.addMouseListeners(),this.mockContextMenuForIPad()},i.prototype.addKeyboardListeners=function(){var e="keydown",t=this.processKeyboardEvent.bind(this,e);this.addManagedListener(this.element,e,t)},i.prototype.addMouseListeners=function(){var e=this,t=id("touchstart")?"touchstart":"mousedown",r=["dblclick","contextmenu","mouseover","mouseout","click",t];r.forEach(function(o){var a=e.processMouseEvent.bind(e,o);e.addManagedListener(e.element,o,a)})},i.prototype.processMouseEvent=function(e,t){if(!(!this.mouseEventService.isEventFromThisGrid(t)||Kr(t))){var r=this.getRowForEvent(t),o=this.mouseEventService.getRenderedCellForEvent(t);e==="contextmenu"?this.handleContextMenuMouseEvent(t,null,r,o):(o&&o.onMouseEvent(e,t),r&&r.onMouseEvent(e,t))}},i.prototype.mockContextMenuForIPad=function(){var e=this;if($o()){var t=new wr(this.element),r=function(o){var a=e.getRowForEvent(o.touchEvent),s=e.mouseEventService.getRenderedCellForEvent(o.touchEvent);e.handleContextMenuMouseEvent(null,o.touchEvent,a,s)};this.addManagedListener(t,wr.EVENT_LONG_TAP,r),this.addDestroyFunc(function(){return t.destroy()})}},i.prototype.getRowForEvent=function(e){for(var t=e.target;t;){var r=this.gridOptionsService.getDomData(t,_n.DOM_DATA_KEY_ROW_CTRL);if(r)return r;t=t.parentElement}return null},i.prototype.handleContextMenuMouseEvent=function(e,t,r,o){var a=r?r.getRowNode():null,s=o?o.getColumn():null,l=null;if(s){var u=e||t;o.dispatchCellContextMenuEvent(u),l=this.valueService.getValue(s,a)}var c=this.ctrlsService.getGridBodyCtrl(),d=o?o.getGui():c.getGridBodyElement();this.contextMenuFactory&&this.contextMenuFactory.onContextMenu(e,t,a,s,l,d)},i.prototype.getControlsForEventTarget=function(e){return{cellCtrl:vl(this.gridOptionsService,e,En.DOM_DATA_KEY_CELL_CTRL),rowCtrl:vl(this.gridOptionsService,e,_n.DOM_DATA_KEY_ROW_CTRL)}},i.prototype.processKeyboardEvent=function(e,t){var r=this.getControlsForEventTarget(t.target),o=r.cellCtrl,a=r.rowCtrl;t.defaultPrevented||(o?this.processCellKeyboardEvent(o,e,t):a&&a.isFullWidth()&&this.processFullWidthRowKeyboardEvent(a,e,t))},i.prototype.processCellKeyboardEvent=function(e,t,r){var o=e.getRowNode(),a=e.getColumn(),s=e.isEditing(),l=!ml(this.gridOptionsService,r,o,a,s);if(l&&t==="keydown"){var u=!s&&this.navigationService.handlePageScrollingKey(r);u||e.onKeyDown(r),this.doGridOperations(r,e.isEditing()),zl(r)&&e.processCharacter(r)}if(t==="keydown"){var c=e.createEvent(r,b.EVENT_CELL_KEY_DOWN);this.eventService.dispatchEvent(c)}},i.prototype.processFullWidthRowKeyboardEvent=function(e,t,r){var o=e.getRowNode(),a=this.focusService.getFocusedCell(),s=a&&a.column,l=!ml(this.gridOptionsService,r,o,s,!1);if(l){var u=r.key;if(t==="keydown")switch(u){case J.PAGE_HOME:case J.PAGE_END:case J.PAGE_UP:case J.PAGE_DOWN:this.navigationService.handlePageScrollingKey(r,!0);break;case J.UP:case J.DOWN:e.onKeyboardNavigate(r);break;case J.TAB:e.onTabKeyDown(r);break}}if(t==="keydown"){var c=e.createRowEvent(b.EVENT_CELL_KEY_DOWN,r);this.eventService.dispatchEvent(c)}},i.prototype.doGridOperations=function(e,t){if(!(!e.ctrlKey&&!e.metaKey)&&!t&&this.mouseEventService.isEventFromThisGrid(e)){var r=vv(e);if(r===J.A)return this.onCtrlAndA(e);if(r===J.C)return this.onCtrlAndC(e);if(r===J.D)return this.onCtrlAndD(e);if(r===J.V)return this.onCtrlAndV(e);if(r===J.X)return this.onCtrlAndX(e);if(r===J.Y)return this.onCtrlAndY();if(r===J.Z)return this.onCtrlAndZ(e)}},i.prototype.onCtrlAndA=function(e){var t=this,r=t.pinnedRowModel,o=t.paginationProxy,a=t.rangeService;if(a&&o.isRowsToRender()){var s=JT([r.isEmpty("top"),r.isEmpty("bottom")],2),l=s[0],u=s[1],c=l?null:"top",d=void 0,f=void 0;u?(d=null,f=this.paginationProxy.getRowCount()-1):(d="bottom",f=r.getPinnedBottomRowData().length-1);var y=this.columnModel.getAllDisplayedColumns();if(Cr(y))return;a.setCellRange({rowStartIndex:0,rowStartPinned:c,rowEndIndex:f,rowEndPinned:d,columnStart:y[0],columnEnd:ai(y)})}e.preventDefault()},i.prototype.onCtrlAndC=function(e){if(!(!this.clipboardService||this.gridOptionsService.is("enableCellTextSelection"))){var t=this.getControlsForEventTarget(e.target),r=t.cellCtrl,o=t.rowCtrl;r?.isEditing()||o?.isEditing()||(e.preventDefault(),this.clipboardService.copyToClipboard())}},i.prototype.onCtrlAndX=function(e){if(!(!this.clipboardService||this.gridOptionsService.is("enableCellTextSelection")||this.gridOptionsService.is("suppressCutToClipboard"))){var t=this.getControlsForEventTarget(e.target),r=t.cellCtrl,o=t.rowCtrl;r?.isEditing()||o?.isEditing()||(e.preventDefault(),this.clipboardService.cutToClipboard(void 0,"ui"))}},i.prototype.onCtrlAndV=function(e){var t=this.getControlsForEventTarget(e.target),r=t.cellCtrl,o=t.rowCtrl;r?.isEditing()||o?.isEditing()||this.clipboardService&&!this.gridOptionsService.is("suppressClipboardPaste")&&this.clipboardService.pasteFromClipboard()},i.prototype.onCtrlAndD=function(e){this.clipboardService&&!this.gridOptionsService.is("suppressClipboardPaste")&&this.clipboardService.copyRangeDown(),e.preventDefault()},i.prototype.onCtrlAndZ=function(e){this.gridOptionsService.is("undoRedoCellEditing")&&(e.preventDefault(),e.shiftKey?this.undoRedoService.redo("ui"):this.undoRedoService.undo("ui"))},i.prototype.onCtrlAndY=function(){this.undoRedoService.redo("ui")},vr([T("mouseEventService")],i.prototype,"mouseEventService",void 0),vr([T("valueService")],i.prototype,"valueService",void 0),vr([Zt("contextMenuFactory")],i.prototype,"contextMenuFactory",void 0),vr([T("ctrlsService")],i.prototype,"ctrlsService",void 0),vr([T("navigationService")],i.prototype,"navigationService",void 0),vr([T("focusService")],i.prototype,"focusService",void 0),vr([T("undoRedoService")],i.prototype,"undoRedoService",void 0),vr([T("columnModel")],i.prototype,"columnModel",void 0),vr([T("paginationProxy")],i.prototype,"paginationProxy",void 0),vr([T("pinnedRowModel")],i.prototype,"pinnedRowModel",void 0),vr([Zt("rangeService")],i.prototype,"rangeService",void 0),vr([Zt("clipboardService")],i.prototype,"clipboardService",void 0),vr([Oe],i.prototype,"postConstruct",null),i}(ve),$T=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Gs=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},eO=function(n){$T(i,n);function i(e){var t=n.call(this)||this;return t.centerContainerCtrl=e,t}return i.prototype.postConstruct=function(){var e=this;this.ctrlsService.whenReady(function(){e.gridBodyCtrl=e.ctrlsService.getGridBodyCtrl(),e.listenForResize()}),this.addManagedListener(this.eventService,b.EVENT_SCROLLBAR_WIDTH_CHANGED,this.onScrollbarWidthChanged.bind(this))},i.prototype.listenForResize=function(){var e=this,t=function(){return e.onCenterViewportResized()};this.centerContainerCtrl.registerViewportResizeListener(t),this.gridBodyCtrl.registerBodyViewportResizeListener(t)},i.prototype.onScrollbarWidthChanged=function(){this.checkViewportAndScrolls()},i.prototype.onCenterViewportResized=function(){if(this.centerContainerCtrl.isViewportVisible()){this.checkViewportAndScrolls();var e=this.centerContainerCtrl.getCenterWidth();e!==this.centerWidth&&(this.centerWidth=e,this.columnModel.refreshFlexedColumns({viewportWidth:this.centerWidth,updateBodyWidths:!0,fireResizedEvent:!0}))}else this.bodyHeight=0},i.prototype.checkViewportAndScrolls=function(){this.updateScrollVisibleService(),this.checkBodyHeight(),this.onHorizontalViewportChanged(),this.gridBodyCtrl.getScrollFeature().checkScrollLeft()},i.prototype.getBodyHeight=function(){return this.bodyHeight},i.prototype.checkBodyHeight=function(){var e=this.gridBodyCtrl.getBodyViewportElement(),t=vs(e);if(this.bodyHeight!==t){this.bodyHeight=t;var r={type:b.EVENT_BODY_HEIGHT_CHANGED};this.eventService.dispatchEvent(r)}},i.prototype.updateScrollVisibleService=function(){this.updateScrollVisibleServiceImpl(),setTimeout(this.updateScrollVisibleServiceImpl.bind(this),500)},i.prototype.updateScrollVisibleServiceImpl=function(){var e={horizontalScrollShowing:this.isHorizontalScrollShowing(),verticalScrollShowing:this.gridBodyCtrl.isVerticalScrollShowing()};this.scrollVisibleService.setScrollsVisible(e)},i.prototype.isHorizontalScrollShowing=function(){return this.centerContainerCtrl.isHorizontalScrollShowing()},i.prototype.onHorizontalViewportChanged=function(){var e=this.centerContainerCtrl.getCenterWidth(),t=this.centerContainerCtrl.getViewportScrollLeft();this.columnModel.setViewportPosition(e,t)},Gs([T("ctrlsService")],i.prototype,"ctrlsService",void 0),Gs([T("columnModel")],i.prototype,"columnModel",void 0),Gs([T("scrollVisibleService")],i.prototype,"scrollVisibleService",void 0),Gs([Oe],i.prototype,"postConstruct",null),i}(ve),tO=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Xp=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},iO=function(n){tO(i,n);function i(e){var t=n.call(this)||this;return t.element=e,t}return i.prototype.postConstruct=function(){this.addManagedListener(this.eventService,b.EVENT_LEFT_PINNED_WIDTH_CHANGED,this.onPinnedLeftWidthChanged.bind(this))},i.prototype.onPinnedLeftWidthChanged=function(){var e=this.pinnedWidthService.getPinnedLeftWidth(),t=e>0;Yt(this.element,t),Nr(this.element,e)},i.prototype.getWidth=function(){return this.pinnedWidthService.getPinnedLeftWidth()},Xp([T("pinnedWidthService")],i.prototype,"pinnedWidthService",void 0),Xp([Oe],i.prototype,"postConstruct",null),i}(ve),rO=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Jp=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},oO=function(n){rO(i,n);function i(e){var t=n.call(this)||this;return t.element=e,t}return i.prototype.postConstruct=function(){this.addManagedListener(this.eventService,b.EVENT_RIGHT_PINNED_WIDTH_CHANGED,this.onPinnedRightWidthChanged.bind(this))},i.prototype.onPinnedRightWidthChanged=function(){var e=this.pinnedWidthService.getPinnedRightWidth(),t=e>0;Yt(this.element,t),Nr(this.element,e)},i.prototype.getWidth=function(){return this.pinnedWidthService.getPinnedRightWidth()},Jp([T("pinnedWidthService")],i.prototype,"pinnedWidthService",void 0),Jp([Oe],i.prototype,"postConstruct",null),i}(ve),nO=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Zp=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},zv=function(n){nO(i,n);function i(e,t){var r=n.call(this)||this;return r.eContainer=e,r.eViewport=t,r}return i.prototype.postConstruct=function(){this.addManagedListener(this.eventService,b.EVENT_ROW_CONTAINER_HEIGHT_CHANGED,this.onHeightChanged.bind(this))},i.prototype.onHeightChanged=function(){var e=this.maxDivHeightScaler.getUiContainerHeight(),t=e!=null?e+"px":"";this.eContainer.style.height=t,this.eViewport&&(this.eViewport.style.height=t)},Zp([T("rowContainerHeightService")],i.prototype,"maxDivHeightScaler",void 0),Zp([Oe],i.prototype,"postConstruct",null),i}(ve),aO=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Uu=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},sO=function(n){aO(i,n);function i(e){var t=n.call(this)||this;return t.eContainer=e,t}return i.prototype.postConstruct=function(){var e=this;if(!(!this.gridOptionsService.is("enableRangeSelection")||vt(this.rangeService))){var t={eElement:this.eContainer,onDragStart:this.rangeService.onDragStart.bind(this.rangeService),onDragStop:this.rangeService.onDragStop.bind(this.rangeService),onDragging:this.rangeService.onDragging.bind(this.rangeService)};this.dragService.addDragSource(t),this.addDestroyFunc(function(){return e.dragService.removeDragSource(t)})}},Uu([Zt("rangeService")],i.prototype,"rangeService",void 0),Uu([T("dragService")],i.prototype,"dragService",void 0),Uu([Oe],i.prototype,"postConstruct",null),i}(ve),lO=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),ju=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},Nd=function(n){lO(i,n);function i(e,t){t===void 0&&(t=!1);var r=n.call(this)||this;return r.callback=e,r.addSpacer=t,r}return i.prototype.postConstruct=function(){var e=this.setWidth.bind(this);this.addManagedPropertyListener("domLayout",e),this.addManagedListener(this.eventService,b.EVENT_DISPLAYED_COLUMNS_CHANGED,e),this.addManagedListener(this.eventService,b.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,e),this.addManagedListener(this.eventService,b.EVENT_LEFT_PINNED_WIDTH_CHANGED,e),this.addSpacer&&(this.addManagedListener(this.eventService,b.EVENT_RIGHT_PINNED_WIDTH_CHANGED,e),this.addManagedListener(this.eventService,b.EVENT_SCROLL_VISIBILITY_CHANGED,e),this.addManagedListener(this.eventService,b.EVENT_SCROLLBAR_WIDTH_CHANGED,e)),this.setWidth()},i.prototype.setWidth=function(){var e=this.columnModel,t=this.gridOptionsService.isDomLayout("print"),r=e.getBodyContainerWidth(),o=e.getDisplayedColumnsLeftWidth(),a=e.getDisplayedColumnsRightWidth(),s;if(t)s=r+o+a;else if(s=r,this.addSpacer){var l=this.gridOptionsService.is("enableRtl")?o:a;l===0&&this.scrollVisibleService.isVerticalScrollShowing()&&(s+=this.gridOptionsService.getScrollbarWidth())}this.callback(s)},ju([T("columnModel")],i.prototype,"columnModel",void 0),ju([T("scrollVisibleService")],i.prototype,"scrollVisibleService",void 0),ju([Oe],i.prototype,"postConstruct",null),i}(ve),uO=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Io=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},Vs=function(n,i){var e=typeof Symbol=="function"&&n[Symbol.iterator];if(!e)return n;var t=e.call(n),r,o=[],a;try{for(;(i===void 0||i-- >0)&&!(r=t.next()).done;)o.push(r.value)}catch(s){a={error:s}}finally{try{r&&!r.done&&(e=t.return)&&e.call(t)}finally{if(a)throw a.error}}return o},Bs=function(n,i){for(var e=0,t=i.length,r=n.length;e<t;e++,r++)n[r]=i[e];return n},oe;(function(n){n.LEFT="left",n.RIGHT="right",n.CENTER="center",n.FULL_WIDTH="fullWidth",n.TOP_LEFT="topLeft",n.TOP_RIGHT="topRight",n.TOP_CENTER="topCenter",n.TOP_FULL_WIDTH="topFullWidth",n.STICKY_TOP_LEFT="stickyTopLeft",n.STICKY_TOP_RIGHT="stickyTopRight",n.STICKY_TOP_CENTER="stickyTopCenter",n.STICKY_TOP_FULL_WIDTH="stickyTopFullWidth",n.BOTTOM_LEFT="bottomLeft",n.BOTTOM_RIGHT="bottomRight",n.BOTTOM_CENTER="bottomCenter",n.BOTTOM_FULL_WIDTH="bottomFullWidth"})(oe||(oe={}));var Bi;(function(n){n.LEFT="left",n.RIGHT="right",n.CENTER="center",n.FULL_WIDTH="fullWidth"})(Bi||(Bi={}));function cO(n){switch(n){case oe.CENTER:case oe.TOP_CENTER:case oe.STICKY_TOP_CENTER:case oe.BOTTOM_CENTER:return Bi.CENTER;case oe.LEFT:case oe.TOP_LEFT:case oe.STICKY_TOP_LEFT:case oe.BOTTOM_LEFT:return Bi.LEFT;case oe.RIGHT:case oe.TOP_RIGHT:case oe.STICKY_TOP_RIGHT:case oe.BOTTOM_RIGHT:return Bi.RIGHT;case oe.FULL_WIDTH:case oe.TOP_FULL_WIDTH:case oe.STICKY_TOP_FULL_WIDTH:case oe.BOTTOM_FULL_WIDTH:return Bi.FULL_WIDTH;default:throw Error("Invalid Row Container Type")}}var dO=Yo([[oe.CENTER,"ag-center-cols-container"],[oe.LEFT,"ag-pinned-left-cols-container"],[oe.RIGHT,"ag-pinned-right-cols-container"],[oe.FULL_WIDTH,"ag-full-width-container"],[oe.TOP_CENTER,"ag-floating-top-container"],[oe.TOP_LEFT,"ag-pinned-left-floating-top"],[oe.TOP_RIGHT,"ag-pinned-right-floating-top"],[oe.TOP_FULL_WIDTH,"ag-floating-top-full-width-container"],[oe.STICKY_TOP_CENTER,"ag-sticky-top-container"],[oe.STICKY_TOP_LEFT,"ag-pinned-left-sticky-top"],[oe.STICKY_TOP_RIGHT,"ag-pinned-right-sticky-top"],[oe.STICKY_TOP_FULL_WIDTH,"ag-sticky-top-full-width-container"],[oe.BOTTOM_CENTER,"ag-floating-bottom-container"],[oe.BOTTOM_LEFT,"ag-pinned-left-floating-bottom"],[oe.BOTTOM_RIGHT,"ag-pinned-right-floating-bottom"],[oe.BOTTOM_FULL_WIDTH,"ag-floating-bottom-full-width-container"]]),pO=Yo([[oe.CENTER,"ag-center-cols-viewport"],[oe.TOP_CENTER,"ag-floating-top-viewport"],[oe.STICKY_TOP_CENTER,"ag-sticky-top-viewport"],[oe.BOTTOM_CENTER,"ag-floating-bottom-viewport"]]),Yv=function(n){uO(i,n);function i(e){var t=n.call(this)||this;return t.visible=!0,t.EMPTY_CTRLS=[],t.name=e,t.isFullWithContainer=t.name===oe.TOP_FULL_WIDTH||t.name===oe.STICKY_TOP_FULL_WIDTH||t.name===oe.BOTTOM_FULL_WIDTH||t.name===oe.FULL_WIDTH,t}return i.getRowContainerCssClasses=function(e){var t=dO.get(e),r=pO.get(e);return{container:t,viewport:r}},i.getPinned=function(e){switch(e){case oe.BOTTOM_LEFT:case oe.TOP_LEFT:case oe.STICKY_TOP_LEFT:case oe.LEFT:return"left";case oe.BOTTOM_RIGHT:case oe.TOP_RIGHT:case oe.STICKY_TOP_RIGHT:case oe.RIGHT:return"right";default:return null}},i.prototype.postConstruct=function(){var e=this;this.enableRtl=this.gridOptionsService.is("enableRtl"),this.embedFullWidthRows=this.gridOptionsService.is("embedFullWidthRows"),this.forContainers([oe.CENTER],function(){return e.viewportSizeFeature=e.createManagedBean(new eO(e))})},i.prototype.registerWithCtrlsService=function(){switch(this.name){case oe.CENTER:this.ctrlsService.registerCenterRowContainerCtrl(this);break;case oe.LEFT:this.ctrlsService.registerLeftRowContainerCtrl(this);break;case oe.RIGHT:this.ctrlsService.registerRightRowContainerCtrl(this);break;case oe.TOP_CENTER:this.ctrlsService.registerTopCenterRowContainerCtrl(this);break;case oe.TOP_LEFT:this.ctrlsService.registerTopLeftRowContainerCon(this);break;case oe.TOP_RIGHT:this.ctrlsService.registerTopRightRowContainerCtrl(this);break;case oe.STICKY_TOP_CENTER:this.ctrlsService.registerStickyTopCenterRowContainerCtrl(this);break;case oe.STICKY_TOP_LEFT:this.ctrlsService.registerStickyTopLeftRowContainerCon(this);break;case oe.STICKY_TOP_RIGHT:this.ctrlsService.registerStickyTopRightRowContainerCtrl(this);break;case oe.BOTTOM_CENTER:this.ctrlsService.registerBottomCenterRowContainerCtrl(this);break;case oe.BOTTOM_LEFT:this.ctrlsService.registerBottomLeftRowContainerCtrl(this);break;case oe.BOTTOM_RIGHT:this.ctrlsService.registerBottomRightRowContainerCtrl(this);break}},i.prototype.forContainers=function(e,t){e.indexOf(this.name)>=0&&t()},i.prototype.getContainerElement=function(){return this.eContainer},i.prototype.getViewportSizeFeature=function(){return this.viewportSizeFeature},i.prototype.setComp=function(e,t,r){var o=this;this.comp=e,this.eContainer=t,this.eViewport=r,this.createManagedBean(new ZT(this.eContainer)),this.addPreventScrollWhileDragging(),this.listenOnDomOrder(),this.stopHScrollOnPinnedRows();var a=[oe.TOP_CENTER,oe.TOP_LEFT,oe.TOP_RIGHT],s=[oe.STICKY_TOP_CENTER,oe.STICKY_TOP_LEFT,oe.STICKY_TOP_RIGHT],l=[oe.BOTTOM_CENTER,oe.BOTTOM_LEFT,oe.BOTTOM_RIGHT],u=[oe.CENTER,oe.LEFT,oe.RIGHT],c=Bs(Bs(Bs(Bs([],Vs(a)),Vs(l)),Vs(u)),Vs(s)),d=[oe.CENTER,oe.LEFT,oe.RIGHT,oe.FULL_WIDTH],f=[oe.CENTER,oe.TOP_CENTER,oe.STICKY_TOP_CENTER,oe.BOTTOM_CENTER],y=[oe.LEFT,oe.BOTTOM_LEFT,oe.TOP_LEFT,oe.STICKY_TOP_LEFT],S=[oe.RIGHT,oe.BOTTOM_RIGHT,oe.TOP_RIGHT,oe.STICKY_TOP_RIGHT];this.forContainers(y,function(){o.pinnedWidthFeature=o.createManagedBean(new iO(o.eContainer)),o.addManagedListener(o.eventService,b.EVENT_LEFT_PINNED_WIDTH_CHANGED,function(){return o.onPinnedWidthChanged()})}),this.forContainers(S,function(){o.pinnedWidthFeature=o.createManagedBean(new oO(o.eContainer)),o.addManagedListener(o.eventService,b.EVENT_RIGHT_PINNED_WIDTH_CHANGED,function(){return o.onPinnedWidthChanged()})}),this.forContainers(d,function(){return o.createManagedBean(new zv(o.eContainer,o.name===oe.CENTER?r:void 0))}),this.forContainers(c,function(){return o.createManagedBean(new sO(o.eContainer))}),this.forContainers(f,function(){return o.createManagedBean(new Nd(function(w){return o.comp.setContainerWidth(w+"px")}))}),as()&&(this.forContainers([oe.CENTER],function(){var w=o.enableRtl?b.EVENT_LEFT_PINNED_WIDTH_CHANGED:b.EVENT_RIGHT_PINNED_WIDTH_CHANGED;o.addManagedListener(o.eventService,w,function(){return o.refreshPaddingForFakeScrollbar()})}),this.refreshPaddingForFakeScrollbar()),this.addListeners(),this.registerWithCtrlsService()},i.prototype.refreshPaddingForFakeScrollbar=function(){var e=this,t=e.enableRtl,r=e.columnModel,o=e.eContainer,a=t?oe.LEFT:oe.RIGHT;this.forContainers([oe.CENTER,a],function(){var s=r.getContainerWidth(a),l=t?"marginLeft":"marginRight";o.style[l]=s?"16px":"0px"})},i.prototype.addListeners=function(){var e=this;this.addManagedListener(this.eventService,b.EVENT_DISPLAYED_COLUMNS_CHANGED,function(){return e.onDisplayedColumnsChanged()}),this.addManagedListener(this.eventService,b.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,function(){return e.onDisplayedColumnsWidthChanged()}),this.addManagedListener(this.eventService,b.EVENT_DISPLAYED_ROWS_CHANGED,function(t){return e.onDisplayedRowsChanged(t.afterScroll)}),this.onDisplayedColumnsChanged(),this.onDisplayedColumnsWidthChanged(),this.onDisplayedRowsChanged()},i.prototype.listenOnDomOrder=function(){var e=this,t=[oe.STICKY_TOP_CENTER,oe.STICKY_TOP_LEFT,oe.STICKY_TOP_RIGHT,oe.STICKY_TOP_FULL_WIDTH],r=t.indexOf(this.name)>=0;if(r){this.comp.setDomOrder(!0);return}var o=function(){var a=e.gridOptionsService.is("ensureDomOrder"),s=e.gridOptionsService.isDomLayout("print");e.comp.setDomOrder(a||s)};this.addManagedPropertyListener("domLayout",o),o()},i.prototype.stopHScrollOnPinnedRows=function(){var e=this;this.forContainers([oe.TOP_CENTER,oe.STICKY_TOP_CENTER,oe.BOTTOM_CENTER],function(){var t=function(){return e.eViewport.scrollLeft=0};e.addManagedListener(e.eViewport,"scroll",t)})},i.prototype.onDisplayedColumnsChanged=function(){var e=this;this.forContainers([oe.CENTER],function(){return e.onHorizontalViewportChanged()})},i.prototype.onDisplayedColumnsWidthChanged=function(){var e=this;this.forContainers([oe.CENTER],function(){return e.onHorizontalViewportChanged()})},i.prototype.addPreventScrollWhileDragging=function(){var e=this,t=function(r){e.dragService.isDragging()&&r.cancelable&&r.preventDefault()};this.eContainer.addEventListener("touchmove",t,{passive:!1}),this.addDestroyFunc(function(){return e.eContainer.removeEventListener("touchmove",t)})},i.prototype.onHorizontalViewportChanged=function(e){e===void 0&&(e=!1);var t=this.getCenterWidth(),r=this.getCenterViewportScrollLeft();this.columnModel.setViewportPosition(t,r,e)},i.prototype.getCenterWidth=function(){return Ul(this.eViewport)},i.prototype.getCenterViewportScrollLeft=function(){return us(this.eViewport,this.enableRtl)},i.prototype.registerViewportResizeListener=function(e){var t=this.resizeObserverService.observeResize(this.eViewport,e);this.addDestroyFunc(function(){return t()})},i.prototype.isViewportVisible=function(){return tn(this.eViewport)},i.prototype.getViewportScrollLeft=function(){return us(this.eViewport,this.enableRtl)},i.prototype.isHorizontalScrollShowing=function(){var e=this.gridOptionsService.is("alwaysShowHorizontalScroll");return e||uv(this.eViewport)},i.prototype.getViewportElement=function(){return this.eViewport},i.prototype.setContainerTranslateX=function(e){this.eContainer.style.transform="translateX("+e+"px)"},i.prototype.getHScrollPosition=function(){var e={left:this.eViewport.scrollLeft,right:this.eViewport.scrollLeft+this.eViewport.offsetWidth};return e},i.prototype.setCenterViewportScrollLeft=function(e){cs(this.eViewport,e,this.enableRtl)},i.prototype.isContainerVisible=function(){var e=i.getPinned(this.name);return!e||!!this.pinnedWidthFeature&&this.pinnedWidthFeature.getWidth()>0},i.prototype.onPinnedWidthChanged=function(){var e=this.isContainerVisible();this.visible!=e&&(this.visible=e,this.onDisplayedRowsChanged()),as()&&this.refreshPaddingForFakeScrollbar()},i.prototype.onDisplayedRowsChanged=function(e){var t=this;if(e===void 0&&(e=!1),this.visible){var r=this.gridOptionsService.isDomLayout("print"),o=function(s){var l=s.isFullWidth(),u=t.embedFullWidthRows||r,c=t.isFullWithContainer?!u&&l:u||!l;return c},a=this.getRowCtrls().filter(o);this.comp.setRowCtrls(a,e)}else this.comp.setRowCtrls(this.EMPTY_CTRLS,!1)},i.prototype.getRowCtrls=function(){switch(this.name){case oe.TOP_CENTER:case oe.TOP_LEFT:case oe.TOP_RIGHT:case oe.TOP_FULL_WIDTH:return this.rowRenderer.getTopRowCtrls();case oe.STICKY_TOP_CENTER:case oe.STICKY_TOP_LEFT:case oe.STICKY_TOP_RIGHT:case oe.STICKY_TOP_FULL_WIDTH:return this.rowRenderer.getStickyTopRowCtrls();case oe.BOTTOM_CENTER:case oe.BOTTOM_LEFT:case oe.BOTTOM_RIGHT:case oe.BOTTOM_FULL_WIDTH:return this.rowRenderer.getBottomRowCtrls();default:return this.rowRenderer.getCentreRowCtrls()}},Io([T("scrollVisibleService")],i.prototype,"scrollVisibleService",void 0),Io([T("dragService")],i.prototype,"dragService",void 0),Io([T("ctrlsService")],i.prototype,"ctrlsService",void 0),Io([T("columnModel")],i.prototype,"columnModel",void 0),Io([T("resizeObserverService")],i.prototype,"resizeObserverService",void 0),Io([T("animationFrameService")],i.prototype,"animationFrameService",void 0),Io([T("rowRenderer")],i.prototype,"rowRenderer",void 0),Io([Oe],i.prototype,"postConstruct",null),i}(ve),fO=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),mo=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},hO=`<div class="ag-root ag-unselectable" role="treegrid">
        <ag-header-root ref="gridHeader"></ag-header-root>
        <div class="ag-floating-top" ref="eTop" role="presentation">
            <ag-row-container ref="topLeftContainer" name="`+oe.TOP_LEFT+`"></ag-row-container>
            <ag-row-container ref="topCenterContainer" name="`+oe.TOP_CENTER+`"></ag-row-container>
            <ag-row-container ref="topRightContainer" name="`+oe.TOP_RIGHT+`"></ag-row-container>
            <ag-row-container ref="topFullWidthContainer" name="`+oe.TOP_FULL_WIDTH+`"></ag-row-container>
        </div>
        <div class="ag-body" ref="eBody" role="presentation">
            <div class="ag-body-viewport" ref="eBodyViewport" role="presentation">
                <ag-row-container ref="leftContainer" name="`+oe.LEFT+`"></ag-row-container>
                <ag-row-container ref="centerContainer" name="`+oe.CENTER+`"></ag-row-container>
                <ag-row-container ref="rightContainer" name="`+oe.RIGHT+`"></ag-row-container>
                <ag-row-container ref="fullWidthContainer" name="`+oe.FULL_WIDTH+`"></ag-row-container>
            </div>
            <ag-fake-vertical-scroll></ag-fake-vertical-scroll>
        </div>
        <div class="ag-sticky-top" ref="eStickyTop" role="presentation">
            <ag-row-container ref="stickyTopLeftContainer" name="`+oe.STICKY_TOP_LEFT+`"></ag-row-container>
            <ag-row-container ref="stickyTopCenterContainer" name="`+oe.STICKY_TOP_CENTER+`"></ag-row-container>
            <ag-row-container ref="stickyTopRightContainer" name="`+oe.STICKY_TOP_RIGHT+`"></ag-row-container>
            <ag-row-container ref="stickyTopFullWidthContainer" name="`+oe.STICKY_TOP_FULL_WIDTH+`"></ag-row-container>
        </div>
        <div class="ag-floating-bottom" ref="eBottom" role="presentation">
            <ag-row-container ref="bottomLeftContainer" name="`+oe.BOTTOM_LEFT+`"></ag-row-container>
            <ag-row-container ref="bottomCenterContainer" name="`+oe.BOTTOM_CENTER+`"></ag-row-container>
            <ag-row-container ref="bottomRightContainer" name="`+oe.BOTTOM_RIGHT+`"></ag-row-container>
            <ag-row-container ref="bottomFullWidthContainer" name="`+oe.BOTTOM_FULL_WIDTH+`"></ag-row-container>
        </div>
        <ag-fake-horizontal-scroll></ag-fake-horizontal-scroll>
        <ag-overlay-wrapper></ag-overlay-wrapper>
    </div>`,vO=function(n){fO(i,n);function i(){return n.call(this,hO)||this}return i.prototype.init=function(){var e=this,t=function(o,a){var s=o+"px";a.style.minHeight=s,a.style.height=s},r={setRowAnimationCssOnBodyViewport:function(o,a){return e.setRowAnimationCssOnBodyViewport(o,a)},setColumnCount:function(o){return Qh(e.getGui(),o)},setRowCount:function(o){return Kh(e.getGui(),o)},setTopHeight:function(o){return t(o,e.eTop)},setBottomHeight:function(o){return t(o,e.eBottom)},setTopDisplay:function(o){return e.eTop.style.display=o},setBottomDisplay:function(o){return e.eBottom.style.display=o},setStickyTopHeight:function(o){return e.eStickyTop.style.height=o},setStickyTopTop:function(o){return e.eStickyTop.style.top=o},setStickyTopWidth:function(o){return e.eStickyTop.style.width=o},setColumnMovingCss:function(o,a){return e.addOrRemoveCssClass(o,a)},updateLayoutClasses:function(o,a){var s=[e.eBodyViewport.classList,e.eBody.classList];s.forEach(function(l){l.toggle(Fi.AUTO_HEIGHT,a.autoHeight),l.toggle(Fi.NORMAL,a.normal),l.toggle(Fi.PRINT,a.print)}),e.addOrRemoveCssClass(Fi.AUTO_HEIGHT,a.autoHeight),e.addOrRemoveCssClass(Fi.NORMAL,a.normal),e.addOrRemoveCssClass(Fi.PRINT,a.print)},setAlwaysVerticalScrollClass:function(o,a){return e.eBodyViewport.classList.toggle(Uv,a)},registerBodyViewportResizeListener:function(o){var a=e.resizeObserverService.observeResize(e.eBodyViewport,o);e.addDestroyFunc(function(){return a()})},setPinnedTopBottomOverflowY:function(o){return e.eTop.style.overflowY=e.eBottom.style.overflowY=o},setCellSelectableCss:function(o,a){[e.eTop,e.eBodyViewport,e.eBottom].forEach(function(s){return s.classList.toggle(o,a)})},setBodyViewportWidth:function(o){return e.eBodyViewport.style.width=o}};this.ctrl=this.createManagedBean(new hT),this.ctrl.setComp(r,this.getGui(),this.eBodyViewport,this.eTop,this.eBottom,this.eStickyTop),(this.rangeService||this.gridOptionsService.get("rowSelection")==="multiple")&&Yh(this.getGui(),!0)},i.prototype.setRowAnimationCssOnBodyViewport=function(e,t){var r=this.eBodyViewport.classList;r.toggle(aa.ANIMATION_ON,t),r.toggle(aa.ANIMATION_OFF,!t)},i.prototype.getFloatingTopBottom=function(){return[this.eTop,this.eBottom]},mo([T("resizeObserverService")],i.prototype,"resizeObserverService",void 0),mo([Zt("rangeService")],i.prototype,"rangeService",void 0),mo([be("eBodyViewport")],i.prototype,"eBodyViewport",void 0),mo([be("eStickyTop")],i.prototype,"eStickyTop",void 0),mo([be("eTop")],i.prototype,"eTop",void 0),mo([be("eBottom")],i.prototype,"eBottom",void 0),mo([be("gridHeader")],i.prototype,"headerRootComp",void 0),mo([be("eBody")],i.prototype,"eBody",void 0),mo([Oe],i.prototype,"init",null),i}(xt),gO=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),zu=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},yO=function(n){gO(i,n);function i(){return n!==null&&n.apply(this,arguments)||this}return i.prototype.postConstruct=function(){this.addManagedListener(this.eventService,b.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(this.eventService,b.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,this.onDisplayedColumnsWidthChanged.bind(this))},i.prototype.onDisplayedColumnsChanged=function(){this.update()},i.prototype.onDisplayedColumnsWidthChanged=function(){this.update()},i.prototype.update=function(){this.updateImpl(),setTimeout(this.updateImpl.bind(this),500)},i.prototype.updateImpl=function(){var e=this.ctrlsService.getCenterRowContainerCtrl();if(e){var t={horizontalScrollShowing:e.isHorizontalScrollShowing(),verticalScrollShowing:this.isVerticalScrollShowing()};this.setScrollsVisible(t)}},i.prototype.setScrollsVisible=function(e){var t=this.horizontalScrollShowing!==e.horizontalScrollShowing||this.verticalScrollShowing!==e.verticalScrollShowing;if(t){this.horizontalScrollShowing=e.horizontalScrollShowing,this.verticalScrollShowing=e.verticalScrollShowing;var r={type:b.EVENT_SCROLL_VISIBILITY_CHANGED};this.eventService.dispatchEvent(r)}},i.prototype.isHorizontalScrollShowing=function(){return this.horizontalScrollShowing},i.prototype.isVerticalScrollShowing=function(){return this.verticalScrollShowing},zu([T("ctrlsService")],i.prototype,"ctrlsService",void 0),zu([Oe],i.prototype,"postConstruct",null),i=zu([Ue("scrollVisibleService")],i),i}(ve),mO=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),$p=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},CO=function(n){mO(i,n);function i(){var t=n!==null&&n.apply(this,arguments)||this;return t.gridInstanceId=e.gridInstanceSequence.next(),t}e=i,i.prototype.stampTopLevelGridCompWithGridInstance=function(t){t[e.GRID_DOM_KEY]=this.gridInstanceId},i.prototype.getRenderedCellForEvent=function(t){return vl(this.gridOptionsService,t.target,En.DOM_DATA_KEY_CELL_CTRL)},i.prototype.isEventFromThisGrid=function(t){var r=this.isElementInThisGrid(t.target);return r},i.prototype.isElementInThisGrid=function(t){for(var r=t;r;){var o=r[e.GRID_DOM_KEY];if(ue(o)){var a=o===this.gridInstanceId;return a}r=r.parentElement}return!1},i.prototype.getCellPositionForEvent=function(t){var r=this.getRenderedCellForEvent(t);return r?r.getCellPosition():null},i.prototype.getNormalisedPosition=function(t){var r=this.gridOptionsService.isDomLayout("normal"),o=t,a,s;if(o.clientX!=null||o.clientY!=null?(a=o.clientX,s=o.clientY):(a=o.x,s=o.y),r){var l=this.ctrlsService.getGridBodyCtrl(),u=l.getScrollFeature().getVScrollPosition(),c=l.getScrollFeature().getHScrollPosition();a+=c.left,s+=u.top}return{x:a,y:s}};var e;return i.gridInstanceSequence=new oa,i.GRID_DOM_KEY="__ag_grid_instance",$p([T("ctrlsService")],i.prototype,"ctrlsService",void 0),i=e=$p([Ue("mouseEventService")],i),i}(ve),SO=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Rl=function(){return Rl=Object.assign||function(n){for(var i,e=1,t=arguments.length;e<t;e++){i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(n[r]=i[r])}return n},Rl.apply(this,arguments)},sr=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},wO=function(n){SO(i,n);function i(){var e=n.call(this)||this;return e.onPageDown=xc(e.onPageDown,100),e.onPageUp=xc(e.onPageUp,100),e}return i.prototype.postConstruct=function(){var e=this;this.ctrlsService.whenReady(function(t){e.gridBodyCon=t.gridBodyCtrl})},i.prototype.handlePageScrollingKey=function(e,t){t===void 0&&(t=!1);var r=e.key,o=e.altKey,a=e.ctrlKey||e.metaKey,s=!!this.rangeService&&e.shiftKey,l=this.mouseEventService.getCellPositionForEvent(e),u=!1;switch(r){case J.PAGE_HOME:case J.PAGE_END:!a&&!o&&(this.onHomeOrEndKey(r),u=!0);break;case J.LEFT:case J.RIGHT:case J.UP:case J.DOWN:if(!l)return!1;a&&!o&&!s&&(this.onCtrlUpDownLeftRight(r,l),u=!0);break;case J.PAGE_DOWN:case J.PAGE_UP:!a&&!o&&(u=this.handlePageUpDown(r,l,t));break}return u&&e.preventDefault(),u},i.prototype.handlePageUpDown=function(e,t,r){return r&&(t=this.focusService.getFocusedCell()),t?(e===J.PAGE_UP?this.onPageUp(t):this.onPageDown(t),!0):!1},i.prototype.navigateTo=function(e){var t=e.scrollIndex,r=e.scrollType,o=e.scrollColumn,a=e.focusIndex,s=e.focusColumn;if(ue(o)&&!o.isPinned()&&this.gridBodyCon.getScrollFeature().ensureColumnVisible(o),ue(t)&&this.gridBodyCon.getScrollFeature().ensureIndexVisible(t,r),e.isAsync||this.gridBodyCon.getScrollFeature().ensureIndexVisible(a),this.focusService.setFocusedCell({rowIndex:a,column:s,rowPinned:null,forceBrowserFocus:!0}),this.rangeService){var l={rowIndex:a,rowPinned:null,column:s};this.rangeService.setRangeToCell(l)}},i.prototype.onPageDown=function(e){var t=this.ctrlsService.getGridBodyCtrl(),r=t.getScrollFeature().getVScrollPosition(),o=this.getViewportHeight(),a=this.paginationProxy.getPixelOffset(),s=r.top+o,l=this.paginationProxy.getRowIndexAtPixel(s+a);this.columnModel.isAutoRowHeightActive()?this.navigateToNextPageWithAutoHeight(e,l):this.navigateToNextPage(e,l)},i.prototype.onPageUp=function(e){var t=this.ctrlsService.getGridBodyCtrl(),r=t.getScrollFeature().getVScrollPosition(),o=this.paginationProxy.getPixelOffset(),a=r.top,s=this.paginationProxy.getRowIndexAtPixel(a+o);this.columnModel.isAutoRowHeightActive()?this.navigateToNextPageWithAutoHeight(e,s,!0):this.navigateToNextPage(e,s,!0)},i.prototype.navigateToNextPage=function(e,t,r){r===void 0&&(r=!1);var o=this.getViewportHeight(),a=this.paginationProxy.getPageFirstRow(),s=this.paginationProxy.getPageLastRow(),l=this.paginationProxy.getPixelOffset(),u=this.paginationProxy.getRow(e.rowIndex),c=r?u?.rowHeight-o-l:o-l,d=u?.rowTop+c,f=this.paginationProxy.getRowIndexAtPixel(d+l);if(f===e.rowIndex){var y=r?-1:1;t=f=e.rowIndex+y}var S;r?(S="bottom",f<a&&(f=a),t<a&&(t=a)):(S="top",f>s&&(f=s),t>s&&(t=s)),this.isRowTallerThanView(f)&&(t=f,S="top"),this.navigateTo({scrollIndex:t,scrollType:S,scrollColumn:null,focusIndex:f,focusColumn:e.column})},i.prototype.navigateToNextPageWithAutoHeight=function(e,t,r){var o=this;r===void 0&&(r=!1),this.navigateTo({scrollIndex:t,scrollType:r?"bottom":"top",scrollColumn:null,focusIndex:t,focusColumn:e.column}),setTimeout(function(){var a=o.getNextFocusIndexForAutoHeight(e,r);o.navigateTo({scrollIndex:t,scrollType:r?"bottom":"top",scrollColumn:null,focusIndex:a,focusColumn:e.column,isAsync:!0})},50)},i.prototype.getNextFocusIndexForAutoHeight=function(e,t){var r;t===void 0&&(t=!1);for(var o=t?-1:1,a=this.getViewportHeight(),s=this.paginationProxy.getPageLastRow(),l=0,u=e.rowIndex;u>=0&&u<=s;){var c=this.paginationProxy.getRow(u);if(c){var d=(r=c.rowHeight)!==null&&r!==void 0?r:0;if(l+d>a)break;l+=d}u+=o}return Math.max(0,Math.min(u,s))},i.prototype.getViewportHeight=function(){var e=this.ctrlsService.getGridBodyCtrl(),t=e.getScrollFeature().getVScrollPosition(),r=this.gridOptionsService.getScrollbarWidth(),o=t.bottom-t.top;return this.ctrlsService.getCenterRowContainerCtrl().isHorizontalScrollShowing()&&(o-=r),o},i.prototype.isRowTallerThanView=function(e){var t=this.paginationProxy.getRow(e);if(!t)return!1;var r=t.rowHeight;return typeof r!="number"?!1:r>this.getViewportHeight()},i.prototype.onCtrlUpDownLeftRight=function(e,t){var r=this.cellNavigationService.getNextCellToFocus(e,t,!0),o=r.rowIndex,a=r.column;this.navigateTo({scrollIndex:o,scrollType:null,scrollColumn:a,focusIndex:o,focusColumn:a})},i.prototype.onHomeOrEndKey=function(e){var t=e===J.PAGE_HOME,r=this.columnModel.getAllDisplayedColumns(),o=t?r[0]:ai(r),a=t?this.paginationProxy.getPageFirstRow():this.paginationProxy.getPageLastRow();this.navigateTo({scrollIndex:a,scrollType:null,scrollColumn:o,focusIndex:a,focusColumn:o})},i.prototype.onTabKeyDown=function(e,t){var r=t.shiftKey,o=this.tabToNextCellCommon(e,r,t);if(o){t.preventDefault();return}if(r){var a=e.getRowPosition(),s=a.rowIndex,l=a.rowPinned,u=l?s===0:s===this.paginationProxy.getPageFirstRow();u&&(this.gridOptionsService.getNum("headerHeight")===0?this.focusService.focusNextGridCoreContainer(!0,!0):(t.preventDefault(),this.focusService.focusPreviousFromFirstCell(t)))}else e instanceof En&&e.focusCell(!0),this.focusService.focusNextGridCoreContainer(r)&&t.preventDefault()},i.prototype.tabToNextCell=function(e,t){var r=this.focusService.getFocusedCell();if(!r)return!1;var o=this.getCellByPosition(r);return!o&&(o=this.rowRenderer.getRowByPosition(r),!o||!o.isFullWidth())?!1:this.tabToNextCellCommon(o,e,t)},i.prototype.tabToNextCellCommon=function(e,t,r){var o=e.isEditing();if(!o&&e instanceof En){var a=e,s=a.getRowCtrl();s&&(o=s.isEditing())}var l;return o?this.gridOptionsService.get("editType")==="fullRow"?l=this.moveToNextEditingRow(e,t,r):l=this.moveToNextEditingCell(e,t,r):l=this.moveToNextCellNotEditing(e,t),l||!!this.focusService.getFocusedHeader()},i.prototype.moveToNextEditingCell=function(e,t,r){r===void 0&&(r=null);var o=e.getCellPosition();e.getGui().focus(),e.stopEditing();var a=this.findNextCellToFocusOn(o,t,!0);return a==null?!1:(a.startEditing(null,!0,r),a.focusCell(!1),!0)},i.prototype.moveToNextEditingRow=function(e,t,r){r===void 0&&(r=null);var o=e.getCellPosition(),a=this.findNextCellToFocusOn(o,t,!0);if(a==null)return!1;var s=a.getCellPosition(),l=this.isCellEditable(o),u=this.isCellEditable(s),c=s&&o.rowIndex===s.rowIndex&&o.rowPinned===s.rowPinned;if(l&&e.setFocusOutOnEditor(),!c){var d=e.getRowCtrl();d.stopEditing();var f=a.getRowCtrl();f.startRowEditing(void 0,void 0,r)}return u?(a.setFocusInOnEditor(),a.focusCell()):a.focusCell(!0),!0},i.prototype.moveToNextCellNotEditing=function(e,t){var r=this.columnModel.getAllDisplayedColumns(),o;e instanceof _n?o=Rl(Rl({},e.getRowPosition()),{column:t?r[0]:ai(r)}):o=e.getCellPosition();var a=this.findNextCellToFocusOn(o,t,!1);if(a instanceof En)a.focusCell(!0);else if(a)return this.tryToFocusFullWidthRow(a.getRowPosition(),t);return ue(a)},i.prototype.findNextCellToFocusOn=function(e,t,r){for(var o=e;;){e!==o&&(e=o),t||(o=this.getLastCellOfColSpan(o)),o=this.cellNavigationService.getNextTabbedCell(o,t);var a=this.gridOptionsService.getCallback("tabToNextCell");if(ue(a)){var s={backwards:t,editing:r,previousCellPosition:e,nextCellPosition:o||null},l=a(s);ue(l)?(l.floating&&(Ut(function(){console.warn("AG Grid: tabToNextCellFunc return type should have attributes: rowIndex, rowPinned, column. However you had 'floating', maybe you meant 'rowPinned'?")},"no floating in userCell"),l.rowPinned=l.floating),o={rowIndex:l.rowIndex,column:l.column,rowPinned:l.rowPinned}):o=null}if(!o)return null;if(o.rowIndex<0){var u=this.headerNavigationService.getHeaderRowCount();return this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:u+o.rowIndex,column:o.column},fromCell:!0}),null}var c=this.gridOptionsService.get("editType")==="fullRow";if(r&&!c){var d=this.isCellEditable(o);if(!d)continue}this.ensureCellVisible(o);var f=this.getCellByPosition(o);if(!f){var y=this.rowRenderer.getRowByPosition(o);if(!y||!y.isFullWidth()||r)continue;return y}if(!f.isSuppressNavigable())return this.rangeService&&this.rangeService.setRangeToCell(o),f}},i.prototype.isCellEditable=function(e){var t=this.lookupRowNodeForCell(e);return t?e.column.isCellEditable(t):!1},i.prototype.getCellByPosition=function(e){var t=this.rowRenderer.getRowByPosition(e);return t?t.getCellCtrl(e.column):null},i.prototype.lookupRowNodeForCell=function(e){return e.rowPinned==="top"?this.pinnedRowModel.getPinnedTopRow(e.rowIndex):e.rowPinned==="bottom"?this.pinnedRowModel.getPinnedBottomRow(e.rowIndex):this.paginationProxy.getRow(e.rowIndex)},i.prototype.navigateToNextCell=function(e,t,r,o){for(var a=r,s=!1;a&&(a===r||!this.isValidNavigateCell(a));)this.gridOptionsService.is("enableRtl")?t===J.LEFT&&(a=this.getLastCellOfColSpan(a)):t===J.RIGHT&&(a=this.getLastCellOfColSpan(a)),a=this.cellNavigationService.getNextCellToFocus(t,a),s=vt(a);if(s&&e&&e.key===J.UP&&(a={rowIndex:-1,rowPinned:null,column:r.column}),o){var l=this.gridOptionsService.getCallback("navigateToNextCell");if(ue(l)){var u={key:t,previousCellPosition:r,nextCellPosition:a||null,event:e},c=l(u);ue(c)?(c.floating&&(Ut(function(){console.warn("AG Grid: tabToNextCellFunc return type should have attributes: rowIndex, rowPinned, column. However you had 'floating', maybe you meant 'rowPinned'?")},"no floating in userCell"),c.rowPinned=c.floating),a={rowPinned:c.rowPinned,rowIndex:c.rowIndex,column:c.column}):a=null}}if(a){if(a.rowIndex<0){var d=this.headerNavigationService.getHeaderRowCount();this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:d+a.rowIndex,column:r.column},event:e||void 0,fromCell:!0});return}var f=this.getNormalisedPosition(a);f?this.focusPosition(f):this.tryToFocusFullWidthRow(a)}},i.prototype.getNormalisedPosition=function(e){this.ensureCellVisible(e);var t=this.getCellByPosition(e);return t?(e=t.getCellPosition(),this.ensureCellVisible(e),e):null},i.prototype.tryToFocusFullWidthRow=function(e,t){t===void 0&&(t=!1);var r=this.columnModel.getAllDisplayedColumns(),o=this.rowRenderer.getRowByPosition(e);if(!o||!o.isFullWidth())return!1;var a=this.focusService.getFocusedCell(),s={rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:e.column||(t?ai(r):r[0])};this.focusPosition(s);var l=a!=null?this.rowPositionUtils.before(s,a):!1,u={type:b.EVENT_FULL_WIDTH_ROW_FOCUSED,rowIndex:s.rowIndex,rowPinned:s.rowPinned,column:s.column,isFullWidthCell:!0,floating:s.rowPinned,fromBelow:l};return this.eventService.dispatchEvent(u),!0},i.prototype.focusPosition=function(e){this.focusService.setFocusedCell({rowIndex:e.rowIndex,column:e.column,rowPinned:e.rowPinned,forceBrowserFocus:!0}),this.rangeService&&this.rangeService.setRangeToCell(e)},i.prototype.isValidNavigateCell=function(e){var t=this.rowPositionUtils.getRowNode(e);return!!t},i.prototype.getLastCellOfColSpan=function(e){var t=this.getCellByPosition(e);if(!t)return e;var r=t.getColSpanningList();return r.length===1?e:{rowIndex:e.rowIndex,column:ai(r),rowPinned:e.rowPinned}},i.prototype.ensureCellVisible=function(e){var t=this.gridOptionsService.isGroupRowsSticky(),r=this.rowModel.getRow(e.rowIndex),o=t&&r?.sticky;!o&&vt(e.rowPinned)&&this.gridBodyCon.getScrollFeature().ensureIndexVisible(e.rowIndex),e.column.isPinned()||this.gridBodyCon.getScrollFeature().ensureColumnVisible(e.column)},sr([T("mouseEventService")],i.prototype,"mouseEventService",void 0),sr([T("paginationProxy")],i.prototype,"paginationProxy",void 0),sr([T("focusService")],i.prototype,"focusService",void 0),sr([Zt("rangeService")],i.prototype,"rangeService",void 0),sr([T("columnModel")],i.prototype,"columnModel",void 0),sr([T("rowModel")],i.prototype,"rowModel",void 0),sr([T("ctrlsService")],i.prototype,"ctrlsService",void 0),sr([T("rowRenderer")],i.prototype,"rowRenderer",void 0),sr([T("headerNavigationService")],i.prototype,"headerNavigationService",void 0),sr([T("rowPositionUtils")],i.prototype,"rowPositionUtils",void 0),sr([T("cellNavigationService")],i.prototype,"cellNavigationService",void 0),sr([T("pinnedRowModel")],i.prototype,"pinnedRowModel",void 0),sr([Oe],i.prototype,"postConstruct",null),i=sr([Ue("navigationService")],i),i}(ve),TO=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),OO=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},PO=function(n){TO(i,n);function i(e){var t=n.call(this,'<div class="ag-popup-editor" tabindex="-1"/>')||this;return t.params=e,t}return i.prototype.postConstruct=function(){this.gridOptionsService.setDomData(this.getGui(),i.DOM_KEY_POPUP_EDITOR_WRAPPER,!0),this.addKeyDownListener()},i.prototype.addKeyDownListener=function(){var e=this,t=this.getGui(),r=this.params,o=function(a){ml(e.gridOptionsService,a,r.node,r.column,!0)||r.onKeyDown(a)};this.addManagedListener(t,"keydown",o)},i.DOM_KEY_POPUP_EDITOR_WRAPPER="popupEditorWrapper",OO([Oe],i.prototype,"postConstruct",null),i}(xn),EO=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),_O=function(n){EO(i,n);function i(e,t,r,o,a){var s=n.call(this)||this;s.rendererVersion=0,s.editorVersion=0,s.beans=e,s.column=t.getColumn(),s.rowNode=t.getRowNode(),s.rowCtrl=t.getRowCtrl(),s.eRow=o,s.cellCtrl=t,s.setTemplate('<div comp-id="'+s.getCompId()+'"/>');var l=s.getGui();s.forceWrapper=t.isForceWrapper(),s.refreshWrapper(!1);var u=function(f,y){y!=null&&y!=""?l.setAttribute(f,y):l.removeAttribute(f)};Wi(l,"gridcell"),u("col-id",t.getColumnIdSanitised());var c=t.getTabIndex();c!==void 0&&u("tabindex",c.toString());var d={addOrRemoveCssClass:function(f,y){return s.addOrRemoveCssClass(f,y)},setUserStyles:function(f){return Sd(l,f)},getFocusableElement:function(){return s.getFocusableElement()},setIncludeSelection:function(f){return s.includeSelection=f},setIncludeRowDrag:function(f){return s.includeRowDrag=f},setIncludeDndSource:function(f){return s.includeDndSource=f},setRenderDetails:function(f,y,S){return s.setRenderDetails(f,y,S)},setEditDetails:function(f,y,S){return s.setEditDetails(f,y,S)},getCellEditor:function(){return s.cellEditor||null},getCellRenderer:function(){return s.cellRenderer||null},getParentOfValue:function(){return s.getParentOfValue()}};return t.setComp(d,s.getGui(),s.eCellWrapper,r,a),s}return i.prototype.getParentOfValue=function(){return this.eCellValue?this.eCellValue:this.eCellWrapper?this.eCellWrapper:this.getGui()},i.prototype.setRenderDetails=function(e,t,r){var o=this.cellEditor&&!this.cellEditorPopupWrapper;if(!o){this.firstRender=this.firstRender==null;var a=this.refreshWrapper(!1);if(this.refreshEditStyles(!1),e){var s=r||a,l=s?!1:this.refreshCellRenderer(e);l||(this.destroyRenderer(),this.createCellRendererInstance(e))}else this.destroyRenderer(),this.insertValueWithoutCellRenderer(t)}},i.prototype.setEditDetails=function(e,t,r){e?this.createCellEditorInstance(e,t,r):this.destroyEditor()},i.prototype.removeControls=function(){this.checkboxSelectionComp=this.beans.context.destroyBean(this.checkboxSelectionComp),this.dndSourceComp=this.beans.context.destroyBean(this.dndSourceComp),this.rowDraggingComp=this.beans.context.destroyBean(this.rowDraggingComp)},i.prototype.refreshWrapper=function(e){var t=this.includeRowDrag||this.includeDndSource||this.includeSelection,r=t||this.forceWrapper,o=r&&this.eCellWrapper==null;o&&(this.eCellWrapper=Ji('<div class="ag-cell-wrapper" role="presentation"></div>'),this.getGui().appendChild(this.eCellWrapper));var a=!r&&this.eCellWrapper!=null;a&&(wo(this.eCellWrapper),this.eCellWrapper=void 0),this.addOrRemoveCssClass("ag-cell-value",!r);var s=!e&&r,l=s&&this.eCellValue==null;l&&(this.eCellValue=Ji('<span class="ag-cell-value" role="presentation"></span>'),this.eCellWrapper.appendChild(this.eCellValue));var u=!s&&this.eCellValue!=null;u&&(wo(this.eCellValue),this.eCellValue=void 0);var c=o||a||l||u;return c&&this.removeControls(),e||t&&this.addControls(),c},i.prototype.addControls=function(){this.includeRowDrag&&this.rowDraggingComp==null&&(this.rowDraggingComp=this.cellCtrl.createRowDragComp(),this.rowDraggingComp&&this.eCellWrapper.insertBefore(this.rowDraggingComp.getGui(),this.eCellValue)),this.includeDndSource&&this.dndSourceComp==null&&(this.dndSourceComp=this.cellCtrl.createDndSource(),this.eCellWrapper.insertBefore(this.dndSourceComp.getGui(),this.eCellValue)),this.includeSelection&&this.checkboxSelectionComp==null&&(this.checkboxSelectionComp=this.cellCtrl.createSelectionCheckbox(),this.eCellWrapper.insertBefore(this.checkboxSelectionComp.getGui(),this.eCellValue))},i.prototype.createCellEditorInstance=function(e,t,r){var o=this,a=this.editorVersion,s=e.newAgStackInstance();if(s){var l=e.params;s.then(function(c){return o.afterCellEditorCreated(a,c,l,t,r)});var u=vt(this.cellEditor);u&&l.cellStartedEdit&&this.cellCtrl.focusCell(!0)}},i.prototype.insertValueWithoutCellRenderer=function(e){var t=this.getParentOfValue();tr(t);var r=e!=null?Ii(e):null;r!=null&&(t.innerHTML=r)},i.prototype.destroyEditorAndRenderer=function(){this.destroyRenderer(),this.destroyEditor()},i.prototype.destroyRenderer=function(){var e=this.beans.context;this.cellRenderer=e.destroyBean(this.cellRenderer),wo(this.cellRendererGui),this.cellRendererGui=null,this.rendererVersion++},i.prototype.destroyEditor=function(){var e=this.beans.context;this.hideEditorPopup&&this.hideEditorPopup(),this.hideEditorPopup=void 0,this.cellEditor=e.destroyBean(this.cellEditor),this.cellEditorPopupWrapper=e.destroyBean(this.cellEditorPopupWrapper),wo(this.cellEditorGui),this.cellEditorGui=null,this.editorVersion++},i.prototype.refreshCellRenderer=function(e){if(this.cellRenderer==null||this.cellRenderer.refresh==null||this.cellRendererClass!==e.componentClass)return!1;var t=this.cellRenderer.refresh(e.params);return t===!0||t===void 0},i.prototype.createCellRendererInstance=function(e){var t=this,r=this.beans.gridOptionsService.is("suppressAnimationFrame"),o=!r,a=this.rendererVersion,s=e.componentClass,l=function(){var u=t.rendererVersion!==a||!t.isAlive();if(!u){var c=e.newAgStackInstance(),d=t.afterCellRendererCreated.bind(t,a,s);c&&c.then(d)}};o&&this.firstRender?this.beans.animationFrameService.createTask(l,this.rowNode.rowIndex,"createTasksP2"):l()},i.prototype.getCtrl=function(){return this.cellCtrl},i.prototype.getRowCtrl=function(){return this.rowCtrl},i.prototype.getCellRenderer=function(){return this.cellRenderer},i.prototype.getCellEditor=function(){return this.cellEditor},i.prototype.afterCellRendererCreated=function(e,t,r){var o=!this.isAlive()||e!==this.rendererVersion;if(o){this.beans.context.destroyBean(r);return}if(this.cellRenderer=r,this.cellRendererClass=t,this.cellRendererGui=this.cellRenderer.getGui(),this.cellRendererGui!=null){var a=this.getParentOfValue();tr(a),a.appendChild(this.cellRendererGui)}},i.prototype.afterCellEditorCreated=function(e,t,r,o,a){var s=e!==this.editorVersion;if(s){this.beans.context.destroyBean(t);return}var l=t.isCancelBeforeStart&&t.isCancelBeforeStart();if(l){this.beans.context.destroyBean(t),this.cellCtrl.stopEditing(!0);return}if(!t.getGui){console.warn("AG Grid: cellEditor for column "+this.column.getId()+" is missing getGui() method"),this.beans.context.destroyBean(t);return}this.cellEditor=t,this.cellEditorGui=t.getGui();var u=o||t.isPopup!==void 0&&t.isPopup();u?this.addPopupCellEditor(r,a):this.addInCellEditor(),this.refreshEditStyles(!0,u),t.afterGuiAttached&&t.afterGuiAttached()},i.prototype.refreshEditStyles=function(e,t){var r;this.addOrRemoveCssClass("ag-cell-inline-editing",e&&!t),this.addOrRemoveCssClass("ag-cell-popup-editing",e&&!!t),this.addOrRemoveCssClass("ag-cell-not-inline-editing",!e||!!t),(r=this.rowCtrl)===null||r===void 0||r.setInlineEditingCss(e)},i.prototype.addInCellEditor=function(){var e=this.getGui(),t=this.beans.gridOptionsService.getDocument();if(e.contains(t.activeElement)&&e.focus(),this.destroyRenderer(),this.refreshWrapper(!0),this.clearParentOfValue(),this.cellEditorGui){var r=this.getParentOfValue();r.appendChild(this.cellEditorGui)}},i.prototype.addPopupCellEditor=function(e,t){var r=this;this.beans.gridOptionsService.get("editType")==="fullRow"&&console.warn("AG Grid: popup cellEditor does not work with fullRowEdit - you cannot use them both - either turn off fullRowEdit, or stop using popup editors.");var o=this.cellEditor;this.cellEditorPopupWrapper=this.beans.context.createBean(new PO(e));var a=this.cellEditorPopupWrapper.getGui();this.cellEditorGui&&a.appendChild(this.cellEditorGui);var s=this.beans.popupService,l=this.beans.gridOptionsService.is("stopEditingWhenCellsLoseFocus"),u=t??(o.getPopupPosition?o.getPopupPosition():"over"),c=this.beans.gridOptionsService.is("enableRtl"),d={ePopup:a,column:this.column,rowNode:this.rowNode,type:"popupCellEditor",eventSource:this.getGui(),position:u,alignSide:c?"right":"left",keepWithinBounds:!0},f=s.positionPopupByComponent.bind(s,d),y=this.beans.localeService.getLocaleTextFunc(),S=s.addPopup({modal:l,eChild:a,closeOnEsc:!0,closedCallback:function(){r.cellCtrl.onPopupEditorClosed()},anchorToElement:this.getGui(),positionCallback:f,ariaLabel:y("ariaLabelCellEditor","Cell Editor")});S&&(this.hideEditorPopup=S.hideFunc)},i.prototype.detach=function(){this.eRow.removeChild(this.getGui())},i.prototype.destroy=function(){this.cellCtrl.stopEditing(),this.destroyEditorAndRenderer(),this.removeControls(),n.prototype.destroy.call(this)},i.prototype.clearParentOfValue=function(){var e=this.getGui(),t=this.beans.gridOptionsService.getDocument();e.contains(t.activeElement)&&Wl()&&e.focus({preventScroll:!0}),tr(this.getParentOfValue())},i}(xt),bO=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),DO=function(n){bO(i,n);function i(e,t,r){var o=n.call(this)||this;o.cellComps={},o.beans=t,o.rowCtrl=e,o.setTemplate('<div comp-id="'+o.getCompId()+'" style="'+o.getInitialStyle(r)+'"/>');var a=o.getGui(),s=a.style;o.domOrder=o.rowCtrl.getDomOrder(),Wi(a,"row");var l=o.rowCtrl.getTabIndex();l!=null&&a.setAttribute("tabindex",l.toString());var u={setDomOrder:function(c){return o.domOrder=c},setCellCtrls:function(c){return o.setCellCtrls(c)},showFullWidth:function(c){return o.showFullWidth(c)},getFullWidthCellRenderer:function(){return o.getFullWidthCellRenderer()},addOrRemoveCssClass:function(c,d){return o.addOrRemoveCssClass(c,d)},setUserStyles:function(c){return Sd(a,c)},setTop:function(c){return s.top=c},setTransform:function(c){return s.transform=c},setRowIndex:function(c){return a.setAttribute("row-index",c)},setRowId:function(c){return a.setAttribute("row-id",c)},setRowBusinessKey:function(c){return a.setAttribute("row-business-key",c)}};return e.setComp(u,o.getGui(),r),o.addDestroyFunc(function(){e.unsetComp(r)}),o}return i.prototype.getInitialStyle=function(e){var t=this.rowCtrl.getInitialTransform(e),r=this.rowCtrl.getInitialRowTop(e);return t?"transform: "+t:"top: "+r},i.prototype.showFullWidth=function(e){var t=this,r=function(a){if(t.isAlive()){var s=a.getGui();t.getGui().appendChild(s),t.rowCtrl.setupDetailRowAutoHeight(s),t.setFullWidthRowComp(a)}else t.beans.context.destroyBean(a)},o=e.newAgStackInstance();o&&o.then(r)},i.prototype.setCellCtrls=function(e){var t=this,r=Object.assign({},this.cellComps);e.forEach(function(a){var s=a.getInstanceId(),l=t.cellComps[s];l==null?t.newCellComp(a):r[s]=null});var o=lo(r).filter(function(a){return a!=null});this.destroyCells(o),this.ensureDomOrder(e)},i.prototype.ensureDomOrder=function(e){var t=this;if(this.domOrder){var r=[];e.forEach(function(o){var a=t.cellComps[o.getInstanceId()];a&&r.push(a.getGui())}),Cd(this.getGui(),r)}},i.prototype.newCellComp=function(e){var t=new _O(this.beans,e,this.rowCtrl.isPrintLayout(),this.getGui(),this.rowCtrl.isEditing());this.cellComps[e.getInstanceId()]=t,this.getGui().appendChild(t.getGui())},i.prototype.destroy=function(){n.prototype.destroy.call(this),this.destroyAllCells()},i.prototype.destroyAllCells=function(){var e=lo(this.cellComps).filter(function(t){return t!=null});this.destroyCells(e)},i.prototype.setFullWidthRowComp=function(e){var t=this;this.fullWidthCellRenderer&&console.error("AG Grid - should not be setting fullWidthRowComponent twice"),this.fullWidthCellRenderer=e,this.addDestroyFunc(function(){t.fullWidthCellRenderer=t.beans.context.destroyBean(t.fullWidthCellRenderer)})},i.prototype.getFullWidthCellRenderer=function(){return this.fullWidthCellRenderer},i.prototype.destroyCells=function(e){var t=this;e.forEach(function(r){if(r){var o=r.getCtrl().getInstanceId();t.cellComps[o]===r&&(r.detach(),r.destroy(),t.cellComps[o]=null)}})},i}(xt),RO=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Yc=function(){return Yc=Object.assign||function(n){for(var i,e=1,t=arguments.length;e<t;e++){i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(n[r]=i[r])}return n},Yc.apply(this,arguments)},xa=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o};function xO(){var n=xt.elementGettingCreated.getAttribute("name"),i=Yv.getRowContainerCssClasses(n),e,t=n===oe.CENTER||n===oe.TOP_CENTER||n===oe.STICKY_TOP_CENTER||n===oe.BOTTOM_CENTER;return t?e='<div class="'+i.viewport+`" ref="eViewport" role="presentation">
                <div class="`+i.container+`" ref="eContainer"></div>
            </div>`:e='<div class="'+i.container+'" ref="eContainer"></div>',e}var AO=function(n){RO(i,n);function i(){var e=n.call(this,xO())||this;return e.rowComps={},e.name=xt.elementGettingCreated.getAttribute("name"),e.type=cO(e.name),e}return i.prototype.postConstruct=function(){var e=this,t={setViewportHeight:function(o){return e.eViewport.style.height=o},setRowCtrls:function(o){return e.setRowCtrls(o)},setDomOrder:function(o){e.domOrder=o},setContainerWidth:function(o){return e.eContainer.style.width=o}},r=this.createManagedBean(new Yv(this.name));r.setComp(t,this.eContainer,this.eViewport)},i.prototype.preDestroy=function(){this.setRowCtrls([])},i.prototype.setRowCtrls=function(e){var t=this,r=Yc({},this.rowComps);this.rowComps={},this.lastPlacedElement=null;var o=function(a){var s=a.getInstanceId(),l=r[s];if(l)t.rowComps[s]=l,delete r[s],t.ensureDomOrder(l.getGui());else{if(!a.getRowNode().displayed)return;var u=new DO(a,t.beans,t.type);t.rowComps[s]=u,t.appendRow(u.getGui())}};e.forEach(o),lo(r).forEach(function(a){t.eContainer.removeChild(a.getGui()),a.destroy()}),Wi(this.eContainer,e.length?"rowgroup":"presentation")},i.prototype.appendRow=function(e){this.domOrder?lv(this.eContainer,e,this.lastPlacedElement):this.eContainer.appendChild(e),this.lastPlacedElement=e},i.prototype.ensureDomOrder=function(e){this.domOrder&&(md(this.eContainer,e,this.lastPlacedElement),this.lastPlacedElement=e)},xa([T("beans")],i.prototype,"beans",void 0),xa([be("eViewport")],i.prototype,"eViewport",void 0),xa([be("eContainer")],i.prototype,"eContainer",void 0),xa([Oe],i.prototype,"postConstruct",null),xa([Ki],i.prototype,"preDestroy",null),i}(xt),ef=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},LO=function(){function n(i){this.columnsToAggregate=[],this.columnsToGroup=[],this.columnsToPivot=[],this.pinned=i}return n.prototype.onDragEnter=function(i){var e=this;if(this.clearColumnsList(),!this.gridOptionsService.is("functionsReadOnly")){var t=i.dragItem.columns;t&&t.forEach(function(r){r.isPrimary()&&(r.isAnyFunctionActive()||(r.isAllowValue()?e.columnsToAggregate.push(r):r.isAllowRowGroup()?e.columnsToGroup.push(r):r.isAllowPivot()&&e.columnsToPivot.push(r)))})}},n.prototype.getIconName=function(){var i=this.columnsToAggregate.length+this.columnsToGroup.length+this.columnsToPivot.length;return i>0?this.pinned?zi.ICON_PINNED:zi.ICON_MOVE:null},n.prototype.onDragLeave=function(i){this.clearColumnsList()},n.prototype.clearColumnsList=function(){this.columnsToAggregate.length=0,this.columnsToGroup.length=0,this.columnsToPivot.length=0},n.prototype.onDragging=function(i){},n.prototype.onDragStop=function(i){this.columnsToAggregate.length>0&&this.columnModel.addValueColumns(this.columnsToAggregate,"toolPanelDragAndDrop"),this.columnsToGroup.length>0&&this.columnModel.addRowGroupColumns(this.columnsToGroup,"toolPanelDragAndDrop"),this.columnsToPivot.length>0&&this.columnModel.addPivotColumns(this.columnsToPivot,"toolPanelDragAndDrop")},ef([T("columnModel")],n.prototype,"columnModel",void 0),ef([T("gridOptionsService")],n.prototype,"gridOptionsService",void 0),n}(),Aa=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},MO=function(n,i){var e=typeof Symbol=="function"&&n[Symbol.iterator];if(!e)return n;var t=e.call(n),r,o=[],a;try{for(;(i===void 0||i-- >0)&&!(r=t.next()).done;)o.push(r.value)}catch(s){a={error:s}}finally{try{r&&!r.done&&(e=t.return)&&e.call(t)}finally{if(a)throw a.error}}return o},NO=function(){function n(i,e){this.needToMoveLeft=!1,this.needToMoveRight=!1,this.lastMovedInfo=null,this.pinned=i,this.eContainer=e,this.centerContainer=!ue(i)}return n.prototype.init=function(){var i=this;this.ctrlsService.whenReady(function(){i.gridBodyCon=i.ctrlsService.getGridBodyCtrl()})},n.prototype.getIconName=function(){return this.pinned?zi.ICON_PINNED:zi.ICON_MOVE},n.prototype.onDragEnter=function(i){var e=i.dragItem.columns,t=i.dragSource.type===nr.ToolPanel;if(t)this.setColumnsVisible(e,!0,"uiColumnDragged");else{var r=i.dragItem.visibleState,o=(e||[]).filter(function(a){return r[a.getId()]});this.setColumnsVisible(o,!0,"uiColumnDragged")}this.setColumnsPinned(e,this.pinned,"uiColumnDragged"),this.onDragging(i,!0,!0)},n.prototype.onDragLeave=function(){this.ensureIntervalCleared(),this.lastMovedInfo=null},n.prototype.setColumnsVisible=function(i,e,t){if(t===void 0&&(t="api"),i){var r=i.filter(function(o){return!o.getColDef().lockVisible});this.columnModel.setColumnsVisible(r,e,t)}},n.prototype.setColumnsPinned=function(i,e,t){if(t===void 0&&(t="api"),i){var r=i.filter(function(o){return!o.getColDef().lockPinned});this.columnModel.setColumnsPinned(r,e,t)}},n.prototype.onDragStop=function(){this.onDragging(this.lastDraggingEvent,!1,!0,!0),this.ensureIntervalCleared(),this.lastMovedInfo=null},n.prototype.normaliseX=function(i){if(this.gridOptionsService.is("enableRtl")){var e=this.eContainer.clientWidth;i=e-i}return this.centerContainer&&(i+=this.ctrlsService.getCenterRowContainerCtrl().getCenterViewportScrollLeft()),i},n.prototype.checkCenterForScrolling=function(i){if(this.centerContainer){var e=this.ctrlsService.getCenterRowContainerCtrl().getCenterViewportScrollLeft(),t=e+this.ctrlsService.getCenterRowContainerCtrl().getCenterWidth();this.gridOptionsService.is("enableRtl")?(this.needToMoveRight=i<e+50,this.needToMoveLeft=i>t-50):(this.needToMoveLeft=i<e+50,this.needToMoveRight=i>t-50),this.needToMoveLeft||this.needToMoveRight?this.ensureIntervalStarted():this.ensureIntervalCleared()}},n.prototype.onDragging=function(i,e,t,r){var o=this,a;if(i===void 0&&(i=this.lastDraggingEvent),e===void 0&&(e=!1),t===void 0&&(t=!1),r===void 0&&(r=!1),r){if(this.lastMovedInfo){var s=this.lastMovedInfo,l=s.columns,u=s.toIndex;this.moveColumns(l,u,"uiColumnMoved",!0)}return}if(this.lastDraggingEvent=i,!vt(i.hDirection)){var c=this.normaliseX(i.x);e||this.checkCenterForScrolling(c);var d=this.normaliseDirection(i.hDirection),f=i.dragSource.type,y=((a=i.dragSource.getDragItem().columns)===null||a===void 0?void 0:a.filter(function(S){return S.getColDef().lockPinned?S.getPinned()==o.pinned:!0}))||[];this.attemptMoveColumns({dragSourceType:f,allMovingColumns:y,hDirection:d,mouseX:c,fromEnter:e,fakeEvent:t})}},n.prototype.normaliseDirection=function(i){if(this.gridOptionsService.is("enableRtl"))switch(i){case ro.Left:return ro.Right;case ro.Right:return ro.Left;default:console.error("AG Grid: Unknown direction "+i)}else return i},n.prototype.attemptMoveColumns=function(i){var e=i.dragSourceType,t=i.hDirection,r=i.mouseX,o=i.fromEnter,a=i.fakeEvent,s=t===ro.Left,l=t===ro.Right,u=i.allMovingColumns;if(e===nr.HeaderCell){var c=[];u.forEach(function(F){for(var U,Y=null,K=F.getParent();K!=null&&K.getDisplayedLeafColumns().length===1;)Y=K,K=K.getParent();if(Y!=null){var Ce=!!(!((U=Y.getColGroupDef())===null||U===void 0)&&U.marryChildren),Q=Ce?Y.getProvidedColumnGroup().getLeafColumns():Y.getLeafColumns();Q.forEach(function(Ne){c.includes(Ne)||c.push(Ne)})}else c.includes(F)||c.push(F)}),u=c}var d=u.slice();this.columnModel.sortColumnsLikeGridColumns(d);var f=this.calculateValidMoves(d,l,r),y=this.calculateOldIndex(d);if(f.length!==0){var S=f[0],w=y!==null&&!o;if(e==nr.HeaderCell&&(w=y!==null),!(w&&!a&&(s&&S>=y||l&&S<=y))){for(var E=this.columnModel.getAllDisplayedColumns(),_=[],L=null,P=0;P<f.length;P++){var V=f[P],ne=this.columnModel.getProposedColumnOrder(d,V);if(this.columnModel.doesOrderPassRules(ne)){var ee=ne.filter(function(F){return E.includes(F)});if(L===null)L=ee;else if(!St.areEqual(ee,L))break;var re=this.groupFragCount(ne);_.push({move:V,fragCount:re})}}_.length!==0&&(_.sort(function(F,U){return F.fragCount-U.fragCount}),this.moveColumns(u,_[0].move,"uiColumnMoved",!1))}}},n.prototype.calculateOldIndex=function(i){var e=this.columnModel.getAllGridColumns(),t=Eh(i.map(function(l){return e.indexOf(l)})),r=t[0],o=ai(t),a=o-r,s=a!==t.length-1;return s?null:r},n.prototype.moveColumns=function(i,e,t,r){this.columnModel.moveColumns(i,e,t,r),this.lastMovedInfo=r?null:{columns:i,toIndex:e}},n.prototype.groupFragCount=function(i){function e(a){for(var s=[],l=a.getOriginalParent();l!=null;)s.push(l),l=l.getOriginalParent();return s}for(var t=0,r=function(a){var s,l=e(i[a]),u=e(i[a+1]);s=MO(l.length>u.length?[l,u]:[u,l],2),l=s[0],u=s[1],l.forEach(function(c){u.indexOf(c)===-1&&t++})},o=0;o<i.length-1;o++)r(o);return t},n.prototype.calculateValidMoves=function(i,e,t){var r=this.gridOptionsService.is("suppressMovableColumns")||i.some(function(re){return re.getColDef().suppressMovable});if(r)return[];var o=this.columnModel.getDisplayedColumns(this.pinned),a=this.columnModel.getAllGridColumns(),s=o.filter(function(re){return Lr(i,re)}),l=o.filter(function(re){return!Lr(i,re)}),u=a.filter(function(re){return!Lr(i,re)}),c=0,d=t;if(e){var f=0;s.forEach(function(re){return f+=re.getActualWidth()}),d-=f}if(d>0){for(var y=0;y<l.length;y++){var S=l[y];if(d-=S.getActualWidth(),d<0)break;c++}e&&c++}var w;if(c>0){var E=l[c-1];w=u.indexOf(E)+1}else w=u.indexOf(l[0]),w===-1&&(w=0);var _=[w],L=function(re,F){return re-F};if(e){for(var P=w+1,V=a.length-1;P<=V;)_.push(P),P++;_.sort(L)}else{for(var P=w,V=a.length-1,ne=a[P];P<=V&&this.isColumnHidden(o,ne);)P++,_.push(P),ne=a[P];P=w-1;for(var ee=0;P>=ee;)_.push(P),P--;_.sort(L).reverse()}return _},n.prototype.isColumnHidden=function(i,e){return i.indexOf(e)<0},n.prototype.ensureIntervalStarted=function(){this.movingIntervalId||(this.intervalCount=0,this.failedMoveAttempts=0,this.movingIntervalId=window.setInterval(this.moveInterval.bind(this),100),this.needToMoveLeft?this.dragAndDropService.setGhostIcon(zi.ICON_LEFT,!0):this.dragAndDropService.setGhostIcon(zi.ICON_RIGHT,!0))},n.prototype.ensureIntervalCleared=function(){this.movingIntervalId&&(window.clearInterval(this.movingIntervalId),this.movingIntervalId=null,this.dragAndDropService.setGhostIcon(zi.ICON_MOVE))},n.prototype.moveInterval=function(){var i;this.intervalCount++,i=10+this.intervalCount*5,i>100&&(i=100);var e=null,t=this.gridBodyCon.getScrollFeature();if(this.needToMoveLeft?e=t.scrollHorizontally(-i):this.needToMoveRight&&(e=t.scrollHorizontally(i)),e!==0)this.onDragging(this.lastDraggingEvent),this.failedMoveAttempts=0;else{this.failedMoveAttempts++;var r=this.lastDraggingEvent.dragItem.columns,o=r.filter(function(s){return!s.getColDef().lockPinned});if(o.length>0&&(this.dragAndDropService.setGhostIcon(zi.ICON_PINNED),this.failedMoveAttempts>7)){var a=this.needToMoveLeft?"left":"right";this.setColumnsPinned(o,a,"uiColumnDragged"),this.dragAndDropService.nudge()}}},Aa([T("columnModel")],n.prototype,"columnModel",void 0),Aa([T("dragAndDropService")],n.prototype,"dragAndDropService",void 0),Aa([T("gridOptionsService")],n.prototype,"gridOptionsService",void 0),Aa([T("ctrlsService")],n.prototype,"ctrlsService",void 0),Aa([Oe],n.prototype,"init",null),n}(),FO=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),La=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},IO=function(n){FO(i,n);function i(e,t){var r=n.call(this)||this;return r.pinned=e,r.eContainer=t,r}return i.prototype.postConstruct=function(){var e=this;this.ctrlsService.whenReady(function(t){switch(e.pinned){case"left":e.eSecondaryContainers=[[t.gridBodyCtrl.getBodyViewportElement(),t.leftRowContainerCtrl.getContainerElement()],[t.bottomLeftRowContainerCtrl.getContainerElement()],[t.topLeftRowContainerCtrl.getContainerElement()]];break;case"right":e.eSecondaryContainers=[[t.gridBodyCtrl.getBodyViewportElement(),t.rightRowContainerCtrl.getContainerElement()],[t.bottomRightRowContainerCtrl.getContainerElement()],[t.topRightRowContainerCtrl.getContainerElement()]];break;default:e.eSecondaryContainers=[[t.gridBodyCtrl.getBodyViewportElement(),t.centerRowContainerCtrl.getViewportElement()],[t.bottomCenterRowContainerCtrl.getViewportElement()],[t.topCenterRowContainerCtrl.getViewportElement()]];break}})},i.prototype.isInterestedIn=function(e){return e===nr.HeaderCell||e===nr.ToolPanel&&this.gridOptionsService.is("allowDragFromColumnsToolPanel")},i.prototype.getSecondaryContainers=function(){return this.eSecondaryContainers},i.prototype.getContainer=function(){return this.eContainer},i.prototype.init=function(){this.moveColumnFeature=this.createManagedBean(new NO(this.pinned,this.eContainer)),this.bodyDropPivotTarget=this.createManagedBean(new LO(this.pinned)),this.dragAndDropService.addDropTarget(this)},i.prototype.getIconName=function(){return this.currentDropListener.getIconName()},i.prototype.isDropColumnInPivotMode=function(e){return this.columnModel.isPivotMode()&&e.dragSource.type===nr.ToolPanel},i.prototype.onDragEnter=function(e){this.currentDropListener=this.isDropColumnInPivotMode(e)?this.bodyDropPivotTarget:this.moveColumnFeature,this.currentDropListener.onDragEnter(e)},i.prototype.onDragLeave=function(e){this.currentDropListener.onDragLeave(e)},i.prototype.onDragging=function(e){this.currentDropListener.onDragging(e)},i.prototype.onDragStop=function(e){this.currentDropListener.onDragStop(e)},La([T("dragAndDropService")],i.prototype,"dragAndDropService",void 0),La([T("columnModel")],i.prototype,"columnModel",void 0),La([T("ctrlsService")],i.prototype,"ctrlsService",void 0),La([Oe],i.prototype,"postConstruct",null),La([Oe],i.prototype,"init",null),i}(ve),kO=function(n,i){var e=typeof Symbol=="function"&&n[Symbol.iterator];if(!e)return n;var t=e.call(n),r,o=[],a;try{for(;(i===void 0||i-- >0)&&!(r=t.next()).done;)o.push(r.value)}catch(s){a={error:s}}finally{try{r&&!r.done&&(e=t.return)&&e.call(t)}finally{if(a)throw a.error}}return o},GO=function(n,i){for(var e=0,t=i.length,r=n.length;e<t;e++,r++)n[r]=i[e];return n},Kv=function(){function n(){}return n.getHeaderClassesFromColDef=function(i,e,t,r){return vt(i)?[]:this.getColumnClassesFromCollDef(i.headerClass,i,e,t,r)},n.getToolPanelClassesFromColDef=function(i,e,t,r){return vt(i)?[]:this.getColumnClassesFromCollDef(i.toolPanelClass,i,e,t,r)},n.getClassParams=function(i,e,t,r){return{colDef:i,column:t,columnGroup:r,api:e.api,columnApi:e.columnApi,context:e.context}},n.getColumnClassesFromCollDef=function(i,e,t,r,o){if(vt(i))return[];var a;if(typeof i=="function"){var s=this.getClassParams(e,t,r,o);a=i(s)}else a=i;return typeof a=="string"?[a]:Array.isArray(a)?GO([],kO(a)):[]},n}(),VO=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Hs=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},BO=function(n){VO(i,n);function i(e){var t=n.call(this,i.TEMPLATE,e)||this;return t.headerCompVersion=0,t.column=e.getColumnGroupChild(),t.pinned=e.getPinned(),t}return i.prototype.postConstruct=function(){var e=this,t=this.getGui(),r=function(s,l){l!=null&&l!=""?t.setAttribute(s,l):t.removeAttribute(s)};r("col-id",this.column.getColId());var o={setWidth:function(s){return t.style.width=s},addOrRemoveCssClass:function(s,l){return e.addOrRemoveCssClass(s,l)},setAriaDescription:function(s){return Hh(t,s)},setAriaSort:function(s){return s?Xh(t,s):Jh(t)},setUserCompDetails:function(s){return e.setUserCompDetails(s)},getUserCompInstance:function(){return e.headerComp}};this.ctrl.setComp(o,this.getGui(),this.eResize,this.eHeaderCompWrapper);var a=this.ctrl.getSelectAllGui();this.eResize.insertAdjacentElement("afterend",a)},i.prototype.destroyHeaderComp=function(){this.headerComp&&(this.eHeaderCompWrapper.removeChild(this.headerCompGui),this.headerComp=this.destroyBean(this.headerComp),this.headerCompGui=void 0)},i.prototype.setUserCompDetails=function(e){var t=this;this.headerCompVersion++;var r=this.headerCompVersion;e.newAgStackInstance().then(function(o){return t.afterCompCreated(r,o)})},i.prototype.afterCompCreated=function(e,t){if(e!=this.headerCompVersion||!this.isAlive()){this.destroyBean(t);return}this.destroyHeaderComp(),this.headerComp=t,this.headerCompGui=t.getGui(),this.eHeaderCompWrapper.appendChild(this.headerCompGui),this.ctrl.setDragSource(this.getGui())},i.TEMPLATE=`<div class="ag-header-cell" role="columnheader" tabindex="-1">
            <div ref="eResize" class="ag-header-cell-resize" role="presentation"></div>
            <div ref="eHeaderCompWrapper" class="ag-header-cell-comp-wrapper" role="presentation"></div>
        </div>`,Hs([be("eResize")],i.prototype,"eResize",void 0),Hs([be("eHeaderCompWrapper")],i.prototype,"eHeaderCompWrapper",void 0),Hs([Oe],i.prototype,"postConstruct",null),Hs([Ki],i.prototype,"destroyHeaderComp",null),i}(Ad),HO=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Yu=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},WO=function(n){HO(i,n);function i(e){return n.call(this,i.TEMPLATE,e)||this}return i.prototype.postConstruct=function(){var e=this,t=this.getGui(),r=function(a,s){return s!=null?t.setAttribute(a,s):t.removeAttribute(a)};t.setAttribute("col-id",this.ctrl.getColId());var o={addOrRemoveCssClass:function(a,s){return e.addOrRemoveCssClass(a,s)},setResizableDisplayed:function(a){return Yt(e.eResize,a)},setWidth:function(a){return t.style.width=a},setAriaExpanded:function(a){return r("aria-expanded",a)},setUserCompDetails:function(a){return e.setUserCompDetails(a)}};this.ctrl.setComp(o,t,this.eResize)},i.prototype.setUserCompDetails=function(e){var t=this;e.newAgStackInstance().then(function(r){return t.afterHeaderCompCreated(r)})},i.prototype.afterHeaderCompCreated=function(e){var t=this,r=function(){return t.destroyBean(e)};if(!this.isAlive()){r();return}var o=this.getGui(),a=e.getGui();o.appendChild(a),this.addDestroyFunc(r),this.ctrl.setDragSource(o)},i.TEMPLATE=`<div class="ag-header-group-cell" role="columnheader" tabindex="-1">
            <div ref="eResize" class="ag-header-cell-resize" role="presentation"></div>
        </div>`,Yu([T("userComponentFactory")],i.prototype,"userComponentFactory",void 0),Yu([be("eResize")],i.prototype,"eResize",void 0),Yu([Oe],i.prototype,"postConstruct",null),i}(Ad),UO=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),tf=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},Zi;(function(n){n.COLUMN_GROUP="group",n.COLUMN="column",n.FLOATING_FILTER="filter"})(Zi||(Zi={}));var jO=function(n){UO(i,n);function i(e){var t=n.call(this)||this;return t.headerComps={},t.ctrl=e,t.setTemplate('<div class="'+t.ctrl.getHeaderRowClass()+'" role="row"></div>'),t}return i.prototype.init=function(){var e=this;this.getGui().style.transform=this.ctrl.getTransform(),ld(this.getGui(),this.ctrl.getAriaRowIndex());var t={setHeight:function(r){return e.getGui().style.height=r},setTop:function(r){return e.getGui().style.top=r},setHeaderCtrls:function(r,o){return e.setHeaderCtrls(r,o)},setWidth:function(r){return e.getGui().style.width=r}};this.ctrl.setComp(t)},i.prototype.destroyHeaderCtrls=function(){this.setHeaderCtrls([],!1)},i.prototype.setHeaderCtrls=function(e,t){var r=this;if(this.isAlive()){var o=this.headerComps;if(this.headerComps={},e.forEach(function(l){var u=l.getInstanceId(),c=o[u];delete o[u],c==null&&(c=r.createHeaderComp(l),r.getGui().appendChild(c.getGui())),r.headerComps[u]=c}),Oi(o,function(l,u){r.getGui().removeChild(u.getGui()),r.destroyBean(u)}),t){var a=lo(this.headerComps);a.sort(function(l,u){var c=l.getCtrl().getColumnGroupChild().getLeft(),d=u.getCtrl().getColumnGroupChild().getLeft();return c-d});var s=a.map(function(l){return l.getGui()});Cd(this.getGui(),s)}}},i.prototype.createHeaderComp=function(e){var t;switch(this.ctrl.getType()){case Zi.COLUMN_GROUP:t=new WO(e);break;case Zi.FLOATING_FILTER:t=new iT(e);break;default:t=new BO(e);break}return this.createBean(t),t.setParentComponent(this),t},tf([Oe],i.prototype,"init",null),tf([Ki],i.prototype,"destroyHeaderCtrls",null),i}(xt),zO=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Ku=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},YO=0,ql=function(n){zO(i,n);function i(e,t){var r=n.call(this)||this;return r.lastFocusEvent=null,r.columnGroupChild=e,r.parentRowCtrl=t,r.instanceId=e.getUniqueId()+"-"+YO++,r}return i.prototype.shouldStopEventPropagation=function(e){var t=this.focusService.getFocusedHeader(),r=t.headerRowIndex,o=t.column;return hv(this.gridOptionsService,e,r,o)},i.prototype.getWrapperHasFocus=function(){var e=this.gridOptionsService.getDocument(),t=e.activeElement;return t===this.eGui},i.prototype.setGui=function(e){this.eGui=e,this.addDomData()},i.prototype.handleKeyDown=function(e){var t=this.getWrapperHasFocus();switch(e.key){case J.PAGE_DOWN:case J.PAGE_UP:case J.PAGE_HOME:case J.PAGE_END:t&&e.preventDefault()}},i.prototype.addDomData=function(){var e=this,t=i.DOM_DATA_KEY_HEADER_CTRL;this.gridOptionsService.setDomData(this.eGui,t,this),this.addDestroyFunc(function(){return e.gridOptionsService.setDomData(e.eGui,t,null)})},i.prototype.getGui=function(){return this.eGui},i.prototype.focus=function(e){return this.eGui?(this.lastFocusEvent=e||null,this.eGui.focus(),!0):!1},i.prototype.getRowIndex=function(){return this.parentRowCtrl.getRowIndex()},i.prototype.getParentRowCtrl=function(){return this.parentRowCtrl},i.prototype.getPinned=function(){return this.parentRowCtrl.getPinned()},i.prototype.getInstanceId=function(){return this.instanceId},i.prototype.getColumnGroupChild=function(){return this.columnGroupChild},i.DOM_DATA_KEY_HEADER_CTRL="headerCtrl",Ku([T("focusService")],i.prototype,"focusService",void 0),Ku([T("beans")],i.prototype,"beans",void 0),Ku([T("userComponentFactory")],i.prototype,"userComponentFactory",void 0),i}(ve),KO=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),QO=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},Fd=function(n){KO(i,n);function i(e,t,r,o){var a=n.call(this)||this;return a.columnOrGroup=e,a.eCell=t,a.ariaEl=a.eCell.querySelector("[role=columnheader]")||a.eCell,a.colsSpanning=o,a.beans=r,a}return i.prototype.setColsSpanning=function(e){this.colsSpanning=e,this.onLeftChanged()},i.prototype.getColumnOrGroup=function(){return this.beans.gridOptionsService.is("enableRtl")&&this.colsSpanning?ai(this.colsSpanning):this.columnOrGroup},i.prototype.postConstruct=function(){this.addManagedListener(this.columnOrGroup,li.EVENT_LEFT_CHANGED,this.onLeftChanged.bind(this)),this.setLeftFirstTime(),this.addManagedListener(this.eventService,b.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,this.onLeftChanged.bind(this)),this.addManagedPropertyListener("domLayout",this.onLeftChanged.bind(this))},i.prototype.setLeftFirstTime=function(){var e=this.beans.gridOptionsService.is("suppressColumnMoveAnimation"),t=ue(this.columnOrGroup.getOldLeft()),r=this.beans.columnAnimationService.isActive()&&t&&!e;r?this.animateInLeft():this.onLeftChanged()},i.prototype.animateInLeft=function(){var e=this,t=this.getColumnOrGroup(),r=t.getLeft(),o=t.getOldLeft(),a=this.modifyLeftForPrintLayout(t,o),s=this.modifyLeftForPrintLayout(t,r);this.setLeft(a),this.actualLeft=s,this.beans.columnAnimationService.executeNextVMTurn(function(){e.actualLeft===s&&e.setLeft(s)})},i.prototype.onLeftChanged=function(){var e=this.getColumnOrGroup(),t=e.getLeft();this.actualLeft=this.modifyLeftForPrintLayout(e,t),this.setLeft(this.actualLeft)},i.prototype.modifyLeftForPrintLayout=function(e,t){var r=this.beans.gridOptionsService.isDomLayout("print");if(!r||e.getPinned()==="left")return t;var o=this.beans.columnModel.getDisplayedColumnsLeftWidth();if(e.getPinned()==="right"){var a=this.beans.columnModel.getBodyContainerWidth();return o+a+t}return o+t},i.prototype.setLeft=function(e){ue(e)&&(this.eCell.style.left=e+"px");var t;if(this.columnOrGroup instanceof li)t=this.columnOrGroup;else{var r=this.columnOrGroup,o=r.getLeafColumns();if(!o.length)return;o.length>1&&qh(this.ariaEl,o.length),t=o[0]}var a=this.beans.columnModel.getAriaColumnIndex(t);ud(this.ariaEl,a)},QO([Oe],i.prototype,"postConstruct",null),i}(ve),qO=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),rf=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},Id=function(n){qO(i,n);function i(e,t){var r=n.call(this)||this;return r.columns=e,r.element=t,r}return i.prototype.postConstruct=function(){this.gridOptionsService.is("columnHoverHighlight")&&this.addMouseHoverListeners()},i.prototype.addMouseHoverListeners=function(){this.addManagedListener(this.element,"mouseout",this.onMouseOut.bind(this)),this.addManagedListener(this.element,"mouseover",this.onMouseOver.bind(this))},i.prototype.onMouseOut=function(){this.columnHoverService.clearMouseOver()},i.prototype.onMouseOver=function(){this.columnHoverService.setMouseOver(this.columns)},rf([T("columnHoverService")],i.prototype,"columnHoverService",void 0),rf([Oe],i.prototype,"postConstruct",null),i}(ve),XO=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Qu=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},JO=function(n){XO(i,n);function i(e,t){var r=n.call(this,e,t)||this;return r.iconCreated=!1,r.column=e,r}return i.prototype.setComp=function(e,t,r,o){n.prototype.setGui.call(this,t),this.comp=e,this.eButtonShowMainFilter=r,this.eFloatingFilterBody=o,this.setupActive(),this.setupWidth(),this.setupLeft(),this.setupHover(),this.setupFocus(),this.setupAria(),this.setupFilterButton(),this.setupUserComp(),this.setupSyncWithFilter(),this.setupUi(),this.addManagedListener(this.eButtonShowMainFilter,"click",this.showParentFilter.bind(this)),this.setupFilterChangedListener(),this.addManagedListener(this.column,li.EVENT_COL_DEF_CHANGED,this.onColDefChanged.bind(this))},i.prototype.setupActive=function(){var e=this.column.getColDef(),t=!!e.filter,r=!!e.floatingFilter;this.active=t&&r},i.prototype.setupUi=function(){if(this.comp.setButtonWrapperDisplayed(!this.suppressFilterButton&&this.active),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-full-body",this.suppressFilterButton),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-body",!this.suppressFilterButton),!(!this.active||this.iconCreated)){var e=Li("filter",this.gridOptionsService,this.column);e&&(this.iconCreated=!0,this.eButtonShowMainFilter.appendChild(e))}},i.prototype.setupFocus=function(){this.createManagedBean(new rn(this.eGui,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)}))},i.prototype.setupAria=function(){var e=this.localeService.getLocaleTextFunc();Po(this.eButtonShowMainFilter,e("ariaFilterMenuOpen","Open Filter Menu"))},i.prototype.onTabKeyDown=function(e){var t=this.gridOptionsService.getDocument(),r=t.activeElement,o=r===this.eGui;if(!o){var a=this.focusService.findNextFocusableElement(this.eGui,null,e.shiftKey);if(a){this.beans.headerNavigationService.scrollToColumn(this.column),e.preventDefault(),a.focus();return}var s=this.findNextColumnWithFloatingFilter(e.shiftKey);s&&this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:this.getParentRowCtrl().getRowIndex(),column:s},event:e})&&e.preventDefault()}},i.prototype.findNextColumnWithFloatingFilter=function(e){var t=this.beans.columnModel,r=this.column;do if(r=e?t.getDisplayedColBefore(r):t.getDisplayedColAfter(r),!r)break;while(!r.getColDef().filter||!r.getColDef().floatingFilter);return r},i.prototype.handleKeyDown=function(e){n.prototype.handleKeyDown.call(this,e);var t=this.getWrapperHasFocus();switch(e.key){case J.UP:case J.DOWN:t||e.preventDefault();case J.LEFT:case J.RIGHT:if(t)return;e.stopPropagation();case J.ENTER:t&&this.focusService.focusInto(this.eGui)&&e.preventDefault();break;case J.ESCAPE:t||this.eGui.focus()}},i.prototype.onFocusIn=function(e){var t=this.eGui.contains(e.relatedTarget);if(!t){var r=!!e.relatedTarget&&!e.relatedTarget.classList.contains("ag-floating-filter"),o=!!e.relatedTarget&&On(e.relatedTarget,"ag-floating-filter");if(r&&o&&e.target===this.eGui){var a=this.lastFocusEvent,s=!!(a&&a.key===J.TAB);if(a&&s){var l=a.shiftKey;this.focusService.focusInto(this.eGui,l)}}var u=this.getRowIndex();this.beans.focusService.setFocusedHeader(u,this.column)}},i.prototype.setupHover=function(){var e=this;this.createManagedBean(new Id([this.column],this.eGui));var t=function(){if(e.gridOptionsService.is("columnHoverHighlight")){var r=e.columnHoverService.isHovered(e.column);e.comp.addOrRemoveCssClass("ag-column-hover",r)}};this.addManagedListener(this.eventService,b.EVENT_COLUMN_HOVER_CHANGED,t),t()},i.prototype.setupLeft=function(){var e=new Fd(this.column,this.eGui,this.beans);this.createManagedBean(e)},i.prototype.setupFilterButton=function(){var e=this.column.getColDef();this.suppressFilterButton=e.floatingFilterComponentParams?!!e.floatingFilterComponentParams.suppressFilterButton:!1},i.prototype.setupUserComp=function(){var e=this;if(this.active){var t=this.filterManager.getFloatingFilterCompDetails(this.column,function(){return e.showParentFilter()});t&&this.setCompDetails(t)}},i.prototype.setCompDetails=function(e){this.userCompDetails=e,this.comp.setCompDetails(e)},i.prototype.showParentFilter=function(){var e=this.suppressFilterButton?this.eFloatingFilterBody:this.eButtonShowMainFilter;this.menuFactory.showMenuAfterButtonClick(this.column,e,"floatingFilter","filterMenuTab",["filterMenuTab"])},i.prototype.setupSyncWithFilter=function(){var e=this;if(this.active){var t=function(r){var o=e.comp.getFloatingFilterComp();o&&o.then(function(a){if(a){var s=e.filterManager.getCurrentFloatingFilterParentModel(e.column);a.onParentModelChanged(s,r)}})};this.destroySyncListener=this.addManagedListener(this.column,li.EVENT_FILTER_CHANGED,t),this.filterManager.isFilterActive(this.column)&&t(null)}},i.prototype.setupWidth=function(){var e=this,t=function(){var r=e.column.getActualWidth()+"px";e.comp.setWidth(r)};this.addManagedListener(this.column,li.EVENT_WIDTH_CHANGED,t),t()},i.prototype.setupFilterChangedListener=function(){this.active&&(this.destroyFilterChangedListener=this.addManagedListener(this.column,li.EVENT_FILTER_CHANGED,this.updateFilterButton.bind(this)))},i.prototype.updateFilterButton=function(){!this.suppressFilterButton&&this.comp&&this.comp.setButtonWrapperDisplayed(this.filterManager.isFilterAllowed(this.column))},i.prototype.onColDefChanged=function(){var e=this,t,r,o=this.active;this.setupActive();var a=!o&&this.active;o&&!this.active&&((t=this.destroySyncListener)===null||t===void 0||t.call(this),(r=this.destroyFilterChangedListener)===null||r===void 0||r.call(this));var s=this.active?this.filterManager.getFloatingFilterCompDetails(this.column,function(){return e.showParentFilter()}):null,l=this.comp.getFloatingFilterComp();!l||!s?this.updateCompDetails(s,a):l.then(function(u){var c;!u||e.filterManager.areFilterCompsDifferent((c=e.userCompDetails)!==null&&c!==void 0?c:null,s)?e.updateCompDetails(s,a):e.updateFloatingFilterParams(s)})},i.prototype.updateCompDetails=function(e,t){this.setCompDetails(e),this.setupFilterButton(),this.setupUi(),t&&(this.setupSyncWithFilter(),this.setupFilterChangedListener())},i.prototype.updateFloatingFilterParams=function(e){var t;if(e){var r=e.params;(t=this.comp.getFloatingFilterComp())===null||t===void 0||t.then(function(o){o?.onParamsUpdated&&typeof o.onParamsUpdated=="function"&&o.onParamsUpdated(r)})}},Qu([T("filterManager")],i.prototype,"filterManager",void 0),Qu([T("columnHoverService")],i.prototype,"columnHoverService",void 0),Qu([T("menuFactory")],i.prototype,"menuFactory",void 0),i}(ql),ZO=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),qu=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},$O=function(n){ZO(i,n);function i(e,t,r,o,a){var s=n.call(this)||this;return s.pinned=e,s.column=t,s.eResize=r,s.comp=o,s.ctrl=a,s}return i.prototype.postConstruct=function(){var e=this,t=this.column.getColDef(),r=[],o,a,s=function(){if(Yt(e.eResize,o),!!o){var c=e.horizontalResizeService.addResizeBar({eResizeBar:e.eResize,onResizeStart:e.onResizeStart.bind(e),onResizing:e.onResizing.bind(e,!1),onResizeEnd:e.onResizing.bind(e,!0)});if(r.push(c),a){var d=e.gridOptionsService.is("skipHeaderOnAutoSize"),f=function(){e.columnModel.autoSizeColumn(e.column,d,"uiColumnResized")};e.eResize.addEventListener("dblclick",f);var y=new wr(e.eResize);y.addEventListener(wr.EVENT_DOUBLE_TAP,f),e.addDestroyFunc(function(){e.eResize.removeEventListener("dblclick",f),y.removeEventListener(wr.EVENT_DOUBLE_TAP,f),y.destroy()})}}},l=function(){r.forEach(function(c){return c()}),r.length=0},u=function(){var c=e.column.isResizable(),d=!e.gridOptionsService.is("suppressAutoSize")&&!t.suppressAutoSize,f=c!==o||d!==a;f&&(o=c,a=d,l(),s())};u(),this.addDestroyFunc(l),this.ctrl.addRefreshFunction(u)},i.prototype.onResizing=function(e,t){var r=this.normaliseResizeAmount(t),o=[{key:this.column,newWidth:this.resizeStartWidth+r}];this.columnModel.setColumnWidths(o,this.resizeWithShiftKey,e,"uiColumnResized"),e&&this.comp.addOrRemoveCssClass("ag-column-resizing",!1)},i.prototype.onResizeStart=function(e){this.resizeStartWidth=this.column.getActualWidth(),this.resizeWithShiftKey=e,this.comp.addOrRemoveCssClass("ag-column-resizing",!0)},i.prototype.normaliseResizeAmount=function(e){var t=e,r=this.pinned!=="left",o=this.pinned==="right";return this.gridOptionsService.is("enableRtl")?r&&(t*=-1):o&&(t*=-1),t},qu([T("horizontalResizeService")],i.prototype,"horizontalResizeService",void 0),qu([T("columnModel")],i.prototype,"columnModel",void 0),qu([Oe],i.prototype,"postConstruct",null),i}(ve),eP=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Ws=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},tP=function(n){eP(i,n);function i(e){var t=n.call(this)||this;t.cbSelectAllVisible=!1,t.processingEventFromCheckbox=!1,t.column=e;var r=e.getColDef();return t.filteredOnly=!!r?.headerCheckboxSelectionFilteredOnly,t.currentPageOnly=!!r?.headerCheckboxSelectionCurrentPageOnly,t}return i.prototype.onSpaceKeyDown=function(e){var t=this.cbSelectAll,r=this.gridOptionsService.getDocument();t.isDisplayed()&&!t.getGui().contains(r.activeElement)&&(e.preventDefault(),t.setValue(!t.getValue()))},i.prototype.getCheckboxGui=function(){return this.cbSelectAll.getGui()},i.prototype.setComp=function(e){this.headerCellCtrl=e,this.cbSelectAll=this.createManagedBean(new Yl),this.cbSelectAll.addCssClass("ag-header-select-all"),Wi(this.cbSelectAll.getGui(),"presentation"),this.showOrHideSelectAll(),this.addManagedListener(this.eventService,b.EVENT_NEW_COLUMNS_LOADED,this.showOrHideSelectAll.bind(this)),this.addManagedListener(this.eventService,b.EVENT_DISPLAYED_COLUMNS_CHANGED,this.showOrHideSelectAll.bind(this)),this.addManagedListener(this.eventService,b.EVENT_SELECTION_CHANGED,this.onSelectionChanged.bind(this)),this.addManagedListener(this.eventService,b.EVENT_PAGINATION_CHANGED,this.onSelectionChanged.bind(this)),this.addManagedListener(this.eventService,b.EVENT_MODEL_UPDATED,this.onModelChanged.bind(this)),this.addManagedListener(this.cbSelectAll,b.EVENT_FIELD_VALUE_CHANGED,this.onCbSelectAll.bind(this)),Vl(this.cbSelectAll.getGui(),!0),this.cbSelectAll.getInputElement().setAttribute("tabindex","-1"),this.refreshSelectAllLabel()},i.prototype.showOrHideSelectAll=function(){this.cbSelectAllVisible=this.isCheckboxSelection(),this.cbSelectAll.setDisplayed(this.cbSelectAllVisible,{skipAriaHidden:!0}),this.cbSelectAllVisible&&(this.checkRightRowModelType("selectAllCheckbox"),this.checkSelectionType("selectAllCheckbox"),this.updateStateOfCheckbox()),this.refreshSelectAllLabel()},i.prototype.onModelChanged=function(){this.cbSelectAllVisible&&this.updateStateOfCheckbox()},i.prototype.onSelectionChanged=function(){this.cbSelectAllVisible&&this.updateStateOfCheckbox()},i.prototype.updateStateOfCheckbox=function(){if(!this.processingEventFromCheckbox){this.processingEventFromCheckbox=!0;var e=this.selectionService.getSelectAllState(this.filteredOnly,this.currentPageOnly);this.cbSelectAll.setValue(e),this.refreshSelectAllLabel(),this.processingEventFromCheckbox=!1}},i.prototype.refreshSelectAllLabel=function(){var e=this.localeService.getLocaleTextFunc(),t=this.cbSelectAll.getValue(),r=t?e("ariaChecked","checked"):e("ariaUnchecked","unchecked"),o=e("ariaRowSelectAll","Press Space to toggle all rows selection");this.cbSelectAllVisible?this.headerCellCtrl.setAriaDescriptionProperty("selectAll",o+" ("+r+")"):this.headerCellCtrl.setAriaDescriptionProperty("selectAll",null),this.cbSelectAll.setInputAriaLabel(o+" ("+r+")"),this.headerCellCtrl.refreshAriaDescription()},i.prototype.checkSelectionType=function(e){var t=this.gridOptionsService.get("rowSelection")==="multiple";return t?!0:(console.warn("AG Grid: "+e+" is only available if using 'multiple' rowSelection."),!1)},i.prototype.checkRightRowModelType=function(e){var t=this.rowModel.getType(),r=t==="clientSide"||t==="serverSide";return r?!0:(console.warn("AG Grid: "+e+" is only available if using 'clientSide' or 'serverSide' rowModelType, you are using "+t+"."),!1)},i.prototype.onCbSelectAll=function(){if(!this.processingEventFromCheckbox&&this.cbSelectAllVisible){var e=this.cbSelectAll.getValue(),t="uiSelectAll";this.currentPageOnly?t="uiSelectAllCurrentPage":this.filteredOnly&&(t="uiSelectAllFiltered");var r={source:t,justFiltered:this.filteredOnly,justCurrentPage:this.currentPageOnly};e?this.selectionService.selectAllRowNodes(r):this.selectionService.deselectAllRowNodes(r)}},i.prototype.isCheckboxSelection=function(){var e=this.column.getColDef().headerCheckboxSelection;if(typeof e=="function"){var t=e,r={column:this.column,colDef:this.column.getColDef(),columnApi:this.columnApi,api:this.gridApi,context:this.gridOptionsService.context};e=t(r)}return e?this.checkRightRowModelType("headerCheckboxSelection")&&this.checkSelectionType("headerCheckboxSelection"):!1},Ws([T("gridApi")],i.prototype,"gridApi",void 0),Ws([T("columnApi")],i.prototype,"columnApi",void 0),Ws([T("rowModel")],i.prototype,"rowModel",void 0),Ws([T("selectionService")],i.prototype,"selectionService",void 0),i}(ve),iP=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),of=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},ea;(function(n){n.TAB_GUARD="ag-tab-guard",n.TAB_GUARD_TOP="ag-tab-guard-top",n.TAB_GUARD_BOTTOM="ag-tab-guard-bottom"})(ea||(ea={}));var rP=function(n){iP(i,n);function i(e){var t=n.call(this)||this;t.skipTabGuardFocus=!1;var r=e.comp,o=e.eTopGuard,a=e.eBottomGuard,s=e.focusInnerElement,l=e.onFocusIn,u=e.onFocusOut,c=e.shouldStopEventPropagation,d=e.onTabKeyDown,f=e.handleKeyDown,y=e.eFocusableElement;return t.comp=r,t.eTopGuard=o,t.eBottomGuard=a,t.providedFocusInnerElement=s,t.eFocusableElement=y,t.providedFocusIn=l,t.providedFocusOut=u,t.providedShouldStopEventPropagation=c,t.providedOnTabKeyDown=d,t.providedHandleKeyDown=f,t}return i.prototype.postConstruct=function(){var e=this;this.createManagedBean(new rn(this.eFocusableElement,{shouldStopEventPropagation:function(){return e.shouldStopEventPropagation()},onTabKeyDown:function(t){return e.onTabKeyDown(t)},handleKeyDown:function(t){return e.handleKeyDown(t)},onFocusIn:function(t){return e.onFocusIn(t)},onFocusOut:function(t){return e.onFocusOut(t)}})),this.activateTabGuards(),[this.eTopGuard,this.eBottomGuard].forEach(function(t){return e.addManagedListener(t,"focus",e.onFocus.bind(e))})},i.prototype.handleKeyDown=function(e){this.providedHandleKeyDown&&this.providedHandleKeyDown(e)},i.prototype.tabGuardsAreActive=function(){return!!this.eTopGuard&&this.eTopGuard.hasAttribute("tabIndex")},i.prototype.shouldStopEventPropagation=function(){return this.providedShouldStopEventPropagation?this.providedShouldStopEventPropagation():!1},i.prototype.activateTabGuards=function(){var e=this.gridOptionsService.getNum("tabIndex")||0;this.comp.setTabIndex(e.toString())},i.prototype.deactivateTabGuards=function(){this.comp.setTabIndex()},i.prototype.onFocus=function(e){if(this.skipTabGuardFocus){this.skipTabGuardFocus=!1;return}var t=e.target===this.eBottomGuard;this.providedFocusInnerElement?this.providedFocusInnerElement(t):this.focusInnerElement(t)},i.prototype.onFocusIn=function(e){this.providedFocusIn&&this.providedFocusIn(e)||this.deactivateTabGuards()},i.prototype.onFocusOut=function(e){this.providedFocusOut&&this.providedFocusOut(e)||this.eFocusableElement.contains(e.relatedTarget)||this.activateTabGuards()},i.prototype.onTabKeyDown=function(e){var t=this;if(this.providedOnTabKeyDown){this.providedOnTabKeyDown(e);return}if(!e.defaultPrevented){var r=this.tabGuardsAreActive();r&&this.deactivateTabGuards();var o=this.getNextFocusableElement(e.shiftKey);r&&setTimeout(function(){return t.activateTabGuards()},0),o&&(o.focus(),e.preventDefault())}},i.prototype.focusInnerElement=function(e){e===void 0&&(e=!1);var t=this.focusService.findFocusableElements(this.eFocusableElement);this.tabGuardsAreActive()&&(t.splice(0,1),t.splice(t.length-1,1)),t.length&&t[e?t.length-1:0].focus({preventScroll:!0})},i.prototype.getNextFocusableElement=function(e){return this.focusService.findNextFocusableElement(this.eFocusableElement,!1,e)},i.prototype.forceFocusOutOfContainer=function(e){e===void 0&&(e=!1);var t=e?this.eTopGuard:this.eBottomGuard;this.activateTabGuards(),this.skipTabGuardFocus=!0,t.focus()},of([T("focusService")],i.prototype,"focusService",void 0),of([Oe],i.prototype,"postConstruct",null),i}(ve),oP=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),es=function(){return es=Object.assign||function(n){for(var i,e=1,t=arguments.length;e<t;e++){i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(n[r]=i[r])}return n},es.apply(this,arguments)},gr=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},nP=function(n,i){var e=typeof Symbol=="function"&&n[Symbol.iterator];if(!e)return n;var t=e.call(n),r,o=[],a;try{for(;(i===void 0||i-- >0)&&!(r=t.next()).done;)o.push(r.value)}catch(s){a={error:s}}finally{try{r&&!r.done&&(e=t.return)&&e.call(t)}finally{if(a)throw a.error}}return o},aP=function(n,i){for(var e=0,t=i.length,r=n.length;e<t;e++,r++)n[r]=i[e];return n},ta=function(n){oP(i,n);function i(){return n!==null&&n.apply(this,arguments)||this}e=i,i.addKeyboardModeEvents=function(t,r){var o=e.instancesMonitored.get(t);o&&o.length>0?o.indexOf(r)===-1&&o.push(r):(e.instancesMonitored.set(t,[r]),t.addEventListener("keydown",e.toggleKeyboardMode),t.addEventListener("mousedown",e.toggleKeyboardMode))},i.removeKeyboardModeEvents=function(t,r){var o=e.instancesMonitored.get(t),a=[];o&&o.length&&(a=aP([],nP(o)).filter(function(s){return s!==r}),e.instancesMonitored.set(t,a)),a.length===0&&(t.removeEventListener("keydown",e.toggleKeyboardMode),t.removeEventListener("mousedown",e.toggleKeyboardMode))},i.toggleKeyboardMode=function(t){var r=e.keyboardModeActive,o=t.type==="keydown";if(!(o&&(t.ctrlKey||t.metaKey||t.altKey))&&!(r&&o||!r&&!o)){e.keyboardModeActive=o;var a=t.target.ownerDocument;if(a){var s=e.instancesMonitored.get(a);s&&s.forEach(function(l){l.dispatchEvent({type:o?b.EVENT_KEYBOARD_FOCUS:b.EVENT_MOUSE_FOCUS})})}}},i.prototype.init=function(){var t=this,r=this.clearFocusedCell.bind(this);this.addManagedListener(this.eventService,b.EVENT_COLUMN_PIVOT_MODE_CHANGED,r),this.addManagedListener(this.eventService,b.EVENT_NEW_COLUMNS_LOADED,this.onColumnEverythingChanged.bind(this)),this.addManagedListener(this.eventService,b.EVENT_COLUMN_GROUP_OPENED,r),this.addManagedListener(this.eventService,b.EVENT_COLUMN_ROW_GROUP_CHANGED,r),this.ctrlsService.whenReady(function(o){t.gridCtrl=o.gridCtrl;var a=t.gridOptionsService.getDocument();e.addKeyboardModeEvents(a,t.gridCtrl),t.addDestroyFunc(function(){return t.unregisterGridCompController(t.gridCtrl)})})},i.prototype.unregisterGridCompController=function(t){var r=this.gridOptionsService.getDocument();e.removeKeyboardModeEvents(r,t)},i.prototype.onColumnEverythingChanged=function(){if(this.focusedCellPosition){var t=this.focusedCellPosition.column,r=this.columnModel.getGridColumn(t.getId());t!==r&&this.clearFocusedCell()}},i.prototype.isKeyboardMode=function(){return e.keyboardModeActive},i.prototype.getFocusCellToUseAfterRefresh=function(){var t=this.gridOptionsService.getDocument();return this.gridOptionsService.is("suppressFocusAfterRefresh")||!this.focusedCellPosition||this.isDomDataMissingInHierarchy(t.activeElement,_n.DOM_DATA_KEY_ROW_CTRL)?null:this.focusedCellPosition},i.prototype.getFocusHeaderToUseAfterRefresh=function(){var t=this.gridOptionsService.getDocument();return this.gridOptionsService.is("suppressFocusAfterRefresh")||!this.focusedHeaderPosition||this.isDomDataMissingInHierarchy(t.activeElement,ql.DOM_DATA_KEY_HEADER_CTRL)?null:this.focusedHeaderPosition},i.prototype.isDomDataMissingInHierarchy=function(t,r){for(var o=t;o;){var a=this.gridOptionsService.getDomData(o,r);if(a)return!1;o=o.parentNode}return!0},i.prototype.getFocusedCell=function(){return this.focusedCellPosition},i.prototype.shouldRestoreFocus=function(t){var r=this;return this.isCellRestoreFocused(t)?(setTimeout(function(){r.restoredFocusedCellPosition=null},0),!0):!1},i.prototype.isCellRestoreFocused=function(t){return this.restoredFocusedCellPosition==null?!1:this.cellPositionUtils.equals(t,this.restoredFocusedCellPosition)},i.prototype.setRestoreFocusedCell=function(t){this.getFrameworkOverrides().renderingEngine==="react"&&(this.restoredFocusedCellPosition=t)},i.prototype.getFocusEventParams=function(){var t=this.focusedCellPosition,r=t.rowIndex,o=t.rowPinned,a=t.column,s={rowIndex:r,rowPinned:o,column:a,isFullWidthCell:!1},l=this.rowRenderer.getRowByPosition({rowIndex:r,rowPinned:o});return l&&(s.isFullWidthCell=l.isFullWidth()),s},i.prototype.clearFocusedCell=function(){if(this.restoredFocusedCellPosition=null,this.focusedCellPosition!=null){var t=es({type:b.EVENT_CELL_FOCUS_CLEARED},this.getFocusEventParams());this.focusedCellPosition=null,this.eventService.dispatchEvent(t)}},i.prototype.setFocusedCell=function(t){var r=t.column,o=t.rowIndex,a=t.rowPinned,s=t.forceBrowserFocus,l=s===void 0?!1:s,u=t.preventScrollOnBrowserFocus,c=u===void 0?!1:u,d=this.columnModel.getGridColumn(r);if(!d){this.focusedCellPosition=null;return}this.focusedCellPosition=d?{rowIndex:o,rowPinned:ao(a),column:d}:null;var f=es(es({type:b.EVENT_CELL_FOCUSED},this.getFocusEventParams()),{forceBrowserFocus:l,preventScrollOnBrowserFocus:c,floating:null});this.eventService.dispatchEvent(f)},i.prototype.isCellFocused=function(t){return this.focusedCellPosition==null?!1:this.cellPositionUtils.equals(t,this.focusedCellPosition)},i.prototype.isRowNodeFocused=function(t){return this.isRowFocused(t.rowIndex,t.rowPinned)},i.prototype.isHeaderWrapperFocused=function(t){if(this.focusedHeaderPosition==null)return!1;var r=t.getColumnGroupChild(),o=t.getRowIndex(),a=t.getPinned(),s=this.focusedHeaderPosition,l=s.column,u=s.headerRowIndex;return r===l&&o===u&&a==l.getPinned()},i.prototype.clearFocusedHeader=function(){this.focusedHeaderPosition=null},i.prototype.getFocusedHeader=function(){return this.focusedHeaderPosition},i.prototype.setFocusedHeader=function(t,r){this.focusedHeaderPosition={headerRowIndex:t,column:r}},i.prototype.focusHeaderPosition=function(t){var r=t.direction,o=t.fromTab,a=t.allowUserOverride,s=t.event,l=t.fromCell,u=t.headerPosition;if(l&&this.filterManager.isAdvancedFilterHeaderActive())return this.focusAdvancedFilter(u);if(a){var c=this.getFocusedHeader(),d=this.headerNavigationService.getHeaderRowCount();if(o){var f=this.gridOptionsService.getCallback("tabToNextHeader");if(f){var y={backwards:r==="Before",previousHeaderPosition:c,nextHeaderPosition:u,headerRowCount:d};u=f(y)}}else{var f=this.gridOptionsService.getCallback("navigateToNextHeader");if(f&&s){var S={key:s.key,previousHeaderPosition:c,nextHeaderPosition:u,headerRowCount:d,event:s};u=f(S)}}}if(!u)return!1;if(u.headerRowIndex===-1)return this.filterManager.isAdvancedFilterHeaderActive()?this.focusAdvancedFilter(u):this.focusGridView(u.column);this.headerNavigationService.scrollToColumn(u.column,r);var w=this.ctrlsService.getHeaderRowContainerCtrl(u.column.getPinned()),E=w.focusHeader(u.headerRowIndex,u.column,s);return E},i.prototype.focusFirstHeader=function(){var t=this.columnModel.getAllDisplayedColumns()[0];return t?(t.getParent()&&(t=this.columnModel.getColumnGroupAtLevel(t,0)),this.focusHeaderPosition({headerPosition:{headerRowIndex:0,column:t}})):!1},i.prototype.focusLastHeader=function(t){var r=this.headerNavigationService.getHeaderRowCount()-1,o=ai(this.columnModel.getAllDisplayedColumns());return this.focusHeaderPosition({headerPosition:{headerRowIndex:r,column:o},event:t})},i.prototype.focusPreviousFromFirstCell=function(t){return this.filterManager.isAdvancedFilterHeaderActive()?this.focusAdvancedFilter(null):this.focusLastHeader(t)},i.prototype.isAnyCellFocused=function(){return!!this.focusedCellPosition},i.prototype.isRowFocused=function(t,r){return this.focusedCellPosition==null?!1:this.focusedCellPosition.rowIndex===t&&this.focusedCellPosition.rowPinned===ao(r)},i.prototype.findFocusableElements=function(t,r,o){o===void 0&&(o=!1);var a=av,s=hd;r&&(s+=", "+r),o&&(s+=', [tabindex="-1"]');var l=Array.prototype.slice.apply(t.querySelectorAll(a)),u=Array.prototype.slice.apply(t.querySelectorAll(s));if(!u.length)return l;var c=function(d,f){return d.filter(function(y){return f.indexOf(y)===-1})};return c(l,u)},i.prototype.focusInto=function(t,r,o){r===void 0&&(r=!1),o===void 0&&(o=!1);var a=this.findFocusableElements(t,null,o),s=r?ai(a):a[0];return s?(s.focus({preventScroll:!0}),!0):!1},i.prototype.findFocusableElementBeforeTabGuard=function(t,r){if(!r)return null;var o=this.findFocusableElements(t),a=o.indexOf(r);if(a===-1)return null;for(var s=-1,l=a-1;l>=0;l--)if(o[l].classList.contains(ea.TAB_GUARD_TOP)){s=l;break}return s<=0?null:o[s-1]},i.prototype.findNextFocusableElement=function(t,r,o){t===void 0&&(t=this.eGridDiv);var a=this.findFocusableElements(t,r?':not([tabindex="-1"])':null),s=this.gridOptionsService.getDocument(),l=s.activeElement,u;r?u=a.findIndex(function(d){return d.contains(l)}):u=a.indexOf(l);var c=u+(o?-1:1);return c<0||c>=a.length?null:a[c]},i.prototype.isTargetUnderManagedComponent=function(t,r){if(!r)return!1;var o=t.querySelectorAll("."+rn.FOCUS_MANAGED_CLASS);if(!o.length)return!1;for(var a=0;a<o.length;a++)if(o[a].contains(r))return!0;return!1},i.prototype.findTabbableParent=function(t,r){r===void 0&&(r=5);for(var o=0;t&&yl(t)===null&&++o<=r;)t=t.parentElement;return yl(t)===null?null:t},i.prototype.focusGridView=function(t,r){if(this.gridOptionsService.is("suppressCellFocus"))return r?this.focusLastHeader():this.focusNextGridCoreContainer(!1);var o=r?this.rowPositionUtils.getLastRow():this.rowPositionUtils.getFirstRow();if(!o)return!1;var a=o.rowIndex,s=o.rowPinned,l=this.getFocusedHeader();if(!t&&l&&(t=l.column),a==null||!t)return!1;if(this.navigationService.ensureCellVisible({rowIndex:a,column:t,rowPinned:s}),this.setFocusedCell({rowIndex:a,column:t,rowPinned:ao(s),forceBrowserFocus:!0}),this.rangeService){var u={rowIndex:a,rowPinned:s,column:t};this.rangeService.setRangeToCell(u)}return!0},i.prototype.focusNextGridCoreContainer=function(t,r){return r===void 0&&(r=!1),!r&&this.gridCtrl.focusNextInnerContainer(t)?!0:((r||!t&&!this.gridCtrl.isDetailGrid())&&this.gridCtrl.forceFocusOutOfContainer(t),!1)},i.prototype.focusAdvancedFilter=function(t){return this.advancedFilterFocusColumn=t?.column,this.advancedFilterService.getCtrl().focusHeaderComp()},i.prototype.focusNextFromAdvancedFilter=function(t,r){var o,a,s=(o=r?void 0:this.advancedFilterFocusColumn)!==null&&o!==void 0?o:(a=this.columnModel.getAllDisplayedColumns())===null||a===void 0?void 0:a[0];return t?this.focusHeaderPosition({headerPosition:{column:s,headerRowIndex:this.headerNavigationService.getHeaderRowCount()-1}}):this.focusGridView(s)},i.prototype.clearAdvancedFilterColumn=function(){this.advancedFilterFocusColumn=void 0};var e;return i.AG_KEYBOARD_FOCUS="ag-keyboard-focus",i.keyboardModeActive=!1,i.instancesMonitored=new Map,gr([T("eGridDiv")],i.prototype,"eGridDiv",void 0),gr([T("columnModel")],i.prototype,"columnModel",void 0),gr([T("headerNavigationService")],i.prototype,"headerNavigationService",void 0),gr([T("rowRenderer")],i.prototype,"rowRenderer",void 0),gr([T("rowPositionUtils")],i.prototype,"rowPositionUtils",void 0),gr([T("cellPositionUtils")],i.prototype,"cellPositionUtils",void 0),gr([Zt("rangeService")],i.prototype,"rangeService",void 0),gr([T("navigationService")],i.prototype,"navigationService",void 0),gr([T("ctrlsService")],i.prototype,"ctrlsService",void 0),gr([T("filterManager")],i.prototype,"filterManager",void 0),gr([Zt("advancedFilterService")],i.prototype,"advancedFilterService",void 0),gr([Oe],i.prototype,"init",null),i=e=gr([Ue("focusService")],i),i}(ve),sP=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Co=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},lP=function(n){sP(i,n);function i(e,t){var r=n.call(this,e,t)||this;return r.refreshFunctions=[],r.userHeaderClasses=new Set,r.ariaDescriptionProperties=new Map,r.column=e,r}return i.prototype.setComp=function(e,t,r,o){var a=this;n.prototype.setGui.call(this,t),this.comp=e,this.updateState(),this.setupWidth(),this.setupMovingCss(),this.setupMenuClass(),this.setupSortableClass(),this.setupWrapTextClass(),this.refreshSpanHeaderHeight(),this.setupAutoHeight(o),this.addColumnHoverListener(),this.setupFilterCss(),this.setupClassesFromColDef(),this.setupTooltip(),this.addActiveHeaderMouseListeners(),this.setupSelectAll(),this.setupUserComp(),this.refreshAria(),this.createManagedBean(new $O(this.getPinned(),this.column,r,e,this)),this.createManagedBean(new Id([this.column],t)),this.createManagedBean(new Fd(this.column,t,this.beans)),this.createManagedBean(new rn(t,{shouldStopEventPropagation:function(s){return a.shouldStopEventPropagation(s)},onTabKeyDown:function(){return null},handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addMouseDownListenerIfNeeded(t),this.addManagedListener(this.column,li.EVENT_COL_DEF_CHANGED,this.onColDefChanged.bind(this)),this.addManagedListener(this.eventService,b.EVENT_COLUMN_VALUE_CHANGED,this.onColumnValueChanged.bind(this)),this.addManagedListener(this.eventService,b.EVENT_COLUMN_ROW_GROUP_CHANGED,this.onColumnRowGroupChanged.bind(this)),this.addManagedListener(this.eventService,b.EVENT_COLUMN_PIVOT_CHANGED,this.onColumnPivotChanged.bind(this)),this.addManagedListener(this.eventService,b.EVENT_HEADER_HEIGHT_CHANGED,this.onHeaderHeightChanged.bind(this)),this.addManagedListener(this.eventService,b.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onHeaderHeightChanged.bind(this))},i.prototype.addMouseDownListenerIfNeeded=function(e){var t=this;if(Fr()){var r=["mousedown","touchstart"],o=this.gridOptionsService.getDocument();r.forEach(function(a){t.addManagedListener(e,a,function(s){var l=o.activeElement;l!==e&&!e.contains(l)&&(e.focus(),ta.toggleKeyboardMode(s))})})}},i.prototype.setupUserComp=function(){var e=this.lookupUserCompDetails();this.setCompDetails(e)},i.prototype.setCompDetails=function(e){this.userCompDetails=e,this.comp.setUserCompDetails(e)},i.prototype.lookupUserCompDetails=function(){var e=this.createParams(),t=this.column.getColDef();return this.userComponentFactory.getHeaderCompDetails(t,e)},i.prototype.createParams=function(){var e=this,t=this.column.getColDef(),r={column:this.column,displayName:this.displayName,enableSorting:t.sortable,enableMenu:this.menuEnabled,showColumnMenu:function(o){e.gridApi.showColumnMenuAfterButtonClick(e.column,o)},progressSort:function(o){e.sortController.progressSort(e.column,!!o,"uiColumnSorted")},setSort:function(o,a){e.sortController.setSortForColumn(e.column,o,!!a,"uiColumnSorted")},api:this.gridApi,columnApi:this.columnApi,context:this.gridOptionsService.context,eGridHeader:this.getGui()};return r},i.prototype.setupSelectAll=function(){this.selectAllFeature=this.createManagedBean(new tP(this.column)),this.selectAllFeature.setComp(this)},i.prototype.getSelectAllGui=function(){return this.selectAllFeature.getCheckboxGui()},i.prototype.handleKeyDown=function(e){n.prototype.handleKeyDown.call(this,e),e.key===J.SPACE&&this.selectAllFeature.onSpaceKeyDown(e),e.key===J.ENTER&&this.onEnterKeyDown(e)},i.prototype.onEnterKeyDown=function(e){var t=this.comp.getUserCompInstance();if(t){if(e.ctrlKey||e.metaKey)this.menuEnabled&&t.showMenu&&(e.preventDefault(),t.showMenu());else if(this.sortable){var r=e.shiftKey;this.sortController.progressSort(this.column,r,"uiColumnSorted")}}},i.prototype.isMenuEnabled=function(){return this.menuEnabled},i.prototype.onFocusIn=function(e){if(!this.getGui().contains(e.relatedTarget)){var t=this.getRowIndex();this.focusService.setFocusedHeader(t,this.column)}this.setActiveHeader(!0)},i.prototype.onFocusOut=function(e){this.getGui().contains(e.relatedTarget)||this.setActiveHeader(!1)},i.prototype.setupTooltip=function(){var e=this,t={getColumn:function(){return e.column},getColDef:function(){return e.column.getColDef()},getGui:function(){return e.eGui},getLocation:function(){return"header"},getTooltipValue:function(){var o=e.column.getColDef().headerTooltip;return o}},r=this.createManagedBean(new Md(t,this.beans));r.setComp(this.eGui),this.refreshFunctions.push(function(){return r.refreshToolTip()})},i.prototype.setupClassesFromColDef=function(){var e=this,t=function(){var r=e.column.getColDef(),o=Kv.getHeaderClassesFromColDef(r,e.gridOptionsService,e.column,null),a=e.userHeaderClasses;e.userHeaderClasses=new Set(o),o.forEach(function(s){a.has(s)?a.delete(s):e.comp.addOrRemoveCssClass(s,!0)}),a.forEach(function(s){return e.comp.addOrRemoveCssClass(s,!1)})};this.refreshFunctions.push(t),t()},i.prototype.setDragSource=function(e){var t=this;if(this.dragSourceElement=e,this.removeDragSource(),!!e&&this.draggable){var r=!this.gridOptionsService.is("suppressDragLeaveHidesColumns");this.moveDragSource={type:nr.HeaderCell,eElement:e,getDefaultIconName:function(){return r?zi.ICON_HIDE:zi.ICON_NOT_ALLOWED},getDragItem:function(){return t.createDragItem()},dragItemName:this.displayName,onDragStarted:function(){r=!t.gridOptionsService.is("suppressDragLeaveHidesColumns"),t.column.setMoving(!0,"uiColumnMoved")},onDragStopped:function(){return t.column.setMoving(!1,"uiColumnMoved")},onGridEnter:function(o){var a;if(r){var s=((a=o?.columns)===null||a===void 0?void 0:a.filter(function(l){return!l.getColDef().lockVisible}))||[];t.columnModel.setColumnsVisible(s,!0,"uiColumnMoved")}},onGridExit:function(o){var a;if(r){var s=((a=o?.columns)===null||a===void 0?void 0:a.filter(function(l){return!l.getColDef().lockVisible}))||[];t.columnModel.setColumnsVisible(s,!1,"uiColumnMoved")}}},this.dragAndDropService.addDragSource(this.moveDragSource,!0)}},i.prototype.createDragItem=function(){var e={};return e[this.column.getId()]=this.column.isVisible(),{columns:[this.column],visibleState:e}},i.prototype.removeDragSource=function(){this.moveDragSource&&(this.dragAndDropService.removeDragSource(this.moveDragSource),this.moveDragSource=void 0)},i.prototype.onColDefChanged=function(){this.refresh()},i.prototype.updateState=function(){var e=this.column.getColDef();this.menuEnabled=this.menuFactory.isMenuEnabled(this.column)&&!e.suppressMenu,this.sortable=e.sortable,this.displayName=this.calculateDisplayName(),this.draggable=this.workOutDraggable()},i.prototype.addRefreshFunction=function(e){this.refreshFunctions.push(e)},i.prototype.refresh=function(){this.updateState(),this.refreshHeaderComp(),this.refreshAria(),this.refreshFunctions.forEach(function(e){return e()})},i.prototype.refreshHeaderComp=function(){var e=this.lookupUserCompDetails(),t=this.comp.getUserCompInstance(),r=t!=null&&this.userCompDetails.componentClass==e.componentClass,o=r?this.attemptHeaderCompRefresh(e.params):!1;o?this.setDragSource(this.dragSourceElement):this.setCompDetails(e)},i.prototype.attemptHeaderCompRefresh=function(e){var t=this.comp.getUserCompInstance();if(!t||!t.refresh)return!1;var r=t.refresh(e);return r},i.prototype.calculateDisplayName=function(){return this.columnModel.getDisplayNameForColumn(this.column,"header",!0)},i.prototype.checkDisplayName=function(){this.displayName!==this.calculateDisplayName()&&this.refresh()},i.prototype.workOutDraggable=function(){var e=this.column.getColDef(),t=this.gridOptionsService.is("suppressMovableColumns"),r=!t&&!e.suppressMovable&&!e.lockPosition;return!!r||!!e.enableRowGroup||!!e.enablePivot},i.prototype.onColumnRowGroupChanged=function(){this.checkDisplayName()},i.prototype.onColumnPivotChanged=function(){this.checkDisplayName()},i.prototype.onColumnValueChanged=function(){this.checkDisplayName()},i.prototype.setupWidth=function(){var e=this,t=function(){var r=e.column.getActualWidth();e.comp.setWidth(r+"px")};this.addManagedListener(this.column,li.EVENT_WIDTH_CHANGED,t),t()},i.prototype.setupMovingCss=function(){var e=this,t=function(){e.comp.addOrRemoveCssClass("ag-header-cell-moving",e.column.isMoving())};this.addManagedListener(this.column,li.EVENT_MOVING_CHANGED,t),t()},i.prototype.setupMenuClass=function(){var e=this,t=function(){e.comp.addOrRemoveCssClass("ag-column-menu-visible",e.column.isMenuVisible())};this.addManagedListener(this.column,li.EVENT_MENU_VISIBLE_CHANGED,t),t()},i.prototype.setupSortableClass=function(){var e=this,t=function(){e.comp.addOrRemoveCssClass("ag-header-cell-sortable",!!e.sortable)};t(),this.addRefreshFunction(t),this.addManagedListener(this.eventService,li.EVENT_SORT_CHANGED,this.refreshAriaSort.bind(this))},i.prototype.setupWrapTextClass=function(){var e=this,t=function(){var r=!!e.column.getColDef().wrapHeaderText;e.comp.addOrRemoveCssClass("ag-header-cell-wrap-text",r)};t(),this.addRefreshFunction(t)},i.prototype.onHeaderHeightChanged=function(){this.refreshSpanHeaderHeight()},i.prototype.refreshSpanHeaderHeight=function(){var e=this,t=e.eGui,r=e.column,o=e.comp,a=e.columnModel,s=e.gridOptionsService;if(r.isSpanHeaderHeight()){var l=this.getColumnGroupPaddingInfo(),u=l.numberOfParents,c=l.isSpanningTotal;o.addOrRemoveCssClass("ag-header-span-height",u>0);var d=a.getColumnHeaderRowHeight();if(u===0){o.addOrRemoveCssClass("ag-header-span-total",!1),t.style.setProperty("top","0px"),t.style.setProperty("height",d+"px");return}o.addOrRemoveCssClass("ag-header-span-total",c);var f=s.is("pivotMode"),y=f?a.getPivotGroupHeaderHeight():a.getGroupHeaderHeight(),S=u*y;t.style.setProperty("top",-S+"px"),t.style.setProperty("height",d+S+"px")}},i.prototype.getColumnGroupPaddingInfo=function(){var e=this.column.getParent();if(!e||!e.isPadding())return{numberOfParents:0,isSpanningTotal:!1};for(var t=e.getPaddingLevel()+1,r=!0;e;){if(!e.isPadding()){r=!1;break}e=e.getParent()}return{numberOfParents:t,isSpanningTotal:r}},i.prototype.setupAutoHeight=function(e){var t=this,r=function(c){if(t.isAlive()){var d=en(t.getGui()),f=d.paddingTop,y=d.paddingBottom,S=d.borderBottomWidth,w=d.borderTopWidth,E=f+y+S+w,_=e.offsetHeight,L=_+E;if(c<5){var P=t.beans.gridOptionsService.getDocument(),V=!P||!P.contains(e),ne=L==0;if(V||ne){t.beans.frameworkOverrides.setTimeout(function(){return r(c+1)},0);return}}t.columnModel.setColumnHeaderHeight(t.column,L)}},o=!1,a,s=function(){var c=t.column.isAutoHeaderHeight();c&&!o&&l(),!c&&o&&u()},l=function(){o=!0,r(0),t.comp.addOrRemoveCssClass("ag-header-cell-auto-height",!0),a=t.resizeObserverService.observeResize(e,function(){return r(0)})},u=function(){o=!1,a&&a(),t.comp.addOrRemoveCssClass("ag-header-cell-auto-height",!1),a=void 0};s(),this.addDestroyFunc(function(){return u()}),this.addManagedListener(this.column,li.EVENT_WIDTH_CHANGED,function(){return o&&r(0)}),this.addManagedListener(this.eventService,li.EVENT_SORT_CHANGED,function(){o&&t.beans.frameworkOverrides.setTimeout(function(){return r(0)})}),this.addRefreshFunction(s)},i.prototype.refreshAriaSort=function(){if(this.sortable){var e=this.localeService.getLocaleTextFunc(),t=this.sortController.getDisplaySortForColumn(this.column)||null;this.comp.setAriaSort(Gh(t)),this.setAriaDescriptionProperty("sort",e("ariaSortableColumn","Press ENTER to sort."))}else this.comp.setAriaSort(),this.setAriaDescriptionProperty("sort",null)},i.prototype.refreshAriaMenu=function(){if(this.menuEnabled){var e=this.localeService.getLocaleTextFunc();this.setAriaDescriptionProperty("menu",e("ariaMenuColumn","Press CTRL ENTER to open column menu."))}else this.setAriaDescriptionProperty("menu",null)},i.prototype.setAriaDescriptionProperty=function(e,t){t!=null?this.ariaDescriptionProperties.set(e,t):this.ariaDescriptionProperties.delete(e)},i.prototype.refreshAriaDescription=function(){var e=Array.from(this.ariaDescriptionProperties.values());this.comp.setAriaDescription(e.length?e.join(" "):void 0)},i.prototype.refreshAria=function(){this.refreshAriaSort(),this.refreshAriaMenu(),this.refreshAriaDescription()},i.prototype.addColumnHoverListener=function(){var e=this,t=function(){if(e.gridOptionsService.is("columnHoverHighlight")){var r=e.columnHoverService.isHovered(e.column);e.comp.addOrRemoveCssClass("ag-column-hover",r)}};this.addManagedListener(this.eventService,b.EVENT_COLUMN_HOVER_CHANGED,t),t()},i.prototype.setupFilterCss=function(){var e=this,t=function(){e.comp.addOrRemoveCssClass("ag-header-cell-filtered",e.column.isFilterActive())};this.addManagedListener(this.column,li.EVENT_FILTER_ACTIVE_CHANGED,t),t()},i.prototype.getColId=function(){return this.column.getColId()},i.prototype.addActiveHeaderMouseListeners=function(){var e=this,t=function(r){return e.setActiveHeader(r.type==="mouseenter")};this.addManagedListener(this.getGui(),"mouseenter",t),this.addManagedListener(this.getGui(),"mouseleave",t)},i.prototype.setActiveHeader=function(e){this.comp.addOrRemoveCssClass("ag-header-active",e)},Co([T("columnModel")],i.prototype,"columnModel",void 0),Co([T("columnHoverService")],i.prototype,"columnHoverService",void 0),Co([T("sortController")],i.prototype,"sortController",void 0),Co([T("menuFactory")],i.prototype,"menuFactory",void 0),Co([T("dragAndDropService")],i.prototype,"dragAndDropService",void 0),Co([T("resizeObserverService")],i.prototype,"resizeObserverService",void 0),Co([T("gridApi")],i.prototype,"gridApi",void 0),Co([T("columnApi")],i.prototype,"columnApi",void 0),Co([Ki],i.prototype,"removeDragSource",null),i}(ql),uP=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Us=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},cP=function(n){uP(i,n);function i(e,t,r,o){var a=n.call(this)||this;return a.eResize=t,a.comp=e,a.pinned=r,a.columnGroup=o,a}return i.prototype.postConstruct=function(){var e=this;if(!this.columnGroup.isResizable()){this.comp.setResizableDisplayed(!1);return}var t=this.horizontalResizeService.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});if(this.addDestroyFunc(t),!this.gridOptionsService.is("suppressAutoSize")){var r=this.gridOptionsService.is("skipHeaderOnAutoSize");this.eResize.addEventListener("dblclick",function(){var o=[],a=e.columnGroup.getDisplayedLeafColumns();a.forEach(function(s){s.getColDef().suppressAutoSize||o.push(s.getColId())}),o.length>0&&e.columnModel.autoSizeColumns({columns:o,skipHeader:r,stopAtGroup:e.columnGroup,source:"uiColumnResized"}),e.resizeLeafColumnsToFit("uiColumnResized")})}},i.prototype.onResizeStart=function(e){var t=this;this.calculateInitialValues();var r=null;if(e&&(r=this.columnModel.getDisplayedGroupAfter(this.columnGroup)),r){var o=r.getDisplayedLeafColumns();this.resizeTakeFromCols=o.filter(function(a){return a.isResizable()}),this.resizeTakeFromStartWidth=0,this.resizeTakeFromCols.forEach(function(a){return t.resizeTakeFromStartWidth+=a.getActualWidth()}),this.resizeTakeFromRatios=[],this.resizeTakeFromCols.forEach(function(a){return t.resizeTakeFromRatios.push(a.getActualWidth()/t.resizeTakeFromStartWidth)})}else this.resizeTakeFromCols=null,this.resizeTakeFromStartWidth=null,this.resizeTakeFromRatios=null;this.comp.addOrRemoveCssClass("ag-column-resizing",!0)},i.prototype.onResizing=function(e,t,r){r===void 0&&(r="uiColumnResized");var o=this.normaliseDragChange(t),a=this.resizeStartWidth+o;this.resizeColumns(a,r,e)},i.prototype.resizeLeafColumnsToFit=function(e){var t=this.autoWidthCalculator.getPreferredWidthForColumnGroup(this.columnGroup);this.calculateInitialValues(),t>this.resizeStartWidth&&this.resizeColumns(t,e,!0)},i.prototype.resizeColumns=function(e,t,r){r===void 0&&(r=!0);var o=[];if(o.push({columns:this.resizeCols,ratios:this.resizeRatios,width:e}),this.resizeTakeFromCols){var a=e-this.resizeStartWidth;o.push({columns:this.resizeTakeFromCols,ratios:this.resizeTakeFromRatios,width:this.resizeTakeFromStartWidth-a})}this.columnModel.resizeColumnSets({resizeSets:o,finished:r,source:t}),r&&this.comp.addOrRemoveCssClass("ag-column-resizing",!1)},i.prototype.calculateInitialValues=function(){var e=this,t=this.columnGroup.getDisplayedLeafColumns();this.resizeCols=t.filter(function(r){return r.isResizable()}),this.resizeStartWidth=0,this.resizeCols.forEach(function(r){return e.resizeStartWidth+=r.getActualWidth()}),this.resizeRatios=[],this.resizeCols.forEach(function(r){return e.resizeRatios.push(r.getActualWidth()/e.resizeStartWidth)})},i.prototype.normaliseDragChange=function(e){var t=e;return this.gridOptionsService.is("enableRtl")?this.pinned!=="left"&&(t*=-1):this.pinned==="right"&&(t*=-1),t},Us([T("horizontalResizeService")],i.prototype,"horizontalResizeService",void 0),Us([T("autoWidthCalculator")],i.prototype,"autoWidthCalculator",void 0),Us([T("columnModel")],i.prototype,"columnModel",void 0),Us([Oe],i.prototype,"postConstruct",null),i}(ve),dP=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),pP=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},fP=function(n){dP(i,n);function i(e,t){var r=n.call(this)||this;return r.removeChildListenersFuncs=[],r.columnGroup=t,r.comp=e,r}return i.prototype.postConstruct=function(){this.addListenersToChildrenColumns(),this.addManagedListener(this.columnGroup,Xi.EVENT_DISPLAYED_CHILDREN_CHANGED,this.onDisplayedChildrenChanged.bind(this)),this.onWidthChanged(),this.addDestroyFunc(this.removeListenersOnChildrenColumns.bind(this))},i.prototype.addListenersToChildrenColumns=function(){var e=this;this.removeListenersOnChildrenColumns();var t=this.onWidthChanged.bind(this);this.columnGroup.getLeafColumns().forEach(function(r){r.addEventListener("widthChanged",t),r.addEventListener("visibleChanged",t),e.removeChildListenersFuncs.push(function(){r.removeEventListener("widthChanged",t),r.removeEventListener("visibleChanged",t)})})},i.prototype.removeListenersOnChildrenColumns=function(){this.removeChildListenersFuncs.forEach(function(e){return e()}),this.removeChildListenersFuncs=[]},i.prototype.onDisplayedChildrenChanged=function(){this.addListenersToChildrenColumns(),this.onWidthChanged()},i.prototype.onWidthChanged=function(){var e=this.columnGroup.getActualWidth();this.comp.setWidth(e+"px"),this.comp.addOrRemoveCssClass("ag-hidden",e===0)},pP([Oe],i.prototype,"postConstruct",null),i}(ve),hP=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),js=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},vP=function(n){hP(i,n);function i(e,t){var r=n.call(this,e,t)||this;return r.columnGroup=e,r}return i.prototype.setComp=function(e,t,r){n.prototype.setGui.call(this,t),this.comp=e,this.displayName=this.columnModel.getDisplayNameForColumnGroup(this.columnGroup,"header"),this.addClasses(),this.setupMovingCss(),this.setupExpandable(),this.setupTooltip(),this.setupUserComp();var o=this.getParentRowCtrl().getPinned(),a=this.columnGroup.getProvidedColumnGroup().getLeafColumns();this.createManagedBean(new Id(a,t)),this.createManagedBean(new Fd(this.columnGroup,t,this.beans)),this.createManagedBean(new fP(e,this.columnGroup)),this.groupResizeFeature=this.createManagedBean(new cP(e,r,o,this.columnGroup)),this.createManagedBean(new rn(t,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:function(){},handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)}))},i.prototype.resizeLeafColumnsToFit=function(e){this.groupResizeFeature&&this.groupResizeFeature.resizeLeafColumnsToFit(e)},i.prototype.setupUserComp=function(){var e=this,t=this.displayName,r={displayName:this.displayName,columnGroup:this.columnGroup,setExpanded:function(u){e.columnModel.setColumnGroupOpened(e.columnGroup.getProvidedColumnGroup(),u,"gridInitializing")},api:this.gridApi,columnApi:this.columnApi,context:this.gridOptionsService.context};if(!t){for(var o=this.columnGroup,a=o.getLeafColumns();o.getParent()&&o.getParent().getLeafColumns().length===a.length;)o=o.getParent();var s=o.getColGroupDef();s&&(t=s.headerName),t||(t=a?this.columnModel.getDisplayNameForColumn(a[0],"header",!0):"")}var l=this.userComponentFactory.getHeaderGroupCompDetails(r);this.comp.setUserCompDetails(l)},i.prototype.setupTooltip=function(){var e=this,t=this.columnGroup.getColGroupDef(),r={getColumn:function(){return e.columnGroup},getGui:function(){return e.eGui},getLocation:function(){return"headerGroup"},getTooltipValue:function(){return t&&t.headerTooltip}};t&&(r.getColDef=function(){return t});var o=this.createManagedBean(new Md(r,this.beans));o.setComp(this.eGui)},i.prototype.setupExpandable=function(){var e=this.columnGroup.getProvidedColumnGroup();this.refreshExpanded(),this.addManagedListener(e,xi.EVENT_EXPANDABLE_CHANGED,this.refreshExpanded.bind(this)),this.addManagedListener(e,xi.EVENT_EXPANDED_CHANGED,this.refreshExpanded.bind(this))},i.prototype.refreshExpanded=function(){var e=this.columnGroup;this.expandable=e.isExpandable();var t=e.isExpanded();this.expandable?this.comp.setAriaExpanded(t?"true":"false"):this.comp.setAriaExpanded(void 0)},i.prototype.getColId=function(){return this.columnGroup.getUniqueId()},i.prototype.addClasses=function(){var e=this,t=this.columnGroup.getColGroupDef(),r=Kv.getHeaderClassesFromColDef(t,this.gridOptionsService,null,this.columnGroup);if(this.columnGroup.isPadding()){r.push("ag-header-group-cell-no-group");var o=this.columnGroup.getLeafColumns();o.every(function(a){return a.isSpanHeaderHeight()})&&r.push("ag-header-span-height")}else r.push("ag-header-group-cell-with-group");r.forEach(function(a){return e.comp.addOrRemoveCssClass(a,!0)})},i.prototype.setupMovingCss=function(){var e=this,t=this.columnGroup.getProvidedColumnGroup(),r=t.getLeafColumns(),o=function(){return e.comp.addOrRemoveCssClass("ag-header-cell-moving",e.columnGroup.isMoving())};r.forEach(function(a){e.addManagedListener(a,li.EVENT_MOVING_CHANGED,o)}),o()},i.prototype.onFocusIn=function(e){if(!this.eGui.contains(e.relatedTarget)){var t=this.getRowIndex();this.beans.focusService.setFocusedHeader(t,this.columnGroup)}},i.prototype.handleKeyDown=function(e){n.prototype.handleKeyDown.call(this,e);var t=this.getWrapperHasFocus();if(!(!this.expandable||!t)&&e.key===J.ENTER){var r=this.columnGroup,o=!r.isExpanded();this.columnModel.setColumnGroupOpened(r.getProvidedColumnGroup(),o,"uiColumnExpanded")}},i.prototype.setDragSource=function(e){var t=this;if(!this.isSuppressMoving()){var r=this.columnGroup.getProvidedColumnGroup().getLeafColumns(),o=!this.gridOptionsService.is("suppressDragLeaveHidesColumns"),a={type:nr.HeaderCell,eElement:e,getDefaultIconName:function(){return o?zi.ICON_HIDE:zi.ICON_NOT_ALLOWED},dragItemName:this.displayName,getDragItem:this.getDragItemForGroup.bind(this),onDragStarted:function(){o=!t.gridOptionsService.is("suppressDragLeaveHidesColumns"),r.forEach(function(s){return s.setMoving(!0,"uiColumnDragged")})},onDragStopped:function(){return r.forEach(function(s){return s.setMoving(!1,"uiColumnDragged")})},onGridEnter:function(s){var l;if(o){var u=((l=s?.columns)===null||l===void 0?void 0:l.filter(function(c){return!c.getColDef().lockVisible}))||[];t.columnModel.setColumnsVisible(u,!0,"uiColumnMoved")}},onGridExit:function(s){var l;if(o){var u=((l=s?.columns)===null||l===void 0?void 0:l.filter(function(c){return!c.getColDef().lockVisible}))||[];t.columnModel.setColumnsVisible(u,!1,"uiColumnMoved")}}};this.dragAndDropService.addDragSource(a,!0),this.addDestroyFunc(function(){return t.dragAndDropService.removeDragSource(a)})}},i.prototype.getDragItemForGroup=function(){var e=this.columnGroup.getProvidedColumnGroup().getLeafColumns(),t={};e.forEach(function(o){return t[o.getId()]=o.isVisible()});var r=[];return this.columnModel.getAllDisplayedColumns().forEach(function(o){e.indexOf(o)>=0&&(r.push(o),mr(e,o))}),e.forEach(function(o){return r.push(o)}),{columns:r,visibleState:t}},i.prototype.isSuppressMoving=function(){var e=!1;this.columnGroup.getLeafColumns().forEach(function(r){(r.getColDef().suppressMovable||r.getColDef().lockPosition)&&(e=!0)});var t=e||this.gridOptionsService.is("suppressMovableColumns");return t},js([T("columnModel")],i.prototype,"columnModel",void 0),js([T("dragAndDropService")],i.prototype,"dragAndDropService",void 0),js([T("gridApi")],i.prototype,"gridApi",void 0),js([T("columnApi")],i.prototype,"columnApi",void 0),i}(ql),gP=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),zs=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},yP=0,Xu=function(n){gP(i,n);function i(e,t,r){var o=n.call(this)||this;o.instanceId=yP++,o.headerCellCtrls={},o.rowIndex=e,o.pinned=t,o.type=r;var a=r==Zi.COLUMN_GROUP?"ag-header-row-column-group":r==Zi.FLOATING_FILTER?"ag-header-row-column-filter":"ag-header-row-column";return o.headerRowClass="ag-header-row "+a,o}return i.prototype.postConstruct=function(){this.isPrintLayout=this.gridOptionsService.isDomLayout("print"),this.isEnsureDomOrder=this.gridOptionsService.is("ensureDomOrder")},i.prototype.getInstanceId=function(){return this.instanceId},i.prototype.setComp=function(e,t){t===void 0&&(t=!0),this.comp=e,t&&(this.onRowHeightChanged(),this.onVirtualColumnsChanged()),this.setWidth(),this.addEventListeners()},i.prototype.getHeaderRowClass=function(){return this.headerRowClass},i.prototype.getAriaRowIndex=function(){return this.rowIndex+1},i.prototype.getTransform=function(){if(Fr())return"translateZ(0)"},i.prototype.addEventListeners=function(){var e=this;this.addManagedListener(this.eventService,b.EVENT_COLUMN_RESIZED,this.onColumnResized.bind(this)),this.addManagedListener(this.eventService,b.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(this.eventService,b.EVENT_VIRTUAL_COLUMNS_CHANGED,function(t){return e.onVirtualColumnsChanged(t.afterScroll)}),this.addManagedListener(this.eventService,b.EVENT_COLUMN_HEADER_HEIGHT_CHANGED,this.onRowHeightChanged.bind(this)),this.addManagedListener(this.eventService,b.EVENT_GRID_STYLES_CHANGED,this.onRowHeightChanged.bind(this)),this.addManagedListener(this.eventService,b.EVENT_ADVANCED_FILTER_ENABLED_CHANGED,this.onRowHeightChanged.bind(this)),this.addManagedPropertyListener("domLayout",this.onDisplayedColumnsChanged.bind(this)),this.addManagedPropertyListener("ensureDomOrder",function(t){return e.isEnsureDomOrder=t.currentValue}),this.addManagedPropertyListener("headerHeight",this.onRowHeightChanged.bind(this)),this.addManagedPropertyListener("pivotHeaderHeight",this.onRowHeightChanged.bind(this)),this.addManagedPropertyListener("groupHeaderHeight",this.onRowHeightChanged.bind(this)),this.addManagedPropertyListener("pivotGroupHeaderHeight",this.onRowHeightChanged.bind(this)),this.addManagedPropertyListener("floatingFiltersHeight",this.onRowHeightChanged.bind(this))},i.prototype.getHeaderCellCtrl=function(e){return Tn(this.headerCellCtrls).find(function(t){return t.getColumnGroupChild()===e})},i.prototype.onDisplayedColumnsChanged=function(){this.isPrintLayout=this.gridOptionsService.isDomLayout("print"),this.onVirtualColumnsChanged(),this.setWidth(),this.onRowHeightChanged()},i.prototype.getType=function(){return this.type},i.prototype.onColumnResized=function(){this.setWidth()},i.prototype.setWidth=function(){var e=this.getWidthForRow();this.comp.setWidth(e+"px")},i.prototype.getWidthForRow=function(){if(this.isPrintLayout){var e=this.pinned!=null;return e?0:this.columnModel.getContainerWidth("right")+this.columnModel.getContainerWidth("left")+this.columnModel.getContainerWidth(null)}return this.columnModel.getContainerWidth(this.pinned)},i.prototype.onRowHeightChanged=function(){var e=this.getTopAndHeight(),t=e.topOffset,r=e.rowHeight;this.comp.setTop(t+"px"),this.comp.setHeight(r+"px")},i.prototype.getTopAndHeight=function(){var e=this.columnModel.getHeaderRowCount(),t=[],r=0;this.filterManager.hasFloatingFilters()&&(e++,r=1);for(var o=this.columnModel.getColumnGroupHeaderRowHeight(),a=this.columnModel.getColumnHeaderRowHeight(),s=1+r,l=e-s,u=0;u<l;u++)t.push(o);t.push(a);for(var u=0;u<r;u++)t.push(this.columnModel.getFloatingFiltersHeight());for(var c=0,u=0;u<this.rowIndex;u++)c+=t[u];var d=t[this.rowIndex];return{topOffset:c,rowHeight:d}},i.prototype.getPinned=function(){return this.pinned},i.prototype.getRowIndex=function(){return this.rowIndex},i.prototype.onVirtualColumnsChanged=function(e){e===void 0&&(e=!1);var t=this.getHeaderCtrls(),r=this.isEnsureDomOrder||this.isPrintLayout;this.comp.setHeaderCtrls(t,r,e)},i.prototype.getHeaderCtrls=function(){var e=this,t=this.headerCellCtrls;this.headerCellCtrls={};var r=this.getColumnsInViewport();r.forEach(function(s){if(!s.isEmptyGroup()){var l=s.getUniqueId(),u=t[l];delete t[l];var c=u&&u.getColumnGroupChild()!=s;if(c&&(e.destroyBean(u),u=void 0),u==null)switch(e.type){case Zi.FLOATING_FILTER:u=e.createBean(new JO(s,e));break;case Zi.COLUMN_GROUP:u=e.createBean(new vP(s,e));break;default:u=e.createBean(new lP(s,e));break}e.headerCellCtrls[l]=u}});var o=function(s){var l=e.focusService.isHeaderWrapperFocused(s);if(!l)return!1;var u=e.columnModel.isDisplayed(s.getColumnGroupChild());return u};Oi(t,function(s,l){var u=o(l);u?e.headerCellCtrls[s]=l:e.destroyBean(l)});var a=lo(this.headerCellCtrls);return a},i.prototype.getColumnsInViewport=function(){return this.isPrintLayout?this.getColumnsInViewportPrintLayout():this.getColumnsInViewportNormalLayout()},i.prototype.getColumnsInViewportPrintLayout=function(){var e=this;if(this.pinned!=null)return[];var t=[],r=this.getActualDepth();return["left",null,"right"].forEach(function(o){var a=e.columnModel.getVirtualHeaderGroupRow(o,r);t=t.concat(a)}),t},i.prototype.getActualDepth=function(){return this.type==Zi.FLOATING_FILTER?this.rowIndex-1:this.rowIndex},i.prototype.getColumnsInViewportNormalLayout=function(){return this.columnModel.getVirtualHeaderGroupRow(this.pinned,this.getActualDepth())},i.prototype.focusHeader=function(e,t){var r=lo(this.headerCellCtrls),o=r.find(function(a){return a.getColumnGroupChild()==e});return o?(o.focus(t),!0):!1},i.prototype.destroy=function(){var e=this;Oi(this.headerCellCtrls,function(t,r){e.destroyBean(r)}),this.headerCellCtrls={},n.prototype.destroy.call(this)},zs([T("columnModel")],i.prototype,"columnModel",void 0),zs([T("focusService")],i.prototype,"focusService",void 0),zs([T("filterManager")],i.prototype,"filterManager",void 0),zs([Oe],i.prototype,"postConstruct",null),i}(ve),mP=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Gn=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},CP=function(n,i){var e=typeof Symbol=="function"&&n[Symbol.iterator];if(!e)return n;var t=e.call(n),r,o=[],a;try{for(;(i===void 0||i-- >0)&&!(r=t.next()).done;)o.push(r.value)}catch(s){a={error:s}}finally{try{r&&!r.done&&(e=t.return)&&e.call(t)}finally{if(a)throw a.error}}return o},SP=function(n,i){for(var e=0,t=i.length,r=n.length;e<t;e++,r++)n[r]=i[e];return n},wP=function(n){mP(i,n);function i(e){var t=n.call(this)||this;return t.hidden=!1,t.includeFloatingFilter=!1,t.groupsRowCtrls=[],t.pinned=e,t}return i.prototype.setComp=function(e,t){this.comp=e,this.eViewport=t,this.setupCenterWidth(),this.setupPinnedWidth(),this.setupDragAndDrop(this.eViewport),this.addManagedListener(this.eventService,b.EVENT_GRID_COLUMNS_CHANGED,this.onGridColumnsChanged.bind(this)),this.addManagedListener(this.eventService,b.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(this.eventService,b.EVENT_ADVANCED_FILTER_ENABLED_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.ctrlsService.registerHeaderContainer(this,this.pinned),this.columnModel.isReady()&&this.refresh()},i.prototype.setupDragAndDrop=function(e){var t=new IO(this.pinned,e);this.createManagedBean(t)},i.prototype.refresh=function(e){var t=this;e===void 0&&(e=!1);var r=new oa,o=this.focusService.getFocusHeaderToUseAfterRefresh(),a=function(){var c=t.columnModel.getHeaderRowCount()-1;t.groupsRowCtrls=t.destroyBeans(t.groupsRowCtrls);for(var d=0;d<c;d++){var f=t.createBean(new Xu(r.next(),t.pinned,Zi.COLUMN_GROUP));t.groupsRowCtrls.push(f)}},s=function(){var c=r.next(),d=!t.hidden&&(t.columnsRowCtrl==null||!e||t.columnsRowCtrl.getRowIndex()!==c),f=d||t.hidden;f&&(t.columnsRowCtrl=t.destroyBean(t.columnsRowCtrl)),d&&(t.columnsRowCtrl=t.createBean(new Xu(c,t.pinned,Zi.COLUMN)))},l=function(){t.includeFloatingFilter=t.filterManager.hasFloatingFilters()&&!t.hidden;var c=function(){t.filtersRowCtrl=t.destroyBean(t.filtersRowCtrl)};if(!t.includeFloatingFilter){c();return}var d=r.next();if(t.filtersRowCtrl){var f=t.filtersRowCtrl.getRowIndex()!==d;(!e||f)&&c()}t.filtersRowCtrl||(t.filtersRowCtrl=t.createBean(new Xu(d,t.pinned,Zi.FLOATING_FILTER)))};a(),s(),l();var u=this.getAllCtrls();this.comp.setCtrls(u),this.restoreFocusOnHeader(o)},i.prototype.restoreFocusOnHeader=function(e){e==null||e.column.getPinned()!=this.pinned||this.focusService.focusHeaderPosition({headerPosition:e})},i.prototype.getAllCtrls=function(){var e=SP([],CP(this.groupsRowCtrls));return this.columnsRowCtrl&&e.push(this.columnsRowCtrl),this.filtersRowCtrl&&e.push(this.filtersRowCtrl),e},i.prototype.onGridColumnsChanged=function(){this.refresh(!0)},i.prototype.onDisplayedColumnsChanged=function(){var e=this.filterManager.hasFloatingFilters()&&!this.hidden;this.includeFloatingFilter!==e&&this.refresh(!0)},i.prototype.setupCenterWidth=function(){var e=this;this.pinned==null&&this.createManagedBean(new Nd(function(t){return e.comp.setCenterWidth(t+"px")},!0))},i.prototype.setHorizontalScroll=function(e){this.comp.setViewportScrollLeft(e)},i.prototype.setupPinnedWidth=function(){var e=this;if(this.pinned!=null){var t=this.pinned==="left",r=this.pinned==="right";this.hidden=!0;var o=function(){var a=t?e.pinnedWidthService.getPinnedLeftWidth():e.pinnedWidthService.getPinnedRightWidth();if(a!=null){var s=a==0,l=e.hidden!==s,u=e.gridOptionsService.is("enableRtl"),c=e.gridOptionsService.getScrollbarWidth(),d=e.scrollVisibleService.isVerticalScrollShowing()&&(u&&t||!u&&r),f=d?a+c:a;e.comp.setPinnedContainerWidth(f+"px"),e.comp.setDisplayed(!s),l&&(e.hidden=s,e.refresh())}};this.addManagedListener(this.eventService,b.EVENT_LEFT_PINNED_WIDTH_CHANGED,o),this.addManagedListener(this.eventService,b.EVENT_RIGHT_PINNED_WIDTH_CHANGED,o),this.addManagedListener(this.eventService,b.EVENT_SCROLL_VISIBILITY_CHANGED,o),this.addManagedListener(this.eventService,b.EVENT_SCROLLBAR_WIDTH_CHANGED,o)}},i.prototype.getHeaderCtrlForColumn=function(e){if(e instanceof li)return this.columnsRowCtrl?this.columnsRowCtrl.getHeaderCellCtrl(e):void 0;if(this.groupsRowCtrls.length!==0)for(var t=0;t<this.groupsRowCtrls.length;t++){var r=this.groupsRowCtrls[t].getHeaderCellCtrl(e);if(r)return r}},i.prototype.getHtmlElementForColumnHeader=function(e){var t=this.getHeaderCtrlForColumn(e);return t?t.getGui():null},i.prototype.getRowType=function(e){var t=this.getAllCtrls(),r=t[e];return r?r.getType():void 0},i.prototype.focusHeader=function(e,t,r){var o=this.getAllCtrls(),a=o[e];return a?a.focusHeader(t,r):!1},i.prototype.getRowCount=function(){return this.groupsRowCtrls.length+(this.columnsRowCtrl?1:0)+(this.filtersRowCtrl?1:0)},i.prototype.destroy=function(){this.filtersRowCtrl&&(this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl)),this.columnsRowCtrl&&(this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl)),this.groupsRowCtrls&&this.groupsRowCtrls.length&&(this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls)),n.prototype.destroy.call(this)},Gn([T("ctrlsService")],i.prototype,"ctrlsService",void 0),Gn([T("scrollVisibleService")],i.prototype,"scrollVisibleService",void 0),Gn([T("pinnedWidthService")],i.prototype,"pinnedWidthService",void 0),Gn([T("columnModel")],i.prototype,"columnModel",void 0),Gn([T("focusService")],i.prototype,"focusService",void 0),Gn([T("filterManager")],i.prototype,"filterManager",void 0),i}(ve),TP=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Ju=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},Zu=function(n){TP(i,n);function i(e){var t=n.call(this)||this;return t.headerRowComps={},t.rowCompsList=[],t.pinned=e,t}return i.prototype.init=function(){var e=this;this.selectAndSetTemplate();var t={setDisplayed:function(o){return e.setDisplayed(o)},setCtrls:function(o){return e.setCtrls(o)},setCenterWidth:function(o){return e.eCenterContainer.style.width=o},setViewportScrollLeft:function(o){return e.getGui().scrollLeft=o},setPinnedContainerWidth:function(o){var a=e.getGui();a.style.width=o,a.style.maxWidth=o,a.style.minWidth=o}},r=this.createManagedBean(new wP(this.pinned));r.setComp(t,this.getGui())},i.prototype.selectAndSetTemplate=function(){var e=this.pinned=="left",t=this.pinned=="right",r=e?i.PINNED_LEFT_TEMPLATE:t?i.PINNED_RIGHT_TEMPLATE:i.CENTER_TEMPLATE;this.setTemplate(r),this.eRowContainer=this.eCenterContainer?this.eCenterContainer:this.getGui()},i.prototype.destroyRowComps=function(){this.setCtrls([])},i.prototype.destroyRowComp=function(e){this.destroyBean(e),this.eRowContainer.removeChild(e.getGui())},i.prototype.setCtrls=function(e){var t=this,r=this.headerRowComps;this.headerRowComps={},this.rowCompsList=[];var o,a=function(s){var l=s.getGui(),u=l.parentElement!=t.eRowContainer;u&&t.eRowContainer.appendChild(l),o&&md(t.eRowContainer,l,o),o=l};e.forEach(function(s){var l=s.getInstanceId(),u=r[l];delete r[l];var c=u||t.createBean(new jO(s));t.headerRowComps[l]=c,t.rowCompsList.push(c),a(c)}),lo(r).forEach(function(s){return t.destroyRowComp(s)})},i.PINNED_LEFT_TEMPLATE='<div class="ag-pinned-left-header" role="presentation"></div>',i.PINNED_RIGHT_TEMPLATE='<div class="ag-pinned-right-header" role="presentation"></div>',i.CENTER_TEMPLATE=`<div class="ag-header-viewport" role="presentation">
            <div class="ag-header-container" ref="eCenterContainer" role="rowgroup"></div>
        </div>`,Ju([be("eCenterContainer")],i.prototype,"eCenterContainer",void 0),Ju([Oe],i.prototype,"init",null),Ju([Ki],i.prototype,"destroyRowComps",null),i}(xt),OP=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Ma=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},oo;(function(n){n[n.UP=0]="UP",n[n.DOWN=1]="DOWN",n[n.LEFT=2]="LEFT",n[n.RIGHT=3]="RIGHT"})(oo||(oo={}));var PP=function(n){OP(i,n);function i(){return n!==null&&n.apply(this,arguments)||this}return i.prototype.postConstruct=function(){var e=this;this.ctrlsService.whenReady(function(t){e.gridBodyCon=t.gridBodyCtrl})},i.prototype.getHeaderRowCount=function(){var e=this.ctrlsService.getHeaderRowContainerCtrl();return e?e.getRowCount():0},i.prototype.navigateVertically=function(e,t,r){if(t||(t=this.focusService.getFocusedHeader()),!t)return!1;var o=t.headerRowIndex,a=t.column,s=this.getHeaderRowCount(),l=e===oo.UP,u=l?this.headerPositionUtils.getColumnVisibleParent(a,o):this.headerPositionUtils.getColumnVisibleChild(a,o),c=u.nextRow,d=u.nextFocusColumn,f=!1;return c<0&&(c=0,d=a,f=!0),c>=s&&(c=-1),!f&&!d?!1:this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:c,column:d},allowUserOverride:!0,event:r})},i.prototype.navigateHorizontally=function(e,t,r){t===void 0&&(t=!1);var o=this.focusService.getFocusedHeader(),a=e===oo.LEFT,s=this.gridOptionsService.is("enableRtl"),l,u;return a!==s?(u="Before",l=this.headerPositionUtils.findHeader(o,u)):(u="After",l=this.headerPositionUtils.findHeader(o,u)),l||!t?this.focusService.focusHeaderPosition({headerPosition:l,direction:u,fromTab:t,allowUserOverride:!0,event:r}):this.focusNextHeaderRow(o,u,r)},i.prototype.focusNextHeaderRow=function(e,t,r){var o=e.headerRowIndex,a=null,s;return t==="Before"?o>0&&(s=o-1,a=this.headerPositionUtils.findColAtEdgeForHeaderRow(s,"end")):(s=o+1,a=this.headerPositionUtils.findColAtEdgeForHeaderRow(s,"start")),this.focusService.focusHeaderPosition({headerPosition:a,direction:t,fromTab:!0,allowUserOverride:!0,event:r})},i.prototype.scrollToColumn=function(e,t){if(t===void 0&&(t="After"),!e.getPinned()){var r;if(e instanceof Xi){var o=e.getDisplayedLeafColumns();r=t==="Before"?ai(o):o[0]}else r=e;this.gridBodyCon.getScrollFeature().ensureColumnVisible(r)}},Ma([T("focusService")],i.prototype,"focusService",void 0),Ma([T("headerPositionUtils")],i.prototype,"headerPositionUtils",void 0),Ma([T("ctrlsService")],i.prototype,"ctrlsService",void 0),Ma([Oe],i.prototype,"postConstruct",null),i=Ma([Ue("headerNavigationService")],i),i}(ve),EP=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Na=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},_P=function(n){EP(i,n);function i(){return n!==null&&n.apply(this,arguments)||this}return i.prototype.setComp=function(e,t,r){this.comp=e,this.eGui=t,this.createManagedBean(new rn(r,{onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addManagedListener(this.eventService,b.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.onPivotModeChanged.bind(this)),this.addManagedListener(this.eventService,b.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.onPivotModeChanged(),this.setupHeaderHeight(),this.ctrlsService.registerGridHeaderCtrl(this)},i.prototype.setupHeaderHeight=function(){var e=this.setHeaderHeight.bind(this);e(),this.addManagedPropertyListener("headerHeight",e),this.addManagedPropertyListener("pivotHeaderHeight",e),this.addManagedPropertyListener("groupHeaderHeight",e),this.addManagedPropertyListener("pivotGroupHeaderHeight",e),this.addManagedPropertyListener("floatingFiltersHeight",e),this.addManagedListener(this.eventService,b.EVENT_DISPLAYED_COLUMNS_CHANGED,e),this.addManagedListener(this.eventService,b.EVENT_COLUMN_HEADER_HEIGHT_CHANGED,e),this.addManagedListener(this.eventService,b.EVENT_GRID_STYLES_CHANGED,e),this.addManagedListener(this.eventService,b.EVENT_ADVANCED_FILTER_ENABLED_CHANGED,e)},i.prototype.getHeaderHeight=function(){return this.headerHeight},i.prototype.setHeaderHeight=function(){var e=this.columnModel,t=0,r=e.getHeaderRowCount(),o,a=this.filterManager.hasFloatingFilters();a&&(r++,t=1);var s=this.columnModel.getColumnGroupHeaderRowHeight(),l=this.columnModel.getColumnHeaderRowHeight(),u=1+t,c=r-u;if(o=t*e.getFloatingFiltersHeight(),o+=c*s,o+=l,this.headerHeight!==o){this.headerHeight=o;var d=o+1+"px";this.comp.setHeightAndMinHeight(d),this.eventService.dispatchEvent({type:b.EVENT_HEADER_HEIGHT_CHANGED})}},i.prototype.onPivotModeChanged=function(){var e=this.columnModel.isPivotMode();this.comp.addOrRemoveCssClass("ag-pivot-on",e),this.comp.addOrRemoveCssClass("ag-pivot-off",!e)},i.prototype.onDisplayedColumnsChanged=function(){var e=this.columnModel.getAllDisplayedColumns(),t=e.some(function(r){return r.isSpanHeaderHeight()});this.comp.addOrRemoveCssClass("ag-header-allow-overflow",t)},i.prototype.onTabKeyDown=function(e){var t=this.gridOptionsService.is("enableRtl"),r=e.shiftKey!==t?oo.LEFT:oo.RIGHT;(this.headerNavigationService.navigateHorizontally(r,!0,e)||this.focusService.focusNextGridCoreContainer(e.shiftKey))&&e.preventDefault()},i.prototype.handleKeyDown=function(e){var t=null;switch(e.key){case J.LEFT:t=oo.LEFT;case J.RIGHT:ue(t)||(t=oo.RIGHT),this.headerNavigationService.navigateHorizontally(t,!1,e);break;case J.UP:t=oo.UP;case J.DOWN:ue(t)||(t=oo.DOWN),this.headerNavigationService.navigateVertically(t,null,e)&&e.preventDefault();break;default:return}},i.prototype.onFocusOut=function(e){var t=this.gridOptionsService.getDocument(),r=e.relatedTarget;!r&&this.eGui.contains(t.activeElement)||this.eGui.contains(r)||this.focusService.clearFocusedHeader()},Na([T("headerNavigationService")],i.prototype,"headerNavigationService",void 0),Na([T("focusService")],i.prototype,"focusService",void 0),Na([T("columnModel")],i.prototype,"columnModel",void 0),Na([T("ctrlsService")],i.prototype,"ctrlsService",void 0),Na([T("filterManager")],i.prototype,"filterManager",void 0),i}(ve),bP=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),DP=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},RP=function(n){bP(i,n);function i(){return n.call(this,i.TEMPLATE)||this}return i.prototype.postConstruct=function(){var e=this,t={addOrRemoveCssClass:function(a,s){return e.addOrRemoveCssClass(a,s)},setHeightAndMinHeight:function(a){e.getGui().style.height=a,e.getGui().style.minHeight=a}},r=this.createManagedBean(new _P);r.setComp(t,this.getGui(),this.getFocusableElement());var o=function(a){e.createManagedBean(a),e.appendChild(a)};o(new Zu("left")),o(new Zu(null)),o(new Zu("right"))},i.TEMPLATE='<div class="ag-header" role="presentation"/>',DP([Oe],i.prototype,"postConstruct",null),i}(xt),xP=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),$u=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},AP=function(n){xP(i,n);function i(){return n!==null&&n.apply(this,arguments)||this}return i.prototype.addResizeBar=function(e){var t=this,r={dragStartPixels:e.dragStartPixels||0,eElement:e.eResizeBar,onDragStart:this.onDragStart.bind(this,e),onDragStop:this.onDragStop.bind(this,e),onDragging:this.onDragging.bind(this,e),includeTouch:!0,stopPropagationForTouch:!0};this.dragService.addDragSource(r);var o=function(){return t.dragService.removeDragSource(r)};return o},i.prototype.onDragStart=function(e,t){this.dragStartX=t.clientX,this.setResizeIcons();var r=t instanceof MouseEvent&&t.shiftKey===!0;e.onResizeStart(r)},i.prototype.setResizeIcons=function(){var e=this.ctrlsService.getGridCtrl();e.setResizeCursor(!0),e.disableUserSelect(!0)},i.prototype.onDragStop=function(e,t){e.onResizeEnd(this.resizeAmount),this.resetIcons()},i.prototype.resetIcons=function(){var e=this.ctrlsService.getGridCtrl();e.setResizeCursor(!1),e.disableUserSelect(!1)},i.prototype.onDragging=function(e,t){this.resizeAmount=t.clientX-this.dragStartX,e.onResizing(this.resizeAmount)},$u([T("dragService")],i.prototype,"dragService",void 0),$u([T("ctrlsService")],i.prototype,"ctrlsService",void 0),i=$u([Ue("horizontalResizeService")],i),i}(ve),LP=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Fa=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},MP=function(n){LP(i,n);function i(){return n!==null&&n.apply(this,arguments)||this}return i.prototype.hideActiveMenu=function(){this.hidePopup&&this.hidePopup()},i.prototype.showMenuAfterMouseEvent=function(e,t){var r=this;this.showPopup(e,function(o){r.popupService.positionPopupUnderMouseEvent({column:e,type:"columnMenu",mouseEvent:t,ePopup:o})},"columnMenu",t.target)},i.prototype.showMenuAfterButtonClick=function(e,t,r){var o=this;this.showPopup(e,function(a){o.popupService.positionPopupByComponent({type:r,eventSource:t,ePopup:a,keepWithinBounds:!0,position:"under",column:e})},r,t)},i.prototype.showPopup=function(e,t,r,o){var a=this,s=this.filterManager.getOrCreateFilterWrapper(e,"COLUMN_MENU");if(!s)throw new Error("AG Grid - unable to show popup filter, filter instantiation failed");var l=document.createElement("div");Wi(l,"presentation"),l.classList.add("ag-menu"),this.tabListener=this.addManagedListener(l,"keydown",function(w){return a.trapFocusWithin(w,l)}),s.guiPromise.then(function(w){return l.appendChild(w)});var u,c=function(){var w;return(w=s.filterPromise)===null||w===void 0?void 0:w.then(function(E){var _;return(_=E?.afterGuiDetached)===null||_===void 0?void 0:_.call(E)})},d=o||this.ctrlsService.getGridBodyCtrl().getGui(),f=function(w){e.setMenuVisible(!1,"contextMenu");var E=w instanceof KeyboardEvent;if(a.tabListener&&(a.tabListener=a.tabListener()),E&&o&&tn(o)){var _=a.focusService.findTabbableParent(o);_&&_.focus()}c()},y=this.localeService.getLocaleTextFunc(),S=this.popupService.addPopup({modal:!0,eChild:l,closeOnEsc:!0,closedCallback:f,positionCallback:function(){return t(l)},anchorToElement:d,ariaLabel:y("ariaLabelColumnMenu","Column Menu")});S&&(this.hidePopup=u=S.hideFunc),s.filterPromise.then(function(w){t(l),w.afterGuiAttached&&w.afterGuiAttached({container:r,hidePopup:u})}),e.setMenuVisible(!0,"contextMenu")},i.prototype.trapFocusWithin=function(e,t){e.key!==J.TAB||e.defaultPrevented||this.focusService.findNextFocusableElement(t,!1,e.shiftKey)||(e.preventDefault(),this.focusService.focusInto(t,e.shiftKey))},i.prototype.isMenuEnabled=function(e){return e.isFilterAllowed()&&e.getMenuTabs(["filterMenuTab"]).includes("filterMenuTab")},Fa([T("filterManager")],i.prototype,"filterManager",void 0),Fa([T("popupService")],i.prototype,"popupService",void 0),Fa([T("focusService")],i.prototype,"focusService",void 0),Fa([T("ctrlsService")],i.prototype,"ctrlsService",void 0),i=Fa([Ue("menuFactory")],i),i}(ve),NP=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Ys=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o};(function(n){NP(i,n);function i(e){var t=n.call(this,i.getTemplate(e.cssClass))||this;return t.items=[],t.tabbedItemScrollMap=new Map,t.params=e,e.items&&e.items.forEach(function(r){return t.addItem(r)}),t}return i.prototype.postConstruct=function(){var e=this;this.createManagedBean(new rn(this.getFocusableElement(),{onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this)})),this.addDestroyFunc(function(){var t,r,o;return(o=(r=(t=e.activeItem)===null||t===void 0?void 0:t.tabbedItem)===null||r===void 0?void 0:r.afterDetachedCallback)===null||o===void 0?void 0:o.call(r)})},i.getTemplate=function(e){return'<div class="ag-tabs '+e+`">
            <div ref="eHeader" role="tablist" class="ag-tabs-header `+(e?e+"-header":"")+`"></div>
            <div ref="eBody" role="presentation" class="ag-tabs-body `+(e?e+"-body":"")+`"></div>
        </div>`},i.prototype.handleKeyDown=function(e){var t=this.gridOptionsService.getDocument();switch(e.key){case J.RIGHT:case J.LEFT:if(!this.eHeader.contains(t.activeElement))return;var r=e.key===J.RIGHT,o=this.gridOptionsService.is("enableRtl"),a=this.items.indexOf(this.activeItem),s=r!==o?Math.min(a+1,this.items.length-1):Math.max(a-1,0);if(a===s)return;e.preventDefault();var l=this.items[s];this.showItemWrapper(l),l.eHeaderButton.focus();break;case J.UP:case J.DOWN:e.stopPropagation();break}},i.prototype.onTabKeyDown=function(e){if(!e.defaultPrevented){var t=this,r=t.focusService,o=t.eHeader,a=t.eBody,s=t.activeItem,l=this.gridOptionsService.getDocument(),u=l.activeElement,c=e.target;if(e.preventDefault(),o.contains(u)){r.focusInto(a,e.shiftKey);return}var d=null;r.isTargetUnderManagedComponent(a,c)&&(e.shiftKey&&(d=this.focusService.findFocusableElementBeforeTabGuard(a,c)),d||(d=s.eHeaderButton)),!d&&a.contains(u)&&(d=r.findNextFocusableElement(a,!1,e.shiftKey),d||(d=s.eHeaderButton)),d&&d.focus()}},i.prototype.setAfterAttachedParams=function(e){this.afterAttachedParams=e},i.prototype.showFirstItem=function(){this.items.length>0&&this.showItemWrapper(this.items[0])},i.prototype.addItem=function(e){var t=document.createElement("span");Wi(t,"tab"),t.setAttribute("tabindex","-1"),t.appendChild(e.title),t.classList.add("ag-tab"),this.eHeader.appendChild(t),Po(t,e.titleLabel);var r={tabbedItem:e,eHeaderButton:t};this.items.push(r),t.addEventListener("click",this.showItemWrapper.bind(this,r))},i.prototype.showItem=function(e){var t=this.items.find(function(r){return r.tabbedItem===e});t&&this.showItemWrapper(t)},i.prototype.showItemWrapper=function(e){var t=this,r,o,a=e.tabbedItem,s=e.eHeaderButton;if(this.params.onItemClicked&&this.params.onItemClicked({item:a}),this.activeItem===e){wh(this.params.onActiveItemClicked);return}this.lastScrollListener&&(this.lastScrollListener=this.lastScrollListener()),tr(this.eBody),a.bodyPromise.then(function(l){t.eBody.appendChild(l);var u=!t.focusService.isKeyboardMode();if(t.focusService.focusInto(t.eBody,!1,u),a.afterAttachedCallback&&a.afterAttachedCallback(t.afterAttachedParams),t.params.keepScrollPosition){var c=a.getScrollableContainer&&a.getScrollableContainer()||l;t.lastScrollListener=t.addManagedListener(c,"scroll",function(){t.tabbedItemScrollMap.set(a.name,c.scrollTop)});var d=t.tabbedItemScrollMap.get(a.name);d!==void 0&&setTimeout(function(){c.scrollTop=d},0)}}),this.activeItem&&(this.activeItem.eHeaderButton.classList.remove("ag-tab-selected"),(o=(r=this.activeItem.tabbedItem).afterDetachedCallback)===null||o===void 0||o.call(r)),s.classList.add("ag-tab-selected"),this.activeItem=e},Ys([T("focusService")],i.prototype,"focusService",void 0),Ys([be("eHeader")],i.prototype,"eHeader",void 0),Ys([be("eBody")],i.prototype,"eBody",void 0),Ys([Oe],i.prototype,"postConstruct",null),i})(xt);var FP=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),IP=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},kP=50,GP=function(n){FP(i,n);function i(){var e=n!==null&&n.apply(this,arguments)||this;return e.polyfillFunctions=[],e}return i.prototype.observeResize=function(e,t){var r=this,o=this.gridOptionsService.getWindow(),a=function(){var c=new o.ResizeObserver(t);return c.observe(e),function(){return c.disconnect()}},s=function(){var c=Vc(e),d=Gc(e),f=!0,y=function(){if(f){var S=Vc(e),w=Gc(e),E=S!==c||w!==d;E&&(c=S,d=w,t()),r.doNextPolyfillTurn(y)}};return y(),function(){return f=!1}},l=this.gridOptionsService.is("suppressBrowserResizeObserver"),u=!!o.ResizeObserver;return u&&!l?a():s()},i.prototype.doNextPolyfillTurn=function(e){this.polyfillFunctions.push(e),this.schedulePolyfill()},i.prototype.schedulePolyfill=function(){var e=this;if(!this.polyfillScheduled){var t=function(){var r=e.polyfillFunctions;e.polyfillScheduled=!1,e.polyfillFunctions=[],r.forEach(function(o){return o()})};this.polyfillScheduled=!0,this.getFrameworkOverrides().setTimeout(t,kP)}},i=IP([Ue("resizeObserverService")],i),i}(ve),VP=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Ks=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},BP=function(n){VP(i,n);function i(){var e=n!==null&&n.apply(this,arguments)||this;return e.createTasksP1={list:[],sorted:!1},e.createTasksP2={list:[],sorted:!1},e.destroyTasks=[],e.ticking=!1,e.scrollGoingDown=!0,e.lastPage=0,e.lastScrollTop=0,e.taskCount=0,e.cancelledTasks=new Set,e}return i.prototype.setScrollTop=function(e){var t=this.gridOptionsService.is("pagination");if(this.scrollGoingDown=e>=this.lastScrollTop,t&&e===0){var r=this.paginationProxy.getCurrentPage();r!==this.lastPage&&(this.lastPage=r,this.scrollGoingDown=!0)}this.lastScrollTop=e},i.prototype.init=function(){this.useAnimationFrame=!this.gridOptionsService.is("suppressAnimationFrame")},i.prototype.isOn=function(){return this.useAnimationFrame},i.prototype.verifyAnimationFrameOn=function(e){this.useAnimationFrame===!1&&console.warn("AG Grid: AnimationFrameService."+e+" called but animation frames are off")},i.prototype.createTask=function(e,t,r){this.verifyAnimationFrameOn(r);var o={task:e,index:t,createOrder:++this.taskCount};this.addTaskToList(this[r],o),this.schedule()},i.prototype.cancelTask=function(e){this.cancelledTasks.add(e)},i.prototype.addTaskToList=function(e,t){e.list.push(t),e.sorted=!1},i.prototype.sortTaskList=function(e){if(!e.sorted){var t=this.scrollGoingDown?1:-1;e.list.sort(function(r,o){return r.index!==o.index?t*(o.index-r.index):o.createOrder-r.createOrder}),e.sorted=!0}},i.prototype.addDestroyTask=function(e){this.verifyAnimationFrameOn("createTasksP3"),this.destroyTasks.push(e),this.schedule()},i.prototype.executeFrame=function(e){this.verifyAnimationFrameOn("executeFrame");for(var t=this.createTasksP1,r=t.list,o=this.createTasksP2,a=o.list,s=this.destroyTasks,l=new Date().getTime(),u=new Date().getTime()-l,c=e<=0,d=this.ctrlsService.getGridBodyCtrl();c||u<e;){var f=d.getScrollFeature().scrollGridIfNeeded();if(!f){var y=void 0;if(r.length)this.sortTaskList(t),y=r.pop().task;else if(a.length)this.sortTaskList(o),y=a.pop().task;else if(s.length)y=s.pop();else{this.cancelledTasks.clear();break}this.cancelledTasks.has(y)||y()}u=new Date().getTime()-l}r.length||a.length||s.length?this.requestFrame():this.stopTicking()},i.prototype.stopTicking=function(){this.ticking=!1},i.prototype.flushAllFrames=function(){this.useAnimationFrame&&this.executeFrame(-1)},i.prototype.schedule=function(){this.useAnimationFrame&&(this.ticking||(this.ticking=!0,this.requestFrame()))},i.prototype.requestFrame=function(){var e=this.executeFrame.bind(this,60);this.requestAnimationFrame(e)},i.prototype.requestAnimationFrame=function(e){var t=this.gridOptionsService.getWindow();t.requestAnimationFrame?t.requestAnimationFrame(e):t.webkitRequestAnimationFrame?t.webkitRequestAnimationFrame(e):t.setTimeout(e,0)},i.prototype.isQueueEmpty=function(){return!this.ticking},i.prototype.debounce=function(e){var t=this,r=!1;return function(){if(!t.isOn()){t.getFrameworkOverrides().setTimeout(e,0);return}r||(r=!0,t.addDestroyTask(function(){r=!1,e()}))}},Ks([T("ctrlsService")],i.prototype,"ctrlsService",void 0),Ks([T("paginationProxy")],i.prototype,"paginationProxy",void 0),Ks([Oe],i.prototype,"init",null),i=Ks([Ue("animationFrameService")],i),i}(ve),HP=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Ia=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},WP=function(n){HP(i,n);function i(){return n!==null&&n.apply(this,arguments)||this}return i.prototype.postConstruct=function(){var e=this;this.ctrlsService.whenReady(function(t){e.centerRowContainerCtrl=t.centerRowContainerCtrl})},i.prototype.getPreferredWidthForColumn=function(e,t){var r=this.getHeaderCellForColumn(e);if(!r)return-1;var o=this.rowRenderer.getAllCellsForColumn(e);return t||o.push(r),this.addElementsToContainerAndGetWidth(o)},i.prototype.getPreferredWidthForColumnGroup=function(e){var t=this.getHeaderCellForColumn(e);return t?this.addElementsToContainerAndGetWidth([t]):-1},i.prototype.addElementsToContainerAndGetWidth=function(e){var t=this,r=document.createElement("form");r.style.position="fixed";var o=this.centerRowContainerCtrl.getContainerElement();e.forEach(function(l){return t.cloneItemIntoDummy(l,r)}),o.appendChild(r);var a=r.offsetWidth;o.removeChild(r);var s=this.getAutoSizePadding();return a+s},i.prototype.getAutoSizePadding=function(){var e=this.gridOptionsService.getNum("autoSizePadding");return e!=null&&e>=0?e:20},i.prototype.getHeaderCellForColumn=function(e){var t=null;return this.ctrlsService.getHeaderRowContainerCtrls().forEach(function(r){var o=r.getHtmlElementForColumnHeader(e);o!=null&&(t=o)}),t},i.prototype.cloneItemIntoDummy=function(e,t){var r=e.cloneNode(!0);r.style.width="",r.style.position="static",r.style.left="";var o=document.createElement("div"),a=o.classList,s=["ag-header-cell","ag-header-group-cell"].some(function(f){return r.classList.contains(f)});s?(a.add("ag-header","ag-header-row"),o.style.position="static"):a.add("ag-row");for(var l=e.parentElement;l;){var u=["ag-header-row","ag-row"].some(function(f){return l.classList.contains(f)});if(u){for(var c=0;c<l.classList.length;c++){var d=l.classList[c];d!="ag-row-position-absolute"&&a.add(d)}break}l=l.parentElement}o.appendChild(r),t.appendChild(o)},Ia([T("rowRenderer")],i.prototype,"rowRenderer",void 0),Ia([T("ctrlsService")],i.prototype,"ctrlsService",void 0),Ia([T("rowCssClassCalculator")],i.prototype,"rowCssClassCalculator",void 0),Ia([Oe],i.prototype,"postConstruct",null),i=Ia([Ue("autoWidthCalculator")],i),i}(ve),UP=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Qs=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},jP=function(n){var i=typeof Symbol=="function"&&Symbol.iterator,e=i&&n[i],t=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&t>=n.length&&(n=void 0),{value:n&&n[t++],done:!n}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},zP=function(n,i){var e=typeof Symbol=="function"&&n[Symbol.iterator];if(!e)return n;var t=e.call(n),r,o=[],a;try{for(;(i===void 0||i-- >0)&&!(r=t.next()).done;)o.push(r.value)}catch(s){a={error:s}}finally{try{r&&!r.done&&(e=t.return)&&e.call(t)}finally{if(a)throw a.error}}return o},YP=function(n,i){for(var e=0,t=i.length,r=n.length;e<t;e++,r++)n[r]=i[e];return n},KP=function(n){UP(i,n);function i(e,t){var r=n.call(this)||this;return r.createRowCon=e,r.destroyRowCtrls=t,r.stickyRowCtrls=[],r.containerHeight=0,r}return i.prototype.postConstruct=function(){var e=this;this.isClientSide=this.rowModel.getType()==="clientSide",this.ctrlsService.whenReady(function(t){e.gridBodyCtrl=t.gridBodyCtrl})},i.prototype.getStickyRowCtrls=function(){return this.stickyRowCtrls},i.prototype.checkStickyRows=function(){var e=this,t=0;if(!this.gridOptionsService.isGroupRowsSticky())return this.refreshNodesAndContainerHeight([],t);for(var r=[],o=this.rowRenderer.getFirstVisibleVerticalPixel(),a=function(y){var S,w,E;r.push(y);var _;if(e.isClientSide){for(var L=y;L.expanded;)if(L.master)L=L.detailNode;else if(L.childrenAfterSort){if(L.childrenAfterSort.length===0)break;L=ai(L.childrenAfterSort)}_=L.rowTop+L.rowHeight}else if(y.master)_=y.detailNode.rowTop+y.detailNode.rowHeight;else{var P=(S=y.childStore)===null||S===void 0?void 0:S.getStoreBounds();_=((w=P?.heightPx)!==null&&w!==void 0?w:0)+((E=P?.topPx)!==null&&E!==void 0?E:0)}var V=o+t+y.rowHeight;_<V?y.stickyRowTop=t+(_-V):y.stickyRowTop=t,t=0,r.forEach(function(ne){var ee=ne.stickyRowTop+ne.rowHeight;t<ee&&(t=ee)})};;){var s=o+t,l=this.rowModel.getRowIndexAtPixel(s),u=this.rowModel.getRow(l);if(u==null||u.level<0)break;for(var c=[],d=u.parent;d.level>=0;)c.push(d),d=d.parent;var f=c.reverse().find(function(y){return r.indexOf(y)<0&&y.displayed});if(f){a(f);continue}if(u.isExpandable()&&u.expanded&&u.rowTop<s){a(u);continue}break}return this.refreshNodesAndContainerHeight(r,t)},i.prototype.refreshStickyNode=function(e){for(var t=[],r=0;r<this.stickyRowCtrls.length;r++){var o=this.stickyRowCtrls[r].getRowNode();o!==e&&t.push(o)}this.refreshNodesAndContainerHeight(t,this.containerHeight)&&this.checkStickyRows()},i.prototype.refreshNodesAndContainerHeight=function(e,t){var r,o,a,s=this,l=!1,u=this.stickyRowCtrls.filter(function(E){return e.indexOf(E.getRowNode())===-1}),c=e.filter(function(E){return s.stickyRowCtrls.findIndex(function(_){return _.getRowNode()===E})===-1});(u.length||c.length)&&(l=!0);var d={};u.forEach(function(E){d[E.getRowNode().id]=E,s.stickyRowCtrls=s.stickyRowCtrls.filter(function(_){return _!==E})});try{for(var f=jP(Object.values(d)),y=f.next();!y.done;y=f.next()){var S=y.value;S.getRowNode().sticky=!1}}catch(E){r={error:E}}finally{try{y&&!y.done&&(o=f.return)&&o.call(f)}finally{if(r)throw r.error}}this.destroyRowCtrls(d,!1);var w=c.map(function(E){return E.sticky=!0,s.createRowCon(E,!1,!1)});return(a=this.stickyRowCtrls).push.apply(a,YP([],zP(w))),this.stickyRowCtrls.forEach(function(E){return E.setRowTop(E.getRowNode().stickyRowTop)}),this.stickyRowCtrls.sort(function(E,_){return _.getRowNode().rowIndex-E.getRowNode().rowIndex}),this.containerHeight!==t&&(this.containerHeight=t,this.gridBodyCtrl.setStickyTopHeight(t),l=!0),l},Qs([T("rowModel")],i.prototype,"rowModel",void 0),Qs([T("rowRenderer")],i.prototype,"rowRenderer",void 0),Qs([T("ctrlsService")],i.prototype,"ctrlsService",void 0),Qs([Oe],i.prototype,"postConstruct",null),i}(ve),QP=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Hr=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},ko=function(n,i){var e=typeof Symbol=="function"&&n[Symbol.iterator];if(!e)return n;var t=e.call(n),r,o=[],a;try{for(;(i===void 0||i-- >0)&&!(r=t.next()).done;)o.push(r.value)}catch(s){a={error:s}}finally{try{r&&!r.done&&(e=t.return)&&e.call(t)}finally{if(a)throw a.error}}return o},Go=function(n,i){for(var e=0,t=i.length,r=n.length;e<t;e++,r++)n[r]=i[e];return n},qP=function(n){var i=typeof Symbol=="function"&&Symbol.iterator,e=i&&n[i],t=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&t>=n.length&&(n=void 0),{value:n&&n[t++],done:!n}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},XP=10,JP=function(n){QP(i,n);function i(){var e=n!==null&&n.apply(this,arguments)||this;return e.destroyFuncsForColumnListeners=[],e.rowCtrlsByRowIndex={},e.zombieRowCtrls={},e.allRowCtrls=[],e.topRowCtrls=[],e.bottomRowCtrls=[],e.refreshInProgress=!1,e.dataFirstRenderedFired=!1,e}return i.prototype.postConstruct=function(){var e=this;this.ctrlsService.whenReady(function(){e.gridBodyCtrl=e.ctrlsService.getGridBodyCtrl(),e.initialise()})},i.prototype.initialise=function(){if(this.addManagedListener(this.eventService,b.EVENT_PAGINATION_CHANGED,this.onPageLoaded.bind(this)),this.addManagedListener(this.eventService,b.EVENT_PINNED_ROW_DATA_CHANGED,this.onPinnedRowDataChanged.bind(this)),this.addManagedListener(this.eventService,b.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(this.eventService,b.EVENT_BODY_SCROLL,this.onBodyScroll.bind(this)),this.addManagedListener(this.eventService,b.EVENT_BODY_HEIGHT_CHANGED,this.redraw.bind(this)),this.addManagedPropertyListener("domLayout",this.onDomLayoutChanged.bind(this)),this.addManagedPropertyListener("rowClass",this.redrawRows.bind(this)),this.gridOptionsService.isGroupRowsSticky()){var e=this.rowModel.getType();(e==="clientSide"||e==="serverSide")&&(this.stickyRowFeature=this.createManagedBean(new KP(this.createRowCon.bind(this),this.destroyRowCtrls.bind(this))))}this.registerCellEventListeners(),this.initialiseCache(),this.printLayout=this.gridOptionsService.isDomLayout("print"),this.embedFullWidthRows=this.printLayout||this.gridOptionsService.is("embedFullWidthRows"),this.redrawAfterModelUpdate()},i.prototype.initialiseCache=function(){if(this.gridOptionsService.is("keepDetailRows")){var e=this.getKeepDetailRowsCount(),t=e??3;this.cachedRowCtrls=new ZP(t)}},i.prototype.getKeepDetailRowsCount=function(){var e=this.gridOptionsService.getNum("keepDetailRowsCount");return ue(e)&&e>0?e:XP},i.prototype.getStickyTopRowCtrls=function(){return this.stickyRowFeature?this.stickyRowFeature.getStickyRowCtrls():[]},i.prototype.updateAllRowCtrls=function(){var e=lo(this.rowCtrlsByRowIndex),t=this.gridOptionsService.is("ensureDomOrder"),r=this.gridOptionsService.isDomLayout("print");(t||r)&&e.sort(function(s,l){return s.getRowNode().rowIndex-l.getRowNode.rowIndex});var o=lo(this.zombieRowCtrls),a=this.cachedRowCtrls?this.cachedRowCtrls.getEntries():[];o.length>0||a.length>0?this.allRowCtrls=Go(Go(Go([],ko(e)),ko(o)),ko(a)):this.allRowCtrls=e},i.prototype.onCellFocusChanged=function(e){this.getAllCellCtrls().forEach(function(t){return t.onCellFocused(e)}),this.getFullWidthRowCtrls().forEach(function(t){return t.onFullWidthRowFocused(e)})},i.prototype.registerCellEventListeners=function(){var e=this;this.addManagedListener(this.eventService,b.EVENT_CELL_FOCUSED,function(r){e.onCellFocusChanged(r)}),this.addManagedListener(this.eventService,b.EVENT_CELL_FOCUS_CLEARED,function(){e.onCellFocusChanged()}),this.addManagedListener(this.eventService,b.EVENT_FLASH_CELLS,function(r){e.getAllCellCtrls().forEach(function(o){return o.onFlashCells(r)})}),this.addManagedListener(this.eventService,b.EVENT_COLUMN_HOVER_CHANGED,function(){e.getAllCellCtrls().forEach(function(r){return r.onColumnHover()})}),this.addManagedListener(this.eventService,b.EVENT_DISPLAYED_COLUMNS_CHANGED,function(){e.getAllCellCtrls().forEach(function(r){return r.onDisplayedColumnsChanged()})}),this.addManagedListener(this.eventService,b.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,function(){e.printLayout&&e.getAllCellCtrls().forEach(function(r){return r.onLeftChanged()})});var t=this.gridOptionsService.is("enableRangeSelection");t&&(this.addManagedListener(this.eventService,b.EVENT_RANGE_SELECTION_CHANGED,function(){e.getAllCellCtrls().forEach(function(r){return r.onRangeSelectionChanged()})}),this.addManagedListener(this.eventService,b.EVENT_COLUMN_MOVED,function(){e.getAllCellCtrls().forEach(function(r){return r.updateRangeBordersIfRangeCount()})}),this.addManagedListener(this.eventService,b.EVENT_COLUMN_PINNED,function(){e.getAllCellCtrls().forEach(function(r){return r.updateRangeBordersIfRangeCount()})}),this.addManagedListener(this.eventService,b.EVENT_COLUMN_VISIBLE,function(){e.getAllCellCtrls().forEach(function(r){return r.updateRangeBordersIfRangeCount()})})),this.refreshListenersToColumnsForCellComps(),this.addManagedListener(this.eventService,b.EVENT_GRID_COLUMNS_CHANGED,this.refreshListenersToColumnsForCellComps.bind(this)),this.addDestroyFunc(this.removeGridColumnListeners.bind(this))},i.prototype.removeGridColumnListeners=function(){this.destroyFuncsForColumnListeners.forEach(function(e){return e()}),this.destroyFuncsForColumnListeners.length=0},i.prototype.refreshListenersToColumnsForCellComps=function(){var e=this;this.removeGridColumnListeners();var t=this.columnModel.getAllGridColumns();t&&t.forEach(function(r){var o=function(d){e.getAllCellCtrls().forEach(function(f){f.getColumn()===r&&d(f)})},a=function(){o(function(d){return d.onLeftChanged()})},s=function(){o(function(d){return d.onWidthChanged()})},l=function(){o(function(d){return d.onFirstRightPinnedChanged()})},u=function(){o(function(d){return d.onLastLeftPinnedChanged()})},c=function(){o(function(d){return d.onColDefChanged()})};r.addEventListener("leftChanged",a),r.addEventListener("widthChanged",s),r.addEventListener("firstRightPinnedChanged",l),r.addEventListener("lastLeftPinnedChanged",u),r.addEventListener("colDefChanged",c),e.destroyFuncsForColumnListeners.push(function(){r.removeEventListener("leftChanged",a),r.removeEventListener("widthChanged",s),r.removeEventListener("firstRightPinnedChanged",l),r.removeEventListener("lastLeftPinnedChanged",u),r.removeEventListener("colDefChanged",c)})})},i.prototype.onDomLayoutChanged=function(){var e=this.gridOptionsService.isDomLayout("print"),t=e||this.gridOptionsService.is("embedFullWidthRows"),r=t!==this.embedFullWidthRows||this.printLayout!==e;this.printLayout=e,this.embedFullWidthRows=t,r&&this.redrawAfterModelUpdate({domLayoutChanged:!0})},i.prototype.datasourceChanged=function(){this.firstRenderedRow=0,this.lastRenderedRow=-1;var e=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(e)},i.prototype.onPageLoaded=function(e){var t={recycleRows:e.keepRenderedRows,animate:e.animate,newData:e.newData,newPage:e.newPage,onlyBody:!0};this.redrawAfterModelUpdate(t)},i.prototype.getAllCellsForColumn=function(e){var t=[];return this.getAllRowCtrls().forEach(function(r){var o=r.getCellElement(e);o&&t.push(o)}),t},i.prototype.refreshFloatingRowComps=function(){this.refreshFloatingRows(this.topRowCtrls,this.pinnedRowModel.getPinnedTopRowData()),this.refreshFloatingRows(this.bottomRowCtrls,this.pinnedRowModel.getPinnedBottomRowData())},i.prototype.getTopRowCtrls=function(){return this.topRowCtrls},i.prototype.getCentreRowCtrls=function(){return this.allRowCtrls},i.prototype.getBottomRowCtrls=function(){return this.bottomRowCtrls},i.prototype.refreshFloatingRows=function(e,t){var r=this;e.forEach(function(o){o.destroyFirstPass(),o.destroySecondPass()}),e.length=0,t&&t.forEach(function(o){var a=new _n(o,r.beans,!1,!1,r.printLayout);e.push(a)})},i.prototype.onPinnedRowDataChanged=function(){var e={recycleRows:!0};this.redrawAfterModelUpdate(e)},i.prototype.redrawRow=function(e,t){var r=this;if(t===void 0&&(t=!1),e.sticky)this.stickyRowFeature.refreshStickyNode(e);else{var o=function(a){var s=a[e.rowIndex];s&&s.getRowNode()===e&&(s.destroyFirstPass(),s.destroySecondPass(),a[e.rowIndex]=r.createRowCon(e,!1,!1))};switch(e.rowPinned){case"top":o(this.topRowCtrls);case"bottom":o(this.bottomRowCtrls);default:o(this.rowCtrlsByRowIndex),this.updateAllRowCtrls()}}t||this.dispatchDisplayedRowsChanged(!1)},i.prototype.redrawRows=function(e){var t=this,r=e!=null;if(r){e?.forEach(function(o){return t.redrawRow(o,!0)}),this.dispatchDisplayedRowsChanged(!1);return}this.redrawAfterModelUpdate()},i.prototype.getCellToRestoreFocusToAfterRefresh=function(e){var t=e?.suppressKeepFocus?null:this.focusService.getFocusCellToUseAfterRefresh();if(t==null)return null;var r=this.gridOptionsService.getDocument(),o=r.activeElement,a=this.gridOptionsService.getDomData(o,En.DOM_DATA_KEY_CELL_CTRL),s=this.gridOptionsService.getDomData(o,_n.DOM_DATA_KEY_ROW_CTRL),l=a||s;return l?t:null},i.prototype.redrawAfterModelUpdate=function(e){e===void 0&&(e={}),this.getLockOnRefresh();var t=this.getCellToRestoreFocusToAfterRefresh(e);this.updateContainerHeights(),this.scrollToTopIfNewData(e);var r=!e.domLayoutChanged&&!!e.recycleRows,o=e.animate&&this.gridOptionsService.isAnimateRows(),a=r?this.getRowsToRecycle():null;r||this.removeAllRowComps(),this.workOutFirstAndLastRowsToRender(),this.stickyRowFeature&&this.stickyRowFeature.checkStickyRows(),this.recycleRows(a,o),this.gridBodyCtrl.updateRowCount(),e.onlyBody||this.refreshFloatingRowComps(),this.dispatchDisplayedRowsChanged(),t!=null&&this.restoreFocusedCell(t),this.releaseLockOnRefresh()},i.prototype.scrollToTopIfNewData=function(e){var t=e.newData||e.newPage,r=this.gridOptionsService.is("suppressScrollOnNewData");t&&!r&&this.gridBodyCtrl.getScrollFeature().scrollToTop()},i.prototype.updateContainerHeights=function(){if(this.printLayout){this.rowContainerHeightService.setModelHeight(null);return}var e=this.paginationProxy.getCurrentPageHeight();e===0&&(e=1),this.rowContainerHeightService.setModelHeight(e)},i.prototype.getLockOnRefresh=function(){if(this.refreshInProgress)throw new Error("AG Grid: cannot get grid to draw rows when it is in the middle of drawing rows. Your code probably called a grid API method while the grid was in the render stage. To overcome this, put the API call into a timeout, e.g. instead of api.redrawRows(), call setTimeout(function() { api.redrawRows(); }, 0). To see what part of your code that caused the refresh check this stacktrace.");this.refreshInProgress=!0},i.prototype.releaseLockOnRefresh=function(){this.refreshInProgress=!1},i.prototype.isRefreshInProgress=function(){return this.refreshInProgress},i.prototype.restoreFocusedCell=function(e){e&&(this.focusService.setRestoreFocusedCell(e),this.onCellFocusChanged({rowIndex:e.rowIndex,column:e.column,rowPinned:e.rowPinned,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0,api:this.beans.gridApi,columnApi:this.beans.columnApi,context:this.beans.gridOptionsService.context,type:"mock"}))},i.prototype.stopEditing=function(e){e===void 0&&(e=!1),this.getAllRowCtrls().forEach(function(t){t.stopEditing(e)})},i.prototype.getAllCellCtrls=function(){for(var e=[],t=this.getAllRowCtrls(),r=t.length,o=0;o<r;o++)for(var a=t[o].getAllCellCtrls(),s=a.length,l=0;l<s;l++)e.push(a[l]);return e},i.prototype.getAllRowCtrls=function(){var e,t,r=this.stickyRowFeature&&this.stickyRowFeature.getStickyRowCtrls()||[],o=Go(Go(Go([],ko(this.topRowCtrls)),ko(this.bottomRowCtrls)),ko(r));try{for(var a=qP(Object.keys(this.rowCtrlsByRowIndex)),s=a.next();!s.done;s=a.next()){var l=s.value;o.push(this.rowCtrlsByRowIndex[l])}}catch(u){e={error:u}}finally{try{s&&!s.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}return o},i.prototype.addRenderedRowListener=function(e,t,r){var o=this.rowCtrlsByRowIndex[t];o&&o.addEventListener(e,r)},i.prototype.flashCells=function(e){e===void 0&&(e={});var t=e.flashDelay,r=e.fadeDelay;this.getCellCtrls(e.rowNodes,e.columns).forEach(function(o){return o.flashCell({flashDelay:t,fadeDelay:r})})},i.prototype.refreshCells=function(e){var t=this;e===void 0&&(e={});var r={forceRefresh:e.force,newData:!1,suppressFlash:e.suppressFlash};this.getCellCtrls(e.rowNodes,e.columns).forEach(function(o){if(o.refreshShouldDestroy()){var a=o.getRowCtrl();a&&a.refreshCell(o)}else o.refreshCell(r)}),e.rowNodes&&(this.getRowCtrls(e.rowNodes).forEach(function(o){if(o.isFullWidth()){var a=o.refreshFullWidth();a||t.redrawRow(o.getRowNode(),!0)}}),this.dispatchDisplayedRowsChanged(!1))},i.prototype.getCellRendererInstances=function(e){var t=this,r,o=this.getCellCtrls(e.rowNodes,e.columns).map(function(l){return l.getCellRenderer()}).filter(function(l){return l!=null});if(!((r=e.columns)===null||r===void 0)&&r.length)return o;var a=[],s=this.mapRowNodes(e.rowNodes);return this.getAllRowCtrls().forEach(function(l){if(!(s&&!t.isRowInMap(l.getRowNode(),s))&&l.isFullWidth()){var u=l.getFullWidthCellRenderer();u&&a.push(u)}}),Go(Go([],ko(a)),ko(o))},i.prototype.getCellEditorInstances=function(e){var t=[];return this.getCellCtrls(e.rowNodes,e.columns).forEach(function(r){var o=r.getCellEditor();o&&t.push(o)}),t},i.prototype.getEditingCells=function(){var e=[];return this.getAllCellCtrls().forEach(function(t){if(t.isEditing()){var r=t.getCellPosition();e.push(r)}}),e},i.prototype.mapRowNodes=function(e){if(e){var t={top:{},bottom:{},normal:{}};return e.forEach(function(r){var o=r.id;r.rowPinned==="top"?t.top[o]=r:r.rowPinned==="bottom"?t.bottom[o]=r:t.normal[o]=r}),t}},i.prototype.isRowInMap=function(e,t){var r=e.id,o=e.rowPinned;return o==="bottom"?t.bottom[r]!=null:o==="top"?t.top[r]!=null:t.normal[r]!=null},i.prototype.getRowCtrls=function(e){var t=this,r=this.mapRowNodes(e),o=this.getAllRowCtrls();return!e||!r?o:o.filter(function(a){var s=a.getRowNode();return t.isRowInMap(s,r)})},i.prototype.getCellCtrls=function(e,t){var r=this,o;ue(t)&&(o={},t.forEach(function(s){var l=r.columnModel.getGridColumn(s);ue(l)&&(o[l.getId()]=!0)}));var a=[];return this.getRowCtrls(e).forEach(function(s){s.getAllCellCtrls().forEach(function(l){var u=l.getColumn().getId(),c=o&&!o[u];c||a.push(l)})}),a},i.prototype.destroy=function(){this.removeAllRowComps(),n.prototype.destroy.call(this)},i.prototype.removeAllRowComps=function(){var e=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(e)},i.prototype.getRowsToRecycle=function(){var e=[];Oi(this.rowCtrlsByRowIndex,function(r,o){var a=o.getRowNode().id==null;a&&e.push(r)}),this.removeRowCtrls(e);var t={};return Oi(this.rowCtrlsByRowIndex,function(r,o){var a=o.getRowNode();t[a.id]=o}),this.rowCtrlsByRowIndex={},t},i.prototype.removeRowCtrls=function(e){var t=this;e.forEach(function(r){var o=t.rowCtrlsByRowIndex[r];o&&(o.destroyFirstPass(),o.destroySecondPass()),delete t.rowCtrlsByRowIndex[r]})},i.prototype.onBodyScroll=function(e){e.direction==="vertical"&&this.redraw({afterScroll:!0})},i.prototype.redraw=function(e){e===void 0&&(e={});var t=e.afterScroll,r;this.stickyRowFeature&&Wl()&&(r=this.getCellToRestoreFocusToAfterRefresh()||void 0);var o=this.firstRenderedRow,a=this.lastRenderedRow;this.workOutFirstAndLastRowsToRender();var s=!1;this.stickyRowFeature&&(s=this.stickyRowFeature.checkStickyRows());var l=this.firstRenderedRow!==o||this.lastRenderedRow!==a;if(!(t&&!s&&!l)&&(this.getLockOnRefresh(),this.recycleRows(null,!1,t),this.releaseLockOnRefresh(),this.dispatchDisplayedRowsChanged(t),r!=null)){var u=this.getCellToRestoreFocusToAfterRefresh();r!=null&&u==null&&(this.animationFrameService.flushAllFrames(),this.restoreFocusedCell(r))}},i.prototype.removeRowCompsNotToDraw=function(e){var t={};e.forEach(function(a){return t[a]=!0});var r=Object.keys(this.rowCtrlsByRowIndex),o=r.filter(function(a){return!t[a]});this.removeRowCtrls(o)},i.prototype.calculateIndexesToDraw=function(e){var t=this,r=nv(this.firstRenderedRow,this.lastRenderedRow),o=function(c,d){var f=d.getRowNode().rowIndex;f!=null&&(f<t.firstRenderedRow||f>t.lastRenderedRow)&&t.doNotUnVirtualiseRow(d)&&r.push(f)};Oi(this.rowCtrlsByRowIndex,o),Oi(e,o),r.sort(function(c,d){return c-d});for(var a=[],s=0;s<r.length;s++){var l=r[s],u=this.paginationProxy.getRow(l);u&&!u.sticky&&a.push(l)}return a},i.prototype.recycleRows=function(e,t,r){var o=this;t===void 0&&(t=!1),r===void 0&&(r=!1);var a=this.calculateIndexesToDraw(e);if(this.removeRowCompsNotToDraw(a),this.printLayout&&(t=!1),a.forEach(function(l){var u=o.createOrUpdateRowCtrl(l,e,t,r);ue(u)}),e){var s=r&&!this.gridOptionsService.is("suppressAnimationFrame")&&!this.printLayout;s?this.beans.animationFrameService.addDestroyTask(function(){o.destroyRowCtrls(e,t),o.updateAllRowCtrls(),o.dispatchDisplayedRowsChanged()}):this.destroyRowCtrls(e,t)}this.updateAllRowCtrls()},i.prototype.dispatchDisplayedRowsChanged=function(e){e===void 0&&(e=!1);var t={type:b.EVENT_DISPLAYED_ROWS_CHANGED,afterScroll:e};this.eventService.dispatchEvent(t)},i.prototype.onDisplayedColumnsChanged=function(){var e=this.columnModel.isPinningLeft(),t=this.columnModel.isPinningRight(),r=this.pinningLeft!==e||t!==this.pinningRight;r&&(this.pinningLeft=e,this.pinningRight=t,this.embedFullWidthRows&&this.redrawFullWidthEmbeddedRows())},i.prototype.redrawFullWidthEmbeddedRows=function(){var e=[];this.getFullWidthRowCtrls().forEach(function(t){var r=t.getRowNode().rowIndex;e.push(r.toString())}),this.refreshFloatingRowComps(),this.removeRowCtrls(e),this.redraw({afterScroll:!0})},i.prototype.getFullWidthRowCtrls=function(e){var t=this,r=this.mapRowNodes(e);return this.getAllRowCtrls().filter(function(o){if(!o.isFullWidth())return!1;var a=o.getRowNode();return!(r!=null&&!t.isRowInMap(a,r))})},i.prototype.createOrUpdateRowCtrl=function(e,t,r,o){var a,s=this.rowCtrlsByRowIndex[e];s||(a=this.paginationProxy.getRow(e),ue(a)&&ue(t)&&t[a.id]&&a.alreadyRendered&&(s=t[a.id],t[a.id]=null));var l=!s;if(l)if(a||(a=this.paginationProxy.getRow(e)),ue(a))s=this.createRowCon(a,r,o);else return;return a&&(a.alreadyRendered=!0),this.rowCtrlsByRowIndex[e]=s,s},i.prototype.destroyRowCtrls=function(e,t){var r=this,o=[];Oi(e,function(a,s){if(s){if(r.cachedRowCtrls&&s.isCacheable()){r.cachedRowCtrls.addRow(s);return}s.destroyFirstPass(),t?(r.zombieRowCtrls[s.getInstanceId()]=s,o.push(function(){s.destroySecondPass(),delete r.zombieRowCtrls[s.getInstanceId()]})):s.destroySecondPass()}}),t&&(o.push(function(){r.updateAllRowCtrls(),r.dispatchDisplayedRowsChanged()}),Ch(o))},i.prototype.getRowBuffer=function(){var e=this.gridOptionsService.getNum("rowBuffer");return typeof e=="number"?e<0&&(Ut(function(){return console.warn("AG Grid: rowBuffer should not be negative")},"warn rowBuffer negative"),e=0,this.gridOptionsService.set("rowBuffer",0)):e=10,e},i.prototype.getRowBufferInPixels=function(){var e=this.getRowBuffer(),t=this.gridOptionsService.getRowHeightAsNumber();return e*t},i.prototype.workOutFirstAndLastRowsToRender=function(){this.rowContainerHeightService.updateOffset();var e,t;if(!this.paginationProxy.isRowsToRender())e=0,t=-1;else if(this.printLayout)this.environment.refreshRowHeightVariable(),e=this.paginationProxy.getPageFirstRow(),t=this.paginationProxy.getPageLastRow();else{var r=this.getRowBufferInPixels(),o=this.ctrlsService.getGridBodyCtrl(),a=this.gridOptionsService.is("suppressRowVirtualisation"),s=!1,l=void 0,u=void 0;do{var c=this.paginationProxy.getPixelOffset(),d=this.paginationProxy.getCurrentPagePixelRange(),f=d.pageFirstPixel,y=d.pageLastPixel,S=this.rowContainerHeightService.getDivStretchOffset(),w=o.getScrollFeature().getVScrollPosition(),E=w.top,_=w.bottom;a?(l=f+S,u=y+S):(l=Math.max(E+c-r,f)+S,u=Math.min(_+c+r,y)+S),this.firstVisibleVPixel=Math.max(E+c,f)+S,s=this.ensureAllRowsInRangeHaveHeightsCalculated(l,u)}while(s);var L=this.paginationProxy.getRowIndexAtPixel(l),P=this.paginationProxy.getRowIndexAtPixel(u),V=this.paginationProxy.getPageFirstRow(),ne=this.paginationProxy.getPageLastRow();L<V&&(L=V),P>ne&&(P=ne),e=L,t=P}var ee=this.gridOptionsService.isDomLayout("normal"),re=this.gridOptionsService.is("suppressMaxRenderedRowRestriction"),F=Math.max(this.getRowBuffer(),500);ee&&!re&&t-e>F&&(t=e+F);var U=e!==this.firstRenderedRow,Y=t!==this.lastRenderedRow;if(U||Y){this.firstRenderedRow=e,this.lastRenderedRow=t;var K={type:b.EVENT_VIEWPORT_CHANGED,firstRow:e,lastRow:t};this.eventService.dispatchEvent(K)}},i.prototype.dispatchFirstDataRenderedEvent=function(){var e=this;if(!this.dataFirstRenderedFired){this.dataFirstRenderedFired=!0;var t={type:b.EVENT_FIRST_DATA_RENDERED,firstRow:this.firstRenderedRow,lastRow:this.lastRenderedRow};window.requestAnimationFrame(function(){e.beans.eventService.dispatchEvent(t)})}},i.prototype.ensureAllRowsInRangeHaveHeightsCalculated=function(e,t){var r=this.paginationProxy.ensureRowHeightsValid(e,t,-1,-1);return r&&this.updateContainerHeights(),r},i.prototype.getFirstVisibleVerticalPixel=function(){return this.firstVisibleVPixel},i.prototype.getFirstVirtualRenderedRow=function(){return this.firstRenderedRow},i.prototype.getLastVirtualRenderedRow=function(){return this.lastRenderedRow},i.prototype.doNotUnVirtualiseRow=function(e){var t=!1,r=!0,o=e.getRowNode(),a=this.focusService.isRowNodeFocused(o),s=e.isEditing(),l=o.detail,u=a||s||l;if(!u)return t;var c=this.paginationProxy.isRowPresent(o);return c?r:t},i.prototype.createRowCon=function(e,t,r){var o=this.cachedRowCtrls?this.cachedRowCtrls.getRow(e):null;if(o)return o;var a=this.gridOptionsService.is("suppressAnimationFrame"),s=r&&!a&&!this.printLayout,l=new _n(e,this.beans,t,s,this.printLayout);return l},i.prototype.getRenderedNodes=function(){var e=this.rowCtrlsByRowIndex;return Object.keys(e).map(function(t){return e[t].getRowNode()})},i.prototype.getRowByPosition=function(e){var t,r=e.rowIndex;switch(e.rowPinned){case"top":t=this.topRowCtrls[r];break;case"bottom":t=this.bottomRowCtrls[r];break;default:t=this.rowCtrlsByRowIndex[r],t||(t=this.getStickyTopRowCtrls().find(function(o){return o.getRowNode().rowIndex===r})||null);break}return t},i.prototype.getRowNode=function(e){switch(e.rowPinned){case"top":return this.pinnedRowModel.getPinnedTopRowData()[e.rowIndex];case"bottom":return this.pinnedRowModel.getPinnedBottomRowData()[e.rowIndex];default:return this.rowModel.getRow(e.rowIndex)}},i.prototype.isRangeInRenderedViewport=function(e,t){var r=e==null||t==null;if(r)return!1;var o=e>this.lastRenderedRow,a=t<this.firstRenderedRow,s=!a&&!o;return s},Hr([T("animationFrameService")],i.prototype,"animationFrameService",void 0),Hr([T("paginationProxy")],i.prototype,"paginationProxy",void 0),Hr([T("columnModel")],i.prototype,"columnModel",void 0),Hr([T("pinnedRowModel")],i.prototype,"pinnedRowModel",void 0),Hr([T("rowModel")],i.prototype,"rowModel",void 0),Hr([T("focusService")],i.prototype,"focusService",void 0),Hr([T("beans")],i.prototype,"beans",void 0),Hr([T("rowContainerHeightService")],i.prototype,"rowContainerHeightService",void 0),Hr([T("ctrlsService")],i.prototype,"ctrlsService",void 0),Hr([Oe],i.prototype,"postConstruct",null),i=Hr([Ue("rowRenderer")],i),i}(ve),ZP=function(){function n(i){this.entriesMap={},this.entriesList=[],this.maxCount=i}return n.prototype.addRow=function(i){if(this.entriesMap[i.getRowNode().id]=i,this.entriesList.push(i),i.setCached(!0),this.entriesList.length>this.maxCount){var e=this.entriesList[0];e.destroyFirstPass(),e.destroySecondPass(),this.removeFromCache(e)}},n.prototype.getRow=function(i){if(i==null||i.id==null)return null;var e=this.entriesMap[i.id];if(!e)return null;this.removeFromCache(e),e.setCached(!1);var t=e.getRowNode()!=i;return t?null:e},n.prototype.removeFromCache=function(i){var e=i.getRowNode().id;delete this.entriesMap[e],mr(this.entriesList,i)},n.prototype.getEntries=function(){return this.entriesList},n}(),$P=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),nf=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},eE=function(n){$P(i,n);function i(){return n!==null&&n.apply(this,arguments)||this}return i.prototype.formatValue=function(e,t,r,o,a){a===void 0&&(a=!0);var s=null,l,u=e.getColDef();if(o?l=o:a&&(l=u.valueFormatter),l){var c={value:r,node:t,data:t?t.data:null,colDef:u,column:e,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context};typeof l=="function"?s=l(c):s=this.expressionService.evaluate(l,c)}else if(u.refData)return u.refData[r]||"";return s==null&&Array.isArray(r)&&(s=r.join(", ")),s},nf([T("expressionService")],i.prototype,"expressionService",void 0),i=nf([Ue("valueFormatterService")],i),i}(ve),tE=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),ec=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},iE=function(n){tE(i,n);function i(){return n!==null&&n.apply(this,arguments)||this}return i.prototype.init=function(){this.setPinnedTopRowData(this.gridOptionsService.get("pinnedTopRowData")),this.setPinnedBottomRowData(this.gridOptionsService.get("pinnedBottomRowData"))},i.prototype.isEmpty=function(e){var t=e==="top"?this.pinnedTopRows:this.pinnedBottomRows;return Cr(t)},i.prototype.isRowsToRender=function(e){return!this.isEmpty(e)},i.prototype.getRowAtPixel=function(e,t){var r=t==="top"?this.pinnedTopRows:this.pinnedBottomRows;if(Cr(r))return 0;for(var o=0;o<r.length;o++){var a=r[o],s=a.rowTop+a.rowHeight-1;if(s>=e)return o}return r.length-1},i.prototype.setPinnedTopRowData=function(e){this.pinnedTopRows=this.createNodesFromData(e,!0);var t={type:b.EVENT_PINNED_ROW_DATA_CHANGED};this.eventService.dispatchEvent(t)},i.prototype.setPinnedBottomRowData=function(e){this.pinnedBottomRows=this.createNodesFromData(e,!1);var t={type:b.EVENT_PINNED_ROW_DATA_CHANGED};this.eventService.dispatchEvent(t)},i.prototype.createNodesFromData=function(e,t){var r=this,o=[];if(e){var a=0;e.forEach(function(s,l){var u=new Nt(r.beans);u.data=s;var c=t?Nt.ID_PREFIX_TOP_PINNED:Nt.ID_PREFIX_BOTTOM_PINNED;u.id=c+l,u.rowPinned=t?"top":"bottom",u.setRowTop(a),u.setRowHeight(r.gridOptionsService.getRowHeightForNode(u).height),u.setRowIndex(l),a+=u.rowHeight,o.push(u)})}return o},i.prototype.getPinnedTopRowData=function(){return this.pinnedTopRows},i.prototype.getPinnedBottomRowData=function(){return this.pinnedBottomRows},i.prototype.getPinnedTopTotalHeight=function(){return this.getTotalHeight(this.pinnedTopRows)},i.prototype.getPinnedTopRowCount=function(){return this.pinnedTopRows?this.pinnedTopRows.length:0},i.prototype.getPinnedBottomRowCount=function(){return this.pinnedBottomRows?this.pinnedBottomRows.length:0},i.prototype.getPinnedTopRow=function(e){return this.pinnedTopRows[e]},i.prototype.getPinnedBottomRow=function(e){return this.pinnedBottomRows[e]},i.prototype.forEachPinnedTopRow=function(e){Cr(this.pinnedTopRows)||this.pinnedTopRows.forEach(e)},i.prototype.forEachPinnedBottomRow=function(e){Cr(this.pinnedBottomRows)||this.pinnedBottomRows.forEach(e)},i.prototype.getPinnedBottomTotalHeight=function(){return this.getTotalHeight(this.pinnedBottomRows)},i.prototype.getTotalHeight=function(e){if(!e||e.length===0)return 0;var t=ai(e);return t.rowTop+t.rowHeight},ec([T("beans")],i.prototype,"beans",void 0),ec([Oe],i.prototype,"init",null),i=ec([Ue("pinnedRowModel")],i),i}(ve),af;(function(n){n.Applied="Applied",n.StoreNotFound="StoreNotFound",n.StoreLoading="StoreLoading",n.StoreWaitingToLoad="StoreWaitingToLoad",n.StoreLoadingFailed="StoreLoadingFailed",n.StoreWrongType="StoreWrongType",n.Cancelled="Cancelled"})(af||(af={}));var kd=function(){function n(i,e){this.active=!0,this.nodeIdsToColumns={},this.mapToItems={},this.keepingColumns=i,this.pathRoot={rowNode:e,children:null},this.mapToItems[e.id]=this.pathRoot}return n.prototype.setInactive=function(){this.active=!1},n.prototype.isActive=function(){return this.active},n.prototype.depthFirstSearchChangedPath=function(i,e){if(i.children)for(var t=0;t<i.children.length;t++)this.depthFirstSearchChangedPath(i.children[t],e);e(i.rowNode)},n.prototype.depthFirstSearchEverything=function(i,e,t){if(i.childrenAfterGroup)for(var r=0;r<i.childrenAfterGroup.length;r++){var o=i.childrenAfterGroup[r];o.childrenAfterGroup?this.depthFirstSearchEverything(i.childrenAfterGroup[r],e,t):t&&e(o)}e(i)},n.prototype.forEachChangedNodeDepthFirst=function(i,e,t){e===void 0&&(e=!1),t===void 0&&(t=!1),this.active&&!t?this.depthFirstSearchChangedPath(this.pathRoot,i):this.depthFirstSearchEverything(this.pathRoot.rowNode,i,e)},n.prototype.executeFromRootNode=function(i){i(this.pathRoot.rowNode)},n.prototype.createPathItems=function(i){for(var e=i,t=0;!this.mapToItems[e.id];){var r={rowNode:e,children:null};this.mapToItems[e.id]=r,t++,e=e.parent}return t},n.prototype.populateColumnsMap=function(i,e){var t=this;if(!(!this.keepingColumns||!e))for(var r=i;r;)this.nodeIdsToColumns[r.id]||(this.nodeIdsToColumns[r.id]={}),e.forEach(function(o){return t.nodeIdsToColumns[r.id][o.getId()]=!0}),r=r.parent},n.prototype.linkPathItems=function(i,e){for(var t=i,r=0;r<e;r++){var o=this.mapToItems[t.id],a=this.mapToItems[t.parent.id];a.children||(a.children=[]),a.children.push(o),t=t.parent}},n.prototype.addParentNode=function(i,e){if(!(!i||i.isRowPinned())){var t=this.createPathItems(i);this.linkPathItems(i,t),this.populateColumnsMap(i,e)}},n.prototype.canSkip=function(i){return this.active&&!this.mapToItems[i.id]},n.prototype.getValueColumnsForNode=function(i,e){if(!this.keepingColumns)return e;var t=this.nodeIdsToColumns[i.id],r=e.filter(function(o){return t[o.getId()]});return r},n.prototype.getNotValueColumnsForNode=function(i,e){if(!this.keepingColumns)return null;var t=this.nodeIdsToColumns[i.id],r=e.filter(function(o){return!t[o.getId()]});return r},n}(),rE=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Kc=function(n){rE(i,n);function i(e){var t=n.call(this)||this;return t.state=i.STATE_WAITING_TO_LOAD,t.version=0,t.id=e,t}return i.prototype.getId=function(){return this.id},i.prototype.load=function(){this.state=i.STATE_LOADING,this.loadFromDatasource()},i.prototype.getVersion=function(){return this.version},i.prototype.setStateWaitingToLoad=function(){this.version++,this.state=i.STATE_WAITING_TO_LOAD},i.prototype.getState=function(){return this.state},i.prototype.pageLoadFailed=function(e){var t=this.isRequestMostRecentAndLive(e);t&&(this.state=i.STATE_FAILED,this.processServerFail()),this.dispatchLoadCompleted(!1)},i.prototype.success=function(e,t){this.successCommon(e,t)},i.prototype.pageLoaded=function(e,t,r){this.successCommon(e,{rowData:t,rowCount:r})},i.prototype.isRequestMostRecentAndLive=function(e){var t=e===this.version,r=this.isAlive();return t&&r},i.prototype.successCommon=function(e,t){this.dispatchLoadCompleted();var r=this.isRequestMostRecentAndLive(e);r&&(this.state=i.STATE_LOADED,this.processServerResult(t))},i.prototype.dispatchLoadCompleted=function(e){e===void 0&&(e=!0);var t={type:i.EVENT_LOAD_COMPLETE,success:e,block:this};this.dispatchEvent(t)},i.EVENT_LOAD_COMPLETE="loadComplete",i.STATE_WAITING_TO_LOAD="needsLoading",i.STATE_LOADING="loading",i.STATE_LOADED="loaded",i.STATE_FAILED="failed",i}(ve),oE=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),qs=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},nE=function(n,i){return function(e,t){i(e,t,n)}},aE=function(n){oE(i,n);function i(){var t=n!==null&&n.apply(this,arguments)||this;return t.activeBlockLoadsCount=0,t.blocks=[],t.active=!0,t}e=i,i.prototype.postConstruct=function(){this.maxConcurrentRequests=this.getMaxConcurrentDatasourceRequests();var t=this.gridOptionsService.getNum("blockLoadDebounceMillis");t&&t>0&&(this.checkBlockToLoadDebounce=St.debounce(this.performCheckBlocksToLoad.bind(this),t))},i.prototype.setBeans=function(t){this.logger=t.create("RowNodeBlockLoader")},i.prototype.getMaxConcurrentDatasourceRequests=function(){var t=this.gridOptionsService.getNum("maxConcurrentDatasourceRequests");if(t==null)return 2;if(!(t<=0))return t},i.prototype.addBlock=function(t){this.blocks.push(t),t.addEventListener(Kc.EVENT_LOAD_COMPLETE,this.loadComplete.bind(this)),this.checkBlockToLoad()},i.prototype.removeBlock=function(t){St.removeFromArray(this.blocks,t)},i.prototype.destroy=function(){n.prototype.destroy.call(this),this.active=!1},i.prototype.loadComplete=function(){this.activeBlockLoadsCount--,this.checkBlockToLoad(),this.dispatchEvent({type:e.BLOCK_LOADED_EVENT}),this.activeBlockLoadsCount==0&&this.dispatchEvent({type:e.BLOCK_LOADER_FINISHED_EVENT})},i.prototype.checkBlockToLoad=function(){this.checkBlockToLoadDebounce?this.checkBlockToLoadDebounce():this.performCheckBlocksToLoad()},i.prototype.performCheckBlocksToLoad=function(){if(this.active){if(this.printCacheStatus(),this.maxConcurrentRequests!=null&&this.activeBlockLoadsCount>=this.maxConcurrentRequests){this.logger.log("checkBlockToLoad: max loads exceeded");return}var t=this.getAvailableLoadingCount(),r=this.blocks.filter(function(o){return o.getState()===Kc.STATE_WAITING_TO_LOAD}).slice(0,t);this.registerLoads(r.length),r.forEach(function(o){return o.load()}),this.printCacheStatus()}},i.prototype.getBlockState=function(){if(this.gridOptionsService.isRowModelType("serverSide")){var t=this.rowModel;return t.getBlockStates()}var r={};return this.blocks.forEach(function(o){var a=o.getBlockStateJson(),s=a.id,l=a.state;r[s]=l}),r},i.prototype.printCacheStatus=function(){this.logger.isLogging()&&this.logger.log("printCacheStatus: activePageLoadsCount = "+this.activeBlockLoadsCount+","+(" blocks = "+JSON.stringify(this.getBlockState())))},i.prototype.isLoading=function(){return this.activeBlockLoadsCount>0},i.prototype.registerLoads=function(t){this.activeBlockLoadsCount+=t},i.prototype.getAvailableLoadingCount=function(){return this.maxConcurrentRequests!==void 0?this.maxConcurrentRequests-this.activeBlockLoadsCount:void 0};var e;return i.BLOCK_LOADED_EVENT="blockLoaded",i.BLOCK_LOADER_FINISHED_EVENT="blockLoaderFinished",qs([T("rowModel")],i.prototype,"rowModel",void 0),qs([Oe],i.prototype,"postConstruct",null),qs([nE(0,er("loggerFactory"))],i.prototype,"setBeans",null),i=e=qs([Ue("rowNodeBlockLoader")],i),i}(ve),sE=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),tc=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},lE=function(n){sE(i,n);function i(){var e=n!==null&&n.apply(this,arguments)||this;return e.currentPage=0,e.topDisplayedRowIndex=0,e.bottomDisplayedRowIndex=0,e.pixelOffset=0,e.masterRowCount=0,e}return i.prototype.postConstruct=function(){this.active=this.gridOptionsService.is("pagination"),this.paginateChildRows=this.isPaginateChildRows(),this.addManagedListener(this.eventService,b.EVENT_MODEL_UPDATED,this.onModelUpdated.bind(this)),this.addManagedPropertyListener("pagination",this.onPaginationPageSizeChanged.bind(this)),this.addManagedPropertyListener("paginationPageSize",this.onPaginationPageSizeChanged.bind(this)),this.onModelUpdated()},i.prototype.ensureRowHeightsValid=function(e,t,r,o){var a=this.rowModel.ensureRowHeightsValid(e,t,this.getPageFirstRow(),this.getPageLastRow());return a&&this.calculatePages(),a},i.prototype.isPaginateChildRows=function(){var e=this.gridOptionsService.is("groupRemoveSingleChildren")||this.gridOptionsService.is("groupRemoveLowestSingleChildren");return e?!0:this.gridOptionsService.is("paginateChildRows")},i.prototype.onModelUpdated=function(e){this.calculatePages();var t={type:b.EVENT_PAGINATION_CHANGED,animate:e?e.animate:!1,newData:e?e.newData:!1,newPage:e?e.newPage:!1,keepRenderedRows:e?e.keepRenderedRows:!1};this.eventService.dispatchEvent(t)},i.prototype.onPaginationPageSizeChanged=function(){this.active=this.gridOptionsService.is("pagination"),this.calculatePages();var e={type:b.EVENT_PAGINATION_CHANGED,animate:!1,newData:!1,newPage:!1,keepRenderedRows:!0};this.eventService.dispatchEvent(e)},i.prototype.goToPage=function(e){if(!(!this.active||this.currentPage===e||typeof this.currentPage!="number")){this.currentPage=e;var t={type:b.EVENT_MODEL_UPDATED,animate:!1,keepRenderedRows:!1,newData:!1,newPage:!0};this.onModelUpdated(t)}},i.prototype.getPixelOffset=function(){return this.pixelOffset},i.prototype.getRow=function(e){return this.rowModel.getRow(e)},i.prototype.getRowNode=function(e){return this.rowModel.getRowNode(e)},i.prototype.getRowIndexAtPixel=function(e){return this.rowModel.getRowIndexAtPixel(e)},i.prototype.getCurrentPageHeight=function(){return vt(this.topRowBounds)||vt(this.bottomRowBounds)?0:Math.max(this.bottomRowBounds.rowTop+this.bottomRowBounds.rowHeight-this.topRowBounds.rowTop,0)},i.prototype.getCurrentPagePixelRange=function(){var e=this.topRowBounds?this.topRowBounds.rowTop:0,t=this.bottomRowBounds?this.bottomRowBounds.rowTop+this.bottomRowBounds.rowHeight:0;return{pageFirstPixel:e,pageLastPixel:t}},i.prototype.isRowPresent=function(e){if(!this.rowModel.isRowPresent(e))return!1;var t=e.rowIndex>=this.topDisplayedRowIndex&&e.rowIndex<=this.bottomDisplayedRowIndex;return t},i.prototype.isEmpty=function(){return this.rowModel.isEmpty()},i.prototype.isRowsToRender=function(){return this.rowModel.isRowsToRender()},i.prototype.forEachNode=function(e){return this.rowModel.forEachNode(e)},i.prototype.forEachNodeOnPage=function(e){for(var t=this.getPageFirstRow(),r=this.getPageLastRow(),o=t;o<=r;o++){var a=this.getRow(o);a&&e(a)}},i.prototype.getType=function(){return this.rowModel.getType()},i.prototype.getRowBounds=function(e){var t=this.rowModel.getRowBounds(e);return t.rowIndex=e,t},i.prototype.getPageFirstRow=function(){return this.topRowBounds?this.topRowBounds.rowIndex:-1},i.prototype.getPageLastRow=function(){return this.bottomRowBounds?this.bottomRowBounds.rowIndex:-1},i.prototype.getRowCount=function(){return this.rowModel.getRowCount()},i.prototype.getPageForIndex=function(e){return Math.floor(e/this.pageSize)},i.prototype.goToPageWithIndex=function(e){if(this.active){var t=this.getPageForIndex(e);this.goToPage(t)}},i.prototype.isRowInPage=function(e){if(!this.active)return!0;var t=this.getPageForIndex(e.rowIndex);return t===this.currentPage},i.prototype.isLastPageFound=function(){return this.rowModel.isLastRowIndexKnown()},i.prototype.getCurrentPage=function(){return this.currentPage},i.prototype.goToNextPage=function(){this.goToPage(this.currentPage+1)},i.prototype.goToPreviousPage=function(){this.goToPage(this.currentPage-1)},i.prototype.goToFirstPage=function(){this.goToPage(0)},i.prototype.goToLastPage=function(){var e=this.rowModel.getRowCount(),t=Math.floor(e/this.pageSize);this.goToPage(t)},i.prototype.getPageSize=function(){return this.pageSize},i.prototype.getTotalPages=function(){return this.totalPages},i.prototype.setPageSize=function(){this.pageSize=this.gridOptionsService.getNum("paginationPageSize"),(this.pageSize==null||this.pageSize<1)&&(this.pageSize=100)},i.prototype.calculatePages=function(){this.active?(this.setPageSize(),this.paginateChildRows?this.calculatePagesAllRows():this.calculatePagesMasterRowsOnly()):this.calculatedPagesNotActive(),this.topRowBounds=this.rowModel.getRowBounds(this.topDisplayedRowIndex),this.topRowBounds&&(this.topRowBounds.rowIndex=this.topDisplayedRowIndex),this.bottomRowBounds=this.rowModel.getRowBounds(this.bottomDisplayedRowIndex),this.bottomRowBounds&&(this.bottomRowBounds.rowIndex=this.bottomDisplayedRowIndex),this.setPixelOffset(ue(this.topRowBounds)?this.topRowBounds.rowTop:0)},i.prototype.setPixelOffset=function(e){this.pixelOffset!==e&&(this.pixelOffset=e,this.eventService.dispatchEvent({type:b.EVENT_PAGINATION_PIXEL_OFFSET_CHANGED}))},i.prototype.setZeroRows=function(){this.masterRowCount=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=-1,this.currentPage=0,this.totalPages=0},i.prototype.adjustCurrentPageIfInvalid=function(){this.currentPage>=this.totalPages&&(this.currentPage=this.totalPages-1),(!isFinite(this.currentPage)||isNaN(this.currentPage)||this.currentPage<0)&&(this.currentPage=0)},i.prototype.calculatePagesMasterRowsOnly=function(){if(this.masterRowCount=this.rowModel.getTopLevelRowCount(),this.masterRowCount<=0){this.setZeroRows();return}var e=this.masterRowCount-1;this.totalPages=Math.floor(e/this.pageSize)+1,this.adjustCurrentPageIfInvalid();var t=this.pageSize*this.currentPage,r=this.pageSize*(this.currentPage+1)-1;if(r>e&&(r=e),this.topDisplayedRowIndex=this.rowModel.getTopLevelRowDisplayedIndex(t),r===e)this.bottomDisplayedRowIndex=this.rowModel.getRowCount()-1;else{var o=this.rowModel.getTopLevelRowDisplayedIndex(r+1);this.bottomDisplayedRowIndex=o-1}},i.prototype.getMasterRowCount=function(){return this.masterRowCount},i.prototype.calculatePagesAllRows=function(){if(this.masterRowCount=this.rowModel.getRowCount(),this.masterRowCount===0){this.setZeroRows();return}var e=this.masterRowCount-1;this.totalPages=Math.floor(e/this.pageSize)+1,this.adjustCurrentPageIfInvalid(),this.topDisplayedRowIndex=this.pageSize*this.currentPage,this.bottomDisplayedRowIndex=this.pageSize*(this.currentPage+1)-1,this.bottomDisplayedRowIndex>e&&(this.bottomDisplayedRowIndex=e)},i.prototype.calculatedPagesNotActive=function(){this.pageSize=this.rowModel.getRowCount(),this.totalPages=1,this.currentPage=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=this.rowModel.getRowCount()-1},tc([T("rowModel")],i.prototype,"rowModel",void 0),tc([Oe],i.prototype,"postConstruct",null),i=tc([Ue("paginationProxy")],i),i}(ve),uE=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),sf=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},cE=function(n){uE(i,n);function i(){return n!==null&&n.apply(this,arguments)||this}return i.prototype.processAllCellClasses=function(e,t,r,o){this.processClassRules(e.cellClassRules,t,r,o),this.processStaticCellClasses(e,t,r)},i.prototype.processClassRules=function(e,t,r,o){if(e!=null){for(var a=Object.keys(e),s={},l={},u=function(f){var y=a[f],S=e[y],w;typeof S=="string"?w=c.expressionService.evaluate(S,t):typeof S=="function"&&(w=S(t)),y.split(" ").forEach(function(E){E==null||E.trim()==""||(w?s[E]=!0:l[E]=!0)})},c=this,d=0;d<a.length;d++)u(d);o&&Object.keys(l).forEach(o),Object.keys(s).forEach(r)}},i.prototype.getStaticCellClasses=function(e,t){var r=e.cellClass;if(!r)return[];var o;if(typeof r=="function"){var a=r;o=a(t)}else o=r;return typeof o=="string"&&(o=[o]),o||[]},i.prototype.processStaticCellClasses=function(e,t,r){var o=this.getStaticCellClasses(e,t);o.forEach(function(a){r(a)})},sf([T("expressionService")],i.prototype,"expressionService",void 0),i=sf([Ue("stylingService")],i),i}(ve),dE=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),pE=function(n){dE(i,n);function i(e){return n.call(this,e,"ag-toggle-button")||this}return i.prototype.setValue=function(e,t){return n.prototype.setValue.call(this,e,t),this.addOrRemoveCssClass("ag-selected",this.getValue()),this},i}(Yl),fE=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),hE=function(n){fE(i,n);function i(e){return n.call(this,e,"ag-text-area",null,"textarea")||this}return i.prototype.setValue=function(e,t){var r=n.prototype.setValue.call(this,e,t);return this.eInput.value=e,r},i.prototype.setCols=function(e){return this.eInput.cols=e,this},i.prototype.setRows=function(e){return this.eInput.rows=e,this},i}(Qo),vE=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),gE=function(n){vE(i,n);function i(e){return n.call(this,e,"ag-date-field","date")||this}return i.prototype.postConstruct=function(){var e=this;n.prototype.postConstruct.call(this),this.addManagedListener(this.eInput,"wheel",this.onWheel.bind(this));var t=Fr();this.addManagedListener(this.eInput,"mousedown",function(){e.isDisabled()||t||e.eInput.focus()}),this.eInput.step="any"},i.prototype.onWheel=function(e){document.activeElement===this.eInput&&e.preventDefault()},i.prototype.setMin=function(e){var t,r=e instanceof Date?(t=Mr(e??null,!1))!==null&&t!==void 0?t:void 0:e;return this.min===r?this:(this.min=r,so(this.eInput,"min",r),this)},i.prototype.setMax=function(e){var t,r=e instanceof Date?(t=Mr(e??null,!1))!==null&&t!==void 0?t:void 0:e;return this.max===r?this:(this.max=r,so(this.eInput,"max",r),this)},i.prototype.setStep=function(e){return this.step===e?this:(this.step=e,so(this.eInput,"step",e),this)},i.prototype.getDate=function(){var e;if(this.eInput.validity.valid)return(e=pr(this.getValue()))!==null&&e!==void 0?e:void 0},i.prototype.setDate=function(e,t){this.setValue(Mr(e??null,!1),t)},i}(Rn),yE=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),mE=function(n){yE(i,n);function i(e){return n.call(this,e,"ag-range-field","range")||this}return i.prototype.postConstruct=function(){n.prototype.postConstruct.call(this);var e=this.config,t=e.min,r=e.max,o=e.step;t!=null&&this.setMinValue(t),r!=null&&this.setMaxValue(r),this.setStep(o||1)},i.prototype.addInputListeners=function(){var e=this;this.addManagedListener(this.eInput,"input",function(t){var r=t.target.value;e.setValue(r)})},i.prototype.setMinValue=function(e){return this.min=e,this.eInput.setAttribute("min",e.toString()),this},i.prototype.setMaxValue=function(e){return this.max=e,this.eInput.setAttribute("max",e.toString()),this},i.prototype.setStep=function(e){return this.eInput.setAttribute("step",e.toString()),this},i.prototype.setValue=function(e,t){this.min!=null&&(e=Math.max(parseFloat(e),this.min).toString()),this.max!=null&&(e=Math.min(parseFloat(e),this.max).toString());var r=n.prototype.setValue.call(this,e,t);return this.eInput.value=e,r},i}(Qo),CE=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),lf=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},SE=function(n){CE(i,n);function i(e,t){var r=n.call(this,'<div class="ag-rich-select-row" role="presentation"></div>')||this;return r.params=e,r.wrapperEl=t,r}return i.prototype.postConstruct=function(){this.addManagedListener(this.getGui(),"mouseup",this.onMouseUp.bind(this))},i.prototype.setState=function(e){var t="";this.params.valueFormatter&&(t=this.params.valueFormatter(e));var r=this.populateWithRenderer(e,t);r||this.populateWithoutRenderer(e,t),this.value=e},i.prototype.highlightString=function(e){var t=this.parsedValue;if(!(this.params.cellRenderer||!ue(t)))if(ue(e)){var r=t?.toLocaleLowerCase().indexOf(e.toLocaleLowerCase());if(r>=0){var o=r+e.length,a=Ii(t.slice(0,r),!0),s=Ii(t.slice(r,o),!0),l=Ii(t.slice(o));this.renderValueWithoutRenderer(a+'<span class="ag-rich-select-row-text-highlight">'+s+"</span>"+l)}}else this.renderValueWithoutRenderer(t)},i.prototype.updateHighlighted=function(e){var t,r=this.getGui(),o="ag-rich-select-row-"+this.getCompId();if((t=r.parentElement)===null||t===void 0||t.setAttribute("id",o),e){var a=this.getParentComponent().getAriaElement();nd(a,o),this.wrapperEl.setAttribute("data-active-option",o)}Dn(r.parentElement,e),this.addOrRemoveCssClass("ag-rich-select-row-selected",e)},i.prototype.populateWithoutRenderer=function(e,t){var r=this.gridOptionsService.getDocument(),o=this.getGui(),a=r.createElement("span");a.style.overflow="hidden",a.style.textOverflow="ellipsis";var s=Ii(ue(t)?t:e,!0);this.parsedValue=ue(s)?s:null,o.appendChild(a),this.renderValueWithoutRenderer(s)},i.prototype.renderValueWithoutRenderer=function(e){var t=this.getGui().querySelector("span");t&&(t.innerHTML=ue(e)?e:"&nbsp;")},i.prototype.populateWithRenderer=function(e,t){var r=this,o,a;return this.params.cellRenderer&&(a=this.userComponentFactory.getCellRendererDetails(this.params,{value:e,valueFormatted:t,api:this.gridOptionsService.api})),a&&(o=a.newAgStackInstance()),o&&Td(o,this.getGui()),o?(o.then(function(s){r.addDestroyFunc(function(){r.getContext().destroyBean(s)})}),!0):!1},i.prototype.onMouseUp=function(){var e=this.getParentComponent(),t={type:b.EVENT_FIELD_PICKER_VALUE_SELECTED,fromEnterKey:!1,value:this.value};e?.dispatchEvent(t)},lf([T("userComponentFactory")],i.prototype,"userComponentFactory",void 0),lf([Oe],i.prototype,"postConstruct",null),i}(xt),wE=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),TE=function(n,i){var e=typeof Symbol=="function"&&n[Symbol.iterator];if(!e)return n;var t=e.call(n),r,o=[],a;try{for(;(i===void 0||i-- >0)&&!(r=t.next()).done;)o.push(r.value)}catch(s){a={error:s}}finally{try{r&&!r.done&&(e=t.return)&&e.call(t)}finally{if(a)throw a.error}}return o},OE=function(n,i){for(var e=0,t=i.length,r=n.length;e<t;e++,r++)n[r]=i[e];return n},Xl=function(n){wE(i,n);function i(){return n!==null&&n.apply(this,arguments)||this}return i.prototype.initialiseTabGuard=function(e){this.eTopGuard=this.createTabGuard("top"),this.eBottomGuard=this.createTabGuard("bottom"),this.eFocusableElement=this.getFocusableElement();var t=[this.eTopGuard,this.eBottomGuard],r={setTabIndex:function(o){t.forEach(function(a){return o!=null?a.setAttribute("tabindex",o):a.removeAttribute("tabindex")})}};this.addTabGuards(this.eTopGuard,this.eBottomGuard),this.tabGuardCtrl=this.createManagedBean(new rP({comp:r,eTopGuard:this.eTopGuard,eBottomGuard:this.eBottomGuard,eFocusableElement:this.eFocusableElement,onFocusIn:e.onFocusIn,onFocusOut:e.onFocusOut,focusInnerElement:e.focusInnerElement,handleKeyDown:e.handleKeyDown,onTabKeyDown:e.onTabKeyDown,shouldStopEventPropagation:e.shouldStopEventPropagation}))},i.prototype.createTabGuard=function(e){var t=document.createElement("div"),r=e==="top"?ea.TAB_GUARD_TOP:ea.TAB_GUARD_BOTTOM;return t.classList.add(ea.TAB_GUARD,r),Wi(t,"presentation"),t},i.prototype.addTabGuards=function(e,t){this.eFocusableElement.insertAdjacentElement("afterbegin",e),this.eFocusableElement.insertAdjacentElement("beforeend",t)},i.prototype.removeAllChildrenExceptTabGuards=function(){var e=[this.eTopGuard,this.eBottomGuard];tr(this.getFocusableElement()),this.addTabGuards.apply(this,OE([],TE(e)))},i.prototype.forceFocusOutOfContainer=function(e){e===void 0&&(e=!1),this.tabGuardCtrl.forceFocusOutOfContainer(e)},i.prototype.appendChild=function(e,t){gs(e)||(e=e.getGui());var r=this.eBottomGuard;r?r.insertAdjacentElement("beforebegin",e):n.prototype.appendChild.call(this,e,t)},i}(xt),PE=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Xs=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},Qv=function(n){PE(i,n);function i(e){var t=n.call(this,i.getTemplate(e?.cssIdentifier||"default"))||this;t.renderedRows=new Map,t.rowHeight=20;var r=e||{},o=r.cssIdentifier,a=o===void 0?"default":o,s=r.ariaRole,l=s===void 0?"listbox":s,u=r.listName;return t.cssIdentifier=a,t.ariaRole=l,t.listName=u,t}return i.prototype.postConstruct=function(){var e=this;this.addScrollListener(),this.rowHeight=this.getItemHeight(),this.addResizeObserver(),this.initialiseTabGuard({onFocusIn:function(t){return e.onFocusIn(t)},onFocusOut:function(t){return e.onFocusOut(t)},focusInnerElement:function(t){return e.focusInnerElement(t)},onTabKeyDown:function(t){return e.onTabKeyDown(t)},handleKeyDown:function(t){return e.handleKeyDown(t)}}),this.setAriaProperties(),this.addManagedListener(this.eventService,b.EVENT_GRID_STYLES_CHANGED,this.onGridStylesChanged.bind(this))},i.prototype.onGridStylesChanged=function(){this.rowHeight=this.getItemHeight(),this.refresh()},i.prototype.setAriaProperties=function(){var e=this.localeService.getLocaleTextFunc(),t=e("ariaDefaultListName",this.listName||"List"),r=this.eContainer;Wi(r,this.ariaRole),Po(r,t)},i.prototype.addResizeObserver=function(){var e=this,t=function(){return e.animationFrameService.requestAnimationFrame(function(){return e.drawVirtualRows()})},r=this.resizeObserverService.observeResize(this.getGui(),t);this.addDestroyFunc(r)},i.prototype.focusInnerElement=function(e){this.focusRow(e?this.model.getRowCount()-1:0)},i.prototype.onFocusIn=function(e){var t=e.target;return t.classList.contains("ag-virtual-list-item")&&(this.lastFocusedRowIndex=Bh(t)-1),!1},i.prototype.onFocusOut=function(e){return this.getFocusableElement().contains(e.relatedTarget)||(this.lastFocusedRowIndex=null),!1},i.prototype.handleKeyDown=function(e){switch(e.key){case J.UP:case J.DOWN:this.navigate(e.key===J.UP)&&e.preventDefault();break}},i.prototype.onTabKeyDown=function(e){this.navigate(e.shiftKey)?e.preventDefault():(uo(e),this.forceFocusOutOfContainer(e.shiftKey))},i.prototype.navigate=function(e){if(this.lastFocusedRowIndex==null)return!1;var t=this.lastFocusedRowIndex+(e?-1:1);return t<0||t>=this.model.getRowCount()?!1:(this.focusRow(t),!0)},i.prototype.getLastFocusedRow=function(){return this.lastFocusedRowIndex},i.prototype.focusRow=function(e){var t=this;this.ensureIndexVisible(e),window.setTimeout(function(){if(t.isAlive()){var r=t.renderedRows.get(e);r&&r.eDiv.focus()}},10)},i.prototype.getComponentAt=function(e){var t=this.renderedRows.get(e);return t&&t.rowComponent},i.prototype.forEachRenderedRow=function(e){this.renderedRows.forEach(function(t,r){return e(t.rowComponent,r)})},i.getTemplate=function(e){return'<div class="ag-virtual-list-viewport ag-'+e+`-virtual-list-viewport" role="presentation">
                <div class="ag-virtual-list-container ag-`+e+`-virtual-list-container" ref="eContainer"></div>
            </div>`},i.prototype.getItemHeight=function(){return this.environment.getListItemHeight()},i.prototype.ensureIndexVisible=function(e,t){t===void 0&&(t=!0);var r=this.model.getRowCount();if(typeof e!="number"||e<0||e>=r)return console.warn("AG Grid: invalid row index for ensureIndexVisible: "+e),!1;var o=e*this.rowHeight,a=o+this.rowHeight,s=this.getGui(),l=s.scrollTop,u=s.offsetHeight,c=l+u,d=t?0:this.rowHeight,f=l>o+d,y=c<a-d;if(f)return s.scrollTop=o,!0;if(y){var S=a-u;return s.scrollTop=S,!0}return!1},i.prototype.setComponentCreator=function(e){this.componentCreator=e},i.prototype.setComponentUpdater=function(e){this.componentUpdater=e},i.prototype.getRowHeight=function(){return this.rowHeight},i.prototype.getScrollTop=function(){return this.getGui().scrollTop},i.prototype.setRowHeight=function(e){this.rowHeight=e,this.refresh()},i.prototype.refresh=function(e){var t=this;if(!(this.model==null||!this.isAlive())){var r=this.model.getRowCount();this.eContainer.style.height=r*this.rowHeight+"px",ed(function(){return t.eContainer.clientHeight>=r*t.rowHeight},function(){t.isAlive()&&(t.canSoftRefresh(e)?t.drawVirtualRows(!0):(t.clearVirtualRows(),t.drawVirtualRows()))})}},i.prototype.canSoftRefresh=function(e){return!!(e&&this.renderedRows.size&&typeof this.model.areRowsEqual=="function"&&this.componentUpdater)},i.prototype.clearVirtualRows=function(){var e=this;this.renderedRows.forEach(function(t,r){return e.removeRow(r)})},i.prototype.drawVirtualRows=function(e){if(!(!this.isAlive()||!this.model)){var t=this.getGui(),r=t.scrollTop,o=r+t.offsetHeight,a=Math.floor(r/this.rowHeight),s=Math.floor(o/this.rowHeight);this.ensureRowsRendered(a,s,e)}},i.prototype.ensureRowsRendered=function(e,t,r){var o=this;this.renderedRows.forEach(function(s,l){(l<e||l>t)&&l!==o.lastFocusedRowIndex&&o.removeRow(l)}),r&&this.refreshRows();for(var a=e;a<=t;a++)this.renderedRows.has(a)||a<this.model.getRowCount()&&this.insertRow(a)},i.prototype.insertRow=function(e){var t=this,r=this.model.getRow(e),o=document.createElement("div");if(o.classList.add("ag-virtual-list-item","ag-"+this.cssIdentifier+"-virtual-list-item"),Wi(o,this.ariaRole==="tree"?"treeitem":"option"),ad(o,this.model.getRowCount()),sd(o,e+1),o.setAttribute("tabindex","-1"),typeof this.model.isRowSelected=="function"){var a=this.model.isRowSelected(e);Dn(o,!!a),Zh(o,a)}o.style.height=this.rowHeight+"px",o.style.top=this.rowHeight*e+"px";var s=this.componentCreator(r,o);s.addGuiEventListener("focusin",function(){return t.lastFocusedRowIndex=e}),o.appendChild(s.getGui()),this.renderedRows.has(e-1)?this.renderedRows.get(e-1).eDiv.insertAdjacentElement("afterend",o):this.renderedRows.has(e+1)?this.renderedRows.get(e+1).eDiv.insertAdjacentElement("beforebegin",o):this.eContainer.appendChild(o),this.renderedRows.set(e,{rowComponent:s,eDiv:o,value:r})},i.prototype.removeRow=function(e){var t=this.renderedRows.get(e);this.eContainer.removeChild(t.eDiv),this.destroyBean(t.rowComponent),this.renderedRows.delete(e)},i.prototype.refreshRows=function(){var e=this,t=this.model.getRowCount();this.renderedRows.forEach(function(r,o){var a,s;if(o>=t)e.removeRow(o);else{var l=e.model.getRow(o);!((s=(a=e.model).areRowsEqual)===null||s===void 0)&&s.call(a,r.value,l)?e.componentUpdater(l,r.rowComponent):e.removeRow(o)}})},i.prototype.addScrollListener=function(){var e=this;this.addGuiEventListener("scroll",function(){return e.drawVirtualRows()},{passive:!0})},i.prototype.setModel=function(e){this.model=e},i.prototype.getAriaElement=function(){return this.eContainer},i.prototype.destroy=function(){this.isAlive()&&(this.clearVirtualRows(),n.prototype.destroy.call(this))},Xs([T("resizeObserverService")],i.prototype,"resizeObserverService",void 0),Xs([T("animationFrameService")],i.prototype,"animationFrameService",void 0),Xs([be("eContainer")],i.prototype,"eContainer",void 0),Xs([Oe],i.prototype,"postConstruct",null),i}(Xl),EE=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),xl=function(){return xl=Object.assign||function(n){for(var i,e=1,t=arguments.length;e<t;e++){i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(n[r]=i[r])}return n},xl.apply(this,arguments)},uf=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},_E=`
    <div class="ag-picker-field" role="presentation">
        <div ref="eLabel"></div>
            <div ref="eWrapper" class="ag-wrapper ag-picker-field-wrapper ag-rich-select-value ag-picker-collapsed">
            <div ref="eDisplayField" class="ag-picker-field-display"></div>
            <ag-input-text-field ref="eInput" class="ag-rich-select-field-input"></ag-input-text-field>
            <div ref="eIcon" class="ag-picker-field-icon" aria-hidden="true"></div>
        </div>
    </div>`,bE=function(n){EE(i,n);function i(e){var t,r,o=n.call(this,xl(xl({pickerAriaLabelKey:"ariaLabelRichSelectField",pickerAriaLabelValue:"Rich Select Field",pickerType:"ag-list",className:"ag-rich-select",pickerIcon:"smallDown",ariaRole:"combobox",template:(t=e?.template)!==null&&t!==void 0?t:_E,modalPicker:!1},e),{maxPickerHeight:(r=e?.maxPickerHeight)!==null&&r!==void 0?r:"calc(var(--ag-row-height) * 6.5)"}))||this;o.searchString="",o.highlightedItem=-1,o.lastRowHovered=-1,o.searchStringCreator=null;var a=e||{},s=a.cellRowHeight,l=a.value,u=a.valueList,c=a.searchStringCreator;return s!=null&&(o.cellRowHeight=s),l!==void 0&&(o.value=l),u!=null&&(o.values=u),c&&(o.searchStringCreator=c),o}return i.prototype.postConstruct=function(){var e=this,t;n.prototype.postConstruct.call(this),this.createLoadingElement(),this.createListComponent();var r=this.config,o=r.allowTyping,a=r.placeholder;o?(this.eInput.setAutoComplete(!1).setInputPlaceholder(a),this.eDisplayField.classList.add("ag-hidden")):this.eInput.setDisplayed(!1),this.eWrapper.tabIndex=(t=this.gridOptionsService.getNum("tabIndex"))!==null&&t!==void 0?t:0;var s=this.config.searchDebounceDelay,l=s===void 0?300:s;this.clearSearchString=zr(this.clearSearchString,l),this.renderSelectedValue(),o&&(this.eInput.onValueChange(function(u){return e.searchTextFromString(u)}),this.addManagedListener(this.eWrapper,"focus",this.onWrapperFocus.bind(this))),this.addManagedListener(this.eWrapper,"focusout",this.onWrapperFocusOut.bind(this))},i.prototype.createLoadingElement=function(){var e=this.gridOptionsService.getDocument(),t=this.localeService.getLocaleTextFunc(),r=e.createElement("div");r.classList.add("ag-loading-text"),r.innerText=t("loadingOoo","Loading..."),this.eLoading=r},i.prototype.createListComponent=function(){var e=this;this.listComponent=this.createBean(new Qv({cssIdentifier:"rich-select"})),this.listComponent.setComponentCreator(this.createRowComponent.bind(this)),this.listComponent.setParentComponent(this),this.addManagedListener(this.listComponent,b.EVENT_FIELD_PICKER_VALUE_SELECTED,function(u){e.onListValueSelected(u.value,u.fromEnterKey)});var t=this.cellRowHeight;t&&this.listComponent.setRowHeight(t);var r=this.listComponent.getGui(),o=this.listComponent.getAriaElement();this.addManagedListener(r,"mousemove",this.onPickerMouseMove.bind(this)),this.addManagedListener(r,"mousedown",function(u){return u.preventDefault()}),r.classList.add("ag-rich-select-list");var a="ag-rich-select-list-"+this.listComponent.getCompId();o.setAttribute("id",a);var s=this.localeService.getLocaleTextFunc(),l=s(this.config.pickerAriaLabelKey,this.config.pickerAriaLabelValue);Po(o,l),$h(this.eWrapper,o)},i.prototype.renderSelectedValue=function(){var e=this,t=this,r=t.value,o=t.eDisplayField,a=t.config,s=this.config.valueFormatter?this.config.valueFormatter(r):r;if(a.allowTyping){this.eInput.setValue(s);return}var l;a.cellRenderer&&(l=this.userComponentFactory.getCellRendererDetails(this.config,{value:r,valueFormatted:s,api:this.gridOptionsService.api}));var u;if(l&&(u=l.newAgStackInstance()),u)tr(o),Td(u,o),u.then(function(d){e.addDestroyFunc(function(){return e.getContext().destroyBean(d)})});else if(ue(this.value))o.innerText=s,o.classList.remove("ag-display-as-placeholder");else{var c=a.placeholder;ue(c)?(o.innerHTML=""+Ii(c),o.classList.add("ag-display-as-placeholder")):tr(o)}},i.prototype.getCurrentValueIndex=function(){var e=this,t=e.currentList,r=e.value;if(r==null)return-1;for(var o=0;o<t.length;o++)if(t[o]===r)return o;return-1},i.prototype.highlightFilterMatch=function(){var e=this,t;(t=this.listComponent)===null||t===void 0||t.forEachRenderedRow(function(r,o){r.highlightString(e.searchString)})},i.prototype.highlightSelectedValue=function(e){var t=this,r;e==null&&(e=this.getCurrentValueIndex()),this.highlightedItem=e,(r=this.listComponent)===null||r===void 0||r.forEachRenderedRow(function(o,a){var s=e===-1?!1:t.highlightedItem===a;o.updateHighlighted(s)})},i.prototype.setRowHeight=function(e){e!==this.cellRowHeight&&(this.cellRowHeight=e),this.listComponent&&this.listComponent.setRowHeight(e)},i.prototype.createPickerComponent=function(){var e=this.values;return e&&this.setValueList({valueList:e}),this.listComponent},i.prototype.setSearchStringCreator=function(e){this.searchStringCreator=e},i.prototype.setValueList=function(e){var t=e.valueList,r=e.refresh;this.listComponent&&this.currentList!==t&&(this.currentList=t,this.listComponent.setModel({getRowCount:function(){return t.length},getRow:function(o){return t[o]}}),r&&(this.values?this.listComponent.refresh():(this.values=t,this.isPickerDisplayed&&this.showCurrentValueInPicker())))},i.prototype.showPicker=function(){n.prototype.showPicker.call(this),this.showCurrentValueInPicker()},i.prototype.showCurrentValueInPicker=function(){var e,t;if(this.listComponent){if(!this.currentList){this.isPickerDisplayed&&this.eLoading&&this.listComponent.appendChild(this.eLoading);return}!((e=this.eLoading)===null||e===void 0)&&e.offsetParent&&((t=this.eLoading.parentElement)===null||t===void 0||t.removeChild(this.eLoading));var r=this.getCurrentValueIndex();r!==-1?(this.listComponent.refresh(),this.listComponent.ensureIndexVisible(r),this.listComponent.refresh(!0),this.highlightSelectedValue(r)):this.listComponent.refresh()}},i.prototype.beforeHidePicker=function(){this.highlightedItem=-1,n.prototype.beforeHidePicker.call(this)},i.prototype.onWrapperFocus=function(e){this.eInput&&this.eInput.getFocusableElement().focus()},i.prototype.onWrapperFocusOut=function(e){this.eWrapper.contains(e.relatedTarget)||this.hidePicker()},i.prototype.buildSearchStringFromKeyboardEvent=function(e){var t=e.key;if(t===J.BACKSPACE)this.searchString=this.searchString.slice(0,-1),t="";else if(!zl(e))return;e.preventDefault(),this.searchTextFromCharacter(t)},i.prototype.searchTextFromCharacter=function(e){this.searchString+=e,this.runSearch(),this.clearSearchString()},i.prototype.searchTextFromString=function(e){e==null&&(e=""),this.searchString=e,this.runSearch()},i.prototype.buildSearchStrings=function(e){var t=this.config.valueFormatter,r=t===void 0?function(a){return a}:t,o;return typeof e[0]=="number"||typeof e[0]=="string"?o=e.map(function(a){return r(a)}):typeof e[0]=="object"&&this.searchStringCreator&&(o=this.searchStringCreator(e)),o},i.prototype.getSuggestionsAndFilteredValues=function(e,t){var r=this,o=[],a=[];if(!e.length)return{suggestions:o,filteredValues:a};var s=this.config,l=s.allowTyping,u=s.searchType,c=u===void 0?"fuzzy":u,d=s.filterList,f=d&&l;if(c==="fuzzy"){var y=hs(this.searchString,t,!0);o=y.values;var S=y.indices;if(f&&S.length)for(var w=0;w<S.length;w++)a.push(this.values[S[w]])}else o=t.filter(function(E,_){var L=E.toLocaleLowerCase(),P=r.searchString.toLocaleLowerCase(),V=c==="match"?L.startsWith(P):L.indexOf(P)!==-1;return f&&V&&a.push(r.values[_]),V});return{suggestions:o,filteredValues:a}},i.prototype.filterListModel=function(e){var t=this.config,r=t.allowTyping,o=t.filterList;!r||!o||this.setValueList({valueList:e,refresh:!0})},i.prototype.runSearch=function(){var e,t,r,o=this.values,a=this.buildSearchStrings(o);if(!a){this.highlightSelectedValue(-1);return}var s=this.getSuggestionsAndFilteredValues(this.searchString,a),l=s.suggestions,u=s.filteredValues,c=this.config,d=c.allowTyping,f=c.filterList,y=c.highlightMatch,S=c.searchType,w=S===void 0?"fuzzy":S,E=u.length,_=!!(d&&f&&this.searchString!=="");if(_&&this.filterListModel(_?u:o),l.length){var L=_?0:a.indexOf(l[0]);this.selectListItem(L),y&&w!=="fuzzy"&&this.highlightFilterMatch()}else if(this.highlightSelectedValue(-1),!_||E)(e=this.listComponent)===null||e===void 0||e.ensureIndexVisible(0);else if(_){this.getAriaElement().removeAttribute("data-active-option");var P=(t=this.listComponent)===null||t===void 0?void 0:t.getAriaElement();P&&nd(P,null)}var V=(r=this.listComponent)===null||r===void 0?void 0:r.getGui();V?.classList.toggle("ag-hidden",_&&!E)},i.prototype.clearSearchString=function(){this.searchString=""},i.prototype.selectListItem=function(e,t,r){if(!(!this.isPickerDisplayed||!this.listComponent||e<0||e>=this.currentList.length)){var o=this.listComponent.ensureIndexVisible(e,!t);o&&!r&&this.listComponent.refresh(!0),this.highlightSelectedValue(e)}},i.prototype.setValue=function(e,t,r){var o=this.currentList.indexOf(e);return o===-1?this:(this.value=e,r||this.selectListItem(o),this.renderSelectedValue(),n.prototype.setValue.call(this,e,t))},i.prototype.createRowComponent=function(e){var t=new SE(this.config,this.eWrapper);t.setParentComponent(this.listComponent),this.getContext().createBean(t),t.setState(e);var r=this.config,o=r.highlightMatch,a=r.searchType,s=a===void 0?"fuzzy":a;return o&&s!=="fuzzy"&&t.highlightString(this.searchString),t},i.prototype.getRowForMouseEvent=function(e){var t=this.listComponent;if(!t)return-1;var r=t?.getGui(),o=r.getBoundingClientRect(),a=t.getScrollTop(),s=e.clientY-o.top+a;return Math.floor(s/t.getRowHeight())},i.prototype.onPickerMouseMove=function(e){if(this.listComponent){var t=this.getRowForMouseEvent(e);t!==-1&&t!=this.lastRowHovered&&(this.lastRowHovered=t,this.selectListItem(t,!0,!0))}},i.prototype.onNavigationKeyDown=function(e,t){e.preventDefault();var r=t===J.DOWN;if(!this.isPickerDisplayed&&r){this.showPicker();return}var o=this.highlightedItem,a=r?1:-1,s=o===-1?0:o+a;this.selectListItem(s,!1,!0)},i.prototype.onEnterKeyDown=function(e){this.isPickerDisplayed&&(e.preventDefault(),this.onListValueSelected(this.currentList[this.highlightedItem],!0))},i.prototype.onTabKeyDown=function(){this.isPickerDisplayed&&this.setValue(this.currentList[this.highlightedItem],!1,!0)},i.prototype.onListValueSelected=function(e,t){this.setValue(e,!1,!0),this.dispatchPickerEvent(e,t),this.hidePicker()},i.prototype.dispatchPickerEvent=function(e,t){var r={type:b.EVENT_FIELD_PICKER_VALUE_SELECTED,fromEnterKey:t,value:e};this.dispatchEvent(r)},i.prototype.getFocusableElement=function(){var e=this.config.allowTyping;return e?this.eInput.getFocusableElement():n.prototype.getFocusableElement.call(this)},i.prototype.onKeyDown=function(e){var t=e.key,r=this.config.allowTyping;switch(t){case J.LEFT:case J.RIGHT:case J.PAGE_HOME:case J.PAGE_END:r||e.preventDefault();break;case J.PAGE_UP:case J.PAGE_DOWN:e.preventDefault();break;case J.DOWN:case J.UP:this.onNavigationKeyDown(e,t);break;case J.ESCAPE:this.isPickerDisplayed&&(e.preventDefault(),uo(e),this.hidePicker());break;case J.ENTER:this.onEnterKeyDown(e);break;case J.TAB:this.onTabKeyDown();break;default:r||this.buildSearchStringFromKeyboardEvent(e)}},i.prototype.destroy=function(){this.listComponent&&(this.destroyBean(this.listComponent),this.listComponent=void 0),this.eLoading=void 0,n.prototype.destroy.call(this)},uf([T("userComponentFactory")],i.prototype,"userComponentFactory",void 0),uf([be("eInput")],i.prototype,"eInput",void 0),i}(Pv),DE=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Js=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},RE=function(n){DE(i,n);function i(e){var t=n.call(this,e,i.TEMPLATE)||this;return t.labelAlignment="top",t}return i.prototype.init=function(){this.eSlider.addCssClass("ag-slider-field")},i.prototype.onValueChange=function(e){var t=this,r=b.EVENT_FIELD_VALUE_CHANGED;return this.addManagedListener(this.eText,r,function(){var o=parseFloat(t.eText.getValue());t.eSlider.setValue(o.toString(),!0),e(o||0)}),this.addManagedListener(this.eSlider,r,function(){var o=t.eSlider.getValue();t.eText.setValue(o,!0),e(parseFloat(o))}),this},i.prototype.setSliderWidth=function(e){return this.eSlider.setWidth(e),this},i.prototype.setTextFieldWidth=function(e){return this.eText.setWidth(e),this},i.prototype.setMinValue=function(e){return this.eSlider.setMinValue(e),this.eText.setMin(e),this},i.prototype.setMaxValue=function(e){return this.eSlider.setMaxValue(e),this.eText.setMax(e),this},i.prototype.getValue=function(){return this.eText.getValue()},i.prototype.setValue=function(e){return this.getValue()===e?this:(this.eText.setValue(e,!0),this.eSlider.setValue(e,!0),this.dispatchEvent({type:b.EVENT_FIELD_VALUE_CHANGED}),this)},i.prototype.setStep=function(e){return this.eSlider.setStep(e),this.eText.setStep(e),this},i.TEMPLATE=`<div class="ag-slider">
            <label ref="eLabel"></label>
            <div class="ag-wrapper ag-slider-wrapper">
                <ag-input-range ref="eSlider"></ag-input-range>
                <ag-input-number-field ref="eText"></ag-input-number-field>
            </div>
        </div>`,Js([be("eLabel")],i.prototype,"eLabel",void 0),Js([be("eSlider")],i.prototype,"eSlider",void 0),Js([be("eText")],i.prototype,"eText",void 0),Js([Oe],i.prototype,"init",null),i}(Tv),xE=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Vo=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},AE=function(n){xE(i,n);function i(e){e===void 0&&(e={});var t=n.call(this,i.getTemplate(e))||this;t.suppressEnabledCheckbox=!0,t.suppressOpenCloseIcons=!1;var r=e.title,o=e.enabled,a=e.items,s=e.suppressEnabledCheckbox,l=e.suppressOpenCloseIcons;return t.title=r,t.cssIdentifier=e.cssIdentifier||"default",t.enabled=o??!0,t.items=a||[],t.alignItems=e.alignItems||"center",s!=null&&(t.suppressEnabledCheckbox=s),l!=null&&(t.suppressOpenCloseIcons=l),t}return i.getTemplate=function(e){var t=e.cssIdentifier||"default",r=e.direction||"vertical";return'<div class="ag-group ag-'+t+`-group" role="presentation">
            <div class="ag-group-title-bar ag-`+t+`-group-title-bar ag-unselectable" ref="eTitleBar" role="button">
                <span class="ag-group-title-bar-icon ag-`+t+`-group-title-bar-icon" ref="eGroupOpenedIcon" role="presentation"></span>
                <span class="ag-group-title-bar-icon ag-`+t+`-group-title-bar-icon" ref="eGroupClosedIcon" role="presentation"></span>
                <span ref="eTitle" class="ag-group-title ag-`+t+`-group-title"></span>
            </div>
            <div ref="eToolbar" class="ag-group-toolbar ag-`+t+`-group-toolbar">
                <ag-checkbox ref="cbGroupEnabled"></ag-checkbox>
            </div>
            <div ref="eContainer" class="ag-group-container ag-group-container-`+r+" ag-"+t+`-group-container"></div>
        </div>`},i.prototype.postConstruct=function(){if(this.items.length){var e=this.items;this.items=[],this.addItems(e)}var t=this.localeService.getLocaleTextFunc();this.cbGroupEnabled.setLabel(t("enabled","Enabled")),this.title&&this.setTitle(this.title),this.enabled&&this.setEnabled(this.enabled),this.setAlignItems(this.alignItems),this.hideEnabledCheckbox(this.suppressEnabledCheckbox),this.hideOpenCloseIcons(this.suppressOpenCloseIcons),this.setupExpandContract(),this.refreshAriaStatus(),this.refreshChildDisplay()},i.prototype.setupExpandContract=function(){var e=this;this.eGroupClosedIcon.appendChild(Dr("columnSelectClosed",this.gridOptionsService,null)),this.eGroupOpenedIcon.appendChild(Dr("columnSelectOpen",this.gridOptionsService,null)),this.addManagedListener(this.eTitleBar,"click",function(){return e.toggleGroupExpand()}),this.addManagedListener(this.eTitleBar,"keydown",function(t){switch(t.key){case J.ENTER:case J.SPACE:t.preventDefault(),e.toggleGroupExpand();break;case J.RIGHT:case J.LEFT:t.preventDefault(),e.toggleGroupExpand(t.key===J.RIGHT);break}})},i.prototype.refreshAriaStatus=function(){this.suppressOpenCloseIcons||Yr(this.eTitleBar,this.expanded)},i.prototype.refreshChildDisplay=function(){var e=!this.suppressOpenCloseIcons;Yt(this.eToolbar,this.expanded&&!this.suppressEnabledCheckbox),Yt(this.eGroupOpenedIcon,e&&this.expanded),Yt(this.eGroupClosedIcon,e&&!this.expanded)},i.prototype.isExpanded=function(){return this.expanded},i.prototype.setAlignItems=function(e){this.alignItems!==e&&this.removeCssClass("ag-group-item-alignment-"+this.alignItems),this.alignItems=e;var t="ag-group-item-alignment-"+this.alignItems;return this.addCssClass(t),this},i.prototype.toggleGroupExpand=function(e){return this.suppressOpenCloseIcons?(this.expanded=!0,this.refreshChildDisplay(),Yt(this.eContainer,!0),this):(e=e??!this.expanded,this.expanded===e?this:(this.expanded=e,this.refreshAriaStatus(),this.refreshChildDisplay(),Yt(this.eContainer,e),this.dispatchEvent({type:this.expanded?i.EVENT_EXPANDED:i.EVENT_COLLAPSED}),this))},i.prototype.addItems=function(e){var t=this;e.forEach(function(r){return t.addItem(r)})},i.prototype.addItem=function(e){var t=this.eContainer,r=e instanceof xt?e.getGui():e;r.classList.add("ag-group-item","ag-"+this.cssIdentifier+"-group-item"),t.appendChild(r),this.items.push(r)},i.prototype.hideItem=function(e,t){var r=this.items[t];Yt(r,!e)},i.prototype.setTitle=function(e){return this.eTitle.innerText=e,this},i.prototype.addCssClassToTitleBar=function(e){this.eTitleBar.classList.add(e)},i.prototype.setEnabled=function(e,t){return this.enabled=e,this.refreshDisabledStyles(),this.toggleGroupExpand(e),t||this.cbGroupEnabled.setValue(e),this},i.prototype.isEnabled=function(){return this.enabled},i.prototype.onEnableChange=function(e){var t=this;return this.cbGroupEnabled.onValueChange(function(r){t.setEnabled(r,!0),e(r)}),this},i.prototype.hideEnabledCheckbox=function(e){return this.suppressEnabledCheckbox=e,this.refreshChildDisplay(),this.refreshDisabledStyles(),this},i.prototype.hideOpenCloseIcons=function(e){return this.suppressOpenCloseIcons=e,e&&this.toggleGroupExpand(!0),this},i.prototype.refreshDisabledStyles=function(){this.addOrRemoveCssClass("ag-disabled",!this.enabled),this.suppressEnabledCheckbox&&!this.enabled?(this.eTitleBar.classList.add("ag-disabled-group-title-bar"),this.eTitleBar.removeAttribute("tabindex")):(this.eTitleBar.classList.remove("ag-disabled-group-title-bar"),this.eTitleBar.setAttribute("tabindex","0")),this.eContainer.classList.toggle("ag-disabled-group-container",!this.enabled)},i.EVENT_EXPANDED="expanded",i.EVENT_COLLAPSED="collapsed",Vo([be("eTitleBar")],i.prototype,"eTitleBar",void 0),Vo([be("eGroupOpenedIcon")],i.prototype,"eGroupOpenedIcon",void 0),Vo([be("eGroupClosedIcon")],i.prototype,"eGroupClosedIcon",void 0),Vo([be("eToolbar")],i.prototype,"eToolbar",void 0),Vo([be("cbGroupEnabled")],i.prototype,"cbGroupEnabled",void 0),Vo([be("eTitle")],i.prototype,"eTitle",void 0),Vo([be("eContainer")],i.prototype,"eContainer",void 0),Vo([Oe],i.prototype,"postConstruct",null),i}(xt),LE=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Al=function(){return Al=Object.assign||function(n){for(var i,e=1,t=arguments.length;e<t;e++){i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(n[r]=i[r])}return n},Al.apply(this,arguments)},cf=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},ME=function(n){LE(i,n);function i(e){e===void 0&&(e=1);var t=n.call(this,'<div class="ag-menu-list" role="tree"></div>')||this;return t.level=e,t.menuItems=[],t}return i.prototype.postConstruct=function(){var e=this;this.initialiseTabGuard({onTabKeyDown:function(t){return e.onTabKeyDown(t)},handleKeyDown:function(t){return e.handleKeyDown(t)}})},i.prototype.onTabKeyDown=function(e){var t=this.getParentComponent(),r=t&&t.getGui(),o=r&&r.classList.contains("ag-focus-managed");o||e.preventDefault(),e.shiftKey&&this.closeIfIsChild(e)},i.prototype.handleKeyDown=function(e){switch(e.key){case J.UP:case J.RIGHT:case J.DOWN:case J.LEFT:e.preventDefault(),this.handleNavKey(e.key);break;case J.ESCAPE:var t=this.findTopMenu();t&&this.focusService.focusInto(t.getGui());break}},i.prototype.clearActiveItem=function(){this.activeMenuItem&&(this.activeMenuItem.deactivate(),this.activeMenuItem=null)},i.prototype.addMenuItems=function(e){var t=this;e?.forEach(function(r){r==="separator"?t.addSeparator():typeof r=="string"?console.warn("AG Grid: unrecognised menu item "+r):t.addItem(r)})},i.prototype.addItem=function(e){var t=this,r=this.createManagedBean(new ka(Al(Al({},e),{isAnotherSubMenuOpen:function(){return t.menuItems.some(function(o){return o.isSubMenuOpen()})}})));r.setParentComponent(this),jh(r.getGui(),this.level),this.menuItems.push(r),this.appendChild(r.getGui()),this.addManagedListener(r,ka.EVENT_MENU_ITEM_SELECTED,function(o){t.dispatchEvent(o)}),this.addManagedListener(r,ka.EVENT_MENU_ITEM_ACTIVATED,function(o){t.activeMenuItem&&t.activeMenuItem!==o.menuItem&&t.activeMenuItem.deactivate(),t.activeMenuItem=o.menuItem})},i.prototype.activateFirstItem=function(){var e=this.menuItems.filter(function(t){return!t.isDisabled()})[0];e&&e.activate()},i.prototype.addSeparator=function(){var e=`
            <div class="ag-menu-separator" aria-hidden="true">
                <div class="ag-menu-separator-part"></div>
                <div class="ag-menu-separator-part"></div>
                <div class="ag-menu-separator-part"></div>
                <div class="ag-menu-separator-part"></div>
            </div>`;this.appendChild(Ji(e))},i.prototype.findTopMenu=function(){var e=this.getParentComponent();if(!e&&this instanceof i)return this;for(;;){var t=e&&e.getParentComponent&&e.getParentComponent();if(!t||!(t instanceof i||t instanceof ka))break;e=t}return e instanceof i?e:void 0},i.prototype.handleNavKey=function(e){switch(e){case J.UP:case J.DOWN:var t=this.findNextItem(e===J.UP);t&&t!==this.activeMenuItem&&t.activate();return}var r=this.gridOptionsService.is("enableRtl")?J.RIGHT:J.LEFT;e===r?this.closeIfIsChild():this.openChild()},i.prototype.closeIfIsChild=function(e){var t=this.getParentComponent();t&&t instanceof ka&&(e&&e.preventDefault(),t.closeSubMenu(),t.getGui().focus())},i.prototype.openChild=function(){this.activeMenuItem&&this.activeMenuItem.openSubMenu(!0)},i.prototype.findNextItem=function(e){var t=this.menuItems.filter(function(l){return!l.isDisabled()});if(t.length){if(!this.activeMenuItem)return e?ai(t):t[0];e&&t.reverse();for(var r,o=!1,a=0;a<t.length;a++){var s=t[a];if(!o){s===this.activeMenuItem&&(o=!0);continue}r=s;break}return r||this.activeMenuItem}},i.prototype.destroy=function(){this.clearActiveItem(),n.prototype.destroy.call(this)},cf([T("focusService")],i.prototype,"focusService",void 0),cf([Oe],i.prototype,"postConstruct",null),i}(Xl),NE=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),FE=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},IE=function(n){NE(i,n);function i(e){var t=n.call(this)||this;return t.wrappedComponent=e,t.setTemplateFromElement(e.getGui()),t}return i.prototype.postConstruct=function(){var e=this;this.initialiseTabGuard({onTabKeyDown:function(t){return e.onTabKeyDown(t)},handleKeyDown:function(t){return e.handleKeyDown(t)}})},i.prototype.handleKeyDown=function(e){e.key===J.ESCAPE&&this.closePanel()},i.prototype.onTabKeyDown=function(e){e.defaultPrevented||(this.closePanel(),e.preventDefault())},i.prototype.closePanel=function(){var e=this.parentComponent;e.closeSubMenu(),setTimeout(function(){return e.getGui().focus()},0)},FE([Oe],i.prototype,"postConstruct",null),i}(Xl),kE=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),df=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},ka=function(n){kE(i,n);function i(e){var t=n.call(this)||this;return t.params=e,t.isActive=!1,t.subMenuIsOpen=!1,t.setTemplate('<div class="'+t.getClassName()+'" tabindex="-1" role="treeitem"></div>'),t}return i.prototype.init=function(){var e=this;this.addIcon(),this.addName(),this.addShortcut(),this.addSubMenu(),this.addTooltip();var t=this.getGui();this.params.disabled?(this.addCssClass(this.getClassName("disabled")),od(t,!0)):(this.addGuiEventListener("click",function(r){return e.onItemSelected(r)}),this.addGuiEventListener("keydown",function(r){(r.key===J.ENTER||r.key===J.SPACE)&&(r.preventDefault(),e.onItemSelected(r))}),this.addGuiEventListener("mousedown",function(r){r.stopPropagation(),r.preventDefault()}),this.addGuiEventListener("mouseenter",function(){return e.onMouseEnter()}),this.addGuiEventListener("mouseleave",function(){return e.onMouseLeave()})),this.params.cssClasses&&this.params.cssClasses.forEach(function(r){return e.addCssClass(r)})},i.prototype.isDisabled=function(){return!!this.params.disabled},i.prototype.openSubMenu=function(e){var t=this;if(e===void 0&&(e=!1),this.closeSubMenu(),!!this.params.subMenu){var r=Ji('<div class="ag-menu" role="presentation"></div>'),o;if(this.params.subMenu instanceof Array){var a=Vh(this.getGui()),s=isNaN(a)?1:a+1,l=this.createBean(new ME(s));l.setParentComponent(this),l.addMenuItems(this.params.subMenu),r.appendChild(l.getGui()),this.addManagedListener(l,i.EVENT_MENU_ITEM_SELECTED,function(L){return t.dispatchEvent(L)}),l.addGuiEventListener("mouseenter",function(){return t.cancelDeactivate()}),o=function(){return t.destroyBean(l)},e&&setTimeout(function(){return l.activateFirstItem()},0)}else{var u=this.params.subMenu,c=this.createBean(new IE(u));c.setParentComponent(this);var d=c.getGui(),f="mouseenter",y=function(){return t.cancelDeactivate()};d.addEventListener(f,y),o=function(){return d.removeEventListener(f,y)},r.appendChild(d),u.afterGuiAttached&&setTimeout(function(){return u.afterGuiAttached()},0)}var S=this.getGui(),w=this.popupService.positionPopupForMenu.bind(this.popupService,{eventSource:S,ePopup:r}),E=this.localeService.getLocaleTextFunc(),_=this.popupService.addPopup({modal:!0,eChild:r,positionCallback:w,anchorToElement:S,ariaLabel:E("ariaLabelSubMenu","SubMenu")});this.subMenuIsOpen=!0,Yr(S,!0),this.hideSubMenu=function(){_&&_.hideFunc(),t.subMenuIsOpen=!1,Yr(S,!1),o()}}},i.prototype.closeSubMenu=function(){this.hideSubMenu&&(this.hideSubMenu(),this.hideSubMenu=null,Yr(this.getGui(),!1))},i.prototype.isSubMenuOpen=function(){return this.subMenuIsOpen},i.prototype.activate=function(e){var t=this;this.cancelActivate(),!this.params.disabled&&(this.isActive=!0,this.addCssClass(this.getClassName("active")),this.getGui().focus(),e&&this.params.subMenu&&window.setTimeout(function(){t.isAlive()&&t.isActive&&t.openSubMenu()},300),this.onItemActivated())},i.prototype.deactivate=function(){this.cancelDeactivate(),this.removeCssClass(this.getClassName("active")),this.isActive=!1,this.subMenuIsOpen&&this.hideSubMenu()},i.prototype.addIcon=function(){if(!(!this.params.checked&&!this.params.icon&&this.params.isCompact)){var e=Ji('<span ref="eIcon" class="'+this.getClassName("part")+" "+this.getClassName("icon")+'" role="presentation"></span>');this.params.checked?e.appendChild(Li("check",this.gridOptionsService)):this.params.icon&&(gs(this.params.icon)?e.appendChild(this.params.icon):typeof this.params.icon=="string"?e.innerHTML=this.params.icon:console.warn("AG Grid: menu item icon must be DOM node or string")),this.getGui().appendChild(e)}},i.prototype.addName=function(){if(!(!this.params.name&&this.params.isCompact)){var e=Ji('<span ref="eName" class="'+this.getClassName("part")+" "+this.getClassName("text")+'">'+(this.params.name||"")+"</span>");this.getGui().appendChild(e)}},i.prototype.addTooltip=function(){this.params.tooltip&&(this.tooltip=this.params.tooltip,this.gridOptionsService.is("enableBrowserTooltips")?this.getGui().setAttribute("title",this.tooltip):this.createManagedBean(new Ed(this)))},i.prototype.getTooltipParams=function(){return{location:"menu",value:this.tooltip}},i.prototype.addShortcut=function(){if(!(!this.params.shortcut&&this.params.isCompact)){var e=Ji('<span ref="eShortcut" class="'+this.getClassName("part")+" "+this.getClassName("shortcut")+'">'+(this.params.shortcut||"")+"</span>");this.getGui().appendChild(e)}},i.prototype.addSubMenu=function(){if(!(!this.params.subMenu&&this.params.isCompact)){var e=Ji('<span ref="ePopupPointer" class="'+this.getClassName("part")+" "+this.getClassName("popup-pointer")+'"></span>'),t=this.getGui();if(this.params.subMenu){var r=this.gridOptionsService.is("enableRtl")?"smallLeft":"smallRight";Yr(t,!1),e.appendChild(Li(r,this.gridOptionsService))}t.appendChild(e)}},i.prototype.onItemSelected=function(e){if(this.params.action?this.params.action():this.openSubMenu(e&&e.type==="keydown"),!(this.params.subMenu&&!this.params.action)){var t={type:i.EVENT_MENU_ITEM_SELECTED,action:this.params.action,checked:this.params.checked,cssClasses:this.params.cssClasses,disabled:this.params.disabled,icon:this.params.icon,name:this.params.name,shortcut:this.params.shortcut,subMenu:this.params.subMenu,tooltip:this.params.tooltip,event:e};this.dispatchEvent(t)}},i.prototype.onItemActivated=function(){var e={type:i.EVENT_MENU_ITEM_ACTIVATED,menuItem:this};this.dispatchEvent(e)},i.prototype.cancelActivate=function(){this.activateTimeoutId&&(window.clearTimeout(this.activateTimeoutId),this.activateTimeoutId=0)},i.prototype.cancelDeactivate=function(){this.deactivateTimeoutId&&(window.clearTimeout(this.deactivateTimeoutId),this.deactivateTimeoutId=0)},i.prototype.onMouseEnter=function(){var e=this;this.cancelDeactivate(),this.params.isAnotherSubMenuOpen()?this.activateTimeoutId=window.setTimeout(function(){return e.activate(!0)},i.ACTIVATION_DELAY):this.activate(!0)},i.prototype.onMouseLeave=function(){var e=this;this.cancelActivate(),this.isSubMenuOpen()?this.deactivateTimeoutId=window.setTimeout(function(){return e.deactivate()},i.ACTIVATION_DELAY):this.deactivate()},i.prototype.getClassName=function(e){var t=this.params.isCompact?"ag-compact-menu-option":"ag-menu-option";return e?t+"-"+e:t},i.EVENT_MENU_ITEM_SELECTED="menuItemSelected",i.EVENT_MENU_ITEM_ACTIVATED="menuItemActivated",i.ACTIVATION_DELAY=80,df([T("popupService")],i.prototype,"popupService",void 0),df([Oe],i.prototype,"init",null),i}(xt),GE=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Ga=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},qv=function(n){GE(i,n);function i(e){var t=n.call(this,i.getTemplate(e))||this;return t.closable=!0,t.config=e,t}return i.getTemplate=function(e){var t=e&&e.cssIdentifier||"default";return'<div class="ag-panel ag-'+t+`-panel" tabindex="-1">
            <div ref="eTitleBar" class="ag-panel-title-bar ag-`+t+`-panel-title-bar ag-unselectable">
                <span ref="eTitle" class="ag-panel-title-bar-title ag-`+t+`-panel-title-bar-title"></span>
                <div ref="eTitleBarButtons" class="ag-panel-title-bar-buttons ag-`+t+`-panel-title-bar-buttons"></div>
            </div>
            <div ref="eContentWrapper" class="ag-panel-content-wrapper ag-`+t+`-panel-content-wrapper"></div>
        </div>`},i.prototype.postConstruct=function(){var e=this,t=this.config,r=t.component,o=t.closable,a=t.hideTitleBar,s=t.title,l=t.minWidth,u=l===void 0?250:l,c=t.width,d=t.minHeight,f=d===void 0?250:d,y=t.height,S=t.centered,w=t.popup,E=t.x,_=t.y;this.positionableFeature=new wv(this.getGui(),{minWidth:u,width:c,minHeight:f,height:y,centered:S,x:E,y:_,popup:w,calculateTopBuffer:function(){return e.positionableFeature.getHeight()-e.getBodyHeight()}}),this.createManagedBean(this.positionableFeature);var L=this.getGui();r&&this.setBodyComponent(r),a?Yt(this.eTitleBar,!1):(s&&this.setTitle(s),this.setClosable(o??this.closable)),this.addManagedListener(this.eTitleBar,"mousedown",function(P){var V=e.gridOptionsService.getDocument();if(L.contains(P.relatedTarget)||L.contains(V.activeElement)||e.eTitleBarButtons.contains(P.target)){P.preventDefault();return}var ne=e.eContentWrapper.querySelector("button, [href], input, select, textarea, [tabindex]");ne&&ne.focus()}),!(w&&this.positionableFeature.isPositioned())&&(this.renderComponent&&this.renderComponent(),this.positionableFeature.initialisePosition(),this.eContentWrapper.style.height="0")},i.prototype.renderComponent=function(){var e=this,t=this.getGui();t.focus(),this.close=function(){t.parentElement.removeChild(t),e.destroy()}},i.prototype.getHeight=function(){return this.positionableFeature.getHeight()},i.prototype.setHeight=function(e){this.positionableFeature.setHeight(e)},i.prototype.getWidth=function(){return this.positionableFeature.getWidth()},i.prototype.setWidth=function(e){this.positionableFeature.setWidth(e)},i.prototype.setClosable=function(e){if(e!==this.closable&&(this.closable=e),e){var t=this.closeButtonComp=new xt(i.CLOSE_BTN_TEMPLATE);this.getContext().createBean(t);var r=t.getGui(),o=Li("close",this.gridOptionsService);o.classList.add("ag-panel-title-bar-button-icon"),r.appendChild(o),this.addTitleBarButton(t),t.addManagedListener(r,"click",this.onBtClose.bind(this))}else if(this.closeButtonComp){var r=this.closeButtonComp.getGui();r.parentElement.removeChild(r),this.closeButtonComp=this.destroyBean(this.closeButtonComp)}},i.prototype.setBodyComponent=function(e){e.setParentComponent(this),this.eContentWrapper.appendChild(e.getGui())},i.prototype.addTitleBarButton=function(e,t){var r=this.eTitleBarButtons,o=r.children,a=o.length;t==null&&(t=a),t=Math.max(0,Math.min(t,a)),e.addCssClass("ag-panel-title-bar-button");var s=e.getGui();t===0?r.insertAdjacentElement("afterbegin",s):t===a?r.insertAdjacentElement("beforeend",s):o[t-1].insertAdjacentElement("afterend",s),e.setParentComponent(this)},i.prototype.getBodyHeight=function(){return vs(this.eContentWrapper)},i.prototype.getBodyWidth=function(){return Ul(this.eContentWrapper)},i.prototype.setTitle=function(e){this.eTitle.innerText=e},i.prototype.onBtClose=function(){this.close()},i.prototype.destroy=function(){this.closeButtonComp&&(this.closeButtonComp=this.destroyBean(this.closeButtonComp));var e=this.getGui();e&&e.offsetParent&&this.close(),n.prototype.destroy.call(this)},i.CLOSE_BTN_TEMPLATE='<div class="ag-button"></div>',Ga([be("eContentWrapper")],i.prototype,"eContentWrapper",void 0),Ga([be("eTitleBar")],i.prototype,"eTitleBar",void 0),Ga([be("eTitleBarButtons")],i.prototype,"eTitleBarButtons",void 0),Ga([be("eTitle")],i.prototype,"eTitle",void 0),Ga([Oe],i.prototype,"postConstruct",null),i}(xt),VE=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Ll=function(){return Ll=Object.assign||function(n){for(var i,e=1,t=arguments.length;e<t;e++){i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(n[r]=i[r])}return n},Ll.apply(this,arguments)},BE=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},HE=function(n){VE(i,n);function i(e){var t=n.call(this,Ll(Ll({},e),{popup:!0}))||this;return t.isMaximizable=!1,t.isMaximized=!1,t.maximizeListeners=[],t.resizeListenerDestroy=null,t.lastPosition={x:0,y:0,width:0,height:0},t}return i.prototype.postConstruct=function(){var e=this,t=this.getGui(),r=this.config,o=r.movable,a=r.resizable,s=r.maximizable;this.addCssClass("ag-dialog"),n.prototype.postConstruct.call(this),this.addManagedListener(t,"focusin",function(l){t.contains(l.relatedTarget)||e.popupService.bringPopupToFront(t)}),o&&this.setMovable(o),s&&this.setMaximizable(s),a&&this.setResizable(a)},i.prototype.renderComponent=function(){var e=this.getGui(),t=this.config,r=t.alwaysOnTop,o=t.modal,a=t.title,s=t.afterGuiAttached,l=this.localeService.getLocaleTextFunc(),u=this.popupService.addPopup({modal:o,eChild:e,closeOnEsc:!0,closedCallback:this.destroy.bind(this),alwaysOnTop:r,ariaLabel:a||l("ariaLabelDialog","Dialog"),afterGuiAttached:s});u&&(this.close=u.hideFunc)},i.prototype.toggleMaximize=function(){var e=this.positionableFeature.getPosition();if(this.isMaximized){var t=this.lastPosition,r=t.x,o=t.y,a=t.width,s=t.height;this.setWidth(a),this.setHeight(s),this.positionableFeature.offsetElement(r,o)}else this.lastPosition.width=this.getWidth(),this.lastPosition.height=this.getHeight(),this.lastPosition.x=e.x,this.lastPosition.y=e.y,this.positionableFeature.offsetElement(0,0),this.setHeight("100%"),this.setWidth("100%");this.isMaximized=!this.isMaximized,this.refreshMaximizeIcon()},i.prototype.refreshMaximizeIcon=function(){Yt(this.maximizeIcon,!this.isMaximized),Yt(this.minimizeIcon,this.isMaximized)},i.prototype.clearMaximizebleListeners=function(){this.maximizeListeners.length&&(this.maximizeListeners.forEach(function(e){return e()}),this.maximizeListeners.length=0),this.resizeListenerDestroy&&(this.resizeListenerDestroy(),this.resizeListenerDestroy=null)},i.prototype.destroy=function(){this.maximizeButtonComp=this.destroyBean(this.maximizeButtonComp),this.clearMaximizebleListeners(),n.prototype.destroy.call(this)},i.prototype.setResizable=function(e){this.positionableFeature.setResizable(e)},i.prototype.setMovable=function(e){this.positionableFeature.setMovable(e,this.eTitleBar)},i.prototype.setMaximizable=function(e){var t=this;if(!e){this.clearMaximizebleListeners(),this.maximizeButtonComp&&(this.destroyBean(this.maximizeButtonComp),this.maximizeButtonComp=this.maximizeIcon=this.minimizeIcon=void 0);return}var r=this.eTitleBar;if(!(!r||e===this.isMaximizable)){var o=this.buildMaximizeAndMinimizeElements();this.refreshMaximizeIcon(),o.addManagedListener(o.getGui(),"click",this.toggleMaximize.bind(this)),this.addTitleBarButton(o,0),this.maximizeListeners.push(this.addManagedListener(r,"dblclick",this.toggleMaximize.bind(this))),this.resizeListenerDestroy=this.addManagedListener(this,"resize",function(){t.isMaximized=!1,t.refreshMaximizeIcon()})}},i.prototype.buildMaximizeAndMinimizeElements=function(){var e=this.maximizeButtonComp=this.createBean(new xt('<div class="ag-dialog-button"></span>')),t=e.getGui();return this.maximizeIcon=Li("maximize",this.gridOptionsService),t.appendChild(this.maximizeIcon),this.maximizeIcon.classList.add("ag-panel-title-bar-button-icon"),this.minimizeIcon=Li("minimize",this.gridOptionsService),t.appendChild(this.minimizeIcon),this.minimizeIcon.classList.add("ag-panel-title-bar-button-icon"),e},BE([T("popupService")],i.prototype,"popupService",void 0),i}(qv),WE=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Ml=function(){return Ml=Object.assign||function(n){for(var i,e=1,t=arguments.length;e<t;e++){i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(n[r]=i[r])}return n},Ml.apply(this,arguments)},Va=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},UE=function(n,i){var e=typeof Symbol=="function"&&n[Symbol.iterator];if(!e)return n;var t=e.call(n),r,o=[],a;try{for(;(i===void 0||i-- >0)&&!(r=t.next()).done;)o.push(r.value)}catch(s){a={error:s}}finally{try{r&&!r.done&&(e=t.return)&&e.call(t)}finally{if(a)throw a.error}}return o},jE=function(n,i){for(var e=0,t=i.length,r=n.length;e<t;e++,r++)n[r]=i[e];return n},zo;(function(n){n[n.vertical=0]="vertical",n[n.horizontal=1]="horizontal"})(zo||(zo={}));var zE=0,YE=function(n){WE(i,n);function i(){var t=n!==null&&n.apply(this,arguments)||this;return t.popupList=[],t}e=i,i.prototype.postConstruct=function(){var t=this;this.ctrlsService.whenReady(function(r){t.gridCtrl=r.gridCtrl,t.addManagedListener(t.gridCtrl,b.EVENT_KEYBOARD_FOCUS,function(){t.popupList.forEach(function(o){return o.element.classList.add(ta.AG_KEYBOARD_FOCUS)})}),t.addManagedListener(t.gridCtrl,b.EVENT_MOUSE_FOCUS,function(){t.popupList.forEach(function(o){return o.element.classList.remove(ta.AG_KEYBOARD_FOCUS)})})})},i.prototype.getPopupParent=function(){var t=this.gridOptionsService.get("popupParent");return t||this.gridCtrl.getGui()},i.prototype.positionPopupForMenu=function(t){var r=t.eventSource,o=t.ePopup,a=this.getPopupIndex(o);if(a!==-1){var s=this.popupList[a];s.alignedToElement=r}var l=r.getBoundingClientRect(),u=this.getParentRect(),c=this.keepXYWithinBounds(o,l.top-u.top,zo.vertical),d=o.clientWidth>0?o.clientWidth:200;o.style.minWidth=d+"px";var f=u.right-u.left,y=f-d,S;this.gridOptionsService.is("enableRtl")?(S=E(),S<0&&(S=w(),this.setAlignedStyles(o,"left")),S>y&&(S=0,this.setAlignedStyles(o,"right"))):(S=w(),S>y&&(S=E(),this.setAlignedStyles(o,"right")),S<0&&(S=0,this.setAlignedStyles(o,"left"))),o.style.left=S+"px",o.style.top=c+"px";function w(){return l.right-u.left-2}function E(){return l.left-u.left-d}},i.prototype.positionPopupUnderMouseEvent=function(t){var r=this,o=t.ePopup,a=t.nudgeX,s=t.nudgeY,l=t.skipObserver;this.positionPopup({ePopup:o,nudgeX:a,nudgeY:s,keepWithinBounds:!0,skipObserver:l,updatePosition:function(){return r.calculatePointerAlign(t.mouseEvent)},postProcessCallback:function(){return r.callPostProcessPopup(t.type,t.ePopup,null,t.mouseEvent,t.column,t.rowNode)}})},i.prototype.calculatePointerAlign=function(t){var r=this.getParentRect();return{x:t.clientX-r.left,y:t.clientY-r.top}},i.prototype.positionPopupByComponent=function(t){var r=this,o=t.ePopup,a=t.nudgeX,s=t.nudgeY,l=t.keepWithinBounds,u=t.eventSource,c=t.alignSide,d=c===void 0?"left":c,f=t.position,y=f===void 0?"over":f,S=t.column,w=t.rowNode,E=t.type,_=u.getBoundingClientRect(),L=this.getParentRect(),P=this.getPopupIndex(o);if(P!==-1){var V=this.popupList[P];V.alignedToElement=u}var ne=function(){var ee=_.left-L.left;d==="right"&&(ee-=o.offsetWidth-_.width);var re;if(y==="over")re=_.top-L.top,r.setAlignedStyles(o,"over");else{r.setAlignedStyles(o,"under");var F=r.shouldRenderUnderOrAbove(o,_,L,t.nudgeY||0);F==="under"?re=_.top-L.top+_.height:re=_.top-o.offsetHeight-(s||0)*2-L.top}return{x:ee,y:re}};this.positionPopup({ePopup:o,nudgeX:a,nudgeY:s,keepWithinBounds:l,updatePosition:ne,postProcessCallback:function(){return r.callPostProcessPopup(E,o,u,null,S,w)}})},i.prototype.shouldRenderUnderOrAbove=function(t,r,o,a){var s=o.bottom-r.bottom,l=r.top-o.top,u=t.offsetHeight+a;return s>u?"under":l>u||l>s?"above":"under"},i.prototype.setAlignedStyles=function(t,r){var o=this.getPopupIndex(t);if(o!==-1){var a=this.popupList[o],s=a.alignedToElement;if(s){var l=["right","left","over","above","under"];l.forEach(function(u){s.classList.remove("ag-has-popup-positioned-"+u),t.classList.remove("ag-popup-positioned-"+u)}),r&&(s.classList.add("ag-has-popup-positioned-"+r),t.classList.add("ag-popup-positioned-"+r))}}},i.prototype.callPostProcessPopup=function(t,r,o,a,s,l){var u=this.gridOptionsService.getCallback("postProcessPopup");if(u){var c={column:s,rowNode:l,ePopup:r,type:t,eventSource:o,mouseEvent:a};u(c)}},i.prototype.positionPopup=function(t){var r=this,o=t.ePopup,a=t.keepWithinBounds,s=t.nudgeX,l=t.nudgeY,u=t.skipObserver,c=t.updatePosition,d={width:0,height:0},f=function(S){S===void 0&&(S=!1);var w=c(),E=w.x,_=w.y;S&&o.clientWidth===d.width&&o.clientHeight===d.height||(d.width=o.clientWidth,d.height=o.clientHeight,s&&(E+=s),l&&(_+=l),a&&(E=r.keepXYWithinBounds(o,E,zo.horizontal),_=r.keepXYWithinBounds(o,_,zo.vertical)),o.style.left=E+"px",o.style.top=_+"px",t.postProcessCallback&&t.postProcessCallback())};if(f(),!u){var y=this.resizeObserverService.observeResize(o,function(){return f(!0)});setTimeout(function(){return y()},e.WAIT_FOR_POPUP_CONTENT_RESIZE)}},i.prototype.getActivePopups=function(){return this.popupList.map(function(t){return t.element})},i.prototype.getPopupList=function(){return this.popupList},i.prototype.getParentRect=function(){var t=this.gridOptionsService.getDocument(),r=this.getPopupParent();return r===t.body?r=t.documentElement:getComputedStyle(r).position==="static"&&(r=r.offsetParent),yd(r)},i.prototype.keepXYWithinBounds=function(t,r,o){var a=o===zo.vertical,s=a?"clientHeight":"clientWidth",l=a?"top":"left",u=a?"offsetHeight":"offsetWidth",c=a?"scrollTop":"scrollLeft",d=this.gridOptionsService.getDocument(),f=d.documentElement,y=this.getPopupParent(),S=y.getBoundingClientRect(),w=d.documentElement.getBoundingClientRect(),E=y===d.body,_=t[u],L=a?gd:ss,P=E?L(f)+f[c]:y[s];E&&(P-=Math.abs(w[l]-S[l]));var V=P-_;return Math.min(Math.max(r,0),Math.abs(V))},i.prototype.addPopup=function(t){var r=this.gridOptionsService.getDocument(),o=t.eChild,a=t.ariaLabel,s=t.alwaysOnTop,l=t.positionCallback,u=t.anchorToElement;if(!r)return console.warn("AG Grid: could not find the document, document is empty"),{hideFunc:function(){}};var c=this.getPopupIndex(o);if(c!==-1){var d=this.popupList[c];return{hideFunc:d.hideFunc}}this.initialisePopupPosition(o);var f=this.createPopupWrapper(o,a,!!s),y=this.addEventListenersToPopup(Ml(Ml({},t),{wrapperEl:f}));return l&&l(),this.addPopupToPopupList(o,f,y,u),{hideFunc:y}},i.prototype.initialisePopupPosition=function(t){var r=this.getPopupParent(),o=r.getBoundingClientRect();ue(t.style.top)||(t.style.top=o.top*-1+"px"),ue(t.style.left)||(t.style.left=o.left*-1+"px")},i.prototype.createPopupWrapper=function(t,r,o){var a,s=this.getPopupParent(),l=document.createElement("div"),u=this.environment.getTheme().allThemes;return u.length&&(a=l.classList).add.apply(a,jE([],UE(u))),l.classList.add("ag-popup"),t.classList.add(this.gridOptionsService.is("enableRtl")?"ag-rtl":"ag-ltr","ag-popup-child"),t.hasAttribute("role")||Wi(t,"dialog"),Po(t,r),this.focusService.isKeyboardMode()&&t.classList.add(ta.AG_KEYBOARD_FOCUS),l.appendChild(t),s.appendChild(l),o?this.setAlwaysOnTop(t,!0):this.bringPopupToFront(t),l},i.prototype.addEventListenersToPopup=function(t){var r=this,o=this.gridOptionsService.getDocument(),a=this.getPopupParent(),s=t.wrapperEl,l=t.eChild;t.click;var u=t.closedCallback,c=t.afterGuiAttached,d=t.closeOnEsc,f=t.modal,y=!1,S=function(L){if(s.contains(o.activeElement)){var P=L.key;P===J.ESCAPE&&!Kr(L)&&_({keyboardEvent:L})}},w=function(L){return _({mouseEvent:L})},E=function(L){return _({touchEvent:L})},_=function(L){L===void 0&&(L={});var P=L.mouseEvent,V=L.touchEvent,ne=L.keyboardEvent;r.isEventFromCurrentPopup({mouseEvent:P,touchEvent:V},l)||y||(y=!0,a.removeChild(s),o.removeEventListener("keydown",S),o.removeEventListener("mousedown",w),o.removeEventListener("touchstart",E),o.removeEventListener("contextmenu",w),r.eventService.removeEventListener(b.EVENT_DRAG_STARTED,w),u&&u(P||V||ne),r.removePopupFromPopupList(l))};return c&&c({hidePopup:_}),window.setTimeout(function(){d&&o.addEventListener("keydown",S),f&&(o.addEventListener("mousedown",w),r.eventService.addEventListener(b.EVENT_DRAG_STARTED,w),o.addEventListener("touchstart",E),o.addEventListener("contextmenu",w))},0),_},i.prototype.addPopupToPopupList=function(t,r,o,a){this.popupList.push({element:t,wrapper:r,hideFunc:o,instanceId:zE++,isAnchored:!!a}),a&&this.setPopupPositionRelatedToElement(t,a)},i.prototype.getPopupIndex=function(t){return this.popupList.findIndex(function(r){return r.element===t})},i.prototype.setPopupPositionRelatedToElement=function(t,r){var o=this.getPopupIndex(t);if(o!==-1){var a=this.popupList[o];if(a.stopAnchoringPromise&&a.stopAnchoringPromise.then(function(l){return l&&l()}),a.stopAnchoringPromise=void 0,a.isAnchored=!1,!!r){var s=this.keepPopupPositionedRelativeTo({element:r,ePopup:t,hidePopup:a.hideFunc});return a.stopAnchoringPromise=s,a.isAnchored=!0,s}}},i.prototype.removePopupFromPopupList=function(t){this.setAlignedStyles(t,null),this.setPopupPositionRelatedToElement(t,null),this.popupList=this.popupList.filter(function(r){return r.element!==t})},i.prototype.keepPopupPositionedRelativeTo=function(t){var r=this,o=this.getPopupParent(),a=o.getBoundingClientRect(),s=t.element,l=t.ePopup,u=s.getBoundingClientRect(),c=a.top-u.top,d=a.left-u.left,f=c,y=d,S=l.style.top,w=parseInt(S.substring(0,S.length-1),10),E=l.style.left,_=parseInt(E.substring(0,E.length-1),10);return new jr(function(L){r.getFrameworkOverrides().setInterval(function(){var P=o.getBoundingClientRect(),V=s.getBoundingClientRect(),ne=V.top==0&&V.left==0&&V.height==0&&V.width==0;if(ne){t.hidePopup();return}var ee=P.top-V.top;if(ee!=f){var re=r.keepXYWithinBounds(l,w+c-ee,zo.vertical);l.style.top=re+"px"}f=ee;var F=P.left-V.left;if(F!=y){var U=r.keepXYWithinBounds(l,_+d-F,zo.horizontal);l.style.left=U+"px"}y=F},200).then(function(P){var V=function(){P!=null&&window.clearInterval(P)};L(V)})})},i.prototype.hasAnchoredPopup=function(){return this.popupList.some(function(t){return t.isAnchored})},i.prototype.isEventFromCurrentPopup=function(t,r){var o=t.mouseEvent,a=t.touchEvent,s=o||a;if(!s)return!1;var l=this.getPopupIndex(r);if(l===-1)return!1;for(var u=l;u<this.popupList.length;u++){var c=this.popupList[u];if(gl(c.element,s))return!0}return this.isElementWithinCustomPopup(s.target)},i.prototype.isElementWithinCustomPopup=function(t){for(var r=this.gridOptionsService.getDocument();t&&t!==r.body;){if(t.classList.contains("ag-custom-component-popup")||t.parentElement===null)return!0;t=t.parentElement}return!1},i.prototype.getWrapper=function(t){for(;!t.classList.contains("ag-popup")&&t.parentElement;)t=t.parentElement;return t.classList.contains("ag-popup")?t:null},i.prototype.setAlwaysOnTop=function(t,r){var o=this.getWrapper(t);o&&(o.classList.toggle("ag-always-on-top",!!r),r&&this.bringPopupToFront(o))},i.prototype.bringPopupToFront=function(t){var r=this.getPopupParent(),o=Array.prototype.slice.call(r.querySelectorAll(".ag-popup")),a=o.length,s=Array.prototype.slice.call(r.querySelectorAll(".ag-popup.ag-always-on-top")),l=s.length,u=this.getWrapper(t);if(!(!u||a<=1||!r.contains(t))){var c=o.indexOf(u),d=u.querySelectorAll("div"),f=[];if(d.forEach(function(E){E.scrollTop!==0&&f.push([E,E.scrollTop])}),l){var y=u.classList.contains("ag-always-on-top");y?c!==a-1&&ai(s).insertAdjacentElement("afterend",u):c!==a-l-1&&s[0].insertAdjacentElement("beforebegin",u)}else c!==a-1&&ai(o).insertAdjacentElement("afterend",u);for(;f.length;){var S=f.pop();S[0].scrollTop=S[1]}var w={type:"popupToFront",api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,eWrapper:u};this.eventService.dispatchEvent(w)}};var e;return i.WAIT_FOR_POPUP_CONTENT_RESIZE=200,Va([T("focusService")],i.prototype,"focusService",void 0),Va([T("ctrlsService")],i.prototype,"ctrlsService",void 0),Va([T("resizeObserverService")],i.prototype,"resizeObserverService",void 0),Va([Oe],i.prototype,"postConstruct",null),i=e=Va([Ue("popupService")],i),i}(ve),KE=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),QE=function(n){KE(i,n);function i(){var e=n.call(this,`
        <div class="ag-autocomplete-row" role="presentation">
            <div class="ag-autocomplete-row-label"></div>
        </div>`)||this;return e.hasHighlighting=!1,e}return i.prototype.setState=function(e,t){this.value=e,this.render(),this.updateSelected(t)},i.prototype.updateSelected=function(e){this.addOrRemoveCssClass("ag-autocomplete-row-selected",e)},i.prototype.setSearchString=function(e){var t,r=!1;if(ue(e)){var o=(t=this.value)===null||t===void 0?void 0:t.toLocaleLowerCase().indexOf(e.toLocaleLowerCase());if(o>=0){r=!0,this.hasHighlighting=!0;var a=o+e.length,s=Ii(this.value.slice(0,o)),l=Ii(this.value.slice(o,a)),u=Ii(this.value.slice(a));this.getGui().lastElementChild.innerHTML=s+"<b>"+l+"</b>"+u}}!r&&this.hasHighlighting&&(this.hasHighlighting=!1,this.render())},i.prototype.render=function(){var e;this.getGui().lastElementChild.innerHTML=(e=Ii(this.value))!==null&&e!==void 0?e:"&nbsp;"},i}(xt),qE=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),pf=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},XE=function(n){qE(i,n);function i(e){var t=n.call(this,i.TEMPLATE)||this;return t.params=e,t.searchString="",t}return i.prototype.destroy=function(){n.prototype.destroy.call(this)},i.prototype.init=function(){var e=this;this.autocompleteEntries=this.params.autocompleteEntries,this.virtualList=this.createManagedBean(new Qv({cssIdentifier:"autocomplete"})),this.virtualList.setComponentCreator(this.createRowComponent.bind(this)),this.eList.appendChild(this.virtualList.getGui()),this.virtualList.setModel({getRowCount:function(){return e.autocompleteEntries.length},getRow:function(r){return e.autocompleteEntries[r]}});var t=this.virtualList.getGui();this.addManagedListener(t,"click",function(){return e.params.onConfirmed()}),this.addManagedListener(t,"mousemove",this.onMouseMove.bind(this)),this.addManagedListener(t,"mousedown",function(r){return r.preventDefault()}),this.setSelectedValue(0)},i.prototype.onNavigationKeyDown=function(e,t){e.preventDefault();var r=this.autocompleteEntries.indexOf(this.selectedValue),o=t===J.UP?r-1:r+1;this.checkSetSelectedValue(o)},i.prototype.setSearch=function(e){this.searchString=e,ue(e)?this.runSearch():(this.autocompleteEntries=this.params.autocompleteEntries,this.virtualList.refresh(),this.checkSetSelectedValue(0)),this.updateSearchInList()},i.prototype.runContainsSearch=function(e,t){var r,o=!1,a=e.toLocaleLowerCase(),s=t.filter(function(l){var u=l.toLocaleLowerCase(),c=u.indexOf(a),d=c===0,f=c>=0;return f&&(!r||!o&&d||o===d&&l.length<r.length)&&(r=l,o=d),f});return!r&&s.length&&(r=s[0]),{topMatch:r,allMatches:s}},i.prototype.runSearch=function(){var e,t,r=this.params.autocompleteEntries,o=r.map(function(d){var f;return(f=d.displayValue)!==null&&f!==void 0?f:d.key}),a,s;if(this.params.useFuzzySearch)a=hs(this.searchString,o,!0).values,s=a.length?a[0]:void 0;else{var l=this.runContainsSearch(this.searchString,o);a=l.allMatches,s=l.topMatch}var u=r.filter(function(d){var f=d.key,y=d.displayValue;return a.includes(y??f)});if(!u.length&&this.selectedValue&&(!((t=(e=this.params)===null||e===void 0?void 0:e.forceLastSelection)===null||t===void 0)&&t.call(e,this.selectedValue,this.searchString))&&(u=[this.selectedValue]),this.autocompleteEntries=u,this.virtualList.refresh(),!!s){var c=a.indexOf(s);this.checkSetSelectedValue(c)}},i.prototype.updateSearchInList=function(){var e=this;this.virtualList.forEachRenderedRow(function(t){return t.setSearchString(e.searchString)})},i.prototype.checkSetSelectedValue=function(e){e>=0&&e<this.autocompleteEntries.length&&this.setSelectedValue(e)},i.prototype.setSelectedValue=function(e){var t=this.autocompleteEntries[e];this.selectedValue!==t&&(this.selectedValue=t,this.virtualList.ensureIndexVisible(e),this.virtualList.forEachRenderedRow(function(r,o){r.updateSelected(e===o)}))},i.prototype.createRowComponent=function(e){var t,r=new QE;return this.getContext().createBean(r),r.setState((t=e.displayValue)!==null&&t!==void 0?t:e.key,e===this.selectedValue),r},i.prototype.onMouseMove=function(e){var t=this.virtualList.getGui().getBoundingClientRect(),r=this.virtualList.getScrollTop(),o=e.clientY-t.top+r,a=Math.floor(o/this.virtualList.getRowHeight());this.checkSetSelectedValue(a)},i.prototype.afterGuiAttached=function(){this.virtualList.refresh()},i.prototype.getSelectedValue=function(){var e;return this.autocompleteEntries.length&&(e=this.selectedValue)!==null&&e!==void 0?e:null},i.TEMPLATE=`<div class="ag-autocomplete-list-popup">
            <div ref="eList" class="ag-autocomplete-list"></div>
        <div>`,pf([be("eList")],i.prototype,"eList",void 0),pf([Oe],i.prototype,"init",null),i}(xn),JE=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),ic=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},ZE=function(n){JE(i,n);function i(){var e=n.call(this,`
            <div class="ag-autocomplete" role="presentation">
                <ag-input-text-field ref="eAutocompleteInput"></ag-input-text-field>
            </div>`)||this;return e.isListOpen=!1,e.lastPosition=0,e.valid=!0,e}return i.prototype.postConstruct=function(){var e=this;this.eAutocompleteInput.onValueChange(function(t){return e.onValueChanged(t)}),this.eAutocompleteInput.getInputElement().setAttribute("autocomplete","off"),this.addGuiEventListener("keydown",this.onKeyDown.bind(this)),this.addGuiEventListener("click",this.updatePositionAndList.bind(this)),this.addDestroyFunc(function(){e.destroyBean(e.autocompleteList)}),this.addGuiEventListener("focusout",function(){return e.onFocusOut()})},i.prototype.onValueChanged=function(e){var t=ao(e);this.updateValue(t),this.updateAutocompleteList(t)},i.prototype.updateValue=function(e){this.updateLastPosition(),this.dispatchEvent({type:i.EVENT_VALUE_CHANGED,value:e}),this.validate(e)},i.prototype.updateAutocompleteList=function(e){var t,r,o,a,s=(r=(t=this.listGenerator)===null||t===void 0?void 0:t.call(this,e,this.lastPosition))!==null&&r!==void 0?r:{enabled:!1};if((!s.type||s.type!==((o=this.autocompleteListParams)===null||o===void 0?void 0:o.type))&&this.isListOpen&&this.closeList(),this.autocompleteListParams=s,!((a=this.autocompleteListParams)===null||a===void 0)&&a.enabled){this.isListOpen||this.openList();var l=this.autocompleteListParams.searchString;this.autocompleteList.setSearch(l??"")}else this.isListOpen&&this.closeList()},i.prototype.onKeyDown=function(e){var t=this,r=e.key;switch(this.updateLastPosition(),r){case J.ENTER:this.onEnterKeyDown(e);break;case J.TAB:this.onTabKeyDown(e);break;case J.DOWN:case J.UP:this.onUpDownKeyDown(e,r);break;case J.LEFT:case J.RIGHT:case J.PAGE_HOME:case J.PAGE_END:setTimeout(function(){t.updatePositionAndList()});break;case J.ESCAPE:this.onEscapeKeyDown(e);break;case J.SPACE:e.ctrlKey&&!this.isListOpen&&(e.preventDefault(),this.forceOpenList());break}},i.prototype.confirmSelection=function(){var e,t=(e=this.autocompleteList)===null||e===void 0?void 0:e.getSelectedValue();t&&(this.closeList(),this.dispatchEvent({type:i.EVENT_OPTION_SELECTED,value:this.getValue(),position:this.lastPosition,updateEntry:t,autocompleteType:this.autocompleteListParams.type}))},i.prototype.onTabKeyDown=function(e){this.isListOpen&&(e.preventDefault(),e.stopPropagation(),this.confirmSelection())},i.prototype.onEnterKeyDown=function(e){e.preventDefault(),this.isListOpen?this.confirmSelection():this.onCompleted()},i.prototype.onUpDownKeyDown=function(e,t){var r;e.preventDefault(),this.isListOpen?(r=this.autocompleteList)===null||r===void 0||r.onNavigationKeyDown(e,t):this.forceOpenList()},i.prototype.onEscapeKeyDown=function(e){this.isListOpen&&(e.preventDefault(),e.stopPropagation(),this.closeList(),this.setCaret(this.lastPosition,!0))},i.prototype.onFocusOut=function(){this.isListOpen&&this.closeList()},i.prototype.updatePositionAndList=function(){var e;this.updateLastPosition(),this.updateAutocompleteList((e=this.eAutocompleteInput.getValue())!==null&&e!==void 0?e:null)},i.prototype.setCaret=function(e,t){var r=this.gridOptionsService.getDocument();t&&r.activeElement===r.body&&this.eAutocompleteInput.getFocusableElement().focus(),this.eAutocompleteInput.getInputElement().setSelectionRange(e,e)},i.prototype.forceOpenList=function(){this.onValueChanged(this.eAutocompleteInput.getValue())},i.prototype.updateLastPosition=function(){var e;this.lastPosition=(e=this.eAutocompleteInput.getInputElement().selectionStart)!==null&&e!==void 0?e:0},i.prototype.validate=function(e){var t;this.validator&&(this.validationMessage=this.validator(e),this.eAutocompleteInput.getInputElement().setCustomValidity((t=this.validationMessage)!==null&&t!==void 0?t:""),this.valid=!this.validationMessage,this.dispatchEvent({type:i.EVENT_VALID_CHANGED,isValid:this.valid,validationMessage:this.validationMessage}))},i.prototype.openList=function(){var e=this;this.isListOpen=!0,this.autocompleteList=this.createBean(new XE({autocompleteEntries:this.autocompleteListParams.entries,onConfirmed:function(){return e.confirmSelection()},forceLastSelection:this.forceLastSelection}));var t=this.autocompleteList.getGui(),r={ePopup:t,type:"autocomplete",eventSource:this.getGui(),position:"under",alignSide:this.gridOptionsService.is("enableRtl")?"right":"left",keepWithinBounds:!0},o=this.popupService.addPopup({eChild:t,anchorToElement:this.getGui(),positionCallback:function(){return e.popupService.positionPopupByComponent(r)},ariaLabel:this.listAriaLabel});this.hidePopup=o.hideFunc,this.autocompleteList.afterGuiAttached()},i.prototype.closeList=function(){this.isListOpen=!1,this.hidePopup(),this.destroyBean(this.autocompleteList),this.autocompleteList=null},i.prototype.onCompleted=function(){this.isListOpen&&this.closeList(),this.dispatchEvent({type:i.EVENT_VALUE_CONFIRMED,value:this.getValue(),isValid:this.isValid()})},i.prototype.getValue=function(){return ao(this.eAutocompleteInput.getValue())},i.prototype.setInputPlaceholder=function(e){return this.eAutocompleteInput.setInputPlaceholder(e),this},i.prototype.setInputAriaLabel=function(e){return this.eAutocompleteInput.setInputAriaLabel(e),this},i.prototype.setListAriaLabel=function(e){return this.listAriaLabel=e,this},i.prototype.setListGenerator=function(e){return this.listGenerator=e,this},i.prototype.setValidator=function(e){return this.validator=e,this},i.prototype.isValid=function(){return this.valid},i.prototype.setValue=function(e){var t=e.value,r=e.position,o=e.silent,a=e.updateListOnlyIfOpen,s=e.restoreFocus;this.eAutocompleteInput.setValue(t,!0),this.setCaret(r??this.lastPosition,s),o||this.updateValue(t),(!a||this.isListOpen)&&this.updateAutocompleteList(t)},i.prototype.setForceLastSelection=function(e){return this.forceLastSelection=e,this},i.prototype.setInputDisabled=function(e){return this.eAutocompleteInput.setDisabled(e),this},i.EVENT_VALUE_CHANGED="eventValueChanged",i.EVENT_VALUE_CONFIRMED="eventValueConfirmed",i.EVENT_OPTION_SELECTED="eventOptionSelected",i.EVENT_VALID_CHANGED="eventValidChanged",ic([T("popupService")],i.prototype,"popupService",void 0),ic([be("eAutocompleteInput")],i.prototype,"eAutocompleteInput",void 0),ic([Oe],i.prototype,"postConstruct",null),i}(xt),$E=["mouseover","mouseout","mouseenter","mouseleave","mousemove"],e_=["touchstart","touchend","touchmove","touchcancel"],Xv=function(){function n(){this.renderingEngine="vanilla",this.isOutsideAngular=function(i){return Lr($E,i)}}return n.prototype.setTimeout=function(i,e){window.setTimeout(i,e)},n.prototype.setInterval=function(i,e){return new jr(function(t){t(window.setInterval(i,e))})},n.prototype.addEventListener=function(i,e,t,r){var o=Lr(e_,e);i.addEventListener(e,t,{capture:!!r,passive:o})},n.prototype.dispatchEvent=function(i,e,t){e()},n.prototype.frameworkComponent=function(i){return null},n.prototype.isFrameworkComponent=function(i){return!1},n}(),t_=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Vn=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},i_=function(n,i){var e=typeof Symbol=="function"&&n[Symbol.iterator];if(!e)return n;var t=e.call(n),r,o=[],a;try{for(;(i===void 0||i-- >0)&&!(r=t.next()).done;)o.push(r.value)}catch(s){a={error:s}}finally{try{r&&!r.done&&(e=t.return)&&e.call(t)}finally{if(a)throw a.error}}return o},r_=function(n,i){for(var e=0,t=i.length,r=n.length;e<t;e++,r++)n[r]=i[e];return n},o_=function(n){t_(i,n);function i(){return n!==null&&n.apply(this,arguments)||this}return i.prototype.getNextCellToFocus=function(e,t,r){return r===void 0&&(r=!1),r?this.getNextCellToFocusWithCtrlPressed(e,t):this.getNextCellToFocusWithoutCtrlPressed(e,t)},i.prototype.getNextCellToFocusWithCtrlPressed=function(e,t){var r=e===J.UP,o=e===J.DOWN,a=e===J.LEFT,s,l;if(r||o)l=r?this.paginationProxy.getPageFirstRow():this.paginationProxy.getPageLastRow(),s=t.column;else{var u=this.columnModel.getAllDisplayedColumns(),c=this.gridOptionsService.is("enableRtl");l=t.rowIndex,s=a!==c?u[0]:ai(u)}return{rowIndex:l,rowPinned:null,column:s}},i.prototype.getNextCellToFocusWithoutCtrlPressed=function(e,t){for(var r=t,o=!1;!o;){switch(e){case J.UP:r=this.getCellAbove(r);break;case J.DOWN:r=this.getCellBelow(r);break;case J.RIGHT:this.gridOptionsService.is("enableRtl")?r=this.getCellToLeft(r):r=this.getCellToRight(r);break;case J.LEFT:this.gridOptionsService.is("enableRtl")?r=this.getCellToRight(r):r=this.getCellToLeft(r);break;default:r=null,console.warn("AG Grid: unknown key for navigation "+e);break}r?o=this.isCellGoodToFocusOn(r):o=!0}return r},i.prototype.isCellGoodToFocusOn=function(e){var t=e.column,r;switch(e.rowPinned){case"top":r=this.pinnedRowModel.getPinnedTopRow(e.rowIndex);break;case"bottom":r=this.pinnedRowModel.getPinnedBottomRow(e.rowIndex);break;default:r=this.rowModel.getRow(e.rowIndex);break}if(!r)return!1;var o=t.isSuppressNavigable(r);return!o},i.prototype.getCellToLeft=function(e){if(!e)return null;var t=this.columnModel.getDisplayedColBefore(e.column);return t?{rowIndex:e.rowIndex,column:t,rowPinned:e.rowPinned}:null},i.prototype.getCellToRight=function(e){if(!e)return null;var t=this.columnModel.getDisplayedColAfter(e.column);return t?{rowIndex:e.rowIndex,column:t,rowPinned:e.rowPinned}:null},i.prototype.getRowBelow=function(e){var t=e.rowIndex,r=e.rowPinned;if(this.isLastRowInContainer(e))switch(r){case"bottom":return null;case"top":return this.rowModel.isRowsToRender()?{rowIndex:this.paginationProxy.getPageFirstRow(),rowPinned:null}:this.pinnedRowModel.isRowsToRender("bottom")?{rowIndex:0,rowPinned:"bottom"}:null;default:return this.pinnedRowModel.isRowsToRender("bottom")?{rowIndex:0,rowPinned:"bottom"}:null}var o=this.rowModel.getRow(e.rowIndex),a=this.getNextStickyPosition(o);return a||{rowIndex:t+1,rowPinned:r}},i.prototype.getNextStickyPosition=function(e,t){if(!(!this.gridOptionsService.isGroupRowsSticky()||!e||!e.sticky)){var r=r_([],i_(this.rowRenderer.getStickyTopRowCtrls())).sort(function(l,u){return l.getRowNode().rowIndex-u.getRowNode().rowIndex}),o=t?-1:1,a=r.findIndex(function(l){return l.getRowNode().rowIndex===e.rowIndex}),s=r[a+o];if(s)return{rowIndex:s.getRowNode().rowIndex,rowPinned:null}}},i.prototype.getCellBelow=function(e){if(!e)return null;var t=this.getRowBelow(e);return t?{rowIndex:t.rowIndex,column:e.column,rowPinned:t.rowPinned}:null},i.prototype.isLastRowInContainer=function(e){var t=e.rowPinned,r=e.rowIndex;if(t==="top"){var o=this.pinnedRowModel.getPinnedTopRowData().length-1;return o<=r}if(t==="bottom"){var a=this.pinnedRowModel.getPinnedBottomRowData().length-1;return a<=r}var s=this.paginationProxy.getPageLastRow();return s<=r},i.prototype.getRowAbove=function(e){var t=e.rowIndex,r=e.rowPinned,o=r?t===0:t===this.paginationProxy.getPageFirstRow();if(o)return r==="top"?null:r?this.rowModel.isRowsToRender()?this.getLastBodyCell():this.pinnedRowModel.isRowsToRender("top")?this.getLastFloatingTopRow():null:this.pinnedRowModel.isRowsToRender("top")?this.getLastFloatingTopRow():null;var a=this.rowModel.getRow(e.rowIndex),s=this.getNextStickyPosition(a,!0);return s||{rowIndex:t-1,rowPinned:r}},i.prototype.getCellAbove=function(e){if(!e)return null;var t=this.getRowAbove({rowIndex:e.rowIndex,rowPinned:e.rowPinned});return t?{rowIndex:t.rowIndex,column:e.column,rowPinned:t.rowPinned}:null},i.prototype.getLastBodyCell=function(){var e=this.paginationProxy.getPageLastRow();return{rowIndex:e,rowPinned:null}},i.prototype.getLastFloatingTopRow=function(){var e=this.pinnedRowModel.getPinnedTopRowData().length-1;return{rowIndex:e,rowPinned:"top"}},i.prototype.getNextTabbedCell=function(e,t){return t?this.getNextTabbedCellBackwards(e):this.getNextTabbedCellForwards(e)},i.prototype.getNextTabbedCellForwards=function(e){var t=this.columnModel.getAllDisplayedColumns(),r=e.rowIndex,o=e.rowPinned,a=this.columnModel.getDisplayedColAfter(e.column);if(!a){a=t[0];var s=this.getRowBelow(e);if(vt(s)||!s.rowPinned&&!this.paginationProxy.isRowInPage(s))return null;r=s?s.rowIndex:null,o=s?s.rowPinned:null}return{rowIndex:r,column:a,rowPinned:o}},i.prototype.getNextTabbedCellBackwards=function(e){var t=this.columnModel.getAllDisplayedColumns(),r=e.rowIndex,o=e.rowPinned,a=this.columnModel.getDisplayedColBefore(e.column);if(!a){a=ai(t);var s=this.getRowAbove({rowIndex:e.rowIndex,rowPinned:e.rowPinned});if(vt(s)||!s.rowPinned&&!this.paginationProxy.isRowInPage(s))return null;r=s?s.rowIndex:null,o=s?s.rowPinned:null}return{rowIndex:r,column:a,rowPinned:o}},Vn([T("columnModel")],i.prototype,"columnModel",void 0),Vn([T("rowModel")],i.prototype,"rowModel",void 0),Vn([T("rowRenderer")],i.prototype,"rowRenderer",void 0),Vn([T("pinnedRowModel")],i.prototype,"pinnedRowModel",void 0),Vn([T("paginationProxy")],i.prototype,"paginationProxy",void 0),i=Vn([Ue("cellNavigationService")],i),i}(ve),n_=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Ba=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},a_=function(n,i){return function(e,t){i(e,t,n)}},s_=function(n){n_(i,n);function i(){var e=n!==null&&n.apply(this,arguments)||this;return e.consuming=!1,e}return i.prototype.setBeans=function(e){this.logger=e.create("AlignedGridsService")},i.prototype.init=function(){this.addManagedListener(this.eventService,b.EVENT_COLUMN_MOVED,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,b.EVENT_COLUMN_VISIBLE,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,b.EVENT_COLUMN_PINNED,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,b.EVENT_COLUMN_GROUP_OPENED,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,b.EVENT_COLUMN_RESIZED,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,b.EVENT_BODY_SCROLL,this.fireScrollEvent.bind(this))},i.prototype.fireEvent=function(e){if(!this.consuming){var t=this.gridOptionsService.get("alignedGrids");t&&t.forEach(function(r){if(r.api){var o=r.api.__getAlignedGridService();e(o)}})}},i.prototype.onEvent=function(e){this.consuming=!0,e(),this.consuming=!1},i.prototype.fireColumnEvent=function(e){this.fireEvent(function(t){t.onColumnEvent(e)})},i.prototype.fireScrollEvent=function(e){e.direction==="horizontal"&&this.fireEvent(function(t){t.onScrollEvent(e)})},i.prototype.onScrollEvent=function(e){var t=this;this.onEvent(function(){var r=t.ctrlsService.getGridBodyCtrl();r.getScrollFeature().setHorizontalScrollPosition(e.left,!0)})},i.prototype.getMasterColumns=function(e){var t=[];return e.columns?e.columns.forEach(function(r){t.push(r)}):e.column&&t.push(e.column),t},i.prototype.getColumnIds=function(e){var t=[];return e.columns?e.columns.forEach(function(r){t.push(r.getColId())}):e.column&&t.push(e.column.getColId()),t},i.prototype.onColumnEvent=function(e){var t=this;this.onEvent(function(){switch(e.type){case b.EVENT_COLUMN_MOVED:case b.EVENT_COLUMN_VISIBLE:case b.EVENT_COLUMN_PINNED:case b.EVENT_COLUMN_RESIZED:var r=e;t.processColumnEvent(r);break;case b.EVENT_COLUMN_GROUP_OPENED:var o=e;t.processGroupOpenedEvent(o);break;case b.EVENT_COLUMN_PIVOT_CHANGED:console.warn("AG Grid: pivoting is not supported with aligned grids. You can only use one of these features at a time in a grid.");break}})},i.prototype.processGroupOpenedEvent=function(e){var t=e.columnGroup,r=null;if(t){var o=t.getGroupId();r=this.columnModel.getProvidedColumnGroup(o)}t&&!r||(this.logger.log("onColumnEvent-> processing "+e+" expanded = "+t.isExpanded()),this.columnModel.setColumnGroupOpened(r,t.isExpanded(),"alignedGridChanged"))},i.prototype.processColumnEvent=function(e){var t=this,r,o=e.column,a=null;if(o&&(a=this.columnModel.getPrimaryColumn(o.getColId())),!(o&&!a)){var s=this.getMasterColumns(e);switch(e.type){case b.EVENT_COLUMN_MOVED:{var l=e,u=e.columnApi.getColumnState(),c=u.map(function(L){return{colId:L.colId}});this.columnModel.applyColumnState({state:c,applyOrder:!0},"alignedGridChanged"),this.logger.log("onColumnEvent-> processing "+e.type+" toIndex = "+l.toIndex)}break;case b.EVENT_COLUMN_VISIBLE:{var d=e,u=e.columnApi.getColumnState(),c=u.map(function(V){return{colId:V.colId,hide:V.hide}});this.columnModel.applyColumnState({state:c},"alignedGridChanged"),this.logger.log("onColumnEvent-> processing "+e.type+" visible = "+d.visible)}break;case b.EVENT_COLUMN_PINNED:{var f=e,u=e.columnApi.getColumnState(),c=u.map(function(V){return{colId:V.colId,pinned:V.pinned}});this.columnModel.applyColumnState({state:c},"alignedGridChanged"),this.logger.log("onColumnEvent-> processing "+e.type+" pinned = "+f.pinned)}break;case b.EVENT_COLUMN_RESIZED:var y=e,S={};s.forEach(function(L){t.logger.log("onColumnEvent-> processing "+e.type+" actualWidth = "+L.getActualWidth()),S[L.getId()]={key:L.getColId(),newWidth:L.getActualWidth()}}),(r=y.flexColumns)===null||r===void 0||r.forEach(function(L){S[L.getId()]&&delete S[L.getId()]}),this.columnModel.setColumnWidths(Object.values(S),!1,y.finished,"alignedGridChanged");break}var w=this.ctrlsService.getGridBodyCtrl(),E=w.isVerticalScrollShowing(),_=this.gridOptionsService.get("alignedGrids");_&&_.forEach(function(L){L.api&&L.api.setAlwaysShowVerticalScroll(E)})}},Ba([T("columnModel")],i.prototype,"columnModel",void 0),Ba([T("ctrlsService")],i.prototype,"ctrlsService",void 0),Ba([a_(0,er("loggerFactory"))],i.prototype,"setBeans",null),Ba([Oe],i.prototype,"init",null),i=Ba([Ue("alignedGridsService")],i),i}(ve),l_=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Ha=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},u_=function(n,i){return function(e,t){i(e,t,n)}},c_=function(n,i){var e=typeof Symbol=="function"&&n[Symbol.iterator];if(!e)return n;var t=e.call(n),r,o=[],a;try{for(;(i===void 0||i-- >0)&&!(r=t.next()).done;)o.push(r.value)}catch(s){a={error:s}}finally{try{r&&!r.done&&(e=t.return)&&e.call(t)}finally{if(a)throw a.error}}return o},d_=function(n){l_(i,n);function i(){return n!==null&&n.apply(this,arguments)||this}return i.prototype.setBeans=function(e){this.logger=e.create("selectionService"),this.reset()},i.prototype.init=function(){var e=this;this.groupSelectsChildren=this.gridOptionsService.is("groupSelectsChildren"),this.addManagedPropertyListener("groupSelectsChildren",function(t){return e.groupSelectsChildren=t.currentValue}),this.rowSelection=this.gridOptionsService.get("rowSelection"),this.addManagedPropertyListener("rowSelection",function(t){return e.rowSelection=t.currentValue}),this.addManagedListener(this.eventService,b.EVENT_ROW_SELECTED,this.onRowSelected.bind(this))},i.prototype.isMultiselect=function(){return this.rowSelection==="multiple"},i.prototype.setNodesSelected=function(e){var t;if(e.nodes.length===0)return 0;var r=e.newValue,o=e.clearSelection,a=e.suppressFinishActions,s=e.rangeSelect;e.event;var l=e.source,u=l===void 0?"api":l;if(e.nodes.length>1&&!this.isMultiselect())return console.warn("AG Grid: cannot multi select while rowSelection='single'"),0;var c=this.groupSelectsChildren&&e.groupSelectsFiltered===!0,d=e.nodes.map(function(ee){return ee.footer?ee.sibling:ee});if(s){if(e.nodes.length>1)return console.warn("AG Grid: cannot range select while selecting multiple rows"),0;var f=this.getLastSelectedNode();if(f){var y=d[0],S=f!==y;if(S&&this.isMultiselect()){var w=this.selectRange(y,f,e.newValue,u);return this.setLastSelectedNode(y),w}}}for(var E=0,_=0;_<d.length;_++){var y=d[_],L=c&&y.group;if(!L){var P=y.selectThisNode(r,e.event,u);P&&E++}this.groupSelectsChildren&&(!((t=y.childrenAfterGroup)===null||t===void 0)&&t.length)&&(E+=this.selectChildren(y,r,c,u))}if(!a){var V=r&&(o||!this.isMultiselect());if(V&&(E+=this.clearOtherNodes(d[0],u)),E>0){this.updateGroupsFromChildrenSelections(u);var ne={type:b.EVENT_SELECTION_CHANGED,source:u};this.eventService.dispatchEvent(ne)}r&&this.setLastSelectedNode(d[d.length-1])}return E},i.prototype.selectRange=function(e,t,r,o){var a=this;r===void 0&&(r=!0);var s=this.rowModel.getNodesInRangeForSelection(e,t),l=0;s.forEach(function(c){if(!(c.group&&a.groupSelectsChildren||r===!1&&e===c)){var d=c.selectThisNode(r,void 0,o);d&&l++}}),this.updateGroupsFromChildrenSelections(o);var u={type:b.EVENT_SELECTION_CHANGED,source:o};return this.eventService.dispatchEvent(u),l},i.prototype.selectChildren=function(e,t,r,o){var a=r?e.childrenAfterAggFilter:e.childrenAfterGroup;return St.missing(a)?0:this.setNodesSelected({newValue:t,clearSelection:!1,suppressFinishActions:!0,groupSelectsFiltered:r,source:o,nodes:a})},i.prototype.setLastSelectedNode=function(e){this.lastSelectedNode=e},i.prototype.getLastSelectedNode=function(){return this.lastSelectedNode},i.prototype.getSelectedNodes=function(){var e=[];return Oi(this.selectedNodes,function(t,r){r&&e.push(r)}),e},i.prototype.getSelectedRows=function(){var e=[];return Oi(this.selectedNodes,function(t,r){r&&r.data&&e.push(r.data)}),e},i.prototype.getSelectionCount=function(){return Object.values(this.selectedNodes).length},i.prototype.filterFromSelection=function(e){var t={};Object.entries(this.selectedNodes).forEach(function(r){var o=c_(r,2),a=o[0],s=o[1],l=s&&e(s);l&&(t[a]=s)}),this.selectedNodes=t},i.prototype.updateGroupsFromChildrenSelections=function(e,t){if(!this.groupSelectsChildren||this.rowModel.getType()!=="clientSide")return!1;var r=this.rowModel,o=r.getRootNode();t||(t=new kd(!0,o),t.setInactive());var a=!1;return t.forEachChangedNodeDepthFirst(function(s){if(s!==o){var l=s.calculateSelectedFromChildren();a=s.selectThisNode(l===null?!1:l,void 0,e)||a}}),a},i.prototype.clearOtherNodes=function(e,t){var r=this,o={},a=0;return Oi(this.selectedNodes,function(s,l){if(l&&l.id!==e.id){var u=r.selectedNodes[l.id];a+=u.setSelectedParams({newValue:!1,clearSelection:!1,suppressFinishActions:!0,source:t}),r.groupSelectsChildren&&l.parent&&(o[l.parent.id]=l.parent)}}),Oi(o,function(s,l){var u=l.calculateSelectedFromChildren();l.selectThisNode(u===null?!1:u,void 0,t)}),a},i.prototype.onRowSelected=function(e){var t=e.node;this.groupSelectsChildren&&t.group||(t.isSelected()?this.selectedNodes[t.id]=t:delete this.selectedNodes[t.id])},i.prototype.syncInRowNode=function(e,t){this.syncInOldRowNode(e,t),this.syncInNewRowNode(e)},i.prototype.syncInOldRowNode=function(e,t){var r=ue(t)&&e.id!==t.id;if(r&&t){var o=t.id,a=this.selectedNodes[o]==e;a&&(this.selectedNodes[t.id]=t)}},i.prototype.syncInNewRowNode=function(e){ue(this.selectedNodes[e.id])?(e.setSelectedInitialValue(!0),this.selectedNodes[e.id]=e):e.setSelectedInitialValue(!1)},i.prototype.reset=function(){this.logger.log("reset"),this.selectedNodes={},this.lastSelectedNode=null},i.prototype.getBestCostNodeSelection=function(){if(this.rowModel.getType()!=="clientSide")return;var e=this.rowModel,t=e.getTopLevelNodes();if(t===null)return;var r=[];function o(a){for(var s=0,l=a.length;s<l;s++){var u=a[s];if(u.isSelected())r.push(u);else{var c=u;c.group&&c.children&&o(c.children)}}}return o(t),r},i.prototype.isEmpty=function(){var e=0;return Oi(this.selectedNodes,function(t,r){r&&e++}),e===0},i.prototype.deselectAllRowNodes=function(e){var t=function(u){return u.selectThisNode(!1,void 0,o)},r=this.rowModel.getType()==="clientSide",o=e.source,a=e.justFiltered,s=e.justCurrentPage;if(s||a){if(!r){console.error("AG Grid: selecting just filtered only works when gridOptions.rowModelType='clientSide'");return}this.getNodesToSelect(a,s).forEach(t)}else Oi(this.selectedNodes,function(u,c){c&&t(c)}),this.reset();r&&this.groupSelectsChildren&&this.updateGroupsFromChildrenSelections(o);var l={type:b.EVENT_SELECTION_CHANGED,source:o};this.eventService.dispatchEvent(l)},i.prototype.getSelectAllState=function(e,t){var r=this,o=0,a=0,s=function(l){r.groupSelectsChildren&&l.group||(l.isSelected()?o++:l.selectable&&a++)};return this.getNodesToSelect(e,t).forEach(s),o===0&&a===0?!1:o>0&&a>0?null:o>0},i.prototype.getNodesToSelect=function(e,t){var r=this;if(e===void 0&&(e=!1),t===void 0&&(t=!1),this.rowModel.getType()!=="clientSide")throw new Error("selectAll only available when rowModelType='clientSide', ie not "+this.rowModel.getType());var o=[];if(t)return this.paginationProxy.forEachNodeOnPage(function(s){if(!s.group){o.push(s);return}if(!s.expanded){var l=function(u){var c;o.push(u),!((c=u.childrenAfterFilter)===null||c===void 0)&&c.length&&u.childrenAfterFilter.forEach(l)};l(s);return}r.groupSelectsChildren||o.push(s)}),o;var a=this.rowModel;return e?(a.forEachNodeAfterFilter(function(s){o.push(s)}),o):(a.forEachNode(function(s){o.push(s)}),o)},i.prototype.selectAllRowNodes=function(e){if(this.rowModel.getType()!=="clientSide")throw new Error("selectAll only available when rowModelType='clientSide', ie not "+this.rowModel.getType());var t=e.source,r=e.justFiltered,o=e.justCurrentPage,a=function(l){return l.selectThisNode(!0,void 0,t)};this.getNodesToSelect(r,o).forEach(a),this.rowModel.getType()==="clientSide"&&this.groupSelectsChildren&&this.updateGroupsFromChildrenSelections(t);var s={type:b.EVENT_SELECTION_CHANGED,source:t};this.eventService.dispatchEvent(s)},i.prototype.getServerSideSelectionState=function(){return null},i.prototype.setServerSideSelectionState=function(e){},Ha([T("rowModel")],i.prototype,"rowModel",void 0),Ha([T("paginationProxy")],i.prototype,"paginationProxy",void 0),Ha([u_(0,er("loggerFactory"))],i.prototype,"setBeans",null),Ha([Oe],i.prototype,"init",null),i=Ha([Ue("selectionService")],i),i}(ve),rc=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},p_=function(){function n(){}return n.prototype.sizeColumnsToFit=function(i){typeof i>"u"&&console.error("AG Grid: missing parameter to columnApi.sizeColumnsToFit(gridWidth)"),this.columnModel.sizeColumnsToFit(i,"api")},n.prototype.setColumnGroupOpened=function(i,e){this.columnModel.setColumnGroupOpened(i,e,"api")},n.prototype.getColumnGroup=function(i,e){return this.columnModel.getColumnGroup(i,e)},n.prototype.getProvidedColumnGroup=function(i){return this.columnModel.getProvidedColumnGroup(i)},n.prototype.getDisplayNameForColumn=function(i,e){return this.columnModel.getDisplayNameForColumn(i,e)||""},n.prototype.getDisplayNameForColumnGroup=function(i,e){return this.columnModel.getDisplayNameForColumnGroup(i,e)||""},n.prototype.getColumn=function(i){return this.columnModel.getPrimaryColumn(i)},n.prototype.getColumns=function(){return this.columnModel.getAllPrimaryColumns()},n.prototype.applyColumnState=function(i){return this.columnModel.applyColumnState(i,"api")},n.prototype.getColumnState=function(){return this.columnModel.getColumnState()},n.prototype.resetColumnState=function(){this.columnModel.resetColumnState("api")},n.prototype.getColumnGroupState=function(){return this.columnModel.getColumnGroupState()},n.prototype.setColumnGroupState=function(i){this.columnModel.setColumnGroupState(i,"api")},n.prototype.resetColumnGroupState=function(){this.columnModel.resetColumnGroupState("api")},n.prototype.isPinning=function(){return this.columnModel.isPinningLeft()||this.columnModel.isPinningRight()},n.prototype.isPinningLeft=function(){return this.columnModel.isPinningLeft()},n.prototype.isPinningRight=function(){return this.columnModel.isPinningRight()},n.prototype.getDisplayedColAfter=function(i){return this.columnModel.getDisplayedColAfter(i)},n.prototype.getDisplayedColBefore=function(i){return this.columnModel.getDisplayedColBefore(i)},n.prototype.setColumnVisible=function(i,e){this.columnModel.setColumnVisible(i,e,"api")},n.prototype.setColumnsVisible=function(i,e){this.columnModel.setColumnsVisible(i,e,"api")},n.prototype.setColumnPinned=function(i,e){this.columnModel.setColumnPinned(i,e,"api")},n.prototype.setColumnsPinned=function(i,e){this.columnModel.setColumnsPinned(i,e,"api")},n.prototype.getAllGridColumns=function(){return this.columnModel.getAllGridColumns()},n.prototype.getDisplayedLeftColumns=function(){return this.columnModel.getDisplayedLeftColumns()},n.prototype.getDisplayedCenterColumns=function(){return this.columnModel.getDisplayedCenterColumns()},n.prototype.getDisplayedRightColumns=function(){return this.columnModel.getDisplayedRightColumns()},n.prototype.getAllDisplayedColumns=function(){return this.columnModel.getAllDisplayedColumns()},n.prototype.getAllDisplayedVirtualColumns=function(){return this.columnModel.getViewportColumns()},n.prototype.moveColumn=function(i,e){this.columnModel.moveColumn(i,e,"api")},n.prototype.moveColumnByIndex=function(i,e){this.columnModel.moveColumnByIndex(i,e,"api")},n.prototype.moveColumns=function(i,e){this.columnModel.moveColumns(i,e,"api")},n.prototype.moveRowGroupColumn=function(i,e){this.columnModel.moveRowGroupColumn(i,e)},n.prototype.setColumnAggFunc=function(i,e){this.columnModel.setColumnAggFunc(i,e)},n.prototype.setColumnWidth=function(i,e,t,r){t===void 0&&(t=!0),this.columnModel.setColumnWidths([{key:i,newWidth:e}],!1,t,r)},n.prototype.setColumnWidths=function(i,e,t){e===void 0&&(e=!0),this.columnModel.setColumnWidths(i,!1,e,t)},n.prototype.setPivotMode=function(i){this.columnModel.setPivotMode(i)},n.prototype.isPivotMode=function(){return this.columnModel.isPivotMode()},n.prototype.getPivotResultColumn=function(i,e){return this.columnModel.getSecondaryPivotColumn(i,e)},n.prototype.setValueColumns=function(i){this.columnModel.setValueColumns(i,"api")},n.prototype.getValueColumns=function(){return this.columnModel.getValueColumns()},n.prototype.removeValueColumn=function(i){this.columnModel.removeValueColumn(i,"api")},n.prototype.removeValueColumns=function(i){this.columnModel.removeValueColumns(i,"api")},n.prototype.addValueColumn=function(i){this.columnModel.addValueColumn(i,"api")},n.prototype.addValueColumns=function(i){this.columnModel.addValueColumns(i,"api")},n.prototype.setRowGroupColumns=function(i){this.columnModel.setRowGroupColumns(i,"api")},n.prototype.removeRowGroupColumn=function(i){this.columnModel.removeRowGroupColumn(i,"api")},n.prototype.removeRowGroupColumns=function(i){this.columnModel.removeRowGroupColumns(i,"api")},n.prototype.addRowGroupColumn=function(i){this.columnModel.addRowGroupColumn(i,"api")},n.prototype.addRowGroupColumns=function(i){this.columnModel.addRowGroupColumns(i,"api")},n.prototype.getRowGroupColumns=function(){return this.columnModel.getRowGroupColumns()},n.prototype.setPivotColumns=function(i){this.columnModel.setPivotColumns(i,"api")},n.prototype.removePivotColumn=function(i){this.columnModel.removePivotColumn(i,"api")},n.prototype.removePivotColumns=function(i){this.columnModel.removePivotColumns(i,"api")},n.prototype.addPivotColumn=function(i){this.columnModel.addPivotColumn(i,"api")},n.prototype.addPivotColumns=function(i){this.columnModel.addPivotColumns(i,"api")},n.prototype.getPivotColumns=function(){return this.columnModel.getPivotColumns()},n.prototype.getLeftDisplayedColumnGroups=function(){return this.columnModel.getDisplayedTreeLeft()},n.prototype.getCenterDisplayedColumnGroups=function(){return this.columnModel.getDisplayedTreeCentre()},n.prototype.getRightDisplayedColumnGroups=function(){return this.columnModel.getDisplayedTreeRight()},n.prototype.getAllDisplayedColumnGroups=function(){return this.columnModel.getAllDisplayedTrees()},n.prototype.autoSizeColumn=function(i,e){return this.columnModel.autoSizeColumn(i,e,"api")},n.prototype.autoSizeColumns=function(i,e){this.columnModel.autoSizeColumns({columns:i,skipHeader:e})},n.prototype.autoSizeAllColumns=function(i){this.columnModel.autoSizeAllColumns(i,"api")},n.prototype.setPivotResultColumns=function(i){this.columnModel.setSecondaryColumns(i,"api")},n.prototype.getPivotResultColumns=function(){return this.columnModel.getSecondaryColumns()},n.prototype.cleanDownReferencesToAvoidMemoryLeakInCaseApplicationIsKeepingReferenceToDestroyedGrid=function(){setTimeout(St.removeAllReferences.bind(window,this,"Column API"),100)},n.prototype.getAllColumns=function(){return Rr("28.0","getAllColumns","getColumns"),this.getColumns()},n.prototype.getPrimaryColumns=function(){return Rr("28.0","getPrimaryColumns","getColumns"),this.getColumns()},n.prototype.getSecondaryColumns=function(){return Rr("28.0","getSecondaryColumns","getPivotResultColumns"),this.getPivotResultColumns()},n.prototype.setSecondaryColumns=function(i){Rr("28.0","setSecondaryColumns","setPivotResultColumns"),this.setPivotResultColumns(i)},n.prototype.getSecondaryPivotColumn=function(i,e){return Rr("28.0","getSecondaryPivotColumn","getPivotResultColumn"),this.getPivotResultColumn(i,e)},rc([T("columnModel")],n.prototype,"columnModel",void 0),rc([Ki],n.prototype,"cleanDownReferencesToAvoidMemoryLeakInCaseApplicationIsKeepingReferenceToDestroyedGrid",null),n=rc([Ue("columnApi")],n),n}(),f_=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Bn=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},h_=function(n){f_(i,n);function i(){var e=n!==null&&n.apply(this,arguments)||this;return e.initialised=!1,e.isSsrm=!1,e}return i.prototype.init=function(){var e=this;this.isSsrm=this.gridOptionsService.isRowModelType("serverSide"),this.cellExpressions=this.gridOptionsService.is("enableCellExpressions"),this.isTreeData=this.gridOptionsService.is("treeData"),this.initialised=!0,this.eventService.addEventListener(b.EVENT_CELL_VALUE_CHANGED,function(t){return e.callColumnCellValueChangedHandler(t)},this.gridOptionsService.useAsyncEvents()),this.addManagedPropertyListener("treeData",function(t){return e.isTreeData=t.currentValue})},i.prototype.getValue=function(e,t,r,o){if(r===void 0&&(r=!1),o===void 0&&(o=!1),this.initialised||this.init(),!!t){var a=e.getColDef(),s=a.field,l=e.getColId(),u=t.data,c,d=t.groupData&&t.groupData[l]!==void 0,f=!o&&t.aggData&&t.aggData[l]!==void 0,y=this.isSsrm&&o&&!!e.getColDef().aggFunc,S=this.isSsrm&&t.footer&&t.field&&(e.getColDef().showRowGroup===!0||e.getColDef().showRowGroup===t.field);if(r&&a.filterValueGetter?c=this.executeFilterValueGetter(a.filterValueGetter,u,e,t):this.isTreeData&&f?c=t.aggData[l]:this.isTreeData&&a.valueGetter?c=this.executeValueGetter(a.valueGetter,u,e,t):this.isTreeData&&s&&u?c=Jn(u,s,e.isFieldContainsDots()):d?c=t.groupData[l]:f?c=t.aggData[l]:a.valueGetter?c=this.executeValueGetter(a.valueGetter,u,e,t):S?c=Jn(u,t.field,e.isFieldContainsDots()):s&&u&&!y&&(c=Jn(u,s,e.isFieldContainsDots())),this.cellExpressions&&typeof c=="string"&&c.indexOf("=")===0){var w=c.substring(1);c=this.executeValueGetter(w,u,e,t)}if(c==null){var E=this.getOpenedGroup(t,e);if(E!=null)return E}return c}},i.prototype.getOpenedGroup=function(e,t){if(this.gridOptionsService.is("showOpenedGroup")){var r=t.getColDef();if(r.showRowGroup)for(var o=t.getColDef().showRowGroup,a=e.parent;a!=null;){if(a.rowGroupColumn&&(o===!0||o===a.rowGroupColumn.getColId()))return a.key;a=a.parent}}},i.prototype.setValue=function(e,t,r,o){var a=this.columnModel.getPrimaryColumn(t);if(!e||!a)return!1;vt(e.data)&&(e.data={});var s=a.getColDef(),l=s.field,u=s.valueSetter;if(vt(l)&&vt(u))return console.warn("AG Grid: you need either field or valueSetter set on colDef for editing to work"),!1;if(!this.dataTypeService.checkType(a,r))return console.warn("AG Grid: Data type of the new value does not match the cell data type of the column"),!1;var c={node:e,data:e.data,oldValue:this.getValue(a,e),newValue:r,colDef:a.getColDef(),column:a,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context};c.newValue=r;var d;if(ue(u)?typeof u=="function"?d=u(c):d=this.expressionService.evaluate(u,c):d=this.setValueUsingField(e.data,l,r,a.isFieldContainsDots()),d===void 0&&(d=!0),!d)return!1;e.resetQuickFilterAggregateText(),this.valueCache.onDataChanged(),c.newValue=this.getValue(a,e);var f={type:b.EVENT_CELL_VALUE_CHANGED,event:null,rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:c.column,api:c.api,columnApi:c.columnApi,colDef:c.colDef,context:c.context,data:e.data,node:e,oldValue:c.oldValue,newValue:c.newValue,value:c.newValue,source:o};return this.eventService.dispatchEvent(f),!0},i.prototype.callColumnCellValueChangedHandler=function(e){var t=e.colDef.onCellValueChanged;typeof t=="function"&&t({node:e.node,data:e.data,oldValue:e.oldValue,newValue:e.newValue,colDef:e.colDef,column:e.column,api:e.api,columnApi:e.columnApi,context:e.context})},i.prototype.setValueUsingField=function(e,t,r,o){if(!t)return!1;var a=!1;if(!o)a=e[t]===r,a||(e[t]=r);else for(var s=t.split("."),l=e;s.length>0&&l;){var u=s.shift();s.length===0?(a=l[u]===r,a||(l[u]=r)):l=l[u]}return!a},i.prototype.executeFilterValueGetter=function(e,t,r,o){var a={data:t,node:o,column:r,colDef:r.getColDef(),api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context,getValue:this.getValueCallback.bind(this,o)};return typeof e=="function"?e(a):this.expressionService.evaluate(e,a)},i.prototype.executeValueGetter=function(e,t,r,o){var a=r.getColId(),s=this.valueCache.getValue(o,a);if(s!==void 0)return s;var l={data:t,node:o,column:r,colDef:r.getColDef(),api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context,getValue:this.getValueCallback.bind(this,o)},u;return typeof e=="function"?u=e(l):u=this.expressionService.evaluate(e,l),this.valueCache.setValue(o,a,u),u},i.prototype.getValueCallback=function(e,t){var r=this.columnModel.getPrimaryColumn(t);return r?this.getValue(r,e):null},i.prototype.getKeyForNode=function(e,t){var r=this.getValue(e,t),o=e.getColDef().keyCreator,a=r;if(o){var s={value:r,colDef:e.getColDef(),column:e,node:t,data:t.data,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context};a=o(s)}return typeof a=="string"||a==null||(a=String(a),a==="[object Object]"&&Ut(function(){console.warn("AG Grid: a column you are grouping or pivoting by has objects as values. If you want to group by complex objects then either a) use a colDef.keyCreator (se AG Grid docs) or b) to toString() on the object to return a key")},"getKeyForNode - warn about [object,object]")),a},Bn([T("expressionService")],i.prototype,"expressionService",void 0),Bn([T("columnModel")],i.prototype,"columnModel",void 0),Bn([T("valueCache")],i.prototype,"valueCache",void 0),Bn([T("dataTypeService")],i.prototype,"dataTypeService",void 0),Bn([Oe],i.prototype,"init",null),i=Bn([Ue("valueService")],i),i}(ve),v_=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),ff=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},g_=function(n,i){return function(e,t){i(e,t,n)}},y_=function(n){v_(i,n);function i(){var e=n!==null&&n.apply(this,arguments)||this;return e.expressionToFunctionCache={},e}return i.prototype.setBeans=function(e){this.logger=e.create("ExpressionService")},i.prototype.evaluate=function(e,t){if(typeof e=="string")return this.evaluateExpression(e,t);console.error("AG Grid: value should be either a string or a function",e)},i.prototype.evaluateExpression=function(e,t){try{var r=this.createExpressionFunction(e),o=r(t.value,t.context,t.oldValue,t.newValue,t.value,t.node,t.data,t.colDef,t.rowIndex,t.api,t.columnApi,t.getValue,t.column,t.columnGroup);return o}catch(a){return console.log("Processing of the expression failed"),console.log("Expression = "+e),console.log("Params =",t),console.log("Exception = "+a),null}},i.prototype.createExpressionFunction=function(e){if(this.expressionToFunctionCache[e])return this.expressionToFunctionCache[e];var t=this.createFunctionBody(e),r=new Function("x, ctx, oldValue, newValue, value, node, data, colDef, rowIndex, api, columnApi, getValue, column, columnGroup",t);return this.expressionToFunctionCache[e]=r,r},i.prototype.createFunctionBody=function(e){return e.indexOf("return")>=0?e:"return "+e+";"},ff([g_(0,er("loggerFactory"))],i.prototype,"setBeans",null),i=ff([Ue("expressionService")],i),i}(ve),m_=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),C_=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},S_=function(n){m_(i,n);function i(){var e=n!==null&&n.apply(this,arguments)||this;return e.templateCache={},e.waitingCallbacks={},e}return i.prototype.getTemplate=function(e,t){var r=this.templateCache[e];if(r)return r;var o=this.waitingCallbacks[e],a=this;if(!o){o=[],this.waitingCallbacks[e]=o;var s=new XMLHttpRequest;s.onload=function(){a.handleHttpResult(this,e)},s.open("GET",e),s.send()}return t&&o.push(t),null},i.prototype.handleHttpResult=function(e,t){if(e.status!==200||e.response===null){console.warn("AG Grid: Unable to get template error "+e.status+" - "+t);return}this.templateCache[t]=e.response||e.responseText;for(var r=this.waitingCallbacks[t],o=0;o<r.length;o++){var a=r[o];a()}},i=C_([Ue("templateService")],i),i}(ve),w_=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),hf=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},T_=function(n,i){return function(e,t){i(e,t,n)}},O_=function(n){w_(i,n);function i(){return n!==null&&n.apply(this,arguments)||this}return i.prototype.setBeans=function(e){this.logging=e.is("debug")},i.prototype.create=function(e){return new Qc(e,this.isLogging.bind(this))},i.prototype.isLogging=function(){return this.logging},hf([T_(0,er("gridOptionsService"))],i.prototype,"setBeans",null),i=hf([Ue("loggerFactory")],i),i}(ve),Qc=function(){function n(i,e){this.name=i,this.isLoggingFunc=e}return n.prototype.isLogging=function(){return this.isLoggingFunc()},n.prototype.log=function(i){this.isLoggingFunc()&&console.log("AG Grid."+this.name+": "+i)},n}(),P_=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Hn=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},E_=function(n){P_(i,n);function i(){return n!==null&&n.apply(this,arguments)||this}return i.prototype.setComp=function(e,t,r){var o=this;this.view=e,this.eGridHostDiv=t,this.eGui=r,this.eGui.setAttribute("grid-id",this.context.getGridId()),this.dragAndDropService.addDropTarget({getContainer:function(){return o.eGui},isInterestedIn:function(s){return s===nr.HeaderCell||s===nr.ToolPanel},getIconName:function(){return zi.ICON_NOT_ALLOWED}}),this.mouseEventService.stampTopLevelGridCompWithGridInstance(t),this.createManagedBean(new Ld(this.view)),this.addRtlSupport(),this.addManagedListener(this,b.EVENT_KEYBOARD_FOCUS,function(){o.view.addOrRemoveKeyboardFocusClass(!0)}),this.addManagedListener(this,b.EVENT_MOUSE_FOCUS,function(){o.view.addOrRemoveKeyboardFocusClass(!1)});var a=this.resizeObserverService.observeResize(this.eGridHostDiv,this.onGridSizeChanged.bind(this));this.addDestroyFunc(function(){return a()}),this.ctrlsService.registerGridCtrl(this)},i.prototype.isDetailGrid=function(){var e,t=this.focusService.findTabbableParent(this.getGui());return((e=t?.getAttribute("row-id"))===null||e===void 0?void 0:e.startsWith("detail"))||!1},i.prototype.showDropZones=function(){return gt.__isRegistered(je.RowGroupingModule,this.context.getGridId())},i.prototype.showSideBar=function(){return gt.__isRegistered(je.SideBarModule,this.context.getGridId())},i.prototype.showStatusBar=function(){return gt.__isRegistered(je.StatusBarModule,this.context.getGridId())},i.prototype.showWatermark=function(){return gt.__isRegistered(je.EnterpriseCoreModule,this.context.getGridId())},i.prototype.onGridSizeChanged=function(){var e={type:b.EVENT_GRID_SIZE_CHANGED,clientWidth:this.eGridHostDiv.clientWidth,clientHeight:this.eGridHostDiv.clientHeight};this.eventService.dispatchEvent(e)},i.prototype.addRtlSupport=function(){var e=this.gridOptionsService.is("enableRtl")?"ag-rtl":"ag-ltr";this.view.setRtlClass(e)},i.prototype.destroyGridUi=function(){this.view.destroyGridUi()},i.prototype.getGui=function(){return this.eGui},i.prototype.setResizeCursor=function(e){this.view.setCursor(e?"ew-resize":null)},i.prototype.disableUserSelect=function(e){this.view.setUserSelect(e?"none":null)},i.prototype.focusNextInnerContainer=function(e){var t=this.gridOptionsService.getDocument(),r=this.view.getFocusableContainers(),o=r.findIndex(function(s){return s.contains(t.activeElement)}),a=o+(e?-1:1);return a<=0||a>=r.length?!1:this.focusService.focusInto(r[a])},i.prototype.focusInnerElement=function(e){var t=this.view.getFocusableContainers(),r=this.columnModel.getAllDisplayedColumns();if(e){if(t.length>1)return this.focusService.focusInto(ai(t),!0);var o=ai(r);if(this.focusService.focusGridView(o,!0))return!0}return this.gridOptionsService.getNum("headerHeight")===0?this.focusService.focusGridView(r[0]):this.focusService.focusFirstHeader()},i.prototype.forceFocusOutOfContainer=function(e){e===void 0&&(e=!1),this.view.forceFocusOutOfContainer(e)},Hn([T("focusService")],i.prototype,"focusService",void 0),Hn([T("resizeObserverService")],i.prototype,"resizeObserverService",void 0),Hn([T("columnModel")],i.prototype,"columnModel",void 0),Hn([T("ctrlsService")],i.prototype,"ctrlsService",void 0),Hn([T("mouseEventService")],i.prototype,"mouseEventService",void 0),Hn([T("dragAndDropService")],i.prototype,"dragAndDropService",void 0),i}(ve),__=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Wa=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},b_=function(n){__(i,n);function i(e){var t=n.call(this)||this;return t.eGridDiv=e,t}return i.prototype.postConstruct=function(){var e=this;this.logger=this.loggerFactory.create("GridComp");var t={destroyGridUi:function(){return e.destroyBean(e)},setRtlClass:function(o){return e.addCssClass(o)},addOrRemoveKeyboardFocusClass:function(o){return e.addOrRemoveCssClass(ta.AG_KEYBOARD_FOCUS,o)},forceFocusOutOfContainer:this.forceFocusOutOfContainer.bind(this),updateLayoutClasses:this.updateLayoutClasses.bind(this),getFocusableContainers:this.getFocusableContainers.bind(this),setUserSelect:function(o){e.getGui().style.userSelect=o??"",e.getGui().style.webkitUserSelect=o??""},setCursor:function(o){e.getGui().style.cursor=o??""}};this.ctrl=this.createManagedBean(new E_);var r=this.createTemplate();this.setTemplate(r),this.ctrl.setComp(t,this.eGridDiv,this.getGui()),this.insertGridIntoDom(),this.initialiseTabGuard({onTabKeyDown:function(){},focusInnerElement:function(o){return e.ctrl.focusInnerElement(o)}})},i.prototype.insertGridIntoDom=function(){var e=this,t=this.getGui();this.eGridDiv.appendChild(t),this.addDestroyFunc(function(){e.eGridDiv.removeChild(t),e.logger.log("Grid removed from DOM")})},i.prototype.updateLayoutClasses=function(e,t){var r=this.eRootWrapperBody.classList;r.toggle(Fi.AUTO_HEIGHT,t.autoHeight),r.toggle(Fi.NORMAL,t.normal),r.toggle(Fi.PRINT,t.print),this.addOrRemoveCssClass(Fi.AUTO_HEIGHT,t.autoHeight),this.addOrRemoveCssClass(Fi.NORMAL,t.normal),this.addOrRemoveCssClass(Fi.PRINT,t.print)},i.prototype.createTemplate=function(){var e=this.ctrl.showDropZones()?"<ag-grid-header-drop-zones></ag-grid-header-drop-zones>":"",t=this.ctrl.showSideBar()?'<ag-side-bar ref="sideBar"></ag-side-bar>':"",r=this.ctrl.showStatusBar()?'<ag-status-bar ref="statusBar"></ag-status-bar>':"",o=this.ctrl.showWatermark()?"<ag-watermark></ag-watermark>":"",a=`<div class="ag-root-wrapper" role="presentation">
                `+e+`
                <div class="ag-root-wrapper-body" ref="rootWrapperBody" role="presentation">
                    <ag-grid-body ref="gridBody"></ag-grid-body>
                    `+t+`
                </div>
                `+r+`
                <ag-pagination></ag-pagination>
                `+o+`
            </div>`;return a},i.prototype.getFocusableElement=function(){return this.eRootWrapperBody},i.prototype.getFocusableContainers=function(){var e=[this.gridBodyComp.getGui()];return this.sideBarComp&&e.push(this.sideBarComp.getGui()),e.filter(function(t){return tn(t)})},Wa([T("loggerFactory")],i.prototype,"loggerFactory",void 0),Wa([be("gridBody")],i.prototype,"gridBodyComp",void 0),Wa([be("sideBar")],i.prototype,"sideBarComp",void 0),Wa([be("rootWrapperBody")],i.prototype,"eRootWrapperBody",void 0),Wa([Oe],i.prototype,"postConstruct",null),i}(Xl),D_=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),vf=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},Bo=function(n,i){var e=typeof Symbol=="function"&&n[Symbol.iterator];if(!e)return n;var t=e.call(n),r,o=[],a;try{for(;(i===void 0||i-- >0)&&!(r=t.next()).done;)o.push(r.value)}catch(s){a={error:s}}finally{try{r&&!r.done&&(e=t.return)&&e.call(t)}finally{if(a)throw a.error}}return o},Wn=function(n,i){for(var e=0,t=i.length,r=n.length;e<t;e++,r++)n[r]=i[e];return n},R_=function(n){D_(i,n);function i(){return n!==null&&n.apply(this,arguments)||this}e=i,i.prototype.progressSort=function(t,r,o){var a=this.getNextSortDirection(t);this.setSortForColumn(t,a,r,o)},i.prototype.setSortForColumn=function(t,r,o,a){r!=="asc"&&r!=="desc"&&(r=null);var s=this.gridOptionsService.isColumnsSortingCoupledToGroup(),l=[t];if(s&&t.getColDef().showRowGroup){var u=this.columnModel.getSourceColumnsForGroupColumn(t),c=u?.filter(function(f){return f.getColDef().sortable});c&&(l=Wn([t],Bo(c)))}l.forEach(function(f){return f.setSort(r,a)});var d=(o||this.gridOptionsService.is("alwaysMultiSort"))&&!this.gridOptionsService.is("suppressMultiSort");d||this.clearSortBarTheseColumns(l,a),this.updateSortIndex(t),this.dispatchSortChangedEvents(a)},i.prototype.updateSortIndex=function(t){var r=this.gridOptionsService.isColumnsSortingCoupledToGroup(),o=this.columnModel.getGroupDisplayColumnForGroup(t.getId()),a=r&&o||t,s=this.getColumnsWithSortingOrdered();this.columnModel.getPrimaryAndSecondaryAndAutoColumns().forEach(function(c){return c.setSortIndex(null)});var l=s.filter(function(c){return c!==a}),u=a.getSort()?Wn(Wn([],Bo(l)),[a]):l;u.forEach(function(c,d){return c.setSortIndex(d)})},i.prototype.onSortChanged=function(t){this.dispatchSortChangedEvents(t)},i.prototype.isSortActive=function(){var t=this.columnModel.getPrimaryAndSecondaryAndAutoColumns(),r=t.filter(function(o){return!!o.getSort()});return r&&r.length>0},i.prototype.dispatchSortChangedEvents=function(t){var r={type:b.EVENT_SORT_CHANGED,source:t};this.eventService.dispatchEvent(r)},i.prototype.clearSortBarTheseColumns=function(t,r){this.columnModel.getPrimaryAndSecondaryAndAutoColumns().forEach(function(o){t.includes(o)||o.setSort(void 0,r)})},i.prototype.getNextSortDirection=function(t){var r;if(t.getColDef().sortingOrder?r=t.getColDef().sortingOrder:this.gridOptionsService.get("sortingOrder")?r=this.gridOptionsService.get("sortingOrder"):r=e.DEFAULT_SORTING_ORDER,!Array.isArray(r)||r.length<=0)return console.warn("AG Grid: sortingOrder must be an array with at least one element, currently it's "+r),null;var o=r.indexOf(t.getSort()),a=o<0,s=o==r.length-1,l;return a||s?l=r[0]:l=r[o+1],e.DEFAULT_SORTING_ORDER.indexOf(l)<0?(console.warn("AG Grid: invalid sort type "+l),null):l},i.prototype.getIndexedSortMap=function(){var t=this,r=this.columnModel.getPrimaryAndSecondaryAndAutoColumns().filter(function(c){return!!c.getSort()});if(this.columnModel.isPivotMode()){var o=this.gridOptionsService.isColumnsSortingCoupledToGroup();r=r.filter(function(c){var d=!!c.getAggFunc(),f=!c.isPrimary(),y=o?t.columnModel.getGroupDisplayColumnForGroup(c.getId()):c.getColDef().showRowGroup;return d||f||y})}var a=this.columnModel.getRowGroupColumns().filter(function(c){return!!c.getSort()}),s=this.gridOptionsService.isColumnsSortingCoupledToGroup()&&!!a.length;s&&(r=Wn([],Bo(new Set(r.map(function(c){var d;return(d=t.columnModel.getGroupDisplayColumnForGroup(c.getId()))!==null&&d!==void 0?d:c})))));var l={};r.forEach(function(c,d){return l[c.getId()]=d}),r.sort(function(c,d){var f=c.getSortIndex(),y=d.getSortIndex();if(f!=null&&y!=null)return f-y;if(f==null&&y==null){var S=l[c.getId()],w=l[d.getId()];return S>w?1:-1}else return y==null?-1:1});var u=new Map;return r.forEach(function(c,d){return u.set(c,d)}),s&&a.forEach(function(c){var d=t.columnModel.getGroupDisplayColumnForGroup(c.getId());u.set(c,u.get(d))}),u},i.prototype.getColumnsWithSortingOrdered=function(){return Wn([],Bo(this.getIndexedSortMap().entries())).sort(function(t,r){var o=Bo(t,2);o[0];var a=o[1],s=Bo(r,2);s[0];var l=s[1];return a-l}).map(function(t){var r=Bo(t,1),o=r[0];return o})},i.prototype.getSortModel=function(){return this.getColumnsWithSortingOrdered().filter(function(t){return t.getSort()}).map(function(t){return{sort:t.getSort(),colId:t.getId()}})},i.prototype.getSortOptions=function(){return this.getColumnsWithSortingOrdered().filter(function(t){return t.getSort()}).map(function(t){return{sort:t.getSort(),column:t}})},i.prototype.canColumnDisplayMixedSort=function(t){var r=this.gridOptionsService.isColumnsSortingCoupledToGroup(),o=!!t.getColDef().showRowGroup;return r&&o},i.prototype.getDisplaySortForColumn=function(t){var r=this.columnModel.getSourceColumnsForGroupColumn(t);if(!this.canColumnDisplayMixedSort(t)||!r?.length)return t.getSort();var o=t.getColDef().field!=null||!!t.getColDef().valueGetter,a=o?Wn([t],Bo(r)):r,s=a[0].getSort(),l=a.every(function(u){return u.getSort()==s});return l?s:"mixed"},i.prototype.getDisplaySortIndexForColumn=function(t){return this.getIndexedSortMap().get(t)};var e;return i.DEFAULT_SORTING_ORDER=["asc","desc",null],vf([T("columnModel")],i.prototype,"columnModel",void 0),i=e=vf([Ue("sortController")],i),i}(ve),x_=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),A_=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},L_=function(n){x_(i,n);function i(){return n!==null&&n.apply(this,arguments)||this}return i.prototype.setMouseOver=function(e){this.selectedColumns=e;var t={type:b.EVENT_COLUMN_HOVER_CHANGED};this.eventService.dispatchEvent(t)},i.prototype.clearMouseOver=function(){this.selectedColumns=null;var e={type:b.EVENT_COLUMN_HOVER_CHANGED};this.eventService.dispatchEvent(e)},i.prototype.isHovered=function(e){return!!this.selectedColumns&&this.selectedColumns.indexOf(e)>=0},i=A_([Ue("columnHoverService")],i),i}(ve),M_=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),oc=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},N_=function(n){M_(i,n);function i(){var e=n!==null&&n.apply(this,arguments)||this;return e.executeNextFuncs=[],e.executeLaterFuncs=[],e.active=!1,e.animationThreadCount=0,e}return i.prototype.postConstruct=function(){var e=this;this.ctrlsService.whenReady(function(t){return e.gridBodyCtrl=t.gridBodyCtrl})},i.prototype.isActive=function(){return this.active},i.prototype.start=function(){this.active||this.gridOptionsService.is("suppressColumnMoveAnimation")||this.gridOptionsService.is("enableRtl")||(this.ensureAnimationCssClassPresent(),this.active=!0)},i.prototype.finish=function(){this.active&&(this.flush(),this.active=!1)},i.prototype.executeNextVMTurn=function(e){this.active?this.executeNextFuncs.push(e):e()},i.prototype.executeLaterVMTurn=function(e){this.active?this.executeLaterFuncs.push(e):e()},i.prototype.ensureAnimationCssClassPresent=function(){var e=this;this.animationThreadCount++;var t=this.animationThreadCount;this.gridBodyCtrl.setColumnMovingCss(!0),this.executeLaterFuncs.push(function(){e.animationThreadCount===t&&e.gridBodyCtrl.setColumnMovingCss(!1)})},i.prototype.flush=function(){var e=this.executeNextFuncs;this.executeNextFuncs=[];var t=this.executeLaterFuncs;this.executeLaterFuncs=[],!(e.length===0&&t.length===0)&&(window.setTimeout(function(){return e.forEach(function(r){return r()})},0),window.setTimeout(function(){return t.forEach(function(r){return r()})},300))},oc([T("ctrlsService")],i.prototype,"ctrlsService",void 0),oc([Oe],i.prototype,"postConstruct",null),i=oc([Ue("columnAnimationService")],i),i}(ve),F_=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),nc=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},I_=function(n){F_(i,n);function i(){return n!==null&&n.apply(this,arguments)||this}return i.prototype.postConstruct=function(){var e=this;this.ctrlsService.whenReady(function(t){e.centerRowContainerCon=t.centerRowContainerCtrl,e.addManagedListener(e.eventService,b.EVENT_BODY_HEIGHT_CHANGED,e.checkPageSize.bind(e)),e.addManagedListener(e.eventService,b.EVENT_SCROLL_VISIBILITY_CHANGED,e.checkPageSize.bind(e)),e.checkPageSize()})},i.prototype.notActive=function(){return!this.gridOptionsService.is("paginationAutoPageSize")||this.centerRowContainerCon==null},i.prototype.checkPageSize=function(){var e=this;if(!this.notActive()){var t=this.centerRowContainerCon.getViewportSizeFeature().getBodyHeight();if(t>0){var r=function(){var o=e.gridOptionsService.getRowHeightAsNumber(),a=Math.floor(t/o);e.gridOptionsService.set("paginationPageSize",a)};this.isBodyRendered?zr(function(){return r()},50)():(r(),this.isBodyRendered=!0)}else this.isBodyRendered=!1}},nc([T("ctrlsService")],i.prototype,"ctrlsService",void 0),nc([Oe],i.prototype,"postConstruct",null),i=nc([Ue("paginationAutoPageSizeService")],i),i}(ve),k_=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),gf=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},G_=function(n){k_(i,n);function i(){var e=n!==null&&n.apply(this,arguments)||this;return e.cacheVersion=0,e}return i.prototype.init=function(){this.active=this.gridOptionsService.is("valueCache"),this.neverExpires=this.gridOptionsService.is("valueCacheNeverExpires")},i.prototype.onDataChanged=function(){this.neverExpires||this.expire()},i.prototype.expire=function(){this.cacheVersion++},i.prototype.setValue=function(e,t,r){this.active&&(e.__cacheVersion!==this.cacheVersion&&(e.__cacheVersion=this.cacheVersion,e.__cacheData={}),e.__cacheData[t]=r)},i.prototype.getValue=function(e,t){if(!(!this.active||e.__cacheVersion!==this.cacheVersion))return e.__cacheData[t]},gf([Oe],i.prototype,"init",null),i=gf([Ue("valueCache")],i),i}(ve),V_=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Zs=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},B_="paste",H_=function(n){V_(i,n);function i(){return n!==null&&n.apply(this,arguments)||this}return i.prototype.init=function(){this.rowModel.getType()==="clientSide"&&(this.clientSideRowModel=this.rowModel),this.addManagedListener(this.eventService,b.EVENT_CELL_VALUE_CHANGED,this.onCellValueChanged.bind(this))},i.prototype.onCellValueChanged=function(e){e.source!==B_&&this.doChangeDetection(e.node,e.column)},i.prototype.doChangeDetection=function(e,t){if(!this.gridOptionsService.is("suppressChangeDetection")){var r=[e];if(this.clientSideRowModel&&!e.isRowPinned()){var o=this.gridOptionsService.is("aggregateOnlyChangedColumns"),a=new kd(o,this.clientSideRowModel.getRootNode());a.addParentNode(e.parent,[t]),this.clientSideRowModel.doAggregate(a),a.forEachChangedNodeDepthFirst(function(s){r.push(s)})}this.rowRenderer.refreshCells({rowNodes:r})}},Zs([T("rowModel")],i.prototype,"rowModel",void 0),Zs([T("rowRenderer")],i.prototype,"rowRenderer",void 0),Zs([Oe],i.prototype,"init",null),i=Zs([Ue("changeDetectionService")],i),i}(ve),W_=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),yf=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},U_=function(n){W_(i,n);function i(){return n!==null&&n.apply(this,arguments)||this}return i.prototype.adaptFunction=function(e,t){var r=this.componentMetadataProvider.retrieve(e);return r&&r.functionAdapter?r.functionAdapter(t):null},i.prototype.adaptCellRendererFunction=function(e){var t=function(){function r(){}return r.prototype.refresh=function(o){return!1},r.prototype.getGui=function(){return this.eGui},r.prototype.init=function(o){var a=e(o),s=typeof a;if(s==="string"||s==="number"||s==="boolean"){this.eGui=Ji("<span>"+a+"</span>");return}if(a==null){this.eGui=Ji("<span></span>");return}this.eGui=a},r}();return t},i.prototype.doesImplementIComponent=function(e){return e?e.prototype&&"getGui"in e.prototype:!1},yf([T("componentMetadataProvider")],i.prototype,"componentMetadataProvider",void 0),i=yf([Ue("agComponentUtils")],i),i}(ve),j_=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),ac=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},z_=function(n){j_(i,n);function i(){return n!==null&&n.apply(this,arguments)||this}return i.prototype.postConstruct=function(){this.componentMetaData={dateComponent:{mandatoryMethodList:["getDate","setDate"],optionalMethodList:["afterGuiAttached","setInputPlaceholder","setInputAriaLabel"]},detailCellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},headerComponent:{mandatoryMethodList:[],optionalMethodList:["refresh"]},headerGroupComponent:{mandatoryMethodList:[],optionalMethodList:[]},loadingCellRenderer:{mandatoryMethodList:[],optionalMethodList:[]},loadingOverlayComponent:{mandatoryMethodList:[],optionalMethodList:[]},noRowsOverlayComponent:{mandatoryMethodList:[],optionalMethodList:[]},floatingFilterComponent:{mandatoryMethodList:["onParentModelChanged"],optionalMethodList:["afterGuiAttached"]},floatingFilterWrapperComponent:{mandatoryMethodList:[],optionalMethodList:[]},cellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh","afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},cellEditor:{mandatoryMethodList:["getValue"],optionalMethodList:["isPopup","isCancelBeforeStart","isCancelAfterEnd","getPopupPosition","focusIn","focusOut","afterGuiAttached"]},innerRenderer:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},fullWidthCellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh","afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},groupRowRenderer:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},filter:{mandatoryMethodList:["isFilterActive","doesFilterPass","getModel","setModel"],optionalMethodList:["afterGuiAttached","afterGuiDetached","onNewRowsLoaded","getModelAsString","onFloatingFilterChanged","onAnyFilterChanged"]},filterComponent:{mandatoryMethodList:["isFilterActive","doesFilterPass","getModel","setModel"],optionalMethodList:["afterGuiAttached","afterGuiDetached","onNewRowsLoaded","getModelAsString","onFloatingFilterChanged","onAnyFilterChanged"]},statusPanel:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"]},toolPanel:{mandatoryMethodList:[],optionalMethodList:["refresh","afterGuiAttached"]},tooltipComponent:{mandatoryMethodList:[],optionalMethodList:[]}}},i.prototype.retrieve=function(e){return this.componentMetaData[e]},ac([T("agComponentUtils")],i.prototype,"agComponentUtils",void 0),ac([Oe],i.prototype,"postConstruct",null),i=ac([Ue("componentMetadataProvider")],i),i}(ve),Y_=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),sc=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},K_=function(n,i){var e=typeof Symbol=="function"&&n[Symbol.iterator];if(!e)return n;var t=e.call(n),r,o=[],a;try{for(;(i===void 0||i-- >0)&&!(r=t.next()).done;)o.push(r.value)}catch(s){a={error:s}}finally{try{r&&!r.done&&(e=t.return)&&e.call(t)}finally{if(a)throw a.error}}return o},Q_=function(n,i){for(var e=0,t=i.length,r=n.length;e<t;e++,r++)n[r]=i[e];return n},q_=25,mf=10,lc=8,X_=4,uc=4,cc=6,J_={"ag-theme-custom":{headerHeight:25,headerCellMinWidth:24,listItemHeight:X_*5,rowHeight:25,chartMenuPanelWidth:220},"ag-theme-material":{headerHeight:lc*7,headerCellMinWidth:48,listItemHeight:lc*4,rowHeight:lc*6,chartMenuPanelWidth:240},"ag-theme-balham":{headerHeight:uc*8,headerCellMinWidth:24,listItemHeight:uc*6,rowHeight:uc*7,chartMenuPanelWidth:220},"ag-theme-alpine":{headerHeight:cc*8,headerCellMinWidth:36,listItemHeight:cc*4,rowHeight:cc*7,chartMenuPanelWidth:240}},Cf={headerHeight:["ag-header-row"],headerCellMinWidth:["ag-header-cell"],listItemHeight:["ag-virtual-list-item"],rowHeight:["ag-row"],chartMenuPanelWidth:["ag-chart-docked-container"]},Z_=function(n){Y_(i,n);function i(){var e=n!==null&&n.apply(this,arguments)||this;return e.calculatedSizes={},e}return i.prototype.postConstruct=function(){var e=this,t,r=(t=this.getTheme().el)!==null&&t!==void 0?t:this.eGridDiv;this.mutationObserver=new MutationObserver(function(){e.calculatedSizes={},e.fireGridStylesChangedEvent()}),this.mutationObserver.observe(r||this.eGridDiv,{attributes:!0,attributeFilter:["class"]})},i.prototype.fireGridStylesChangedEvent=function(){var e={type:b.EVENT_GRID_STYLES_CHANGED};this.eventService.dispatchEvent(e)},i.prototype.getSassVariable=function(e){var t=this.getTheme(),r=t.themeFamily,o=t.el;if(!(!r||r.indexOf("ag-theme")!==0)){this.calculatedSizes||(this.calculatedSizes={}),this.calculatedSizes[r]||(this.calculatedSizes[r]={});var a=this.calculatedSizes[r][e];return a??(this.calculatedSizes[r][e]=this.calculateValueForSassProperty(e,r,o),this.calculatedSizes[r][e])}},i.prototype.calculateValueForSassProperty=function(e,t,r){var o,a="ag-theme-"+(t.match("material")?"material":t.match("balham")?"balham":t.match("alpine")?"alpine":"custom"),s=J_[a][e],l=this.gridOptionsService.getDocument();if(r||(r=this.eGridDiv),!Cf[e])return s;var u=Cf[e],c=l.createElement("div"),d=Array.from(r.classList);(o=c.classList).add.apply(o,Q_([t],K_(d))),c.style.position="absolute";var f=u.reduce(function(w,E){var _=l.createElement("div");return _.style.position="static",_.classList.add(E),w.appendChild(_),_},c),y=0;if(l.body){l.body.appendChild(c);var S=e.toLowerCase().indexOf("height")!==-1?"height":"width";y=parseInt(window.getComputedStyle(f)[S],10),l.body.removeChild(c)}return y||s},i.prototype.isThemeDark=function(){var e=this.getTheme().theme;return!!e&&e.indexOf("dark")>=0},i.prototype.chartMenuPanelWidth=function(){return this.getSassVariable("chartMenuPanelWidth")},i.prototype.getTheme=function(){for(var e=/\bag-(material|(?:theme-([\w\-]*)))\b/g,t=this.eGridDiv,r=null,o=[];t;)if(r=e.exec(t.className),!r)t=t.parentElement||void 0;else{var a=t.className.match(e);a&&(o=a);break}if(!r)return{allThemes:o};var s=r[0];return{theme:s,el:t,themeFamily:s.replace(/-dark$/,""),allThemes:o}},i.prototype.getFromTheme=function(e,t){var r;return(r=this.getSassVariable(t))!==null&&r!==void 0?r:e},i.prototype.getDefaultRowHeight=function(){return this.getFromTheme(q_,"rowHeight")},i.prototype.getListItemHeight=function(){return this.getFromTheme(20,"listItemHeight")},i.prototype.refreshRowHeightVariable=function(){var e=this.eGridDiv.style.getPropertyValue("--ag-line-height").trim(),t=this.gridOptionsService.getNum("rowHeight");if(t==null||isNaN(t)||!isFinite(t))return-1;var r=t+"px";return e!=r?(this.eGridDiv.style.setProperty("--ag-line-height",r),t):e!=""?parseFloat(e):-1},i.prototype.getMinColWidth=function(){var e=this.getFromTheme(null,"headerCellMinWidth");return ue(e)?Math.max(e,mf):mf},i.prototype.destroy=function(){this.calculatedSizes=null,this.mutationObserver&&this.mutationObserver.disconnect(),n.prototype.destroy.call(this)},sc([T("eGridDiv")],i.prototype,"eGridDiv",void 0),sc([Oe],i.prototype,"postConstruct",null),i=sc([Ue("environment")],i),i}(ve),$_=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),$s=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},eb=function(n,i){return function(e,t){i(e,t,n)}},tb=function(n){$_(i,n);function i(){var e=n!==null&&n.apply(this,arguments)||this;return e.scrollY=0,e.uiBodyHeight=0,e}return i.prototype.agWire=function(e){this.logger=e.create("RowContainerHeightService")},i.prototype.postConstruct=function(){this.addManagedListener(this.eventService,b.EVENT_BODY_HEIGHT_CHANGED,this.updateOffset.bind(this)),this.maxDivHeight=ev(),this.logger.log("maxDivHeight = "+this.maxDivHeight)},i.prototype.isStretching=function(){return this.stretching},i.prototype.getDivStretchOffset=function(){return this.divStretchOffset},i.prototype.updateOffset=function(){if(this.stretching){var e=this.ctrlsService.getGridBodyCtrl(),t=e.getScrollFeature().getVScrollPosition().top,r=this.getUiBodyHeight(),o=t!==this.scrollY||r!==this.uiBodyHeight;o&&(this.scrollY=t,this.uiBodyHeight=r,this.calculateOffset())}},i.prototype.calculateOffset=function(){this.setUiContainerHeight(this.maxDivHeight),this.pixelsToShave=this.modelHeight-this.uiContainerHeight,this.maxScrollY=this.uiContainerHeight-this.uiBodyHeight;var e=this.scrollY/this.maxScrollY,t=e*this.pixelsToShave;this.logger.log("Div Stretch Offset = "+t+" ("+this.pixelsToShave+" * "+e+")"),this.setDivStretchOffset(t)},i.prototype.setUiContainerHeight=function(e){e!==this.uiContainerHeight&&(this.uiContainerHeight=e,this.eventService.dispatchEvent({type:b.EVENT_ROW_CONTAINER_HEIGHT_CHANGED}))},i.prototype.clearOffset=function(){this.setUiContainerHeight(this.modelHeight),this.pixelsToShave=0,this.setDivStretchOffset(0)},i.prototype.setDivStretchOffset=function(e){var t=typeof e=="number"?Math.floor(e):null;this.divStretchOffset!==t&&(this.divStretchOffset=t,this.eventService.dispatchEvent({type:b.EVENT_HEIGHT_SCALE_CHANGED}))},i.prototype.setModelHeight=function(e){this.modelHeight=e,this.stretching=e!=null&&this.maxDivHeight>0&&e>this.maxDivHeight,this.stretching?this.calculateOffset():this.clearOffset()},i.prototype.getUiContainerHeight=function(){return this.uiContainerHeight},i.prototype.getRealPixelPosition=function(e){return e-this.divStretchOffset},i.prototype.getUiBodyHeight=function(){var e=this.ctrlsService.getGridBodyCtrl(),t=e.getScrollFeature().getVScrollPosition();return t.bottom-t.top},i.prototype.getScrollPositionForPixel=function(e){if(this.pixelsToShave<=0)return e;var t=this.modelHeight-this.getUiBodyHeight(),r=e/t,o=this.maxScrollY*r;return o},$s([T("ctrlsService")],i.prototype,"ctrlsService",void 0),$s([eb(0,er("loggerFactory"))],i.prototype,"agWire",null),$s([Oe],i.prototype,"postConstruct",null),i=$s([Ue("rowContainerHeightService")],i),i}(ve),ib=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Sf=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},rb=function(n){ib(i,n);function i(){return n!==null&&n.apply(this,arguments)||this}return i.prototype.init=function(){this.groupSelectsChildren=this.gridOptionsService.is("groupSelectsChildren"),this.isRowSelectableFunc=this.gridOptionsService.get("isRowSelectable")},i.prototype.updateSelectableAfterGrouping=function(e){if(this.isRowSelectableFunc){var t=function(r){return r.childrenAfterGroup};this.recurseDown(e.childrenAfterGroup,t)}},i.prototype.recurseDown=function(e,t){var r=this;e&&e.forEach(function(o){if(o.group){o.hasChildren()&&r.recurseDown(t(o),t);var a;if(r.groupSelectsChildren){var s=(t(o)||[]).find(function(l){return l.selectable===!0});a=ue(s)}else a=r.isRowSelectableFunc?r.isRowSelectableFunc(o):!1;o.setRowSelectable(a)}})},Sf([Oe],i.prototype,"init",null),i=Sf([Ue("selectableService")],i),i}(ve),ob=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),_r=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},nb=function(n){ob(i,n);function i(){var e=n.call(this)||this;return e.previousAndFirstButtonsDisabled=!1,e.nextButtonDisabled=!1,e.lastButtonDisabled=!1,e.areListenersSetup=!1,e}return i.prototype.postConstruct=function(){var e=this.gridOptionsService.is("enableRtl");this.setTemplate(this.getTemplate());var t=this,r=t.btFirst,o=t.btPrevious,a=t.btNext,s=t.btLast;this.activateTabIndex([r,o,a,s]),r.insertAdjacentElement("afterbegin",Li(e?"last":"first",this.gridOptionsService)),o.insertAdjacentElement("afterbegin",Li(e?"next":"previous",this.gridOptionsService)),a.insertAdjacentElement("afterbegin",Li(e?"previous":"next",this.gridOptionsService)),s.insertAdjacentElement("afterbegin",Li(e?"first":"last",this.gridOptionsService)),this.addManagedPropertyListener("pagination",this.onPaginationChanged.bind(this)),this.addManagedPropertyListener("suppressPaginationPanel",this.onPaginationChanged.bind(this)),this.onPaginationChanged()},i.prototype.onPaginationChanged=function(){var e=this.gridOptionsService.is("pagination"),t=e&&!this.gridOptionsService.is("suppressPaginationPanel");this.setDisplayed(t),t&&(this.setupListeners(),this.enableOrDisableButtons(),this.updateRowLabels(),this.setCurrentPageLabel(),this.setTotalLabels())},i.prototype.setupListeners=function(){var e=this;this.areListenersSetup||(this.addManagedListener(this.eventService,b.EVENT_PAGINATION_CHANGED,this.onPaginationChanged.bind(this)),[{el:this.btFirst,fn:this.onBtFirst.bind(this)},{el:this.btPrevious,fn:this.onBtPrevious.bind(this)},{el:this.btNext,fn:this.onBtNext.bind(this)},{el:this.btLast,fn:this.onBtLast.bind(this)}].forEach(function(t){var r=t.el,o=t.fn;e.addManagedListener(r,"click",o),e.addManagedListener(r,"keydown",function(a){(a.key===J.ENTER||a.key===J.SPACE)&&(a.preventDefault(),o())})}),this.areListenersSetup=!0)},i.prototype.onBtFirst=function(){this.previousAndFirstButtonsDisabled||this.paginationProxy.goToFirstPage()},i.prototype.setCurrentPageLabel=function(){var e=this.paginationProxy.getTotalPages()>0,t=this.paginationProxy.getCurrentPage(),r=e?t+1:0;this.lbCurrent.innerHTML=this.formatNumber(r)},i.prototype.formatNumber=function(e){var t=this.gridOptionsService.getCallback("paginationNumberFormatter");if(t){var r={value:e};return t(r)}var o=this.localeService.getLocaleTextFunc(),a=o("thousandSeparator",","),s=o("decimalSeparator",".");return fd(e,a,s)},i.prototype.getTemplate=function(){var e=this.localeService.getLocaleTextFunc(),t=e("page","Page"),r=e("to","to"),o=e("of","of"),a=e("firstPage","First Page"),s=e("previousPage","Previous Page"),l=e("nextPage","Next Page"),u=e("lastPage","Last Page"),c=this.getCompId();return'<div class="ag-paging-panel ag-unselectable" id="ag-'+c+`">
                <span class="ag-paging-row-summary-panel" role="status">
                    <span id="ag-`+c+`-first-row" ref="lbFirstRowOnPage" class="ag-paging-row-summary-panel-number"></span>
                    <span id="ag-`+c+'-to">'+r+`</span>
                    <span id="ag-`+c+`-last-row" ref="lbLastRowOnPage" class="ag-paging-row-summary-panel-number"></span>
                    <span id="ag-`+c+'-of">'+o+`</span>
                    <span id="ag-`+c+`-row-count" ref="lbRecordCount" class="ag-paging-row-summary-panel-number"></span>
                </span>
                <span class="ag-paging-page-summary-panel" role="presentation">
                    <div ref="btFirst" class="ag-button ag-paging-button" role="button" aria-label="`+a+`"></div>
                    <div ref="btPrevious" class="ag-button ag-paging-button" role="button" aria-label="`+s+`"></div>
                    <span class="ag-paging-description" role="status">
                        <span id="ag-`+c+'-start-page">'+t+`</span>
                        <span id="ag-`+c+`-start-page-number" ref="lbCurrent" class="ag-paging-number"></span>
                        <span id="ag-`+c+'-of-page">'+o+`</span>
                        <span id="ag-`+c+`-of-page-number" ref="lbTotal" class="ag-paging-number"></span>
                    </span>
                    <div ref="btNext" class="ag-button ag-paging-button" role="button" aria-label="`+l+`"></div>
                    <div ref="btLast" class="ag-button ag-paging-button" role="button" aria-label="`+u+`"></div>
                </span>
            </div>`},i.prototype.onBtNext=function(){this.nextButtonDisabled||this.paginationProxy.goToNextPage()},i.prototype.onBtPrevious=function(){this.previousAndFirstButtonsDisabled||this.paginationProxy.goToPreviousPage()},i.prototype.onBtLast=function(){this.lastButtonDisabled||this.paginationProxy.goToLastPage()},i.prototype.enableOrDisableButtons=function(){var e=this.paginationProxy.getCurrentPage(),t=this.paginationProxy.isLastPageFound(),r=this.paginationProxy.getTotalPages();this.previousAndFirstButtonsDisabled=e===0,this.toggleButtonDisabled(this.btFirst,this.previousAndFirstButtonsDisabled),this.toggleButtonDisabled(this.btPrevious,this.previousAndFirstButtonsDisabled);var o=this.isZeroPagesToDisplay(),a=t&&e===r-1;this.nextButtonDisabled=a||o,this.lastButtonDisabled=!t||o||e===r-1,this.toggleButtonDisabled(this.btNext,this.nextButtonDisabled),this.toggleButtonDisabled(this.btLast,this.lastButtonDisabled)},i.prototype.toggleButtonDisabled=function(e,t){od(e,t),e.classList.toggle("ag-disabled",t)},i.prototype.updateRowLabels=function(){var e=this.paginationProxy.getCurrentPage(),t=this.paginationProxy.getPageSize(),r=this.paginationProxy.isLastPageFound(),o=this.paginationProxy.isLastPageFound()?this.paginationProxy.getMasterRowCount():null,a,s;if(this.isZeroPagesToDisplay()?a=s=0:(a=t*e+1,s=a+t-1,r&&s>o&&(s=o)),this.lbFirstRowOnPage.innerHTML=this.formatNumber(a),this.rowNodeBlockLoader.isLoading()){var l=this.localeService.getLocaleTextFunc();this.lbLastRowOnPage.innerHTML=l("pageLastRowUnknown","?")}else this.lbLastRowOnPage.innerHTML=this.formatNumber(s)},i.prototype.isZeroPagesToDisplay=function(){var e=this.paginationProxy.isLastPageFound(),t=this.paginationProxy.getTotalPages();return e&&t===0},i.prototype.setTotalLabels=function(){var e=this.paginationProxy.isLastPageFound(),t=this.paginationProxy.getTotalPages(),r=e?this.paginationProxy.getMasterRowCount():null;if(r===1){var o=this.paginationProxy.getRow(0),a=o&&o.group&&!(o.groupData||o.aggData);if(a){this.setTotalLabelsToZero();return}}if(e)this.lbTotal.innerHTML=this.formatNumber(t),this.lbRecordCount.innerHTML=this.formatNumber(r);else{var s=this.localeService.getLocaleTextFunc()("more","more");this.lbTotal.innerHTML=s,this.lbRecordCount.innerHTML=s}},i.prototype.setTotalLabelsToZero=function(){this.lbFirstRowOnPage.innerHTML=this.formatNumber(0),this.lbCurrent.innerHTML=this.formatNumber(0),this.lbLastRowOnPage.innerHTML=this.formatNumber(0),this.lbTotal.innerHTML=this.formatNumber(0),this.lbRecordCount.innerHTML=this.formatNumber(0)},_r([T("paginationProxy")],i.prototype,"paginationProxy",void 0),_r([T("rowNodeBlockLoader")],i.prototype,"rowNodeBlockLoader",void 0),_r([be("btFirst")],i.prototype,"btFirst",void 0),_r([be("btPrevious")],i.prototype,"btPrevious",void 0),_r([be("btNext")],i.prototype,"btNext",void 0),_r([be("btLast")],i.prototype,"btLast",void 0),_r([be("lbRecordCount")],i.prototype,"lbRecordCount",void 0),_r([be("lbFirstRowOnPage")],i.prototype,"lbFirstRowOnPage",void 0),_r([be("lbLastRowOnPage")],i.prototype,"lbLastRowOnPage",void 0),_r([be("lbCurrent")],i.prototype,"lbCurrent",void 0),_r([be("lbTotal")],i.prototype,"lbTotal",void 0),_r([Oe],i.prototype,"postConstruct",null),i}(xt),ab=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Un=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},qn;(function(n){n[n.Loading=0]="Loading",n[n.NoRows=1]="NoRows"})(qn||(qn={}));var sb=function(n){ab(i,n);function i(){var e=n.call(this,i.TEMPLATE)||this;return e.inProgress=!1,e.destroyRequested=!1,e.manuallyDisplayed=!1,e}return i.prototype.updateLayoutClasses=function(e,t){var r=this.eOverlayWrapper.classList;r.toggle(Fi.AUTO_HEIGHT,t.autoHeight),r.toggle(Fi.NORMAL,t.normal),r.toggle(Fi.PRINT,t.print)},i.prototype.postConstruct=function(){this.createManagedBean(new Ld(this)),this.setDisplayed(!1,{skipAriaHidden:!0}),this.addManagedListener(this.eventService,b.EVENT_ROW_DATA_UPDATED,this.onRowDataUpdated.bind(this)),this.addManagedListener(this.eventService,b.EVENT_NEW_COLUMNS_LOADED,this.onNewColumnsLoaded.bind(this)),this.gridOptionsService.isRowModelType("clientSide")&&!this.gridOptionsService.get("rowData")&&this.showLoadingOverlay(),this.gridApi.registerOverlayWrapperComp(this)},i.prototype.setWrapperTypeClass=function(e){var t=this.eOverlayWrapper.classList;t.toggle("ag-overlay-loading-wrapper",e===qn.Loading),t.toggle("ag-overlay-no-rows-wrapper",e===qn.NoRows)},i.prototype.showLoadingOverlay=function(){if(!this.gridOptionsService.is("suppressLoadingOverlay")){var e={},t=this.userComponentFactory.getLoadingOverlayCompDetails(e),r=t.newAgStackInstance();this.showOverlay(r,qn.Loading)}},i.prototype.showNoRowsOverlay=function(){if(!this.gridOptionsService.is("suppressNoRowsOverlay")){var e={},t=this.userComponentFactory.getNoRowsOverlayCompDetails(e),r=t.newAgStackInstance();this.showOverlay(r,qn.NoRows)}},i.prototype.showOverlay=function(e,t){var r=this;this.inProgress||(this.setWrapperTypeClass(t),this.destroyActiveOverlay(),this.inProgress=!0,e&&e.then(function(o){r.inProgress=!1,r.eOverlayWrapper.appendChild(o.getGui()),r.activeOverlay=o,r.destroyRequested&&(r.destroyRequested=!1,r.destroyActiveOverlay())}),this.manuallyDisplayed=this.columnModel.isReady()&&!this.paginationProxy.isEmpty(),this.setDisplayed(!0,{skipAriaHidden:!0}))},i.prototype.destroyActiveOverlay=function(){if(this.inProgress){this.destroyRequested=!0;return}this.activeOverlay&&(this.activeOverlay=this.getContext().destroyBean(this.activeOverlay),tr(this.eOverlayWrapper))},i.prototype.hideOverlay=function(){this.manuallyDisplayed=!1,this.destroyActiveOverlay(),this.setDisplayed(!1,{skipAriaHidden:!0})},i.prototype.destroy=function(){this.destroyActiveOverlay(),n.prototype.destroy.call(this)},i.prototype.showOrHideOverlay=function(){var e=this.paginationProxy.isEmpty(),t=this.gridOptionsService.is("suppressNoRowsOverlay");e&&!t?this.showNoRowsOverlay():this.hideOverlay()},i.prototype.onRowDataUpdated=function(){this.showOrHideOverlay()},i.prototype.onNewColumnsLoaded=function(){this.columnModel.isReady()&&!this.paginationProxy.isEmpty()&&!this.manuallyDisplayed&&this.hideOverlay()},i.TEMPLATE=`
        <div class="ag-overlay" aria-hidden="true">
            <div class="ag-overlay-panel">
                <div class="ag-overlay-wrapper" ref="eOverlayWrapper"></div>
            </div>
        </div>`,Un([T("userComponentFactory")],i.prototype,"userComponentFactory",void 0),Un([T("paginationProxy")],i.prototype,"paginationProxy",void 0),Un([T("gridApi")],i.prototype,"gridApi",void 0),Un([T("columnModel")],i.prototype,"columnModel",void 0),Un([be("eOverlayWrapper")],i.prototype,"eOverlayWrapper",void 0),Un([Oe],i.prototype,"postConstruct",null),i}(xt),lb=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),el=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},ub=function(n){lb(i,n);function i(){return n!==null&&n.apply(this,arguments)||this}return i.prototype.getFirstRow=function(){var e=0,t;return this.pinnedRowModel.getPinnedTopRowCount()?t="top":this.rowModel.getRowCount()?(t=null,e=this.paginationProxy.getPageFirstRow()):this.pinnedRowModel.getPinnedBottomRowCount()&&(t="bottom"),t===void 0?null:{rowIndex:e,rowPinned:t}},i.prototype.getLastRow=function(){var e,t=null,r=this.pinnedRowModel.getPinnedBottomRowCount(),o=this.pinnedRowModel.getPinnedTopRowCount();return r?(t="bottom",e=r-1):this.rowModel.getRowCount()?(t=null,e=this.paginationProxy.getPageLastRow()):o&&(t="top",e=o-1),e===void 0?null:{rowIndex:e,rowPinned:t}},i.prototype.getRowNode=function(e){switch(e.rowPinned){case"top":return this.pinnedRowModel.getPinnedTopRowData()[e.rowIndex];case"bottom":return this.pinnedRowModel.getPinnedBottomRowData()[e.rowIndex];default:return this.rowModel.getRow(e.rowIndex)}},i.prototype.sameRow=function(e,t){return!e&&!t?!0:e&&!t||!e&&t?!1:e.rowIndex===t.rowIndex&&e.rowPinned==t.rowPinned},i.prototype.before=function(e,t){switch(e.rowPinned){case"top":if(t.rowPinned!=="top")return!0;break;case"bottom":if(t.rowPinned!=="bottom")return!1;break;default:if(ue(t.rowPinned))return t.rowPinned!=="top";break}return e.rowIndex<t.rowIndex},i.prototype.rowMax=function(e){var t=this,r;return e.forEach(function(o){(r===void 0||t.before(r,o))&&(r=o)}),r},i.prototype.rowMin=function(e){var t=this,r;return e.forEach(function(o){(r===void 0||t.before(o,r))&&(r=o)}),r},el([T("rowModel")],i.prototype,"rowModel",void 0),el([T("pinnedRowModel")],i.prototype,"pinnedRowModel",void 0),el([T("paginationProxy")],i.prototype,"paginationProxy",void 0),i=el([Ue("rowPositionUtils")],i),i}(ve),cb=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),db=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},pb=function(n){cb(i,n);function i(){return n!==null&&n.apply(this,arguments)||this}return i.prototype.createId=function(e){var t=e.rowIndex,r=e.rowPinned,o=e.column;return this.createIdFromValues({rowIndex:t,column:o,rowPinned:r})},i.prototype.createIdFromValues=function(e){var t=e.rowIndex,r=e.rowPinned,o=e.column;return t+"."+(r??"null")+"."+o.getId()},i.prototype.equals=function(e,t){var r=e.column===t.column,o=e.rowPinned===t.rowPinned,a=e.rowIndex===t.rowIndex;return r&&o&&a},i=db([Ue("cellPositionUtils")],i),i}(ve),fb=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Xa=function(){function n(i){this.cellValueChanges=i}return n}(),dc=function(n){fb(i,n);function i(e,t,r,o){var a=n.call(this,e)||this;return a.initialRange=t,a.finalRange=r,a.ranges=o,a}return i}(Xa),wf=function(){function n(i){this.actionStack=[],this.maxStackSize=i||n.DEFAULT_STACK_SIZE,this.actionStack=new Array(this.maxStackSize)}return n.prototype.pop=function(){return this.actionStack.pop()},n.prototype.push=function(i){var e=i.cellValueChanges&&i.cellValueChanges.length>0;e&&(this.actionStack.length===this.maxStackSize&&this.actionStack.shift(),this.actionStack.push(i))},n.prototype.clear=function(){this.actionStack=[]},n.prototype.getCurrentStackSize=function(){return this.actionStack.length},n.DEFAULT_STACK_SIZE=10,n}(),hb=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Nl=function(){return Nl=Object.assign||function(n){for(var i,e=1,t=arguments.length;e<t;e++){i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(n[r]=i[r])}return n},Nl.apply(this,arguments)},Zr=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},vb=function(n,i){var e=typeof Symbol=="function"&&n[Symbol.iterator];if(!e)return n;var t=e.call(n),r,o=[],a;try{for(;(i===void 0||i-- >0)&&!(r=t.next()).done;)o.push(r.value)}catch(s){a={error:s}}finally{try{r&&!r.done&&(e=t.return)&&e.call(t)}finally{if(a)throw a.error}}return o},gb=function(n,i){for(var e=0,t=i.length,r=n.length;e<t;e++,r++)n[r]=i[e];return n},yb=function(n){hb(i,n);function i(){var e=n!==null&&n.apply(this,arguments)||this;return e.cellValueChanges=[],e.activeCellEdit=null,e.activeRowEdit=null,e.isPasting=!1,e.isRangeInAction=!1,e.onCellValueChanged=function(t){var r={column:t.column,rowIndex:t.rowIndex,rowPinned:t.rowPinned},o=e.activeCellEdit!==null&&e.cellPositionUtils.equals(e.activeCellEdit,r),a=e.activeRowEdit!==null&&e.rowPositionUtils.sameRow(e.activeRowEdit,r),s=o||a||e.isPasting||e.isRangeInAction;if(s){var l=t.rowPinned,u=t.rowIndex,c=t.column,d=t.oldValue,f=t.value,y={rowPinned:l,rowIndex:u,columnId:c.getColId(),newValue:f,oldValue:d};e.cellValueChanges.push(y)}},e.clearStacks=function(){e.undoStack.clear(),e.redoStack.clear()},e}return i.prototype.init=function(){var e=this;if(this.gridOptionsService.is("undoRedoCellEditing")){var t=this.gridOptionsService.getNum("undoRedoCellEditingLimit");t<=0||(this.undoStack=new wf(t),this.redoStack=new wf(t),this.addRowEditingListeners(),this.addCellEditingListeners(),this.addPasteListeners(),this.addFillListeners(),this.addCellKeyListeners(),this.addManagedListener(this.eventService,b.EVENT_CELL_VALUE_CHANGED,this.onCellValueChanged),this.addManagedListener(this.eventService,b.EVENT_MODEL_UPDATED,function(r){r.keepUndoRedoStack||e.clearStacks()}),this.addManagedListener(this.eventService,b.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.clearStacks),this.addManagedListener(this.eventService,b.EVENT_NEW_COLUMNS_LOADED,this.clearStacks),this.addManagedListener(this.eventService,b.EVENT_COLUMN_GROUP_OPENED,this.clearStacks),this.addManagedListener(this.eventService,b.EVENT_COLUMN_ROW_GROUP_CHANGED,this.clearStacks),this.addManagedListener(this.eventService,b.EVENT_COLUMN_MOVED,this.clearStacks),this.addManagedListener(this.eventService,b.EVENT_COLUMN_PINNED,this.clearStacks),this.addManagedListener(this.eventService,b.EVENT_COLUMN_VISIBLE,this.clearStacks),this.addManagedListener(this.eventService,b.EVENT_ROW_DRAG_END,this.clearStacks),this.ctrlsService.whenReady(function(){e.gridBodyCtrl=e.ctrlsService.getGridBodyCtrl()}))}},i.prototype.getCurrentUndoStackSize=function(){return this.undoStack?this.undoStack.getCurrentStackSize():0},i.prototype.getCurrentRedoStackSize=function(){return this.redoStack?this.redoStack.getCurrentStackSize():0},i.prototype.undo=function(e){var t={type:b.EVENT_UNDO_STARTED,source:e};this.eventService.dispatchEvent(t);var r=this.undoRedo(this.undoStack,this.redoStack,"initialRange","oldValue","undo"),o={type:b.EVENT_UNDO_ENDED,source:e,operationPerformed:r};this.eventService.dispatchEvent(o)},i.prototype.redo=function(e){var t={type:b.EVENT_REDO_STARTED,source:e};this.eventService.dispatchEvent(t);var r=this.undoRedo(this.redoStack,this.undoStack,"finalRange","newValue","redo"),o={type:b.EVENT_REDO_ENDED,source:e,operationPerformed:r};this.eventService.dispatchEvent(o)},i.prototype.undoRedo=function(e,t,r,o,a){if(!e)return!1;var s=e.pop();return!s||!s.cellValueChanges?!1:(this.processAction(s,function(l){return l[o]},a),s instanceof dc?this.processRange(s.ranges||[s[r]]):this.processCell(s.cellValueChanges),t.push(s),!0)},i.prototype.processAction=function(e,t,r){var o=this;e.cellValueChanges.forEach(function(a){var s=a.rowIndex,l=a.rowPinned,u=a.columnId,c={rowIndex:s,rowPinned:l},d=o.getRowNode(c);d.displayed&&d.setDataValue(u,t(a),r)})},i.prototype.processRange=function(e){var t=this,r;this.rangeService.removeAllCellRanges(!0),e.forEach(function(o,a){if(o){var s=o.startRow,l=o.endRow;a===e.length-1&&(r={rowPinned:s.rowPinned,rowIndex:s.rowIndex,columnId:o.startColumn.getColId()},t.setLastFocusedCell(r));var u={rowStartIndex:s.rowIndex,rowStartPinned:s.rowPinned,rowEndIndex:l.rowIndex,rowEndPinned:l.rowPinned,columnStart:o.startColumn,columns:o.columns};t.rangeService.addCellRange(u)}})},i.prototype.processCell=function(e){var t=e[0],r=t.rowIndex,o=t.rowPinned,a={rowIndex:r,rowPinned:o},s=this.getRowNode(a),l={rowPinned:t.rowPinned,rowIndex:s.rowIndex,columnId:t.columnId};this.setLastFocusedCell(l,!!this.rangeService)},i.prototype.setLastFocusedCell=function(e,t){var r=e.rowIndex,o=e.columnId,a=e.rowPinned,s=this.gridBodyCtrl.getScrollFeature(),l=this.columnModel.getGridColumn(o);if(l){s.ensureIndexVisible(r),s.ensureColumnVisible(l);var u={rowIndex:r,column:l,rowPinned:a};this.focusService.setFocusedCell(Nl(Nl({},u),{forceBrowserFocus:!0})),t&&this.rangeService.setRangeToCell(u)}},i.prototype.addRowEditingListeners=function(){var e=this;this.addManagedListener(this.eventService,b.EVENT_ROW_EDITING_STARTED,function(t){e.activeRowEdit={rowIndex:t.rowIndex,rowPinned:t.rowPinned}}),this.addManagedListener(this.eventService,b.EVENT_ROW_EDITING_STOPPED,function(){var t=new Xa(e.cellValueChanges);e.pushActionsToUndoStack(t),e.activeRowEdit=null})},i.prototype.addCellEditingListeners=function(){var e=this;this.addManagedListener(this.eventService,b.EVENT_CELL_EDITING_STARTED,function(t){e.activeCellEdit={column:t.column,rowIndex:t.rowIndex,rowPinned:t.rowPinned}}),this.addManagedListener(this.eventService,b.EVENT_CELL_EDITING_STOPPED,function(t){e.activeCellEdit=null;var r=t.valueChanged&&!e.activeRowEdit&&!e.isPasting&&!e.isRangeInAction;if(r){var o=new Xa(e.cellValueChanges);e.pushActionsToUndoStack(o)}})},i.prototype.addPasteListeners=function(){var e=this;this.addManagedListener(this.eventService,b.EVENT_PASTE_START,function(){e.isPasting=!0}),this.addManagedListener(this.eventService,b.EVENT_PASTE_END,function(){var t=new Xa(e.cellValueChanges);e.pushActionsToUndoStack(t),e.isPasting=!1})},i.prototype.addFillListeners=function(){var e=this;this.addManagedListener(this.eventService,b.EVENT_FILL_START,function(){e.isRangeInAction=!0}),this.addManagedListener(this.eventService,b.EVENT_FILL_END,function(t){var r=new dc(e.cellValueChanges,t.initialRange,t.finalRange);e.pushActionsToUndoStack(r),e.isRangeInAction=!1})},i.prototype.addCellKeyListeners=function(){var e=this;this.addManagedListener(this.eventService,b.EVENT_KEY_SHORTCUT_CHANGED_CELL_START,function(){e.isRangeInAction=!0}),this.addManagedListener(this.eventService,b.EVENT_KEY_SHORTCUT_CHANGED_CELL_END,function(){var t;e.rangeService&&e.gridOptionsService.is("enableRangeSelection")?t=new dc(e.cellValueChanges,void 0,void 0,gb([],vb(e.rangeService.getCellRanges()))):t=new Xa(e.cellValueChanges),e.pushActionsToUndoStack(t),e.isRangeInAction=!1})},i.prototype.pushActionsToUndoStack=function(e){this.undoStack.push(e),this.cellValueChanges=[],this.redoStack.clear()},i.prototype.getRowNode=function(e){switch(e.rowPinned){case"top":return this.pinnedRowModel.getPinnedTopRowData()[e.rowIndex];case"bottom":return this.pinnedRowModel.getPinnedBottomRowData()[e.rowIndex];default:return this.rowModel.getRow(e.rowIndex)}},Zr([T("focusService")],i.prototype,"focusService",void 0),Zr([T("ctrlsService")],i.prototype,"ctrlsService",void 0),Zr([T("rowModel")],i.prototype,"rowModel",void 0),Zr([T("pinnedRowModel")],i.prototype,"pinnedRowModel",void 0),Zr([T("cellPositionUtils")],i.prototype,"cellPositionUtils",void 0),Zr([T("rowPositionUtils")],i.prototype,"rowPositionUtils",void 0),Zr([T("columnModel")],i.prototype,"columnModel",void 0),Zr([Zt("rangeService")],i.prototype,"rangeService",void 0),Zr([Oe],i.prototype,"init",null),i=Zr([Ue("undoRedoService")],i),i}(ve),mb=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),pc=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},Cb=function(n){mb(i,n);function i(){return n!==null&&n.apply(this,arguments)||this}return i.prototype.findHeader=function(e,t){var r,o,a;if(e.column instanceof Xi?(o="getDisplayedGroup"+t,r=this.columnModel[o](e.column)):(a="getDisplayedCol"+t,r=this.columnModel[a](e.column)),!!r){var s=e.headerRowIndex,l=this.getHeaderRowType(s);if(l===Zi.COLUMN_GROUP){var u=r;if(u.isPadding()&&this.isAnyChildSpanningHeaderHeight(u)){var c=this.getColumnVisibleChild(u,s,t),d=c.nextFocusColumn,f=c.nextRow;d&&(r=d,s=f)}}return{column:r,headerRowIndex:s}}},i.prototype.isAnyChildSpanningHeaderHeight=function(e){return e?e.getLeafColumns().some(function(t){return t.isSpanHeaderHeight()}):!1},i.prototype.getColumnVisibleParent=function(e,t){var r=this.getHeaderRowType(t),o=r===Zi.FLOATING_FILTER,a=r===Zi.COLUMN,s=o?e:e.getParent(),l=t-1;if(a&&this.isAnyChildSpanningHeaderHeight(e.getParent())){for(;s&&s.isPadding();)s=s.getParent(),l--;l<0&&(s=e,l=t)}return{nextFocusColumn:s,nextRow:l}},i.prototype.getColumnVisibleChild=function(e,t,r){r===void 0&&(r="After");var o=this.getHeaderRowType(t),a=e,s=t+1;if(o===Zi.COLUMN_GROUP){var l=e.getLeafColumns(),u=r==="After"?l[0]:ai(l);if(this.isAnyChildSpanningHeaderHeight(u.getParent())){a=u;for(var c=u.getParent();c&&c!==e;)c=c.getParent(),s++}else a=e.getDisplayedChildren()[0]}return{nextFocusColumn:a,nextRow:s}},i.prototype.getHeaderRowType=function(e){var t=this.ctrlsService.getHeaderRowContainerCtrl();if(t)return t.getRowType(e)},i.prototype.findColAtEdgeForHeaderRow=function(e,t){var r=this.columnModel.getAllDisplayedColumns(),o=r[t==="start"?0:r.length-1];if(o){var a=this.ctrlsService.getHeaderRowContainerCtrl(o.getPinned()),s=a.getRowType(e);if(s==Zi.COLUMN_GROUP){var l=this.columnModel.getColumnGroupAtLevel(o,e);return{headerRowIndex:e,column:l}}return{headerRowIndex:s==null?-1:e,column:o}}},pc([T("columnModel")],i.prototype,"columnModel",void 0),pc([T("ctrlsService")],i.prototype,"ctrlsService",void 0),i=pc([Ue("headerPositionUtils")],i),i}(ve),Sb=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},wb=function(){function n(){}return n.prototype.buildColumnDefs=function(i,e,t){var r=this,o=[],a={};return i.forEach(function(s){for(var l=r.createDefFromColumn(s,e,t),u=!0,c=l,d=s.getOriginalParent(),f=null;d;){var y=null;if(d.isPadding()){d=d.getOriginalParent();continue}var S=a[d.getGroupId()];if(S){S.children.push(c),u=!1;break}if(y=r.createDefFromGroup(d),y&&(y.children=[c],a[y.groupId]=y,c=y,d=d.getOriginalParent()),d!=null&&f===d){u=!1;break}f=d}u&&o.push(c)}),o},n.prototype.createDefFromGroup=function(i){var e=fl(i.getColGroupDef(),["children"]);return e&&(e.groupId=i.getGroupId()),e},n.prototype.createDefFromColumn=function(i,e,t){var r=fl(i.getColDef());return r.colId=i.getColId(),r.width=i.getActualWidth(),r.rowGroup=i.isRowGroupActive(),r.rowGroupIndex=i.isRowGroupActive()?e.indexOf(i):null,r.pivot=i.isPivotActive(),r.pivotIndex=i.isPivotActive()?t.indexOf(i):null,r.aggFunc=i.isValueActive()?i.getAggFunc():null,r.hide=i.isVisible()?void 0:!0,r.pinned=i.isPinned()?i.getPinned():null,r.sort=i.getSort()?i.getSort():null,r.sortIndex=i.getSortIndex()!=null?i.getSortIndex():null,r},n=Sb([Ue("columnDefFactory")],n),n}(),fc=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},Tb=function(){function n(){}return n.prototype.getInitialRowClasses=function(i){var e=[];return ue(i.extraCssClass)&&e.push(i.extraCssClass),e.push("ag-row"),e.push(i.rowFocused?"ag-row-focus":"ag-row-no-focus"),i.fadeRowIn&&e.push("ag-opacity-zero"),e.push(i.rowIsEven?"ag-row-even":"ag-row-odd"),i.rowNode.isRowPinned()&&e.push("ag-row-pinned"),i.rowNode.isSelected()&&e.push("ag-row-selected"),i.rowNode.footer&&e.push("ag-row-footer"),e.push("ag-row-level-"+i.rowLevel),i.rowNode.stub&&e.push("ag-row-loading"),i.fullWidthRow&&e.push("ag-full-width-row"),i.expandable&&(e.push("ag-row-group"),e.push(i.rowNode.expanded?"ag-row-group-expanded":"ag-row-group-contracted")),i.rowNode.dragging&&e.push("ag-row-dragging"),Lc(e,this.processClassesFromGridOptions(i.rowNode)),Lc(e,this.preProcessRowClassRules(i.rowNode)),e.push(i.printLayout?"ag-row-position-relative":"ag-row-position-absolute"),i.firstRowOnPage&&e.push("ag-row-first"),i.lastRowOnPage&&e.push("ag-row-last"),i.fullWidthRow&&(i.pinned==="left"&&e.push("ag-cell-last-left-pinned"),i.pinned==="right"&&e.push("ag-cell-first-right-pinned")),e},n.prototype.processClassesFromGridOptions=function(i){var e=[],t=function(l){typeof l=="string"?e.push(l):Array.isArray(l)&&l.forEach(function(u){return e.push(u)})},r=this.gridOptionsService.get("rowClass");if(r){if(typeof r=="function")return console.warn("AG Grid: rowClass should not be a function, please use getRowClass instead"),[];t(r)}var o=this.gridOptionsService.getCallback("getRowClass");if(o){var a={data:i.data,node:i,rowIndex:i.rowIndex},s=o(a);t(s)}return e},n.prototype.preProcessRowClassRules=function(i){var e=[];return this.processRowClassRules(i,function(t){e.push(t)},function(t){}),e},n.prototype.processRowClassRules=function(i,e,t){var r={data:i.data,node:i,rowIndex:i.rowIndex,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context};this.stylingService.processClassRules(this.gridOptionsService.get("rowClassRules"),r,e,t)},n.prototype.calculateRowLevel=function(i){return i.group?i.level:i.parent?i.parent.level+1:0},fc([T("stylingService")],n.prototype,"stylingService",void 0),fc([T("gridOptionsService")],n.prototype,"gridOptionsService",void 0),n=fc([Ue("rowCssClassCalculator")],n),n}(),Ob=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),tl=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},Pb=function(n){Ob(i,n);function i(){return n!==null&&n.apply(this,arguments)||this}return i.prototype.init=function(){var e=this;this.isAccentedSort=this.gridOptionsService.is("accentedSort"),this.primaryColumnsSortGroups=this.gridOptionsService.isColumnsSortingCoupledToGroup(),this.addManagedPropertyListener("accentedSort",function(t){return e.isAccentedSort=t.currentValue}),this.addManagedPropertyListener("autoGroupColumnDef",function(){return e.primaryColumnsSortGroups=e.gridOptionsService.isColumnsSortingCoupledToGroup()})},i.prototype.doFullSort=function(e,t){var r=function(a,s){return{currentPos:s,rowNode:a}},o=e.map(r);return o.sort(this.compareRowNodes.bind(this,t)),o.map(function(a){return a.rowNode})},i.prototype.compareRowNodes=function(e,t,r){for(var o=t.rowNode,a=r.rowNode,s=0,l=e.length;s<l;s++){var u=e[s],c=u.sort==="desc",d=this.getValue(o,u.column),f=this.getValue(a,u.column),y=void 0,S=this.getComparator(u,o);S?y=S(d,f,o,a,c):y=St.defaultComparator(d,f,this.isAccentedSort);var w=!isNaN(y);if(w&&y!==0)return u.sort==="asc"?y:y*-1}return t.currentPos-r.currentPos},i.prototype.getComparator=function(e,t){var r=e.column,o=r.getColDef().comparator;if(o!=null)return o;if(r.getColDef().showRowGroup){var a=!t.group&&r.getColDef().field;if(a){var s=this.columnModel.getPrimaryColumn(a);if(s)return s.getColDef().comparator}}},i.prototype.getValue=function(e,t){var r,o;if(!this.primaryColumnsSortGroups)return this.valueService.getValue(t,e,!1,!1);var a=e.rowGroupColumn===t;if(a){var s=this.gridOptionsService.isGroupUseEntireRow(this.columnModel.isPivotActive());if(s){var l=t.getColDef().keyCreator;if(l)return e.key;var u=(r=e.allLeafChildren)===null||r===void 0?void 0:r[0];return u?this.valueService.getValue(t,u,!1,!1):void 0}var c=this.columnModel.getGroupDisplayColumnForGroup(t.getId());return c?(o=e.groupData)===null||o===void 0?void 0:o[c.getId()]:void 0}if(!(e.group&&t.getColDef().showRowGroup))return this.valueService.getValue(t,e,!1,!1)},tl([T("valueService")],i.prototype,"valueService",void 0),tl([T("columnModel")],i.prototype,"columnModel",void 0),tl([Oe],i.prototype,"init",null),i=tl([Ue("rowNodeSorter")],i),i}(ve),Eb=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),_b=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},bb=function(n){Eb(i,n);function i(){var t=n!==null&&n.apply(this,arguments)||this;return t.ready=!1,t.readyCallbacks=[],t}e=i,i.prototype.checkReady=function(){if(this.ready=this.gridCtrl!=null&&this.gridBodyCtrl!=null&&this.centerRowContainerCtrl!=null&&this.leftRowContainerCtrl!=null&&this.rightRowContainerCtrl!=null&&this.bottomCenterRowContainerCtrl!=null&&this.bottomLeftRowContainerCtrl!=null&&this.bottomRightRowContainerCtrl!=null&&this.topCenterRowContainerCtrl!=null&&this.topLeftRowContainerCtrl!=null&&this.topRightRowContainerCtrl!=null&&this.stickyTopCenterRowContainerCtrl!=null&&this.stickyTopLeftRowContainerCtrl!=null&&this.stickyTopRightRowContainerCtrl!=null&&this.centerHeaderRowContainerCtrl!=null&&this.leftHeaderRowContainerCtrl!=null&&this.rightHeaderRowContainerCtrl!=null&&this.fakeHScrollComp!=null&&this.fakeVScrollComp!=null&&this.gridHeaderCtrl!=null,this.ready){var t=this.createReadyParams();this.readyCallbacks.forEach(function(r){return r(t)}),this.readyCallbacks.length=0}},i.prototype.whenReady=function(t){this.ready?t(this.createReadyParams()):this.readyCallbacks.push(t)},i.prototype.createReadyParams=function(){return{centerRowContainerCtrl:this.centerRowContainerCtrl,leftRowContainerCtrl:this.leftRowContainerCtrl,rightRowContainerCtrl:this.rightRowContainerCtrl,bottomCenterRowContainerCtrl:this.bottomCenterRowContainerCtrl,bottomLeftRowContainerCtrl:this.bottomLeftRowContainerCtrl,bottomRightRowContainerCtrl:this.bottomRightRowContainerCtrl,topCenterRowContainerCtrl:this.topCenterRowContainerCtrl,topLeftRowContainerCtrl:this.topLeftRowContainerCtrl,topRightRowContainerCtrl:this.topRightRowContainerCtrl,stickyTopCenterRowContainerCtrl:this.stickyTopCenterRowContainerCtrl,stickyTopLeftRowContainerCtrl:this.stickyTopLeftRowContainerCtrl,stickyTopRightRowContainerCtrl:this.stickyTopRightRowContainerCtrl,centerHeaderRowContainerCtrl:this.centerHeaderRowContainerCtrl,leftHeaderRowContainerCtrl:this.leftHeaderRowContainerCtrl,rightHeaderRowContainerCtrl:this.rightHeaderRowContainerCtrl,fakeHScrollComp:this.fakeHScrollComp,fakeVScrollComp:this.fakeVScrollComp,gridBodyCtrl:this.gridBodyCtrl,gridCtrl:this.gridCtrl,gridHeaderCtrl:this.gridHeaderCtrl}},i.prototype.registerFakeHScrollComp=function(t){this.fakeHScrollComp=t,this.checkReady()},i.prototype.registerFakeVScrollComp=function(t){this.fakeVScrollComp=t,this.checkReady()},i.prototype.registerGridHeaderCtrl=function(t){this.gridHeaderCtrl=t,this.checkReady()},i.prototype.registerCenterRowContainerCtrl=function(t){this.centerRowContainerCtrl=t,this.checkReady()},i.prototype.registerLeftRowContainerCtrl=function(t){this.leftRowContainerCtrl=t,this.checkReady()},i.prototype.registerRightRowContainerCtrl=function(t){this.rightRowContainerCtrl=t,this.checkReady()},i.prototype.registerTopCenterRowContainerCtrl=function(t){this.topCenterRowContainerCtrl=t,this.checkReady()},i.prototype.registerTopLeftRowContainerCon=function(t){this.topLeftRowContainerCtrl=t,this.checkReady()},i.prototype.registerTopRightRowContainerCtrl=function(t){this.topRightRowContainerCtrl=t,this.checkReady()},i.prototype.registerStickyTopCenterRowContainerCtrl=function(t){this.stickyTopCenterRowContainerCtrl=t,this.checkReady()},i.prototype.registerStickyTopLeftRowContainerCon=function(t){this.stickyTopLeftRowContainerCtrl=t,this.checkReady()},i.prototype.registerStickyTopRightRowContainerCtrl=function(t){this.stickyTopRightRowContainerCtrl=t,this.checkReady()},i.prototype.registerBottomCenterRowContainerCtrl=function(t){this.bottomCenterRowContainerCtrl=t,this.checkReady()},i.prototype.registerBottomLeftRowContainerCtrl=function(t){this.bottomLeftRowContainerCtrl=t,this.checkReady()},i.prototype.registerBottomRightRowContainerCtrl=function(t){this.bottomRightRowContainerCtrl=t,this.checkReady()},i.prototype.registerHeaderContainer=function(t,r){switch(r){case"left":this.leftHeaderRowContainerCtrl=t;break;case"right":this.rightHeaderRowContainerCtrl=t;break;default:this.centerHeaderRowContainerCtrl=t;break}this.checkReady()},i.prototype.registerGridBodyCtrl=function(t){this.gridBodyCtrl=t,this.checkReady()},i.prototype.registerGridCtrl=function(t){this.gridCtrl=t,this.checkReady()},i.prototype.getFakeHScrollComp=function(){return this.fakeHScrollComp},i.prototype.getFakeVScrollComp=function(){return this.fakeVScrollComp},i.prototype.getGridHeaderCtrl=function(){return this.gridHeaderCtrl},i.prototype.getGridCtrl=function(){return this.gridCtrl},i.prototype.getCenterRowContainerCtrl=function(){return this.centerRowContainerCtrl},i.prototype.getTopCenterRowContainerCtrl=function(){return this.topCenterRowContainerCtrl},i.prototype.getBottomCenterRowContainerCtrl=function(){return this.bottomCenterRowContainerCtrl},i.prototype.getStickyTopCenterRowContainerCtrl=function(){return this.stickyTopCenterRowContainerCtrl},i.prototype.getGridBodyCtrl=function(){return this.gridBodyCtrl},i.prototype.getHeaderRowContainerCtrls=function(){return[this.leftHeaderRowContainerCtrl,this.rightHeaderRowContainerCtrl,this.centerHeaderRowContainerCtrl]},i.prototype.getHeaderRowContainerCtrl=function(t){switch(t){case"left":return this.leftHeaderRowContainerCtrl;case"right":return this.rightHeaderRowContainerCtrl;default:return this.centerHeaderRowContainerCtrl}};var e;return i.NAME="ctrlsService",i=e=_b([Ue(e.NAME)],i),i}(ve),Db=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Rb=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},xb=function(n){Db(i,n);function i(){var e=n!==null&&n.apply(this,arguments)||this;return e.registry={},e}return i.prototype.register=function(e){this.registry[e.controllerName]=e.controllerClass},i.prototype.getInstance=function(e){var t=this.registry[e];if(t!=null)return new t},i=Rb([Ue("ctrlsFactory")],i),i}(ve),Ab=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Ua=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},Jv=function(n){Ab(i,n);function i(e,t){var r=n.call(this,e)||this;return r.direction=t,r.hideTimeout=null,r}return i.prototype.postConstruct=function(){this.addManagedListener(this.eventService,b.EVENT_SCROLL_VISIBILITY_CHANGED,this.onScrollVisibilityChanged.bind(this)),this.onScrollVisibilityChanged(),this.addOrRemoveCssClass("ag-apple-scrollbar",pd()||$o())},i.prototype.initialiseInvisibleScrollbar=function(){this.invisibleScrollbar===void 0&&(this.invisibleScrollbar=as(),this.invisibleScrollbar&&(this.hideAndShowInvisibleScrollAsNeeded(),this.addActiveListenerToggles()))},i.prototype.addActiveListenerToggles=function(){var e=this,t=["mouseenter","mousedown","touchstart"],r=["mouseleave","touchend"],o=this.getGui();t.forEach(function(a){return e.addManagedListener(o,a,function(){return e.addOrRemoveCssClass("ag-scrollbar-active",!0)})}),r.forEach(function(a){return e.addManagedListener(o,a,function(){return e.addOrRemoveCssClass("ag-scrollbar-active",!1)})})},i.prototype.onScrollVisibilityChanged=function(){var e=this;this.invisibleScrollbar===void 0&&this.initialiseInvisibleScrollbar(),this.animationFrameService.requestAnimationFrame(function(){return e.setScrollVisible()})},i.prototype.hideAndShowInvisibleScrollAsNeeded=function(){var e=this;this.addManagedListener(this.eventService,b.EVENT_BODY_SCROLL,function(t){t.direction===e.direction&&(e.hideTimeout!==null&&(window.clearTimeout(e.hideTimeout),e.hideTimeout=null),e.addOrRemoveCssClass("ag-scrollbar-scrolling",!0))}),this.addManagedListener(this.eventService,b.EVENT_BODY_SCROLL_END,function(){e.hideTimeout=window.setTimeout(function(){e.addOrRemoveCssClass("ag-scrollbar-scrolling",!1),e.hideTimeout=null},400)})},i.prototype.attemptSettingScrollPosition=function(e){var t=this,r=this.getViewport();ed(function(){return tn(r)},function(){return t.setScrollPosition(e)},100)},i.prototype.getViewport=function(){return this.eViewport},i.prototype.getContainer=function(){return this.eContainer},i.prototype.onScrollCallback=function(e){this.addManagedListener(this.getViewport(),"scroll",e)},Ua([be("eViewport")],i.prototype,"eViewport",void 0),Ua([be("eContainer")],i.prototype,"eContainer",void 0),Ua([T("scrollVisibleService")],i.prototype,"scrollVisibleService",void 0),Ua([T("ctrlsService")],i.prototype,"ctrlsService",void 0),Ua([T("animationFrameService")],i.prototype,"animationFrameService",void 0),i}(xt),Lb=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),ja=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},Mb=function(n){Lb(i,n);function i(){return n.call(this,i.TEMPLATE,"horizontal")||this}return i.prototype.postConstruct=function(){var e=this;n.prototype.postConstruct.call(this);var t=this.setFakeHScrollSpacerWidths.bind(this);this.addManagedListener(this.eventService,b.EVENT_DISPLAYED_COLUMNS_CHANGED,t),this.addManagedListener(this.eventService,b.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,t),this.addManagedListener(this.eventService,b.EVENT_PINNED_ROW_DATA_CHANGED,this.onPinnedRowDataChanged.bind(this)),this.addManagedPropertyListener("domLayout",t),this.ctrlsService.registerFakeHScrollComp(this),this.createManagedBean(new Nd(function(r){return e.eContainer.style.width=r+"px"}))},i.prototype.initialiseInvisibleScrollbar=function(){this.invisibleScrollbar===void 0&&(this.enableRtl=this.gridOptionsService.is("enableRtl"),n.prototype.initialiseInvisibleScrollbar.call(this),this.invisibleScrollbar&&this.refreshCompBottom())},i.prototype.onPinnedRowDataChanged=function(){this.refreshCompBottom()},i.prototype.refreshCompBottom=function(){if(this.invisibleScrollbar){var e=this.pinnedRowModel.getPinnedBottomTotalHeight();this.getGui().style.bottom=e+"px"}},i.prototype.onScrollVisibilityChanged=function(){n.prototype.onScrollVisibilityChanged.call(this),this.setFakeHScrollSpacerWidths()},i.prototype.setFakeHScrollSpacerWidths=function(){var e=this.scrollVisibleService.isVerticalScrollShowing(),t=this.columnModel.getDisplayedColumnsRightWidth(),r=!this.enableRtl&&e,o=this.gridOptionsService.getScrollbarWidth();r&&(t+=o),Nr(this.eRightSpacer,t),this.eRightSpacer.classList.toggle("ag-scroller-corner",t<=o);var a=this.columnModel.getDisplayedColumnsLeftWidth(),s=this.enableRtl&&e;s&&(a+=o),Nr(this.eLeftSpacer,a),this.eLeftSpacer.classList.toggle("ag-scroller-corner",a<=o)},i.prototype.setScrollVisible=function(){var e=this.scrollVisibleService.isHorizontalScrollShowing(),t=this.invisibleScrollbar,r=this.gridOptionsService.is("suppressHorizontalScroll"),o=e&&this.gridOptionsService.getScrollbarWidth()||0,a=o===0&&t?16:o,s=r?0:a;this.addOrRemoveCssClass("ag-scrollbar-invisible",t),Pn(this.getGui(),s),Pn(this.eViewport,s),Pn(this.eContainer,s),this.setDisplayed(e,{skipAriaHidden:!0})},i.prototype.getScrollPosition=function(){return us(this.getViewport(),this.enableRtl)},i.prototype.setScrollPosition=function(e){tn(this.getViewport())||this.attemptSettingScrollPosition(e),cs(this.getViewport(),e,this.enableRtl)},i.TEMPLATE=`<div class="ag-body-horizontal-scroll" aria-hidden="true">
            <div class="ag-horizontal-left-spacer" ref="eLeftSpacer"></div>
            <div class="ag-body-horizontal-scroll-viewport" ref="eViewport">
                <div class="ag-body-horizontal-scroll-container" ref="eContainer"></div>
            </div>
            <div class="ag-horizontal-right-spacer" ref="eRightSpacer"></div>
        </div>`,ja([be("eLeftSpacer")],i.prototype,"eLeftSpacer",void 0),ja([be("eRightSpacer")],i.prototype,"eRightSpacer",void 0),ja([T("columnModel")],i.prototype,"columnModel",void 0),ja([T("pinnedRowModel")],i.prototype,"pinnedRowModel",void 0),ja([Oe],i.prototype,"postConstruct",null),i}(Jv),Nb=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),hc=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},Fb=function(n){Nb(i,n);function i(){return n!==null&&n.apply(this,arguments)||this}return i.prototype.postConstruct=function(){var e=this.checkContainerWidths.bind(this);this.addManagedListener(this.eventService,b.EVENT_DISPLAYED_COLUMNS_CHANGED,e),this.addManagedListener(this.eventService,b.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,e),this.addManagedPropertyListener("domLayout",e)},i.prototype.checkContainerWidths=function(){var e=this.gridOptionsService.isDomLayout("print"),t=e?0:this.columnModel.getDisplayedColumnsLeftWidth(),r=e?0:this.columnModel.getDisplayedColumnsRightWidth();t!=this.leftWidth&&(this.leftWidth=t,this.eventService.dispatchEvent({type:b.EVENT_LEFT_PINNED_WIDTH_CHANGED})),r!=this.rightWidth&&(this.rightWidth=r,this.eventService.dispatchEvent({type:b.EVENT_RIGHT_PINNED_WIDTH_CHANGED}))},i.prototype.getPinnedRightWidth=function(){return this.rightWidth},i.prototype.getPinnedLeftWidth=function(){return this.leftWidth},hc([T("columnModel")],i.prototype,"columnModel",void 0),hc([Oe],i.prototype,"postConstruct",null),i=hc([Ue("pinnedWidthService")],i),i}(ve),Ib=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),il=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},kb=function(n){Ib(i,n);function i(){var e=n!==null&&n.apply(this,arguments)||this;return e.events=[],e}return i.prototype.postConstruct=function(){this.rowModel.getType()=="clientSide"&&(this.clientSideRowModel=this.rowModel)},i.prototype.dispatchExpanded=function(e){var t=this;if(this.clientSideRowModel==null){this.eventService.dispatchEvent(e);return}this.events.push(e);var r=function(){t.clientSideRowModel&&t.clientSideRowModel.onRowGroupOpened(),t.events.forEach(function(o){return t.eventService.dispatchEvent(o)}),t.events=[]};this.dispatchExpandedDebounced==null&&(this.dispatchExpandedDebounced=this.animationFrameService.debounce(r)),this.dispatchExpandedDebounced()},il([T("animationFrameService")],i.prototype,"animationFrameService",void 0),il([T("rowModel")],i.prototype,"rowModel",void 0),il([Oe],i.prototype,"postConstruct",null),i=il([Ue("rowNodeEventThrottle")],i),i}(ve),qc=function(){return qc=Object.assign||function(n){for(var i,e=1,t=arguments.length;e<t;e++){i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(n[r]=i[r])}return n},qc.apply(this,arguments)},Ho=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},Tf=function(n,i){return function(e,t){i(e,t,n)}},Of=function(n,i){var e=typeof Symbol=="function"&&n[Symbol.iterator];if(!e)return n;var t=e.call(n),r,o=[],a;try{for(;(i===void 0||i-- >0)&&!(r=t.next()).done;)o.push(r.value)}catch(s){a={error:s}}finally{try{r&&!r.done&&(e=t.return)&&e.call(t)}finally{if(a)throw a.error}}return o},Pf=function(n,i){for(var e=0,t=i.length,r=n.length;e<t;e++,r++)n[r]=i[e];return n};function Gb(n){if(typeof n=="number")return n;if(typeof n=="string")return parseInt(n,10)}function rl(n){return n===!0||n==="true"}var Vb=function(){function n(){var e=this;this.destroyed=!1,this.domDataKey="__AG_"+Math.random().toString(),this.propertyEventService=new Zo,this.globalEventHandlerFactory=function(t){return function(r,o){if(!e.destroyed){var a=i.alwaysSyncGlobalEvents.has(r);if(!(a&&!t||!a&&t)){var s=qo.getCallbackForEvent(r);typeof e.gridOptions[s]=="function"&&e.gridOptions[s](o)}}}}}i=n,Object.defineProperty(n.prototype,"context",{get:function(){return this.gridOptions.context},enumerable:!1,configurable:!0}),n.prototype.agWire=function(e,t){this.gridOptions.api=e,this.gridOptions.columnApi=t,this.api=e,this.columnApi=t},n.prototype.init=function(){this.gridOptionLookup=new Set(Pf(Pf([],Of(qo.ALL_PROPERTIES)),Of(qo.EVENT_CALLBACKS)));var e=!this.is("suppressAsyncEvents");this.eventService.addGlobalListener(this.globalEventHandlerFactory().bind(this),e),this.eventService.addGlobalListener(this.globalEventHandlerFactory(!0).bind(this),!1),this.getScrollbarWidth()},n.prototype.destroy=function(){this.gridOptions.api=null,this.gridOptions.columnApi=null,this.destroyed=!0},n.prototype.is=function(e){return rl(this.gridOptions[e])},n.prototype.get=function(e){return this.gridOptions[e]},n.prototype.getNum=function(e){return Gb(this.gridOptions[e])},n.prototype.getCallback=function(e){return this.mergeGridCommonParams(this.gridOptions[e])},n.prototype.exists=function(e){return ue(this.gridOptions[e])},n.prototype.mergeGridCommonParams=function(e){var t=this;if(e){var r=function(o){var a=o;return a.api=t.api,a.columnApi=t.columnApi,a.context=t.context,e(a)};return r}return e},n.prototype.__setPropertyOnly=function(e,t){var r=this.gridOptions[e];return this.gridOptionLookup.has(e)&&(this.gridOptions[e]=t),r!==t},n.prototype.set=function(e,t,r,o,a){if(r===void 0&&(r=!1),o===void 0&&(o={}),a===void 0&&(a=void 0),this.gridOptionLookup.has(e)){var s=this.gridOptions[e];if(r||s!==t){this.gridOptions[e]=t;var l=qc({type:e,currentValue:t,previousValue:s,changeSet:a},o);this.propertyEventService.dispatchEvent(l)}}},n.prototype.addEventListener=function(e,t){this.propertyEventService.addEventListener(e,t)},n.prototype.removeEventListener=function(e,t){this.propertyEventService.removeEventListener(e,t)},n.prototype.getGridId=function(){return this.api.getGridId()},n.prototype.getScrollbarWidth=function(){if(this.scrollbarWidth==null){var e=typeof this.gridOptions.scrollbarWidth=="number"&&this.gridOptions.scrollbarWidth>=0,t=e?this.gridOptions.scrollbarWidth:rv();t!=null&&(this.scrollbarWidth=t,this.eventService.dispatchEvent({type:b.EVENT_SCROLLBAR_WIDTH_CHANGED}))}return this.scrollbarWidth},n.prototype.isRowModelType=function(e){return this.gridOptions.rowModelType===e||e==="clientSide"&&vt(this.gridOptions.rowModelType)},n.prototype.isDomLayout=function(e){var t,r=(t=this.gridOptions.domLayout)!==null&&t!==void 0?t:"normal";return r===e},n.prototype.isRowSelection=function(){return this.gridOptions.rowSelection==="single"||this.gridOptions.rowSelection==="multiple"},n.prototype.useAsyncEvents=function(){return!this.is("suppressAsyncEvents")},n.prototype.isGetRowHeightFunction=function(){return typeof this.gridOptions.getRowHeight=="function"},n.prototype.getRowHeightForNode=function(e,t,r){if(t===void 0&&(t=!1),r==null&&(r=this.environment.getDefaultRowHeight()),this.isGetRowHeightFunction()){if(t)return{height:r,estimated:!0};var o={node:e,data:e.data},a=this.getCallback("getRowHeight")(o);if(this.isNumeric(a))return a===0&&Ut(function(){return console.warn("AG Grid: The return of `getRowHeight` cannot be zero. If the intention is to hide rows, use a filter instead.")},"invalidRowHeight"),{height:Math.max(1,a),estimated:!1}}if(e.detail&&this.is("masterDetail"))return this.getMasterDetailRowHeight();var s=this.gridOptions.rowHeight&&this.isNumeric(this.gridOptions.rowHeight)?this.gridOptions.rowHeight:r;return{height:s,estimated:!1}},n.prototype.getMasterDetailRowHeight=function(){return this.is("detailRowAutoHeight")?{height:1,estimated:!1}:this.isNumeric(this.gridOptions.detailRowHeight)?{height:this.gridOptions.detailRowHeight,estimated:!1}:{height:300,estimated:!1}},n.prototype.getRowHeightAsNumber=function(){if(!this.gridOptions.rowHeight||vt(this.gridOptions.rowHeight))return this.environment.getDefaultRowHeight();var e=this.environment.refreshRowHeightVariable();return e!==-1?e:(console.warn("AG Grid row height must be a number if not using standard row model"),this.environment.getDefaultRowHeight())},n.prototype.isNumeric=function(e){return!isNaN(e)&&typeof e=="number"&&isFinite(e)},n.prototype.getDomDataKey=function(){return this.domDataKey},n.prototype.getDomData=function(e,t){var r=e[this.getDomDataKey()];return r?r[t]:void 0},n.prototype.setDomData=function(e,t,r){var o=this.getDomDataKey(),a=e[o];vt(a)&&(a={},e[o]=a),a[t]=r},n.prototype.getDocument=function(){var e=null;return this.gridOptions.getDocument&&ue(this.gridOptions.getDocument)?e=this.gridOptions.getDocument():this.eGridDiv&&(e=this.eGridDiv.ownerDocument),e&&ue(e)?e:document},n.prototype.getWindow=function(){var e=this.getDocument();return e.defaultView||window},n.prototype.getRootNode=function(){return this.eGridDiv.getRootNode()},n.prototype.getAsyncTransactionWaitMillis=function(){return ue(this.gridOptions.asyncTransactionWaitMillis)?this.gridOptions.asyncTransactionWaitMillis:50},n.prototype.isAnimateRows=function(){return this.is("ensureDomOrder")?!1:this.is("animateRows")},n.prototype.isGroupRowsSticky=function(){return!(this.is("suppressGroupRowsSticky")||this.is("paginateChildRows")||this.is("groupHideOpenParents"))},n.prototype.isColumnsSortingCoupledToGroup=function(){var e=this.gridOptions.autoGroupColumnDef,t=this.isRowModelType("clientSide");return t&&!e?.comparator&&!this.is("treeData")},n.prototype.getGroupAggFiltering=function(){var e=this.gridOptions.groupAggFiltering;if(typeof e=="function")return this.getCallback("groupAggFiltering");if(rl(e))return function(){return!0}},n.prototype.isGroupIncludeFooterTrueOrCallback=function(){var e=this.gridOptions.groupIncludeFooter;return rl(e)||typeof e=="function"},n.prototype.getGroupIncludeFooter=function(){var e=this.gridOptions.groupIncludeFooter;return typeof e=="function"?this.getCallback("groupIncludeFooter"):rl(e)?function(){return!0}:function(){return!1}},n.prototype.isGroupMultiAutoColumn=function(){return this.gridOptions.groupDisplayType?Nc("multipleColumns",this.gridOptions.groupDisplayType):this.is("groupHideOpenParents")},n.prototype.isGroupUseEntireRow=function(e){return e?!1:this.gridOptions.groupDisplayType?Nc("groupRows",this.gridOptions.groupDisplayType):!1};var i;return n.alwaysSyncGlobalEvents=new Set([b.EVENT_GRID_PRE_DESTROYED]),Ho([T("gridOptions")],n.prototype,"gridOptions",void 0),Ho([T("eventService")],n.prototype,"eventService",void 0),Ho([T("environment")],n.prototype,"environment",void 0),Ho([T("eGridDiv")],n.prototype,"eGridDiv",void 0),Ho([Tf(0,er("gridApi")),Tf(1,er("columnApi"))],n.prototype,"agWire",null),Ho([Oe],n.prototype,"init",null),Ho([Ki],n.prototype,"destroy",null),n=i=Ho([Ue("gridOptionsService")],n),n}(),Bb=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Hb=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},Wb=function(n){Bb(i,n);function i(){return n!==null&&n.apply(this,arguments)||this}return i.prototype.getLocaleTextFunc=function(){var e=this.gridOptionsService.getCallback("getLocaleText");if(e)return function(r,o,a){var s={key:r,defaultValue:o,variableValues:a};return e(s)};var t=this.gridOptionsService.get("localeText");return function(r,o,a){var s=t&&t[r];if(s&&a&&a.length)for(var l=0;!(l>=a.length);){var u=s.indexOf("${variable}");if(u===-1)break;s=s.replace("${variable}",a[l++])}return s??o}},i=Hb([Ue("localeService")],i),i}(ve),Ub=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),jb=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},zb=function(n){Ub(i,n);function i(){return n.call(this,i.TEMPLATE,"vertical")||this}return i.prototype.postConstruct=function(){n.prototype.postConstruct.call(this),this.createManagedBean(new zv(this.eContainer)),this.ctrlsService.registerFakeVScrollComp(this),this.addManagedListener(this.eventService,b.EVENT_ROW_CONTAINER_HEIGHT_CHANGED,this.onRowContainerHeightChanged.bind(this))},i.prototype.setScrollVisible=function(){var e=this.scrollVisibleService.isVerticalScrollShowing(),t=this.invisibleScrollbar,r=e&&this.gridOptionsService.getScrollbarWidth()||0,o=r===0&&t?16:r;this.addOrRemoveCssClass("ag-scrollbar-invisible",t),Nr(this.getGui(),o),Nr(this.eViewport,o),Nr(this.eContainer,o),this.setDisplayed(e,{skipAriaHidden:!0})},i.prototype.onRowContainerHeightChanged=function(){var e=this.ctrlsService.getGridBodyCtrl(),t=e.getBodyViewportElement();this.eViewport.scrollTop!=t.scrollTop&&(this.eViewport.scrollTop=t.scrollTop)},i.prototype.getScrollPosition=function(){return this.getViewport().scrollTop},i.prototype.setScrollPosition=function(e){tn(this.getViewport())||this.attemptSettingScrollPosition(e),this.getViewport().scrollTop=e},i.TEMPLATE=`<div class="ag-body-vertical-scroll" aria-hidden="true">
            <div class="ag-body-vertical-scroll-viewport" ref="eViewport">
                <div class="ag-body-vertical-scroll-container" ref="eContainer"></div>
            </div>
        </div>`,jb([Oe],i.prototype,"postConstruct",null),i}(Jv),Yb=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),cr=function(){return cr=Object.assign||function(n){for(var i,e=1,t=arguments.length;e<t;e++){i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(n[r]=i[r])}return n},cr.apply(this,arguments)},vn=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},$r=function(n,i){var e=typeof Symbol=="function"&&n[Symbol.iterator];if(!e)return n;var t=e.call(n),r,o=[],a;try{for(;(i===void 0||i-- >0)&&!(r=t.next()).done;)o.push(r.value)}catch(s){a={error:s}}finally{try{r&&!r.done&&(e=t.return)&&e.call(t)}finally{if(a)throw a.error}}return o},za=function(n,i){for(var e=0,t=i.length,r=n.length;e<t;e++,r++)n[r]=i[e];return n},Ef={january:"January",february:"February",march:"March",april:"April",may:"May",june:"June",july:"July",august:"August",september:"September",october:"October",november:"November",december:"December"},_f=["january","february","march","april","may","june","july","august","september","october","november","december"],Kb=function(n){Yb(i,n);function i(){var e=n!==null&&n.apply(this,arguments)||this;return e.dataTypeDefinitions={},e.isWaitingForRowData=!1,e.isColumnTypeOverrideInDataTypeDefinitions=!1,e.columnStateUpdatesPendingInference={},e.columnStateUpdateListenerDestroyFuncs=[],e}return i.prototype.init=function(){var e=this;this.groupHideOpenParents=this.gridOptionsService.is("groupHideOpenParents"),this.addManagedPropertyListener("groupHideOpenParents",function(){e.groupHideOpenParents=e.gridOptionsService.is("groupHideOpenParents")}),this.processDataTypeDefinitions(),this.addManagedPropertyListener("dataTypeDefinitions",function(){e.processDataTypeDefinitions(),e.columnModel.recreateColumnDefs("gridOptionsChanged")})},i.prototype.processDataTypeDefinitions=function(){var e=this,t,r=this.getDefaultDataTypes();this.dataTypeDefinitions={},Object.entries(r).forEach(function(a){var s=$r(a,2),l=s[0],u=s[1];e.dataTypeDefinitions[l]=cr(cr({},u),{groupSafeValueFormatter:e.createGroupSafeValueFormatter(u)})});var o=(t=this.gridOptionsService.get("dataTypeDefinitions"))!==null&&t!==void 0?t:{};this.dataTypeMatchers={},Object.entries(o).forEach(function(a){var s=$r(a,2),l=s[0],u=s[1],c=e.processDataTypeDefinition(u,o,[l],r);c&&(e.dataTypeDefinitions[l]=c,u.dataTypeMatcher&&(e.dataTypeMatchers[l]=u.dataTypeMatcher))}),this.checkObjectValueHandlers(r),["dateString","text","number","boolean","date"].forEach(function(a){var s=e.dataTypeMatchers[a];s&&delete e.dataTypeMatchers[a],e.dataTypeMatchers[a]=s??r[a].dataTypeMatcher})},i.prototype.mergeDataTypeDefinitions=function(e,t){var r=cr(cr({},e),t);return e.columnTypes&&t.columnTypes&&t.appendColumnTypes&&(r.columnTypes=za(za([],$r(this.convertColumnTypes(e.columnTypes))),$r(this.convertColumnTypes(t.columnTypes)))),r},i.prototype.processDataTypeDefinition=function(e,t,r,o){var a,s=e.extendsDataType;if(e.columnTypes&&(this.isColumnTypeOverrideInDataTypeDefinitions=!0),e.extendsDataType===e.baseDataType){var l=o[s];if(!this.validateDataTypeDefinition(e,l,s))return;a=this.mergeDataTypeDefinitions(l,e)}else{if(r.includes(s)){Ut(function(){return console.warn('AG Grid: Data type definition hierarchies (via the "extendsDataType" property) cannot contain circular references.')},"dataTypeExtendsCircularRef");return}var u=t[s];if(!this.validateDataTypeDefinition(e,u,s))return;var c=this.processDataTypeDefinition(u,t,za(za([],$r(r)),[s]),o);if(!c)return;a=this.mergeDataTypeDefinitions(c,e)}return cr(cr({},a),{groupSafeValueFormatter:this.createGroupSafeValueFormatter(a)})},i.prototype.validateDataTypeDefinition=function(e,t,r){return t?t.baseDataType!==e.baseDataType?(Ut(function(){return console.warn('AG Grid: The "baseDataType" property of a data type definition must match that of its parent.')},"dataTypeBaseTypesMatch"),!1):!0:(Ut(function(){return console.warn("AG Grid: The data type definition "+r+" does not exist.")},"dataTypeDefMissing"+r),!1)},i.prototype.createGroupSafeValueFormatter=function(e){var t=this;if(e.valueFormatter)return function(r){var o,a;if(!((o=r.node)===null||o===void 0)&&o.group){var s=r.column.getAggFunc();if(s){if(s==="first"||s==="last")return e.valueFormatter(r);if(e.baseDataType==="number"&&s!=="count"){if(typeof r.value=="number")return e.valueFormatter(r);if(typeof r.value=="object"){if(!r.value)return;if("toNumber"in r.value)return e.valueFormatter(cr(cr({},r),{value:r.value.toNumber()}));if("value"in r.value)return e.valueFormatter(cr(cr({},r),{value:r.value.value}))}}}return}else if(t.groupHideOpenParents&&r.column.isRowGroupActive())return typeof r.value!="string"||!((a=e.dataTypeMatcher)===null||a===void 0)&&a.call(e,r.value)?e.valueFormatter(r):void 0;return e.valueFormatter(r)}},i.prototype.updateColDefAndGetDataTypeDefinitionColumnType=function(e,t,r){var o=t.cellDataType,a=t.field;if(o===void 0&&(o=e.cellDataType),(o==null||o===!0)&&(o=this.canInferCellDataType(e,t)?this.inferCellDataType(a,r):!1),!o){e.cellDataType=!1;return}var s=this.dataTypeDefinitions[o];if(!s){Ut(function(){return console.warn('AG Grid: Missing data type definition - "'+o+'"')},"dataTypeMissing"+o);return}return e.cellDataType=o,s.groupSafeValueFormatter&&(e.valueFormatter=s.groupSafeValueFormatter),s.valueParser&&(e.valueParser=s.valueParser),s.suppressDefaultProperties||this.setColDefPropertiesForBaseDataType(e,s,r),s.columnTypes},i.prototype.updateColDefAndGetColumnType=function(e,t,r){var o,a,s=this.updateColDefAndGetDataTypeDefinitionColumnType(e,t,r),l=(a=(o=t.type)!==null&&o!==void 0?o:s)!==null&&a!==void 0?a:e.type;return e.type=l,l?this.convertColumnTypes(l):void 0},i.prototype.addColumnListeners=function(e){if(this.isWaitingForRowData){var t=this.columnStateUpdatesPendingInference[e.getColId()];if(t){var r=function(o){t.add(o.key)};e.addEventListener(li.EVENT_STATE_UPDATED,r),this.columnStateUpdateListenerDestroyFuncs.push(function(){return e.removeEventListener(li.EVENT_STATE_UPDATED,r)})}}},i.prototype.canInferCellDataType=function(e,t){var r=this,o;if(this.rowModel.getType()!=="clientSide")return!1;var a={cellRenderer:!0,valueGetter:!0,valueParser:!0,refData:!0};if(this.doColDefPropsPreventInference(t,a))return!1;var s=t.type===null?e.type:t.type;if(s){var l=(o=this.gridOptionsService.get("columnTypes"))!==null&&o!==void 0?o:{},u=this.convertColumnTypes(s).some(function(c){var d=l[c.trim()];return d&&r.doColDefPropsPreventInference(d,a)});if(u)return!1}return!this.doColDefPropsPreventInference(e,a)},i.prototype.doColDefPropsPreventInference=function(e,t){var r=this;return[["cellRenderer","agSparklineCellRenderer"],["valueGetter",void 0],["valueParser",void 0],["refData",void 0]].some(function(o){var a=$r(o,2),s=a[0],l=a[1];return r.doesColDefPropPreventInference(e,t,s,l)})},i.prototype.doesColDefPropPreventInference=function(e,t,r,o){if(!t[r])return!1;var a=e[r];return a===null?(t[r]=!1,!1):o===void 0?!!a:a===o},i.prototype.inferCellDataType=function(e,t){var r;if(e){var o,a=this.getInitialData();if(a){var s=e.indexOf(".")>=0&&!this.gridOptionsService.is("suppressFieldDotNotation");o=Jn(a,e,s)}else this.initWaitForRowData(t);if(o!=null){var l=$r((r=Object.entries(this.dataTypeMatchers).find(function(c){var d=$r(c,2);d[0];var f=d[1];return f(o)}))!==null&&r!==void 0?r:["object"],1),u=l[0];return u}}},i.prototype.getInitialData=function(){var e=this.gridOptionsService.get("rowData");if(e?.length)return e[0];if(this.initialData)return this.initialData;var t=this.rowModel.getRootNode().allLeafChildren;return t?.length?t[0].data:null},i.prototype.initWaitForRowData=function(e){var t=this;if(this.columnStateUpdatesPendingInference[e]=new Set,!this.isWaitingForRowData){this.isWaitingForRowData=!0;var r=this.isColumnTypeOverrideInDataTypeDefinitions;r&&this.columnModel.queueResizeOperations();var o=this.addManagedListener(this.eventService,b.EVENT_ROW_DATA_UPDATE_STARTED,function(a){var s=a.firstRowData;if(s){o?.(),t.isWaitingForRowData=!1,t.processColumnsPendingInference(s,r),t.columnStateUpdatesPendingInference={},r&&t.columnModel.processResizeOperations();var l={type:b.EVENT_DATA_TYPES_INFERRED};t.eventService.dispatchEvent(l)}})}},i.prototype.isPendingInference=function(){return this.isWaitingForRowData},i.prototype.processColumnsPendingInference=function(e,t){var r=this;this.initialData=e;var o=[];this.columnStateUpdateListenerDestroyFuncs.forEach(function(l){return l()}),this.columnStateUpdateListenerDestroyFuncs=[];var a={},s={};Object.entries(this.columnStateUpdatesPendingInference).forEach(function(l){var u=$r(l,2),c=u[0],d=u[1],f=r.columnModel.getGridColumn(c);if(f){var y=f.getColDef();if(r.columnModel.resetColumnDefIntoColumn(f)){var S=f.getColDef();if(t&&S.type&&S.type!==y.type){var w=r.getUpdatedColumnState(f,d);w.rowGroup&&w.rowGroupIndex==null&&(a[c]=w),w.pivot&&w.pivotIndex==null&&(s[c]=w),o.push(w)}}}}),t&&o.push.apply(o,za([],$r(this.columnModel.generateColumnStateForRowGroupAndPivotIndexes(a,s)))),o.length&&this.columnModel.applyColumnState({state:o},"cellDataTypeInferred"),this.initialData=null},i.prototype.getUpdatedColumnState=function(e,t){var r=this.columnModel.getColumnStateFromColDef(e);return t.forEach(function(o){delete r[o],o==="rowGroup"?delete r.rowGroupIndex:o==="pivot"&&delete r.pivotIndex}),r},i.prototype.checkObjectValueHandlers=function(e){var t=this.dataTypeDefinitions.object,r=e.object;this.hasObjectValueParser=t.valueParser!==r.valueParser,this.hasObjectValueFormatter=t.valueFormatter!==r.valueFormatter},i.prototype.convertColumnTypes=function(e){var t=[];if(e instanceof Array){var r=e.some(function(o){return typeof o!="string"});r?console.warn("AG Grid: if colDef.type is supplied an array it should be of type 'string[]'"):t=e}else typeof e=="string"?t=e.split(","):console.warn("AG Grid: colDef.type should be of type 'string' | 'string[]'");return t},i.prototype.getDateStringTypeDefinition=function(){return this.dataTypeDefinitions.dateString},i.prototype.getDateParserFunction=function(){return this.getDateStringTypeDefinition().dateParser},i.prototype.getDateFormatterFunction=function(){return this.getDateStringTypeDefinition().dateFormatter},i.prototype.getDataTypeDefinition=function(e){var t=e.getColDef();if(t.cellDataType)return this.dataTypeDefinitions[t.cellDataType]},i.prototype.getBaseDataType=function(e){var t;return(t=this.getDataTypeDefinition(e))===null||t===void 0?void 0:t.baseDataType},i.prototype.checkType=function(e,t){var r;if(t==null)return!0;var o=(r=this.getDataTypeDefinition(e))===null||r===void 0?void 0:r.dataTypeMatcher;return o?o(t):!0},i.prototype.validateColDef=function(e){e.cellDataType==="object"&&(e.valueFormatter===this.dataTypeDefinitions.object.groupSafeValueFormatter&&!this.hasObjectValueFormatter&&Ut(function(){return console.warn('AG Grid: Cell data type is "object" but no value formatter has been provided. Please either provide an object data type definition with a value formatter, or set "colDef.valueFormatter"')},"dataTypeObjectValueFormatter"),e.editable&&e.valueParser===this.dataTypeDefinitions.object.valueParser&&!this.hasObjectValueParser&&Ut(function(){return console.warn('AG Grid: Cell data type is "object" but no value parser has been provided. Please either provide an object data type definition with a value parser, or set "colDef.valueParser"')},"dataTypeObjectValueParser"))},i.prototype.setColDefPropertiesForBaseDataType=function(e,t,r){var o=this,a=function(d,f,y){var S=d.getColDef().valueFormatter;return S===t.groupSafeValueFormatter&&(S=t.valueFormatter),o.valueFormatterService.formatValue(d,f,y,S)},s=gt.__isRegistered(je.SetFilterModule,this.context.getGridId()),l=this.localeService.getLocaleTextFunc(),u=function(d){var f=e.filterParams;e.filterParams=typeof f=="object"?cr(cr({},f),d):d};switch(e.useValueFormatterForExport=!0,e.useValueParserForImport=!0,t.baseDataType){case"number":{e.cellEditor="agNumberCellEditor",s&&u({comparator:function(d,f){var y=d==null?0:parseInt(d),S=f==null?0:parseInt(f);return y===S?0:y>S?1:-1}});break}case"boolean":{e.cellEditor="agCheckboxCellEditor",e.cellRenderer="agCheckboxCellRenderer",e.suppressKeyboardEvent=function(d){return!!d.colDef.editable&&d.event.key===J.SPACE},u(s?{valueFormatter:function(d){return ue(d.value)?l(String(d.value),d.value?"True":"False"):l("blanks","(Blanks)")}}:{maxNumConditions:1,filterOptions:["empty",{displayKey:"true",displayName:"True",predicate:function(d,f){return f},numberOfInputs:0},{displayKey:"false",displayName:"False",predicate:function(d,f){return f===!1},numberOfInputs:0}]});break}case"date":{e.cellEditor="agDateCellEditor",e.keyCreator=function(d){return a(d.column,d.node,d.value)},s&&u({valueFormatter:function(d){var f=a(d.column,d.node,d.value);return ue(f)?f:l("blanks","(Blanks)")},treeList:!0,treeListFormatter:function(d,f){if(f===1&&d!=null){var y=_f[Number(d)-1];return l(y,Ef[y])}return d??l("blanks","(Blanks)")}});break}case"dateString":{e.cellEditor="agDateStringCellEditor",e.keyCreator=function(d){return a(d.column,d.node,d.value)};var c=this.getDateParserFunction();u(s?{valueFormatter:function(d){var f=a(d.column,d.node,d.value);return ue(f)?f:l("blanks","(Blanks)")},treeList:!0,treeListPathGetter:function(d){var f=c(d??void 0);return f?[String(f.getFullYear()),String(f.getMonth()+1),String(f.getDate())]:null},treeListFormatter:function(d,f){if(f===1&&d!=null){var y=_f[Number(d)-1];return l(y,Ef[y])}return d??l("blanks","(Blanks)")}}:{comparator:function(d,f){var y=c(f);return f==null||y<d?-1:y>d?1:0}});break}case"object":{e.cellEditorParams={useFormatter:!0},e.comparator=function(d,f){var y=o.columnModel.getPrimaryColumn(r),S=y?.getColDef();if(!y||!S)return 0;var w=d==null?"":a(y,null,d),E=f==null?"":a(y,null,f);return w===E?0:w>E?1:-1},e.keyCreator=function(d){return a(d.column,d.node,d.value)},s?u({valueFormatter:function(d){var f=a(d.column,d.node,d.value);return ue(f)?f:l("blanks","(Blanks)")}}):e.filterValueGetter=function(d){return a(d.column,d.node,o.valueService.getValue(d.column,d.node))};break}}},i.prototype.getDefaultDataTypes=function(){var e=function(r){return!!r.match("^\\d{4}-\\d{2}-\\d{2}$")},t=this.localeService.getLocaleTextFunc();return{number:{baseDataType:"number",valueParser:function(r){return r.newValue===""?null:Number(r.newValue)},valueFormatter:function(r){return r.value==null?"":typeof r.value!="number"||isNaN(r.value)?t("invalidNumber","Invalid Number"):String(r.value)},dataTypeMatcher:function(r){return typeof r=="number"}},text:{baseDataType:"text",valueParser:function(r){return r.newValue===""?null:os(r.newValue)},dataTypeMatcher:function(r){return typeof r=="string"}},boolean:{baseDataType:"boolean",valueParser:function(r){return r.newValue===""?null:String(r.newValue).toLowerCase()==="true"},valueFormatter:function(r){return r.value==null?"":String(r.value)},dataTypeMatcher:function(r){return typeof r=="boolean"}},date:{baseDataType:"date",valueParser:function(r){return pr(r.newValue==null?null:String(r.newValue))},valueFormatter:function(r){var o;return r.value==null?"":!(r.value instanceof Date)||isNaN(r.value.getTime())?t("invalidDate","Invalid Date"):(o=Mr(r.value,!1))!==null&&o!==void 0?o:""},dataTypeMatcher:function(r){return r instanceof Date}},dateString:{baseDataType:"dateString",dateParser:function(r){var o;return(o=pr(r))!==null&&o!==void 0?o:void 0},dateFormatter:function(r){var o;return(o=Mr(r??null,!1))!==null&&o!==void 0?o:void 0},valueParser:function(r){return e(String(r.newValue))?r.newValue:null},valueFormatter:function(r){return e(String(r.value))?r.value:""},dataTypeMatcher:function(r){return typeof r=="string"&&e(r)}},object:{baseDataType:"object",valueParser:function(){return null},valueFormatter:function(r){var o;return(o=os(r.value))!==null&&o!==void 0?o:""}}}},vn([T("rowModel")],i.prototype,"rowModel",void 0),vn([T("columnModel")],i.prototype,"columnModel",void 0),vn([T("columnUtils")],i.prototype,"columnUtils",void 0),vn([T("valueService")],i.prototype,"valueService",void 0),vn([T("valueFormatterService")],i.prototype,"valueFormatterService",void 0),vn([Oe],i.prototype,"init",null),i=vn([Ue("dataTypeService")],i),i}(ve),Qb=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),bf=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},qb=function(n){Qb(i,n);function i(){return n!==null&&n.apply(this,arguments)||this}return i.prototype.parseValue=function(e,t,r,o){var a=e.getColDef(),s={node:t,data:t?.data,oldValue:o,newValue:r,colDef:a,column:e,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context},l=a.valueParser;return ue(l)?typeof l=="function"?l(s):this.expressionService.evaluate(l,s):r},bf([T("expressionService")],i.prototype,"expressionService",void 0),i=bf([Ue("valueParserService")],i),i}(ve),Df=function(n,i){var e=typeof Symbol=="function"&&n[Symbol.iterator];if(!e)return n;var t=e.call(n),r,o=[],a;try{for(;(i===void 0||i-- >0)&&!(r=t.next()).done;)o.push(r.value)}catch(s){a={error:s}}finally{try{r&&!r.done&&(e=t.return)&&e.call(t)}finally{if(a)throw a.error}}return o},Rf=function(n,i){for(var e=0,t=i.length,r=n.length;e<t;e++,r++)n[r]=i[e];return n},Xb=function(){function n(i,e,t){if(!e){console.error("AG Grid: no gridOptions provided to the grid");return}this.gridOptions=e,new Zb().create(i,e,function(r){var o=new b_(i);r.createBean(o)},void 0,t)}return n.prototype.destroy=function(){this.gridOptions&&this.gridOptions.api&&this.gridOptions.api.destroy()},n}(),Jb=1,Zb=function(){function n(){}return n.prototype.create=function(i,e,t,r,o){var a=this,s,l=!!e.debug,u=(s=e.gridId)!==null&&s!==void 0?s:String(Jb++),c=this.getRegisteredModules(o,u),d=this.createBeansList(e.rowModelType,c,u),f=this.createProvidedBeans(i,e,o);if(d){var y={providedBeanInstances:f,beanClasses:d,debug:l,gridId:u},S=new Qc("AG Grid",function(){return e.debug}),w=new Qc("Context",function(){return y.debug}),E=new vm(y,w),_=E.getBean("beans");this.registerModuleUserComponents(_,c),this.registerStackComponents(_,c),this.registerControllers(_,c),t(E),_.ctrlsService.whenReady(function(){a.setColumnsAndData(_),a.dispatchGridReadyEvent(_);var L=gt.__isRegistered(je.EnterpriseCoreModule,u);S.log("initialised successfully, enterprise = "+L)}),r&&r(E)}},n.prototype.registerControllers=function(i,e){e.forEach(function(t){t.controllers&&t.controllers.forEach(function(r){return i.ctrlsFactory.register(r)})})},n.prototype.registerStackComponents=function(i,e){var t=this.createAgStackComponentsList(e);i.agStackComponentsRegistry.setupComponents(t)},n.prototype.getRegisteredModules=function(i,e){var t=i?i.modules:null,r=gt.__getRegisteredModules(e),o=[],a={},s=function(l,u,c){var d=function(f){a[f.moduleName]||(a[f.moduleName]=!0,o.push(f),gt.__register(f,l,c))};d(u),u.dependantModules&&u.dependantModules.forEach(function(f){return s(l,f,c)})};return t&&t.forEach(function(l){return s(!0,l,e)}),r&&r.forEach(function(l){return s(!gt.__isPackageBased(),l,void 0)}),o},n.prototype.registerModuleUserComponents=function(i,e){var t=this.extractModuleEntity(e,function(r){return r.userComponents?r.userComponents:[]});t.forEach(function(r){i.userComponentRegistry.registerDefaultComponent(r.componentName,r.componentClass)})},n.prototype.createProvidedBeans=function(i,e,t){var r=t?t.frameworkOverrides:null;vt(r)&&(r=new Xv);var o={gridOptions:e,eGridDiv:i,globalEventListener:t?t.globalEventListener:null,globalSyncEventListener:t?t.globalSyncEventListener:null,frameworkOverrides:r};return t&&t.providedBeanInstances&&Object.assign(o,t.providedBeanInstances),o},n.prototype.createAgStackComponentsList=function(i){var e=[{componentName:"AgCheckbox",componentClass:Yl},{componentName:"AgRadioButton",componentClass:Ev},{componentName:"AgToggleButton",componentClass:pE},{componentName:"AgInputTextField",componentClass:Rn},{componentName:"AgInputTextArea",componentClass:hE},{componentName:"AgInputNumberField",componentClass:Dd},{componentName:"AgInputDateField",componentClass:gE},{componentName:"AgInputRange",componentClass:mE},{componentName:"AgRichSelect",componentClass:bE},{componentName:"AgSelect",componentClass:_d},{componentName:"AgSlider",componentClass:RE},{componentName:"AgGridBody",componentClass:vO},{componentName:"AgHeaderRoot",componentClass:RP},{componentName:"AgSortIndicator",componentClass:xd},{componentName:"AgPagination",componentClass:nb},{componentName:"AgOverlayWrapper",componentClass:sb},{componentName:"AgGroupComponent",componentClass:AE},{componentName:"AgPanel",componentClass:qv},{componentName:"AgDialog",componentClass:HE},{componentName:"AgRowContainer",componentClass:AO},{componentName:"AgFakeHorizontalScroll",componentClass:Mb},{componentName:"AgFakeVerticalScroll",componentClass:zb},{componentName:"AgAutocomplete",componentClass:ZE}],t=this.extractModuleEntity(i,function(r){return r.agStackComponents?r.agStackComponents:[]});return e=e.concat(t),e},n.prototype.createBeansList=function(i,e,t){i===void 0&&(i="clientSide");var r=e.filter(function(u){return!u.rowModel||u.rowModel===i}),o={clientSide:je.ClientSideRowModelModule,infinite:je.InfiniteRowModelModule,serverSide:je.ServerSideRowModelModule,viewport:je.ViewportRowModelModule};if(!o[i]){console.error("AG Grid: could not find row model for rowModelType = "+i);return}if(gt.__assertRegistered(o[i],"rowModelType = '"+i+"'",t)){var a=[jv,ub,pb,Cb,I_,Xw,Rw,U_,z_,GP,Yw,tb,AP,Wb,Ym,iE,Qw,rC,Zo,Vb,YE,d_,$w,Jm,PP,lE,JP,y_,xm,S_,s_,wO,G_,h_,O_,eC,WP,MP,zi,p_,ta,CO,Z_,o_,eE,cE,yO,R_,L_,N_,rb,Mm,H_,BP,yb,aC,wb,Tb,aE,Pb,bb,Fb,kb,xb,Kb,qb,Wv],s=this.extractModuleEntity(r,function(u){return u.beans?u.beans:[]});a.push.apply(a,Rf([],Df(s)));var l=[];return a.forEach(function(u){l.indexOf(u)<0&&l.push(u)}),l}},n.prototype.extractModuleEntity=function(i,e){return[].concat.apply([],Rf([],Df(i.map(e))))},n.prototype.setColumnsAndData=function(i){var e=i.gridOptionsService.get("columnDefs");i.columnModel.setColumnDefs(e||[],"gridInitializing"),i.rowModel.start()},n.prototype.dispatchGridReadyEvent=function(i){var e={type:b.EVENT_GRID_READY};i.eventService.dispatchEvent(e)},n}(),$b=function(){function n(){}return n.prototype.wrap=function(i,e,t,r){var o=this;t===void 0&&(t=[]);var a=this.createWrapper(i,r);return e.forEach(function(s){o.createMethod(a,s,!0)}),t.forEach(function(s){o.createMethod(a,s,!1)}),a},n.prototype.unwrap=function(i){return i},n.prototype.createMethod=function(i,e,t){i.addMethod(e,this.createMethodProxy(i,e,t))},n.prototype.createMethodProxy=function(i,e,t){return function(){return i.hasMethod(e)?i.callMethod(e,arguments):(t&&console.warn("AG Grid: Framework component is missing the method "+e+"()"),null)}},n}(),xf;(function(n){n.InsideBase="insideBase",n.InsideEnd="insideEnd",n.Center="center",n.OutsideEnd="outsideEnd"})(xf||(xf={}));/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v30.2.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var sa=typeof global>"u"?{}:global;sa.HTMLElement=typeof HTMLElement>"u"?{}:HTMLElement;sa.HTMLButtonElement=typeof HTMLButtonElement>"u"?{}:HTMLButtonElement;sa.HTMLSelectElement=typeof HTMLSelectElement>"u"?{}:HTMLSelectElement;sa.HTMLInputElement=typeof HTMLInputElement>"u"?{}:HTMLInputElement;sa.Node=typeof Node>"u"?{}:Node;sa.MouseEvent=typeof MouseEvent>"u"?{}:MouseEvent;var Ya=function(n,i){var e=typeof Symbol=="function"&&n[Symbol.iterator];if(!e)return n;var t=e.call(n),r,o=[],a;try{for(;(i===void 0||i-- >0)&&!(r=t.next()).done;)o.push(r.value)}catch(s){a={error:s}}finally{try{r&&!r.done&&(e=t.return)&&e.call(t)}finally{if(a)throw a.error}}return o},Ka=function(n,i){for(var e=0,t=i.length,r=n.length;e<t;e++,r++)n[r]=i[e];return n},eD=function(){function n(i,e,t,r,o,a){this.nextId=0,this.allNodesMap={},this.rootNode=i,this.gridOptionsService=e,this.eventService=t,this.columnModel=r,this.beans=a,this.selectionService=o,this.rootNode.group=!0,this.rootNode.level=-1,this.rootNode.id=n.ROOT_NODE_ID,this.rootNode.allLeafChildren=[],this.rootNode.childrenAfterGroup=[],this.rootNode.childrenAfterSort=[],this.rootNode.childrenAfterAggFilter=[],this.rootNode.childrenAfterFilter=[],this.postConstruct()}return n.prototype.postConstruct=function(){this.suppressParentsInRowNodes=this.gridOptionsService.is("suppressParentsInRowNodes"),this.isRowMasterFunc=this.gridOptionsService.get("isRowMaster"),this.doingMasterDetail=this.gridOptionsService.is("masterDetail")},n.prototype.getCopyOfNodesMap=function(){return St.cloneObject(this.allNodesMap)},n.prototype.getRowNode=function(i){return this.allNodesMap[i]},n.prototype.setRowData=function(i){var e=this;if(typeof i=="string"){console.warn("AG Grid: rowData must be an array, however you passed in a string. If you are loading JSON, make sure you convert the JSON string to JavaScript objects first");return}this.dispatchRowDataUpdateStartedEvent(i);var t=this.rootNode,r=this.rootNode.sibling;t.childrenAfterFilter=null,t.childrenAfterGroup=null,t.childrenAfterAggFilter=null,t.childrenAfterSort=null,t.childrenMapped=null,t.updateHasChildren(),this.nextId=0,this.allNodesMap={},i?t.allLeafChildren=i.map(function(o){return e.createNode(o,e.rootNode,n.TOP_LEVEL)}):(t.allLeafChildren=[],t.childrenAfterGroup=[]),r&&(r.childrenAfterFilter=t.childrenAfterFilter,r.childrenAfterGroup=t.childrenAfterGroup,r.childrenAfterAggFilter=t.childrenAfterAggFilter,r.childrenAfterSort=t.childrenAfterSort,r.childrenMapped=t.childrenMapped,r.allLeafChildren=t.allLeafChildren)},n.prototype.updateRowData=function(i,e){this.dispatchRowDataUpdateStartedEvent(i.add);var t={remove:[],update:[],add:[]},r=[];return this.executeRemove(i,t,r),this.executeUpdate(i,t,r),this.executeAdd(i,t),this.updateSelection(r,"rowDataChanged"),e&&St.sortRowNodesByOrder(this.rootNode.allLeafChildren,e),t},n.prototype.dispatchRowDataUpdateStartedEvent=function(i){var e={type:b.EVENT_ROW_DATA_UPDATE_STARTED,firstRowData:i?.length?i[0]:null};this.eventService.dispatchEvent(e)},n.prototype.updateSelection=function(i,e){var t=i.length>0;if(t&&this.selectionService.setNodesSelected({newValue:!1,nodes:i,suppressFinishActions:!0,source:e}),this.selectionService.updateGroupsFromChildrenSelections(e),t){var r={type:b.EVENT_SELECTION_CHANGED,source:e};this.eventService.dispatchEvent(r)}},n.prototype.executeAdd=function(i,e){var t=this,r,o=i.add,a=i.addIndex;if(!St.missingOrEmpty(o)){var s=o.map(function(w){return t.createNode(w,t.rootNode,n.TOP_LEVEL)});if(typeof a=="number"&&a>=0){var l=this.rootNode.allLeafChildren,u=l.length,c=a,d=this.gridOptionsService.is("treeData");if(d&&a>0&&u>0){for(var f=0;f<u;f++)if(((r=l[f])===null||r===void 0?void 0:r.rowIndex)==a-1){c=f+1;break}}var y=l.slice(0,c),S=l.slice(c,l.length);this.rootNode.allLeafChildren=Ka(Ka(Ka([],Ya(y)),Ya(s)),Ya(S))}else this.rootNode.allLeafChildren=Ka(Ka([],Ya(this.rootNode.allLeafChildren)),Ya(s));this.rootNode.sibling&&(this.rootNode.sibling.allLeafChildren=this.rootNode.allLeafChildren),e.add=s}},n.prototype.executeRemove=function(i,e,t){var r=this,o=i.remove;if(!St.missingOrEmpty(o)){var a={};o.forEach(function(s){var l=r.lookupRowNode(s);l&&(l.isSelected()&&t.push(l),l.clearRowTopAndRowIndex(),a[l.id]=!0,delete r.allNodesMap[l.id],e.remove.push(l))}),this.rootNode.allLeafChildren=this.rootNode.allLeafChildren.filter(function(s){return!a[s.id]}),this.rootNode.sibling&&(this.rootNode.sibling.allLeafChildren=this.rootNode.allLeafChildren)}},n.prototype.executeUpdate=function(i,e,t){var r=this,o=i.update;St.missingOrEmpty(o)||o.forEach(function(a){var s=r.lookupRowNode(a);s&&(s.updateData(a),!s.selectable&&s.isSelected()&&t.push(s),r.setMasterForRow(s,a,n.TOP_LEVEL,!1),e.update.push(s))})},n.prototype.lookupRowNode=function(i){var e=this.gridOptionsService.getCallback("getRowId"),t;if(e){var r=e({data:i,level:0});if(t=this.allNodesMap[r],!t)return console.error("AG Grid: could not find row id="+r+", data item was not found for this id"),null}else if(t=this.rootNode.allLeafChildren.find(function(o){return o.data===i}),!t)return console.error("AG Grid: could not find data item as object was not found",i),console.error("Consider using getRowId to help the Grid find matching row data"),null;return t||null},n.prototype.createNode=function(i,e,t){var r=new Nt(this.beans);return r.group=!1,this.setMasterForRow(r,i,t,!0),e&&!this.suppressParentsInRowNodes&&(r.parent=e),r.level=t,r.setDataAndId(i,this.nextId.toString()),this.allNodesMap[r.id]&&console.warn("AG Grid: duplicate node id '"+r.id+"' detected from getRowId callback, this could cause issues in your grid."),this.allNodesMap[r.id]=r,this.nextId++,r},n.prototype.setMasterForRow=function(i,e,t,r){var o=this.gridOptionsService.is("treeData");if(o)i.setMaster(!1),r&&(i.expanded=!1);else if(this.doingMasterDetail?this.isRowMasterFunc?i.setMaster(this.isRowMasterFunc(e)):i.setMaster(!0):i.setMaster(!1),r){var a=this.columnModel.getRowGroupColumns(),s=a?a.length:0,l=t+s;i.expanded=i.master?this.isExpanded(l):!1}},n.prototype.isExpanded=function(i){var e=this.gridOptionsService.getNum("groupDefaultExpanded");return e===-1?!0:i<e},n.TOP_LEVEL=0,n.ROOT_NODE_ID="ROOT_NODE_ID",n}(),tD=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),lr=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},Qa=function(n,i){var e=typeof Symbol=="function"&&n[Symbol.iterator];if(!e)return n;var t=e.call(n),r,o=[],a;try{for(;(i===void 0||i-- >0)&&!(r=t.next()).done;)o.push(r.value)}catch(s){a={error:s}}finally{try{r&&!r.done&&(e=t.return)&&e.call(t)}finally{if(a)throw a.error}}return o},qa=function(n,i){for(var e=0,t=i.length,r=n.length;e<t;e++,r++)n[r]=i[e];return n},to;(function(n){n[n.Normal=0]="Normal",n[n.AfterFilter=1]="AfterFilter",n[n.AfterFilterAndSort=2]="AfterFilterAndSort",n[n.PivotNodes=3]="PivotNodes"})(to||(to={}));var iD=function(n){tD(i,n);function i(){var e=n!==null&&n.apply(this,arguments)||this;return e.onRowHeightChanged_debounced=St.debounce(e.onRowHeightChanged.bind(e),100),e.rowsToDisplay=[],e}return i.prototype.init=function(){var e=this,t=this.refreshModel.bind(this,{step:$t.EVERYTHING}),r=!this.gridOptionsService.is("suppressAnimationFrame"),o=this.refreshModel.bind(this,{step:$t.EVERYTHING,afterColumnsChanged:!0,keepRenderedRows:!0,animate:r});this.addManagedListener(this.eventService,b.EVENT_NEW_COLUMNS_LOADED,o),this.addManagedListener(this.eventService,b.EVENT_COLUMN_ROW_GROUP_CHANGED,t),this.addManagedListener(this.eventService,b.EVENT_COLUMN_VALUE_CHANGED,this.onValueChanged.bind(this)),this.addManagedListener(this.eventService,b.EVENT_COLUMN_PIVOT_CHANGED,this.refreshModel.bind(this,{step:$t.PIVOT})),this.addManagedListener(this.eventService,b.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this)),this.addManagedListener(this.eventService,b.EVENT_SORT_CHANGED,this.onSortChanged.bind(this)),this.addManagedListener(this.eventService,b.EVENT_COLUMN_PIVOT_MODE_CHANGED,t),this.addManagedListener(this.eventService,b.EVENT_GRID_STYLES_CHANGED,this.onGridStylesChanges.bind(this));var a=this.refreshModel.bind(this,{step:$t.MAP,keepRenderedRows:!0,animate:r});this.addManagedPropertyListeners(["groupRemoveSingleChildren","groupRemoveLowestSingleChildren","groupIncludeFooter"],a);var s=this.refreshModel.bind(this,{step:$t.AGGREGATE,keepRenderedRows:!0,animate:r});this.addManagedPropertyListeners(["groupIncludeTotalFooter"],s),this.rootNode=new Nt(this.beans),this.nodeManager=new eD(this.rootNode,this.gridOptionsService,this.eventService,this.columnModel,this.selectionService,this.beans),this.addManagedPropertyListener("treeData",function(){e.setRowData(e.rootNode.allLeafChildren.map(function(l){return l.data}))})},i.prototype.start=function(){var e=this.gridOptionsService.get("rowData");e&&this.setRowData(e)},i.prototype.ensureRowHeightsValid=function(e,t,r,o){var a,s=!1;do{a=!1;for(var l=this.getRowIndexAtPixel(e),u=this.getRowIndexAtPixel(t),c=Math.max(l,r),d=Math.min(u,o),f=c;f<=d;f++){var y=this.getRow(f);if(y.rowHeightEstimated){var S=this.gridOptionsService.getRowHeightForNode(y);y.setRowHeight(S.height),a=!0,s=!0}}a&&this.setRowTopAndRowIndex()}while(a);return s},i.prototype.setRowTopAndRowIndex=function(){for(var e=this.environment.getDefaultRowHeight(),t=0,r=new Set,o=this.gridOptionsService.isDomLayout("normal"),a=0;a<this.rowsToDisplay.length;a++){var s=this.rowsToDisplay[a];if(s.id!=null&&r.add(s.id),s.rowHeight==null){var l=this.gridOptionsService.getRowHeightForNode(s,o,e);s.setRowHeight(l.height,l.estimated)}s.setRowTop(t),s.setRowIndex(a),t+=s.rowHeight}return r},i.prototype.clearRowTopAndRowIndex=function(e,t){var r=e.isActive(),o=function(s){s&&s.id!=null&&!t.has(s.id)&&s.clearRowTopAndRowIndex()},a=function(s){if(o(s),o(s.detailNode),o(s.sibling),s.hasChildren()&&s.childrenAfterGroup){var l=s.level==-1,u=r&&!l&&!s.expanded;u||s.childrenAfterGroup.forEach(a)}};a(this.rootNode)},i.prototype.ensureRowsAtPixel=function(e,t,r){var o=this;r===void 0&&(r=0);var a=this.getRowIndexAtPixel(t),s=this.getRow(a),l=!this.gridOptionsService.is("suppressAnimationFrame");return s===e[0]?!1:(e.forEach(function(u){St.removeFromArray(o.rootNode.allLeafChildren,u)}),e.forEach(function(u,c){St.insertIntoArray(o.rootNode.allLeafChildren,u,Math.max(a+r,0)+c)}),this.refreshModel({step:$t.EVERYTHING,keepRenderedRows:!0,keepEditingRows:!0,animate:l}),!0)},i.prototype.highlightRowAtPixel=function(e,t){var r=t!=null?this.getRowIndexAtPixel(t):null,o=r!=null?this.getRow(r):null;if(!o||!e||o===e||t==null){this.lastHighlightedRow&&(this.lastHighlightedRow.setHighlighted(null),this.lastHighlightedRow=null);return}var a=this.getHighlightPosition(t,o);this.lastHighlightedRow&&this.lastHighlightedRow!==o&&(this.lastHighlightedRow.setHighlighted(null),this.lastHighlightedRow=null),o.setHighlighted(a),this.lastHighlightedRow=o},i.prototype.getHighlightPosition=function(e,t){if(!t){var r=this.getRowIndexAtPixel(e);if(t=this.getRow(r||0),!t)return To.Below}var o=t.rowTop,a=t.rowHeight;return e-o<a/2?To.Above:To.Below},i.prototype.getLastHighlightedRowNode=function(){return this.lastHighlightedRow},i.prototype.isLastRowIndexKnown=function(){return!0},i.prototype.getRowCount=function(){return this.rowsToDisplay?this.rowsToDisplay.length:0},i.prototype.getTopLevelRowCount=function(){var e=this.rowsToDisplay&&this.rowsToDisplay[0]===this.rootNode;if(e)return 1;var t=this.rootNode.childrenAfterAggFilter;return t?t.length:0},i.prototype.getTopLevelRowDisplayedIndex=function(e){var t=this.rowsToDisplay&&this.rowsToDisplay[0]===this.rootNode;if(t)return e;var r=this.rootNode.childrenAfterSort[e];if(this.gridOptionsService.is("groupHideOpenParents"))for(;r.expanded&&r.childrenAfterSort&&r.childrenAfterSort.length>0;)r=r.childrenAfterSort[0];return r.rowIndex},i.prototype.getRowBounds=function(e){if(St.missing(this.rowsToDisplay))return null;var t=this.rowsToDisplay[e];return t?{rowTop:t.rowTop,rowHeight:t.rowHeight}:null},i.prototype.onRowGroupOpened=function(){var e=this.gridOptionsService.isAnimateRows();this.refreshModel({step:$t.MAP,keepRenderedRows:!0,animate:e})},i.prototype.onFilterChanged=function(e){if(!e.afterDataChange){var t=this.gridOptionsService.isAnimateRows(),r=e.columns.length===0||e.columns.some(function(a){return a.isPrimary()}),o=r?$t.FILTER:$t.FILTER_AGGREGATES;this.refreshModel({step:o,keepRenderedRows:!0,animate:t})}},i.prototype.onSortChanged=function(){var e=this.gridOptionsService.isAnimateRows();this.refreshModel({step:$t.SORT,keepRenderedRows:!0,animate:e,keepEditingRows:!0})},i.prototype.getType=function(){return"clientSide"},i.prototype.onValueChanged=function(){this.columnModel.isPivotActive()?this.refreshModel({step:$t.PIVOT}):this.refreshModel({step:$t.AGGREGATE})},i.prototype.createChangePath=function(e){var t=St.missingOrEmpty(e),r=new kd(!1,this.rootNode);return(t||this.gridOptionsService.is("treeData"))&&r.setInactive(),r},i.prototype.isSuppressModelUpdateAfterUpdateTransaction=function(e){if(!this.gridOptionsService.is("suppressModelUpdateAfterUpdateTransaction")||e.rowNodeTransactions==null)return!1;var t=e.rowNodeTransactions.filter(function(o){return o.add!=null&&o.add.length>0||o.remove!=null&&o.remove.length>0}),r=t==null||t.length==0;return r},i.prototype.buildRefreshModelParams=function(e){var t=$t.EVERYTHING,r={everything:$t.EVERYTHING,group:$t.EVERYTHING,filter:$t.FILTER,map:$t.MAP,aggregate:$t.AGGREGATE,sort:$t.SORT,pivot:$t.PIVOT};if(St.exists(e)&&(t=r[e]),St.missing(t)){console.error("AG Grid: invalid step "+e+", available steps are "+Object.keys(r).join(", "));return}var o=!this.gridOptionsService.is("suppressAnimationFrame"),a={step:t,keepRenderedRows:!0,keepEditingRows:!0,animate:o};return a},i.prototype.refreshModel=function(e){var t=typeof e=="object"&&"step"in e?e:this.buildRefreshModelParams(e);if(t&&!this.isSuppressModelUpdateAfterUpdateTransaction(t)){var r=this.createChangePath(t.rowNodeTransactions);switch(t.step){case $t.EVERYTHING:this.doRowGrouping(t.groupState,t.rowNodeTransactions,t.rowNodeOrder,r,!!t.afterColumnsChanged);case $t.FILTER:this.doFilter(r);case $t.PIVOT:this.doPivot(r);case $t.AGGREGATE:this.doAggregate(r);case $t.FILTER_AGGREGATES:this.doFilterAggregates(r);case $t.SORT:this.doSort(t.rowNodeTransactions,r);case $t.MAP:this.doRowsToDisplay()}var o=this.setRowTopAndRowIndex();this.clearRowTopAndRowIndex(r,o);var a={type:b.EVENT_MODEL_UPDATED,animate:t.animate,keepRenderedRows:t.keepRenderedRows,newData:t.newData,newPage:!1,keepUndoRedoStack:t.keepUndoRedoStack};this.eventService.dispatchEvent(a)}},i.prototype.isEmpty=function(){var e=St.missing(this.rootNode.allLeafChildren)||this.rootNode.allLeafChildren.length===0;return St.missing(this.rootNode)||e||!this.columnModel.isReady()},i.prototype.isRowsToRender=function(){return St.exists(this.rowsToDisplay)&&this.rowsToDisplay.length>0},i.prototype.getNodesInRangeForSelection=function(e,t){var r=!t,o=!1,a=[],s=this.gridOptionsService.is("groupSelectsChildren");return this.forEachNodeAfterFilterAndSort(function(l){if(!o){if(r&&(l===t||l===e)&&(o=!0,l.group&&s)){a.push.apply(a,qa([],Qa(l.allLeafChildren)));return}if(!r){if(l!==t&&l!==e)return;r=!0}var u=!l.group||!s;if(u){a.push(l);return}}}),a},i.prototype.setDatasource=function(e){console.error("AG Grid: should never call setDatasource on clientSideRowController")},i.prototype.getTopLevelNodes=function(){return this.rootNode?this.rootNode.childrenAfterGroup:null},i.prototype.getRootNode=function(){return this.rootNode},i.prototype.getRow=function(e){return this.rowsToDisplay[e]},i.prototype.isRowPresent=function(e){return this.rowsToDisplay.indexOf(e)>=0},i.prototype.getRowIndexAtPixel=function(e){if(this.isEmpty()||this.rowsToDisplay.length===0)return-1;var t=0,r=this.rowsToDisplay.length-1;if(e<=0)return 0;var o=St.last(this.rowsToDisplay);if(o.rowTop<=e)return this.rowsToDisplay.length-1;for(var a=-1,s=-1;;){var l=Math.floor((t+r)/2),u=this.rowsToDisplay[l];if(this.isRowInPixel(u,e))return l;u.rowTop<e?t=l+1:u.rowTop>e&&(r=l-1);var c=a===t&&s===r;if(c)return l;a=t,s=r}},i.prototype.isRowInPixel=function(e,t){var r=e.rowTop,o=e.rowTop+e.rowHeight,a=r<=t&&o>t;return a},i.prototype.forEachLeafNode=function(e){this.rootNode.allLeafChildren&&this.rootNode.allLeafChildren.forEach(function(t,r){return e(t,r)})},i.prototype.forEachNode=function(e,t){t===void 0&&(t=!1),this.recursivelyWalkNodesAndCallback({nodes:qa([],Qa(this.rootNode.childrenAfterGroup||[])),callback:e,recursionType:to.Normal,index:0,includeFooterNodes:t})},i.prototype.forEachNodeAfterFilter=function(e,t){t===void 0&&(t=!1),this.recursivelyWalkNodesAndCallback({nodes:qa([],Qa(this.rootNode.childrenAfterAggFilter||[])),callback:e,recursionType:to.AfterFilter,index:0,includeFooterNodes:t})},i.prototype.forEachNodeAfterFilterAndSort=function(e,t){t===void 0&&(t=!1),this.recursivelyWalkNodesAndCallback({nodes:qa([],Qa(this.rootNode.childrenAfterSort||[])),callback:e,recursionType:to.AfterFilterAndSort,index:0,includeFooterNodes:t})},i.prototype.forEachPivotNode=function(e,t){t===void 0&&(t=!1),this.recursivelyWalkNodesAndCallback({nodes:[this.rootNode],callback:e,recursionType:to.PivotNodes,index:0,includeFooterNodes:t})},i.prototype.recursivelyWalkNodesAndCallback=function(e){for(var t,r=e.nodes,o=e.callback,a=e.recursionType,s=e.includeFooterNodes,l=e.index,u=0;u<r.length;u++){var c=r[u];if(o(c,l++),c.hasChildren()&&!c.footer){var d=null;switch(a){case to.Normal:d=c.childrenAfterGroup;break;case to.AfterFilter:d=c.childrenAfterAggFilter;break;case to.AfterFilterAndSort:d=c.childrenAfterSort;break;case to.PivotNodes:d=c.leafGroup?null:c.childrenAfterSort;break}d&&(l=this.recursivelyWalkNodesAndCallback({nodes:qa([],Qa(d)),callback:o,recursionType:a,index:l,includeFooterNodes:s}))}}var f=(t=r[0])===null||t===void 0?void 0:t.parent;if(!s||!f)return l;var y=f===this.rootNode;if(y){var S=this.gridOptionsService.is("groupIncludeTotalFooter");if(!S)return l}else{var w=this.gridOptionsService.getGroupIncludeFooter();if(!w({node:f}))return l}return f.createFooter(),o(f.sibling,l++),l},i.prototype.doAggregate=function(e){this.aggregationStage&&this.aggregationStage.execute({rowNode:this.rootNode,changedPath:e})},i.prototype.doFilterAggregates=function(e){this.filterAggregatesStage?this.filterAggregatesStage.execute({rowNode:this.rootNode,changedPath:e}):this.rootNode.childrenAfterAggFilter=this.rootNode.childrenAfterFilter},i.prototype.expandOrCollapseAll=function(e){var t=this.gridOptionsService.is("treeData"),r=this.columnModel.isPivotActive(),o=function(l){l&&l.forEach(function(u){var c=function(){u.expanded=e,o(u.childrenAfterGroup)};if(t){var d=St.exists(u.childrenAfterGroup);d&&c();return}if(r){var f=!u.leafGroup;f&&c();return}var y=u.group;y&&c()})};this.rootNode&&o(this.rootNode.childrenAfterGroup),this.refreshModel({step:$t.MAP});var a=e?"expandAll":"collapseAll",s={type:b.EVENT_EXPAND_COLLAPSE_ALL,source:a};this.eventService.dispatchEvent(s)},i.prototype.doSort=function(e,t){this.sortStage.execute({rowNode:this.rootNode,rowNodeTransactions:e,changedPath:t})},i.prototype.doRowGrouping=function(e,t,r,o,a){if(this.groupStage){if(t?this.groupStage.execute({rowNode:this.rootNode,rowNodeTransactions:t,rowNodeOrder:r,changedPath:o}):(this.groupStage.execute({rowNode:this.rootNode,changedPath:o,afterColumnsChanged:a}),this.restoreGroupState(e)),this.gridOptionsService.is("groupSelectsChildren")){var s=this.selectionService.updateGroupsFromChildrenSelections("rowGroupChanged",o);if(s){var l={type:b.EVENT_SELECTION_CHANGED,source:"rowGroupChanged"};this.eventService.dispatchEvent(l)}}}else this.rootNode.childrenAfterGroup=this.rootNode.allLeafChildren,this.rootNode.sibling&&(this.rootNode.sibling.childrenAfterGroup=this.rootNode.childrenAfterGroup),this.rootNode.updateHasChildren()},i.prototype.restoreGroupState=function(e){e&&St.traverseNodesWithKey(this.rootNode.childrenAfterGroup,function(t,r){typeof e[r]=="boolean"&&(t.expanded=e[r])})},i.prototype.doFilter=function(e){this.filterStage.execute({rowNode:this.rootNode,changedPath:e})},i.prototype.doPivot=function(e){this.pivotStage&&this.pivotStage.execute({rowNode:this.rootNode,changedPath:e})},i.prototype.getGroupState=function(){if(!this.rootNode.childrenAfterGroup||!this.gridOptionsService.is("rememberGroupStateWhenNewData"))return null;var e={};return St.traverseNodesWithKey(this.rootNode.childrenAfterGroup,function(t,r){return e[r]=t.expanded}),e},i.prototype.getCopyOfNodesMap=function(){return this.nodeManager.getCopyOfNodesMap()},i.prototype.getRowNode=function(e){var t=typeof e=="string"&&e.indexOf(Nt.ID_PREFIX_ROW_GROUP)==0;if(t){var r=void 0;return this.forEachNode(function(o){o.id===e&&(r=o)}),r}return this.nodeManager.getRowNode(e)},i.prototype.setRowData=function(e){var t=this.getGroupState();this.nodeManager.setRowData(e),this.selectionService.reset(),this.filterManager.onNewRowsLoaded("rowDataUpdated");var r={type:b.EVENT_ROW_DATA_UPDATED};this.eventService.dispatchEvent(r),this.refreshModel({step:$t.EVERYTHING,groupState:t,newData:!0})},i.prototype.batchUpdateRowData=function(e,t){var r=this;if(this.applyAsyncTransactionsTimeout==null){this.rowDataTransactionBatch=[];var o=this.gridOptionsService.getAsyncTransactionWaitMillis();this.applyAsyncTransactionsTimeout=window.setTimeout(function(){r.executeBatchUpdateRowData()},o)}this.rowDataTransactionBatch.push({rowDataTransaction:e,callback:t})},i.prototype.flushAsyncTransactions=function(){this.applyAsyncTransactionsTimeout!=null&&(clearTimeout(this.applyAsyncTransactionsTimeout),this.executeBatchUpdateRowData())},i.prototype.executeBatchUpdateRowData=function(){var e=this;this.valueCache.onDataChanged();var t=[],r=[],o=!1;if(this.rowDataTransactionBatch&&this.rowDataTransactionBatch.forEach(function(s){var l=e.nodeManager.updateRowData(s.rowDataTransaction,void 0);r.push(l),s.callback&&t.push(s.callback.bind(null,l)),typeof s.rowDataTransaction.addIndex=="number"&&(o=!0)}),this.commonUpdateRowData(r,void 0,o),t.length>0&&window.setTimeout(function(){t.forEach(function(s){return s()})},0),r.length>0){var a={type:b.EVENT_ASYNC_TRANSACTIONS_FLUSHED,results:r};this.eventService.dispatchEvent(a)}this.rowDataTransactionBatch=null,this.applyAsyncTransactionsTimeout=void 0},i.prototype.updateRowData=function(e,t){this.valueCache.onDataChanged();var r=this.nodeManager.updateRowData(e,t),o=typeof e.addIndex=="number";return this.commonUpdateRowData([r],t,o),r},i.prototype.createRowNodeOrder=function(){var e=this.gridOptionsService.is("suppressMaintainUnsortedOrder");if(!e){var t={};if(this.rootNode&&this.rootNode.allLeafChildren)for(var r=0;r<this.rootNode.allLeafChildren.length;r++){var o=this.rootNode.allLeafChildren[r];t[o.id]=r}return t}},i.prototype.commonUpdateRowData=function(e,t,r){var o=!this.gridOptionsService.is("suppressAnimationFrame");r&&(t=this.createRowNodeOrder()),this.refreshModel({step:$t.EVERYTHING,rowNodeTransactions:e,rowNodeOrder:t,keepRenderedRows:!0,keepEditingRows:!0,animate:o}),this.filterManager.onNewRowsLoaded("rowDataUpdated");var a={type:b.EVENT_ROW_DATA_UPDATED};this.eventService.dispatchEvent(a)},i.prototype.doRowsToDisplay=function(){this.rowsToDisplay=this.flattenStage.execute({rowNode:this.rootNode})},i.prototype.onRowHeightChanged=function(){this.refreshModel({step:$t.MAP,keepRenderedRows:!0,keepEditingRows:!0,keepUndoRedoStack:!0})},i.prototype.onRowHeightChangedDebounced=function(){this.onRowHeightChanged_debounced()},i.prototype.resetRowHeights=function(){var e=this.resetRowHeightsForAllRowNodes();this.rootNode.setRowHeight(this.rootNode.rowHeight,!0),this.rootNode.sibling&&this.rootNode.sibling.setRowHeight(this.rootNode.sibling.rowHeight,!0),e&&this.onRowHeightChanged()},i.prototype.resetRowHeightsForAllRowNodes=function(){var e=!1;return this.forEachNode(function(t){t.setRowHeight(t.rowHeight,!0);var r=t.detailNode;r&&r.setRowHeight(r.rowHeight,!0),t.sibling&&t.sibling.setRowHeight(t.sibling.rowHeight,!0),e=!0}),e},i.prototype.onGridStylesChanges=function(){this.columnModel.isAutoRowHeightActive()||this.resetRowHeights()},lr([T("columnModel")],i.prototype,"columnModel",void 0),lr([T("selectionService")],i.prototype,"selectionService",void 0),lr([T("filterManager")],i.prototype,"filterManager",void 0),lr([T("valueCache")],i.prototype,"valueCache",void 0),lr([T("beans")],i.prototype,"beans",void 0),lr([T("filterStage")],i.prototype,"filterStage",void 0),lr([T("sortStage")],i.prototype,"sortStage",void 0),lr([T("flattenStage")],i.prototype,"flattenStage",void 0),lr([Zt("groupStage")],i.prototype,"groupStage",void 0),lr([Zt("aggregationStage")],i.prototype,"aggregationStage",void 0),lr([Zt("pivotStage")],i.prototype,"pivotStage",void 0),lr([Zt("filterAggregatesStage")],i.prototype,"filterAggregatesStage",void 0),lr([Oe],i.prototype,"init",null),i=lr([Ue("rowModel")],i),i}(ve),rD=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Af=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},oD=function(n){rD(i,n);function i(){return n!==null&&n.apply(this,arguments)||this}return i.prototype.execute=function(e){var t=e.changedPath;this.filterService.filter(t)},Af([T("filterService")],i.prototype,"filterService",void 0),i=Af([Ue("filterStage")],i),i}(ve),nD=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),ol=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},aD=function(n){nD(i,n);function i(){return n!==null&&n.apply(this,arguments)||this}return i.prototype.execute=function(e){var t=this,r=this.sortController.getSortOptions(),o=St.exists(r)&&r.length>0,a=o&&St.exists(e.rowNodeTransactions)&&this.gridOptionsService.is("deltaSort"),s=r.some(function(l){var u=t.gridOptionsService.isColumnsSortingCoupledToGroup();return u?l.column.isPrimary()&&l.column.isRowGroupActive():!!l.column.getColDef().showRowGroup});this.sortService.sort(r,o,a,e.rowNodeTransactions,e.changedPath,s)},ol([T("sortService")],i.prototype,"sortService",void 0),ol([T("sortController")],i.prototype,"sortController",void 0),ol([T("columnModel")],i.prototype,"columnModel",void 0),i=ol([Ue("sortStage")],i),i}(ve),sD=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),vc=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},lD=function(n){sD(i,n);function i(){return n!==null&&n.apply(this,arguments)||this}return i.prototype.execute=function(e){var t=e.rowNode,r=[],o=this.columnModel.isPivotMode(),a=o&&t.leafGroup,s=a?[t]:t.childrenAfterSort,l=this.getFlattenDetails();this.recursivelyAddToRowsToDisplay(l,s,r,o,0);var u=r.length>0,c=!a&&u&&l.groupIncludeTotalFooter;return c&&(t.createFooter(),this.addRowNodeToRowsToDisplay(l,t.sibling,r,0)),r},i.prototype.getFlattenDetails=function(){var e=this.gridOptionsService.is("groupRemoveSingleChildren"),t=!e&&this.gridOptionsService.is("groupRemoveLowestSingleChildren");return{groupRemoveLowestSingleChildren:t,groupRemoveSingleChildren:e,isGroupMultiAutoColumn:this.gridOptionsService.isGroupMultiAutoColumn(),hideOpenParents:this.gridOptionsService.is("groupHideOpenParents"),groupIncludeTotalFooter:this.gridOptionsService.is("groupIncludeTotalFooter"),getGroupIncludeFooter:this.gridOptionsService.getGroupIncludeFooter()}},i.prototype.recursivelyAddToRowsToDisplay=function(e,t,r,o,a){if(!St.missingOrEmpty(t))for(var s=0;s<t.length;s++){var l=t[s],u=l.hasChildren(),c=o&&!u,d=e.groupRemoveSingleChildren&&u&&l.childrenAfterGroup.length===1,f=e.groupRemoveLowestSingleChildren&&u&&l.leafGroup&&l.childrenAfterGroup.length===1,y=o&&l.leafGroup,S=e.hideOpenParents&&l.expanded&&!l.master&&!y,w=!c&&!S&&!d&&!f;if(w&&this.addRowNodeToRowsToDisplay(e,l,r,a),!(o&&l.leafGroup)){if(u){var E=d||f;if(l.expanded||E){var _=E?a:a+1;this.recursivelyAddToRowsToDisplay(e,l.childrenAfterSort,r,o,_);var L=e.getGroupIncludeFooter({node:l});L?(l.createFooter(),this.addRowNodeToRowsToDisplay(e,l.sibling,r,_)):l.destroyFooter()}}else if(l.master&&l.expanded){var P=this.createDetailNode(l);this.addRowNodeToRowsToDisplay(e,P,r,a)}}}},i.prototype.addRowNodeToRowsToDisplay=function(e,t,r,o){r.push(t),t.setUiLevel(e.isGroupMultiAutoColumn?0:o)},i.prototype.createDetailNode=function(e){if(St.exists(e.detailNode))return e.detailNode;var t=new Nt(this.beans);return t.detail=!0,t.selectable=!1,t.parent=e,St.exists(e.id)&&(t.id="detail_"+e.id),t.data=e.data,t.level=e.level+1,e.detailNode=t,t},vc([T("columnModel")],i.prototype,"columnModel",void 0),vc([T("beans")],i.prototype,"beans",void 0),i=vc([Ue("flattenStage")],i),i}(ve),uD=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),nl=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},cD=function(n){uD(i,n);function i(){return n!==null&&n.apply(this,arguments)||this}return i.prototype.init=function(){this.postSortFunc=this.gridOptionsService.getCallback("postSortRows")},i.prototype.sort=function(e,t,r,o,a,s){var l=this,u=this.gridOptionsService.is("groupMaintainOrder"),c=this.columnModel.getAllGridColumns().some(function(S){return S.isRowGroupActive()}),d={};r&&o&&(d=this.calculateDirtyNodes(o));var f=this.columnModel.isPivotMode(),y=function(S){l.pullDownGroupDataForHideOpenParents(S.childrenAfterAggFilter,!0);var w=f&&S.leafGroup,E=u&&c&&!S.leafGroup&&!s;if(E){var _=S.childrenAfterAggFilter.slice(0);if(S.childrenAfterSort){var L={};S.childrenAfterSort.forEach(function(V,ne){L[V.id]=ne}),_.sort(function(V,ne){var ee,re;return((ee=L[V.id])!==null&&ee!==void 0?ee:0)-((re=L[ne.id])!==null&&re!==void 0?re:0)})}S.childrenAfterSort=_}else!t||w?S.childrenAfterSort=S.childrenAfterAggFilter.slice(0):r?S.childrenAfterSort=l.doDeltaSort(S,d,a,e):S.childrenAfterSort=l.rowNodeSorter.doFullSort(S.childrenAfterAggFilter,e);if(S.sibling&&(S.sibling.childrenAfterSort=S.childrenAfterSort),l.updateChildIndexes(S),l.postSortFunc){var P={nodes:S.childrenAfterSort};l.postSortFunc(P)}};a&&a.forEachChangedNodeDepthFirst(y),this.updateGroupDataForHideOpenParents(a)},i.prototype.calculateDirtyNodes=function(e){var t={},r=function(o){o&&o.forEach(function(a){return t[a.id]=!0})};return e&&e.forEach(function(o){r(o.add),r(o.update),r(o.remove)}),t},i.prototype.doDeltaSort=function(e,t,r,o){var a=this,s=e.childrenAfterAggFilter,l=e.childrenAfterSort;if(!l)return this.rowNodeSorter.doFullSort(s,o);var u={},c=[];s.forEach(function(S){t[S.id]||!r.canSkip(S)?c.push(S):u[S.id]=!0});var d=l.filter(function(S){return u[S.id]}),f=function(S,w){return{currentPos:w,rowNode:S}},y=c.map(f).sort(function(S,w){return a.rowNodeSorter.compareRowNodes(o,S,w)});return this.mergeSortedArrays(o,y,d.map(f)).map(function(S){var w=S.rowNode;return w})},i.prototype.mergeSortedArrays=function(e,t,r){for(var o=[],a=0,s=0;a<t.length&&s<r.length;){var l=this.rowNodeSorter.compareRowNodes(e,t[a],r[s]);l<0?o.push(t[a++]):o.push(r[s++])}for(;a<t.length;)o.push(t[a++]);for(;s<r.length;)o.push(r[s++]);return o},i.prototype.updateChildIndexes=function(e){if(!St.missing(e.childrenAfterSort))for(var t=e.childrenAfterSort,r=0;r<t.length;r++){var o=t[r],a=r===0,s=r===e.childrenAfterSort.length-1;o.setFirstChild(a),o.setLastChild(s),o.setChildIndex(r)}},i.prototype.updateGroupDataForHideOpenParents=function(e){var t=this;if(this.gridOptionsService.is("groupHideOpenParents")){if(this.gridOptionsService.is("treeData")){var r="AG Grid: The property hideOpenParents dose not work with Tree Data. This is because Tree Data has values at the group level, it doesn't make sense to hide them (as opposed to Row Grouping, which only has Aggregated Values at the group level).";return St.doOnce(function(){return console.warn(r)},"sortService.hideOpenParentsWithTreeData"),!1}var o=function(a){t.pullDownGroupDataForHideOpenParents(a.childrenAfterSort,!1),a.childrenAfterSort.forEach(function(s){s.hasChildren()&&o(s)})};e&&e.executeFromRootNode(function(a){return o(a)})}},i.prototype.pullDownGroupDataForHideOpenParents=function(e,t){var r=this;!this.gridOptionsService.is("groupHideOpenParents")||St.missing(e)||e.forEach(function(o){var a=r.columnModel.getGroupDisplayColumns();a.forEach(function(s){var l=s.getColDef().showRowGroup;if(typeof l!="string"){console.error("AG Grid: groupHideOpenParents only works when specifying specific columns for colDef.showRowGroup");return}var u=l,c=r.columnModel.getPrimaryColumn(u),d=c===o.rowGroupColumn;if(!d)if(t)o.setGroupValue(s.getId(),void 0);else{var f=o.getFirstChildOfFirstChild(c);f&&o.setGroupValue(s.getId(),f.key)}})})},nl([T("columnModel")],i.prototype,"columnModel",void 0),nl([T("rowNodeSorter")],i.prototype,"rowNodeSorter",void 0),nl([Oe],i.prototype,"init",null),i=nl([Ue("sortService")],i),i}(ve),dD=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Lf=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},pD=function(n){dD(i,n);function i(){return n!==null&&n.apply(this,arguments)||this}return i.prototype.filter=function(e){var t=this.filterManager.isChildFilterPresent();this.filterNodes(t,e)},i.prototype.filterNodes=function(e,t){var r=this,o=function(u,c){u.hasChildren()&&e&&!c?u.childrenAfterFilter=u.childrenAfterGroup.filter(function(d){var f=d.childrenAfterFilter&&d.childrenAfterFilter.length>0,y=d.data&&r.filterManager.doesRowPassFilter({rowNode:d});return f||y}):u.childrenAfterFilter=u.childrenAfterGroup,u.sibling&&(u.sibling.childrenAfterFilter=u.childrenAfterFilter)};if(this.doingTreeDataFiltering()){var a=function(u,c){if(u.childrenAfterGroup)for(var d=0;d<u.childrenAfterGroup.length;d++){var f=u.childrenAfterGroup[d],y=c||r.filterManager.doesRowPassFilter({rowNode:f});f.childrenAfterGroup?a(u.childrenAfterGroup[d],y):o(f,y)}o(u,c)},s=function(u){return a(u,!1)};t.executeFromRootNode(s)}else{var l=function(u){return o(u,!1)};t.forEachChangedNodeDepthFirst(l,!0)}},i.prototype.doingTreeDataFiltering=function(){return this.gridOptionsService.is("treeData")&&!this.gridOptionsService.is("excludeChildrenWhenTreeDataFiltering")},Lf([T("filterManager")],i.prototype,"filterManager",void 0),i=Lf([Ue("filterService")],i),i}(ve),fD=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),al=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},hD=function(n,i){var e=typeof Symbol=="function"&&n[Symbol.iterator];if(!e)return n;var t=e.call(n),r,o=[],a;try{for(;(i===void 0||i-- >0)&&!(r=t.next()).done;)o.push(r.value)}catch(s){a={error:s}}finally{try{r&&!r.done&&(e=t.return)&&e.call(t)}finally{if(a)throw a.error}}return o},vD=function(n){fD(i,n);function i(){return n!==null&&n.apply(this,arguments)||this}return i.prototype.postConstruct=function(){this.rowModel.getType()==="clientSide"&&(this.clientSideRowModel=this.rowModel)},i.prototype.isActive=function(){var e=this.gridOptionsService.exists("getRowId"),t=this.gridOptionsService.is("resetRowDataOnUpdate");return t?!1:e},i.prototype.setRowData=function(e){var t=this.createTransactionForRowData(e);if(t){var r=hD(t,2),o=r[0],a=r[1];this.clientSideRowModel.updateRowData(o,a)}},i.prototype.createTransactionForRowData=function(e){if(St.missing(this.clientSideRowModel)){console.error("AG Grid: ImmutableService only works with ClientSideRowModel");return}var t=this.gridOptionsService.getCallback("getRowId");if(t==null){console.error("AG Grid: ImmutableService requires getRowId() callback to be implemented, your row data needs IDs!");return}var r={remove:[],update:[],add:[]},o=this.clientSideRowModel.getCopyOfNodesMap(),a=this.gridOptionsService.is("suppressMaintainUnsortedOrder"),s=a?void 0:{};return St.exists(e)&&e.forEach(function(l,u){var c=t({data:l,level:0}),d=o[c];if(s&&(s[c]=u),d){var f=d.data!==l;f&&r.update.push(l),o[c]=void 0}else r.add.push(l)}),St.iterateObject(o,function(l,u){u&&r.remove.push(u.data)}),[r,s]},al([T("rowModel")],i.prototype,"rowModel",void 0),al([T("rowRenderer")],i.prototype,"rowRenderer",void 0),al([Oe],i.prototype,"postConstruct",null),i=al([Ue("immutableService")],i),i}(ve),gD="30.2.1",yD={version:gD,moduleName:je.ClientSideRowModelModule,rowModel:"clientSide",beans:[iD,oD,aD,lD,cD,pD,vD]},mD=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),gc=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},Mf=function(n){mD(i,n);function i(e,t,r){var o=n.call(this,e)||this;return o.parentCache=t,o.params=r,o.startRow=e*r.blockSize,o.endRow=o.startRow+r.blockSize,o}return i.prototype.postConstruct=function(){this.createRowNodes()},i.prototype.getBlockStateJson=function(){return{id:""+this.getId(),state:{blockNumber:this.getId(),startRow:this.getStartRow(),endRow:this.getEndRow(),pageStatus:this.getState()}}},i.prototype.setDataAndId=function(e,t,r){St.exists(t)?e.setDataAndId(t,r.toString()):e.setDataAndId(void 0,void 0)},i.prototype.loadFromDatasource=function(){var e=this,t=this.createLoadParams();if(St.missing(this.params.datasource.getRows)){console.warn("AG Grid: datasource is missing getRows method");return}window.setTimeout(function(){e.params.datasource.getRows(t)},0)},i.prototype.processServerFail=function(){},i.prototype.createLoadParams=function(){var e={startRow:this.getStartRow(),endRow:this.getEndRow(),successCallback:this.pageLoaded.bind(this,this.getVersion()),failCallback:this.pageLoadFailed.bind(this,this.getVersion()),sortModel:this.params.sortModel,filterModel:this.params.filterModel,context:this.gridOptionsService.context};return e},i.prototype.forEachNode=function(e,t,r){var o=this;this.rowNodes.forEach(function(a,s){var l=o.startRow+s;l<r&&e(a,t.next())})},i.prototype.getLastAccessed=function(){return this.lastAccessed},i.prototype.getRow=function(e,t){t===void 0&&(t=!1),t||(this.lastAccessed=this.params.lastAccessedSequence.next());var r=e-this.startRow;return this.rowNodes[r]},i.prototype.getStartRow=function(){return this.startRow},i.prototype.getEndRow=function(){return this.endRow},i.prototype.createRowNodes=function(){this.rowNodes=[];for(var e=0;e<this.params.blockSize;e++){var t=this.startRow+e,r=new Nt(this.beans);r.setRowHeight(this.params.rowHeight),r.uiLevel=0,r.setRowIndex(t),r.setRowTop(this.params.rowHeight*t),this.rowNodes.push(r)}},i.prototype.processServerResult=function(e){var t=this;this.rowNodes.forEach(function(o,a){var s=e.rowData?e.rowData[a]:void 0;!o.id&&o.alreadyRendered&&s&&(t.rowNodes[a]=new Nt(t.beans),t.rowNodes[a].setRowIndex(o.rowIndex),t.rowNodes[a].setRowTop(o.rowTop),t.rowNodes[a].setRowHeight(o.rowHeight),o.clearRowTopAndRowIndex()),t.setDataAndId(t.rowNodes[a],s,t.startRow+a)});var r=e.rowCount!=null&&e.rowCount>=0?e.rowCount:void 0;this.parentCache.pageLoaded(this,r)},i.prototype.destroyRowNodes=function(){this.rowNodes.forEach(function(e){e.clearRowTopAndRowIndex()})},gc([T("beans")],i.prototype,"beans",void 0),gc([Oe],i.prototype,"postConstruct",null),gc([Ki],i.prototype,"destroyRowNodes",null),i}(Kc),CD=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),sl=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},SD=function(n,i){return function(e,t){i(e,t,n)}},wD=function(n){CD(i,n);function i(e){var t=n.call(this)||this;return t.lastRowIndexKnown=!1,t.blocks={},t.blockCount=0,t.rowCount=e.initialRowCount,t.params=e,t}return i.prototype.setBeans=function(e){this.logger=e.create("InfiniteCache")},i.prototype.getRow=function(e,t){t===void 0&&(t=!1);var r=Math.floor(e/this.params.blockSize),o=this.blocks[r];if(!o){if(t)return;o=this.createBlock(r)}return o.getRow(e)},i.prototype.createBlock=function(e){var t=this.createBean(new Mf(e,this,this.params));return this.blocks[t.getId()]=t,this.blockCount++,this.purgeBlocksIfNeeded(t),this.params.rowNodeBlockLoader.addBlock(t),t},i.prototype.refreshCache=function(){var e=this.blockCount==0;if(e){this.purgeCache();return}this.getBlocksInOrder().forEach(function(t){return t.setStateWaitingToLoad()}),this.params.rowNodeBlockLoader.checkBlockToLoad()},i.prototype.destroyAllBlocks=function(){var e=this;this.getBlocksInOrder().forEach(function(t){return e.destroyBlock(t)})},i.prototype.getRowCount=function(){return this.rowCount},i.prototype.isLastRowIndexKnown=function(){return this.lastRowIndexKnown},i.prototype.pageLoaded=function(e,t){this.isAlive()&&(this.logger.log("onPageLoaded: page = "+e.getId()+", lastRow = "+t),this.checkRowCount(e,t),this.onCacheUpdated())},i.prototype.purgeBlocksIfNeeded=function(e){var t=this,r=this.getBlocksInOrder().filter(function(u){return u!=e}),o=function(u,c){return c.getLastAccessed()-u.getLastAccessed()};r.sort(o);var a=this.params.maxBlocksInCache>0,s=a?this.params.maxBlocksInCache-1:null,l=i.MAX_EMPTY_BLOCKS_TO_KEEP-1;r.forEach(function(u,c){var d=u.getState()===Mf.STATE_WAITING_TO_LOAD&&c>=l,f=a?c>=s:!1;if(d||f){if(t.isBlockCurrentlyDisplayed(u)||t.isBlockFocused(u))return;t.removeBlockFromCache(u)}})},i.prototype.isBlockFocused=function(e){var t=this.focusService.getFocusCellToUseAfterRefresh();if(!t||t.rowPinned!=null)return!1;var r=e.getStartRow(),o=e.getEndRow(),a=t.rowIndex>=r&&t.rowIndex<o;return a},i.prototype.isBlockCurrentlyDisplayed=function(e){var t=e.getStartRow(),r=e.getEndRow()-1;return this.rowRenderer.isRangeInRenderedViewport(t,r)},i.prototype.removeBlockFromCache=function(e){e&&this.destroyBlock(e)},i.prototype.checkRowCount=function(e,t){if(typeof t=="number"&&t>=0)this.rowCount=t,this.lastRowIndexKnown=!0;else if(!this.lastRowIndexKnown){var r=(e.getId()+1)*this.params.blockSize,o=r+this.params.overflowSize;this.rowCount<o&&(this.rowCount=o)}},i.prototype.setRowCount=function(e,t){this.rowCount=e,St.exists(t)&&(this.lastRowIndexKnown=t),this.lastRowIndexKnown||this.rowCount%this.params.blockSize===0&&this.rowCount++,this.onCacheUpdated()},i.prototype.forEachNodeDeep=function(e){var t=this,r=new oa;this.getBlocksInOrder().forEach(function(o){return o.forEachNode(e,r,t.rowCount)})},i.prototype.getBlocksInOrder=function(){var e=function(r,o){return r.getId()-o.getId()},t=St.getAllValuesInObject(this.blocks).sort(e);return t},i.prototype.destroyBlock=function(e){delete this.blocks[e.getId()],this.destroyBean(e),this.blockCount--,this.params.rowNodeBlockLoader.removeBlock(e)},i.prototype.onCacheUpdated=function(){if(this.isAlive()){this.destroyAllBlocksPastVirtualRowCount();var e={type:b.EVENT_STORE_UPDATED};this.eventService.dispatchEvent(e)}},i.prototype.destroyAllBlocksPastVirtualRowCount=function(){var e=this,t=[];this.getBlocksInOrder().forEach(function(r){var o=r.getId()*e.params.blockSize;o>=e.rowCount&&t.push(r)}),t.length>0&&t.forEach(function(r){return e.destroyBlock(r)})},i.prototype.purgeCache=function(){var e=this;this.getBlocksInOrder().forEach(function(t){return e.removeBlockFromCache(t)}),this.lastRowIndexKnown=!1,this.rowCount===0&&(this.rowCount=this.params.initialRowCount),this.onCacheUpdated()},i.prototype.getRowNodesInRange=function(e,t){var r=this,o=[],a=-1,s=!1,l=new oa;St.missing(e)&&(s=!0);var u=!1;this.getBlocksInOrder().forEach(function(d){if(!u){if(s&&a+1!==d.getId()){u=!0;return}a=d.getId(),d.forEachNode(function(f){var y=f===e||f===t;(s||y)&&o.push(f),y&&(s=!s)},l,r.rowCount)}});var c=u||s;return c?[]:o},i.MAX_EMPTY_BLOCKS_TO_KEEP=2,sl([T("rowRenderer")],i.prototype,"rowRenderer",void 0),sl([T("focusService")],i.prototype,"focusService",void 0),sl([SD(0,er("loggerFactory"))],i.prototype,"setBeans",null),sl([Ki],i.prototype,"destroyAllBlocks",null),i}(ve),TD=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Wo=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},OD=function(n){TD(i,n);function i(){return n!==null&&n.apply(this,arguments)||this}return i.prototype.getRowBounds=function(e){return{rowHeight:this.rowHeight,rowTop:this.rowHeight*e}},i.prototype.ensureRowHeightsValid=function(e,t,r,o){return!1},i.prototype.init=function(){var e=this;this.gridOptionsService.isRowModelType("infinite")&&(this.rowHeight=this.gridOptionsService.getRowHeightAsNumber(),this.addEventListeners(),this.addDestroyFunc(function(){return e.destroyCache()}),this.verifyProps())},i.prototype.verifyProps=function(){if(this.gridOptionsService.exists("initialGroupOrderComparator")){var e="AG Grid: initialGroupOrderComparator cannot be used with Infinite Row Model. If using Infinite Row Model, then sorting is done on the server side, nothing to do with the client.";St.doOnce(function(){return console.warn(e)},"IRM.InitialGroupOrderComparator")}},i.prototype.start=function(){this.setDatasource(this.gridOptionsService.get("datasource"))},i.prototype.destroyDatasource=function(){this.datasource&&(this.getContext().destroyBean(this.datasource),this.rowRenderer.datasourceChanged(),this.datasource=null)},i.prototype.addEventListeners=function(){this.addManagedListener(this.eventService,b.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this)),this.addManagedListener(this.eventService,b.EVENT_SORT_CHANGED,this.onSortChanged.bind(this)),this.addManagedListener(this.eventService,b.EVENT_NEW_COLUMNS_LOADED,this.onColumnEverything.bind(this)),this.addManagedListener(this.eventService,b.EVENT_STORE_UPDATED,this.onCacheUpdated.bind(this))},i.prototype.onFilterChanged=function(){this.reset()},i.prototype.onSortChanged=function(){this.reset()},i.prototype.onColumnEverything=function(){var e;this.cacheParams?e=this.isSortModelDifferent():e=!0,e&&this.reset()},i.prototype.isSortModelDifferent=function(){return!St.jsonEquals(this.cacheParams.sortModel,this.sortController.getSortModel())},i.prototype.getType=function(){return"infinite"},i.prototype.setDatasource=function(e){this.destroyDatasource(),this.datasource=e,e&&this.reset()},i.prototype.isEmpty=function(){return!this.infiniteCache},i.prototype.isRowsToRender=function(){return!!this.infiniteCache},i.prototype.getNodesInRangeForSelection=function(e,t){return this.infiniteCache?this.infiniteCache.getRowNodesInRange(e,t):[]},i.prototype.reset=function(){if(this.datasource){var e=this.gridOptionsService.getCallback("getRowId"),t=e!=null;t||this.selectionService.reset(),this.resetCache();var r=this.createModelUpdatedEvent();this.eventService.dispatchEvent(r)}},i.prototype.createModelUpdatedEvent=function(){return{type:b.EVENT_MODEL_UPDATED,newPage:!1,newData:!1,keepRenderedRows:!0,animate:!1}},i.prototype.resetCache=function(){this.destroyCache(),this.cacheParams={datasource:this.datasource,filterModel:this.filterManager.getFilterModel(),sortModel:this.sortController.getSortModel(),rowNodeBlockLoader:this.rowNodeBlockLoader,initialRowCount:this.defaultIfInvalid(this.gridOptionsService.getNum("infiniteInitialRowCount"),1),maxBlocksInCache:this.gridOptionsService.getNum("maxBlocksInCache"),rowHeight:this.gridOptionsService.getRowHeightAsNumber(),overflowSize:this.defaultIfInvalid(this.gridOptionsService.getNum("cacheOverflowSize"),1),blockSize:this.defaultIfInvalid(this.gridOptionsService.getNum("cacheBlockSize"),100),lastAccessedSequence:new oa},this.infiniteCache=this.createBean(new wD(this.cacheParams))},i.prototype.defaultIfInvalid=function(e,t){return e>0?e:t},i.prototype.destroyCache=function(){this.infiniteCache&&(this.infiniteCache=this.destroyBean(this.infiniteCache))},i.prototype.onCacheUpdated=function(){var e=this.createModelUpdatedEvent();this.eventService.dispatchEvent(e)},i.prototype.getRow=function(e){if(this.infiniteCache&&!(e>=this.infiniteCache.getRowCount()))return this.infiniteCache.getRow(e)},i.prototype.getRowNode=function(e){var t;return this.forEachNode(function(r){r.id===e&&(t=r)}),t},i.prototype.forEachNode=function(e){this.infiniteCache&&this.infiniteCache.forEachNodeDeep(e)},i.prototype.getTopLevelRowCount=function(){return this.getRowCount()},i.prototype.getTopLevelRowDisplayedIndex=function(e){return e},i.prototype.getRowIndexAtPixel=function(e){if(this.rowHeight!==0){var t=Math.floor(e/this.rowHeight),r=this.getRowCount()-1;return t>r?r:t}return 0},i.prototype.getRowCount=function(){return this.infiniteCache?this.infiniteCache.getRowCount():0},i.prototype.isRowPresent=function(e){var t=this.getRowNode(e.id);return!!t},i.prototype.refreshCache=function(){this.infiniteCache&&this.infiniteCache.refreshCache()},i.prototype.purgeCache=function(){this.infiniteCache&&this.infiniteCache.purgeCache()},i.prototype.isLastRowIndexKnown=function(){return this.infiniteCache?this.infiniteCache.isLastRowIndexKnown():!1},i.prototype.setRowCount=function(e,t){this.infiniteCache&&this.infiniteCache.setRowCount(e,t)},Wo([T("filterManager")],i.prototype,"filterManager",void 0),Wo([T("sortController")],i.prototype,"sortController",void 0),Wo([T("selectionService")],i.prototype,"selectionService",void 0),Wo([T("rowRenderer")],i.prototype,"rowRenderer",void 0),Wo([T("rowNodeBlockLoader")],i.prototype,"rowNodeBlockLoader",void 0),Wo([Oe],i.prototype,"init",null),Wo([Ki],i.prototype,"destroyDatasource",null),i=Wo([Ue("rowModel")],i),i}(ve),PD="30.2.1",ED={version:PD,moduleName:je.InfiniteRowModelModule,rowModel:"infinite",beans:[OD]},_D=function(){function n(){}return n.prototype.setBeans=function(i){this.beans=i},n.prototype.getFileName=function(i){var e=this.getDefaultFileExtension();return(i==null||!i.length)&&(i=this.getDefaultFileName()),i.indexOf(".")===-1?i+"."+e:i},n.prototype.getData=function(i){var e=this.createSerializingSession(i),t=this.beans.gridSerializer.serialize(e,i);return t},n}(),bD=function(){function n(i){this.groupColumns=[];var e=i.columnModel,t=i.valueService,r=i.gridOptionsService,o=i.valueFormatterService,a=i.valueParserService,s=i.processCellCallback,l=i.processHeaderCallback,u=i.processGroupHeaderCallback,c=i.processRowGroupCallback;this.columnModel=e,this.valueService=t,this.gridOptionsService=r,this.valueFormatterService=o,this.valueParserService=a,this.processCellCallback=s,this.processHeaderCallback=l,this.processGroupHeaderCallback=u,this.processRowGroupCallback=c}return n.prototype.prepare=function(i){this.groupColumns=i.filter(function(e){return!!e.getColDef().showRowGroup})},n.prototype.extractHeaderValue=function(i){var e=this.getHeaderName(this.processHeaderCallback,i);return e??""},n.prototype.extractRowCellValue=function(i,e,t,r,o){var a=this.gridOptionsService.is("groupHideOpenParents"),s=(!a||o.footer)&&this.shouldRenderGroupSummaryCell(o,i,e)?this.createValueForGroupNode(o):this.valueService.getValue(i,o),l=this.processCell({accumulatedRowIndex:t,rowNode:o,column:i,value:s,processCellCallback:this.processCellCallback,type:r});return l},n.prototype.shouldRenderGroupSummaryCell=function(i,e,t){var r,o=i&&i.group;if(!o)return!1;var a=this.groupColumns.indexOf(e);if(a!==-1){if(((r=i.groupData)===null||r===void 0?void 0:r[e.getId()])!=null||this.gridOptionsService.isRowModelType("serverSide")&&i.group)return!0;if(i.footer&&i.level===-1){var s=e.getColDef(),l=s==null||s.showRowGroup===!0;return l||s.showRowGroup===this.columnModel.getRowGroupColumns()[0].getId()}}var u=this.gridOptionsService.isGroupUseEntireRow(this.columnModel.isPivotMode());return t===0&&u},n.prototype.getHeaderName=function(i,e){return i?i({column:e,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context}):this.columnModel.getDisplayNameForColumn(e,"csv",!0)},n.prototype.createValueForGroupNode=function(i){if(this.processRowGroupCallback)return this.processRowGroupCallback({node:i,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context});var e=i.footer,t=[i.key];if(!this.gridOptionsService.isGroupMultiAutoColumn())for(;i.parent;)i=i.parent,t.push(i.key);var r=t.reverse().join(" -> ");return e?"Total "+r:r},n.prototype.processCell=function(i){var e=this,t,r=i.accumulatedRowIndex,o=i.rowNode,a=i.column,s=i.value,l=i.processCellCallback,u=i.type;return l?{value:(t=l({accumulatedRowIndex:r,column:a,node:o,value:s,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context,type:u,parseValue:function(c){return e.valueParserService.parseValue(a,o,c,e.valueService.getValue(a,o))},formatValue:function(c){var d;return(d=e.valueFormatterService.formatValue(a,o,c))!==null&&d!==void 0?d:c}}))!==null&&t!==void 0?t:""}:a.getColDef().useValueFormatterForExport?{value:s??"",valueFormatted:this.valueFormatterService.formatValue(a,o,s)}:{value:s??""}},n}(),DD=function(){function n(){}return n.download=function(i,e){var t=document.defaultView||window;if(!t){console.warn("AG Grid: There is no `window` associated with the current `document`");return}var r=document.createElement("a"),o=t.URL.createObjectURL(e);r.setAttribute("href",o),r.setAttribute("download",i),r.style.display="none",document.body.appendChild(r),r.dispatchEvent(new MouseEvent("click",{bubbles:!1,cancelable:!0,view:t})),document.body.removeChild(r),t.setTimeout(function(){t.URL.revokeObjectURL(o)},0)},n}(),RD=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Nf=`\r
`,xD=function(n){RD(i,n);function i(e){var t=n.call(this,e)||this;t.isFirstLine=!0,t.result="";var r=e.suppressQuotes,o=e.columnSeparator;return t.suppressQuotes=r,t.columnSeparator=o,t}return i.prototype.addCustomContent=function(e){var t=this;e&&(typeof e=="string"?(/^\s*\n/.test(e)||this.beginNewLine(),e=e.replace(/\r?\n/g,Nf),this.result+=e):e.forEach(function(r){t.beginNewLine(),r.forEach(function(o,a){a!==0&&(t.result+=t.columnSeparator),t.result+=t.putInQuotes(o.data.value||""),o.mergeAcross&&t.appendEmptyCells(o.mergeAcross)})}))},i.prototype.onNewHeaderGroupingRow=function(){return this.beginNewLine(),{onColumn:this.onNewHeaderGroupingRowColumn.bind(this)}},i.prototype.onNewHeaderGroupingRowColumn=function(e,t,r,o){r!=0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(t),this.appendEmptyCells(o)},i.prototype.appendEmptyCells=function(e){for(var t=1;t<=e;t++)this.result+=this.columnSeparator+this.putInQuotes("")},i.prototype.onNewHeaderRow=function(){return this.beginNewLine(),{onColumn:this.onNewHeaderRowColumn.bind(this)}},i.prototype.onNewHeaderRowColumn=function(e,t){t!=0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(this.extractHeaderValue(e))},i.prototype.onNewBodyRow=function(){return this.beginNewLine(),{onColumn:this.onNewBodyRowColumn.bind(this)}},i.prototype.onNewBodyRowColumn=function(e,t,r){var o;t!=0&&(this.result+=this.columnSeparator);var a=this.extractRowCellValue(e,t,t,"csv",r);this.result+=this.putInQuotes((o=a.valueFormatted)!==null&&o!==void 0?o:a.value)},i.prototype.putInQuotes=function(e){if(this.suppressQuotes)return e;if(e==null)return'""';var t;typeof e=="string"?t=e:typeof e.toString=="function"?t=e.toString():(console.warn("AG Grid: unknown value type during csv conversion"),t="");var r=t.replace(/"/g,'""');return'"'+r+'"'},i.prototype.parse=function(){return this.result},i.prototype.beginNewLine=function(){this.isFirstLine||(this.result+=Nf),this.isFirstLine=!1},i}(bD),AD=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Uo=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},LD=function(n){AD(i,n);function i(){return n!==null&&n.apply(this,arguments)||this}return i.prototype.postConstruct=function(){this.setBeans({gridSerializer:this.gridSerializer,gridOptionsService:this.gridOptionsService})},i.prototype.getMergedParams=function(e){var t=this.gridOptionsService.get("defaultCsvExportParams");return Object.assign({},t,e)},i.prototype.export=function(e){if(this.isExportSuppressed())return console.warn("AG Grid: Export cancelled. Export is not allowed as per your configuration."),"";var t=this.getMergedParams(e),r=this.getData(t),o=new Blob(["\uFEFF",r],{type:"text/plain"});return DD.download(this.getFileName(t.fileName),o),r},i.prototype.exportDataAsCsv=function(e){return this.export(e)},i.prototype.getDataAsCsv=function(e,t){t===void 0&&(t=!1);var r=t?Object.assign({},e):this.getMergedParams(e);return this.getData(r)},i.prototype.getDefaultFileName=function(){return"export.csv"},i.prototype.getDefaultFileExtension=function(){return"csv"},i.prototype.createSerializingSession=function(e){var t=this,r=t.columnModel,o=t.valueService,a=t.gridOptionsService,s=t.valueFormatterService,l=t.valueParserService,u=e,c=u.processCellCallback,d=u.processHeaderCallback,f=u.processGroupHeaderCallback,y=u.processRowGroupCallback,S=u.suppressQuotes,w=u.columnSeparator;return new xD({columnModel:r,valueService:o,gridOptionsService:a,valueFormatterService:s,valueParserService:l,processCellCallback:c||void 0,processHeaderCallback:d||void 0,processGroupHeaderCallback:f||void 0,processRowGroupCallback:y||void 0,suppressQuotes:S||!1,columnSeparator:w||","})},i.prototype.isExportSuppressed=function(){return this.gridOptionsService.is("suppressCsvExport")},Uo([T("columnModel")],i.prototype,"columnModel",void 0),Uo([T("valueService")],i.prototype,"valueService",void 0),Uo([T("gridSerializer")],i.prototype,"gridSerializer",void 0),Uo([T("gridOptionsService")],i.prototype,"gridOptionsService",void 0),Uo([T("valueFormatterService")],i.prototype,"valueFormatterService",void 0),Uo([T("valueParserService")],i.prototype,"valueParserService",void 0),Uo([Oe],i.prototype,"postConstruct",null),i=Uo([Ue("csvCreator")],i),i}(_D),MD=function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),jo=function(n,i,e,t){var r=arguments.length,o=r<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,i,e,t);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(o=(r<3?a(o):r>3?a(i,e,o):a(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},Ff;(function(n){n[n.HEADER_GROUPING=0]="HEADER_GROUPING",n[n.HEADER=1]="HEADER",n[n.BODY=2]="BODY"})(Ff||(Ff={}));var ND=function(n){MD(i,n);function i(){return n!==null&&n.apply(this,arguments)||this}return i.prototype.serialize=function(e,t){t===void 0&&(t={});var r=this.getColumnsToExport(t.allColumns,t.columnKeys),o=St.compose(this.prepareSession(r),this.prependContent(t),this.exportColumnGroups(t,r),this.exportHeaders(t,r),this.processPinnedTopRows(t,r),this.processRows(t,r),this.processPinnedBottomRows(t,r),this.appendContent(t));return o(e).parse()},i.prototype.processRow=function(e,t,r,o){var a=t.shouldRowBeSkipped||function(){return!1},s=this.gridOptionsService.context,l=this.gridOptionsService.api,u=this.gridOptionsService.columnApi,c=this.gridOptionsService.is("groupRemoveSingleChildren"),d=this.gridOptionsService.is("groupRemoveLowestSingleChildren"),f=t.rowPositions!=null,y=f||!!t.onlySelected,S=this.gridOptionsService.is("groupHideOpenParents")&&!y,w=this.columnModel.isPivotMode()?o.leafGroup:!o.group,E=!!o.footer,_=t.skipGroups||t.skipRowGroups,L=d&&o.leafGroup,P=o.allChildrenCount===1&&(c||L);if(_&&t.skipGroups&&St.doOnce(function(){return console.warn("AG Grid: Since v25.2 `skipGroups` has been renamed to `skipRowGroups`.")},"gridSerializer-skipGroups"),!(!w&&!E&&(t.skipRowGroups||P||S)||t.onlySelected&&!o.isSelected()||t.skipPinnedTop&&o.rowPinned==="top"||t.skipPinnedBottom&&o.rowPinned==="bottom")){var V=o.level===-1;if(!(V&&!w&&!E)){var ne=a({node:o,api:l,columnApi:u,context:s});if(!ne){var ee=e.onNewBodyRow(o);if(r.forEach(function(F,U){ee.onColumn(F,U,o)}),t.getCustomContentBelowRow){var re=t.getCustomContentBelowRow({node:o,api:l,columnApi:u,context:s});re&&e.addCustomContent(re)}}}}},i.prototype.appendContent=function(e){return function(t){var r=e.customFooter||e.appendContent;return r&&(e.customFooter&&St.doOnce(function(){return console.warn("AG Grid: Since version 25.2.0 the `customFooter` param has been deprecated. Use `appendContent` instead.")},"gridSerializer-customFooter"),t.addCustomContent(r)),t}},i.prototype.prependContent=function(e){return function(t){var r=e.customHeader||e.prependContent;return r&&(e.customHeader&&St.doOnce(function(){return console.warn("AG Grid: Since version 25.2.0 the `customHeader` param has been deprecated. Use `prependContent` instead.")},"gridSerializer-customHeader"),t.addCustomContent(r)),t}},i.prototype.prepareSession=function(e){return function(t){return t.prepare(e),t}},i.prototype.exportColumnGroups=function(e,t){var r=this;return function(o){if(e.skipColumnGroupHeaders)e.columnGroups&&St.doOnce(function(){return console.warn("AG Grid: Since v25.2 the `columnGroups` param has deprecated, and groups are exported by default.")},"gridSerializer-columnGroups");else{var a=new Mh,s=r.displayedGroupCreator.createDisplayedGroups(t,a,null);r.recursivelyAddHeaderGroups(s,o,e.processGroupHeaderCallback)}return o}},i.prototype.exportHeaders=function(e,t){return function(r){if(!e.skipHeader&&!e.skipColumnHeaders){var o=r.onNewHeaderRow();t.forEach(function(a,s){o.onColumn(a,s,void 0)})}else e.skipHeader&&St.doOnce(function(){return console.warn("AG Grid: Since v25.2 the `skipHeader` param has been renamed to `skipColumnHeaders`.")},"gridSerializer-skipHeader");return r}},i.prototype.processPinnedTopRows=function(e,t){var r=this;return function(o){var a=r.processRow.bind(r,o,e,t);return e.rowPositions?e.rowPositions.filter(function(s){return s.rowPinned==="top"}).sort(function(s,l){return s.rowIndex-l.rowIndex}).map(function(s){return r.pinnedRowModel.getPinnedTopRow(s.rowIndex)}).forEach(a):r.pinnedRowModel.forEachPinnedTopRow(a),o}},i.prototype.processRows=function(e,t){var r=this;return function(o){var a=r.rowModel,s=a.getType(),l=s==="clientSide",u=s==="serverSide",c=!l&&e.onlySelected,d=r.processRow.bind(r,o,e,t),f=e.exportedRows,y=f===void 0?"filteredAndSorted":f;if(e.rowPositions)e.rowPositions.filter(function(w){return w.rowPinned==null}).sort(function(w,E){return w.rowIndex-E.rowIndex}).map(function(w){return a.getRow(w.rowIndex)}).forEach(d);else if(r.columnModel.isPivotMode())l?a.forEachPivotNode(d,!0):u?a.forEachNodeAfterFilterAndSort(d,!0):a.forEachNode(d);else if(e.onlySelectedAllPages||c){var S=r.selectionService.getSelectedNodes();r.replicateSortedOrder(S),S.forEach(d)}else y==="all"?a.forEachNode(d):l||u?a.forEachNodeAfterFilterAndSort(d,!0):a.forEachNode(d);return o}},i.prototype.replicateSortedOrder=function(e){var t=this,r=this.sortController.getSortOptions(),o=function(a,s){var l,u,c,d;return a.rowIndex!=null&&s.rowIndex!=null?a.rowIndex-s.rowIndex:a.level===s.level?((l=a.parent)===null||l===void 0?void 0:l.id)===((u=s.parent)===null||u===void 0?void 0:u.id)?t.rowNodeSorter.compareRowNodes(r,{rowNode:a,currentPos:(c=a.rowIndex)!==null&&c!==void 0?c:-1},{rowNode:s,currentPos:(d=s.rowIndex)!==null&&d!==void 0?d:-1}):o(a.parent,s.parent):a.level>s.level?o(a.parent,s):o(a,s.parent)};e.sort(o)},i.prototype.processPinnedBottomRows=function(e,t){var r=this;return function(o){var a=r.processRow.bind(r,o,e,t);return e.rowPositions?e.rowPositions.filter(function(s){return s.rowPinned==="bottom"}).sort(function(s,l){return s.rowIndex-l.rowIndex}).map(function(s){return r.pinnedRowModel.getPinnedBottomRow(s.rowIndex)}).forEach(a):r.pinnedRowModel.forEachPinnedBottomRow(a),o}},i.prototype.getColumnsToExport=function(e,t){e===void 0&&(e=!1);var r=this.columnModel.isPivotMode();if(t&&t.length)return this.columnModel.getGridColumns(t);if(e&&!r){var o=this.gridOptionsService.is("treeData")?this.columnModel.getGridColumns([ia]):[];return o.concat(this.columnModel.getAllGridColumns()||[])}return this.columnModel.getAllDisplayedColumns()},i.prototype.recursivelyAddHeaderGroups=function(e,t,r){var o=[];e.forEach(function(a){var s=a;s.getChildren&&s.getChildren().forEach(function(l){return o.push(l)})}),e.length>0&&e[0]instanceof Xi&&this.doAddHeaderHeader(t,e,r),o&&o.length>0&&this.recursivelyAddHeaderGroups(o,t,r)},i.prototype.doAddHeaderHeader=function(e,t,r){var o=this,a=e.onNewHeaderGroupingRow(),s=0;t.forEach(function(l){var u=l,c;r?c=r({columnGroup:u,api:o.gridOptionsService.api,columnApi:o.gridOptionsService.columnApi,context:o.gridOptionsService.context}):c=o.columnModel.getDisplayNameForColumnGroup(u,"header");var d=u.getLeafColumns().reduce(function(f,y,S,w){var E=St.last(f),_=y.getColumnGroupShow()==="open";return _?(!E||E[1]!=null)&&(E=[S],f.push(E)):E&&E[1]==null&&(E[1]=S-1),S===w.length-1&&E&&E[1]==null&&(E[1]=S),f},[]);a.onColumn(u,c||"",s++,u.getLeafColumns().length-1,d)})},jo([T("displayedGroupCreator")],i.prototype,"displayedGroupCreator",void 0),jo([T("columnModel")],i.prototype,"columnModel",void 0),jo([T("rowModel")],i.prototype,"rowModel",void 0),jo([T("pinnedRowModel")],i.prototype,"pinnedRowModel",void 0),jo([T("selectionService")],i.prototype,"selectionService",void 0),jo([T("rowNodeSorter")],i.prototype,"rowNodeSorter",void 0),jo([T("sortController")],i.prototype,"sortController",void 0),i=jo([Ue("gridSerializer")],i),i}(ve),FD="30.2.1",ID={version:FD,moduleName:je.CsvExportModule,beans:[LD,ND]},kD=[yD,ED,ID];gt.registerModules(kD);class ps{static getComponentDefinition(i,e){let t;return typeof i=="string"?t=this.searchForComponentInstance(e,i):t={extends:vi(Object.assign({},i))},t||console.error(`Could not find component with name of ${i}. Is it in Vue.components?`),t.extends?(t.extends.setup&&(t.setup=t.extends.setup),t.extends.props=this.addParamsToProps(t.extends.props)):t.props=this.addParamsToProps(t.props),t}static addParamsToProps(i){return!i||Array.isArray(i)&&i.indexOf("params")===-1?i=["params",...i||[]]:typeof i=="object"&&!i.params&&(i.params={type:Object}),i}static createAndMountComponent(i,e,t,r){const o=ps.getComponentDefinition(i,t);if(!o)return;const{vNode:a,destroy:s,el:l}=this.mount(o,{params:Object.freeze(e)},t,r||{});return{componentInstance:a.component.proxy,element:l,destroy:s}}static mount(i,e,t,r){let o=p(i,e);o.appContext=t.$.appContext,o.appContext.provides=Object.assign(Object.assign(Object.assign({},r),o.appContext.provides?o.appContext.provides:{}),t.$parent.$options.provide?t.$parent.$options.provide:{});let a=document.createElement("div");return Sp(o,a),{vNode:o,destroy:()=>{a&&Sp(null,a),a=null,o=null},el:a}}static searchForComponentInstance(i,e,t=10,r=!1){let o=null,a=i.$parent,s=0;for(;!o&&a&&a.$options&&++s<t;){const l=a;o=l.$options&&l.$options.components?l.$options.components[e]:null,a=a.$parent}if(!o){const l=i.$.appContext.components;l&&l[e]&&(o=l[e])}return!o&&!r?(console.error(`Could not find component with name of ${e}. Is it in Vue.components?`),null):o}}class ts extends $b{constructor(i,e){super(),this.parent=i,ts.provides||(ts.provides=e)}createWrapper(i){const e=this;class t extends GD{init(a){super.init(a)}hasMethod(a){return r.getFrameworkComponentInstance()[a]!=null}callMethod(a,s){const l=this.getFrameworkComponentInstance();return r.getFrameworkComponentInstance()[a].apply(l,s)}addMethod(a,s){r[a]=s}overrideProcessing(a){return e.parent.autoParamsRefresh&&a==="refresh"}processMethod(a,s){return a==="refresh"&&(this.getFrameworkComponentInstance().params=s[0]),this.hasMethod(a)?this.callMethod(a,s):a==="refresh"}createComponent(a){return e.createComponent(i,a)}}const r=new t;return r}createComponent(i,e){return ps.createAndMountComponent(i,e,this.parent,ts.provides)}createMethodProxy(i,e,t){return function(){return i.overrideProcessing(e)?i.processMethod(e,arguments):i.hasMethod(e)?i.callMethod(e,arguments):(t&&console.warn("AG Grid: Framework component is missing the method "+e+"()"),null)}}destroy(){this.parent=null}}class GD{getGui(){return this.element}destroy(){this.getFrameworkComponentInstance()&&typeof this.getFrameworkComponentInstance().destroy=="function"&&this.getFrameworkComponentInstance().destroy(),this.unmount()}getFrameworkComponentInstance(){return this.componentInstance}init(i){const{componentInstance:e,element:t,destroy:r}=this.createComponent(i);this.componentInstance=e,this.unmount=r,this.element=t.firstElementChild}}const VD=n=>n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),BD=n=>`on${n.charAt(0).toUpperCase()}${n.substring(1,n.length)}`,HD=()=>{const n={};qo.PUBLIC_EVENTS.map(t=>BD(VD(t))).forEach(t=>n[t]=void 0);const e={};return qo.ALL_PROPERTIES.filter(t=>t!="gridOptions").forEach(t=>{n[t]={},e[t]={handler(r,o){this.processChanges(t,r,o)},deep:t!=="popupParent"&&t!=="context"}}),[n,e]};class WD extends Xv{constructor(i){super(),this.parent=i}frameworkComponent(i,e){let t=ps.searchForComponentInstance(this.parent,i,10,!0)?i:null;if(!t&&e&&e[i]){const r=e[i];t=ps.searchForComponentInstance(this.parent,r,10,!0)?r:null}return t}isFrameworkComponent(i){return typeof i=="object"}}const UD=new Set(["rowDataChanged","rowDataUpdated","cellValueChanged","rowValueChanged"]),jD=new Set([b.EVENT_GRID_PRE_DESTROYED]),If="onUpdate:modelValue",zD="update:modelValue",[YD,KD]=HD(),Eo=vi({render(){return ry("div")},props:Object.assign({gridOptions:{type:Object,default:()=>({})},autoParamsRefresh:{type:Boolean,default:()=>!1},componentDependencies:{type:Array,default:()=>[]},plugins:[],modules:{type:Array,default:()=>[]},modelValue:{type:Array,default:void 0,required:!1}},YD),data(){return{gridCreated:!1,isDestroyed:!1,gridReadyFired:!1,emitRowModel:void 0}},watch:Object.assign({modelValue:{handler(n,i){this.processChanges("rowData",n,i)},deep:!0}},KD),methods:{globalEventListenerFactory(n){return(i,e)=>{if(this.isDestroyed)return;i==="gridReady"&&(this.gridReadyFired=!0);const t=jD.has(i);t&&!n||!t&&n||this.updateModelIfUsed(i)}},processChanges(n,i,e){if(this.gridCreated){if(this.skipChange(n,i,e))return;const t={};t[n]={currentValue:n==="rowData"?Object.isFrozen(i)?i:gu(yu(i)):i,previousValue:e},qo.processOnChange(t,this.gridOptions.api)}},checkForBindingConflicts(){const n=this;(n.rowData||this.gridOptions.rowData)&&n.modelValue&&console.warn("AG Grid: Using both rowData and v-model. rowData will be ignored.")},getRowData(){const n=[];return this.gridOptions.api.forEachNode(i=>{n.push(i.data)}),n},updateModelIfUsed(n){this.gridReadyFired&&this.$attrs[If]&&UD.has(n)&&this.emitRowModel&&this.emitRowModel()},getRowDataBasedOnBindings(){const n=this,i=n.modelValue;return i||(n.rowData?n.rowData:n.gridOptions.rowData)},getProvides(){let n=oy(),i={};for(;n;)n&&n.provides&&(i=Object.assign(Object.assign({},i),n.provides)),n=n.parent;return i},skipChange(n,i,e){if(this.gridReadyFired&&n==="rowData"&&this.$attrs[If]){if(i===e)return!0;if(i&&e){const t=i,r=e;if(t.length===r.length){for(let o=0;o<t.length;o++)if(t[o]!==r[o])return!1;return!0}}}return!1},debounce(n,i){let e;return()=>{const t=function(){n()};window.clearTimeout(e),e=window.setTimeout(t,i)}}},mounted(){this.emitRowModel=this.debounce(()=>{this.$emit(zD,Object.freeze(this.getRowData()))},20);const n=this.getProvides(),i=new ts(this,n),e=gu(qo.copyAttributesToGridOptions(yu(this.gridOptions),this,!0));this.checkForBindingConflicts();const t=this.getRowDataBasedOnBindings();e.rowData=t&&(Object.isFrozen(t)?t:gu(yu(t)));const r={globalEventListener:this.globalEventListenerFactory().bind(this),globalSyncEventListener:this.globalEventListenerFactory(!0).bind(this),frameworkOverrides:new WD(this),providedBeanInstances:{frameworkComponentWrapper:i},modules:this.modules};new Xb(this.$el,e,r),this.gridCreated=!0},unmounted(){this.gridCreated&&(this.gridOptions.api&&this.gridOptions.api.destroy(),this.isDestroyed=!0)}});function Ja(n){var i=0;if(n>=8)i=1;else if(n<=-8)i=0;else{for(var e=0;e<100;e++)i+=Math.pow(n,2*e+1)/QD(2*e+1);i*=Math.pow(Math.E,-.5*Math.pow(n,2)),i/=Math.sqrt(2*Math.PI),i+=.5}return i}function QD(n){for(var i=1,e=n;e>1;e-=2)i*=e;return i}function qD(n,i,e,t,r,o){var a=null,s=(r*e+Math.pow(t,2)*e/2-Math.log(i/n))/(t*Math.sqrt(e));return o==="call"?a=n*Ja(s)-i*Math.pow(Math.E,-1*r*e)*Ja(s-t*Math.sqrt(e)):a=i*Math.pow(Math.E,-1*r*e)*Ja(t*Math.sqrt(e)-s)-n*Ja(-s),a}function XD(n,i,e,t,r){var o=(r*e+Math.pow(t,2)*e/2-Math.log(i/n))/(t*Math.sqrt(e));return o}var Gd={blackScholes:qD,stdNormCDF:Ja,getW:XD};const JD=Jc(Gd);var ZD=Gd;function $D(n,i,e,t,r,o,a){a=a||.1;for(var s=0,l=1/0,u=0;u<100;u++){var c=ZD.blackScholes(i,e,t,a,r,o);if(n*100==Math.floor(c*100))break;c>n?(l=a,a=(a-s)/2+s):(s=a,a=(l-a)/2+a,isFinite(a)||(a=s*2))}return a}var eR={getImpliedVolatility:$D};const zn=Jc(eR);var Ir=Gd;function Jl(n){return Math.pow(Math.E,-1*Math.pow(n,2)/2)/Math.sqrt(2*Math.PI)}function tR(n,i,e,t,r,o){return o==="call"?Zv(n,i,e,t,r):iR(n,i,e,t,r)}function Zv(n,i,e,t,r){var o=Ir.getW(n,i,e,t,r),a=null;return isFinite(o)?a=Ir.stdNormCDF(o):a=n>i?1:0,a}function iR(n,i,e,t,r){var o=Zv(n,i,e,t,r)-1;return o==-1&&i==n?0:o}function rR(n,i,e,t,r,o,a){return a=a||100,o==="call"?oR(n,i,e,t,r)/a:nR(n,i,e,t,r)/a}function oR(n,i,e,t,r){var o=Ir.getW(n,i,e,t,r);return isNaN(o)?0:i*e*Math.pow(Math.E,-1*r*e)*Ir.stdNormCDF(o-t*Math.sqrt(e))}function nR(n,i,e,t,r){var o=Ir.getW(n,i,e,t,r);return isNaN(o)?0:-1*i*e*Math.pow(Math.E,-1*r*e)*Ir.stdNormCDF(t*Math.sqrt(e)-o)}function aR(n,i,e,t,r){var o=Ir.getW(n,i,e,t,r);return isFinite(o)?n*Math.sqrt(e)*Jl(o)/100:0}function sR(n,i,e,t,r,o,a){return a=a||365,o==="call"?lR(n,i,e,t,r)/a:uR(n,i,e,t,r)/a}function lR(n,i,e,t,r){var o=Ir.getW(n,i,e,t,r);return isFinite(o)?-1*t*n*Jl(o)/(2*Math.sqrt(e))-i*r*Math.pow(Math.E,-1*r*e)*Ir.stdNormCDF(o-t*Math.sqrt(e)):0}function uR(n,i,e,t,r){var o=Ir.getW(n,i,e,t,r);return isFinite(o)?-1*t*n*Jl(o)/(2*Math.sqrt(e))+i*r*Math.pow(Math.E,-1*r*e)*Ir.stdNormCDF(t*Math.sqrt(e)-o):0}function cR(n,i,e,t,r){var o=Ir.getW(n,i,e,t,r);return isFinite(o)?Jl(o)/(n*t*Math.sqrt(e)):0}var dR={getDelta:tR,getVega:aR,getGamma:cR,getTheta:sR,getRho:rR};const no=Jc(dR),pR="",fR="",kf={__name:"CustomAgAnimateShowChangeCECellRenderer",props:["params"],setup(n){const e=_t(n),t=g(null),r=g(0),o=g(null),a=g(null),s=g(!1),l=g(null),u=g(!1),c=g(!0);Gt(()=>{l.value=isNaN(e.params.value.value)?e.params.value.value:Number(e.params.value.value).toFixed(2),d(e.params.value)});function d(E){t.value=E.data?.inCallLastLtp?Number(E.data?.inCallLastLtp):null;const _=isNaN(E.value)?E.value:Number(E.value);if(_===t.value)return!1;if(E.valueFormatted!=null&&E.valueFormatted!=null?l.value=E.valueFormatted:E.value!=null&&E.value!=null?l.value=_:l.value="-",typeof _=="number"&&typeof t.value=="number"){const L=_-t.value;f(E,L)}return c.value?c.value=!1:u.value=!0,y(),t.value=_,!0}function f(E,_){const L=Math.abs(_),P=E.formatValue(L),V=P!=null&&P!=null?P:L;a.value=_>=0,a.value?o.value=pR+V:o.value=fR+V,s.value=!0}function y(){r.value++;const E=r.value;window.setTimeout(()=>{E===r.value&&S()},1500),window.setTimeout(()=>{E===r.value&&w()},1e4)}function S(){u.value=!1}function w(){s.value=!1}return(E,_)=>(R(),N("span",null,[mt(h("span",{class:Et(["ag-value-change-delta",[nt(a)?"ag-value-change-delta-up":"ag-value-change-delta-down"]])},k(nt(o)),3),[[hi,nt(s)]]),h("span",{class:Et(["ag-value-change-value",[nt(u)?"ag-value-change-value-highlight":""]])},k(nt(l)),3)]))}},hR="",vR="",Gf={__name:"CustomAgAnimateShowChangePECellRenderer",props:["params"],setup(n){const e=_t(n),t=g(null),r=g(0),o=g(null),a=g(null),s=g(!1),l=g(null),u=g(!1),c=g(!0);Gt(()=>{l.value=isNaN(e.params.value.value)?e.params.value.value:Number(e.params.value.value).toFixed(2),d(e.params.value)});function d(E){t.value=E.data?.inPutLastLtp?Number(E.data?.inPutLastLtp):null;const _=isNaN(E.value)?E.value:Number(E.value);if(_===t.value)return!1;if(E.valueFormatted!=null&&E.valueFormatted!=null?l.value=E.valueFormatted:E.value!=null&&E.value!=null?l.value=_:l.value="-",typeof _=="number"&&typeof t.value=="number"){const L=_-t.value;f(E,L)}return c.value?c.value=!1:u.value=!0,y(),t.value=_,!0}function f(E,_){const L=Math.abs(_),P=E.formatValue(L),V=P!=null&&P!=null?P:L;a.value=_>=0,a.value?o.value=hR+V:o.value=vR+V,s.value=!0}function y(){r.value++;const E=r.value;window.setTimeout(()=>{E===r.value&&S()},1500),window.setTimeout(()=>{E===r.value&&w()},1e4)}function S(){u.value=!1}function w(){s.value=!1}return(E,_)=>(R(),N("span",null,[mt(h("span",{class:Et(["ag-value-change-delta",[nt(a)?"ag-value-change-delta-up":"ag-value-change-delta-down"]])},k(nt(o)),3),[[hi,nt(s)]]),h("span",{class:Et(["ag-value-change-value",[nt(u)?"ag-value-change-value-highlight":""]])},k(nt(l)),3)]))}},gR={key:1},yc=vi({__name:"OiInterestRenderer",props:["params"],setup(n){const e=_t(n),t=g(""),r=g(""),o=g("mdi-arrow-up-thin");return Gt(()=>{switch(e.params.value.value){case 1:t.value="success",r.value="L.B.";break;case 2:t.value="warning",r.value="L.U.",o.value="mdi-arrow-down-thin";break;case 3:t.value="error",r.value="S.B.",o.value="mdi-arrow-down-thin";break;case 4:t.value="info",r.value="S.C.";break}}),(a,s)=>nt(r)?(R(),at(ei,{key:0,color:nt(t),size:"15",class:"px-2"},{default:v(()=>[p(_e,{icon:nt(o)},null,8,["icon"]),M(" "+k(nt(r)),1)]),_:1},8,["color"])):(R(),N("span",gR,"-"))}}),yR={key:2},Vf=vi({__name:"OiCallChangeRenderer",props:["params"],setup(n){const e=_t(n);return(t,r)=>nt(e).params.value.rowIndex==nt(e).params.value.maxCallOiChangeIndex()?(R(),at(ei,{key:0,color:"success"},{default:v(()=>[M(k(isNaN(Number(nt(e).params.value.value))?"-":Number(nt(e).params.value.value).toLocaleString("en-IN")),1)]),_:1})):nt(e).params.value.rowIndex==nt(e).params.value.minCallOiChangeIndex()?(R(),at(ei,{key:1,color:"error"},{default:v(()=>[M(k(isNaN(Number(nt(e).params.value.value))?"-":Number(nt(e).params.value.value).toLocaleString("en-IN")),1)]),_:1})):(R(),N("span",yR,k(isNaN(Number(nt(e).params.value.value))?"-":Number(nt(e).params.value.value).toLocaleString("en-IN")),1))}}),mR={key:2},Bf=vi({__name:"OiPutChangeRenderer",props:["params"],setup(n){const e=_t(n);return(t,r)=>nt(e).params.value.rowIndex==nt(e).params.value.maxPutOiChangeIndex()?(R(),at(ei,{key:0,color:"success"},{default:v(()=>[M(k(isNaN(Number(nt(e).params.value.value))?"-":Number(nt(e).params.value.value).toLocaleString("en-IN")),1)]),_:1})):nt(e).params.value.rowIndex==nt(e).params.value.minPutOiChangeIndex()?(R(),at(ei,{key:1,color:"error"},{default:v(()=>[M(k(isNaN(Number(nt(e).params.value.value))?"-":Number(nt(e).params.value.value).toLocaleString("en-IN")),1)]),_:1})):(R(),N("span",mR,k(isNaN(Number(nt(e).params.value.value))?"-":Number(nt(e).params.value.value).toLocaleString("en-IN")),1))}}),CR={class:"d-flex gap-2"},mc={__name:"CustomActionButtonRenderer",props:["params"],setup(n){const e=_t(n);function t(r,o,a){e.params.value.clicked(r,o,a)}return(r,o)=>(R(),N("div",CR,[p(Le,{color:"success",size:"25",onClick:o[0]||(o[0]=a=>t(nt(e).params.value.stOptionType,"BUY",nt(e).params.value.data))},{default:v(()=>o[2]||(o[2]=[M(" B ")])),_:1}),p(Le,{color:"error",size:"25",onClick:o[1]||(o[1]=a=>t(nt(e).params.value.stOptionType,"SELL",nt(e).params.value.data))},{default:v(()=>o[3]||(o[3]=[M(" S ")])),_:1})]))}};const SR={class:"d-flex custom-qty-input custom-remove-input-arrow"},Hf=vi({__name:"QtyCellRenderer",props:["params"],setup(n){const e=_t(n),t=g(1);Gt(()=>{t.value=e.params.value.data.inQuantity}),Ke(t,(a,s)=>{(t.value==0||t.value.toString().includes("e"))&&(t.value=1)});function r(a,s){t.value=ot.incrementDecrementLotSize(t.value,ht.maxLots,e.params.value.data.inLotSize,a?"increment":"decrement"),e.params.value.modifyQty(e.params.value.data,t.value)}function o(a){a||(t.value=ot.calculateLotSize(t.value,ht.maxLots,e.params.value.data.inLotSize),e.params.value.modifyQty(e.params.value.data,t.value))}return(a,s)=>(R(),N("div",SR,[p(Dt,{location:"top"},{activator:v(({props:l})=>[p(_e,pt(l,{icon:"bx-minus-circle",class:"text-error cursor-pointer custom-margin",onClick:s[0]||(s[0]=u=>r(!1,1))}),null,16)]),default:v(()=>[s[3]||(s[3]=h("span",null,"Decrease Qty",-1))]),_:1}),p(Jt,{density:"compact",type:"number",modelValue:nt(t),"onUpdate:modelValue":s[1]||(s[1]=l=>lh(t)?t.value=l:null),"onUpdate:focused":o},null,8,["modelValue"]),p(Dt,{location:"top"},{activator:v(({props:l})=>[p(_e,pt(l,{icon:"bx-plus-circle",class:"text-success cursor-pointer custom-margin",onClick:s[2]||(s[2]=u=>r(!0,1))}),null,16)]),default:v(()=>[s[4]||(s[4]=h("span",null,"Increase Qty",-1))]),_:1}),s[5]||(s[5]=M(" qty "))]))}}),Wf=vi({__name:"CloseBtnCellRenderer",props:["params"],setup(n){const e=_t(n);function t(){e.params.value.clicked(e.params.value.data)}return(r,o)=>(R(),N("span",null,[p(Dt,{location:"top"},{activator:v(({props:a})=>[p(_e,pt(a,{icon:"bx-x-circle",class:"text-error cursor-pointer",onClick:o[0]||(o[0]=s=>t())}),null,16)]),default:v(()=>[o[1]||(o[1]=h("span",null,"Remove this order",-1))]),_:1})]))}}),Uf=vi({__name:"SideCellRenderer",props:["params"],setup(n){const e=_t(n);function t(r){e.params.value.clicked(e.params.value.data,r)}return(r,o)=>(R(),N("span",{class:Et(["cursor-pointer",[n.params.data.stBuySellType=="BUY"?"text-success":"text-error"]]),onClick:o[0]||(o[0]=a=>t(n.params.data.stBuySellType=="BUY"?"SELL":"BUY"))},[p(Dt,{activator:"parent",location:"top"},{default:v(()=>o[1]||(o[1]=[M(" Click to change buy/sell side ")])),_:1}),M(" "+k(n.params.data.stBuySellType),1)],2))}}),wR={key:0,class:"flex"},TR=["value"],jf=vi({__name:"OrderTypeRenderer",props:["params"],setup(n){const e=_t(n),t=g(1);return Gt(()=>{t.value=e.params.value.data.inMarketProtectionPercentage}),Ke(t,(r,o)=>{e.params.value.clicked(e.params.value.data,r)}),(r,o)=>(R(),N("div",null,[nt(e).params.value.data.isMarketProtectionOrder?(R(),N("div",wR,[o[1]||(o[1]=M(" MARKET PROTECTION ( ")),mt(h("select",{class:"custom-order-type-select","onUpdate:modelValue":o[0]||(o[0]=a=>lh(t)?t.value=a:null)},[(R(),N(rt,null,kt(15,a=>h("option",{key:"market_protection_"+a,value:a},k(a)+"% ",9,TR)),64))],512),[[bi,nt(t)]]),o[2]||(o[2]=M(" ) "))])):(R(),N(rt,{key:1},[M(k(nt(e).params.value.data.stOrderType),1)],64))]))}});function zf(n){return typeof n=="function"||Object.prototype.toString.call(n)==="[object Function]"}function jn(n,i,e,t=1){const[r,o]=typeof t=="number"?[t,t]:t,a=Math.round(i/r/n[0])*n[0],s=Math.round(e/o/n[1])*n[1];return[a,s]}function Cc(n,i,e){return n-i-e}function Sc(n,i,e){return n-i-e}function br(n,i,e){return i!==null&&n<i?i:e!==null&&e<n?e:n}function Yf(n,i,e){let t=n;const r=["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"].find(o=>zf(t[o]));if(!zf(t[r]))return!1;do{if(t[r](i))return!0;if(t===e)return!1;t=t.parentNode}while(t);return!1}function OR(n){const i=window.getComputedStyle(n);return[parseFloat(i.getPropertyValue("width"),10),parseFloat(i.getPropertyValue("height"),10)]}function gn(n,i,e){n&&(n.attachEvent?n.attachEvent("on"+i,e):n.addEventListener?n.addEventListener(i,e,!0):n["on"+i]=e)}function Kf(n,i,e){n&&(n.detachEvent?n.detachEvent("on"+i,e):n.removeEventListener?n.removeEventListener(i,e,!0):n["on"+i]=null)}const PR=["onMousedown","onTouchstart"],Jo={__name:"DraggableResizableVue3",props:{draggable:{type:Boolean,default:!0},resizable:{type:Boolean,default:!0},x:{type:Number,default:0},y:{type:Number,default:0},z:{type:[String,Number],default:"auto",validator:n=>typeof n=="string"?n==="auto":n>=0},w:{type:[Number,String],validator:n=>typeof n=="number"?n>0:n==="auto"},h:{type:[Number,String],validator:n=>typeof n=="number"?n>0:n==="auto"},minWidth:{type:Number,default:0,validator:n=>n>=0},minHeight:{type:Number,default:0,validator:n=>n>=0},maxWidth:{type:Number,default:null,validator:n=>n>=0},maxHeight:{type:Number,default:null,validator:n=>n>=0},active:{type:Boolean,default:!1},preventDeactivation:{type:Boolean,default:!1},activeOnHover:{type:Boolean,default:!1},disableUserSelect:{type:Boolean,default:!0},enableNativeDrag:{type:Boolean,default:!1},lockAspectRatio:{type:Boolean,default:!1},handlesType:{type:String,default:"handles",validator:n=>["handles","borders","custom"].includes(n)},handles:{type:Array,default:()=>["tl","tm","tr","mr","br","bm","bl","ml"],validator:n=>{const i=new Set(["tl","tm","tr","mr","br","bm","bl","ml"]);return new Set(n.filter(e=>i.has(e))).size===n.length}},handlesSize:{type:Number,default:10},handlesBorder:{type:String,default:"0.5px solid #bbb"},dragHandle:{type:String,default:null},dragCancel:{type:String,default:null},axis:{type:String,default:"both",validator:n=>["x","y","both"].includes(n)},grid:{type:Array,validator:n=>Array.isArray(n)&&typeof n[0]=="number"&&typeof n[1]=="number"},showGrid:{type:[Boolean,String],default:!1,validator:n=>[!0,!1,"x","y","both"].includes(n)},gridColor:{type:String,default:"rgba(0, 0, 0, 0.1)"},parent:{type:[Boolean,String],default:!1},scale:{type:[Number,Array],default:1,validator:n=>typeof n=="number"?n>0:n.length===2&&n[0]>0&&n[1]>0},className:{type:String,default:"drv"},classNameDraggable:{type:String,default:"drv-draggable"},classNameResizable:{type:String,default:"drv-resizable"},classNameDragging:{type:String,default:"drv-dragging"},classNameResizing:{type:String,default:"drv-resizing"},classNameActive:{type:String,default:"drv-active"},classNameHandle:{type:String,default:"drv-handle"},onDragStart:{type:Function,default:()=>!0},onDrag:{type:Function,default:()=>!0},onResizeStart:{type:Function,default:()=>!0},onResize:{type:Function,default:()=>!0}},emits:["update:x","update:y","update:w","update:h","update:active","resizing","resizestop","dragging","dragstop","activated","deactivated"],setup(n,{emit:i}){ny(ce=>({"39a6bff2":P.value,"4e451bdd":ne.value,"51f44245":V.value}));const e={mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"},touch:{start:"touchstart",move:"touchmove",stop:"touchend"}},t={userSelect:"none",MozUserSelect:"none",WebkitUserSelect:"none",MsUserSelect:"none"},r={userSelect:"auto",MozUserSelect:"auto",WebkitUserSelect:"auto",MsUserSelect:"auto"};let o=e.mouse;const a=n,s=i,l=g(null),u=g(null),c=g({h:"auto",w:"auto",active:!1,x:0,y:0}),d=ay(),f=di({get(){return a.w||c.value.w},set(ce){s("update:w",ce),c.value.w=ce}}),y=di({get(){return a.h||c.value.h},set(ce){s("update:h",ce),c.value.h=ce}}),S=di({get(){return a.x||c.value.x},set(ce){s("update:x",ce),c.value.x=ce}}),w=di({get(){return a.y||c.value.y},set(ce){s("update:y",ce),c.value.y=ce}}),E=g(null),_=g(null),L=di({get(){return a.active||c.value.active},set(ce){s("update:active",ce),c.value.active=ce}}),P=di(()=>a.handlesSize+"px"),V=di(()=>a.handlesSize/2+"px"),ne=di(()=>a.handlesBorder),ee=g(!1),re=g(!1),F=g(null),U=g(null),Y=g(null),K=g(null),Ce=g(!1),Q=g(!1),Ne=g(!1),xe=g(!1),fe=g(null),q=g(null),Pe=di(()=>({transform:`translate(${S.value}px, ${w.value}px)`,width:$.value,height:Qe.value,zIndex:a.z,...Q.value&&a.disableUserSelect?t:r})),Se=wp("drvContainerClass",{}),ge=di(()=>Se.value?"."+Se.value:a.parent),le=wp("drvContainerGrid",{}),ie=di(()=>!le||!le.value?a.grid||[1,1]:a.grid?a.grid:le.value),ye=di(()=>{const ce={x:`linear-gradient(-90deg, ${a.gridColor} 1px, transparent 1px) 0px 0px / ${ie.value[0]}px ${ie.value[0]}px`,y:`linear-gradient(0deg, ${a.gridColor} 1px, transparent 1px) 0px 0px / ${ie.value[1]}px ${ie.value[1]}px`};return a.showGrid==="x"||a.showGrid==="y"?ce[a.showGrid]:a.showGrid?`${ce.x}, ${ce.y}`:null}),Re=di(()=>a.resizable?a.handles:[]),$=di(()=>f.value==="auto"&&!ee.value?"auto":f.value+"px"),Qe=di(()=>y.value==="auto"&&!re.value?"auto":y.value+"px"),Ge=g(a.minWidth),et=g(a.minHeight),Je=g(a.maxWidth),it=g(a.maxHeight),jt=di(()=>!!K.value&&(K.value.includes("l")||K.value.includes("r"))),Si=di(()=>!!K.value&&(K.value.includes("t")||K.value.includes("b"))),Kt=()=>{fe.value={mouseX:0,mouseY:0,x:0,y:0,w:0,h:0},q.value={minLeft:null,maxLeft:null,minRight:null,maxRight:null,minTop:null,maxTop:null,minBottom:null,maxBottom:null}},fi=()=>{if(ge.value){const[ce,Ze]=gi();U.value=ce,Y.value=Ze,E.value=U.value-f.value-S.value,_.value=Y.value-y.value-w.value}},gi=()=>{if(ge.value){const ce=typeof ge.value=="string"?l.value.closest(ge.value):l.value.parentNode;u.value=ce;const Ze=window.getComputedStyle(ce,null);return[parseInt(Ze.getPropertyValue("width"),10),parseInt(Ze.getPropertyValue("height"),10)]}return[null,null]},tt=()=>{if(ge.value&&a.showGrid){if(!u.value){const ce=typeof ce.value=="string"?l.value.closest(ce.value):l.value.parentNode;u.value=ce}u.value.style.background=ye.value}},ae=ce=>{o=e.touch,H(ce)},G=ce=>{o=e.mouse,H(ce)},H=ce=>{if(ce instanceof MouseEvent&&ce.which!==1)return;const Ze=ce.target||ce.srcElement;if(l.value.contains(Ze)){if(a.onDragStart(ce)===!1)return;if(a.dragHandle&&!Yf(Ze,a.dragHandle,l.value)||a.dragCancel&&Yf(Ze,a.dragCancel,l.value)){Q.value=!1;return}L.value||(L.value=!0,s("activated")),a.draggable&&(Ne.value=!0),fe.value.mouseX=ce.touches?ce.touches[0].pageX:ce.pageX,fe.value.mouseY=ce.touches?ce.touches[0].pageY:ce.pageY,fe.value.left=S.value,fe.value.right=E.value,fe.value.top=w.value,fe.value.bottom=_.value,ge.value&&(q.value=Ee()),gn(document.documentElement,o.move,Ri),gn(document.documentElement,o.stop,ze)}},Ee=()=>({minLeft:S.value%ie.value[0],maxLeft:Math.floor((U.value-f.value-S.value)/ie.value[0])*ie.value[0]+S.value,minRight:E.value%ie.value[0],maxRight:Math.floor((U.value-f.value-E.value)/ie.value[0])*ie.value[0]+E.value,minTop:w.value%ie.value[1],maxTop:Math.floor((Y.value-y.value-w.value)/ie.value[1])*ie.value[1]+w.value,minBottom:_.value%ie.value[1],maxBottom:Math.floor((Y.value-y.value-_.value)/ie.value[1])*ie.value[1]+_.value}),He=ce=>{const Ze=ce.target||ce.srcElement,we=new RegExp(a.className+"-([trmbl]{2})","");(!l.value||!l.value.contains(Ze)&&!we.test(Ze.className))&&(L.value&&!a.preventDeactivation&&(L.value=!1,s("deactivated")),Kf(document.documentElement,o.move,Ht)),Kt()},Ae=(ce,Ze)=>{o=e.touch,Lt(ce,Ze)},Lt=(ce,Ze)=>{Ze instanceof MouseEvent&&Ze.which!==1||a.onResizeStart(ce,Ze)!==!1&&(Ze.stopPropagation&&Ze.stopPropagation(),a.lockAspectRatio&&!ce.includes("m")?K.value="m"+ce.substring(1):K.value=ce,xe.value=!0,fe.value.mouseX=Ze.touches?Ze.touches[0].pageX:Ze.pageX,fe.value.mouseY=Ze.touches?Ze.touches[0].pageY:Ze.pageY,fe.value.left=S.value,fe.value.right=E.value,fe.value.top=w.value,fe.value.bottom=_.value,q.value=ut(),gn(document.documentElement,o.move,Ht),gn(document.documentElement,o.stop,ze))},ut=()=>{const[ce,Ze]=ie.value;a.lockAspectRatio&&(Ge.value/et.value>F.value?et.value=Ge.value/F.value:Ge.value=F.value*et.value,Je.value&&it.value?(Je.value=Math.min(Je.value,F.value*it.value),it.value=Math.min(it.value,Je.value/F.value)):Je.value?it.value=Je.value/F.value:it.value&&(Je.value=F.value*it.value)),Je.value=Je.value-Je.value%ce,it.value=it.value-it.value%Ze;const we={minLeft:null,maxLeft:null,minTop:null,maxTop:null,minRight:null,maxRight:null,minBottom:null,maxBottom:null};return ge.value?(we.minLeft=S.value%ce,we.maxLeft=S.value+Math.floor((f.value-Ge.value)/ce)*ce,we.minTop=w.value%Ze,we.maxTop=w.value+Math.floor((y.value-et.value)/Ze)*Ze,we.minRight=E.value%ce,we.maxRight=E.value+Math.floor((f.value-Ge.value)/ce)*ce,we.minBottom=_.value%Ze,we.maxBottom=_.value+Math.floor((y.value-et.value)/Ze)*Ze,Je.value&&(we.minLeft=Math.max(we.minLeft,U.value-E.value-Je.value),we.minRight=Math.max(we.minRight,U.value-S.value-Je.value)),it.value&&(we.minTop=Math.max(we.minTop,Y.value-_.value-it.value),we.minBottom=Math.max(we.minBottom,Y.value-w.value-it.value)),a.lockAspectRatio&&(we.minLeft=Math.max(we.minLeft,S.value-w.value*F.value),we.minTop=Math.max(we.minTop,w.value-S.value/F.value),we.minRight=Math.max(we.minRight,E.value-_.value*F.value),we.minBottom=Math.max(we.minBottom,_.value-E.value/F.value))):(we.minLeft=null,we.maxLeft=S.value+Math.floor((f.value-Ge.value)/ce)*ce,we.minTop=null,we.maxTop=w.value+Math.floor((y.value-et.value)/Ze)*Ze,we.minRight=null,we.maxRight=E.value+Math.floor((f.value-Ge.value)/ce)*ce,we.minBottom=null,we.maxBottom=_.value+Math.floor((y.value-et.value)/Ze)*Ze,Je.value&&(we.minLeft=-(E.value+Je.value),we.minRight=-(S.value+Je.value)),it.value&&(we.minTop=-(_.value+it.value),we.minBottom=-(w.value+it.value)),a.lockAspectRatio&&Je.value&&it.value&&(we.minLeft=Math.min(we.minLeft,-(E.value+Je.value)),we.minTop=Math.min(we.minTop,-(it.value+_.value)),we.minRight=Math.min(we.minRight,-S.value-Je.value),we.minBottom=Math.min(we.minBottom,-w.value-it.value))),we},Ri=ce=>{Ce.value?Ht(ce):Ne.value&&Gi(ce)},Gi=ce=>{const Ze=a.axis&&a.axis!=="y"?fe.value.mouseX-(ce.touches?ce.touches[0].pageX:ce.pageX):0,we=a.axis&&a.axis!=="x"?fe.value.mouseY-(ce.touches?ce.touches[0].pageY:ce.pageY):0,[wt,We]=jn(ie.value,Ze,we,a.scale),lt=br(fe.value.left-wt,q.value.minLeft,q.value.maxLeft),_i=br(fe.value.top-We,q.value.minTop,q.value.maxTop);if(a.onDrag(S,w)===!1)return;const ti=br(fe.value.right+wt,q.value.minRight,q.value.maxRight),oi=br(fe.value.bottom+We,q.value.minBottom,q.value.maxBottom);S.value=lt,w.value=_i,E.value=ti,_.value=oi,s("dragging",S.value,w.value),Q.value=!0},me=ce=>{const[Ze]=jn(ie.value,ce,w.value,1),we=br(Ze,q.value.minLeft,q.value.maxLeft);S.value=we,E.value=U.value-f.value-we},fr=ce=>{const[,Ze]=jn(ie.value,S.value,ce,1),we=br(Ze,q.value.minTop,q.value.maxTop);w.value=we,_.value=Y.value-y.value-we},Ht=ce=>{let Ze=S.value,we=w.value,wt=E.value,We=_.value;const lt=fe.value.mouseX-(ce.touches?ce.touches[0].pageX:ce.pageX),_i=fe.value.mouseY-(ce.touches?ce.touches[0].pageY:ce.pageY);!ee.value&&lt&&(ee.value=!0),!re.value&&_i&&(re.value=!0);const[ti,oi]=jn(ie.value,lt,_i,a.scale);K.value.includes("b")?(We=br(fe.value.bottom+oi,q.value.minBottom,q.value.maxBottom),a.lockAspectRatio&&Si&&(wt=E.value-(_.value-We)*F.value)):K.value.includes("t")&&(we=br(fe.value.top-oi,q.value.minTop,q.value.maxTop),a.lockAspectRatio&&Si&&(Ze=S.value-(w.value-we)*F.value)),K.value.includes("r")?(wt=br(fe.value.right+ti,q.value.minRight,q.value.maxRight),a.lockAspectRatio&&jt&&(We=_.value-(E.value-wt)/F.value)):K.value.includes("l")&&(Ze=br(fe.value.left-ti,q.value.minLeft,q.value.maxLeft),a.lockAspectRatio&&jt&&(we=w.value-(S.value-Ze)/F.value));const Rt=Cc(U.value,Ze,wt),qr=Sc(Y.value,we,We);a.onResize(K.value,Ze,we,Rt,qr)!==!1&&(S.value=Ze,w.value=we,E.value=wt,_.value=We,f.value=Rt,y.value=qr,s("resizing",S.value,w.value,f.value,y.value),Ce.value=!0)},Pt=ce=>{const[Ze]=jn(ie.value,ce,0,1);let we=br(U.value-Ze-S.value,q.value.minRight,q.value.maxRight),wt=_.value;a.lockAspectRatio&&(wt=_.value-(E.value-we)/F.value);const We=Cc(U.value,S.value,we),lt=Sc(Y.value,w.value,wt);E.value=we,_.value=wt,f.value=We,y.value=lt},Z=ce=>{const[,Ze]=jn(ie.value,0,ce,1);let we=br(Y.value-Ze-w.value,q.value.minBottom,q.value.maxBottom),wt=E.value;a.lockAspectRatio&&(wt=E.value-(_.value-we)*F.value);const We=Cc(U.value,S.value,wt),lt=Sc(Y.value,w.value,we);E.value=wt,_.value=we,f.value=We,y.value=lt},ze=()=>{K.value=null,Kt(),Ne.value=!1,xe.value=!1,Ce.value&&(Ce.value=!1,s("resizestop",S.value,w.value,f.value,y.value)),Q.value&&(Q.value=!1,s("dragstop",S.value,w.value)),Kf(document.documentElement,o.move,Ht)},yi=()=>{a.activeOnHover&&(L.value=!0)},mi=()=>{a.activeOnHover&&!Q.value&&(L.value=!1)};return Gt(()=>{Kt(),a.enableNativeDrag||(l.value.ondragstart=()=>!1);const[ce,Ze]=gi();U.value=ce,Y.value=Ze;const[we,wt]=OR(l.value);F.value=(f.value!=="auto"?f.value:we)/(y.value!=="auto"?y.value:wt),f.value=f.value!=="auto"?f.value:we,y.value=y.value!=="auto"?y.value:wt,E.value=U.value-f.value-S.value,_.value=Y.value-y.value-w.value,L.value&&s("activated"),a.showGrid&&tt(),gn(document.documentElement,"mousedown",He),gn(document.documentElement,"touchend touchcancel",He),gn(window,"resize",fi)}),Ke(()=>a.x,ce=>{Ce.value||Q.value||(ge.value&&(q.value=Ee()),me(ce))}),Ke(()=>a.y,ce=>{Ce.value||Q.value||(ge.value&&(q.value=Ee()),fr(ce))}),Ke(()=>a.lockAspectRatio,ce=>{ce?F.value=f.value/y.value:F.value=void 0}),Ke(()=>a.w,ce=>{Ce.value||Q.value||(ge.value&&(q.value=ut()),Pt(ce))}),Ke(()=>a.h,ce=>{Ce.value||Q.value||(ge.value&&(q.value=ut()),Z(ce))}),Ke(()=>a.showGrid,()=>{tt()}),Ke(()=>a.grid,()=>{tt()}),(ce,Ze)=>(R(),N("div",{ref_key:"el",ref:l,style:Xo(Pe.value),class:Et([{[n.classNameActive]:L.value,[n.classNameDragging]:Q.value,[n.classNameResizing]:Ce.value,[n.classNameDraggable]:n.draggable,[n.classNameResizable]:n.resizable},n.className]),onMousedown:G,onTouchstart:ae,onMouseover:yi,onMouseleave:mi},[h("div",{class:Et("drv-"+n.handlesType)},[(R(!0),N(rt,null,kt(Re.value,we=>(R(),N("div",{key:we,class:Et([n.classNameHandle,n.classNameHandle+"-"+we,n.classNameHandle!=="drv-handle"?"drv-handle":"",n.classNameHandle!=="drv-handle"?"drv-handle-"+we:""]),style:Xo({display:L.value?"block":"none"}),onMousedown:Tc(wt=>Lt(we,wt),["stop","prevent"]),onTouchstart:Tc(wt=>Ae(we,wt),["stop","prevent"])},[nt(d)["handle-"+we]?ll(ce.$slots,"handle-"+we,{key:0}):De("",!0),nt(d)["handle-"+we]?De("",!0):ll(ce.$slots,"handle",{key:1})],46,PR))),128))],2),ll(ce.$slots,"default")],38))}},ER={__name:"DraggableResizableContainer",props:{grid:{type:Array,default:()=>[1,1],validator:n=>Array.isArray(n)&&typeof n[0]=="number"&&typeof n[1]=="number"},showGrid:{type:[Boolean,String],default:!1,validator:n=>[!0,!1,"x","y","both"].includes(n)},gridColor:{type:String,default:"rgba(0, 0, 0, 0.1)"},className:{type:String,default:"drv-container"}},setup(n){const i=n,e=di(()=>i.grid),t=di(()=>i.className);Tp("drvContainerClass",t),Tp("drvContainerGrid",e);const r=g(null),o=di(()=>{const s={x:`linear-gradient(-90deg, ${i.gridColor} 1px, transparent 1px) 0px 0px / ${i.grid[0]}px ${i.grid[0]}px`,y:`linear-gradient(0deg, ${i.gridColor} 1px, transparent 1px) 0px 0px / ${i.grid[1]}px ${i.grid[1]}px`};return i.showGrid==="x"||i.showGrid==="y"?s[i.showGrid]:i.showGrid?`${s.x}, ${s.y}`:null}),a=di(()=>{const s={position:"relative"};return i.showGrid&&(s.background=o.value),s});return(s,l)=>(R(),N("div",{ref_key:"el",ref:r,style:Xo(a.value),class:Et([t.value])},[ll(s.$slots,"default")],6))}};Jo.install=n=>(n.component("DraggableResizableVue",Jo),n.component("DraggableResizableContainer",ER),n);rs(Ay);rs(Ly);const _R=pi();rs([Pc,bc,My,Ny,Gy,Dy,Ec,ky,Ry,_c,Dc,Fy,Iy]);const bR={name:"echartPayoffChart",props:{chartData:Object,msg:String},components:{ECharts:dh},computed:{echartsTheme(){return _R?.stFavouriteSetting?.settings?.themeMode=="dark"?"dark":"default"}},data(){return{theme:"",chartElement:null,multipleLine:{backgroundColor:"",title:{text:"Oi Pulse",left:"center",top:"40%",textStyle:{fontSize:24,color:"#80808095"},subtext:"No data available",subtextStyle:{fontSize:18,color:"#80808095"},show:!0},tooltip:{trigger:"axis",axisPointer:{type:"cross",crossStyle:{color:"#999"}}},toolbox:{show:!0,feature:{dataZoom:{show:!0,title:{zoom:"Zoom",back:"Restore Zoom"}},magicType:{show:!0,type:["line","bar"],title:{line:"Line Chart",bar:"Bar charts",stack:"Stacked charts",tiled:"tiled charts"}},restore:{show:!0,title:"Restore Chart"},saveAsImage:{show:!0,name:"payoff-chart",title:"Save as image"}}},legend:{bottom:"0%",padding:10,data:["P&L","T+0"]},grid:{left:"1%",right:"1%",containLabel:!0},visualMap:{show:!1,seriesIndex:0,left:"right",min:0,max:1,inRange:{color:["#F44336","#4CAF50"]},text:[">0","<0"],calculable:!1},xAxis:{type:"value",boundaryGap:"0%",scale:!0,splitLine:{show:!0},min:function(n){return n.min},max:function(n){return n.max}},yAxis:{name:"P&L",type:"value",boundaryGap:"0%",nameLocation:"start",scale:!0,nameTextStyle:{padding:[10,3,3,3]},axisLabel:{formatter:"{value}"},splitLine:{show:!1}},series:[{name:"P&L",type:"line",smooth:!1,showSymbol:!1,connectNulls:!0,data:[],markLine:{silent:!0,label:{show:!0,padding:[0,0,0,0]},data:[],lineStyle:{}},areaStyle:{opacity:.3}},{name:"T+0",type:"line",data:[],showSymbol:!1,connectNulls:!0,itemStyle:{color:"#008eb5"},lineStyle:{width:2,color:"#008eb5",type:"dotted"}}]}}},watch:{chartData:{handler(){typeof this.chartData=="object"&&Object.keys(this.chartData).length>0?this.chartData.combinedData.length>0?(this.multipleLine.series[0].data=this.chartData.combinedData,this.multipleLine.series[1].data=this.chartData.yAxisTplusZeroLine,this.multipleLine.series[0].markLine.data=this.chartData.markLineData,this.multipleLine.title.subtext="PayOff Chart"):(this.multipleLine.series[0].data=[],this.multipleLine.series[1].data=[],this.multipleLine.series[0].markLine.data=[],this.multipleLine.title.subtext="No data available"):(this.multipleLine.series[0].data=[],this.multipleLine.series[1].data=[],this.multipleLine.series[0].markLine.data=[],this.multipleLine.title.subtext="No data available")},deep:!0}},beforeDestroy(){this.$refs.echartPayoffChartRef.dispose(),this.$refs.echartPayoffChartRef=null},methods:{}},DR={class:"chart-wrapper"};function RR(n,i,e,t,r,o){const a=uh("ECharts");return R(),N("div",null,[h("div",DR,[p(a,{option:r.multipleLine,autoresize:!0,ref:"echartPayoffChartRef",theme:o.echartsTheme},null,8,["option","theme"])])])}const xR=ki(bR,[["render",RR],["__scopeId","data-v-78ecf045"]]);he.tz.setDefault("Asia/Kolkata");const yn=2,mn={getIv:function(n,i,e,t,r,o){const a=t/365,s=zn.getImpliedVolatility(n,i,e,a,r/100,o);return Number((s*100).toFixed(yn))},getDelta:function(n,i,e,t,r,o){const a=e/365,s=no.getDelta(n,i,a,t/100,r/100,o);return Number(s.toFixed(yn))},getGamma:function(n,i,e,t,r,o){const a=e/365,s=no.getGamma(n,i,a,t/100,r/100);return Number(s.toFixed(yn+4))},getVega:function(n,i,e,t,r,o){const a=e/365,s=no.getVega(n,i,a,t/100,r/100);return Number(s.toFixed(yn))},getTheta:function(n,i,e,t,r,o){const a=e/365,s=no.getTheta(n,i,a,t/100,r/100,o);return Number(s.toFixed(yn))},getRho:function(n,i,e,t,r,o){const a=e/365,s=no.getRho(n,i,a,t/100,r/100,o);return Number(s.toFixed(yn))},getOptionsTheoraticalPrice:function(n,i,e,t,r,o){const a=e/365,s=JD.blackScholes(n,i,a,t/100,r/100,o);return Number(s.toFixed(yn))},getItmProbability:function(n,i,e,t,r){try{const o=e/365,a=t/100*Math.sqrt(o),l=Math.log(i/n)/a,u=Math.floor(1/(1+.2316419*Math.abs(l))*1e5)/1e5,c=Math.floor(.3989423*Math.exp(-(l*l/2))*1e5)/1e5,d=1.330274*Math.pow(u,5),f=1.821256*Math.pow(u,4),y=1.781478*Math.pow(u,3),S=.356538*Math.pow(u,2),w=.3193815*u;let E=1-c*(d-f+y-S+w);return E=Math.floor(E*1e5)/1e5,E=l<0?1-E:E,E=E*100,r=="call"?Math.round((100-E)*100)/100:Math.round(E*100)/100}catch{}},findDaysLeftInExpiry:function({stStartDateArg:n,stStartTimeArg:i,stEndDateArg:e,stEndTimeArg:t="15:30:00"}){let r=0;try{let o=he(n,"YYYY-MM-DD",!0).startOf("D");r=he(e,"YYYY-MM-DD",!0).startOf("D").diff(o,"days");const s=he(i,"HH:mm:ss",!0),u=he(t,"HH:mm:ss",!0).diff(s,"minutes");let c=0;u>0&&(c=1-(375-u)/375,c=Number(c.toFixed(2))),r+=c}catch{}finally{return Number(r.toFixed(2))}}},AR={key:0,class:"text-center mb-2"},LR={key:0},MR={key:1},NR={style:{"word-wrap":"break-word"}},FR={key:0},IR={key:0},kR={key:1},GR={class:"text-success"},VR={key:0},BR={key:1},HR={class:"text-error"},WR={key:0},UR={key:1},jR={style:{"word-wrap":"break-word"}},zR={key:0},YR={key:0},KR={key:1},QR={key:0},qR={key:1},XR={class:"mx-2 my-2"};function JR(n,i,e,t,r,o){return R(),N("div",null,[e.isMarginApiNotAvailable?(R(),N("div",AR,k(e.basketMsg),1)):De("",!0),p(Di,{class:"mx-1 my-1"},{default:v(()=>[p(dt,{cols:"12",sm:"6",md:"4",lg:"3"},{default:v(()=>[i[0]||(i[0]=h("h5",null," P&L: ",-1)),h("h4",{class:Et(`${Number(t.inTotalPnl)>0?"text-success":"text-error"}`)},[t.inTotalPnl?(R(),N("span",LR,k(t.inTotalPnl),1)):(R(),N("span",MR," - "))],2)]),_:1}),p(dt,{cols:"12",sm:"6",md:"4",lg:"3"},{default:v(()=>[i[1]||(i[1]=h("h5",null," Margin: ",-1)),h("h4",NR,[t.props.isMarginLoading.value?(R(),at(Ti,{key:0,size:20,width:"3",color:"primary",indeterminate:""})):(R(),N(rt,{key:1},[t.props.isMarginApiNotAvailable.value?(R(),N("span",FR," NA ")):(R(),N(rt,{key:1},[t.props.inMarginWithExistingPosition.value?(R(),N("span",IR,k(t.sharedFunctions.showHumanReadableMtm(t.props.inMarginWithExistingPosition.value)),1)):(R(),N("span",kR," - "))],64))],64))])]),_:1}),p(dt,{cols:"12",sm:"6",md:"4",lg:"3"},{default:v(()=>[i[2]||(i[2]=h("h5",null," Max Profit: ",-1)),h("h4",GR,[t.maxProfit?(R(),N("span",VR,k(isNaN(t.maxProfit)?"":"+")+" "+k(t.maxProfit),1)):(R(),N("span",BR," - "))])]),_:1}),p(dt,{cols:"12",sm:"6",md:"4",lg:"3"},{default:v(()=>[i[3]||(i[3]=h("h5",null," Max Loss: ",-1)),h("h4",HR,[t.maxLoss?(R(),N("span",WR,k(t.maxLoss),1)):(R(),N("span",UR," - "))])]),_:1}),p(dt,{cols:"12",sm:"6",md:"4",lg:"6"},{default:v(()=>[i[4]||(i[4]=h("h5",null," Breakeven: ",-1)),h("h4",jR,[t.breakevenPoints&&t.breakevenPoints.length>0?(R(),N("span",zR,[(R(!0),N(rt,null,kt(t.breakevenPoints,(a,s)=>(R(),N("span",{key:s},[s>0?(R(),N("span",YR,"-")):De("",!0),M(" "+k(a.inBreakevenPoint),1)]))),128))])):(R(),N("span",KR," - "))])]),_:1}),p(dt,{cols:"12",sm:"6",md:"4",lg:"3"},{default:v(()=>[i[5]||(i[5]=h("h5",null," Risk/Reward: ",-1)),h("h4",null,[!isNaN(t.maxLoss)&&!isNaN(t.maxProfit)&&!isNaN(t.maxLoss/t.maxProfit)?(R(),N("span",QR,k(Math.abs(t.maxLoss/t.maxProfit).toFixed(2)),1)):(R(),N("span",qR,"-"))])]),_:1}),p(dt,{cols:"12",sm:"6",md:"4",lg:"3"},{default:v(()=>[i[6]||(i[6]=h("h5",null," Days Left: ",-1)),h("h4",null,k(t.inDaysLeftInNearestExpiry),1)]),_:1})]),_:1}),h("div",XR,[p(t.echartPayoffChart,{chartData:t.chartData,autoresize:!0},null,8,["chartData"])])])}const ZR={__name:"StrategyBuilder",props:["BasketOrderData","selectedOptions","spotPrice","totalPnl","inMarginWithExistingPosition","isMarginApiNotAvailable","isMarginLoading","basketMsg","activeTab","from"],setup(n,{expose:i}){i(),he.tz.setDefault("Asia/Kolkata");const e=n,t=_t(e),r=g({}),o=g(null),a=g(null),s=g(0),l=g(30),u=g(null),c=g(10),d=g(1),f=g(0),y=g(0),S=g(null),w=g([]),E=g({inSpotLtp:0,stUnderlyingAsset:""}),_=g(0),L=g([]),P=g({}),V=g(0),ne=g(!1);Gt(()=>{F(),t.from.value=="optionsList"&&ee(!0)}),Ke(t.BasketOrderData,(fe,q)=>{re()},{deep:!0}),Ke(t.totalPnl,(fe,q)=>{V.value=Number(fe)},{deep:!0}),Ke(t.selectedOptions,(fe,q)=>{ee()},{deep:!0}),Ke(t.activeTab,(fe,q)=>{ne.value==!1&&fe=="basketOrder"&&ee(!0)},{deep:!0});async function ee(fe=!1){P.value[t.selectedOptions.value]||yt.post("/strategy-builder/getassetdetailsforstrategybuilder",{stAssetName:t.selectedOptions.value}).then(q=>{P.value[t.selectedOptions.value]=q.data.data,fe&&(ne.value=!0,a.value=P.value[t.selectedOptions.value]?.inAtmStrikePrice,o.value=P.value[t.selectedOptions.value]?.inStrikePriceGap,_.value=P.value[t.selectedOptions.value]?.inHv,t.from.value=="optionsList"&&F())}).catch(q=>{console.log("err :>> ",q)})}async function re(){const fe=[];let q=null,Pe=!1,Se=[];t.BasketOrderData.value.forEach(ge=>{const le={...ge};Se.push(le.stSubscribeSymbolName),q!=null&&q!=le.stSymbolName&&(Pe=!0),q=le.stSymbolName,le.stExpiryDate=he(le.stExpiryDate,"YYYY-MM-DD",!0).format("YYMMDD"),le.stOptionType=le.stSubSegment=="OPTIONS"?le.stOptionType=="CALL"?"CE":"PE":null,fe.push(le)}),Pe?r.value={}:(L.value=fe,F())}function F(){try{E.value.inSpotLtp=t.spotPrice?.value,a.value=P.value[t.selectedOptions.value]?.inAtmStrikePrice,o.value=P.value[t.selectedOptions.value]?.inStrikePriceGap,_.value=P.value[t.selectedOptions.value]?.inHv,E.value.stUnderlyingAsset=t.selectedOptions?.value;let fe=he().format("YYYY-MM-DD"),q=he().set({secondArg:0}).format("HH:mm:ss"),Pe=E.value.inSpotLtp;for(let le=0;le<L.value.length;le++){const ie=ot.deepCopy(L.value[le]),ye={stStartDateArg:fe,stStartTimeArg:q,stEndDateArg:he(ie.stExpiryDate,"YYMMDD",!0).format("YYYY-MM-DD"),stEndTimeArg:"15:30:00"},Re=Ne(ye),$=ie.stOptionType=="CE"?"call":"put";L.value[le].inIv=mn.getIv(ie.inLimitPrice,Pe,ie.inStrikePrice,Re,c.value,$)}u.value=K(L.value);const Se={stStartDateArg:fe,stStartTimeArg:q,stEndDateArg:he(u.value,"YYMMDD",!0).format("YYYY-MM-DD"),stEndTimeArg:"15:30:00"};d.value=Ne(Se);const ge={inDaysLeftInNearestExpiry:d.value,inUnderlyingSpotLtp:Pe,stFetchDate:Se.stStartDateArg,stFetchTime:Se.stStartTimeArg};U(ge)}catch(fe){console.log("error"),console.log(fe)}}function U(fe){try{if(L.value){let q={},Pe={};if(L.value.length>0){let Se=0,ge=[a.value];if(s.value==0){ge=[a.value];for(let Re=1;Re<=l.value;Re++)Se=o.value*Re,ge.unshift(a.value-Se),ge.push(a.value+Se)}else{let Re=fe.inUnderlyingSpotLtp+fe.inUnderlyingSpotLtp*s.value/100;ge=[Re];for(let $=1;$<=l.value;$++)Se=o.value*$,ge.unshift(Number((Re-Se).toFixed(2))),ge.push(Number((Re+Se).toFixed(2)))}let le=[];for(let Re=0;Re<ge.length;Re++){let $=Number(ge[Re]);for(let Qe=0;Qe<L.value.length;Qe++){let Ge=L.value[Qe];if(Ge.inStrikePrice=Number(Ge.inStrikePrice),q[$]=q[$]==null?[]:q[$],Ge.stSubSegment=="OPTIONS"){let et=u.value!=Ge.stExpiryDate,Je=0;if(et){const it=Ge.stOptionType=="CE"?"call":"put",jt=Y(u.value,Ge.stExpiryDate),Si=mn.getOptionsTheoraticalPrice($,Ge.inStrikePrice,jt,Ge.inIv,c.value,it);Je=Number((Si-Ge.inLimitPrice).toFixed(2))}else Je=Number(Ge.inLimitPrice.toFixed(2));if(Ge.stOptionType=="CE"){const it=Math.max($-Ge.inStrikePrice,0)-Je;Ge.stBuySellType=="BUY"?q[$].push({inLot:Ge.inQuantity,inPoint:et?Je:it}):q[$].push({inLot:Ge.inQuantity,inPoint:(et?Je:it)*-1})}else if(Ge.stOptionType=="PE"){const it=Math.max(Ge.inStrikePrice-$,0)-Je;Ge.stBuySellType=="BUY"?q[$].push({inLot:Ge.inQuantity,inPoint:et?Je:it}):q[$].push({inLot:Ge.inQuantity,inPoint:(et?Je:it)*-1})}}else Ge.stSubSegment=="FUTURES"&&(Ge.stBuySellType=="BUY"?q[$].push({inLot:Ge.inQuantity,inPoint:Number(($-Ge.inLimitPrice).toFixed(2))}):Ge.stBuySellType=="SELL"&&q[$].push({inLot:Ge.inQuantity,inPoint:Number((Ge.inLimitPrice-$).toFixed(2))}))}for(let Qe=0;Qe<q[$].length;Qe++){const Ge=q[$][Qe];Pe[$]=Pe[$]==null?0:Pe[$],Pe[$]=Pe[$]+Ge.inLot*Ge.inPoint}le.push([$,Number(Pe[$].toFixed(2))])}let ie=Ce(ge,L.value,fe),ye=fe.inUnderlyingSpotLtp;s.value!=0&&(ye=fe.inUnderlyingSpotLtp+fe.inUnderlyingSpotLtp*s.value/100),r.value={inUnderlyingLtp:ye,inStandardDeviation:_.value/Math.sqrt(252),xAxisData:ge,yAxisTplusZeroLine:ie,combinedData:le,markLineData:[{name:"Spot",silent:!0,label:{show:!0,formatter:ye},xAxis:ye}]},Q(r.value),ge=null}else r.value={},f.value=null,y.value=null,S.value=null,w.value=[],u.value=null,d.value=0}}catch(q){console.log("error"),console.log(q)}}function Y(fe,q){try{let Pe=he(q,"YYMMDD").startOf("D").diff(he(fe,"YYMMDD").startOf("D"),"days");return Pe>1?Pe:1}catch(Pe){console.log("error"),console.log(Pe)}}function K(fe){try{let q=null;for(let Pe=0;Pe<fe.length;Pe++)if(Pe==0)q=he(fe[Pe].stExpiryDate,"YYMMDD");else{let Se=he(fe[Pe].stExpiryDate,"YYMMDD");Se.isBefore(q)&&(q=Se)}return q?q.format("YYMMDD"):he().format("YYMMDD")}catch(q){console.log("error"),console.log(q)}}function Ce(fe,q,Pe){try{let Se={},ge={},le=[];for(let ie=0;ie<fe.length;ie++){let ye=fe[ie];for(let Re=0;Re<q.length;Re++){let $=q[Re];if($.inStrikePrice=Number($.inStrikePrice),Se[ye]=Se[ye]==null?[]:Se[ye],$.stSubSegment=="OPTIONS"){let Qe=0;const Ge=$.stOptionType=="CE"?"call":"put",et={stStartDateArg:Pe.stFetchDate,stStartTimeArg:Pe.stFetchTime,stEndDateArg:he($.stExpiryDate,"YYMMDD",!0).format("YYYY-MM-DD"),stEndTimeArg:"15:30:00"},Je=Ne(et),it=mn.getOptionsTheoraticalPrice(ye,$.inStrikePrice,Je,$.inIv,c.value,Ge);Qe=Number((it-$.inLimitPrice).toFixed(2)),$.stOptionType=="CE"?$.stBuySellType=="BUY"?Se[ye].push({inLot:$.inQuantity,inPoint:Qe}):Se[ye].push({inLot:$.inQuantity,inPoint:Qe*-1}):$.stOptionType=="PE"&&($.stBuySellType=="BUY"?Se[ye].push({inLot:$.inQuantity,inPoint:Qe}):Se[ye].push({inLot:$.inQuantity,inPoint:Qe*-1}))}else $.stSubSegment=="FUTURES"&&($.stBuySellType=="BUY"?Se[ye].push({inLot:$.inQuantity,inPoint:Number((ye-$.inLimitPrice).toFixed(2))}):$.stBuySellType=="SELL"&&Se[ye].push({inLot:$.inQuantity,inPoint:Number(($.inLimitPrice-ye).toFixed(2))}))}for(let Re=0;Re<Se[ye].length;Re++){const $=Se[ye][Re];ge[ye]=ge[ye]==null?0:ge[ye],ge[ye]=ge[ye]+$.inLot*$.inPoint}le.push([ye,Number(ge[ye].toFixed(2))])}return le}catch(Se){console.log("error"),console.log(Se)}}function Q(fe){try{if(fe.combinedData&&fe.combinedData.length>1){let q=fe.combinedData,Pe=0,Se=0,ge=[],le=[];for(let ie=1;ie<q.length;ie++){let ye=q[ie-1][0],Re=q[ie][0],$=q[ie-1][1],Qe=q[ie][1];ie==1&&(Pe=$>Qe?"Unlimited":Pe,Se=$<Qe?"Unlimited":Se),ie==q.length-1&&(Pe=$<Qe?"Unlimited":Pe,Se=$>Qe?"Unlimited":Se),Qe>Pe&&Pe!="Unlimited"&&(Pe=Qe),Qe<Se&&Se!="Unlimited"&&(Se=Qe),Math.sign($)!=Math.sign(Qe)&&ge.push({startStrikePrice:ye,endStrikePrice:Re,startPayOff:$,endPayOff:Qe})}for(let ie=0;ie<ge.length;ie++){let ye=ge[ie].startStrikePrice,Re=ge[ie].endStrikePrice,$=ge[ie].startPayOff,Qe=ge[ie].endPayOff,Ge=Re-ye,et=ye+Ge/(1+Math.abs(Qe)/Math.abs($));le.push({inBreakevenPoint:Number(et.toFixed(2)),isRightSideProfit:Qe>0})}if(S.value=null,le.length>0&&le.length<=2){let ie=E.value.inSpotLtp,ye=0,Re=0,$=0,Qe=0;for(let Je=0;Je<L.value.length;Je++)if(L.value[Je].stSubSegment=="OPTIONS"){const it=L.value[Je];it.stOptionType=="CE"?(ye+=it.inQuantity*it.inIv,Re+=it.inQuantity):it.stOptionType=="PE"&&($+=it.inQuantity*it.inIv,Qe+=it.inQuantity)}let Ge=Re!=0?ye/Re:null,et=Qe!=0?$/Qe:null;if(le.length==1){let Je=null;if(Ge!=null&&et!=null?Je=(Ge+et)/2:Ge!=null?Je=Ge:et!=null&&(Je=et),Je!=null){let it=le[0].isRightSideProfit?"call":"put";le[0].inItmProbability=mn.getItmProbability(ie,le[0].inBreakevenPoint,d.value,Je,it),S.value=le[0].inItmProbability}else S.value=null}else le.length==2&&(le[0].inItmProbability=mn.getItmProbability(ie,le[0].inBreakevenPoint,d.value,et,"put"),le[1].inItmProbability=mn.getItmProbability(ie,le[1].inBreakevenPoint,d.value,Ge,"call"),S.value=le[0].inItmProbability+le[1].inItmProbability,S.value=le[0].isRightSideProfit==!0&&le[1].isRightSideProfit==!1?100-S.value:S.value,S.value=isNaN(S.value)?S.value:S.value.toFixed(2))}w.value=le,f.value=Pe,y.value=Se}}catch(q){console.log("error"),console.log(q)}}function Ne({stStartDateArg:fe,stStartTimeArg:q,stEndDateArg:Pe,stEndTimeArg:Se="15:30:00"}){let ge=0;try{let le=he(fe,"YYYY-MM-DD",!0).startOf("D"),ie=he(Pe,"YYYY-MM-DD",!0).startOf("D");if(le.isSameOrBefore(ie)){ge=ie.diff(le,"days");const ye=he(q,"HH:mm:ss",!0),$=he(Se,"HH:mm:ss",!0).diff(ye,"minutes");let Qe=0;$>0&&(Qe=1-(375-$)/375,Qe=Number(Qe.toFixed(2))),ge+=Qe}else ge=0}catch(le){console.log("error"),console.log(le)}finally{return Number(ge.toFixed(2))}}const xe={definePropsData:e,props:t,chartData:r,inMinStrikePriceGap:o,inAtmStrikePrice:a,inSpotPercentageChange:s,inNoOfStrikeInPayoff:l,stNearestExpiryDate:u,inRiskFreeReturn:c,inDaysLeftInNearestExpiry:d,maxProfit:f,maxLoss:y,inPop:S,breakevenPoints:w,underLyingAssetData:E,inHistoricalVolatility:_,strategyData:L,assetDetails:P,inTotalPnl:V,initAssetDetailsCall:ne,getAssetDetails:ee,onChangeBasketData:re,changePayOffChart:F,makePayoffChart:U,findDifferenceInExpiryDates:Y,findNearestExpiryDate:K,makeTplusZeroLineChart:Ce,findBreakEvenPoints:Q,findDaysLeftInExpiry:Ne,onMounted:Gt,toRefs:_t,watch:Ke,echartPayoffChart:xR,get optionsDataMixins(){return mn},get config(){return ht},get axios(){return yt},get sharedFunctions(){return ot},get moment(){return he},get init(){return xy}};return Object.defineProperty(xe,"__isScriptSetup",{enumerable:!1,value:!0}),xe}},$R=ki(ZR,[["render",JR]]),ex=vi({__name:"BasketOrder",props:["BasketOrderData","modifyBasketOrderType","modifyBasketOrderQty","modifyBasketOrderQtyField","modifyBasketOrderBuySellType","modifyBasketOrderTypeMarketProtectionPercentage","removeOrderFromBasket","placeAllBasketOrders","clearAllBasketOrders","addBasketOrderFromSavedBasket","socket","modifyBasketOrderMarketProtectionPercentage","addStrategyToBasketOrder","selectedOptions","spotPrice","modifyBasketOrderOptionType","modifyBasketOrderProductTypeField","modifyBasketOrderExpiryDate","modifyBasketOrderStrikePrice","modifyBasketOrderLtpField","modifySelectedBasketOrder","availableExpiryDate","brokerData","availableOrderType","activeTab","from"],setup(n,{expose:i}){i(),he.tz.setDefault("Asia/Kolkata");const{global:e}=Yi(),t=n,r=_t(t),o=pi(),a=g(!1),s=g([{field:"stSubSegment",headerName:"Segment",sortable:!0,hide:!1,minWidth:100,cellStyle:{}},{field:"stSymbolName",headerName:"Symbol Name",sortable:!0,hide:!1,minWidth:110,cellStyle:{}},{field:"stExpiryDate",headerName:"Expiry Date",sortable:!0,hide:!1,minWidth:100,cellStyle:{},cellRenderer:z=>he(z.data.stExpiryDate,"YYYY-MM-DD",!0).format("DD-MMM-YY")},{field:"inStrikePrice",headerName:"Strike Price",sortable:!0,hide:!1,minWidth:85,cellStyle:{},cellRenderer:z=>z.data.inStrikePrice?z.data.inStrikePrice:"-"},{field:"stOptionType",headerName:"Options Type",sortable:!0,hide:!1,minWidth:70,cellStyle:{},cellRenderer:z=>z.data.stOptionType?z.data.stOptionType:"-"},{field:"stBuySellType",headerName:"Side",sortable:!0,hide:!1,minWidth:70,cellStyle:{},cellRenderer:Uf,cellRendererParams:{clicked:(z,pe)=>{r.modifyBasketOrderBuySellType.value(z.stPreOrderId,pe)}}},{field:"inLtp",headerName:"LTP",sortable:!0,hide:!1,minWidth:70,cellRenderer:z=>z.data.inLtp?z.data.inLtp:"-"},{field:"inQuantity",headerName:"Net Qty",sortable:!0,hide:!1,minWidth:150,cellStyle:{},cellRenderer:Hf,cellRendererParams:{clicked:(z,pe,Ye)=>{r.modifyBasketOrderQty.value(z.stPreOrderId,pe,Ye)},modifyQty:(z,pe)=>{r.modifyBasketOrderQtyField.value(z.stPreOrderId,pe)}}},{field:"stOrderType",headerName:"Order type",sortable:!1,hide:!1,minWidth:230,cellStyle:{},cellRenderer:jf,cellRendererParams:{clicked:(z,pe)=>{r.modifyBasketOrderMarketProtectionPercentage.value(z.stPreOrderId,pe)}}},{field:"inLimitPrice",headerName:"Order Price",sortable:!1,hide:!1,minWidth:80,cellStyle:{},cellRenderer:z=>z.data.stOrderType=="MARKET"&&!z.data.isMarketProtectionOrder?"-":z.data.inLimitPrice},{field:"stProductType",headerName:"Product Type",sortable:!0,hide:!1,minWidth:90,cellStyle:{}},{field:"stAction",headerName:"Action",sortable:!1,hide:!1,minWidth:50,cellStyle:{},cellRenderer:Wf,cellRendererParams:{clicked:z=>{r.removeOrderFromBasket.value(z.stPreOrderId)}}}]);let l=g([]);const u=g({initialWidth:100,sortable:!1,resizable:!0}),c=g(null),d=g(null),f=g(30),y=z=>z.data.stPreOrderId,S=g({suppressCellFocus:!0}),w=g(null),E=g(!1),_=g([{title:"Name",id:"stBasketName"},{title:"Note",id:"stBasketNote"},{title:"Type",id:"stBasketType"},{title:"No. Of Legs",id:"arBasketOrders"},{title:"Action",id:"stAction"},{title:"Last Updated At",id:"dtUpdatedAt"}]),L=g(!1),P=g([]),V=g([]),ne=g(!1),ee=g(!1),re=g(!1),F=g({inOneClickBasketId:null,stBasketName:null,stBasketType:null,stBasketNote:null,stBasketSlug:null}),U=g({}),Y=g(0),K=g(0),Ce=g(0),Q=g({page:1,perPage:10}),Ne=g([]),xe=g([]),fe=g(!1),q=g(!1),Pe=g(null),Se=g(null),ge=g(1),le=g({}),ie=g({}),ye=g(0),Re=g(0),$=g(r.brokerData.value?r.brokerData.value.stIdentificationToken:null),Qe=g(null),Ge=g(null),et=g(null),Je=g(!1),it=g(null),jt=g("MARKET"),Si=g(8),Kt=g(!0),fi=g(!0),gi=g(!1);Gt(async()=>{Ee(ot.deepCopy(r.BasketOrderData.value))}),Ke(r.BasketOrderData,(z,pe)=>{Ee(ot.deepCopy(z))},{deep:!0}),Ke(Q,(z,pe)=>{Rt()},{deep:!0}),Ke(ge,(z,pe)=>{si(z,pe)},{deep:!0}),Ke(r.brokerData,(z,pe)=>{$.value=z?z.stIdentificationToken:null,Qe.value=null,Ge.value=null,et.value=null,Ae(l.value)},{deep:!0});const tt=()=>{c.value.sizeColumnsToFit()},ae=z=>{},G=z=>{try{c.value=z.api,d.value=z.columnApi,c.value.sizeColumnsToFit()}catch(pe){console.log(pe)}},H=g([{title:"",key:"isSelected",sortable:!1,align:"left",width:25},{title:"Symbol",key:"stSymbolName",sortable:!1,align:"left"},{title:"Expiry",key:"stExpiryDate",sortable:!1,align:"left"},{title:"Strike",key:"inStrikePrice",sortable:!1,align:"left"},{title:"CE/PE",key:"stOptionType",sortable:!1,align:"center"},{title:"Qty",key:"inQuantity",sortable:!1,align:"left"},{title:"Type",key:"stOrderType",sortable:!1,align:"center",minWidth:125},{title:"Price",key:"inLimitPrice",sortable:!1,align:"center"},{title:"LTP",key:"inLtp",sortable:!1,align:"center"},{title:"P&L",key:"inProfitLoss",sortable:!1,align:"center"},{title:"P. Type",key:"stProductType",sortable:!1,align:"left"},{title:"",key:"stAction",sortable:!1,align:"left"}]);function Ee(z){try{et.value=null,Ae(z),ie.value={},Kt.value=!0,gi.value=!1,fi.value=!1;let pe=0;for(let Ye=0;Ye<z.length;Ye++){const $e=z[Ye];$e.isSelected&&(Kt.value=!1,pe++),ie.value={...ie.value,[$e.stPreOrderId]:{...$e,pnl:0}},le.value?.[$e.stPreOrderId]?.inLtp&&(le.value[$e.stPreOrderId].inLtp=$e.inLtp)}pe==z.length&&z.length>0?fi.value=!0:(fi.value=!1,pe>0&&(gi.value=!0)),l.value=z,Gi(),setTimeout(()=>{c.value?.refreshCells({force:!0})},1),l.value.length>0?Lt():me()}catch(pe){console.log("error"),console.log(pe)}}function He(z){for(let pe=0;pe<l.value.length;pe++){const Ye=l.value[pe];r.modifySelectedBasketOrder.value(Ye.stPreOrderId,z)}}function Ae(z){if(z.length)if($.value){if(!Ge.value){const pe=[];for(let Ye=0;Ye<z.length;Ye++){const $e=z[Ye];fi.value?$e.isSelected&&pe.push($e):pe.push($e)}if(pe.length>0){const Ye={stKey:$.value,stOrders:pe};Je.value=!0,it.value&&clearTimeout(it.value),it.value=setTimeout(()=>{it.value=null,o.getMarginApi(Ye).then($e=>{$e?.isMarginApiNotAvailable?(Qe.value=$e.msg,Ge.value=$e.isMarginApiNotAvailable):$e.status=="success"?et.value=$e?.data?.inMarginWithExistingPosition:o.toastMessage({color:$e.status,message:$e.msg})}).catch($e=>{console.log("error"),console.log($e)}).finally(()=>{Je.value=!1})},1e3)}}}else o.toastMessage({color:"error",message:"Please select broker first."});else et.value=null}function Lt(){try{ut(),r.socket.value.emit("GET_TBD_DATA",{stSelectedSymbol:l.value.map(z=>z.stSubscribeSymbolName)})}catch(z){console.log("error"),console.log(z)}}function ut(){try{me();let z=null,pe=null;for(let Ye=0;Ye<l.value.length;Ye++)pe=l.value[Ye].stSubscribeSymbolName,z="TBD_"+pe,Ne.value.push(z),r.socket.value.on(z,$e=>{Ri($e)})}catch(z){console.log("error"),console.log(z)}}function Ri(z){try{const[pe,Ye]=z;for(let $e=0;$e<l.value.length;$e++){let x=ot.deepCopy(l.value[$e]);if(x.stSubscribeSymbolName==pe){if(x.inLtp=Ye,x.stBuySellType=="BUY"?x.pnl=Number(((x.inLtp-x.inLimitPrice)*x.inQuantity).toFixed(2)):x.pnl=Number(((x.inLimitPrice-x.inLtp)*x.inQuantity).toFixed(2)),x.stOrderType=="MARKET"&&x.isMarketProtectionOrder&&x.inLtp){let Wt=null,Vt=x.inLtp*x.inMarketProtectionPercentage/100;x.stBuySellType=="BUY"?Wt=Number((x.inLtp+Number((Math.ceil(Vt*20)/20).toFixed(2))).toFixed(2)):(Wt=Number((x.inLtp-Number((Math.ceil(Vt*20)/20).toFixed(2))).toFixed(2)),Wt=Wt>=.05?Wt:.05),x.inLimitPrice=Wt}le.value={...le.value,[l.value[$e].stPreOrderId]:x},ie.value={...ie.value,[l.value[$e].stPreOrderId]:x}}}Gi(),c.value?.refreshCells()}catch(pe){console.log("error"),console.log(pe)}}function Gi(){let z=0;const pe=Object.keys(ie.value);pe.length>0&&pe.forEach(Ye=>{z+=Number(ie.value[Ye].pnl)}),Re.value=Number(z.toFixed(2))}function me(){try{Ne.value=[...Ne.value];let z="";if(Ne.value.length>0){for(let pe=0;pe<Ne.value.length;pe++)z=Ne.value[pe],r.socket.value.emit("STOP_DATA",{stEventName:z}),r.socket.value.off(z,Ye=>{});Ne.value=[]}z=null}catch(z){console.log("error"),console.log(z)}}function fr(z){for(let pe=0;pe<l.value.length;pe++){const Ye=l.value[pe];le.value[Ye.stPreOrderId]&&Ye.stOrderType=="MARKET"&&Ye.isMarketProtectionOrder&&(Ye.inLimitPrice=le.value[Ye.stPreOrderId].inLimitPrice,l.value[pe]=Ye)}if(E.value==!1){const pe={doClearBasket:z,inTranches:w.value};r.placeAllBasketOrders.value(pe,Kt.value)}else if(E.value==!0&&w.value!=null){const pe={doClearBasket:z,inTranches:w.value};r.placeAllBasketOrders.value(pe,Kt.value)}else o.toastMessage({color:"error",message:"Please select number of lots per order per tranch."})}function Ht(){r.clearAllBasketOrders.value(Kt.value),Kt.value=!0}function Pt(){l.value.length>0?(F.value={inOneClickBasketId:null,stBasketName:null,stBasketType:null,stBasketNote:null,stBasketSlug:null},ee.value=!0):o.toastMessage({color:"error",message:"Please add atleast 1 position to save basket."})}function Z(){l.value.length>0?(F.value={...U.value},ee.value=!0):o.toastMessage({color:"error",message:"Please add atleast 1 position to save basket."})}async function ze(){(await a.value?.validate()).valid&&(F.value.stBasketSlug&&F.value.stBasketSlug.trim()!=""?yi():mi())}function yi(){const z={inOneClickBasketId:F.value.inOneClickBasketId,stBasketSlug:F.value.stBasketSlug,stBasketName:F.value.stBasketName,stBasketNote:F.value.stBasketNote,stBasketType:F.value.stBasketType,arBasketOrders:l.value};yt.post("/one-click/basket/updatebasket",z).then(pe=>{pe.data.status=="success"&&(ce(),F.value.inOneClickBasketId=pe.data.data.inOneClickBasketId,F.value.stBasketSlug=pe.data.data.stBasketSlug,U.value={...F.value}),o.toastMessage({color:pe.data.status,message:pe.data.msg})}).catch(pe=>{})}function mi(){const z={stBasketName:F.value.stBasketName,stBasketNote:F.value.stBasketNote,stBasketType:F.value.stBasketType,arBasketOrders:l.value};yt.post("/one-click/basket/savebasket",z).then(pe=>{pe.data.status=="success"&&(ce(),F.value.inOneClickBasketId=pe.data.data.inOneClickBasketId,F.value.stBasketSlug=pe.data.data.stBasketSlug,U.value={...F.value}),o.toastMessage({color:pe.data.status,message:pe.data.msg})}).catch(pe=>{})}function ce(){ee.value=!1}function Ze(){ne.value||(ne.value=!0,yt.post("/one-click/basket/getallbaskets",{}).then(z=>{z.data.status=="success"?(P.value=z.data.data,Ce.value=Number(P.value.length),Y.value=P.value.length?(Q.value.page-1)*Q.value.perPage+1:0,K.value=P.value.length+(Q.value.page-1)*Q.value.perPage,V.value=P.value.slice(Y.value-1,Y.value-1+Q.value.perPage),L.value=!0):o.toastMessage({color:z.data.status,message:z.data.msg})}).catch(z=>{}).finally(()=>{ne.value=!1}))}function we(){if(l.value.length>0)for(let z=0;z<l.value.length;z++){const pe=l.value[z].stBuySellType=="BUY"?"SELL":"BUY";r.modifyBasketOrderBuySellType.value(l.value[z].stPreOrderId,pe)}else o.toastMessage({color:"error",message:"Please make a basket or load the basket first to reverse the position."})}function wt(z){const pe={inOneClickBasketId:z};yt.post("/one-click/basket/getbasket",pe).then(Ye=>{Ye.data.status=="success"?(U.value={inOneClickBasketId:Ye.data.data.inOneClickBasketId,stBasketName:Ye.data.data.stBasketName,stBasketType:Ye.data.data.stBasketType,stBasketNote:Ye.data.data.stBasketNote,stBasketSlug:Ye.data.data.stBasketSlug},Ht(),r.addBasketOrderFromSavedBasket.value(Ye.data.data.arBasketOrders)):o.toastMessage({color:Ye.data.status,message:Ye.data.msg})}).catch(Ye=>{}).finally(()=>{oi()})}function We(){const z={};fe.value=!fe.value,xe.value.length==0&&(q.value=!0,yt.post("/strategy-builder/getavailablereadymadestrategies",z).then(pe=>{q.value=!1,pe.data.status=="success"?(xe.value=pe.data.data,xe.value.length&&(Pe.value=xe.value[0].value)):o.toastMessage({color:pe.data.status,message:pe.data.msg})}).catch(pe=>{q.value=!1}))}function lt(z){Se.value=z,_i(Pe.value,Se.value,r.selectedOptions.value,ye.value)}function _i(z,pe,Ye,$e){const x={stNatureOfStrategy:z,stStrategyName:pe,stAssetName:Ye,inExpiryStep:$e};yt.post("/strategy-builder/getreadymadestrategy",x).then(Wt=>{Wt.data.status=="success"?(Wt.data.data.arReadyMadeStrategy.forEach(Vt=>{Vt.inQty=ge.value*Vt.inQty}),r.addStrategyToBasketOrder.value(Wt.data.data.arReadyMadeStrategy,jt.value,Si.value)):o.toastMessage({color:Wt.data.status,message:Wt.data.msg})}).catch(Wt=>{console.log("error :>> ",Wt)})}function ti(z){const pe={inOneClickBasketId:z};yt.post("/one-click/basket/removebasket",pe).then(Ye=>{Ye.data.status=="success"&&Ze(),o.toastMessage({color:Ye.data.status,message:Ye.data.msg})}).catch(Ye=>{})}function oi(){L.value=!1}const Rt=()=>{Y.value=P.value.length?(Q.value.page-1)*Q.value.perPage+1:0,V.value=P.value.slice(Y.value-1,Y.value-1+Q.value.perPage)},qr=()=>{Q.value={page:1,perPage:Q.value.perPage}},_o=(z,pe,Ye,$e)=>{let x=null;z&&(x=z.target.value,x.toString().includes("e")&&(x=1),x=Number(x)),Ye?(x=$e.inQuantity,x=ot.incrementDecrementLotSize(x,ht.maxLots,$e.inLotSize,Ye)):x=ot.calculateLotSize(x,ht.maxLots,$e.inLotSize),$e.inQuantity=x,r.modifyBasketOrderQtyField.value(pe,x)},si=(z,pe)=>{l.value.forEach(Ye=>{let $e=Ye.inQuantity;$e=z*(Ye.inQuantity/pe),Ye.inQuantity=ot.calculateLotSize($e,ht.maxLots,Ye.inLotSize),r.modifyBasketOrderQtyField.value(Ye.stPreOrderId,Ye.inQuantity)})},D=z=>{z.stSubSegment=="OPTIONS"&&r.modifyBasketOrderOptionType.value(z.stPreOrderId,z.stOptionType=="CALL"?"PUT":"CALL")},C=(z,pe)=>{r.modifyBasketOrderType.value(z,pe)},de=z=>{z.stSubSegment=="EQUITY"?r.modifyBasketOrderProductTypeField.value(z.stPreOrderId,z.stProductType=="CNC"?"INTRADAY":"CNC"):r.modifyBasketOrderProductTypeField.value(z.stPreOrderId,z.stProductType=="MARGIN"?"INTRADAY":"MARGIN")},Tt=(z,pe)=>{r.modifyBasketOrderExpiryDate.value(pe,z.target.value)},Fe=(z,pe)=>{const Ye=!isNaN(z.target.value)&&z.target.value>0&&z.target.value<=15?z.target.value:5;r.modifyBasketOrderTypeMarketProtectionPercentage.value(pe,Ye)},ct=(z,pe,Ye,$e)=>{let x=null,Wt=ot.deepCopy($e.availableStrikePrices);if(z&&(x=z.target.value,x.toString().includes("e")&&(x=Wt[0]),x=Number(x)),x==0&&(x=Wt[0]),Wt.indexOf(x)==-1){let Vt=null,Ui=0;for(let Vi=0;Vi<Wt.length;Vi++){const An=Wt[Vi];let co=Math.abs(An-$e.inStrikePrice);Vt==null&&(Vt=co),Vt>co&&(Vt=co,Ui=Vi)}x=Wt[Ui]}if(Ye=="increment"){let Vt=Wt.indexOf($e.inStrikePrice);Vt==Wt.length-1?x=$e.inStrikePrice:x=Wt[Vt+1]}else if(Ye=="decrement"){let Vt=Wt.indexOf($e.inStrikePrice);Vt==0?x=$e.inStrikePrice:x=Wt[Vt-1]}$e.inStrikePrice=x,r.modifyBasketOrderStrikePrice.value(pe,x)},Qt=(z,pe,Ye)=>{let $e=null;z&&($e=z.target.value,$e.toString().includes("e")&&($e=1),$e=Number($e)),Ye.inLtp=$e,r.modifyBasketOrderLtpField.value(pe,$e)},Bt=(z,pe)=>{r.modifySelectedBasketOrder.value(z,pe)};function zt(z,pe){z.key==="ArrowUp"&&document.activeElement===z.target&&_o(null,pe.stPreOrderId,"increment",pe)}const Qi={global:e,definePropsData:t,props:r,store:o,refForm:a,columnDefs:s,get rowData(){return l},set rowData(z){l=z},defaultColDef:u,gridApi:c,columnApi:d,rowHeight:f,getRowId:y,gridOptions:S,inTranches:w,showTranshesMenu:E,savedBasketcolumns:_,showListOfBaskets:L,listOfBaskets:P,currentPageBasketList:V,disableGetAllBasket:ne,showSaveBasketModal:ee,disableSaveStrategyButton:re,saveBasketDetails:F,updateBasketDetails:U,firstIndex:Y,lastIndex:K,totalRecords:Ce,pagination:Q,socketSubscribedEvents:Ne,readyMadeStrategies:xe,showReadyMadeStrategies:fe,isReadyMadeStrategiesLoading:q,selectedStrategyType:Pe,selectedStrategy:Se,inStrategyMultiplier:ge,ltpUpdate:le,pnlUpdate:ie,inExpiryStep:ye,totalPnl:Re,stIdentificationToken:$,basketMsg:Qe,isMarginApiNotAvailable:Ge,inMarginWithExistingPosition:et,isMarginLoading:Je,marginApiTimeOut:it,selectedOrderType:jt,inMarketProtection:Si,isAllOrdersSelected:Kt,isHeaderCheckboxSelected:fi,isHeaderCheckboxIndeterminate:gi,onGridSizeChanged:tt,onFirstDataRendered:ae,onGridReady:G,cols:H,assignBasketDataToRowData:Ee,updateHeaderCheckbox:He,getMargin:Ae,connectSocketForRealtimeData:Lt,subscribeForDynamicEvents:ut,setRealTimeTableData:Ri,calculateTotalPnl:Gi,unsubscribeForDynamicEvents:me,placeAllBasketOrders:fr,clearAllBasketOrders:Ht,openSaveBasketModal:Pt,openUpdateSavedBasketModal:Z,saveOrUpdateUserStrategy:ze,updateSavedBasket:yi,saveBasket:mi,closeSaveBasketModal:ce,loadBasket:Ze,reverseBasketPositionsForExit:we,getBasket:wt,getAvailableReadyMadeStrategies:We,getStrategyData:lt,getReadyMadeStrategy:_i,removeBasket:ti,closeListOfBaskets:oi,paginationData:Rt,handlePaginationPerPageChange:qr,changeOrderQuantity:_o,changeMultiplier:si,changeOrderOptionType:D,onChangeOrderType:C,changeOrderProductType:de,onExpiryChange:Tt,onMarketProtectionPercentageChange:Fe,onStrikePriceChange:ct,changeOrderLtp:Qt,modifySelectedBasketOrder:Bt,handleKeyDown:zt,get AgGridVue(){return Eo},onMounted:Gt,ref:g,toRefs:_t,watch:Ke,get useAppStore(){return pi},get moment(){return he},QtyCellRenderer:Hf,CloseBtnCellRenderer:Wf,get requiredValidator(){return by},get axios(){return yt},SideCellRenderer1Vue:Uf,get sharedFunctions(){return ot},get useTheme(){return Yi},OrderTypeRenderer:jf,get DraggableResizableVue(){return Jo},StrategyBuilder:$R,get config(){return ht}};return Object.defineProperty(Qi,"__isScriptSetup",{enumerable:!1,value:!0}),Qi}});const tx=Fl({autoGrow:Boolean,autofocus:Boolean,counter:[Boolean,Number,String],counterValue:Function,prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,noResize:Boolean,rows:{type:[Number,String],default:5,validator:n=>!isNaN(parseFloat(n))},maxRows:{type:[Number,String],validator:n=>!isNaN(parseFloat(n))},suffix:String,modelModifiers:Object,...ph(),...Wy()},"VTextarea"),ix=fs()({name:"VTextarea",directives:{Intersect:zy},inheritAttrs:!1,props:tx(),emits:{"click:control":n=>!0,"mousedown:control":n=>!0,"update:focused":n=>!0,"update:modelValue":n=>!0},setup(n,i){let{attrs:e,emit:t,slots:r}=i;const o=Oc(n,"modelValue"),{isFocused:a,focus:s,blur:l}=fh(n),u=di(()=>typeof n.counterValue=="function"?n.counterValue(o.value):(o.value||"").toString().length),c=di(()=>{if(e.maxlength)return e.maxlength;if(!(!n.counter||typeof n.counter!="number"&&typeof n.counter!="string"))return n.counter});function d(K,Ce){!n.autofocus||!K||Ce[0].target?.focus?.()}const f=g(),y=g(),S=sy(""),w=g(),E=di(()=>n.persistentPlaceholder||a.value||n.active);function _(){w.value!==document.activeElement&&w.value?.focus(),a.value||s()}function L(K){_(),t("click:control",K)}function P(K){t("mousedown:control",K)}function V(K){K.stopPropagation(),_(),dr(()=>{o.value="",dy(n["onClick:clear"],K)})}function ne(K){const Ce=K.target;if(o.value=Ce.value,n.modelModifiers?.trim){const Q=[Ce.selectionStart,Ce.selectionEnd];dr(()=>{Ce.selectionStart=Q[0],Ce.selectionEnd=Q[1]})}}const ee=g(),re=g(+n.rows),F=di(()=>["plain","underlined"].includes(n.variant));ly(()=>{n.autoGrow||(re.value=+n.rows)});function U(){n.autoGrow&&dr(()=>{if(!ee.value||!y.value)return;const K=getComputedStyle(ee.value),Ce=getComputedStyle(y.value.$el),Q=parseFloat(K.getPropertyValue("--v-field-padding-top"))+parseFloat(K.getPropertyValue("--v-input-padding-top"))+parseFloat(K.getPropertyValue("--v-field-padding-bottom")),Ne=ee.value.scrollHeight,xe=parseFloat(K.lineHeight),fe=Math.max(parseFloat(n.rows)*xe+Q,parseFloat(Ce.getPropertyValue("--v-input-control-height"))),q=parseFloat(n.maxRows)*xe+Q||1/0,Pe=fy(Ne??0,fe,q);re.value=Math.floor((Pe-Q)/xe),S.value=py(Pe)})}Gt(U),Ke(o,U),Ke(()=>n.rows,U),Ke(()=>n.maxRows,U),Ke(()=>n.density,U);let Y;return Ke(ee,K=>{K?(Y=new ResizeObserver(U),Y.observe(ee.value)):Y?.disconnect()}),Oo(()=>{Y?.disconnect()}),Xc(()=>{const K=!!(r.counter||n.counter||n.counterValue),Ce=!!(K||r.details),[Q,Ne]=ch(e),{modelValue:xe,...fe}=dl.filterProps(n),q=Uy(n);return p(dl,pt({ref:f,modelValue:o.value,"onUpdate:modelValue":Pe=>o.value=Pe,class:["v-textarea v-text-field",{"v-textarea--prefixed":n.prefix,"v-textarea--suffixed":n.suffix,"v-text-field--prefixed":n.prefix,"v-text-field--suffixed":n.suffix,"v-textarea--auto-grow":n.autoGrow,"v-textarea--no-resize":n.noResize||n.autoGrow,"v-input--plain-underlined":F.value},n.class],style:n.style},Q,fe,{centerAffix:re.value===1&&!F.value,focused:a.value}),{...r,default:Pe=>{let{id:Se,isDisabled:ge,isDirty:le,isReadonly:ie,isValid:ye}=Pe;return p(jy,pt({ref:y,style:{"--v-textarea-control-height":S.value},onClick:L,onMousedown:P,"onClick:clear":V,"onClick:prependInner":n["onClick:prependInner"],"onClick:appendInner":n["onClick:appendInner"]},q,{id:Se.value,active:E.value||le.value,centerAffix:re.value===1&&!F.value,dirty:le.value||n.dirty,disabled:ge.value,focused:a.value,error:ye.value===!1}),{...r,default:Re=>{let{props:{class:$,...Qe}}=Re;return p(rt,null,[n.prefix&&p("span",{class:"v-text-field__prefix"},[n.prefix]),mt(p("textarea",pt({ref:w,class:$,value:o.value,onInput:ne,autofocus:n.autofocus,readonly:ie.value,disabled:ge.value,placeholder:n.placeholder,rows:n.rows,name:n.name,onFocus:_,onBlur:l},Qe,Ne),null),[[uy("intersect"),{handler:d},null,{once:!0}]]),n.autoGrow&&mt(p("textarea",{class:[$,"v-textarea__sizer"],id:`${Qe.id}-sizer`,"onUpdate:modelValue":Ge=>o.value=Ge,ref:ee,readonly:!0,"aria-hidden":"true"},null),[[ul,o.value]]),n.suffix&&p("span",{class:"v-text-field__suffix"},[n.suffix])])}})},details:Ce?Pe=>p(rt,null,[r.details?.(Pe),K&&p(rt,null,[p("span",null,null),p(_y,{active:n.persistentCounter||a.value,value:u.value,max:c.value},r.counter)])]):void 0})}),cy({},f,y,w)}}),rx={key:0,class:"d-flex flex-wrap text-primary my-1"},ox={class:"custom-flex-27 justify-space-between d-flex flex-wrap"},nx={class:"custom-flex-70 d-flex flex-wrap justify-space-between"},ax={class:"cursor-pointer custom-hover-underline"},sx={key:1,class:"text-center mt-3 my-2"},lx={class:"d-flex flex-wrap justify-center gap-2"},ux={class:"custom-flex-xs-100 custom-flex-sm-98 custom-flex-md-100 custom-flex-lg-100"},cx={class:""},dx={class:"custom-flex-xs-100 custom-flex-sm-45 custom-flex-md-32 custom-flex-lg-20"},px={class:"custom-select"},fx={key:"tranch_no",value:null},hx=["value"],vx={key:2},gx={class:"my-3 d-flex flex-wrap gap-3 justify-center"},yx={class:"custom-select"},mx=["value"],Cx={class:"custom-select"},Sx=["value"],wx={class:"custom-select"},Tx=["value"],Ox={key:0,class:"mt-1"},Px={key:0,class:"custom-select"},Ex=["value"],_x={class:"my-2 d-flex flex-wrap gap-3 justify-center"},bx=["onClick"],Dx=["src"],Rx={class:"text-caption"},xx={key:3,class:"text-center mb-2"},Ax={class:"custom-flex-lg-100 custom-flex-md-100 custom-flex-sm-100 custom-flex-xs-100 custom-border h-100"},Lx=["onClick"],Mx={key:0},Nx={key:1,class:"custom-basket-select"},Fx=["onChange"],Ix=["value","selected"],kx={key:0,class:""},Gx={key:1,class:"custom-basket-input d-flex custom-flex custom-remove-input-arrow"},Vx=["onUpdate:modelValue","onChange"],Bx=["onClick"],Hx={class:"custom-basket-input-qty d-flex custom-flex custom-remove-input-arrow"},Wx=["onUpdate:modelValue","onChange","max","onKeydown"],Ux={class:"custom-basket-input custom-flex mt-1"},jx={key:0},zx={key:0},Yx=["onClick"],Kx={class:"custom-basket-select"},Qx=["onChange"],qx=["value","selected"],Xx=["onClick"],Jx=["onClick"],Zx={class:"custom-basket-input custom-flex custom-remove-input-arrow"},$x=["onUpdate:modelValue","onChange"],eA={class:"custom-basket-input custom-flex custom-ltp"},tA=["onClick"],iA={class:"custom-flex"},rA={class:"custom-flex-lg-100 custom-flex-md-100 custom-flex-sm-100 custom-flex-xs-100 custom-payoff-chart"},oA={scope:"col"},nA={key:2,class:"d-flex flex-wrap"},aA=["onClick"],sA=["onClick"],lA={key:0},uA={class:"d-flex align-center",style:{width:"171px"}},cA={class:"d-flex align-center"},dA={class:"text-sm font-weight-regular"};function pA(n,i,e,t,r,o){return R(),N("div",null,[t.showTranshesMenu?(R(),N("div",sx,[h("div",lx,[h("div",ux,[h("div",cx,[p(Le,{size:"small",variant:"text",onClick:i[3]||(i[3]=a=>t.showTranshesMenu=!t.showTranshesMenu)},{default:v(()=>i[27]||(i[27]=[M(" Cancel tranching order ")])),_:1})])]),h("div",dx,[i[28]||(i[28]=h("label",{class:"custom-label"},"Per Order Per Tranch :",-1)),h("div",px,[mt(h("select",{"onUpdate:modelValue":i[4]||(i[4]=a=>t.inTranches=a)},[(R(),N("option",fx," No tranches ")),(R(),N(rt,null,kt(15,a=>h("option",{key:"tranch_"+a,value:a},k(a+" Lot"),9,hx)),64))],512),[[bi,t.inTranches]])])]),p(Le,{class:"custom-flex-xs-100 custom-flex-sm-45 custom-flex-md-32 custom-flex-lg-20 mt-4",variant:"flat",onClick:i[5]||(i[5]=a=>t.placeAllBasketOrders(!1))},{default:v(()=>[M(" Place "+k(t.isAllOrdersSelected?"All":"Selected")+" Orders in tranches ",1)]),_:1})])])):(R(),N("div",rx,[h("div",ox,[h("div",null,[p(Le,{variant:"text",onClick:t.clearAllBasketOrders},{default:v(()=>[M(" Clear "+k(t.isAllOrdersSelected?"All":"Selected")+" Orders ",1)]),_:1})]),h("div",null,[p(Le,{variant:"text",onClick:i[0]||(i[0]=a=>t.placeAllBasketOrders(!1))},{default:v(()=>[M(" Place "+k(t.isAllOrdersSelected?"All":"Selected")+" Orders ",1)]),_:1})])]),h("div",nx,[h("div",null,[p(Le,{variant:"text",onClick:i[1]||(i[1]=a=>t.showTranshesMenu=!t.showTranshesMenu)},{default:v(()=>[M(k(t.showTranshesMenu?"Cancel tranching order":`Place ${t.isAllOrdersSelected?"All":"Selected"} order in
          tranches`),1)]),_:1})]),h("div",null,[p(Le,{variant:"text",onClick:i[2]||(i[2]=a=>t.placeAllBasketOrders(!0))},{default:v(()=>[M(" Place "+k(t.isAllOrdersSelected?"All":"Selected")+" Orders & Clear "+k(t.isAllOrdersSelected?"All":"Selected")+" Orders ",1)]),_:1})]),h("div",ax,[p(yr,{location:"bottom"},{activator:v(({props:a})=>[p(Le,pt(a,{variant:"text"}),{default:v(()=>i[22]||(i[22]=[M(" Save & Load Basket ")])),_:2},1040)]),default:v(()=>[p(rr,null,{default:v(()=>[p(It,{density:"compact",onClick:t.openSaveBasketModal,"min-height":"10px",height:"30px"},{default:v(()=>i[23]||(i[23]=[M(" Save Basket ")])),_:1}),p(It,{density:"compact",onClick:t.loadBasket,"min-height":"10px",height:"30px"},{default:v(()=>i[24]||(i[24]=[M(" Load Basket ")])),_:1}),p(It,{density:"compact",onClick:t.openUpdateSavedBasketModal,"min-height":"10px",height:"30px"},{default:v(()=>i[25]||(i[25]=[M(" Update existing basket ")])),_:1}),p(It,{density:"compact",onClick:t.reverseBasketPositionsForExit,"min-height":"10px",height:"30px"},{default:v(()=>i[26]||(i[26]=[M(" Reverse Positions for exit ")])),_:1})]),_:1})]),_:1})]),p(Le,{variant:"text",onClick:t.getAvailableReadyMadeStrategies},{default:v(()=>[M(k(t.showReadyMadeStrategies?"Hide ready baskets":"Show ready baskets"),1)]),_:1})])])),t.showReadyMadeStrategies?(R(),N("div",vx,[h("div",gx,[(R(!0),N(rt,null,kt(t.readyMadeStrategies,a=>(R(),at(ei,{class:"custom-cursor-pointer text-subtitle-2",onClick:s=>t.selectedStrategyType=a.value,variant:a.value==t.selectedStrategyType?"flat":"outlined",color:"primary"},{default:v(()=>[M(k(a.text),1)]),_:2},1032,["onClick","variant"]))),256)),i[29]||(i[29]=h("div",{class:"mt-1"}," Multiplier: ",-1)),h("div",null,[h("div",yx,[mt(h("select",{"onUpdate:modelValue":i[6]||(i[6]=a=>t.inStrategyMultiplier=a)},[(R(),N(rt,null,kt(100,a=>h("option",{key:"multiplier_"+a,value:a},k(a),9,mx)),64))],512),[[bi,t.inStrategyMultiplier]])])]),i[30]||(i[30]=h("div",{class:"mt-1"}," Expiry: ",-1)),h("div",null,[h("div",Cx,[mt(h("select",{"onUpdate:modelValue":i[7]||(i[7]=a=>t.inExpiryStep=a)},[(R(!0),N(rt,null,kt(t.props.availableExpiryDate.value,(a,s)=>(R(),N(rt,null,[a.value?(R(),N("option",{key:"expiry_"+s,value:s-1},k(a.text),9,Sx)):De("",!0)],64))),256))],512),[[bi,t.inExpiryStep]])])]),i[31]||(i[31]=h("div",{class:"mt-1"}," Order Type: ",-1)),h("div",null,[h("div",wx,[mt(h("select",{"onUpdate:modelValue":i[8]||(i[8]=a=>t.selectedOrderType=a)},[(R(!0),N(rt,null,kt(t.props.availableOrderType.value,(a,s)=>(R(),N(rt,null,[a.value?(R(),N("option",{key:"order_type_"+s,value:a.value},k(a.text),9,Tx)):De("",!0)],64))),256))],512),[[bi,t.selectedOrderType]])])]),t.selectedOrderType=="MARKET_PROTECTION"?(R(),N("div",Ox," Market Protection %: ")):De("",!0),h("div",null,[t.selectedOrderType=="MARKET_PROTECTION"?(R(),N("div",Px,[mt(h("select",{"onUpdate:modelValue":i[9]||(i[9]=a=>t.inMarketProtection=a)},[(R(),N(rt,null,kt(16,a=>h("option",{key:"market_protection_"+a,value:a-1},k(a-1),9,Ex)),64))],512),[[bi,t.inMarketProtection]])])):De("",!0)])]),h("div",_x,[(R(!0),N(rt,null,kt(t.readyMadeStrategies,a=>(R(),N(rt,null,[a.value==t.selectedStrategyType?(R(!0),N(rt,{key:0},kt(a.options,s=>(R(),N("div",{class:"text-center",style:Xo([{padding:"10px 5px","border-radius":"10px","max-width":"102px","min-width":"100px",height:"120px",cursor:"pointer"},{border:s.value==t.selectedStrategy?"2.5px solid rgb(var(--v-theme-primary))":"0.5px dashed rgb(88, 88, 88)"}]),onClick:l=>t.getStrategyData(s.value)},[h("img",{src:"/strategy/"+s.value+".PNG",alt:"",style:{width:"90%",height:"65%"}},null,8,Dx),h("div",Rx,k(s.text),1)],12,bx))),256)):De("",!0)],64))),256))])])):De("",!0),t.isReadyMadeStrategiesLoading?(R(),N("div",xx,[p(Ti,{class:"",size:40,color:"error",indeterminate:""})])):De("",!0),p(Di,null,{default:v(()=>[p(dt,{cols:"12",sm:"12",md:"12",lg:"8"},{default:v(()=>[h("div",Ax,[p(Zc,{headers:t.cols,items:t.rowData,density:"compact","hide-default-footer":!0,height:"607px","fixed-footer":!0,"items-per-page":-1,"fixed-header":!0,"mobile-breakpoint":"lg"},{"header.isSelected":v(({column:a})=>[p(or,{modelValue:t.isHeaderCheckboxSelected,"onUpdate:modelValue":[i[10]||(i[10]=s=>t.isHeaderCheckboxSelected=s),t.updateHeaderCheckbox],indeterminate:t.isHeaderCheckboxIndeterminate},null,8,["modelValue","indeterminate"])]),bottom:v(()=>i[32]||(i[32]=[])),"item.isSelected":v(({item:a})=>[p(or,{modelValue:a.isSelected,"onUpdate:modelValue":s=>a.isSelected=s,onChange:s=>t.modifySelectedBasketOrder(a.stPreOrderId,a.isSelected)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),"item.stSymbolName":v(({item:a})=>[h("div",{class:"d-flex cursor-pointer",onClick:s=>t.props.modifyBasketOrderBuySellType.value(a.stPreOrderId,a.stBuySellType=="BUY"?"SELL":"BUY")},[h("b",{class:Et(`${a.stBuySellType=="BUY"?"text-success":"text-error"} mr-2`)},k(a.stBuySellType=="BUY"?"B":"S"),3),h("div",null,k(a.stSymbolName),1)],8,Lx)]),"item.stExpiryDate":v(({item:a})=>[a.stSubSegment=="EQUITY"?(R(),N("div",Mx," - ")):(R(),N("div",Nx,[h("select",{onChange:s=>t.onExpiryChange(s,a.stPreOrderId)},[(R(!0),N(rt,null,kt(a.availableExpiryDate,(s,l)=>(R(),N("option",{key:"expiry_"+l,value:s.value,selected:a.stExpiryDate==s.value},k(s.text),9,Ix))),128))],40,Fx)]))]),"item.inStrikePrice":v(({item:a})=>[a.stSubSegment=="FUTURES"||a.stSubSegment=="EQUITY"?(R(),N("div",kx," - ")):(R(),N("div",Gx,[p(_e,{icon:"bx-minus",size:"26",class:"custom-basket-icon-left",onClick:s=>{t.onStrikePriceChange(null,a.stPreOrderId,"decrement",a)}},null,8,["onClick"]),mt(h("input",{type:"number","onUpdate:modelValue":s=>a.inStrikePrice=s,onChange:s=>t.onStrikePriceChange(s,a.stPreOrderId,null,a)},null,40,Vx),[[ul,a.inStrikePrice]]),p(_e,{icon:"bx-plus",size:"26",class:"custom-basket-icon-right",onClick:s=>{t.onStrikePriceChange(null,a.stPreOrderId,"increment",a)}},null,8,["onClick"])]))]),"item.stOptionType":v(({item:a})=>[h("div",{class:"custom-basket-type custom-flex cursor-pointer mt-1",onClick:s=>t.changeOrderOptionType(a)},[h("span",null,k(a.stSubSegment=="OPTIONS"?a.stOptionType=="CALL"?"CE":"PE":a.stSubSegment=="FUTURES"?"FT":"EQ"),1)],8,Bx)]),"item.inQuantity":v(({item:a})=>[h("div",Hx,[p(_e,{icon:"bx-minus",size:"26",class:"custom-basket-icon-left",onClick:s=>{t.changeOrderQuantity(null,a.stPreOrderId,"decrement",a)}},null,8,["onClick"]),mt(h("input",{type:"number","onUpdate:modelValue":s=>a.inQuantity=s,onChange:s=>t.changeOrderQuantity(s,a.stPreOrderId,null,a),min:1,max:t.config.maxLots,onKeydown:s=>t.handleKeyDown(s,a)},null,40,Wx),[[ul,a.inQuantity]]),p(_e,{icon:"bx-plus",size:"26",class:"custom-basket-icon-right",onClick:s=>t.changeOrderQuantity(null,a.stPreOrderId,"increment",a)},null,8,["onClick"])])]),"item.stOrderType":v(({item:a})=>[h("div",Ux,[a.stOrderType=="MARKET"?(R(),N("span",jx,[a.isMarketProtectionOrder?(R(),N("span",zx,[h("span",{class:"cursor-pointer",onClick:s=>t.onChangeOrderType(a.stPreOrderId,"MARKET")}," M.P. ",8,Yx),h("span",Kx,[h("select",{onChange:s=>t.onMarketProtectionPercentageChange(s,a.stPreOrderId)},[(R(),N(rt,null,kt(15,s=>h("option",{key:"market_protection_"+s,value:s,selected:a.inMarketProtectionPercentage==s},k(s)+"% ",9,qx)),64))],40,Qx)])])):(R(),N("span",{key:1,class:"cursor-pointer",onClick:s=>t.onChangeOrderType(a.stPreOrderId,"LIMIT")}," MKT ",8,Xx))])):(R(),N("span",{key:1,class:"cursor-pointer",onClick:s=>t.onChangeOrderType(a.stPreOrderId,"MARKET_PROTECTION")}," LMT ",8,Jx))])]),"item.inLimitPrice":v(({item:a})=>[h("div",Zx,[mt(h("input",{type:"number",min:"0","onUpdate:modelValue":s=>a.inLimitPrice=s,onChange:s=>t.changeOrderLtp(s,a.stPreOrderId,a)},null,40,$x),[[ul,a.inLimitPrice]])])]),"item.inLtp":v(({item:a})=>[h("div",eA,k(t.ltpUpdate[a.stPreOrderId]?t.ltpUpdate[a.stPreOrderId].inLtp:a.inLtp),1)]),"item.inProfitLoss":v(({item:a})=>[h("div",{class:Et(`${Number(t.pnlUpdate&&t.pnlUpdate[a.stPreOrderId]?t.pnlUpdate[a.stPreOrderId].pnl:a.pnl)>0?"text-success":"text-error"} custom-basket-input custom-flex custom-ltp`)},k(t.pnlUpdate&&t.pnlUpdate[a.stPreOrderId]?t.pnlUpdate[a.stPreOrderId].pnl:a.pnl),3)]),"item.stProductType":v(({item:a})=>[h("div",{class:Et(`custom-basket-input custom-flex cursor-pointer ${a.stProductType=="MARGIN"||a.stProductType=="CNC"?"text-success":"text-error"}`),onClick:s=>t.changeOrderProductType(a)},k(a.stProductType=="MARGIN"?"MAR":a.stProductType=="CNC"?"CNC":"INT"),11,tA)]),"item.stAction":v(({item:a})=>[h("div",iA,[p(_e,{icon:"mdi-delete-outline",size:"26",class:"text-error",onClick:s=>t.props.removeOrderFromBasket.value(a.stPreOrderId)},null,8,["onClick"])])]),_:1},8,["headers","items"])])]),_:1}),p(dt,{cols:"12",sm:"12",md:"12",lg:"4"},{default:v(()=>[h("div",rA,[p(t.StrategyBuilder,{BasketOrderData:t.rowData,spotPrice:t.props.spotPrice.value,selectedOptions:t.props.selectedOptions.value,totalPnl:t.totalPnl,inMarginWithExistingPosition:t.inMarginWithExistingPosition,isMarginApiNotAvailable:t.isMarginApiNotAvailable,isMarginLoading:t.isMarginLoading,basketMsg:t.basketMsg,activeTab:t.props.activeTab.value,from:t.props.from.value},null,8,["BasketOrderData","spotPrice","selectedOptions","totalPnl","inMarginWithExistingPosition","isMarginApiNotAvailable","isMarginLoading","basketMsg","activeTab","from"])])]),_:1})]),_:1}),p(Ai,{modelValue:t.showSaveBasketModal,"onUpdate:modelValue":i[14]||(i[14]=a=>t.showSaveBasketModal=a),"max-width":"600"},{default:v(()=>[p(t.DraggableResizableVue,{className:"",resizable:!1,"drag-cancel":".handle"},{default:v(()=>[p(ui,{title:t.saveBasketDetails.stBasketSlug?"Update basket":"Save basket"},{default:v(()=>[p(Hy,{onSubmit:Tc(t.saveOrUpdateUserStrategy,["prevent"]),ref:"refForm",class:"handle"},{default:v(()=>[p(Ft,null,{default:v(()=>[p(Jt,{class:"mb-4",density:"compact",modelValue:t.saveBasketDetails.stBasketName,"onUpdate:modelValue":i[11]||(i[11]=a=>t.saveBasketDetails.stBasketName=a),label:"Basket Name",placeholder:"Enter strategy name",rules:[t.requiredValidator]},null,8,["modelValue","rules"]),p(ix,{class:"mb-4",label:"Basket note",modelValue:t.saveBasketDetails.stBasketNote,"onUpdate:modelValue":i[12]||(i[12]=a=>t.saveBasketDetails.stBasketNote=a),placeholder:"Enter Basket note",maxlength:"255",rows:"3"},null,8,["modelValue"]),p(Hi,null,{default:v(()=>i[33]||(i[33]=[M("Basket type")])),_:1}),p(pl,{class:"mb-3",modelValue:t.saveBasketDetails.stBasketType,"onUpdate:modelValue":i[13]||(i[13]=a=>t.saveBasketDetails.stBasketType=a),inline:""},{default:v(()=>[p(xr,{label:"Not Known",value:null}),p(xr,{label:"Bullish",value:"bullish"}),p(xr,{label:"Bearish",value:"bearish"}),p(xr,{label:"Range Bound",value:"range_bound"}),p(xr,{label:"Big move either side",value:"big_move"})]),_:1},8,["modelValue"])]),_:1}),p(Ft,{class:"d-flex justify-end gap-2"},{default:v(()=>[p(Le,{color:"secondary",variant:"tonal",onClick:t.closeSaveBasketModal},{default:v(()=>i[34]||(i[34]=[M(" Cancel ")])),_:1}),p(Le,{type:"submit",disabled:n.disabledBrokerLoginFormBtn},{default:v(()=>i[35]||(i[35]=[M(" Proceed ")])),_:1},8,["disabled"])]),_:1})]),_:1},512)]),_:1},8,["title"])]),_:1})]),_:1},8,["modelValue"]),p(Ai,{modelValue:t.showListOfBaskets,"onUpdate:modelValue":i[21]||(i[21]=a=>t.showListOfBaskets=a),class:"v-dialog-lg"},{default:v(()=>[p(t.DraggableResizableVue,{className:"",resizable:!1,"drag-cancel":".handle"},{default:v(()=>[p(ui,{title:"Saved baskets"},{default:v(()=>[p(ui,{class:"handle"},{default:v(()=>[p(Vy,{density:"comfortable",loading:"true"},{default:v(()=>[h("thead",null,[h("tr",null,[i[36]||(i[36]=h("th",{scope:"col"},null,-1)),(R(!0),N(rt,null,kt(t.savedBasketcolumns,a=>(R(),N("th",oA,k(a.title),1))),256))])]),p(hy,{modelValue:n.loading,"onUpdate:modelValue":i[15]||(i[15]=a=>n.loading=a),contained:"",class:"align-center justify-center"},{default:v(()=>[p(Ti,{indeterminate:""})]),_:1},8,["modelValue"]),h("tbody",null,[(R(!0),N(rt,null,kt(t.currentPageBasketList,(a,s)=>(R(),N("tr",{key:s},[h("td",null,k(t.firstIndex+s),1),(R(!0),N(rt,null,kt(t.savedBasketcolumns,l=>(R(),N("td",null,[l.id=="dtUpdatedAt"?(R(),N(rt,{key:0},[M(k(a[l.id]?t.sharedFunctions.formatDateAndTime(a[l.id]):"-"),1)],64)):l.id=="stBasketType"?(R(),N(rt,{key:1},[a[l.id]=="bullish"?(R(),at(ei,{key:0,color:"success"},{default:v(()=>[M(k(a[l.id]),1)]),_:2},1024)):a[l.id]=="bearish"?(R(),at(ei,{key:1,color:"error"},{default:v(()=>[M(k(a[l.id]),1)]),_:2},1024)):a[l.id]=="range_bound"?(R(),at(ei,{key:2,color:"warning"},{default:v(()=>[M(k(a[l.id]),1)]),_:2},1024)):a[l.id]=="big_move"?(R(),at(ei,{key:3,color:"info"},{default:v(()=>[M(k(a[l.id]),1)]),_:2},1024)):a[l.id]==null?(R(),at(ei,{key:4},{default:v(()=>i[37]||(i[37]=[M("- ")])),_:1})):(R(),at(ei,{key:5},{default:v(()=>[M(k(a[l.id]),1)]),_:2},1024))],64)):l.id=="stAction"?(R(),N("div",nA,[h("b",{class:"custom-hover-underline mr-5 cursor-pointer",onClick:u=>t.getBasket(a.inOneClickBasketId)},[p(Dt,{activator:"parent",location:"top"},{default:v(()=>i[38]||(i[38]=[M(" Open basket ")])),_:1}),i[39]||(i[39]=M(" Open "))],8,aA),h("span",{class:"custom-hover-underline cursor-pointer",onClick:u=>t.removeBasket(a.inOneClickBasketId)},[p(Dt,{activator:"parent",location:"top"},{default:v(()=>i[40]||(i[40]=[M(" Remove basket ")])),_:1}),i[41]||(i[41]=M(" Remove "))],8,sA)])):l.id=="arBasketOrders"?(R(),N(rt,{key:3},[M(k(a[l.id].length),1)],64)):(R(),N(rt,{key:4},[M(k(a[l.id]),1)],64))]))),256))]))),128))]),n.loading?De("",!0):mt((R(),N("tfoot",lA,i[42]||(i[42]=[h("tr",null,[h("td",{colspan:"11",class:"text-center text-body-1"}," No data available ")],-1)]),512)),[[hi,!t.totalRecords]])]),_:1}),p(Sn),p(Ft,{class:"d-flex flex-wrap justify-end gap-4 pa-2"},{default:v(()=>[h("div",uA,[i[43]||(i[43]=h("span",{class:"text-no-wrap text-sm me-3"},"Rows per page:",-1)),p(Xn,{modelValue:t.pagination.perPage,"onUpdate:modelValue":[i[16]||(i[16]=a=>t.pagination.perPage=a),i[17]||(i[17]=a=>t.handlePaginationPerPageChange())],density:"compact",class:"small-select",variant:"plain",items:[10,20,30,50]},null,8,["modelValue"])]),h("div",cA,[h("h6",dA,k(`${t.firstIndex}-${t.lastIndex} of ${t.totalRecords}`),1)]),p(By,{modelValue:t.pagination.page,"onUpdate:modelValue":i[18]||(i[18]=a=>t.pagination.page=a),size:"small","total-visible":1,length:Math.ceil(t.totalRecords/t.pagination.perPage),onNext:i[19]||(i[19]=a=>n.selectedRows=[]),onPrev:i[20]||(i[20]=a=>n.selectedRows=[])},null,8,["modelValue","length"])]),_:1})]),_:1}),p(Ft,{class:"d-flex justify-end gap-2"},{default:v(()=>[p(Le,{color:"secondary",variant:"tonal",onClick:t.closeListOfBaskets},{default:v(()=>i[44]||(i[44]=[M(" Cancel ")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])}const $v=ki(ex,[["render",pA]]),fA={class:"one-click-options-list"},hA={class:""},vA={class:"d-flex gap-4 flex-wrap"},gA={class:"d-flex gap-4 flex-wrap"},yA={key:0,class:"d-flex gap-1"},mA={class:"text-end my-1"},CA={style:{width:"100%",height:"65vh"}},SA={class:"text-white"},wA={class:"custom-flex-lg-20 custom-flex-xs-100 custom-flex-sm-45 custom-flex-md-20"},TA={key:0,class:"custom-flex-lg-10 custom-flex-xs-100 custom-flex-sm-45 custom-flex-md-10"},OA={class:"custom-flex-lg-20 custom-flex-xs-100 custom-flex-sm-45 custom-flex-md-18"},PA={class:"custom-flex-lg-20 custom-flex-xs-100 custom-flex-sm-45 custom-flex-md-18"},EA={class:"custom-flex-lg-20 custom-flex-xs-100 custom-flex-sm-45 custom-flex-md-18"},_A={class:"custom-flex-lg-20 custom-flex-xs-100 custom-flex-sm-45 custom-flex-md-18"};function bA(n,i,e,t,r,o){return R(),N("div",null,[h("div",fA,[h("div",hA,[h("div",vA,[h("div",null,[p(Xn,{density:"compact",label:"Expiry Date",items:t.availableExpiryDate,modelValue:t.selectedAvailableExpiryDate,"onUpdate:modelValue":[i[0]||(i[0]=a=>t.selectedAvailableExpiryDate=a),t.handleOnExpiryDateChange],"item-title":"text","item-value":"value"},null,8,["items","modelValue"])]),h("div",null,[h("div",gA,[p(Le,{size:"small",onClick:t.getOptionsChainDataForSelectedOptions,disabled:t.disableRefreshDataButton,loading:t.disableRefreshDataButton},{default:v(()=>i[12]||(i[12]=[M(" Refresh ")])),_:1},8,["disabled","loading"]),t.activeTab=="optionsChain"?(R(),N("div",yA,[p(Le,{variant:"outlined",size:"small",onClick:i[1]||(i[1]=a=>t.setGridColumns("OI"))},{default:v(()=>i[13]||(i[13]=[M(" Show OI ")])),_:1}),p(Le,{variant:"outlined",size:"small",onClick:i[2]||(i[2]=a=>t.setGridColumns("GREEKS"))},{default:v(()=>i[14]||(i[14]=[M(" Show Greeks ")])),_:1}),p(Le,{variant:"outlined",size:"small",onClick:i[3]||(i[3]=a=>t.setGridColumns("PREMIUM"))},{default:v(()=>i[15]||(i[15]=[M(" Show Premium ")])),_:1})])):De("",!0),p(Le,{variant:"outlined",size:"small",onClick:t.showOptionsChainOrBasket},{default:v(()=>[M(" show "+k(t.activeTab=="optionsChain"?"basket order":"options chain"),1)]),_:1})])])]),h("div",mA,[i[16]||(i[16]=M(" Underlying: ")),h("b",null,k(t.underLyingAssetData.stUnderLyingAsset),1),i[17]||(i[17]=M(" at ")),h("b",null,k(t.underLyingAssetData.inLtp),1),i[18]||(i[18]=M(", Chg: ")),h("span",{class:Et([t.underLyingAssetData.inLtp>t.underLyingAssetData.inDayOpen?"text-success":"text-danger"])},[h("b",null,k((t.underLyingAssetData.inLtp-t.underLyingAssetData.inDayOpen).toFixed(2))+" ( "+k(((t.underLyingAssetData.inLtp-t.underLyingAssetData.inDayOpen)*100/t.underLyingAssetData.inDayOpen).toFixed(2))+"% ) ",1)],2),M(" as on "+k(t.underLyingAssetData.stDateTime)+" IST ",1)])]),mt(h("div",CA,[p(t.AgGridVue,{style:{width:"100%",height:"100%"},class:Et(t.global.name.value=="dark"?"ag-theme-balham-dark":"ag-theme-balham"),columnDefs:t.columnDefs,rowData:t.items,defaultColDef:t.defaultColDef,rowHeight:t.rowHeight,getRowId:t.getRowNodeId,onGridReady:t.onGridReady,onGridSizeChanged:t.onGridSizeChanged,onFirstDataRendered:t.onFirstDataRendered,headerHeight:32},null,8,["class","columnDefs","rowData","defaultColDef","rowHeight","getRowId"])],512),[[hi,t.activeTab=="optionsChain"]]),mt(h("div",null,[p(t.BasketOrder,{BasketOrderData:t.props.BasketOrderData.value,modifyBasketOrderQty:t.props.modifyBasketOrderQty.value,modifyBasketOrderQtyField:t.props.modifyBasketOrderQtyField.value,addBasketOrderFromSavedBasket:t.props.addBasketOrderFromSavedBasket.value,modifyBasketOrderBuySellType:t.props.modifyBasketOrderBuySellType.value,removeOrderFromBasket:t.props.removeOrderFromBasket.value,getActiveTabData:t.props.getActiveTabData.value,showMessageOnOnlickWindow:t.props.showMessageOnOnlickWindow.value,clearAllBasketOrders:t.props.clearAllBasketOrders.value,placeAllBasketOrders:t.props.placeAllBasketOrders.value,modifyBasketOrderMarketProtectionPercentage:t.props.modifyBasketOrderMarketProtectionPercentage.value,socket:t.props.socket.value,addStrategyToBasketOrder:t.props.addStrategyToBasketOrder.value,selectedOptions:t.props.selectedOptions.value,spotPrice:t.props.spotPrice.value,modifyBasketOrderOptionType:t.props.modifyBasketOrderOptionType.value,modifyBasketOrderProductTypeField:t.props.modifyBasketOrderProductTypeField.value,modifyBasketOrderExpiryDate:t.props.modifyBasketOrderExpiryDate.value,modifyBasketOrderStrikePrice:t.props.modifyBasketOrderStrikePrice.value,modifyBasketOrderLtpField:t.props.modifyBasketOrderLtpField.value,modifyBasketOrderType:t.props.modifyBasketOrderType.value,modifyBasketOrderTypeMarketProtectionPercentage:t.props.modifyBasketOrderTypeMarketProtectionPercentage.value,availableExpiryDate:t.props.availableExpiryDate.value,brokerData:t.props.brokerData.value,availableOrderType:t.props.availableOrderType.value,modifySelectedBasketOrder:t.props.modifySelectedBasketOrder.value,activeTab:"basketOrder",from:"optionsList"},null,8,["BasketOrderData","modifyBasketOrderQty","modifyBasketOrderQtyField","addBasketOrderFromSavedBasket","modifyBasketOrderBuySellType","removeOrderFromBasket","getActiveTabData","showMessageOnOnlickWindow","clearAllBasketOrders","placeAllBasketOrders","modifyBasketOrderMarketProtectionPercentage","socket","addStrategyToBasketOrder","selectedOptions","spotPrice","modifyBasketOrderOptionType","modifyBasketOrderProductTypeField","modifyBasketOrderExpiryDate","modifyBasketOrderStrikePrice","modifyBasketOrderLtpField","modifyBasketOrderType","modifyBasketOrderTypeMarketProtectionPercentage","availableExpiryDate","brokerData","availableOrderType","modifySelectedBasketOrder"])],512),[[hi,t.activeTab=="basketOrder"]])]),p(Ai,{modelValue:t.addToBasketModel,"onUpdate:modelValue":i[11]||(i[11]=a=>t.addToBasketModel=a),class:"v-dialog-lg"},{default:v(()=>[p(t.DraggableResizableVue,{className:"",resizable:!1,"drag-handle":".handle"},{default:v(()=>[p(ui,null,{default:v(()=>[h("div",{class:Et(`bg-${t.positionDetails.stBuySellType=="BUY"?"success":"error"} px-2 py-2 d-flex justify-space-between gap-4 handle`)},[h("h3",SA,k(t.positionDetails.stBuySellType)+": "+k(t.positionDetails.stFullSymbolName),1),p(_e,{class:"mt-1",icon:"bx-x-circle",onClick:t.hideAddPositionModalFn})],2),p(Ft,{class:"d-flex flex-wrap gap-4"},{default:v(()=>[h("div",wA,[p(Hi,null,{default:v(()=>i[19]||(i[19]=[M("Order Type")])),_:1}),p(pl,{class:"mb-3",modelValue:t.positionDetails.stOrderType,"onUpdate:modelValue":i[4]||(i[4]=a=>t.positionDetails.stOrderType=a)},{default:v(()=>[p(xr,{label:"Limit",value:"LIMIT"}),p(xr,{label:"Market",value:"MARKET"}),p(xr,{label:"Market Protection",value:"MARKET_PROTECTION"})]),_:1},8,["modelValue"])]),t.positionDetails&&t.positionDetails.inLtp!=null?(R(),N("div",TA,[p(Hi,null,{default:v(()=>i[20]||(i[20]=[M("LTP")])),_:1}),h("div",null,[h("b",null,k(t.positionDetails.inLtp),1)])])):De("",!0),h("div",OA,[p(Hi,null,{default:v(()=>i[21]||(i[21]=[M("Price")])),_:1}),p(Jt,{density:"compact",modelValue:t.positionDetails.inLimitPrice,"onUpdate:modelValue":i[5]||(i[5]=a=>t.positionDetails.inLimitPrice=a),disabled:t.positionDetails.stOrderType=="MARKET"||t.positionDetails.stOrderType=="MARKET_PROTECTION",type:"number",min:"0",placeholder:"Enter price",onKeyup:Ei(t.addPositionToBasket,["enter"])},null,8,["modelValue","disabled"])]),h("div",PA,[p(Hi,null,{default:v(()=>[M("Qty (Lot size:"+k(t.inLotSize)+")",1)]),_:1}),p(Jt,{density:"compact",class:"custom-remove-input-arrow",modelValue:t.positionDetails.inQuantity,"onUpdate:modelValue":i[8]||(i[8]=a=>t.positionDetails.inQuantity=a),type:"number",onChange:t.changeBasketModelQty,placeholder:"Enter price",onKeyup:Ei(t.addPositionToBasket,["enter"])},{"prepend-inner":v(()=>[p(_e,{class:"cursor-pointer",icon:"bx-minus",onClick:i[6]||(i[6]=a=>t.incrementDecrementLotSize("decrement"))})]),"append-inner":v(()=>[p(_e,{class:"cursor-pointer",icon:"bx-plus",onClick:i[7]||(i[7]=a=>t.incrementDecrementLotSize("increment"))})]),_:1},8,["modelValue"])]),h("div",EA,[p(Hi,null,{default:v(()=>i[22]||(i[22]=[M("Product")])),_:1}),p(Xn,{density:"compact",items:t.availableProductType,modelValue:t.positionDetails.stProductType,"onUpdate:modelValue":i[9]||(i[9]=a=>t.positionDetails.stProductType=a),"item-title":"text","item-value":"value"},null,8,["items","modelValue"])]),mt(h("div",_A,[p(Hi,null,{default:v(()=>i[23]||(i[23]=[M("Market Protection %")])),_:1}),p(Xn,{density:"compact",items:Array.from({length:15},(a,s)=>({text:`${s+1} %`,value:s+1})),modelValue:t.positionDetails.inMarketProtectionPercentage,"onUpdate:modelValue":i[10]||(i[10]=a=>t.positionDetails.inMarketProtectionPercentage=a),"item-title":"text","item-value":"value"},null,8,["items","modelValue"])],512),[[hi,t.positionDetails.stOrderType=="MARKET_PROTECTION"]])]),_:1}),p(Ft,{class:"d-flex justify-end gap-2"},{default:v(()=>[p(Le,{class:"custom-flex-50",color:"secondary",variant:"tonal",onClick:t.hideAddPositionModalFn},{default:v(()=>i[24]||(i[24]=[M(" Cancel ")])),_:1}),p(Le,{color:t.positionDetails.stBuySellType=="BUY"?"success":"error",class:"custom-flex-50",onClick:t.addPositionToBasket},{default:v(()=>i[25]||(i[25]=[M(" Add to basket ")])),_:1},8,["color"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])}const DA={__name:"OptionList",props:["selectedExchange","selectedOptions","selectedAvailableDate","addOrderObjectToBasketOrderFromList","socket","BasketOrderData","modifyBasketOrderQty","modifyBasketOrderQtyField","addBasketOrderFromSavedBasket","modifyBasketOrderBuySellType","removeOrderFromBasket","getActiveTabData","showMessageOnOnlickWindow","clearAllBasketOrders","placeAllBasketOrders","modifyBasketOrderMarketProtectionPercentage","addStrategyToBasketOrder","spotPrice","modifyBasketOrderOptionType","modifyBasketOrderProductTypeField","modifyBasketOrderExpiryDate","modifyBasketOrderStrikePrice","modifyBasketOrderLtpField","modifyBasketOrderType","modifyBasketOrderTypeMarketProtectionPercentage","availableExpiryDate","brokerData","availableOrderType","modifySelectedBasketOrder","activeTab"],setup(n,{expose:i}){i(),he.tz.setDefault("Asia/Kolkata");const{global:e}=Yi(),t=pi(),r=n,o=_t(r),a=ht.orderApiUrl,s=g(28),l=g([]),u=g(null),c=g(!1),d=g("live"),f=g(null),y=g([{value:null,text:"Please select an expiry date"}]),S=g(!1),w=g({}),E=g(1),_=g(""),L=g([]),P=g([]),V=g(null),ne=g(null),ee=g(null),re=g(null),F=g(null),U=g(null),Y=g(null),K=g(null),Ce=g(null),Q=g(null),Ne=g(null),xe=g(null),fe=g(null),q=g(null),Pe=g(null),Se=g(null),ge=g({}),le=g([]),ie=g(ot.randomString(3)),ye=g(!1),Re=g({}),$=g(null),Qe=g(null),Ge=g(null),et=g(null),Je=g(null),it=g(null),jt=g([{headerName:"CALL",children:[{field:"inStraddlePrice",headerName:"Straddle",sortable:!1,hide:!0,minWidth:75,cellStyle:{textAlign:"center",padding:"0px 1px",fontWeight:700},cellClass:D=>{let C=[];return D.data.inStrikePrice<u.value?C.push("ag-cell-bg-gray"):D.data.inStrikePrice==u.value&&C.push("ag-cell-bg-warning"),C}},{field:"inCombinePremium",headerName:"Combine Premium",sortable:!1,hide:!0,minWidth:75,cellStyle:{textAlign:"center",padding:"0px 1px",fontWeight:700},cellClass:D=>{let C=[];return D.data.inStrikePrice<u.value?C.push("ag-cell-bg-gray"):D.data.inStrikePrice==u.value&&C.push("ag-cell-bg-warning"),C}},{field:"inCallPremium",headerName:"Premium",sortable:!1,hide:!0,minWidth:75,cellStyle:{textAlign:"center",padding:"0px 1px"},cellClass:D=>{let C=[];return D.data.inStrikePrice<u.value?C.push("ag-cell-bg-gray"):D.data.inStrikePrice==u.value&&C.push("ag-cell-bg-warning"),C}},{field:"inCallIntrinsicValue",headerName:"Intrinsic",sortable:!1,hide:!0,minWidth:75,cellStyle:{textAlign:"center",padding:"0px 1px"},cellClass:D=>{let C=[];return D.data.inStrikePrice<u.value?C.push("ag-cell-bg-gray"):D.data.inStrikePrice==u.value&&C.push("ag-cell-bg-warning"),C}},{field:"inCallDelta",headerName:"Delta",sortable:!1,hide:!0,minWidth:75,cellStyle:{textAlign:"center",padding:"0px 1px"},cellClass:D=>{let C=[];return D.data.inStrikePrice<u.value?C.push("ag-cell-bg-gray"):D.data.inStrikePrice==u.value&&C.push("ag-cell-bg-warning"),C}},{field:"inCallTheta",headerName:"Theta",sortable:!1,hide:!0,minWidth:65,cellStyle:{textAlign:"center",padding:"0px 1px"},cellClass:D=>{let C=[];return D.data.inStrikePrice<u.value?C.push("ag-cell-bg-gray"):D.data.inStrikePrice==u.value&&C.push("ag-cell-bg-warning"),C}},{field:"inCallGamma",headerName:"Gamma",sortable:!1,hide:!0,minWidth:65,cellStyle:{textAlign:"center",padding:"0px 1px"},cellClass:D=>{let C=[];return D.data.inStrikePrice<u.value?C.push("ag-cell-bg-gray"):D.data.inStrikePrice==u.value&&C.push("ag-cell-bg-warning"),C}},{field:"inCallVega",headerName:"Vega",sortable:!1,hide:!0,minWidth:65,cellStyle:{textAlign:"center",padding:"0px 1px"},cellClass:D=>{let C=[];return D.data.inStrikePrice<u.value?C.push("ag-cell-bg-gray"):D.data.inStrikePrice==u.value&&C.push("ag-cell-bg-warning"),C}},{field:"inCallOiInterpretation",headerName:"OI Int.",sortable:!1,hide:!1,minWidth:50,cellStyle:{textAlign:"center",padding:"0px 1px"},cellClass:D=>{let C=[];return D.data.inStrikePrice<u.value?C.push("ag-cell-bg-gray"):D.data.inStrikePrice==u.value&&C.push("ag-cell-bg-warning"),C},cellRenderer:yc},{field:"inCallOiChangePerc",headerName:"OI %",sortable:!1,hide:!1,minWidth:65,cellStyle:{textAlign:"center",padding:"0px 1px"},cellClass:D=>{let C=[];return D.value>0?C.push("ag-cell-color-success"):C.push("ag-cell-color-danger"),D.data.inStrikePrice<u.value?C.push("ag-cell-bg-gray"):D.data.inStrikePrice==u.value&&C.push("ag-cell-bg-warning"),C},valueFormatter:D=>isNaN(D.value)?"-":D.value.toFixed(2)+" %"},{field:"inCallOi",headerName:"OI",sortable:!1,hide:!1,minWidth:80,cellStyle:{textAlign:"center",padding:"0px 1px"},cellClass:D=>{let C=[];return D.data.inStrikePrice<u.value?C.push("ag-cell-bg-gray"):D.data.inStrikePrice==u.value&&C.push("ag-cell-bg-warning"),C},cellRenderer:D=>{let C="-";return isNaN(D.value)||(C=`
              <div>
              <div style="position: relative; width: 100%; padding: 1px;">
              <div class="call-oi-progress" style="width: ${(D.value*100/ne.value).toFixed(2)}%">
              </div>
              </div>
              <div style="position: relative; z-index: 1;">
                ${Number(D.value).toLocaleString("en-IN")}
              </div>
              </div>
              `),C}},{field:"inCallOiChange",headerName:"OI Chng.",sortable:!1,hide:!1,minWidth:80,cellStyle:{textAlign:"center",padding:"0px 1px"},cellClass:D=>{let C=[];return D.data.inStrikePrice<u.value?C.push("ag-cell-bg-gray"):D.data.inStrikePrice==u.value&&C.push("ag-cell-bg-warning"),D.value>=0?C.push("ag-cell-color-success"):C.push("ag-cell-color-danger"),C},cellRendererParams:{maxCallOiChangeIndex:()=>Y.value,minCallOiChangeIndex:()=>K.value},cellRenderer:Vf},{field:"inCallIv",headerName:"IV (Chng.)",sortable:!1,hide:!1,minWidth:105,cellStyle:{textAlign:"center",padding:"0px 1px"},cellClass:D=>{let C=[];return D.data.inStrikePrice<u.value?C.push("ag-cell-bg-gray"):D.data.inStrikePrice==u.value&&C.push("ag-cell-bg-warning"),C},cellRenderer:D=>`${D.data.inCallIv} (<span class="${D.data.inCallIvChange>=0?"ag-cell-color-success":"ag-cell-color-danger"}">
            ${D.data.inCallIvChange}
          </span>)`},{field:"inCallLtpChangePerc",headerName:"LTP %",sortable:!1,hide:!1,minWidth:65,cellStyle:{textAlign:"center",padding:"0px 1px"},cellClass:D=>{let C=[];return D.value>0?C.push("ag-cell-color-success"):C.push("ag-cell-color-danger"),D.data.inStrikePrice<u.value?C.push("ag-cell-bg-gray"):D.data.inStrikePrice==u.value&&C.push("ag-cell-bg-warning"),C},valueFormatter:D=>isNaN(D.value)?"-":D.value.toFixed(2)+" %"},{field:"inCallLtpChange",headerName:"LTP Chg",sortable:!1,hide:!1,minWidth:65,cellStyle:{textAlign:"center",padding:"0px 5px"},cellClass:D=>{let C=[];return D.value>0?C.push("ag-cell-color-success"):C.push("ag-cell-color-danger"),D.data.inStrikePrice<u.value?C.push("ag-cell-bg-gray"):D.data.inStrikePrice==u.value&&C.push("ag-cell-bg-warning"),C}},{field:"inCallLtp",headerName:"LTP",sortable:!1,hide:!1,minWidth:105,cellStyle:{textAlign:"center",padding:"0px 1px",fontWeight:700},cellClass:D=>{let C=["ag-cell-color-info"];return D.data.inStrikePrice<u.value?C.push("ag-cell-bg-gray"):D.data.inStrikePrice==u.value&&C.push("ag-cell-bg-warning"),C},cellRenderer:kf,valueFormatter(D){return isNaN(D.value)?"-":Number(D.value).toFixed(2)}},{field:"inCallAction",headerName:"Action",sortable:!1,hide:!1,minWidth:90,cellClass:D=>{let C=["ag-cell-color-info"];return D.data.inStrikePrice<u.value?C.push("ag-cell-bg-gray"):D.data.inStrikePrice==u.value&&C.push("ag-cell-bg-warning"),C},cellRenderer:mc,cellRendererParams:{stOptionType:"CALL",clicked:(D,C,de)=>{we(D,C,de)}}}]},{field:"inStrikePrice",headerName:"Strike",sortable:!1,hide:!1,minWidth:65,cellStyle:{textAlign:"center",backgroundColor:"#ffeeba",color:"#000000",cursor:"pointer"},cellClass:D=>[],cellRenderer:D=>D.value},{headerName:"PUT",children:[{field:"inPutAction",headerName:"Action",sortable:!1,hide:!1,minWidth:90,cellClass:D=>{let C=["ag-cell-color-info"];return D.data.inStrikePrice>u.value?C.push("ag-cell-bg-gray"):D.data.inStrikePrice==u.value&&C.push("ag-cell-bg-warning"),C},cellRenderer:mc,cellRendererParams:{stOptionType:"PUT",clicked:(D,C,de)=>{we(D,C,de)}}},{field:"inPutLtp",headerName:"LTP",sortable:!1,hide:!1,minWidth:115,cellStyle:{textAlign:"center",padding:"0px 1px",fontWeight:700},cellClass:D=>{let C=["ag-cell-color-info"];return D.data.inStrikePrice>u.value?C.push("ag-cell-bg-gray"):D.data.inStrikePrice==u.value&&C.push("ag-cell-bg-warning"),C},cellRenderer:Gf,valueFormatter(D){return isNaN(D.value)?"-":Number(D.value).toFixed(2)}},{field:"inPutLtpChange",headerName:"LTP Chg",sortable:!1,hide:!1,minWidth:65,cellStyle:{textAlign:"center",padding:"0px 5px"},cellClass:D=>{let C=[];return D.value>0?C.push("ag-cell-color-success"):C.push("ag-cell-color-danger"),D.data.inStrikePrice>u.value?C.push("ag-cell-bg-gray"):D.data.inStrikePrice==u.value&&C.push("ag-cell-bg-warning"),C}},{field:"inPutLtpChangePerc",headerName:"LTP %",sortable:!1,hide:!1,minWidth:65,cellStyle:{textAlign:"center",padding:"0px 1px"},cellClass:D=>{let C=[];return D.value>0?C.push("ag-cell-color-success"):C.push("ag-cell-color-danger"),D.data.inStrikePrice>u.value?C.push("ag-cell-bg-gray"):D.data.inStrikePrice==u.value&&C.push("ag-cell-bg-warning"),C},valueFormatter:D=>isNaN(D.value)?"-":D.value.toFixed(2)+" %"},{field:"inPutIv",headerName:"IV (Chng.)",sortable:!1,hide:!1,minWidth:115,cellStyle:{textAlign:"center",padding:"0px 1px"},cellClass:D=>{let C=[];return D.data.inStrikePrice>u.value?C.push("ag-cell-bg-gray"):D.data.inStrikePrice==u.value&&C.push("ag-cell-bg-warning"),C},cellRenderer:D=>`
          ${D.data.inPutIv}
          (<span class="${D.data.inPutIvChange>=0?"ag-cell-color-success":"ag-cell-color-danger"}">
            ${D.data.inPutIvChange}
          </span>)`},{field:"inPutOiChange",headerName:"OI Chng.",sortable:!1,hide:!1,minWidth:80,cellStyle:{textAlign:"center",padding:"0px 1px"},cellClass:D=>{let C=[];return D.data.inStrikePrice>u.value?C.push("ag-cell-bg-gray"):D.data.inStrikePrice==u.value&&C.push("ag-cell-bg-warning"),D.value>0?C.push("ag-cell-color-success"):C.push("ag-cell-color-danger"),C},cellRendererParams:{maxPutOiChangeIndex:()=>Pe.value,minPutOiChangeIndex:()=>Se.value},cellRenderer:Bf},{field:"inPutOi",headerName:"OI",sortable:!1,hide:!1,minWidth:80,cellStyle:{textAlign:"center",padding:"0px 1px"},cellClass:D=>{let C=[];return D.data.inStrikePrice>u.value?C.push("ag-cell-bg-gray"):D.data.inStrikePrice==u.value&&C.push("ag-cell-bg-warning"),C},cellRenderer:D=>{let C="-";return isNaN(D.value)||(C=`
            <div>
            <div style="position: relative; width: 100%; padding: 1px;">
            <div class="put-oi-progress" style="width: ${(D.value*100/ne.value).toFixed(2)}%">
            </div>
            </div>
            <div style="position: relative; z-index: 1;">
            ${Number(D.value).toLocaleString("en-IN")}
            </div>
            </div>`),C}},{field:"inPutOiChangePerc",headerName:"OI %",sortable:!1,hide:!1,minWidth:65,cellStyle:{textAlign:"center",padding:"0px 1px"},cellClass:D=>{let C=[];return D.value>0?C.push("ag-cell-color-success"):C.push("ag-cell-color-danger"),D.data.inStrikePrice>u.value?C.push("ag-cell-bg-gray"):D.data.inStrikePrice==u.value&&C.push("ag-cell-bg-warning"),C},valueFormatter:D=>isNaN(D.value)?"-":D.value.toFixed(2)+" %"},{field:"inPutOiInterpretation",headerName:"OI Int.",sortable:!1,hide:!1,minWidth:50,cellStyle:{textAlign:"center",padding:"0px 1px"},cellClass:D=>{let C=[];return D.data.inStrikePrice>u.value?C.push("ag-cell-bg-gray"):D.data.inStrikePrice==u.value&&C.push("ag-cell-bg-warning"),C},cellRenderer:yc},{field:"inPutVega",headerName:"Vega",sortable:!1,hide:!0,minWidth:65,cellStyle:{textAlign:"center",padding:"0px 1px"},cellClass:D=>{let C=[];return D.data.inStrikePrice>u.value?C.push("ag-cell-bg-gray"):D.data.inStrikePrice==u.value&&C.push("ag-cell-bg-warning"),C}},{field:"inPutGamma",headerName:"Gamma",sortable:!1,hide:!0,minWidth:65,cellStyle:{textAlign:"center",padding:"0px 1px"},cellClass:D=>{let C=[];return D.data.inStrikePrice>u.value?C.push("ag-cell-bg-gray"):D.data.inStrikePrice==u.value&&C.push("ag-cell-bg-warning"),C}},{field:"inPutTheta",headerName:"Theta",sortable:!1,hide:!0,minWidth:65,cellStyle:{textAlign:"center",padding:"0px 1px"},cellClass:D=>{let C=[];return D.data.inStrikePrice>u.value?C.push("ag-cell-bg-gray"):D.data.inStrikePrice==u.value&&C.push("ag-cell-bg-warning"),C}},{field:"inPutDelta",headerName:"Delta",sortable:!1,hide:!0,minWidth:75,cellStyle:{textAlign:"center",padding:"0px 1px"},cellClass:D=>{let C=[];return D.data.inStrikePrice>u.value?C.push("ag-cell-bg-gray"):D.data.inStrikePrice==u.value&&C.push("ag-cell-bg-warning"),C}},{field:"inPutIntrinsicValue",headerName:"Intrinsic",sortable:!1,hide:!0,minWidth:75,cellStyle:{textAlign:"center",padding:"0px 1px"},cellClass:D=>{let C=[];return D.data.inStrikePrice>u.value?C.push("ag-cell-bg-gray"):D.data.inStrikePrice==u.value&&C.push("ag-cell-bg-warning"),C}},{field:"inPutPremium",headerName:"Premium",sortable:!1,hide:!0,minWidth:75,cellStyle:{textAlign:"center",padding:"0px 1px"},cellClass:D=>{let C=[];return D.data.inStrikePrice>u.value?C.push("ag-cell-bg-gray"):D.data.inStrikePrice==u.value&&C.push("ag-cell-bg-warning"),C}}]}]),Si=g({initialWidth:100,sortable:!1,resizable:!0}),Kt=g(!1),fi=g([{value:"INTRADAY",text:"Intraday"},{value:"MARGIN",text:"Margin"}]),gi=g("optionsChain"),tt=g(null);cl(()=>{it.value=D=>D.data.inStrikePrice}),Gt(()=>{l.value=ti(),lt()}),Oo(()=>{me()}),Ke(w,(D,C)=>{setTimeout(()=>{if(S.value)S.value=!1;else if(!isNaN(D.inLtp)){let de=0,Tt=0,Fe={},ct={};E.value=Lt({stStartDateArg:he().format("YYYY-MM-DD"),stStartTimeArg:he().set({second:0}).format("HH:mm:ss"),stEndDateArg:he(f.value,"YYMMDD",!0).format("YYYY-MM-DD"),stEndTimeArg:"15:30:00"});let Qt=Math.round(E.value/365*1e4)/1e4,Bt=0,zt=0,Qi=0,z=0,pe=0,Ye=0;for(let x=0;x<P.value.length;x++){isNaN(P.value[x].inCallLtp)||(Tt=zn.getImpliedVolatility(Number(P.value[x].inCallLtp),Number(D.inLtp),Number(P.value[x].inStrikePrice),Qt,.1,"call")*100,P.value[x].inCallIv=Tt<500?Number(Tt.toFixed(2)):"-",P.value[x].inCallIvChange=isNaN(P.value[x].inCallIv)?"-":(P.value[x].inCallIv-P.value[x].inCallOldIv).toFixed(2)),isNaN(P.value[x].inPutLtp)||(Tt=zn.getImpliedVolatility(Number(P.value[x].inPutLtp),Number(D.inLtp),Number(P.value[x].inStrikePrice),Qt,.1,"put")*100,P.value[x].inPutIv=Tt<500?Number(Tt.toFixed(2)):"-",P.value[x].inPutIvChange=isNaN(P.value[x].inPutIv)?"-":(P.value[x].inPutIv-P.value[x].inPutOldIv).toFixed(2)),isNaN(P.value[x].inCallIv)||(Fe=Z(Number(D.inLtp),Number(P.value[x].inStrikePrice),Qt,P.value[x].inCallIv/100,.1,"call"),P.value[x].inCallDelta=isNaN(Fe.delta)?0:Fe.delta.toFixed(2),P.value[x].inCallTheta=isNaN(Fe.theta)?0:Fe.theta.toFixed(2),P.value[x].inCallGamma=isNaN(Fe.gamma)?0:Fe.gamma.toFixed(6),P.value[x].inCallVega=isNaN(Fe.vega)?0:Fe.vega.toFixed(2),P.value[x].inCallIntrinsicValue=Fe.inIntrinsicValue,P.value[x].inCallPremium=(P.value[x].inCallLtp-Fe.inIntrinsicValue).toFixed(2)),isNaN(P.value[x].inPutIv)||(ct=Z(Number(D.inLtp),Number(P.value[x].inStrikePrice),Qt,P.value[x].inPutIv/100,.1,"put"),P.value[x].inPutDelta=isNaN(ct.delta)?0:ct.delta.toFixed(2),P.value[x].inPutTheta=isNaN(ct.theta)?0:ct.theta.toFixed(2),P.value[x].inPutGamma=isNaN(ct.gamma)?0:ct.gamma.toFixed(6),P.value[x].inPutVega=isNaN(ct.vega)?0:ct.vega.toFixed(2),P.value[x].inPutIntrinsicValue=ct.inIntrinsicValue,P.value[x].inPutPremium=(P.value[x].inPutLtp-ct.inIntrinsicValue).toFixed(2));let Wt=isNaN(P.value[x].inCallLtp)?0:Number(P.value[x].inCallLtp),Vt=isNaN(P.value[x].inPutLtp)?0:Number(P.value[x].inPutLtp);P.value[x].inStraddlePrice=(Wt+Vt).toFixed(2);let Ui=isNaN(P.value[x].inCallPremium)?0:Number(P.value[x].inCallPremium),Vi=isNaN(P.value[x].inPutPremium)?0:Number(P.value[x].inPutPremium);P.value[x].inCombinePremium=(Ui+Vi).toFixed(2),P.value[x].inStrikePrice!="TOTAL"&&(Bt=isNaN(P.value[x].inCallOi)?Bt:Bt+Number(P.value[x].inCallOi),pe+=isNaN(P.value[x].inCallOiChange)?0:Number(P.value[x].inCallOiChange),zt=isNaN(P.value[x].inCallVolume)?zt:zt+Number(P.value[x].inCallVolume),Qi=isNaN(P.value[x].inPutOi)?Qi:Qi+Number(P.value[x].inPutOi),Ye+=isNaN(P.value[x].inPutOiChange)?0:Number(P.value[x].inPutOiChange),z=isNaN(P.value[x].inPutVolume)?z:z+Number(P.value[x].inPutVolume),de<=P.value[x].inStrikePrice&&P.value[x].inStrikePrice<D.inLtp&&(de=P.value[x].inStrikePrice),ce(P.value[x]))}u.value!=de&&setTimeout(()=>{$.value?.refreshCells({force:!0})},10),u.value=de;let $e=P.value[ge.value.TOTAL];$e.inCallOi=Bt,$e.inCallOiChange=pe,$e.inCallVolume=zt,$e.inPutOi=Qi,$e.inPutOiChange=Ye,$e.inPutVolume=z,P.value[ge.value.TOTAL]=ot.deepCopy($e)}},2e3)},{deep:!0});function ae(D){try{$.value=D.api,Qe.value=D.columnApi,Qe.value.autoSizeAllColumns()}catch(C){console.log(C)}}const G=()=>{$.value.sizeColumnsToFit()},H=D=>{try{ye.value=!0;let C=parseInt(P.value.length/2);$.value.forEachNodeAfterFilterAndSort(de=>{isNaN(de.id)||(C=Number(de.id)==Number(u.value)?de.rowIndex:C)}),$.value.ensureIndexVisible(C,"middle")}catch(C){console.log(C)}};function Ee(){try{He(),y.value.forEach(D=>{D.value==f.value&&(tt.value=D.inLotSize)})}catch(D){console.log("error"),console.log(D)}}function He(){c.value=!0;const D={stSelectedOptions:o.selectedOptions.value,stSelectedAvailableDate:o.selectedAvailableDate.value,stSelectedAvailableExpiryDate:f.value,stSelectedModeOfData:d.value,inSelectedavailableTimeRange:Ge.value,stStartTime:et.value,stEndTime:Je.value};yt.post("/one-click/getoptionschaindataforselectedoptions",D).then(C=>{if(C.data.status=="success")if(C.data.data.data.length>0){S.value=!0,w.value=C.data.data.underLyingAssetData,u.value=w.value.inLtp;let de={};d.value=="live"?de={stStartDateArg:he().format("YYYY-MM-DD"),stStartTimeArg:he().set({second:0}).format("HH:mm:ss"),stEndDateArg:he(f.value,"YYMMDD",!0).format("YYYY-MM-DD"),stEndTimeArg:"15:30:00"}:de={stStartDateArg:he(o.selectedAvailableDate.value,"YYYY-MM-DD",!0).format("YYYY-MM-DD"),stStartTimeArg:he().set({hour:15,minute:30,second:0}).format("HH:mm:ss"),stEndDateArg:he(f.value,"YYMMDD",!0).format("YYYY-MM-DD"),stEndTimeArg:"15:30:00"},E.value=Lt(de),ut(C.data.data.data),Ge.value==null?Ri():me(),ye.value&&dr(()=>{H()})}else P.value=[];else Ae(C.data.status,C.data.msg)}).catch(C=>{}).finally(()=>{c.value=!1})}const Ae=(D="success",C="")=>{t.toastMessage({color:D,message:C})};function Lt({stStartDateArg:D,stStartTimeArg:C,stEndDateArg:de,stEndTimeArg:Tt="15:30:00"}){let Fe=0;try{let ct=he(D,"YYYY-MM-DD",!0).startOf("D"),Qt=he(de,"YYYY-MM-DD",!0).startOf("D");if(ct.isSameOrBefore(Qt)){Fe=Qt.diff(ct,"days");const Bt=he(C,"HH:mm:ss",!0),Qi=he(Tt,"HH:mm:ss",!0).diff(Bt,"minutes");let z=0;Qi>0&&(z=1-(375-Qi)/375,z=Number(z.toFixed(2))),Fe+=z}else Fe=0}catch(ct){console.log("error"),console.log(ct)}finally{return Number(Fe.toFixed(2))}}function ut(D){try{u.value=0;let C={};for(let x=0;x<D.length;x++)u.value<=D[x].inStrikePrice&&D[x].inStrikePrice<w.value.inLtp&&(u.value=D[x].inStrikePrice),C[D[x].inStrikePrice]={inTime:"-",inStraddlePrice:"-",inCombinePremium:"-",inCallIntrinsicValue:"-",inCallDayOpen:"-",inCallDayHigh:"-",inCallDelta:"-",inCallTheta:"-",inCallGamma:"-",inCallVega:"-",inCallOiInterpretation:"-",inCallIvChange:"-",inCallIv:"-",inCallOiChange:"-",inCallOi:"-",inCallVolume:"-",inCallLtp:"-",inCallLtpChangePerc:"-",inCallLtpChange:"-",inStrikePrice:D[x].inStrikePrice,inPutLtpChange:"-",inPutLtpChangePerc:"-",inPutLtp:"-",inPutVolume:"-",inPutOi:"-",inPutOiChange:"-",inPutIv:"-",inPutIvChange:"-",inPcrRatio:"-",inPutOiInterpretation:"-",inPutDayOpen:"-",inPutDayHigh:"-",inPutDelta:"-",inPutTheta:"-",inPutGamma:"-",inPutVega:"-",inPutIntrinsicValue:"-"};let de=Math.round(E.value/365*1e4)/1e4,Tt=0,Fe=0,ct=0,Qt=0,Bt=0,zt=0,Qi=0,z={},pe={};D.map(x=>{x.stOptionsType=="CE"?(C[x.inStrikePrice].inCallOldLtp=x.inOldClose,C[x.inStrikePrice].inCallOi=x.inNewOi!=null?Number(x.inNewOi):Number(x.inOldOi),C[x.inStrikePrice].inCallOldOi=Number(x.inOldOi),C[x.inStrikePrice].inCallOldIv=Number(x.inOldIv),x.inTradedVolume!=null&&!isNaN(x.inTradedVolume)&&Number(x.inTradedVolume)!=0?(C[x.inStrikePrice].inCallDayOpen=x.inNewDayOpen,C[x.inStrikePrice].inCallDayHigh=x.inNewDayHigh,C[x.inStrikePrice].inCallDayLow=x.inNewDayLow,C[x.inStrikePrice].inCallLastLtp=x.inNewClose,C[x.inStrikePrice].inCallLtp=x.inNewClose,C[x.inStrikePrice].inCallLtpChange=(x.inNewClose-x.inOldClose).toFixed(2),C[x.inStrikePrice].inCallLtpChangePerc=(x.inNewClose-x.inOldClose)/x.inOldClose*100,C[x.inStrikePrice].inCallVolume=Number(x.inTradedVolume),C[x.inStrikePrice].inCallOiChange=Number(x.inNewOi)-Number(x.inOldOi),C[x.inStrikePrice].inCallOiInterpretation=Pt(C[x.inStrikePrice].inCallLtpChange,C[x.inStrikePrice].inCallOiChange),x.inNewIv!=null&&x.inNewIv!=null&&Number(x.inNewIv)!=0?C[x.inStrikePrice].inCallIv=Number(x.inNewIv):(Tt=zn.getImpliedVolatility(x.inNewClose,w.value.inLtp,x.inStrikePrice,de,.1,"call"),C[x.inStrikePrice].inCallIv=Number((Tt*100).toFixed(2))),C[x.inStrikePrice].inCallIvChange=(C[x.inStrikePrice].inCallIv-C[x.inStrikePrice].inCallOldIv).toFixed(2),z=Z(Number(w.value.inLtp),Number(x.inStrikePrice),de,Number(C[x.inStrikePrice].inCallIv)/100,.1,"call"),C[x.inStrikePrice].inCallDelta=isNaN(z.delta)?0:z.delta.toFixed(2),C[x.inStrikePrice].inCallTheta=isNaN(z.theta)?0:z.theta.toFixed(2),C[x.inStrikePrice].inCallGamma=isNaN(z.gamma)?0:z.gamma.toFixed(6),C[x.inStrikePrice].inCallVega=isNaN(z.vega)?0:z.vega.toFixed(2),C[x.inStrikePrice].inCallIntrinsicValue=z.inIntrinsicValue,C[x.inStrikePrice].inCallPremium=(C[x.inStrikePrice].inCallLtp-z.inIntrinsicValue).toFixed(2)):(C[x.inStrikePrice].inCallDayOpen="-",C[x.inStrikePrice].inCallDayHigh="-",C[x.inStrikePrice].inCallDayLow="-",C[x.inStrikePrice].inCallLastLtp=x.inOldClose,C[x.inStrikePrice].inCallLtp=x.inOldClose,C[x.inStrikePrice].inCallLtpChange="-",C[x.inStrikePrice].inCallLtpChangePerc="-",C[x.inStrikePrice].inCallVolume="-",C[x.inStrikePrice].inCallOiChange="-",C[x.inStrikePrice].inCallIv="-",C[x.inStrikePrice].inCallIvChange="-",C[x.inStrikePrice].inCallDelta="-",C[x.inStrikePrice].inCallTheta="-",C[x.inStrikePrice].inCallGamma="-",C[x.inStrikePrice].inCallVega="-",C[x.inStrikePrice].inCallOiInterpretation="-",C[x.inStrikePrice].inCallIntrinsicValue="-",C[x.inStrikePrice].inCallPremium="-"),C[x.inStrikePrice].inCallOldOi!=0&&!isNaN(C[x.inStrikePrice].inCallOiChange)?C[x.inStrikePrice].inCallOiChangePerc=C[x.inStrikePrice].inCallOiChange/C[x.inStrikePrice].inCallOldOi*100:C[x.inStrikePrice].inCallOiChangePerc="-",Fe+=isNaN(C[x.inStrikePrice].inCallOi)?0:C[x.inStrikePrice].inCallOi,ct+=isNaN(C[x.inStrikePrice].inCallOiChange)?0:C[x.inStrikePrice].inCallOiChange,Qt+=Number(x.inTradedVolume)):x.stOptionsType=="PE"&&(C[x.inStrikePrice].inPutOldLtp=x.inOldClose,C[x.inStrikePrice].inPutOi=x.inNewOi!=null?Number(x.inNewOi):Number(x.inOldOi),C[x.inStrikePrice].inPutOldOi=Number(x.inOldOi),C[x.inStrikePrice].inPutOldIv=Number(x.inOldIv),x.inTradedVolume!=null&&!isNaN(x.inTradedVolume)&&Number(x.inTradedVolume)!=0?(C[x.inStrikePrice].inPutDayOpen=x.inNewDayOpen,C[x.inStrikePrice].inPutDayHigh=x.inNewDayHigh,C[x.inStrikePrice].inPutDayLow=x.inNewDayLow,C[x.inStrikePrice].inPutLastLtp=x.inNewClose,C[x.inStrikePrice].inPutLtp=x.inNewClose,C[x.inStrikePrice].inPutLtpChange=(x.inNewClose-x.inOldClose).toFixed(2),C[x.inStrikePrice].inPutLtpChangePerc=(x.inNewClose-x.inOldClose)/x.inOldClose*100,C[x.inStrikePrice].inPutVolume=Number(x.inTradedVolume),C[x.inStrikePrice].inPutOiChange=Number(x.inNewOi)-Number(x.inOldOi),C[x.inStrikePrice].inPutOiInterpretation=Pt(C[x.inStrikePrice].inPutLtpChange,C[x.inStrikePrice].inPutOiChange),x.inNewIv!=null&&x.inNewIv!=null&&Number(x.inNewIv)!=0?C[x.inStrikePrice].inPutIv=Number(x.inNewIv):(Tt=zn.getImpliedVolatility(x.inNewClose,w.value.inLtp,x.inStrikePrice,de,.1,"put"),C[x.inStrikePrice].inPutIv=Number((Tt*100).toFixed(2))),C[x.inStrikePrice].inPutIvChange=(C[x.inStrikePrice].inPutIv-C[x.inStrikePrice].inPutOldIv).toFixed(2),pe=Z(Number(w.value.inLtp),Number(x.inStrikePrice),de,Number(C[x.inStrikePrice].inPutIv)/100,.1,"put"),C[x.inStrikePrice].inPutDelta=isNaN(pe.delta)?0:pe.delta.toFixed(2),C[x.inStrikePrice].inPutTheta=isNaN(pe.theta)?0:pe.theta.toFixed(2),C[x.inStrikePrice].inPutGamma=isNaN(pe.gamma)?0:pe.gamma.toFixed(6),C[x.inStrikePrice].inPutVega=isNaN(pe.vega)?0:pe.vega.toFixed(2),C[x.inStrikePrice].inPutIntrinsicValue=pe.inIntrinsicValue,C[x.inStrikePrice].inPutPremium=(C[x.inStrikePrice].inPutLtp-pe.inIntrinsicValue).toFixed(2)):(C[x.inStrikePrice].inPutDayOpen="-",C[x.inStrikePrice].inPutDayHigh="-",C[x.inStrikePrice].inPutDayLow="-",C[x.inStrikePrice].inPutLastLtp=x.inOldClose,C[x.inStrikePrice].inPutLtp=x.inOldClose,C[x.inStrikePrice].inPutLtpChange="-",C[x.inStrikePrice].inPutLtpChangePerc="-",C[x.inStrikePrice].inPutVolume="-",C[x.inStrikePrice].inPutOiChange="-",C[x.inStrikePrice].inPutOiInterpretation="-",C[x.inStrikePrice].inPutIv="-",C[x.inStrikePrice].inPutIvChange="-",C[x.inStrikePrice].inPutDelta="-",C[x.inStrikePrice].inPutTheta="-",C[x.inStrikePrice].inPutGamma="-",C[x.inStrikePrice].inPutVega="-",C[x.inStrikePrice].inPutIntrinsicValue="-",C[x.inStrikePrice].inPutPremium="-"),C[x.inStrikePrice].inPutOldOi!=0&&!isNaN(C[x.inStrikePrice].inPutOiChange)?C[x.inStrikePrice].inPutOiChangePerc=C[x.inStrikePrice].inPutOiChange/C[x.inStrikePrice].inPutOldOi*100:C[x.inStrikePrice].inPutOiChangePerc="-",Bt+=isNaN(C[x.inStrikePrice].inPutOi)?0:C[x.inStrikePrice].inPutOi,zt+=isNaN(C[x.inStrikePrice].inPutOiChange)?0:C[x.inStrikePrice].inPutOiChange,Qi+=Number(x.inTradedVolume))});let Ye={inTime:"-",inCallIvChange:"-",inCallIv:"-",inCallOiChange:ct,inCallOi:Fe,inCallVolume:Qt,inCallLtp:"-",inCallLtpChange:"-",inStrikePrice:"TOTAL",inPutLtpChange:"-",inPutLtp:"-",inPutVolume:Qi,inPutOi:Bt,inPutOiChange:zt,inPutIv:"-",inPutIvChange:"-",inPcrRatio:"-",_rowVariant:"info"};P.value=[];let $e=Object.keys(C).sort((x,Wt)=>x-Wt);$e.forEach(x=>{let Wt=isNaN(C[x].inCallLtp)?0:Number(C[x].inCallLtp),Vt=isNaN(C[x].inPutLtp)?0:Number(C[x].inPutLtp);C[x].inStraddlePrice=(Wt+Vt).toFixed(2);let Ui=isNaN(C[x].inCallPremium)?0:Number(C[x].inCallPremium),Vi=isNaN(C[x].inPutPremium)?0:Number(C[x].inPutPremium);C[x].inCombinePremium=(Ui+Vi).toFixed(2),P.value.push(C[x])}),ze(P.value),P.value.push(Ye),yi(P.value),dr(()=>{$.value?.refreshCells({force:!0})}),C=null,$e=null,Ye=null}catch(C){console.log("error"),console.log(C)}}function Ri(){try{d.value=="live"?(Gi(),o.socket.value.emit("GET_OPTIONS_DATA_OPTION_CHAIN",{stSelectedOptions:o.selectedOptions.value,stSelectedUnderLyingAsset:w.value.stUnderLyingAsset,stSelectedAvailableExpiryDate:f.value})):me()}catch(D){console.log("error"),console.log(D)}}function Gi(){try{me();let D={},C="OD_OC_"+o.selectedOptions.value+"_"+f.value;le.value.push(C),o.socket.value.on(C,de=>{D={inStrikePrice:de[0],stOptionsType:de[1],inLtp:de[2],inVolume:de[3],inOi:de[4]},ge.value[D.inStrikePrice]!=null&&ge.value[D.inStrikePrice]!=null&&fr(ge.value[D.inStrikePrice],D)}),C="EQUITY_UNDERLYING_DATA_"+w.value.stUnderLyingAsset,le.value.push(C),o.socket.value.on(C,de=>{Ht(de)})}catch{}}function me(){try{le.value=[...le.value];let D="";if(le.value.length>0){for(let C=0;C<le.value.length;C++)D=le.value[C],o.socket.value.emit("STOP_DATA",{stEventName:D}),o.socket.value.off(D);le.value=[]}D=null}catch{}}function fr(D,C){try{switch(C.stOptionsType){case"CE":P.value[D].inCallLastLtp=P.value[D].inCallLtp,P.value[D].inCallLtp=Number(C.inLtp),isNaN(P.value[D].inCallDayHigh)?P.value[D].inCallDayHigh=P.value[D].inCallLtp:P.value[D].inCallDayHigh=P.value[D].inCallLtp>P.value[D].inCallDayHigh?P.value[D].inCallLtp:P.value[D].inCallDayHigh,isNaN(P.value[D].inCallDayLow)?P.value[D].inCallDayLow=P.value[D].inCallLtp:P.value[D].inCallDayLow=P.value[D].inCallLtp<P.value[D].inCallDayLow?P.value[D].inCallLtp:P.value[D].inCallDayLow,isNaN(P.value[D].inCallDayOpen)&&(P.value[D].inCallDayOpen=P.value[D].inCallLtp),P.value[D].inCallLtpChange=(Number(C.inLtp)-Number(P.value[D].inCallOldLtp)).toFixed(2),P.value[D].inCallLtpChangePerc=(Number(C.inLtp)-Number(P.value[D].inCallOldLtp))/Number(P.value[D].inCallOldLtp)*100,P.value[D].inCallVolume=Number(P.value[D].inCallVolume)+Number(C.inVolume),P.value[D].inCallOi=C.inOi,P.value[D].inCallOiChange=Number(C.inOi)-Number(P.value[D].inCallOldOi),P.value[D].inCallOldOi!=0?P.value[D].inCallOiChangePerc=P.value[D].inCallOiChange/P.value[D].inCallOldOi*100:P.value[D].inCallOiChangePerc="-",P.value[D].inCallOiInterpretation=Pt(P.value[D].inCallLtpChange,P.value[D].inCallOiChange),mi(D,P.value[D],"call");break;case"PE":P.value[D].inPutLastLtp=P.value[D].inPutLtp,P.value[D].inPutLtp=Number(C.inLtp),isNaN(P.value[D].inPutDayHigh)?P.value[D].inPutDayHigh=P.value[D].inPutLtp:P.value[D].inPutDayHigh=P.value[D].inPutLtp>P.value[D].inPutDayHigh?P.value[D].inPutLtp:P.value[D].inPutDayHigh,isNaN(P.value[D].inPutDayLow)?P.value[D].inPutDayLow=P.value[D].inPutLtp:P.value[D].inPutDayLow=P.value[D].inPutLtp<P.value[D].inPutDayLow?P.value[D].inPutLtp:P.value[D].inPutDayLow,isNaN(P.value[D].inPutDayOpen)&&(P.value[D].inPutDayOpen=P.value[D].inPutLtp),P.value[D].inPutLtpChange=(Number(C.inLtp)-Number(P.value[D].inPutOldLtp)).toFixed(2),P.value[D].inPutLtpChangePerc=(Number(C.inLtp)-Number(P.value[D].inPutOldLtp))/Number(P.value[D].inPutOldLtp)*100,P.value[D].inPutVolume=Number(P.value[D].inPutVolume)+Number(C.inVolume),P.value[D].inPutOi=C.inOi,P.value[D].inPutOiChange=Number(C.inOi)-Number(P.value[D].inPutOldOi),P.value[D].inPutOldOi!=0?P.value[D].inPutOiChangePerc=P.value[D].inPutOiChange/P.value[D].inPutOldOi*100:P.value[D].inPutOiChangePerc="-",P.value[D].inPutOiInterpretation=Pt(P.value[D].inPutLtpChange,P.value[D].inPutOiChange),mi(D,P.value[D],"put");break;default:}ce(P.value[D],D)}catch{}}function Ht(D){try{Ze(Number(D.inLtp),w.value.inLtp),w.value.inLtp=Number(D.inLtp),w.value.stDateTime=he(D.stDateTime,"YYYY-MM-DDTHH:mm:ss").add(1,"m").format("DD MMM YYYY, HH:mm:ss")}catch{}}function Pt(D,C){D=Number(D),C=Number(C);let de=0;return D>0?C>0?de=1:de=4:C>0?de=3:de=2,de}function Z(D,C,de,Tt,Fe,ct){try{let Qt={delta:0,gamma:0,vega:0,theta:0};return Qt.delta=no.getDelta(D,C,de,Tt,Fe,ct),Qt.gamma=no.getGamma(D,C,de,Tt,Fe,ct),Qt.vega=no.getVega(D,C,de,Tt,Fe,ct),Qt.theta=no.getTheta(D,C,de,Tt,Fe,ct),Qt.inIntrinsicValue=ct=="call"?D-C:C-D,Qt.inIntrinsicValue=Qt.inIntrinsicValue>0?Number(Qt.inIntrinsicValue.toFixed(2)):0,Qt}catch(Qt){console.log("error"),console.log(Qt)}}function ze(D){try{V.value=null,ne.value=null,ee.value=null,re.value=null,F.value=null,U.value=null,Y.value=null,K.value=null,Ce.value=null,Q.value=null,Ne.value=null,xe.value=null,fe.value=null,q.value=null,Pe.value=null,Se.value=null;let C={};if(D.length>0){for(let de=0;de<D.length;de++)C=D[de],isNaN(C.inCallVolume)||(V.value==null||V.value<C.inCallVolume)&&(V.value=C.inCallVolume,F.value=de),isNaN(C.inPutVolume)||(Ce.value==null||Ce.value<C.inPutVolume)&&(Ce.value=C.inPutVolume,fe.value=de),isNaN(C.inCallOi)||(ne.value==null||ne.value<C.inCallOi)&&(ne.value=C.inCallOi,U.value=de),isNaN(C.inPutOi)||(Q.value==null||Q.value<C.inPutOi)&&(Q.value=C.inPutOi,q.value=de),isNaN(C.inCallOiChange)||(ee.value==null?(ee.value=C.inCallOiChange,Y.value=de,re.value=C.inCallOiChange,K.value=de):(ee.value<C.inCallOiChange&&(ee.value=C.inCallOiChange,Y.value=de),re.value>C.inCallOiChange&&(re.value=C.inCallOiChange,K.value=de))),isNaN(C.inPutOiChange)||(Ne.value==null?(Ne.value=C.inPutOiChange,Pe.value=de,xe.value=C.inPutOiChange,Se.value=de):(Ne.value<C.inPutOiChange&&(Ne.value=C.inPutOiChange,Pe.value=de),xe.value>C.inPutOiChange&&(xe.value=C.inPutOiChange,Se.value=de)));C=null}}catch{}}function yi(D){if(ge.value={},D.length>0)for(let C=0;C<D.length;C++)ge.value[D[C].inStrikePrice]=C}function mi(D,C,de){de=="call"?(isNaN(C.inCallVolume)||(C.inCallVolume=Number(C.inCallVolume),(V.value==null||V.value<C.inCallVolume)&&(V.value=C.inCallVolume,F.value=D)),isNaN(C.inCallOi)||(C.inCallOi=Number(C.inCallOi),(ne.value==null||ne.value<C.inCallOi)&&(ne.value=C.inCallOi,U.value=D)),isNaN(C.inCallOiChange)||(C.inCallOiChange=Number(C.inCallOiChange),ee.value==null?(ee.value=C.inCallOiChange,Y.value=D,re.value=C.inCallOiChange,K.value=D):(ee.value<C.inCallOiChange&&(ee.value=C.inCallOiChange,Y.value=D),re.value>C.inCallOiChange&&(re.value=C.inCallOiChange,K.value=D)))):de=="put"&&(isNaN(C.inPutVolume)||(C.inPutVolume=Number(C.inPutVolume),(Ce.value==null||Ce.value<C.inPutVolume)&&(Ce.value=C.inPutVolume,fe.value=D)),isNaN(C.inPutOi)||(C.inPutOi=Number(C.inPutOi),(Q.value==null||Q.value<C.inPutOi)&&(Q.value=C.inPutOi,q.value=D)),isNaN(C.inPutOiChange)||(C.inPutOiChange=Number(C.inPutOiChange),Ne.value==null?(Ne.value=C.inPutOiChange,Pe.value=D,xe.value=C.inPutOiChange,Se.value=D):(Ne.value<C.inPutOiChange&&(Ne.value=C.inPutOiChange,Pe.value=D),xe.value>C.inPutOiChange&&(xe.value=C.inPutOiChange,Se.value=D))))}function ce(D,C){try{dr(()=>{var de=D,Tt=copyObject(de);$.value.applyTransactionAsync({update:[Tt]},Fe=>{})})}catch(de){console.log(de)}}function Ze(D,C){try{let de="#underlying_asset_ltp_"+ie.value;if(de!=null){let Tt=Number(D)>Number(C)?"blinkGreenAnimationUA":"blinkRedAnimationUA",Fe=document.querySelector(de);Fe.classList.add(Tt),setTimeout((ct,Qt)=>{ct.classList.remove(Qt)},12e3,Fe,Tt)}}catch{}}function we(D,C,de){try{console.log("data"),console.log(de);const Tt=`${o.selectedOptions.value}-${f.value}-${de.inStrikePrice}-${D}`;Re.value={stSubSegment:"OPTIONS",stBuySellType:C,stExchange:o.selectedExchange.value,stSymbolName:o.selectedOptions.value,stFullSymbolName:Tt,stExpiryDate:f.value,inStrikePrice:de.inStrikePrice,stOptionType:D,stOrderType:"MARKET",inQuantity:tt.value,stProductType:"MARGIN",inLtp:D=="CALL"?de.inCallLtp:de.inPutLtp,inLimitPrice:D=="CALL"?de.inCallLtp:de.inPutLtp},Kt.value=!0}catch(Tt){console.log("error"),console.log(Tt)}}function wt(){try{if(Re.value.inQuantity%tt.value!=0)return t.toastMessage({color:"error",message:"Invalid qty. Please enter qty in lot size multiple."}),!1;let D=Number(Re.value.inQuantity);Re.value.inQuantity=D,Re.value.stOrderType=="MARKET"||!isNaN(Re.value.inLimitPrice)&&Re.value.inLimitPrice>0?!isNaN(Re.value.inQuantity)&&Re.value.inQuantity>0?(o.addOrderObjectToBasketOrderFromList.value({...Re.value}),Re.value.inLimitPrice=Re.value.stOrderType=="MARKET"?0:Number(Re.value.inLimitPrice),Re.value={},We()):Ae("error","Please write valid quantity."):Ae("error","Please write valid price.")}catch(D){console.log("error"),console.log(D)}}function We(){Kt.value=!1}function lt(){let D={stSelectedOptions:o.selectedOptions.value,stSelectedAvailableDate:o.selectedAvailableDate.value,stSelectedModeOfData:d.value};yt.post("/one-click/getoptionsdataexpirydate",D).then(C=>{C.data.status=="success"?(y.value=_i(C.data.data),f.value=y.value.length>1?y.value[1].value:null,tt.value=y.value.length>1?y.value[1].inLotSize:null,He()):(y.value=[{value:null,text:"No expiry date available"}],f.value=null,Ae(C.data.status,C.data.msg))}).catch(C=>{console.log(C)})}function _i(D){let C=[];return C=D.map(de=>({text:he(de.value,"YYMMDD").format("DD-MMM-YYYY"),value:de.value,inLotSize:de.inLotSize})),C=[{value:null,text:"Please select an expiry date"},...C],C}function ti(){try{let D=[];for(let C=0;C<jt.value.length;C++)jt.value[C].children!=null&&jt.value[C].children!=null&&jt.value[C].children.map(de=>{de.hide||D.push(de.field)});return D}catch{}}function oi(D){try{let C=[];D=="OI"?C=["inCallOiInterpretation","inCallOiChangePerc","inCallOi","inCallOiChange","inCallIv","inCallLtp","inCallLtpChangePerc","inCallLtpChange","inCallAction","inPutOiInterpretation","inPutOiChangePerc","inPutOi","inPutOiChange","inPutIv","inPutLtp","inPutLtpChangePerc","inPutLtpChange","inPutAction"]:D=="GREEKS"?C=["inCallDelta","inCallTheta","inCallGamma","inCallVega","inCallIv","inCallLtp","inCallLtpChangePerc","inCallLtpChange","inCallAction","inPutDelta","inPutTheta","inPutGamma","inPutVega","inPutIv","inPutLtp","inPutLtpChangePerc","inPutLtpChange","inPutAction"]:D=="PREMIUM"&&(C=["inStraddlePrice","inCombinePremium","inCallPremium","inCallIntrinsicValue","inCallIv","inCallLtp","inCallLtpChangePerc","inCallLtpChange","inCallAction","inPutPremium","inPutIntrinsicValue","inPutIv","inPutLtp","inPutLtpChangePerc","inPutLtpChange","inPutAction"]);for(let de=0;de<jt.value.length;de++)if(jt.value[de].children!=null&&jt.value[de].children!=null)for(let Tt=0;Tt<jt.value[de].children.length;Tt++){const Fe=jt.value[de].children[Tt];C.indexOf(Fe.field)!==-1?jt.value[de].children[Tt].hide=!1:jt.value[de].children[Tt].hide=!0}$.value.setColumnDefs(jt.value),G()}catch(C){console.log("error"),console.log(C)}}function Rt(){gi.value=="optionsChain"?gi.value="basketOrder":gi.value="optionsChain"}function qr(){Re.value.inQuantity=ot.calculateLotSize(Re.value.inQuantity,ht.maxLots,tt.value)}function _o(D){Re.value.inQuantity=ot.incrementDecrementLotSize(Re.value.inQuantity,ht.maxLots,tt.value,D)}window.copyObject=function(C){var de={};return Object.keys(C).forEach(function(Tt){de[Tt]=C[Tt]}),de};const si={global:e,store:t,definePropsData:r,props:o,brokerApiBaseUrl:a,rowHeight:s,tempColumnDefs:l,optionChainAtm:u,disableRefreshDataButton:c,selectedModeOfData:d,selectedAvailableExpiryDate:f,availableExpiryDate:y,underLyingAssetSelectedForFirstTime:S,underLyingAssetData:w,inDaysLeftInExpiry:E,stExpiryDate:_,fields:L,items:P,maxCallVolume:V,maxCallOi:ne,maxCallOiChange:ee,minCallOiChange:re,maxCallVolumeIndex:F,maxCallOiIndex:U,maxCallOiChangeIndex:Y,minCallOiChangeIndex:K,maxPutVolume:Ce,maxPutOi:Q,maxPutOiChange:Ne,minPutOiChange:xe,maxPutVolumeIndex:fe,maxPutOiIndex:q,maxPutOiChangeIndex:Pe,minPutOiChangeIndex:Se,strikePriceAndItemIndex:ge,socketSubscribedEvents:le,randomIdString:ie,isFirstTimeDataRendered:ye,positionDetails:Re,gridApi:$,columnApi:Qe,selectedavailableTimeRange:Ge,selectedstartTime:et,selectedEndTime:Je,getRowNodeId:it,columnDefs:jt,defaultColDef:Si,addToBasketModel:Kt,availableProductType:fi,activeTab:gi,inLotSize:tt,onGridReady:ae,onGridSizeChanged:G,onFirstDataRendered:H,handleOnExpiryDateChange:Ee,getOptionsChainDataForSelectedOptions:He,showMessage:Ae,findDaysLeftInExpiry:Lt,calculateOptionsChainData:ut,connectSocketForRealtimeData:Ri,subscribeForDynamicEvents:Gi,unsubscribeForDynamicEvents:me,setRealTimeTableData:fr,setRealTimeUnderlyingData:Ht,getOiInterpretation:Pt,calculateGreeks:Z,getHighLowForOptionsData:ze,setTableItemsWithStrikePriceAndId:yi,getHighLowForSingleOptionsData:mi,onAsyncUpdate:ce,blinkUnderlyingAssetAnimation:Ze,showAddPositionModalFn:we,addPositionToBasket:wt,hideAddPositionModalFn:We,getOptionsDataExpiryDate:lt,createAvailableOptionsExpiryDateMenu:_i,getFieldNameFromColumnDefs:ti,setGridColumns:oi,showOptionsChainOrBasket:Rt,changeBasketModelQty:qr,incrementDecrementLotSize:_o,get useAppStore(){return pi},nextTick:dr,onBeforeMount:cl,onBeforeUnmount:Oo,onMounted:Gt,ref:g,toRefs:_t,watch:Ke,get router(){return vy},get axios(){return yt},get config(){return ht},get sharedFunctions(){return ot},get AgGridVue(){return Eo},get iv(){return zn},get greeks(){return no},CustomAgAnimateShowChangeCECellRenderer:kf,CustomAgAnimateShowChangePECellRenderer:Gf,OiInterestRenderer:yc,get useTheme(){return Yi},OiCallChangeRenderer:Vf,OiPutChangeRenderer:Bf,CustomActionButtonRenderer:mc,BasketOrder:$v,get DraggableResizableVue(){return Jo},get moment(){return he}};return Object.defineProperty(si,"__isScriptSetup",{enumerable:!1,value:!0}),si}},RA=ki(DA,[["render",bA],["__scopeId","data-v-ab8795ec"]]),xA={class:"flex"},AA={key:0,class:"d-flex"},LA={key:1},MA=vi({__name:"CloseBtnCellRenderer",props:["params"],setup(n){const i=pi(),t=_t(n);g(!1),g(null),Gt(()=>{});function r(){t.params.value.clicked(t.params.value.data)}function o(s,l){const u=s.inNetQuantity,c=s.inLotSize;let f=u/c*l/100;return f=f>=0?Math.floor(f):Math.ceil(f),f*c}function a(s,l=!1,u=!1,c=!1,d=!1,f=!1,y=!1,S=!1){const w=t.params.value.data.inNetQuantity,E=t.params.value.data.inLotSize;let L=w/E*s/100;if(L=Math.floor(L),L!=0){const P={...t.params.value.data,inNetQuantity:L*t.params.value.data.inLotSize,isReverseEntry:l,isConvertOptionType:u,isLimitOrder:c,isExitOrder:d,isCancelAllPending:f,isChnageStrikePriceOrder:y,isConvertOptionTypeWithSameLegDistane:S},V=s==100;t.params.value.clicked(P,V)}else i.toastMessage({color:"error",message:"Cannot exit partial position."})}return(s,l)=>(R(),N("span",xA,[n.params.data.inNetQuantity!=0?(R(),N("span",AA,[p(Dt,{location:"top"},{activator:v(({props:u})=>[p(yr,null,{activator:v(({props:c})=>[p(_e,pt({class:"mr-2 text-success cursor-pointer",icon:"bx-grid-alt"},c),null,16)]),default:v(()=>[p(rr,{density:"compact"},{default:v(()=>[p(It,{onClick:l[0]||(l[0]=c=>a(25))},{default:v(()=>[M("Exit 25% (Qty: "+k(o(n.params.data,25))+" )",1)]),_:1}),p(It,{onClick:l[1]||(l[1]=c=>a(50))},{default:v(()=>[M("Exit 50% (Qty: "+k(o(n.params.data,50))+" )",1)]),_:1}),p(It,{onClick:l[2]||(l[2]=c=>a(75))},{default:v(()=>[M("Exit 75% (Qty: "+k(o(n.params.data,75))+" )",1)]),_:1}),p(It,{onClick:l[3]||(l[3]=c=>a(100))},{default:v(()=>[M("Exit 100% (Qty: "+k(o(n.params.data,100))+" )",1)]),_:1}),p(Sn),p(It,{onClick:l[4]||(l[4]=c=>a(100,!0))},{default:v(()=>l[12]||(l[12]=[M("Reverse entry")])),_:1}),p(It,{onClick:l[5]||(l[5]=c=>a(100,!1,!0))},{default:v(()=>l[13]||(l[13]=[M(" Convert options type and switch to ATM ")])),_:1}),p(It,{onClick:l[6]||(l[6]=c=>a(100,!1,!1,!0,!0,!1,!1,!0))},{default:v(()=>l[14]||(l[14]=[M(" Convert Options Type With Same Steps From ATM ")])),_:1}),p(Sn),p(It,{onClick:l[7]||(l[7]=c=>a(100,!1,!1,!0,!0,!1,!0))},{default:v(()=>l[15]||(l[15]=[M(" Change strike price ")])),_:1}),p(Sn),p(It,{onClick:l[8]||(l[8]=c=>a(100,!1,!1,!0,!0))},{default:v(()=>l[16]||(l[16]=[M(" Exit position with limit order ")])),_:1}),p(It,{onClick:l[9]||(l[9]=c=>a(100,!1,!1,!0,!1))},{default:v(()=>l[17]||(l[17]=[M(" Add qty with limit order ")])),_:1}),p(Sn),p(It,{onClick:l[10]||(l[10]=c=>a(100,!1,!1,!1,!1,!0))},{default:v(()=>l[18]||(l[18]=[M(" Cancel all pending orders of same symbol ")])),_:1})]),_:1})]),_:2},1024)]),default:v(()=>[l[19]||(l[19]=h("span",null,"Close partial position",-1))]),_:1}),p(Dt,{location:"top"},{activator:v(({props:u})=>[p(_e,pt(u,{icon:"bx-x-circle",onClick:l[11]||(l[11]=c=>r()),class:"text-error cursor-pointer"}),null,16)]),default:v(()=>[l[20]||(l[20]=h("span",null,"Close full position",-1))]),_:1})])):(R(),N("span",LA,"-"))]))}});const Qf=ki(MA,[["__scopeId","data-v-70e27c4e"]]),NA={key:0},FA={key:1,class:"d-flex"},IA={class:"text-success",style:{"font-size":"18px","font-weight":"700","vertical-align":"middle"}},kA={class:"text-success",style:{"font-size":"18px","font-weight":"700","vertical-align":"middle"}},GA={key:1},VA=vi({__name:"TslBtnCellRenderer",props:["params"],setup(n){const e=_t(n);function t(o){e.params.value.clicked(e.params.value.data,o)}function r(o){e.params.value.changeSlClick(e.params.value.data,o)}return(o,a)=>(R(),N("span",null,[nt(e).params.value.data.inNetQuantity!=0?(R(),N("span",NA,[nt(e).params.value.data.isSlSet==null&&nt(e).params.value.data.isTrailingStoplossSet==null||nt(e).params.value.data.isSlSet==!1&&nt(e).params.value.data.isTrailingStoplossSet==!1?(R(),at(Dt,{key:0,location:"top"},{activator:v(({props:s})=>[p(_e,pt(s,{icon:"bx-plus-circle",onClick:a[0]||(a[0]=l=>t(!0)),class:"mt-1 text-success cursor-pointer"}),null,16)]),default:v(()=>[a[5]||(a[5]=h("span",null,"Add SL",-1))]),_:1})):(R(),N("span",FA,[p(Dt,{location:"top"},{activator:v(({props:s})=>[p(_e,pt(s,{icon:"bx-pencil",onClick:a[1]||(a[1]=l=>t(!0)),class:"mt-1 text-info cursor-pointer"}),null,16)]),default:v(()=>[a[6]||(a[6]=h("span",null,"Modify SL",-1))]),_:1}),nt(e).params.value.data.isSlSet&&!nt(e).params.value.data.isTrailingStoplossSet?(R(),N("span",{key:0,onClick:a[2]||(a[2]=s=>r(!0)),class:"mx-1",style:{cursor:"pointer"}},[h("span",IA,[p(Dt,{activator:"parent",location:"top"},{default:v(()=>a[7]||(a[7]=[M(" Convert Static SL to Trailing SL ")])),_:1}),a[8]||(a[8]=M(" T "))])])):De("",!0),nt(e).params.value.data.isSlSet&&nt(e).params.value.data.isTrailingStoplossSet?(R(),N("span",{key:1,onClick:a[3]||(a[3]=s=>r(!1)),class:"mx-1",style:{cursor:"pointer"}},[h("span",kA,[p(Dt,{activator:"parent",location:"top"},{default:v(()=>a[9]||(a[9]=[M(" Convert Trailing SL to Static SL ")])),_:1}),a[10]||(a[10]=M(" S "))])])):De("",!0),p(Dt,{location:"top"},{activator:v(({props:s})=>[p(_e,pt(s,{icon:"bx-minus-circle",onClick:a[4]||(a[4]=l=>t(!1)),class:"mt-1 text-error cursor-pointer"}),null,16)]),default:v(()=>[a[11]||(a[11]=h("span",null,"Remove SL",-1))]),_:1})]))])):(R(),N("span",GA," - "))]))}});const qf=ki(VA,[["__scopeId","data-v-499ab756"]]),BA={key:0},HA={key:0},WA={key:1,class:"flex"},UA={class:""},jA={key:1},Xf=vi({__name:"SlCellRenderer",props:["params"],setup(n){const e=_t(n),t=g(0);Gt(()=>{let o=0;e.params.value.data.stSide=="BUY"?o=Number(e.params.value.data.inSl)-Number(e.params.value.data.inNetAverage):e.params.value.data.stSide=="SELL"&&(o=Number(e.params.value.data.inNetAverage)-Number(e.params.value.data.inSl)),o=o*Math.abs(Number(e.params.value.data.inNetQuantity)),t.value=o.toFixed(2)});function r(o,a){e.params.value.clicked(e.params.value.data,o,a)}return(o,a)=>(R(),N("span",null,[n.params.data.isSlSet?(R(),N("span",BA,[n.params.data.isTrailingStoplossSet?(R(),N("span",HA,[p(Dt,{activator:"parent",location:"top"},{default:v(()=>[M(" Approx loss: "+k(t.value),1)]),_:1}),M(" "+k(Number(n.params.data.inSl).toFixed(2)+" (T)"),1)])):(R(),N("span",WA,[p(Dt,{location:"top"},{activator:v(({props:s})=>[p(_e,pt(s,{icon:"bx-minus-circle",onClick:a[0]||(a[0]=l=>r(!1,1)),class:"text-error cursor-pointer"}),null,16)]),default:v(()=>[a[2]||(a[2]=h("span",null,"Decrease SL",-1))]),_:1}),h("span",UA,[p(Dt,{activator:"parent",location:"top"},{default:v(()=>[M(" Approx loss: "+k(t.value),1)]),_:1}),M(" "+k(Number(n.params.data.inSl).toFixed(2)),1)]),p(Dt,{location:"top"},{activator:v(({props:s})=>[p(_e,pt(s,{icon:"bx-plus-circle",onClick:a[1]||(a[1]=l=>r(!0,1)),class:"text-success cursor-pointer"}),null,16)]),default:v(()=>[a[3]||(a[3]=h("span",null,"Increase SL",-1))]),_:1})]))])):(R(),N("span",jA," - "))]))}}),zA={key:0},YA={key:0},KA={key:1,class:"d-flex"},QA={key:1},qA=vi({__name:"TargetBtnCellRenderer",props:["params"],setup(n){const e=_t(n);function t(r){e.params.value.clicked(e.params.value.data,r)}return(r,o)=>(R(),N("span",null,[nt(e).params.value.data.inNetQuantity!=0?(R(),N("span",zA,[nt(e).params.value.data.isTargetSet==!1||nt(e).params.value.data.isTargetSet==null?(R(),N("span",YA,[p(Dt,{location:"top"},{activator:v(({props:a})=>[p(_e,pt(a,{icon:"bx-plus-circle",onClick:o[0]||(o[0]=s=>t(!0)),class:"text-success cursor-pointer"}),null,16)]),default:v(()=>[o[3]||(o[3]=h("span",null,"Add Target",-1))]),_:1})])):(R(),N("span",KA,[p(Dt,{location:"top"},{activator:v(({props:a})=>[p(_e,pt(a,{icon:"bx-pencil",onClick:o[1]||(o[1]=s=>t(!0)),class:"mt-1 text-warning cursor-pointer"}),null,16)]),default:v(()=>[o[4]||(o[4]=h("span",null,"Modify Target",-1))]),_:1}),p(Dt,{location:"top"},{activator:v(({props:a})=>[p(_e,pt(a,{icon:"bx-minus-circle",onClick:o[2]||(o[2]=s=>t(!1)),class:"mt-1 text-error cursor-pointer"}),null,16)]),default:v(()=>[o[5]||(o[5]=h("span",null,"Remove Target",-1))]),_:1})]))])):(R(),N("span",QA," - "))]))}});const Jf=ki(qA,[["__scopeId","data-v-bfe1e372"]]),XA={key:0},JA={class:"d-flex"},ZA={key:1},Zf=vi({__name:"TargetCellRenderer",props:["params"],setup(n){const e=_t(n),t=g(0);Gt(()=>{let o=0;e.params.value.data.stSide=="BUY"?o=Number(e.params.value.data.inTarget)-Number(e.params.value.data.inNetAverage):e.params.value.data.stSide=="SELL"&&(o=Number(e.params.value.data.inNetAverage)-Number(e.params.value.data.inTarget)),o=o*Math.abs(Number(e.params.value.data.inNetQuantity)),t.value=o.toFixed(2)});function r(o,a){e.params.value.clicked(e.params.value.data,o,a)}return(o,a)=>(R(),N("span",null,[n.params.data.isTargetSet?(R(),N("span",XA,[h("span",JA,[p(Dt,{location:"top"},{activator:v(({props:s})=>[p(_e,pt(s,{icon:"bx-minus-circle",onClick:a[0]||(a[0]=l=>r(!1,1)),class:"mt-1 text-error cursor-pointer"}),null,16)]),default:v(()=>[a[2]||(a[2]=h("span",null,"Decrease Target",-1))]),_:1}),h("span",null,[p(Dt,{activator:"parent",location:"top"},{default:v(()=>[M(" Approx Profit: "+k(t.value),1)]),_:1}),M(" "+k(Number(n.params.data.inTarget).toFixed(2)),1)]),p(Dt,{location:"top"},{activator:v(({props:s})=>[p(_e,pt(s,{icon:"bx-plus-circle",onClick:a[1]||(a[1]=l=>r(!0,1)),class:"mt-1 text-success cursor-pointer"}),null,16)]),default:v(()=>[a[3]||(a[3]=h("span",null,"Increase Target",-1))]),_:1})])])):(R(),N("span",ZA," - "))]))}}),$f=vi({__name:"SymbolNameCellRenderer",props:["params"],setup(n){const e=_t(n);function t(){e.params.value.clicked(e.params.value.data)}return(r,o)=>(R(),N("span",{onClick:t,style:{cursor:"pointer"}},k(nt(e).params.value.data.stSymbolName),1))}}),$A={class:"custom-flex-40 custom-flex-xs-100"},eL={class:"d-flex flex-wrap gap-4 custom-flex-55 custom-flex-xs-90 justify-center"},tL={key:0},iL={key:1},rL={key:0,class:"d-flex"},oL={key:0},nL={class:"d-flex"},aL={key:1},sL={key:2},lL={class:"d-flex"},uL={key:3},cL={key:0,class:"d-flex gap-2"},dL={key:1,class:"mb-1"},pL={class:"border-t mt-2"},fL={key:0},hL={key:1},vL={class:"d-flex"},gL={class:"custom-flex-5 custom-flex-xs-10 text-end"},yL={class:"mt-4",style:{"font-size":"14px"}},mL={class:"d-flex flex-wrap justify-space-between my-1"},CL={key:0},SL={key:1},wL={key:0,class:"d-flex"},TL={key:0},OL={class:"d-flex"},PL={key:1},EL={key:2},_L={class:"d-flex"},bL={key:3},DL={key:0,class:"d-flex gap-2"},RL={key:1,class:"mb-1"},xL={class:"border-t mt-2"},AL={key:0},LL={key:1},ML={class:"d-flex"},NL={class:"bg-error px-2 py-2 d-flex justify-space-between handle"},FL={class:"custom-flex-46 custom-flex-xs-100"},IL={class:"custom-flex-46 custom-flex-xs-100"},kL={class:"custom-flex-46 custom-flex-xs-100"},GL={class:"custom-flex-46 custom-flex-xs-100"},VL={class:"bg-success px-2 py-2 d-flex justify-space-between handle"},BL={class:"custom-flex-46 custom-flex-xs-100"},HL={class:"custom-flex-46 custom-flex-xs-100"},WL={class:"bg-primary px-2 py-2 d-flex justify-space-between handle"},UL={class:"bg-primary px-2 py-2 d-flex justify-space-between"},jL={class:"d-flex w-100"},zL={class:"custom-flex-50"},YL={class:"custom-flex-50"},KL={class:"bg-primary px-2 py-2 d-flex justify-space-between handle"},QL={class:"text-white"},qL={class:"mb-3"},XL={class:"bg-grey-lighten-4 pa-3 rounded mb-3"},JL={class:"mb-1"},ZL={class:"mb-1"};function $L(n,i,e,t,r,o){const a=uh("Popper");return R(),N(rt,null,[h("div",null,[h("div",{class:Et(`d-flex flex-wrap text-center my-1 ${t.props.selectedPositionView.value=="ASSET_WISE"?"border-b":""}`)},[h("div",$A,[i[23]||(i[23]=h("b",null,"Net Buy Qty:",-1)),h("span",null,k(Number(t.inTotalBuyNetQuantity).toLocaleString("en-IN"))+" / ",1),i[24]||(i[24]=h("b",null,"Net Sell Qty:",-1)),h("span",null,k(Number(t.inTotalSellNetQuantity).toLocaleString("en-IN")),1),p(yr,{location:"end",transition:!1},{activator:v(({props:s})=>[p(_e,pt({icon:"bx-dots-horizontal-rounded",class:"cursor-pointer ml-2",color:"secondary",size:"small"},s),null,16)]),default:v(()=>[p(rr,null,{default:v(()=>[p(It,{class:"cursor-pointer custom-dropdown-hover border",onClick:t.openReversePositionModel},{default:v(()=>[p(Ci,null,{default:v(()=>[M(k(t.props.selectedPositionsData.value.length?"Reverse Selected Positions":"Reverse All Positions"),1)]),_:1})]),_:1})]),_:1})]),_:1})]),h("div",eL,[h("span",null,[i[25]||(i[25]=h("b",null,"MTM:",-1)),t.mtmLevelDetails.isMtmHidden?(R(),N("span",iL," (Hidden) ")):(R(),N("span",tL,[h("span",{class:Et(`font-weight-bold ${t.inTotalPnl<0?"text-error":"text-success"}`)},k(t.showHumanReadableMtm(t.inTotalPnl)),3)]))]),t.mtmLevelDetails.isTargetLevelSet||t.mtmLevelDetails.isStoplossLevelSet?(R(),N("span",rL,[i[30]||(i[30]=M(" (Target: ")),t.mtmLevelDetails.isTargetLevelSet?(R(),N("span",oL,[h("span",nL,[!t.mtmLevelDetails.isAutoTrailingLossEnable&&t.mtmLevelDetails.inInrDecPoint!=0?(R(),at(Dt,{key:0,location:"top"},{activator:v(({props:s})=>[p(_e,pt(s,{icon:"bx-minus-circle",color:"error",onClick:i[0]||(i[0]=l=>t.changeMtmLevel("TARGET",!1,1e3))}),null,16)]),default:v(()=>[i[26]||(i[26]=h("span",null,"Increase target",-1))]),_:1})):De("",!0),M(" "+k(t.mtmLevelDetails.isTargetLevelSet?t.mtmLevelDetails.inTarget:"-")+" ",1),!t.mtmLevelDetails.isAutoTrailingLossEnable&&t.mtmLevelDetails.inInrDecPoint!=0?(R(),at(Dt,{key:1,location:"top"},{activator:v(({props:s})=>[p(_e,pt(s,{icon:"bx-plus-circle",color:"success",onClick:i[1]||(i[1]=l=>t.changeMtmLevel("TARGET",!0,1e3))}),null,16)]),default:v(()=>[i[27]||(i[27]=h("span",null,"Decrease target",-1))]),_:1})):De("",!0)])])):(R(),N("span",aL," - ")),i[31]||(i[31]=M(" | Stoploss: ")),t.mtmLevelDetails.isStoplossLevelSet?(R(),N("span",sL,[h("span",lL,[!t.mtmLevelDetails.isAutoTrailingLossEnable&&t.mtmLevelDetails.inInrDecPoint!=0?(R(),at(Dt,{key:0,location:"top"},{activator:v(({props:s})=>[p(_e,pt(s,{icon:"bx-minus-circle",color:"error",onClick:i[2]||(i[2]=l=>t.changeMtmLevel("STOPLOSS",!1,1e3))}),null,16)]),default:v(()=>[i[28]||(i[28]=h("span",null,"Decrease stoploss",-1))]),_:1})):De("",!0),M(" "+k(t.mtmLevelDetails.inStoploss)+" ",1),!t.mtmLevelDetails.isAutoTrailingLossEnable&&t.mtmLevelDetails.inInrDecPoint!=0?(R(),at(Dt,{key:1,location:"top"},{activator:v(({props:s})=>[p(_e,pt(s,{icon:"bx-plus-circle",color:"success",onClick:i[3]||(i[3]=l=>t.changeMtmLevel("STOPLOSS",!0,1e3))}),null,16)]),default:v(()=>[i[29]||(i[29]=h("span",null,"Increase stoploss",-1))]),_:1})):De("",!0)])])):(R(),N("span",uL," - ")),i[32]||(i[32]=M(" ) "))])):De("",!0),p(a,null,{content:v(({close:s})=>[p(ui,{class:"text-sm text-start m-2"},{default:v(()=>[p(_p,null,{default:v(()=>[p(Jt,{class:"mb-3",density:"compact",label:"Set MTM Target",modelValue:t.tempMtmLevelDetails.inTarget,"onUpdate:modelValue":i[4]||(i[4]=l=>t.tempMtmLevelDetails.inTarget=l),type:"number",placeholder:"Enter your MTM target",onKeyup:Ei(()=>{s(),t.setMtmLevel()},["enter"])},null,8,["modelValue","onKeyup"]),p(Jt,{class:"mb-3",density:"compact",label:"Set MTM Loss",modelValue:t.tempMtmLevelDetails.inStoploss,"onUpdate:modelValue":i[5]||(i[5]=l=>t.tempMtmLevelDetails.inStoploss=l),type:"number",placeholder:"Enter your MTM loss",onKeyup:Ei(()=>{s(),t.setMtmLevel()},["enter"])},null,8,["modelValue","onKeyup"]),h("div",null,[i[35]||(i[35]=h("label",{for:"set_mtm_target",class:"text-primary text-lg"}," When MTM level triggers ",-1)),h("div",null,[p(pl,{modelValue:t.doAlertUserWhenMtmLevelHit,"onUpdate:modelValue":i[6]||(i[6]=l=>t.doAlertUserWhenMtmLevelHit=l),density:"compact"},{default:v(()=>[p(xr,{label:"Close all my position",value:!1}),p(xr,{label:"Show me alert",value:!0})]),_:1},8,["modelValue"])])]),h("div",pL,[p(or,{modelValue:t.tempMtmLevelDetails.isAutoTrailingLossEnable,"onUpdate:modelValue":i[7]||(i[7]=l=>t.tempMtmLevelDetails.isAutoTrailingLossEnable=l),label:"Set auto trailing loss",value:!0},null,8,["modelValue"])]),t.tempMtmLevelDetails.isAutoTrailingLossEnable?(R(),N("div",fL,[p(Jt,{class:"my-3",density:"compact",label:"MTM Auto Trailing loss step",modelValue:t.tempMtmLevelDetails.inAutoTrailingLossStep,"onUpdate:modelValue":i[8]||(i[8]=l=>t.tempMtmLevelDetails.inAutoTrailingLossStep=l),type:"number",placeholder:"Enter your MTM target",disabled:!0},null,8,["modelValue"])])):(R(),N("div",hL,[p(Jt,{class:"my-3",density:"compact",label:"Increment / Decrement Points",modelValue:t.tempMtmLevelDetails.inInrDecPoint,"onUpdate:modelValue":i[9]||(i[9]=l=>t.tempMtmLevelDetails.inInrDecPoint=l),type:"number",placeholder:"Enter your MTM target",onKeyup:Ei(()=>{s(),t.setMtmLevel()},["enter"])},null,8,["modelValue","onKeyup"])])),h("div",vL,[p(Le,{variant:"flat",onClick:()=>{s(),t.setMtmLevel()},class:"custom-flex-100"},{default:v(()=>[M(k(t.mtmLevelDetails.isTargetLevelSet||t.mtmLevelDetails.isStoplossLevelSet?"Edit MTM levels":"Set MTM levels"),1)]),_:2},1032,["onClick"])])]),_:2},1024)]),_:2},1024)]),default:v(()=>[t.mtmLevelDetails.isTargetLevelSet||t.mtmLevelDetails.isStoplossLevelSet?(R(),N("span",cL,[p(Dt,{location:"top"},{activator:v(({props:s})=>[p(_e,pt(s,{icon:"bx-pencil",class:"text-success cursor-pointer"}),null,16)]),default:v(()=>[i[33]||(i[33]=h("span",null,"Edit MTM level SL",-1))]),_:1})])):(R(),N("span",dL,[p(Dt,{location:"top"},{activator:v(({props:s})=>[p(_e,pt(s,{color:"error",size:"small",icon:"bx-lock",class:"mb-1"}),null,16)]),default:v(()=>[i[34]||(i[34]=h("span",null,"Set MTM level SL",-1))]),_:1})]))]),_:1}),t.mtmLevelDetails.isTargetLevelSet||t.mtmLevelDetails.isStoplossLevelSet?(R(),at(Dt,{key:1,location:"top"},{activator:v(({props:s})=>[t.mtmLevelDetails.isTargetLevelSet||t.mtmLevelDetails.isStoplossLevelSet?(R(),at(_e,pt({key:0},s,{icon:"bx-x-circle",class:"text-error cursor-pointer",onClick:i[10]||(i[10]=l=>t.removeMtmLevelSl())}),null,16)):De("",!0)]),default:v(()=>[i[36]||(i[36]=h("span",null,"Remove MTM level SL",-1))]),_:1})):De("",!0),t.isSaveColumnPositionChanged?(R(),at(Le,{key:2,variant:"flat",density:"compact",class:"text-none",onClick:t.saveColumnPosition},{default:v(()=>i[37]||(i[37]=[M(" Save column position ")])),_:1})):De("",!0)]),h("div",gL,[p(yr,{location:"top left",transition:!1},{activator:v(({props:s})=>[p(_e,pt({icon:"bx-cog",class:"cursor-pointer",color:"secondary",size:"small"},s),null,16)]),default:v(()=>[p(rr,null,{default:v(()=>[p(It,{class:"cursor-pointer custom-dropdown-hover",onClick:t.openPositionSetting},{default:v(()=>[p(Ci,null,{default:v(()=>i[38]||(i[38]=[M(" Column Setting ")])),_:1})]),_:1}),p(It,{class:"cursor-pointer custom-dropdown-hover",onClick:i[11]||(i[11]=s=>t.mtmLevelDetails.isMtmHidden=!t.mtmLevelDetails.isMtmHidden)},{default:v(()=>[p(Ci,null,{default:v(()=>[M(k(t.mtmLevelDetails.isMtmHidden?"Show MTM":"Hide MTM"),1)]),_:1})]),_:1})]),_:1})]),_:1})])],2)]),mt(p(t.AgGridVue,{style:Xo("height:"+(t.isDittoEnabledProp?"310px":"425px")),class:Et(`${t.global.name.value=="dark"?"ag-theme-balham-dark":"ag-theme-balham"}`),columnDefs:t.columnDefs,rowData:t.rowData,defaultColDef:t.defaultColDef,rowHeight:t.rowHeight,getRowId:t.getRowId,gridOptions:t.gridOptions,onGridReady:t.onGridReady,onGridSizeChanged:t.onGridSizeChanged,onFirstDataRendered:t.onFirstDataRendered,onSelectionChanged:t.onSelectionChanged,onColumnMoved:t.onColumnChanged},null,8,["style","class","columnDefs","rowData","defaultColDef","rowHeight","gridOptions"]),[[hi,e.selectedPositionView=="ALL"]]),(R(!0),N(rt,null,kt(Object.keys(t.rowDataAssetWise),s=>(R(),N(rt,null,[t.rowDataAssetWise[s]&&t.gridApiAssetWise.hasOwnProperty(s)?(R(),N(rt,{key:0},[mt(h("div",yL,[h("div",mL,[p(Di,null,{default:v(()=>[p(dt,{lg:"3",md:"4",sm:"6",cols:"12",class:"text-start custom-text-center-xs"},{default:v(()=>[i[39]||(i[39]=M(" Asset: ")),h("b",null,k(s)+": ",1),h("b",null,k(t.realTimeUnderlyingAssetData[s]?.inLtp),1),i[40]||(i[40]=M("  ")),t.realTimeUnderlyingAssetData[s]?.inLtp?(R(),N("span",{key:0,class:Et(t.realTimeUnderlyingAssetData[s]?.inLtp>t.realTimeUnderlyingAssetData[s]?.inPrevDayClose?"text-success":"text-error")},[h("b",null,"("+k(t.realTimeUnderlyingAssetData[s]?.inLtpDiff)+"/"+k(t.realTimeUnderlyingAssetData[s]?.inLtpDiffInPercentage)+"%)",1)],2)):De("",!0)]),_:2},1024),p(dt,{lg:"3",md:"2",sm:"6",cols:"6",class:"text-start custom-text-end-sm custom-text-start-xs"},{default:v(()=>[i[41]||(i[41]=h("b",null,"Net Buy Qty:",-1)),h("span",null,k(Number(t.inTotalBuyNetQuantityAssetWise[s]).toLocaleString("en-IN"))+" / ",1),i[42]||(i[42]=h("b",null,"Net Sell Qty:",-1)),h("span",null,k(Number(t.inTotalSellNetQuantityAssetWise[s]).toLocaleString("en-IN")),1)]),_:2},1024),p(dt,{lg:"2",md:"2",sm:"6",cols:"6",class:"text-end custom-text-start-sm"},{default:v(()=>[h("span",null,[i[43]||(i[43]=h("b",null,"MTM:",-1)),t.mtmLevelDetails.isMtmHidden?(R(),N("span",SL," (Hidden) ")):(R(),N("span",CL,[h("span",{class:Et(`font-weight-bold ${t.inTotalPnlAssetWise[s]<0?"text-error":"text-success"}`)},k(t.showHumanReadableMtm(t.inTotalPnlAssetWise[s])),3)]))]),t.mtmLevelDetailsAssetWise[s].isTargetLevelSet||t.mtmLevelDetailsAssetWise[s].isStoplossLevelSet?(R(),N("span",wL,[i[48]||(i[48]=M(" (Target: ")),t.mtmLevelDetailsAssetWise[s].isTargetLevelSet?(R(),N("span",TL,[h("span",OL,[!t.mtmLevelDetailsAssetWise[s].isAutoTrailingLossEnable&&t.mtmLevelDetailsAssetWise[s].inInrDecPoint!=0?(R(),at(Dt,{key:0,location:"top"},{activator:v(({props:l})=>[p(_e,pt({ref_for:!0},l,{icon:"bx-minus-circle",color:"error",onClick:u=>t.changeMtmLevelAssetWise("TARGET",!1,1e3,s)}),null,16,["onClick"])]),default:v(()=>[i[44]||(i[44]=h("span",null,"Increase target",-1))]),_:2},1024)):De("",!0),M(" "+k(t.mtmLevelDetailsAssetWise[s].isTargetLevelSet?t.mtmLevelDetailsAssetWise[s].inTarget:"-")+" ",1),!t.mtmLevelDetailsAssetWise[s].isAutoTrailingLossEnable&&t.mtmLevelDetailsAssetWise[s].inInrDecPoint!=0?(R(),at(Dt,{key:1,location:"top"},{activator:v(({props:l})=>[p(_e,pt({ref_for:!0},l,{icon:"bx-plus-circle",color:"success",onClick:u=>t.changeMtmLevelAssetWise("TARGET",!0,1e3,s)}),null,16,["onClick"])]),default:v(()=>[i[45]||(i[45]=h("span",null,"Decrease target",-1))]),_:2},1024)):De("",!0)])])):(R(),N("span",PL," - ")),i[49]||(i[49]=M(" | Stoploss: ")),t.mtmLevelDetailsAssetWise[s].isStoplossLevelSet?(R(),N("span",EL,[h("span",_L,[!t.mtmLevelDetailsAssetWise[s].isAutoTrailingLossEnable&&t.mtmLevelDetailsAssetWise[s].inInrDecPoint!=0?(R(),at(Dt,{key:0,location:"top"},{activator:v(({props:l})=>[p(_e,pt({ref_for:!0},l,{icon:"bx-minus-circle",color:"error",onClick:u=>t.changeMtmLevelAssetWise("STOPLOSS",!1,1e3,s)}),null,16,["onClick"])]),default:v(()=>[i[46]||(i[46]=h("span",null,"Decrease stoploss",-1))]),_:2},1024)):De("",!0),M(" "+k(t.mtmLevelDetailsAssetWise[s].inStoploss)+" ",1),!t.mtmLevelDetailsAssetWise[s].isAutoTrailingLossEnable&&t.mtmLevelDetailsAssetWise[s].inInrDecPoint!=0?(R(),at(Dt,{key:1,location:"top"},{activator:v(({props:l})=>[p(_e,pt({ref_for:!0},l,{icon:"bx-plus-circle",color:"success",onClick:u=>t.changeMtmLevelAssetWise("STOPLOSS",!0,1e3,s)}),null,16,["onClick"])]),default:v(()=>[i[47]||(i[47]=h("span",null,"Increase stoploss",-1))]),_:2},1024)):De("",!0)])])):(R(),N("span",bL," - ")),i[50]||(i[50]=M(" ) "))])):De("",!0),p(a,null,{content:v(({close:l})=>[p(ui,{class:"text-sm text-start m-2"},{default:v(()=>[p(_p,null,{default:v(()=>[p(Jt,{class:"mb-3",density:"compact",label:"Set MTM Target",modelValue:t.tempMtmLevelDetailsAssetWise[s].inTarget,"onUpdate:modelValue":u=>t.tempMtmLevelDetailsAssetWise[s].inTarget=u,type:"number",placeholder:"Enter your MTM target",onKeyup:Ei(()=>{l(),t.setMtmLevel()},["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"]),p(Jt,{class:"mb-3",density:"compact",label:"Set MTM Loss",modelValue:t.tempMtmLevelDetailsAssetWise[s].inStoploss,"onUpdate:modelValue":u=>t.tempMtmLevelDetailsAssetWise[s].inStoploss=u,type:"number",placeholder:"Enter your MTM loss",onKeyup:Ei(()=>{l(),t.setMtmLevel()},["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"]),h("div",null,[i[53]||(i[53]=h("label",{for:"set_mtm_target",class:"text-primary text-lg"}," When MTM level triggers ",-1)),h("div",null,[p(pl,{modelValue:t.doAlertUserWhenMtmLevelHitAssetWise[s],"onUpdate:modelValue":u=>t.doAlertUserWhenMtmLevelHitAssetWise[s]=u,density:"compact"},{default:v(()=>[p(xr,{label:"Close all my position",value:!1}),p(xr,{label:"Show me alert",value:!0})]),_:2},1032,["modelValue","onUpdate:modelValue"])])]),h("div",xL,[p(or,{modelValue:t.tempMtmLevelDetailsAssetWise[s].isAutoTrailingLossEnable,"onUpdate:modelValue":u=>t.tempMtmLevelDetailsAssetWise[s].isAutoTrailingLossEnable=u,label:"Set auto trailing loss",value:!0},null,8,["modelValue","onUpdate:modelValue"])]),t.tempMtmLevelDetailsAssetWise[s].isAutoTrailingLossEnable?(R(),N("div",AL,[p(Jt,{class:"my-3",density:"compact",label:"MTM Auto Trailing loss step",modelValue:t.tempMtmLevelDetailsAssetWise[s].inAutoTrailingLossStep,"onUpdate:modelValue":u=>t.tempMtmLevelDetailsAssetWise[s].inAutoTrailingLossStep=u,type:"number",placeholder:"Enter your MTM target",disabled:!0},null,8,["modelValue","onUpdate:modelValue"])])):(R(),N("div",LL,[p(Jt,{class:"my-3",density:"compact",label:"Increment / Decrement Points",modelValue:t.tempMtmLevelDetailsAssetWise[s].inInrDecPoint,"onUpdate:modelValue":u=>t.tempMtmLevelDetailsAssetWise[s].inInrDecPoint=u,type:"number",placeholder:"Enter your MTM target",onKeyup:Ei(()=>{l(),t.setMtmLevelAssetWise(s)},["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])])),h("div",ML,[p(Le,{variant:"flat",onClick:()=>{l(),t.setMtmLevelAssetWise(s)},class:"custom-flex-100"},{default:v(()=>[M(k(t.mtmLevelDetailsAssetWise[s].isTargetLevelSet||t.mtmLevelDetailsAssetWise[s].isStoplossLevelSet?"Edit MTM levels":"Set MTM levels"),1)]),_:2},1032,["onClick"])])]),_:2},1024)]),_:2},1024)]),default:v(()=>[t.mtmLevelDetailsAssetWise[s].isTargetLevelSet||t.mtmLevelDetailsAssetWise[s].isStoplossLevelSet?(R(),N("span",DL,[p(Dt,{location:"top"},{activator:v(({props:l})=>[p(_e,pt({ref_for:!0},l,{icon:"bx-pencil",class:"text-success cursor-pointer"}),null,16)]),default:v(()=>[i[51]||(i[51]=h("span",null,"Edit MTM level SL",-1))]),_:1})])):(R(),N("span",RL,[p(Dt,{location:"top"},{activator:v(({props:l})=>[p(_e,pt({ref_for:!0},l,{color:"error",size:"small",icon:"bx-lock",class:"mb-1"}),null,16)]),default:v(()=>[i[52]||(i[52]=h("span",null,"Set MTM level SL",-1))]),_:1})]))]),_:2},1024),t.mtmLevelDetailsAssetWise[s].isTargetLevelSet||t.mtmLevelDetailsAssetWise[s].isStoplossLevelSet?(R(),at(Dt,{key:1,location:"top"},{activator:v(({props:l})=>[t.mtmLevelDetailsAssetWise[s].isTargetLevelSet||t.mtmLevelDetailsAssetWise[s].isStoplossLevelSet?(R(),at(_e,pt({key:0,ref_for:!0},l,{icon:"bx-x-circle",class:"text-error cursor-pointer",onClick:u=>t.removeMtmLevelSlAssetWise(s)}),null,16,["onClick"])):De("",!0)]),default:v(()=>[i[54]||(i[54]=h("span",null,"Remove MTM level SL",-1))]),_:2},1024)):De("",!0)]),_:2},1024),p(dt,{lg:"4",md:"4",sm:"6",cols:"12",class:"text-end custom-text-end-sm"},{default:v(()=>[p(Le,{variant:"outlined",density:"compact",class:"custom-width-xs-100",onClick:l=>t.closeAllPositionForSingleAsset(s),style:{"font-size":"13px"}},{default:v(()=>[M(" Close "+k(t.selectedPositionRowsAssetWise[s].length?"selected":"all")+" position for "+k(s),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)])],512),[[hi,e.selectedPositionView=="ASSET_WISE"]]),mt(p(t.AgGridVue,{style:"height:175px",class:Et(`${t.global.name.value=="dark"?"ag-theme-balham-dark":"ag-theme-balham"} custom-resizable-content`),columnDefs:t.columnDefs,rowData:t.rowDataAssetWise[s],defaultColDef:t.defaultColDef,rowHeight:t.rowHeight,getRowId:t.getRowId,gridOptions:t.gridOptionsAssetWise[s],onGridReady:l=>t.onGridAssetWiseReady(l,s),onGridSizeChanged:l=>t.onGridAssetWiseSizeChanged(s),onFirstDataRendered:t.onFirstDataRendered,onSelectionChanged:l=>t.onSelectionChangedAssetWise(l,s)},null,8,["class","columnDefs","rowData","defaultColDef","rowHeight","gridOptions","onGridReady","onGridSizeChanged","onSelectionChanged"]),[[hi,e.selectedPositionView=="ASSET_WISE"]])],64)):De("",!0)],64))),256)),p(Ai,{modelValue:t.stopLossModal,"onUpdate:modelValue":i[16]||(i[16]=s=>t.stopLossModal=s),class:"v-dialog-sm"},{default:v(()=>[p(t.DraggableResizableVue,{className:"",resizable:!1,"drag-handle":".handle"},{default:v(()=>[p(ui,null,{default:v(()=>[h("div",NL,[i[55]||(i[55]=h("h3",{class:"text-white"},"Set Stoploss",-1)),p(_e,{class:"mt-1",icon:"bx-x-circle",onClick:t.hideStoplossModal})]),p(Ft,{class:"d-flex flex-wrap justify-space-between"},{default:v(()=>[h("div",FL,[i[56]||(i[56]=h("label",null,"Do you want to set stoploss? ",-1)),p(or,{label:"Yes, Set Stoploss",value:!0,modelValue:t.slDetails.isSlSet,"onUpdate:modelValue":i[12]||(i[12]=s=>t.slDetails.isSlSet=s),disabled:!0},null,8,["modelValue"])]),h("div",IL,[i[57]||(i[57]=h("label",null,"Stoploss",-1)),p(Jt,{density:"compact",modelValue:t.slDetails.inSl,"onUpdate:modelValue":i[13]||(i[13]=s=>t.slDetails.inSl=s),type:"number",placeholder:"Enter stoploss price",disabled:!t.slDetails.isSlSet,onKeyup:Ei(t.addTrailingStopLoss,["enter"])},null,8,["modelValue","disabled"])])]),_:1}),p(Ft,{class:"d-flex flex-wrap justify-space-between"},{default:v(()=>[h("div",kL,[i[58]||(i[58]=h("label",null,"Do you want to set trailing stoploss?",-1)),p(or,{color:"error",label:"Yes, Set Trailing Stoploss",value:!0,modelValue:t.slDetails.isTrailingStoplossSet,"onUpdate:modelValue":i[14]||(i[14]=s=>t.slDetails.isTrailingStoplossSet=s)},null,8,["modelValue"])]),h("div",GL,[i[59]||(i[59]=h("label",null,"Trailing stoploss step",-1)),p(Jt,{density:"compact",modelValue:t.slDetails.inTrailingStoplossStep,"onUpdate:modelValue":i[15]||(i[15]=s=>t.slDetails.inTrailingStoplossStep=s),type:"number",placeholder:"Enter trailing stoploss step",disabled:!0},null,8,["modelValue"])])]),_:1}),p(Ft,{class:"d-flex justify-end gap-2"},{default:v(()=>[p(Le,{class:"custom-flex-50",color:"secondary",variant:"tonal",onClick:t.hideStoplossModal},{default:v(()=>i[60]||(i[60]=[M(" Cancel ")])),_:1}),p(Le,{color:"error",class:"custom-flex-50",onClick:t.addTrailingStopLoss},{default:v(()=>i[61]||(i[61]=[M(" Add Stoploss ")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),p(Ai,{modelValue:t.targetModal,"onUpdate:modelValue":i[19]||(i[19]=s=>t.targetModal=s),class:"v-dialog-sm"},{default:v(()=>[p(t.DraggableResizableVue,{className:"",resizable:!1,"drag-handle":".handle"},{default:v(()=>[p(ui,null,{default:v(()=>[h("div",VL,[i[62]||(i[62]=h("h3",{class:"text-white"},"Set Target",-1)),p(_e,{class:"mt-1",icon:"bx-x-circle",onClick:t.hideTargetModal})]),p(Ft,{class:"d-flex flex-wrap justify-space-between"},{default:v(()=>[h("div",BL,[i[63]||(i[63]=h("label",null,"Do you want to set target?",-1)),p(or,{label:"Yes, Set Target",value:!0,modelValue:t.targetDetails.isTargetSet,"onUpdate:modelValue":i[17]||(i[17]=s=>t.targetDetails.isTargetSet=s),disabled:!0},null,8,["modelValue"])]),h("div",HL,[i[64]||(i[64]=h("label",null,"Target",-1)),p(Jt,{density:"compact",modelValue:t.targetDetails.inTarget,"onUpdate:modelValue":i[18]||(i[18]=s=>t.targetDetails.inTarget=s),type:"number",placeholder:"Enter target price",disabled:!t.targetDetails.isTargetSet,onKeyup:Ei(t.addTarget,["enter"])},null,8,["modelValue","disabled"])])]),_:1}),p(Ft,{class:"d-flex justify-end gap-2"},{default:v(()=>[p(Le,{class:"custom-flex-50",color:"secondary",variant:"tonal",onClick:t.hideTargetModal},{default:v(()=>i[65]||(i[65]=[M(" Cancel ")])),_:1}),p(Le,{color:"success",class:"custom-flex-50",onClick:t.addTarget},{default:v(()=>i[66]||(i[66]=[M(" Add Target ")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),p(Ai,{modelValue:t.showMtmLevelHitModal,"onUpdate:modelValue":i[20]||(i[20]=s=>t.showMtmLevelHitModal=s),class:"v-dialog-sm",persistent:!0,"drag-handle":".handle"},{default:v(()=>[p(t.DraggableResizableVue,{className:"",resizable:!1},{default:v(()=>[p(ui,null,{default:v(()=>[h("div",WL,[i[67]||(i[67]=h("h3",{class:"text-white"},"MTM Level hit",-1)),p(_e,{class:"mt-1",icon:"bx-x-circle",onClick:t.hideMtmLevelModel})]),p(Ft,null,{default:v(()=>[h("p",null,k(t.stAlertMsgWhenMtmLevelHit),1)]),_:1}),p(Ft,{class:"d-flex flex-wrap justify-end gap-2"},{default:v(()=>[p(Le,{class:"custom-flex-48 custom-flex-xs-100",color:"secondary",variant:"tonal",onClick:t.hideMtmLevelModel},{default:v(()=>i[68]||(i[68]=[M(" No, Keep my position open ")])),_:1}),p(Le,{class:"custom-flex-48 custom-flex-xs-100",onClick:t.closeAllPositionMtmLevelModel},{default:v(()=>i[69]||(i[69]=[M(" Yes, Close all my position ")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),p(Ai,{modelValue:t.positionSettingModel,"onUpdate:modelValue":i[21]||(i[21]=s=>t.positionSettingModel=s),class:"v-dialog-sm",persistent:!0,scrollable:"","max-width":"350"},{default:v(()=>[p(ui,null,{default:v(()=>[h("div",UL,[i[70]||(i[70]=h("h3",{class:"text-white"},"Column Setting",-1)),p(_e,{class:"mt-1",icon:"bx-x-circle",onClick:t.hidePositionSetting})]),p(Ft,null,{default:v(()=>[i[71]||(i[71]=h("div",{class:"d-flex w-100 mb-4"},[h("div",{class:"custom-flex-50"},[h("b",{class:""},"Column")]),h("div",{class:"custom-flex-50"},[h("b",{class:""},"Select Column")])],-1)),(R(!0),N(rt,null,kt(t.columnDefs,s=>(R(),N("div",jL,[h("div",zL,k(s?.headerName),1),h("div",YL,[p(or,{modelValue:t.selectedColumn[s?.field].columnVisible,"onUpdate:modelValue":l=>t.selectedColumn[s?.field].columnVisible=l},null,8,["modelValue","onUpdate:modelValue"])])]))),256))]),_:1}),p(Ft,{class:"d-flex flex-wrap justify-end gap-2 custom-no-scroll"},{default:v(()=>[p(Le,{class:"custom-flex-48 custom-flex-xs-100",color:"secondary",variant:"tonal",onClick:t.hidePositionSetting},{default:v(()=>i[72]||(i[72]=[M(" Cancel ")])),_:1}),p(Le,{class:"custom-flex-48 custom-flex-xs-100",onClick:t.savePositionSelectedColumn},{default:v(()=>i[73]||(i[73]=[M(" Save Setting ")])),_:1}),p(Le,{variant:"outlined",class:"custom-flex-98 custom-reset-button",onClick:t.resetColumnPositionAndColumnSetting},{default:v(()=>i[74]||(i[74]=[M(" Reset Column Setting and position ")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),p(Ai,{modelValue:t.reversePositionModel,"onUpdate:modelValue":i[22]||(i[22]=s=>t.reversePositionModel=s),onAfterLeave:t.hideReversePositionModel,class:"v-dialog-sm"},{default:v(()=>[p(t.DraggableResizableVue,{className:"",resizable:!1,"drag-handle":".handle"},{default:v(()=>[p(ui,null,{default:v(()=>[h("div",KL,[h("h3",QL,k(t.props.selectedPositionsData.value.length?"Reverse Selected Positions":"Reverse All Positions"),1),p(_e,{class:"mt-1",icon:"bx-x-circle",onClick:t.hideReversePositionModel})]),p(Ft,null,{default:v(()=>[i[76]||(i[76]=h("p",{class:"text-warning font-weight-bold mb-3"}," Reverse Position Confirmation",-1)),h("p",qL,"You are about to reverse "+k(t.props.selectedPositionsData.value.length?"selected":"all")+" positions. This will:",1),h("div",XL,[h("p",JL," Close "+k(t.props.selectedPositionsData.value.length?"selected":"all")+" current positions ",1),h("p",ZL," Cancel "+k(t.props.selectedPositionsData.value.length?"selected":"all")+" stoploss & target orders",1),i[75]||(i[75]=h("p",{class:"mb-0"}," Create opposite positions with same quantities",-1))]),i[77]||(i[77]=h("p",{class:"text-error font-weight-bold"},"This action is irreversible. Continue?",-1))]),_:1}),p(Ft,{class:"d-flex flex-wrap justify-end gap-2"},{default:v(()=>[p(Le,{class:"custom-flex-48 custom-flex-xs-100",color:"secondary",variant:"tonal",onClick:t.hideReversePositionModel},{default:v(()=>i[78]||(i[78]=[M(" Cancel ")])),_:1}),p(Le,{class:"custom-flex-48 custom-flex-xs-100",onClick:t.reversePositionSubmit},{default:v(()=>i[79]||(i[79]=[M(" Yes ")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}const e0={__name:"Positions",props:["isMtmThresholdAvailable","inMtmThreshold","inMtmThresholdPercentage","stTradingWindowId","positionsData","setSelectedPositions","selectedPositionsData","showMessageOnOnlickWindow","getActiveTabData","disableOneClickShortcutsFn","setPredefinedTarget","inPredefinedTarget","stTypeOfPredefinedTarget","setPredefinedSl","inPredefinedSl","isTrailingStoplossSet","inTrailingStoplossStep","stTypeOfPredefinedSl","setBuySellSymbol","cancelAllPositionButtonLoading","selectedClosePositionOrderType","setCloseAllPositionButtonLoading","cancelAllPositions","socket","brokerData","removeMtmLevelSlFlag","selectedTypeOfPositions","isDittoEnabled","openLimitOrderModalForPosition","openChangeStrikeModal","cancelAllOrder","checkCurrentPosition","selectedPositionView","isMtmThresholdAvailable","inMtmThreshold","inMtmThresholdPercentage","showMtmThresholdAlert","isMtmThresholdShowed","setMtmThresholdAlert","allAssetWiseSlAndTarget","convertOptionsTypeWithSameLegDistance"],setup(n,{expose:i}){i(),he.tz.setDefault("Asia/Kolkata");const{global:e}=Yi(),t=pi(),r=n,o=_t(r),a=g(o.isDittoEnabled),s=g(!1),l=g(!1),u=g(o.brokerData.value?o.brokerData.value.stIdentificationToken:null),c=g([{field:"stSymbolName",headerName:"Symbol Name",sortable:!0,hide:!1,minWidth:250,cellStyle:{},cellRenderer:$f,cellRendererParams:{clicked:O=>{bo(O)}},headerCheckboxSelection:!0,checkboxSelection:!0,showDisabledCheckboxes:!0},{field:"stSide",headerName:"Side",sortable:!0,sort:"desc",hide:!1,minWidth:50,cellStyle:{},cellRenderer:O=>O.data.stSide!=null?O.data.stSide:"-"},{field:"inNetQuantity",headerName:"Net Qty",sortable:!0,hide:!1,minWidth:70,cellStyle:{},cellClass:O=>Number(O.data.inNetQuantity)>0?"text-success":Number(O.data.inNetQuantity)<0?"text-error":"",cellRenderer:O=>O.data.inNetQuantity},{field:"inNetAverage",headerName:"Avg Price",sortable:!1,hide:!1,minWidth:90,cellStyle:{},cellRenderer:O=>Number(O.data.inNetAverage).toFixed(2)},{field:"inLtp",headerName:"LTP",sortable:!1,hide:!1,minWidth:95,cellStyle:{},cellRenderer:O=>O.data.inLtp},{field:"inSl",headerName:"SL",sortable:!1,hide:!1,minWidth:135,cellStyle:{},cellRenderer:Xf,cellRendererParams:{clicked:(O,W,te)=>{de(O,W,te)}}},{field:"inSlButton",headerName:"Set SL",sortable:!1,hide:!1,minWidth:90,cellStyle:{},cellRenderer:qf,cellRendererParams:{clicked:(O,W)=>{W?C(O):Fe(O)},changeSlClick:(O,W)=>{Tt(O,W)}}},{field:"inTarget",headerName:"Target",sortable:!1,hide:!1,minWidth:120,cellStyle:{},cellRenderer:Zf,cellRendererParams:{clicked:(O,W,te)=>{co(O,W,te)}}},{field:"inTargetButton",headerName:"Set Target",sortable:!1,hide:!1,minWidth:110,cellStyle:{},cellRenderer:Jf,cellRendererParams:{clicked:(O,W)=>{W?pe(O):Vt(O)}}},{field:"inRealizedProfit",headerName:"R. P&L",sortable:!0,hide:!1,minWidth:100,cellStyle:{},cellClass:O=>Number(O.data.inRealizedProfit)>0?"text-success":Number(O.data.inRealizedProfit)<0?"text-error":"",cellRenderer:O=>O.data.inRealizedProfit!=null?Number(O.data.inRealizedProfit).toFixed(2):0},{field:"inUnRealizedProfit",headerName:"UR. P&L",sortable:!0,hide:!1,minWidth:100,cellStyle:{},cellClass:O=>Number(O.data.inUnRealizedProfit)>0?"text-success":Number(O.data.inUnRealizedProfit)<0?"text-error":"",cellRenderer:O=>O.data.inNetQuantity!=0?Number(O.data.inUnRealizedProfit).toFixed(2):O.data.inUnRealizedProfit},{field:"inProfitLoss",headerName:"P&L",sortable:!0,hide:!1,minWidth:100,cellStyle:{},cellClass:O=>Number(O.data.inProfitLoss)>0?"text-success":Number(O.data.inProfitLoss)<0?"text-error":"",cellRenderer:O=>Number(O.data.inProfitLoss)},{field:"stActionColumn",headerName:"Action",sortable:!1,hide:!1,minWidth:80,cellStyle:{},cellRenderer:Qf,cellRendererParams:{clicked:(O,W=!0)=>{O.isCancelAllPending?o.cancelAllOrder.value("CANCEL_ALL_PENDING_ORDERS_OF_CURRENT_POSITION",!0,O.stSymbolName):Ui(O,"CLOSE_SINGLE_POSITION_BUTTON",W)},showMessage:(O,W)=>{t.toastMessage({color:O,message:W})}}},{field:"inBuyQuantity",headerName:"Buy Qty",sortable:!1,hide:!1,minWidth:60,cellStyle:{},cellRenderer:O=>Number(O.data.inBuyQuantity)},{field:"inBuyPrice",headerName:"Buy Price",sortable:!1,hide:!1,minWidth:80,cellStyle:{},cellRenderer:O=>Number(O.data.inBuyPrice)!=0?Number(O.data.inBuyPrice).toFixed(2):Number(O.data.inBuyPrice)},{field:"inSellPrice",headerName:"Sell Price",sortable:!1,hide:!1,minWidth:80,cellStyle:{},cellRenderer:O=>Number(O.data.inSellPrice)!=0?Number(O.data.inSellPrice).toFixed(2):Number(O.data.inSellPrice)},{field:"inSellQuantity",headerName:"Sell Qty",sortable:!1,hide:!1,minWidth:60,cellStyle:{},cellRenderer:O=>Number(O.data.inSellQuantity)},{field:"stProductType",headerName:"Product",sortable:!0,hide:!1,minWidth:80,cellStyle:{}}]),d=g({stSymbolName:{columnVisible:!0,position:0},stSide:{columnVisible:!0,position:1},inNetQuantity:{columnVisible:!0,position:2},inNetAverage:{columnVisible:!0,position:3},inLtp:{columnVisible:!0,position:4},inSl:{columnVisible:!0,position:5},inSlButton:{columnVisible:!0,position:6},inTarget:{columnVisible:!0,position:7},inTargetButton:{columnVisible:!0,position:8},inRealizedProfit:{columnVisible:!0,position:9},inUnRealizedProfit:{columnVisible:!0,position:10},inProfitLoss:{columnVisible:!0,position:11},stActionColumn:{columnVisible:!0,position:12},inBuyQuantity:{columnVisible:!0,position:13},inBuyPrice:{columnVisible:!0,position:14},inSellPrice:{columnVisible:!0,position:15},inSellQuantity:{columnVisible:!0,position:16},stProductType:{columnVisible:!0,position:17}}),f=g([]),y=g([]),S=g({}),w=g([]),E=g({}),_=g({}),L=g({}),P=g(null),V=g({}),ne=g(null),ee=g(null),re=g(null),F=g({}),U=g({}),Y=g({}),K=g(null),Ce=g({}),Q=g(null),Ne=g({}),xe=g({isSlSet:!0,inSl:null,isTrailingStoplossSet:!1,inTrailingStoplossStep:1}),fe=g({}),q=g({isTargetSet:!0,inTarget:null}),Pe=g({}),Se=g({isMtmHidden:!1,isTargetLevelSet:!1,isStoplossLevelSet:!1,inTarget:null,inStoploss:null,inInrDecPoint:0,isAutoTrailingLossEnable:!1,inMtmWhenTrailingSet:0,inAutoTrailingLossStep:1}),ge=g({}),le=g({isMtmHidden:!1,isTargetLevelSet:!1,isStoplossLevelSet:!1,inTarget:null,inStoploss:null,inInrDecPoint:0,isAutoTrailingLossEnable:!1,inMtmWhenTrailingSet:0,inAutoTrailingLossStep:1}),ie=g({}),ye=g({}),Re=g({}),$=g(!1),Qe=g({}),Ge=g("Your MTM alert has been triggered."),et=g({}),Je=g(!1),it=g({}),jt=g({}),Si=g(!1),Kt=g({}),fi=g(!1),gi=g({initialWidth:90,sortable:!1,resizable:!0}),tt=g(null),ae=g({}),G=g(null),H=g({}),Ee=g(30),He=O=>O.data.stSymbolName+"_"+O.data.stProductType,Ae=g({rowSelection:"multiple",suppressCellFocus:!0,suppressRowClickSelection:!0,isRowSelectable:O=>!!(O.data&&!isNaN(O.data.inNetQuantity)&&O.data.inNetQuantity!=0)}),Lt=g({}),ut=g(null),Ri=g({}),Gi=g({}),me=g({}),fr=g(!1);Gt(async()=>{y.value=[...o.positionsData.value],Ro(),setTimeout(()=>{ti()},50),o.socket.value.io.on("error",O=>{console.log("position socket error:"),console.log(O)}),o.socket.value.io.on("reconnect",O=>{Pt()})}),Ke(o.brokerData,(O,W)=>{u.value=O?O.stIdentificationToken:null,ws()},{deep:!0}),Ke(o.checkCurrentPosition,(O,W)=>{lt()},{deep:!0}),Ke(o.positionsData,async(O,W)=>{await Ht(),E.value={};let te={};Object.keys(S.value).forEach(Me=>{te[Me]=[]}),setTimeout(()=>{for(let j=0;j<O.length;j++){const Te=O[j].stSymbolName+"_"+O[j].stProductType,Ve=it.value[O[j].stSymbolName]?.stAssetName;let qe={stAssetName:"ALL",setPredefinedSl:o.setPredefinedSl.value,inPredefinedSl:o.inPredefinedSl.value,isTrailingStoplossSet:o.isTrailingStoplossSet.value,inTrailingStoplossStep:o.inTrailingStoplossStep.value,stTypeOfPredefinedSl:o.stTypeOfPredefinedSl.value,setPredefinedTarget:o.setPredefinedTarget.value,inPredefinedTarget:o.inPredefinedTarget.value,stTypeOfPredefinedTarget:o.stTypeOfPredefinedTarget.value};if(o.allAssetWiseSlAndTarget.value!=null&&o.allAssetWiseSlAndTarget.value[Ve]!=null&&o.allAssetWiseSlAndTarget.value[Ve]!=null&&(qe={...o.allAssetWiseSlAndTarget.value[Ve]}),E.value[O[j].stSymbolName]==null&&(E.value[O[j].stSymbolName]=[]),E.value[O[j].stSymbolName].push(j),_.value[O[j].stSymbolName]=[],ye.value[Te]!=null)O[j].inNetQuantity!=0?(O[j].isSlSet=ye.value[Te].isSlSet,O[j].inSl=ye.value[Te].inSl,O[j].isTrailingStoplossSet=ye.value[Te].isTrailingStoplossSet,O[j].inTrailingStoplossStep=ye.value[Te].inTrailingStoplossStep):delete ye.value[Te];else if(qe.setPredefinedSl&&Number(qe.inPredefinedSl)>0&&O[j].inNetQuantity!=0){let Ct=!1,st=0;if(O[j].stSide=="BUY"){if(qe.stTypeOfPredefinedSl=="ABSOLUTE_POINTS")st=Number(O[j].inLtp)-Number(qe.inPredefinedSl);else if(qe.stTypeOfPredefinedSl=="PERCENTAGE"){const Pi=Number(O[j].inLtp)*Number(qe.inPredefinedSl)/100;st=Number(O[j].inLtp)-Math.round(Pi*20)/20,st=st>=.05?st:.05}}else if(qe.stTypeOfPredefinedSl=="ABSOLUTE_POINTS")st=Number(O[j].inLtp)+Number(qe.inPredefinedSl);else if(qe.stTypeOfPredefinedSl=="PERCENTAGE"){const Pi=Number(O[j].inLtp)*Number(qe.inPredefinedSl)/100;st=Number(O[j].inLtp)+Math.round(Pi*20)/20}if(st>0&&(Ct=!0,st=Number(st.toFixed(2))),Ct){const Pi=O[j].stSymbolName+"_"+O[j].stProductType;ye.value[Pi]={isSlSet:!0,inSl:st,stSymbolName:O[j].stSymbolName,stProductType:O[j].stProductType,isTrailingStoplossSet:qe.isTrailingStoplossSet,inTrailingStoplossStep:qe.inTrailingStoplossStep,inLtpWhenTslSet:O[j].inLtp},O[j].isSlSet=ye.value[Pi].isSlSet,O[j].inSl=ye.value[Pi].inSl,O[j].isTrailingStoplossSet=ye.value[Pi].isTrailingStoplossSet,O[j].inTrailingStoplossStep=ye.value[Pi].inTrailingStoplossStep}}if(Re.value[Te]!=null)O[j].inNetQuantity!=0?(O[j].isTargetSet=Re.value[Te].isTargetSet,O[j].inTarget=Re.value[Te].inTarget):delete Re.value[Te];else if(qe.setPredefinedTarget&&Number(qe.inPredefinedTarget)>0&&O[j].inNetQuantity!=0){let Ct=!1,st=0;if(O[j].stSide=="BUY"){if(qe.stTypeOfPredefinedTarget=="ABSOLUTE_POINTS")st=Number(O[j].inLtp)+Number(qe.inPredefinedTarget);else if(qe.stTypeOfPredefinedTarget=="PERCENTAGE"){const Pi=Number(O[j].inLtp)*Number(qe.inPredefinedTarget)/100;st=Number(O[j].inLtp)+Math.round(Pi*20)/20}}else if(qe.stTypeOfPredefinedTarget=="ABSOLUTE_POINTS")st=Number(O[j].inLtp)-Number(qe.inPredefinedTarget);else if(qe.stTypeOfPredefinedTarget=="PERCENTAGE"){const Pi=Number(O[j].inLtp)*Number(qe.inPredefinedTarget)/100;st=Number(O[j].inLtp)-Math.round(Pi*20)/20,st=st>=.05?st:.05}if(st>0&&(Ct=!0),Ct){const Pi=O[j].stSymbolName+"_"+O[j].stProductType;Re.value[Pi]={isTargetSet:!0,inTarget:st,stSymbolName:O[j].stSymbolName,stProductType:O[j].stProductType},O[j].isTargetSet=Re.value[Pi].isTargetSet,O[j].inTarget=Number(Re.value[Pi].inTarget)}}te[Ve]||(te[Ve]=[]),te[Ve].push(JSON.parse(JSON.stringify(O[j])))}const Me=Object.keys(te);for(let j=0;j<Me.length;j++){const Te=Me[j];if(te[Te].length>0)for(let Ve=0;Ve<te[Te].length;Ve++){const qe=te[Te][Ve];_.value[qe.stSymbolName]==null&&(_.value[qe.stSymbolName]=[]),_.value[qe.stSymbolName].push({stAssetName:Te,index:Ve,stKey:qe.stSymbolName+"_"+qe.stProductType})}}y.value=JSON.parse(JSON.stringify(O)),S.value=JSON.parse(JSON.stringify(te)),tt.value?.flushAsyncTransactions(),setTimeout(()=>{tt.value?.refreshCells({force:!0}),tt.value?.flushAsyncTransactions()},1),Pt()},10),setTimeout(()=>{ti()},50),setTimeout(()=>{yi();const Me=Object.keys(S.value);for(let j=0;j<Me.length;j++){const Te=Me[j];setTimeout(()=>{ae.value[Te]?.refreshCells({force:!0})},1),mi(Te)}},60)},{deep:!0}),Ke(o.selectedPositionsData,(O,W)=>{setTimeout(()=>{W.length&&O.length==0&&oi(),ti()},50)},{deep:!0}),Ke(o.removeMtmLevelSlFlag,(O,W)=>{Ze()},{deep:!1}),Ke(o.selectedTypeOfPositions,(O,W)=>{try{O&&tt.value&&tt.value.forEachNode((te,Me)=>{te.data.stSegment!=O&&(Fe(te.data),Vt(te.data))})}catch(te){console.log("error"),console.log(te)}},{deep:!0}),Ke(o.selectedPositionView,(O,W)=>{O=="ALL"?(Nn(),ca()):Ts()},{deep:!0});async function Ht(){try{if(o.positionsData.value.length>0){const O={arSymbolNames:o.positionsData.value.map(te=>te.stSymbolName)},W=ht.orderApiUrl+"/symbol/getsymbolsubscribnamedetails";await yt.post(W,O).then(te=>{if(te.data.status=="success"){L.value={};for(let Me=0;Me<te.data.data.length;Me++){const j=te.data.data[Me];L.value[j.stSymbolName]=j.stExchangeScripName,it.value[j.stExchangeScripName]=j;let Te=j.stSubSegment=="EQUITY"?j.stSymbolName:j.stUnderlying;if(Ri.value[j.stAssetName]||(Ri.value[j.stAssetName]=null),Gi.value[j.stAssetName]=Te,o.selectedPositionView.value=="ASSET_WISE"&&!S.value[j.stAssetName]){let Ve="TSD_"+Te,qe={stSelectedUnderLyingAsset:Te};t.socketEmit("GET_TWD_DATA",qe,Ve,ua(j.stAssetName))}S.value[j.stAssetName]||(S.value[j.stAssetName]=[]),me.value[j.stAssetName]||(me.value[j.stAssetName]=[]),ae.value[j.stAssetName]||(ae.value[j.stAssetName]=null),H.value[j.stAssetName]||(H.value[j.stAssetName]=null),Lt.value[j.stAssetName]||(Lt.value[j.stAssetName]={rowSelection:"multiple",suppressCellFocus:!0,suppressRowClickSelection:!0,isRowSelectable:Ve=>!!(Ve.data&&!isNaN(Ve.data.inNetQuantity)&&Ve.data.inNetQuantity!=0)}),V.value[j.stAssetName]||(V.value[j.stAssetName]=0),F.value[j.stAssetName]||(F.value[j.stAssetName]=0),U.value[j.stAssetName]||(U.value[j.stAssetName]=0),Y.value[j.stAssetName]||(Y.value[j.stAssetName]=0),Ce.value[j.stAssetName]||(Ce.value[j.stAssetName]=null),Ne.value[j.stAssetName]||(Ne.value[j.stAssetName]=null),fe.value[j.stAssetName]||(fe.value[j.stAssetName]={isSlSet:!0,inSl:null,isTrailingStoplossSet:!1,inTrailingStoplossStep:1}),Pe.value[j.stAssetName]||(Pe.value[j.stAssetName]={isTargetSet:!0,inTarget:null}),ge.value[j.stAssetName]||(ge.value[j.stAssetName]={isMtmHidden:!1,isTargetLevelSet:!1,isStoplossLevelSet:!1,inTarget:null,inStoploss:null,inInrDecPoint:0,isAutoTrailingLossEnable:!1,inMtmWhenTrailingSet:0,inAutoTrailingLossStep:1}),ie.value[j.stAssetName]||(ie.value[j.stAssetName]={isMtmHidden:!1,isTargetLevelSet:!1,isStoplossLevelSet:!1,inTarget:null,inStoploss:null,inInrDecPoint:0,isAutoTrailingLossEnable:!1,inMtmWhenTrailingSet:0,inAutoTrailingLossStep:1}),ae.value[j.stAssetName]||(ae.value[j.stAssetName]=null),H.value[j.stAssetName]||(H.value[j.stAssetName]=null),et.value[j.stAssetName]||(et.value[j.stAssetName]=`${j.stAssetName} MTM level hit`),Qe.value[j.stAssetName]||(Qe.value[j.stAssetName]=!1)}da()}}).catch(te=>{console.log("err"),console.log(te)})}}catch(O){console.log("error"),console.log(O)}}function Pt(){try{Z(),o.socket.value.emit("GET_TPD_DATA",{stSelectedSymbol:Object.keys(L.value)})}catch(O){console.log("error"),console.log(O)}}function Z(){try{wt();let O=null,W=null,te=Object.keys(L.value);for(let Me=0;Me<te.length;Me++)W=te[Me],O="TPD_"+W,w.value.push(O),o.socket.value.on(O,j=>{ze(j)})}catch(O){console.log("error"),console.log(O)}}function ze(O){try{const[W,te]=O,Me=L.value[W],j=E.value[Me],Te=_.value[Me],Ve={};if(j&&j.length>0)for(let qe=0;qe<j.length;qe++){const Ct=j[qe],st=o.positionsData.value[Ct].stSymbolName,Pi=o.positionsData.value[Ct].stProductType,qt=st+"_"+Pi;tt.value.flushAsyncTransactions();let ft={...tt.value.getRowNode(qt).data};if(ft.inLtp=Number(te.toFixed(2)),ft.isTargetSet&&Re.value[qt]!=null&&Re.value[qt].isTargetSet&&ft.inNetQuantity!=0){const Pr={...ot.deepCopy(Re.value[qt]),inLtp:ft.inLtp};ft.stSide=="BUY"?ft.inLtp>=Re.value[qt].inTarget&&Ui(ft,"TARGET_HIT_CLOSE_SINGLE_POSITION",!0,Pr):ft.stSide=="SELL"&&ft.inLtp<=ft.inTarget&&Ui(ft,"TARGET_HIT_CLOSE_SINGLE_POSITION",!0,Pr)}if(ft.isSlSet&&ye.value[qt]!=null&&ye.value[qt].isSlSet&&ft.inNetQuantity!=0){const Pr=ot.deepCopy({...ye.value[qt],inLtp:ft.inLtp});if(ft.stSide=="BUY"){if(ft.inLtp<=ye.value[qt].inSl)Ui(ft,"STOPLOSS_HIT_CLOSE_SINGLE_POSITION",!0,Pr);else if(ye.value[qt]&&ye.value[qt].isTrailingStoplossSet){const Gr=ft.inLtp-ye.value[qt].inLtpWhenTslSet;Gr>=ye.value[qt].inTrailingStoplossStep*1&&(ye.value[qt].inLtpWhenTslSet=ft.inLtp,ye.value[qt].inSl+=Gr,ft.inSl=ye.value[qt].inSl)}}else if(ft.stSide=="SELL"){if(ft.inLtp>=ft.inSl)Ui(ft,"STOPLOSS_HIT_CLOSE_SINGLE_POSITION",!0,Pr);else if(ye.value[qt]&&ye.value[qt].isTrailingStoplossSet){const Gr=ft.inLtp-ye.value[qt].inLtpWhenTslSet;Gr<=ye.value[qt].inTrailingStoplossStep*-1&&(ye.value[qt].inLtpWhenTslSet=ft.inLtp,ye.value[qt].inSl+=Gr,ft.inSl=ye.value[qt].inSl)}}}let fo=Math.min(ft.inBuyQuantity,ft.inSellQuantity),un=(ft.inSellPrice-ft.inBuyPrice)*fo;fo!=0&&(ft.inRealizedProfit=un.toFixed(2)),ft.inNetQuantity>0?ft.inUnRealizedProfit=(Number(ft.inLtp)-Number(ft.inBuyPrice))*Number(ft.inNetQuantity):ft.inNetQuantity<0?ft.inUnRealizedProfit=(Number(ft.inLtp)-Number(ft.inSellPrice))*Number(ft.inNetQuantity):ft.inUnRealizedProfit=0,ft.inNetQuantity!=0&&(ft.inProfitLoss=un+Number(ft.inUnRealizedProfit.toFixed(2)),ft.inProfitLoss=Number(ft.inProfitLoss.toFixed(2))),Ve[qt]=ft,setTimeout(()=>{let Gr=We(ft);tt.value.applyTransactionAsync({update:[Gr]},iu=>{yi()})},0)}if(_.value[Me]!=null&&_.value[Me].length>0)for(let qe=0;qe<Te.length;qe++){const Ct=Te[qe].index,st=Te[qe].stAssetName,Pi=S.value[st][Ct].stSymbolName,qt=S.value[st][Ct].stProductType,po=Pi+"_"+qt;if(ae.value[st]){ae.value[st].flushAsyncTransactions();let fo={...ae.value[st].getRowNode(po).data};fo.inLtp=Number(te.toFixed(2)),Ve[po]&&(fo={...Ve[po]}),setTimeout(()=>{let Pr=We(fo);ae.value[st].applyTransactionAsync({update:[Pr]},Gr=>{mi(st)})},0)}}}catch(W){console.log("error"),console.log(W)}}function yi(){try{let O=0,W=0,te=0,Me=0;if(tt.value.forEachNode(function(Te){O+=Number(Te.data.inProfitLoss),W+=Math.abs(Number(Te.data.inNetQuantity)),Te.data.stSide=="BUY"?te+=Math.abs(Number(Te.data.inNetQuantity)):Te.data.stSide=="SELL"&&(Me+=Math.abs(Number(Te.data.inNetQuantity)))}),P.value=O.toFixed(2),o.isMtmThresholdAvailable.value&&!o.isMtmThresholdShowed.value&&Number(P.value)<Number(o.inMtmThreshold.value)&&o.setMtmThresholdAlert.value(),ne.value=W,ee.value=te,re.value=Me,le.value.isStoplossLevelSet&&le.value.isAutoTrailingLossEnable){const Te=Number(P.value)-Number(le.value.inMtmWhenTrailingSet);Te>1&&(le.value.inMtmWhenTrailingSet=Number(P.value),le.value.inStoploss=Number(le.value.inStoploss)+Number(Te))}const j={...ot.deepCopy(le.value),inTotalPnl:P.value};le.value.isTargetLevelSet&&Number(P.value)>=le.value.inTarget?(Ge.value=`Your MTM target level ${le.value.inTarget} has been triggered.`,Ze(),Nn(),$.value?Je.value=!0:o.cancelAllPositions.value("MTM_TARGET_HIT_CLOSE_ALL_POSITIONS",j),t.toastMessage({color:"success",message:Ge.value})):le.value.isStoplossLevelSet&&Number(P.value)<=le.value.inStoploss&&(Ge.value=`Your MTM stoploss level ${le.value.inStoploss} has been triggered.`,Ze(),Nn(),$.value?Je.value=!0:o.cancelAllPositions.value("MTM_STOPLOSS_HIT_CLOSE_ALL_POSITIONS",j),t.toastMessage({color:"warning",message:Ge.value}))}catch(O){console.log("error"),console.log(O)}}function mi(O){try{let W=0,te=0,Me=0,j=0;if(ae.value[O]?.forEachNode(function(Ve){W+=Number(Ve.data.inProfitLoss),te+=Math.abs(Number(Ve.data.inNetQuantity)),Ve.data.stSide=="BUY"?Me+=Math.abs(Number(Ve.data.inNetQuantity)):Ve.data.stSide=="SELL"&&(j+=Math.abs(Number(Ve.data.inNetQuantity)))}),V.value[O]=W.toFixed(2),F.value[O]=te,U.value[O]=Me,Y.value[O]=j,ie.value[O].isStoplossLevelSet&&ie.value[O].isAutoTrailingLossEnable){const Ve=Number(V.value[O])-Number(ie.value[O].inMtmWhenTrailingSet);Ve>1&&(ie.value[O].inMtmWhenTrailingSet=Number(V.value[O]),ie.value[O].inStoploss=Number(ie.value[O].inStoploss)+Number(Ve))}const Te={...ot.deepCopy(ie.value[O]),inTotalPnl:V.value[O]};ie.value[O].isTargetLevelSet&&Number(V.value[O])>=ie.value[O].inTarget?(Ge.value=`Your ${O} MTM target level ${ie.value[O].inTarget} has been triggered.`,we(O),Qe.value[O]?(Je.value=!0,ut.value=O):Vi(S.value[O],"MTM_TARGET_HIT_CLOSE_ALL_POSITIONS_ASSET_WISE",!0,Te),t.toastMessage({color:"success",message:et.value[O]})):ie.value[O].isStoplossLevelSet&&Number(V.value[O])<=ie.value[O].inStoploss&&(Ge.value=`Your ${O} MTM stoploss level ${ie.value[O].inStoploss} has been triggered.`,we(O),Qe.value[O]?(Je.value=!0,ut.value=O):Vi(S.value[O],"MTM_STOPLOSS_HIT_CLOSE_ALL_POSITIONS_ASSET_WISE",!0,Te),t.toastMessage({color:"warning",message:et.value[O]}))}catch(W){console.log("error"),console.log(W)}}function ce(O){let W="0.00";if(O!=null&&O!=null){W=Number(O).toLocaleString("en-IN");let te=W.split(".");te.length==1?W=W+".00":te[1].length==1&&(W=W+"0")}return W}function Ze(){try{le.value={isMtmHidden:le.value.isMtmHidden,isTargetLevelSet:!1,isStoplossLevelSet:!1,inTarget:null,inStoploss:null,inInrDecPoint:0,isAutoTrailingLossEnable:!1,inMtmWhenTrailingSet:0,inAutoTrailingLossStep:1},Se.value={...le.value},Je.value=!1}catch(O){console.log("error"),console.log(O)}}function we(O){try{ie.value[O]={isMtmHidden:le.value.isMtmHidden,isTargetLevelSet:!1,isStoplossLevelSet:!1,inTarget:null,inStoploss:null,inInrDecPoint:0,isAutoTrailingLossEnable:!1,inMtmWhenTrailingSet:0,inAutoTrailingLossStep:1},ge.value[O]={...ie.value[O]},Je.value=!1}catch(W){console.log("error"),console.log(W)}}function wt(){try{w.value=[...w.value];let O="";if(w.value.length>0){for(let W=0;W<w.value.length;W++)O=w.value[W],o.socket.value.emit("STOP_DATA",{stEventName:O}),o.socket.value.off(O);w.value=[]}O=null}catch(O){console.log("error"),console.log(O)}}function We(O){var W={};return Object.keys(O).forEach(function(te){W[te]=O[te]}),W}const lt=O=>{const W=tt.value.getSelectedNodes();let te=[];W.forEach(Me=>{te.push(Me.data)}),o.setSelectedPositions?.value(te)},_i=(O,W)=>{const te=ae.value[W].getSelectedNodes();if(te.length==0)me.value[W]=[];else{const j=[];te.forEach(Te=>{j.push(Te.data)}),me.value[W]=j}const Me=[];Object.keys(me.value).forEach(j=>{Me.push(...me.value[j])}),o.setSelectedPositions?.value(Me)},ti=()=>{try{for(let O=0;O<o.selectedPositionsData.value.length;O++){const W=o.selectedPositionsData.value[O].stSymbolName+"_"+o.selectedPositionsData.value[O].stProductType;tt.value.flushAsyncTransactions();let te=tt.value.getRowNode(W);te.data.inNetQuantity!=0&&te.setSelected(!0)}}catch(O){console.log("error"),console.log(O)}},oi=()=>{try{for(let O=0;O<y.value.length;O++){const W=y.value[O].stSymbolName+"_"+y.value[O].stProductType;tt.value.flushAsyncTransactions(),tt.value.getRowNode(W).setSelected(!1)}}catch(O){console.log("error"),console.log(O)}},Rt=()=>{tt.value.sizeColumnsToFit()},qr=O=>{ae.value?.[O]?.sizeColumnsToFit()},_o=O=>{},si=O=>{try{tt.value=O.api,G.value=O.columnApi,tt.value.sizeColumnsToFit(),G.value.moveColumns(f.value,0),setTimeout(()=>{fi.value=!1},10)}catch(W){console.log(W)}},D=(O,W)=>{ae.value.hasOwnProperty(W)&&(ae.value[W]=O.api,H.value[W]=O.columnApi,ae.value[W]?.sizeColumnsToFit(),H.value[W]?.moveColumns(f.value,0),setTimeout(()=>{fi.value=!1},10))},C=O=>{try{o.disableOneClickShortcutsFn.value(!0),tt.value.flushAsyncTransactions();const W=tt.value.getRowNode(O.stSymbolName+"_"+O.stProductType);K.value=W.data,K.value.isSlSet&&(xe.value={isSlSet:K.value.isSlSet,isTrailingStoplossSet:K.value.isTrailingStoplossSet,inTrailingStoplossStep:K.value.inTrailingStoplossStep,inSl:Number(K.value.inSl.toFixed(2))}),Bt()}catch(W){console.log("error"),console.log(W)}};function de(O,W,te){try{const Me=O.stSymbolName+"_"+O.stProductType,Te=_.value[O.stSymbolName][0].stAssetName;W?ye.value[Me].inSl+=te:ye.value[Me].inSl-=te,tt.value.flushAsyncTransactions();let Ve=tt.value.getRowNode(Me);const qe=Number(ye.value[Me].inSl);Ve.setDataValue("inSl",qe),ae.value[Te].flushAsyncTransactions(),ae.value[Te].getRowNode(Me).setDataValue("inSl",qe)}catch(Me){console.log("error"),console.log(Me)}}function Tt(O,W){try{const te=O.stSymbolName,Me=O.stProductType,j=te+"_"+Me,Ve=_.value[te][0].stAssetName;W?(ye.value[j].isTrailingStoplossSet=!0,ye.value[j].inLtpWhenTslSet=O.inLtp):(ye.value[j].isTrailingStoplossSet=!1,ye.value[j].inLtpWhenTslSet=O.inLtp),tt.value.flushAsyncTransactions();let qe=tt.value.getRowNode(j),Ct={...qe.data};Ct.inLtpWhenTslSet=O.inLtp,Ct.isTrailingStoplossSet=ye.value[j].isTrailingStoplossSet,Ct.inTrailingStoplossStep=ye.value[j].inTrailingStoplossStep,qe.setData(Ct),ae.value[Ve].flushAsyncTransactions(),ae.value[Ve].getRowNode(j).setData(Ct)}catch(te){console.log("error"),console.log(te)}}function Fe(O){try{const W=O.stSymbolName+"_"+O.stProductType,Me=_.value[O.stSymbolName][0].stAssetName;if(ye.value[W]!=null){tt.value.flushAsyncTransactions();let j=tt.value.getRowNode(W),Te={...j.data};Te.isSlSet=!1,Te.isTrailingStoplossSet=!1,Te.inTrailingStoplossStep=1,Te.inLtpWhenTslSet=null,Te.inSl=null,j.setData(Te),ae.value[Me].flushAsyncTransactions(),ae.value[Me].getRowNode(W).setData(Te),ct(W)}}catch(W){console.log("error"),console.log(W)}}function ct(O){ye.value[O].isSlSet=!1,ye.value[O].inSl=null,ye.value[O].isTrailingStoplossSet=!1,ye.value[O].inTrailingStoplossStep=1,ye.value[O].inLtpWhenTslSet=null}function Qt(O){Re.value[O].isTargetSet=!1,Re.value[O].inTarget=null}function Bt(){s.value=!0}function zt(){s.value=!1}function Qi(){try{if(xe.value.isSlSet==!0&&xe.value.inSl)if(xe.value.inSl!=null&&!isNaN(xe.value.inSl)){const O=K.value.stSymbolName,W=K.value.stProductType,te=O+"_"+W,j=_.value[O][0].stAssetName;tt.value.flushAsyncTransactions(),ae.value[j].flushAsyncTransactions();let Te=tt.value.getRowNode(te),Ve=ae.value[j].getRowNode(te),qe=!1;if(Te.data.stSide=="BUY"?Te.data.inLtp>Number(xe.value.inSl)&&(qe=!0):Te.data.stSide=="SELL"&&Te.data.inLtp<Number(xe.value.inSl)&&(qe=!0),qe){ye.value[te]={isSlSet:!0,stSymbolName:K.value.stSymbolName,stProductType:K.value.stProductType,isTrailingStoplossSet:xe.value.isTrailingStoplossSet,inTrailingStoplossStep:xe.value.inTrailingStoplossStep,inLtpWhenTslSet:K.value.inLtp,inSl:Number(xe.value.inSl)},tt.value.flushAsyncTransactions(),Te=tt.value.getRowNode(te);let Ct={...Te.data};Ct.isSlSet=xe.value.isSlSet,Ct.inSl=Number(xe.value.inSl),Ct.inLtpWhenTslSet=K.value.inLtp,Ct.isTrailingStoplossSet=xe.value.isTrailingStoplossSet,Ct.inTrailingStoplossStep=xe.value.inTrailingStoplossStep,Te.setData(Ct),ae.value[j].flushAsyncTransactions(),Ve=ae.value[j].getRowNode(te),Ve.setData(Ct)}else return t.toastMessage({color:"error",message:`Stoploss should be ${Te.data.stSide=="BUY"?"lesser":"great"} than LTP.`}),!1}else t.toastMessage({color:"error",message:"Please add valid stop loss."});z()}catch(O){console.log("error"),console.log(O)}}function z(O){try{o.disableOneClickShortcutsFn.value(!1),zt(),K.value=null,xe.value={isSlSet:!0,isTrailingStoplossSet:!1,inTrailingStoplossStep:1,inSl:null}}catch(W){console.log("error"),console.log(W)}}function pe(O){try{o.disableOneClickShortcutsFn.value(!0),tt.value.flushAsyncTransactions();const W=tt.value.getRowNode(O.stSymbolName+"_"+O.stProductType);Q.value=W.data,Q.value.isTargetSet&&(q.value={isTargetSet:Q.value.isTargetSet,inTarget:Q.value.inTarget}),Ye()}catch(W){console.log("error"),console.log(W)}}function Ye(){l.value=!0}function $e(){l.value=!1}function x(){try{if(q.value.isTargetSet==!0&&q.value.inTarget)if(q.value.inTarget!=null&&!isNaN(q.value.inTarget)){const O=Q.value.stSymbolName,W=Q.value.stProductType,te=O+"_"+W,j=_.value[O][0].stAssetName;tt.value.flushAsyncTransactions(),ae.value[j].flushAsyncTransactions();let Te=tt.value.getRowNode(te),Ve=ae.value[j].getRowNode(te),qe=!1;if(Te.data.stSide=="BUY"?Te.data.inLtp<Number(q.value.inTarget)&&(qe=!0):Te.data.stSide=="SELL"&&Te.data.inLtp>Number(q.value.inTarget)&&(qe=!0),qe){Re.value[te]={isTargetSet:!0,stSymbolName:Q.value.stSymbolName,stProductType:Q.value.stProductType,inTarget:Number(q.value.inTarget)},tt.value.flushAsyncTransactions(),Te=tt.value.getRowNode(te);let Ct={...Te.data};Ct.isTargetSet=q.value.isTargetSet,Ct.inTarget=Number(q.value.inTarget),Te.setData(Ct),ae.value[j].flushAsyncTransactions(),Ve=ae.value[j].getRowNode(te);let st={...Ve.data};st.isTargetSet=q.value.isTargetSet,st.inTarget=Number(q.value.inTarget),Ve.setData(st)}else return t.toastMessage({color:"error",message:`Target should be ${Te.data.stSide=="BUY"?"greater":"lesser"} than LTP.`}),!1}else t.toastMessage({color:"error",message:"Please add valid target."});Wt()}catch(O){console.log("error"),console.log(O)}}function Wt(O){try{o.disableOneClickShortcutsFn.value(!1),$e(),Q.value=null,q.value={isTargetSet:!0,inTarget:null}}catch(W){console.log("error"),console.log(W)}}function Vt(O){try{const W=O.stSymbolName+"_"+O.stProductType;if(Re.value[W]!=null){tt.value.flushAsyncTransactions();let te=tt.value.getRowNode(W);const j=_.value[O.stSymbolName][0].stAssetName;let Te=ae.value[j].getRowNode(W),Ve={...te.data};Ve.isTargetSet=!1,Ve.inTarget=null,te.setData(Ve),ae.value[j].flushAsyncTransactions(),Te=ae.value[j].getRowNode(W);let qe={...Te.data};qe.isTargetSet=!1,qe.inTarget=null,Te.setData(qe),Qt(W)}}catch(W){console.log("error"),console.log(W)}}function Ui(O,W=null,te=!0,Me=null){try{if(O.isLimitOrder)if(O.symbolMetaData=ot.deepCopy(it.value[O.stSymbolName]),O.isChnageStrikePriceOrder){o.openChangeStrikeModal.value(O);return}else if(O.isConvertOptionTypeWithSameLegDistane){o.convertOptionsTypeWithSameLegDistance.value(O);return}else{o.openLimitOrderModalForPosition.value(O,O.isExitOrder);return}const j=ot.deepCopy(ye.value),Te=ot.deepCopy(Re.value);if(te&&(Vt(O),Fe(O)),o.cancelAllPositionButtonLoading.value)t.toastMessage({color:"success",message:"Close all position is already in progress. Please wait for it to complete."});else{o.setCloseAllPositionButtonLoading.value(!0);let Ve=[];const qe=Math.abs(O.inNetQuantity);Ve.push({stExchange:O.stExchange,stValidity:"DAY",stProductType:O.stProductType,stSymbolName:O.stSymbolName,stBrokerSymbolName:O.stBrokerSymbolName?O.stBrokerSymbolName:null,stOrderType:"MARKET",inQuantity:qe,stBuySellType:O.inNetQuantity<0?"BUY":"SELL",inLimitPrice:0,inTakeProfit:0,inStoploss:0,stExtra:{stClosePositionOrderType:o.selectedClosePositionOrderType.value},isReverseEntry:O.isReverseEntry,slOrTargetData:Me});const Ct={stKey:u.value,stTradingWindowId:o.stTradingWindowId?.value,stAction:W,stOrders:Ve};O.isConvertOptionType?t.exitOrderAndConvertOptionTypeApi(Ct).then(st=>{o.setCloseAllPositionButtonLoading.value(!1),o.getActiveTabData.value(),st.status=="success"?st?.data&&(st.data?.buy?.["0"]?.msg?o.showMessageOnOnlickWindow.value(st.data?.buy?.["0"]?.msg):st.data?.sell?.["0"]?.msg&&o.showMessageOnOnlickWindow.value(st.data?.sell?.["0"]?.msg)):o.showMessageOnOnlickWindow.value(st.msg)}).catch(st=>{o.setCloseAllPositionButtonLoading.value(!1),console.log("err :>> ",st)}):t.exitOrderApi(Ct).then(st=>{o.setCloseAllPositionButtonLoading.value(!1),o.getActiveTabData.value(),st.status=="success"?st?.data&&(st.data?.buy?.["0"]?.msg?o.showMessageOnOnlickWindow.value(st.data?.buy?.["0"]?.msg):st.data?.sell?.["0"]?.msg&&o.showMessageOnOnlickWindow.value(st.data?.sell?.["0"]?.msg)):o.showMessageOnOnlickWindow.value(st.msg)}).catch(st=>{o.setCloseAllPositionButtonLoading.value(!1),console.log("err :>> ",st)})}}catch(j){console.log("error"),console.log(j)}}function Vi(O,W=null,te=!0,Me=null){try{const j=[];for(let Te=0;Te<O.length;Te++){const Ve=O[Te];if(Ve&&!isNaN(Ve.inNetQuantity)&&Ve.inNetQuantity!=0){const qe=Math.abs(Ve.inNetQuantity);j.push({stExchange:Ve.stExchange,stValidity:"DAY",stProductType:Ve.stProductType,stSymbolName:Ve.stSymbolName,stBrokerSymbolName:Ve.stBrokerSymbolName?Ve.stBrokerSymbolName:null,stOrderType:"MARKET",inQuantity:qe,stBuySellType:Ve.inNetQuantity<0?"BUY":"SELL",inLimitPrice:0,inTakeProfit:0,inStoploss:0})}}if(j.length)if(o.cancelAllPositionButtonLoading.value)t.toastMessage({color:"success",message:"Close all position is already in progress. Please wait for it to complete."});else{o.setCloseAllPositionButtonLoading.value(!0);const Te={stKey:u.value,stTradingWindowId:o.stTradingWindowId?.value,stAction:W,stOrders:j};Me&&(Te.mtmLevelDetails=Me),t.exitOrderApi(Te).then(Ve=>{o.setCloseAllPositionButtonLoading.value(!1),o.getActiveTabData.value(),Ve.status=="success"?Ve?.data&&(Ve.data?.buy?.["0"]?.msg?o.showMessageOnOnlickWindow.value(Ve.data?.buy?.["0"]?.msg):Ve.data?.sell?.["0"]?.msg&&o.showMessageOnOnlickWindow.value(Ve.data?.sell?.["0"]?.msg)):o.showMessageOnOnlickWindow.value(Ve.msg)}).catch(Ve=>{o.setCloseAllPositionButtonLoading.value(!1),console.log("err :>> ",Ve)})}else t.toastMessage({color:"error",message:"No open positions found."})}catch(j){console.log("error"),console.log(j)}}async function An(O){let W=[];me.value[O].length?(_i(null,O),await dr(),W=ot.deepCopy(me.value[O]),Vi(W,"CLOSE_SELECTED_POSITIONS_ASSET_WISE_BUTTON")):(W=ot.deepCopy(S.value[O]),Vi(W,"CLOSE_ALL_POSITIONS_ASSET_WISE_BUTTON")),me.value[O]=[];const te=[];Object.keys(me.value).forEach(Me=>{te.push(...me.value[Me])}),o.setSelectedPositions?.value(te)}function co(O,W,te){try{const Me=O.stSymbolName+"_"+O.stProductType,Te=_.value[O.stSymbolName][0].stAssetName;W?Re.value[Me].inTarget+=te:Re.value[Me].inTarget-=te,tt.value.flushAsyncTransactions();let Ve=tt.value.getRowNode(Me);const qe=Number(Re.value[Me].inTarget);Ve.setDataValue("inTarget",qe),ae.value[Te].flushAsyncTransactions();let Ct=ae.value[Te].getRowNode(Me);Ct=ae.value[Te].getRowNode(Me),Ct.setDataValue("inTarget",qe)}catch(Me){console.log("error"),console.log(Me)}}function bo(O){if(it.value[O.stSymbolName]!=null){const W=it.value[O.stSymbolName],te={...W,stExpiryDate:he(W.stExpiryDate,"YYYY-MM-DD",!0).format("YYMMDD"),stProductType:O.stProductType};o.setBuySellSymbol.value(te)}}function ys(){try{if(!0){if(Se.value.isAutoTrailingLossEnable){if(!isNaN(Se.value.inAutoTrailingLossStep)&&Number(Se.value.inAutoTrailingLossStep)<0)return t.toastMessage({color:"error",message:"Please enter valid auto trailing loss step."}),!1;Se.value.inMtmWhenTrailingSet=Number(P.value)}Se.value.inTarget&&!isNaN(Se.value.inTarget)?isNaN(Se.value.inTarget)?t.toastMessage({color:"error",message:"Please add valid target."}):(le.value.isTargetLevelSet=!0,le.value.inTarget=Number(Se.value.inTarget)):(le.value.isTargetLevelSet=!1,le.value.inTarget=null),Se.value.inStoploss?isNaN(Se.value.inStoploss)?t.toastMessage({color:"error",message:"Please add valid stoploss."}):le.value.isTargetLevelSet?Number(Se.value.inTarget)>Number(Se.value.inStoploss)?(le.value.isStoplossLevelSet=!0,le.value.inStoploss=Number(Se.value.inStoploss),on()):t.toastMessage({color:"error",message:"Target should be greater than stoploss."}):(le.value.isStoplossLevelSet=!0,le.value.inStoploss=Number(Se.value.inStoploss),on()):(le.value.isStoplossLevelSet=!1,le.value.inStoploss=null,on())}}catch(O){console.log("error"),console.log(O)}}function ms(O){try{if(!0){if(ge.value[O].isAutoTrailingLossEnable){if(!isNaN(ge.value[O].inAutoTrailingLossStep)&&Number(ge.value[O].inAutoTrailingLossStep)<0)return t.toastMessage({color:"error",message:"Please enter valid auto trailing loss step."}),!1;ge.value[O].inMtmWhenTrailingSet=Number(V.value[O])}ge.value[O].inTarget&&!isNaN(ge.value[O].inTarget)?isNaN(ge.value[O].inTarget)?t.toastMessage({color:"error",message:"Please add valid target."}):(ie.value[O].isTargetLevelSet=!0,ie.value[O].inTarget=Number(ge.value[O].inTarget)):(ie.value[O].isTargetLevelSet=!1,ie.value[O].inTarget=null),ge.value[O].inStoploss?isNaN(ge.value[O].inStoploss)?t.toastMessage({color:"error",message:"Please add valid stoploss."}):ie.value[O].isTargetLevelSet?Number(ge.value[O].inTarget)>Number(ge.value[O].inStoploss)?(ie.value[O].isStoplossLevelSet=!0,ie.value[O].inStoploss=Number(ge.value[O].inStoploss),nn(O)):t.toastMessage({color:"error",message:"Target should be greater than stoploss."}):(ie.value[O].isStoplossLevelSet=!0,ie.value[O].inStoploss=Number(ge.value[O].inStoploss),nn(O)):(ie.value[O].isStoplossLevelSet=!1,ie.value[O].inStoploss=null,nn(O))}}catch(W){console.log("error"),console.log(W)}}function on(){(le.value.isTargetLevelSet||le.value.isStoplossLevelSet)&&(le.value.inInrDecPoint=isNaN(Se.value.inInrDecPoint)?0:Se.value.inInrDecPoint,le.value.isAutoTrailingLossEnable=Se.value.isAutoTrailingLossEnable,le.value.inMtmWhenTrailingSet=Se.value.inMtmWhenTrailingSet),Se.value={...le.value}}function nn(O){(ie.value[O].isTargetLevelSet||ie.value[O].isStoplossLevelSet)&&(ie.value[O].inInrDecPoint=isNaN(ge.value[O].inInrDecPoint)?0:ge.value[O].inInrDecPoint,ie.value[O].isAutoTrailingLossEnable=ge.value[O].isAutoTrailingLossEnable,ie.value[O].inMtmWhenTrailingSet=ge.value[O].inMtmWhenTrailingSet),ge.value[O]={...ie.value[O]}}function Cs(O,W){try{isNaN(le.value.inInrDecPoint)||(O=="TARGET"?le.value.isTargetLevelSet&&(W?le.value.inTarget=Number(le.value.inTarget)+Number(le.value.inInrDecPoint):le.value.inTarget=Number(le.value.inTarget)-Number(le.value.inInrDecPoint)):le.value.isStoplossLevelSet&&(W?le.value.inStoploss=Number(le.value.inStoploss)+Number(le.value.inInrDecPoint):le.value.inStoploss=Number(le.value.inStoploss)-Number(le.value.inInrDecPoint)))}catch(te){console.log(te)}}function Zl(O,W,te){try{isNaN(ie.value[te].inInrDecPoint)||(O=="TARGET"?ie.value[te].isTargetLevelSet&&(W?ie.value[te].inTarget=Number(ie.value[te].inTarget)+Number(ie.value[te].inInrDecPoint):ie.value[te].inTarget=Number(ie.value[te].inTarget)-Number(ie.value[te].inInrDecPoint)):ie.value[te].isStoplossLevelSet&&(W?ie.value[te].inStoploss=Number(ie.value[te].inStoploss)+Number(ie.value[te].inInrDecPoint):ie.value[te].inStoploss=Number(ie.value[te].inStoploss)-Number(ie.value[te].inInrDecPoint)))}catch(Me){console.log(Me)}}function $l(){Je.value=!1,ut.value=null}function Ln(){ut.value?Vi(S.value[ut.value],"MTM_TARGET_HIT_CLOSE_ALL_POSITIONS_ASSET_WISE",!0):o.cancelAllPositions.value("MTM_LEVEL_HIT_CLOSE_ALL_POSITIONS"),Je.value=!1,ut.value=null}function Ss(){Si.value=!0}function Tr(){Si.value=!1}async function Or(){return Kt.value={settings:{themeMode:t.stFavouriteSetting?.settings?.themeMode?t.stFavouriteSetting.settings.themeMode:"light",sidebarLayout:t.stFavouriteSetting?.settings?.sidebarLayout?t.stFavouriteSetting.settings.sidebarLayout:"vertical-sidebar",isSidebarCompact:t.stFavouriteSetting?.settings?.isSidebarCompact?t.stFavouriteSetting.settings.isSidebarCompact:!1,isOpenPageInNewTab:t.stFavouriteSetting?.settings?.isOpenPageInNewTab?t.stFavouriteSetting.settings.isOpenPageInNewTab:!1,showTicker:t.stFavouriteSetting?.settings?.showTicker?t.stFavouriteSetting.settings.showTicker:!1,showDisciplinePopup:t.stFavouriteSetting?.settings?t.stFavouriteSetting.settings?.showDisciplinePopup==null||t.stFavouriteSetting.settings?.showDisciplinePopup==null?!0:t.stFavouriteSetting.settings?.showDisciplinePopup:!1},oneClick:{selectedSegment:t.stFavouriteSetting?.oneClick?.selectedSegment?t.stFavouriteSetting.oneClick.selectedSegment:"OPTIONS",selectedAsset:t.stFavouriteSetting?.oneClick?.selectedAsset?t.stFavouriteSetting.oneClick.selectedAsset:"BANKNIFTY",selectedProductType:t.stFavouriteSetting?.oneClick?.selectedProductType?t.stFavouriteSetting.oneClick.selectedProductType:"MARGIN",selectedOrderType:t.stFavouriteSetting?.oneClick?.selectedOrderType?t.stFavouriteSetting.oneClick.selectedOrderType:"MARKET",selectedClosePositionOrderType:t.stFavouriteSetting?.oneClick?.selectedClosePositionOrderType?t.stFavouriteSetting.oneClick.selectedClosePositionOrderType:"MARKET",selectedMarketProtectionPercentage:t.stFavouriteSetting?.oneClick?.selectedMarketProtectionPercentage?t.stFavouriteSetting.oneClick.selectedMarketProtectionPercentage:10,selectedTypeOfPositions:t.stFavouriteSetting?.oneClick?.selectedTypeOfPositions?t.stFavouriteSetting.oneClick.selectedTypeOfPositions:"Equity Derivatives",selectedCallStrikePrice:t.stFavouriteSetting?.oneClick?.selectedCallStrikePrice?t.stFavouriteSetting.oneClick.selectedCallStrikePrice:0,selectedPutStrikePrice:t.stFavouriteSetting?.oneClick?.selectedPutStrikePrice?t.stFavouriteSetting.oneClick.selectedPutStrikePrice:0,setPredefinedTarget:t.stFavouriteSetting?.oneClick?.setPredefinedTarget?t.stFavouriteSetting.oneClick.setPredefinedTarget:!1,inPredefinedTarget:t.stFavouriteSetting?.oneClick?.inPredefinedTarget?t.stFavouriteSetting.oneClick.inPredefinedTarget:null,stTypeOfPredefinedTarget:t.stFavouriteSetting?.oneClick?.stTypeOfPredefinedTarget?t.stFavouriteSetting.oneClick.stTypeOfPredefinedTarget:"ABSOLUTE_POINTS",setPredefinedSl:t.stFavouriteSetting?.oneClick?.setPredefinedSl?t.stFavouriteSetting.oneClick.setPredefinedSl:!1,inPredefinedSl:t.stFavouriteSetting?.oneClick?.inPredefinedSl?t.stFavouriteSetting.oneClick.inPredefinedSl:null,isTrailingStoplossSet:t.stFavouriteSetting?.oneClick?.isTrailingStoplossSet?t.stFavouriteSetting.oneClick.isTrailingStoplossSet:!1,inTrailingStoplossStep:t.stFavouriteSetting?.oneClick?.inTrailingStoplossStep?t.stFavouriteSetting.oneClick.inTrailingStoplossStep:1,stTypeOfPredefinedSl:t.stFavouriteSetting?.oneClick?.stTypeOfPredefinedSl?t.stFavouriteSetting.oneClick.stTypeOfPredefinedSl:"ABSOLUTE_POINTS",oneClickTradeWindow:{orderBook:t.stFavouriteSetting?.oneClick?.oneClickTradeWindow?.orderBook?t.stFavouriteSetting.oneClick.oneClickTradeWindow.orderBook:null,positions:d.value}}},await Do(Kt.value)}async function Do(O){try{let W=await yt.post("/favourite-setting/savefavouritesetting",O);return W.data.status=="success"&&t.setFavoutiteSettings(O),W.data}catch(W){console.log(W)}}async function an(){let O=await Or();if(O.status=="success"){Si.value=!1;for(let W=0;W<c.value.length;W++){const te=c.value[W];c.value[W].hide=!d.value[te.field].columnVisible,f.value[d.value[te.field].position]=te.field}setTimeout(()=>{tt.value.sizeColumnsToFit(),G.value.moveColumns(f.value,0),fi.value=!1},1),t.toastMessage({color:O.status,message:"Position settings saved successfully."})}else t.toastMessage({color:O.status,message:"Failed to save position settings."})}function Ro(){t.stFavouriteSetting?.oneClick?.oneClickTradeWindow?.positions&&(d.value=t.stFavouriteSetting?.oneClick?.oneClickTradeWindow?.positions);for(let O=0;O<c.value.length;O++){const W=c.value[O];c.value[O].hide=!d.value[W.field].columnVisible,f.value[d.value[W.field].position]=W.field}}function Mn(O){if(O.finished){let W=tt.value.getColumnDefs(),te=!1;W.forEach((Me,j)=>{d.value[Me.field].position!=j&&(te=!0)}),te&&(fi.value=!0)}}async function sn(){ln();let O=await Or();O.status=="success"?t.toastMessage({color:O.status,message:"Position settings saved successfully."}):t.toastMessage({color:O.status,message:"Failed to save position settings."}),Ro(),fi.value=!1}function ln(){tt.value.getColumnDefs().forEach((W,te)=>{d.value[W.field].position=te})}async function la(){d.value={stSymbolName:{columnVisible:!0,position:0},stSide:{columnVisible:!0,position:1},inNetQuantity:{columnVisible:!0,position:2},inNetAverage:{columnVisible:!0,position:3},inLtp:{columnVisible:!0,position:4},inSl:{columnVisible:!0,position:5},inSlButton:{columnVisible:!0,position:6},inTarget:{columnVisible:!0,position:7},inTargetButton:{columnVisible:!0,position:8},inRealizedProfit:{columnVisible:!0,position:9},inUnRealizedProfit:{columnVisible:!0,position:10},inProfitLoss:{columnVisible:!0,position:11},stActionColumn:{columnVisible:!0,position:12},inBuyQuantity:{columnVisible:!0,position:13},inBuyPrice:{columnVisible:!0,position:14},inSellPrice:{columnVisible:!0,position:15},inSellQuantity:{columnVisible:!0,position:16},stProductType:{columnVisible:!0,position:17}};let O=await Or();if(O.status=="success"){Si.value=!1;for(let W=0;W<c.value.length;W++){const te=c.value[W];c.value[W].hide=!d.value[te.field].columnVisible,f.value[d.value[te.field].position]=te.field}setTimeout(()=>{tt.value.sizeColumnsToFit(),G.value.moveColumns(f.value,0)},1),t.toastMessage({color:O.status,message:"Column setting and position reset successfully."})}else t.toastMessage({color:O.status,message:"Failed to reset column setting and position."})}function Nn(){const O=Object.keys(S.value);for(let W=0;W<O.length;W++){const te=O[W];we(te)}}function ua(O){return W=>{try{const[te,Me,j,Te,Ve,qe]=W,Ct={stUnderlying:Gi.value[O]};Ct.inLtp=Me.toFixed(2),Ct.inPrevDayClose=qe,j!=0&&(Ct.inDayOpen=j,Ct.inDayHigh=Te,Ct.inDayLow=Ve),Ct.inLtpDiff=(Number(Me)-Number(Ct.inPrevDayClose)).toFixed(2),Ct.inLtpDiffInPercentage=(Number(Ct.inLtpDiff)*100/Number(Ct.inPrevDayClose)).toFixed(2),Ri.value[O]=Ct}catch(te){console.log(te)}}}function ws(){ca(),Ri.value={},S.value={},_.value={},V.value={},F.value={},U.value={},Y.value={},Ce.value={},Ne.value={},fe.value={},Pe.value={},ge.value={},ie.value={},Qe.value={},et.value={},ae.value={},H.value={},Lt.value={}}async function Xr(O){const W={stSelectedModeOfData:"live",stSelectedOptions:O,stSelectedAvailableDate:he().format("YYYY-MM-DD")};Ri.value[O]?.inLtp||await yt.post("/one-click/getmultipleunderlyingdata",W).then(async te=>{if(te.data.status=="success"){const Me=te.data.data;Object.keys(Me).forEach(j=>{if(Me[j]){const Te=Me[j];Te.inLtp=Te.inLtp.toFixed(2),Te.inLtpDiff=(Number(Te.inLtp)-Number(Te.inPrevDayClose)).toFixed(2),Te.inLtpDiffInPercentage=(Number(Te.inLtpDiff)*100/Number(Te.inPrevDayClose)).toFixed(2),Ri.value[j]=Te}})}else t.toastMessage({color:te.data.status,message:te.data.msg})}).catch(te=>{})}function Ts(){const O=Object.keys(S.value);for(let W=0;W<O.length;W++){const te=O[W];t.socketEmit("GET_TWD_DATA",{stSelectedUnderLyingAsset:Gi.value[te]},"TSD_"+Gi.value[te],ua(te))}Xr(O)}function ca(){const O=Object.keys(S.value);for(let W=0;W<O.length;W++){const te=O[W];t.socketEmit("STOP_DATA",{stEventName:"TSD_"+Gi.value[te]})}}function da(){const O=Object.keys(S.value);Xr(O)}function Os(){fr.value=!1}function eu(){fr.value=!0}function tu(){if(o.selectedPositionsData.value.length)for(let O=0;O<o.selectedPositionsData.value.length;O++){const W=o.selectedPositionsData.value[O];Fe(W),Vt(W)}else for(let O=0;O<o.positionsData.value.length;O++){const W=o.positionsData.value[O];Fe(W),Vt(W)}o.cancelAllPositions.value("CLOSE_ALL_POSITIONS_REVERSE_ENTRY_BUTTON",null,!0),Os()}const Fn={global:e,store:t,definePropsData:r,props:o,isDittoEnabledProp:a,stopLossModal:s,targetModal:l,stIdentificationToken:u,columnDefs:c,selectedColumn:d,columnPosition:f,rowData:y,rowDataAssetWise:S,socketSubscribedEvents:w,positionIndex:E,positionIndexAssetWise:_,arPositionSymbolNamesForSocket:L,inTotalPnl:P,inTotalPnlAssetWise:V,inTotalNetQuantity:ne,inTotalBuyNetQuantity:ee,inTotalSellNetQuantity:re,inTotalNetQuantityAssetWise:F,inTotalBuyNetQuantityAssetWise:U,inTotalSellNetQuantityAssetWise:Y,tempSlPosition:K,tempSlPositionAssetWise:Ce,tempTargetPosition:Q,tempTargetPositionAssetWise:Ne,slDetails:xe,slDetailsAssetWise:fe,targetDetails:q,targetDetailsAssetWise:Pe,tempMtmLevelDetails:Se,tempMtmLevelDetailsAssetWise:ge,mtmLevelDetails:le,mtmLevelDetailsAssetWise:ie,allStoplossDetails:ye,allTargetDetails:Re,doAlertUserWhenMtmLevelHit:$,doAlertUserWhenMtmLevelHitAssetWise:Qe,stAlertMsgWhenMtmLevelHit:Ge,stAlertMsgWhenMtmLevelHitAssetWise:et,showMtmLevelHitModal:Je,symbolMetaData:it,socketSymbolData:jt,positionSettingModel:Si,favouriteSetting:Kt,isSaveColumnPositionChanged:fi,defaultColDef:gi,gridApi:tt,gridApiAssetWise:ae,columnApi:G,columnApiAssetWise:H,rowHeight:Ee,getRowId:He,gridOptions:Ae,gridOptionsAssetWise:Lt,stMtmHitAssetName:ut,realTimeUnderlyingAssetData:Ri,allAssetUnderlyingData:Gi,selectedPositionRowsAssetWise:me,reversePositionModel:fr,getSymbolSubscribeNameDetails:Ht,connectSocketForRealtimeData:Pt,subscribeForDynamicEvents:Z,setRealTimeTableData:ze,calculateTotalPnl:yi,calculateTotalPnlAssetWise:mi,showHumanReadableMtm:ce,removeMtmLevelSl:Ze,removeMtmLevelSlAssetWise:we,unsubscribeForDynamicEvents:wt,copyObject:We,onSelectionChanged:lt,onSelectionChangedAssetWise:_i,selectRowIfSelectionAvailable:ti,unSelectRows:oi,onGridSizeChanged:Rt,onGridAssetWiseSizeChanged:qr,onFirstDataRendered:_o,onGridReady:si,onGridAssetWiseReady:D,showSlModalFn:C,modifyStaticStoploss:de,changeStoplossType:Tt,removeStoploss:Fe,resetStoplossDetails:ct,resetTargetDetails:Qt,showStoplossModal:Bt,hideStoplossModal:zt,addTrailingStopLoss:Qi,closeSlModalFn:z,showTargetModalFn:pe,showTargetModal:Ye,hideTargetModal:$e,addTarget:x,closeTargetModalFn:Wt,removeTarget:Vt,closePosition:Ui,closePositionAssetWise:Vi,closeAllPositionForSingleAsset:An,modifyStaticTarget:co,setBuySellSymbol:bo,setMtmLevel:ys,setMtmLevelAssetWise:ms,closeMtmLevelSlPopup:on,closeMtmLevelSlPopupAssetWise:nn,changeMtmLevel:Cs,changeMtmLevelAssetWise:Zl,hideMtmLevelModel:$l,closeAllPositionMtmLevelModel:Ln,openPositionSetting:Ss,hidePositionSetting:Tr,savePositionSetting:Or,saveFavouriteSettingApi:Do,savePositionSelectedColumn:an,applyPositionColumnSetting:Ro,onColumnChanged:Mn,saveColumnPosition:sn,columnPositionChanged:ln,resetColumnPositionAndColumnSetting:la,removeAssetWiseMtm:Nn,setRealTimeUnderlyingAssetData:ua,resetAllData:ws,getUnderlyingData:Xr,getRealTimeDataForAssetWise:Ts,stopRealTimeData:ca,callAllUnderlyingApi:da,hideReversePositionModel:Os,openReversePositionModel:eu,reversePositionSubmit:tu,get moment(){return he},get config(){return ht},get AgGridVue(){return Eo},onMounted:Gt,ref:g,toRefs:_t,watch:Ke,get useAppStore(){return pi},CloseBtnCellRenderer:Qf,TslBtnCellRenderer:qf,SlCellRenderer:Xf,TargetBtnCellRenderer:Jf,TargetCellRenderer:Zf,SymbolNameCellRenderer:$f,get axios(){return yt},get useTheme(){return Yi},get DraggableResizableVue(){return Jo},get sharedFunctions(){return ot},nextTick:dr};return Object.defineProperty(Fn,"__isScriptSetup",{enumerable:!1,value:!0}),Fn}},t0=ki(e0,[["render",$L]]),i0={class:"d-flex gap-1 mt-1"},eh=vi({__name:"OrderBookAction",props:["params"],setup(n){Gt(()=>{(e.params.value.data.stBrokerStatus=="pending"||e.params.value.data.stBrokerStatus=="partial")&&(t.value=!0)});const e=_t(n),t=g(!1),r=()=>{e.params.value.cancelOrder(e.params.value.data)},o=()=>{e.params.value.editBtnClicked(e.params.value.data)},a=()=>{e.params.value.showSingleOrderHistory(e.params.value.data)};return(s,l)=>(R(),N("span",i0,[p(Dt,{location:"top"},{activator:v(({props:u})=>[p(_e,pt(u,{icon:"bx-show",onClick:l[0]||(l[0]=c=>a()),class:"text-primary cursor-pointer"}),null,16)]),default:v(()=>[l[3]||(l[3]=h("span",null,"Show Order History",-1))]),_:1}),t.value?(R(),at(Dt,{key:0,location:"top"},{activator:v(({props:u})=>[t.value?(R(),at(_e,pt({key:0},u,{icon:"bx-pencil",onClick:l[1]||(l[1]=c=>o()),class:"text-success cursor-pointer"}),null,16)):De("",!0)]),default:v(()=>[l[4]||(l[4]=h("span",null,"Edit Limit Order",-1))]),_:1})):De("",!0),t.value?(R(),at(Dt,{key:1,location:"top"},{activator:v(({props:u})=>[t.value?(R(),at(_e,pt({key:0},u,{icon:"bx-x-circle",onClick:l[2]||(l[2]=c=>r()),class:"text-error cursor-pointer"}),null,16)):De("",!0)]),default:v(()=>[l[5]||(l[5]=h("span",null,"Cancel order",-1))]),_:1})):De("",!0)]))}}),r0={key:0,class:"cursor-pointer"},o0={key:1},th=vi({__name:"InfoCellRenderer",props:["params"],setup(n){Gt(()=>{});const e=_t(n);return g(!1),(t,r)=>nt(e).params.value.data.stMessage?(R(),N("u",r0,[p(Dt,{activator:"parent",location:"top"},{default:v(()=>[M(k(nt(e).params.value.data.stMessage),1)]),_:1}),r[0]||(r[0]=M(" Error Msg "))])):(R(),N("span",o0," - "))}}),n0={class:"d-flex flex-wrap justify-space-between"},a0={class:"d-flex flex-wrap gap-4 my-1 align-center",style:{"font-size":"12px"}},s0={class:"font-weight-bold"},l0={class:"font-weight-bold"},u0={class:"font-weight-bold"},c0={class:"font-weight-bold"},d0={class:"font-weight-bold"},p0={class:"d-flex gap-4 my-1 justify-end"},f0={class:"text-white"},h0={class:"d-flex justify-space-between"},v0={class:"d-flex flex-wrap gap-4"},g0={class:"custom-flex-xs-100 custom-flex-sm-49 custom-flex-md-32 custom-flex-lg-32"},y0={class:"custom-flex-xs-100 custom-flex-sm-49 custom-flex-md-32 custom-flex-lg-32"},m0={key:0,class:"custom-flex-xs-100 custom-flex-sm-49 custom-flex-md-32 custom-flex-lg-32"},C0={class:"bg-primary px-2 py-2 d-flex justify-space-between"},S0={class:"d-flex w-100"},w0={class:"custom-flex-50"},T0={class:"custom-flex-50"},O0={class:"bg-primary px-2 py-2 d-flex justify-space-between"},P0={class:"text-white"};function E0(n,i,e,t,r,o){return R(),N("div",null,[h("div",n0,[h("div",a0,[h("div",null,[i[14]||(i[14]=M(" Total Orders : ")),h("span",s0,k(t.rowData.length),1)]),h("div",null,[i[15]||(i[15]=M(" Pending : ")),h("span",l0,k(t.orderStatusCount.pending),1)]),h("div",null,[i[16]||(i[16]=M(" Executed : ")),h("span",u0,k(t.orderStatusCount.executed),1)]),h("div",null,[i[17]||(i[17]=M(" Rejected : ")),h("span",c0,k(t.orderStatusCount.rejected),1)]),h("div",null,[i[18]||(i[18]=M(" Cancelled : ")),h("span",d0,k(t.orderStatusCount.cancelled),1)])]),h("div",p0,[p(Le,{density:"compact",variant:"outlined",onClick:t.exportToCsv},{default:v(()=>i[19]||(i[19]=[M("Export CSV")])),_:1}),p(yr,{location:"top left",transition:!1},{activator:v(({props:a})=>[p(_e,pt({icon:"bx-cog",class:"cursor-pointer",color:"secondary"},a),null,16)]),default:v(()=>[p(rr,null,{default:v(()=>[p(It,null,{default:v(()=>[p(Ci,{class:"cursor-pointer custom-dropdown-hover",onClick:t.openOrderBookSetting},{default:v(()=>i[20]||(i[20]=[M(" Column Setting ")])),_:1})]),_:1})]),_:1})]),_:1})])]),p(t.AgGridVue,{style:{height:"425px"},class:Et(t.global.name.value=="dark"?"ag-theme-balham-dark":"ag-theme-balham"),columnDefs:t.columnDefs,rowData:t.rowData,defaultColDef:t.defaultColDef,rowHeight:t.rowHeight,getRowNodeId:t.getRowNodeId,gridOptions:t.gridOptions,onGridReady:t.onGridReady,onGridSizeChanged:t.onGridSizeChanged,onFirstDataRendered:t.onFirstDataRendered},null,8,["class","columnDefs","rowData","defaultColDef","rowHeight","getRowNodeId","gridOptions"]),p(Ai,{modelValue:t.options.modelValue,"onUpdate:modelValue":i[11]||(i[11]=a=>t.options.modelValue=a),persistent:"",width:"540"},{default:v(()=>[p(t.DraggableResizableVue,{className:"",resizable:!1,"drag-handle":".handle"},{default:v(()=>[p(ui,null,{default:v(()=>[h("div",{class:Et(`bg-${t.options.modalType} px-2 py-2 d-flex justify-space-between handle`)},[h("h3",f0,k(t.options.orderData.stTransactionType)+" : "+k(t.options.orderData.stSymbolName),1),p(_e,{class:"mt-1",icon:"bx-x-circle",onClick:t.modalCancelButtonClick})],2),p(Ft,null,{default:v(()=>[p(Di,null,{default:v(()=>[p(dt,null,{default:v(()=>[h("div",h0,[h("div",null,[p(Hi,null,{default:v(()=>i[21]||(i[21]=[M("LTP")])),_:1}),i[23]||(i[23]=M(": ")),p(Dt,{location:"top"},{activator:v(({props:a})=>[t.inLtp?(R(),N("span",pt({key:0,class:"cursor-pointer",onClick:t.updateLimitOrderPrice},a),[h("b",null,k(t.inLtp),1)],16)):De("",!0)]),default:v(()=>[i[22]||(i[22]=h("span",null,"Click to set this as limit price",-1))]),_:1})]),i[24]||(i[24]=h("div",null,null,-1))])]),_:1})]),_:1}),p(Di,null,{default:v(()=>[p(dt,{xs:"12",sm:"12",md:"12"},{default:v(()=>[h("div",v0,[p(ei,{variant:t.options.orderData.stOrderType=="LIMIT"?"flat":"outlined",onClick:i[0]||(i[0]=a=>t.options.orderData.stOrderType="LIMIT"),density:"compact",color:t.options.orderData.stTransactionType=="BUY"?"success":"error",ripple:!1},{default:v(()=>i[25]||(i[25]=[M(" Limit ")])),_:1},8,["variant","color"]),p(ei,{variant:t.options.orderData.stOrderType=="MARKET"?"flat":"outlined",onClick:i[1]||(i[1]=a=>t.options.orderData.stOrderType="MARKET"),density:"compact",color:t.options.orderData.stTransactionType=="BUY"?"success":"error",ripple:!1},{default:v(()=>i[26]||(i[26]=[M(" Market ")])),_:1},8,["variant","color"]),p(ei,{variant:t.options.orderData.stOrderType=="SL-L"?"flat":"outlined",onClick:i[2]||(i[2]=a=>t.options.orderData.stOrderType="SL-L"),density:"compact",color:t.options.orderData.stTransactionType=="BUY"?"success":"error",ripple:!1},{default:v(()=>i[27]||(i[27]=[M(" SL-L ")])),_:1},8,["variant","color"]),p(ei,{variant:t.options.orderData.stOrderType=="SL-M"?"flat":"outlined",onClick:i[3]||(i[3]=a=>t.options.orderData.stOrderType="SL-M"),density:"compact",color:t.options.orderData.stTransactionType=="BUY"?"success":"error",ripple:!1},{default:v(()=>i[28]||(i[28]=[M(" SL-M ")])),_:1},8,["variant","color"])])]),_:1})]),_:1})]),_:1}),p(Ft,{class:"d-flex flex-wrap gap-2"},{default:v(()=>[h("div",g0,[p(Hi,null,{default:v(()=>[M("Qty (Lot size:"+k(t.options.orderData.inQuantity/t.inLotSize)+" ",1),t.lotSizeLoading?(R(),at(Ti,{key:0,size:16,width:"3",color:"primary",indeterminate:"",class:"ml-1"})):De("",!0),i[29]||(i[29]=M(") "))]),_:1}),p(Jt,{density:"compact",class:"custom-remove-input-arrow",modelValue:t.options.orderData.inQuantity,"onUpdate:modelValue":i[6]||(i[6]=a=>t.options.orderData.inQuantity=a),type:"number",placeholder:"Enter Qty",onChange:t.changeEditModelQty,onKeydown:t.handlePriceKeydown},{"prepend-inner":v(()=>[p(_e,{class:"cursor-pointer",disabled:"",icon:"bx-minus",onClick:i[4]||(i[4]=a=>t.incrementDecrementLotSize("decrement"))})]),"append-inner":v(()=>[p(_e,{class:"cursor-pointer",icon:"bx-plus",onClick:i[5]||(i[5]=a=>t.incrementDecrementLotSize("increment"))})]),_:1},8,["modelValue"])]),h("div",y0,[p(Hi,null,{default:v(()=>[M("Price (Tick size: "+k(t.inTickSize)+")",1)]),_:1}),p(Jt,{density:"compact",modelValue:t.options.orderData.inPrice,"onUpdate:modelValue":i[7]||(i[7]=a=>t.options.orderData.inPrice=a),type:"number",placeholder:"Enter Price",disabled:t.options.orderData.stOrderType=="MARKET"||t.options.orderData.stOrderType=="MARKET_PROTECTION"||t.options.orderData.stOrderType=="SL-M",min:"0",step:t.inTickSize,onKeyup:Ei(t.modalUpdateButtonClick,["enter"]),onFocus:t.selectAllText,autofocus:""},null,8,["modelValue","disabled","step"])]),t.options.orderData.stOrderType=="SL-L"||t.options.orderData.stOrderType=="SL-M"?(R(),N("div",m0,[p(Hi,null,{default:v(()=>i[30]||(i[30]=[M("Trigger Price")])),_:1}),p(Jt,{density:"compact",modelValue:t.options.orderData.inTriggerPrice,"onUpdate:modelValue":i[8]||(i[8]=a=>t.options.orderData.inTriggerPrice=a),type:"number",placeholder:"Enter trigger price",min:"0",step:"0.05",onKeyup:Ei(t.modalUpdateButtonClick,["enter"])},null,8,["modelValue"])])):De("",!0)]),_:1}),p(Ft,null,{default:v(()=>[p(or,{modelValue:t.isEditAllOrderPrice,"onUpdate:modelValue":i[9]||(i[9]=a=>t.isEditAllOrderPrice=a),color:t.options.modalType},{label:v(()=>[h("div",null,[i[31]||(i[31]=M(" Edit ")),h("span",{class:Et(["font-weight-bold",`text-${t.options.modalType}`])},"PRICE",2),i[32]||(i[32]=M(" of all ")),h("span",{class:Et(`font-weight-bold text-${t.options.modalType}`)},k(t.options.previousOrderData.stTransactionType),3),i[33]||(i[33]=M(" orders of same symbol with ")),h("span",{class:Et(`font-weight-bold text-${t.options.modalType}`)},k(t.options.previousOrderData.stOrderType),3),i[34]||(i[34]=M(" order "))])]),_:1},8,["modelValue","color"]),p(or,{modelValue:t.isEditAllOrderQty,"onUpdate:modelValue":i[10]||(i[10]=a=>t.isEditAllOrderQty=a),color:t.options.modalType},{label:v(()=>[h("div",null,[i[35]||(i[35]=M(" Edit ")),h("span",{class:Et(["font-weight-bold",`text-${t.options.modalType}`])},"QTY",2),i[36]||(i[36]=M(" of all ")),h("span",{class:Et(`font-weight-bold text-${t.options.modalType}`)},k(t.options.previousOrderData.stTransactionType),3),i[37]||(i[37]=M(" orders of same symbol with ")),h("span",{class:Et(`font-weight-bold text-${t.options.modalType}`)},k(t.options.previousOrderData.stOrderType),3),i[38]||(i[38]=M(" order "))])]),_:1},8,["modelValue","color"])]),_:1}),p(Ft,{class:"d-flex justify-end gap-2"},{default:v(()=>[p(Le,{class:"custom-flex-50",color:"secondary",variant:"tonal",onClick:t.modalCancelButtonClick},{default:v(()=>i[39]||(i[39]=[M(" Cancel ")])),_:1}),p(Le,{color:t.options.modalType,class:"custom-flex-50",onClick:t.modalUpdateButtonClick},{default:v(()=>i[40]||(i[40]=[M(" Update Order ")])),_:1},8,["color"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),p(Ai,{modelValue:t.orderBookSettingModel,"onUpdate:modelValue":i[12]||(i[12]=a=>t.orderBookSettingModel=a),class:"v-dialog-sm",persistent:!0,scrollable:"","max-width":"350"},{default:v(()=>[p(ui,null,{default:v(()=>[h("div",C0,[i[41]||(i[41]=h("h3",{class:"text-white"},"Column Setting",-1)),p(_e,{class:"mt-1",icon:"bx-x-circle",onClick:t.hideOrderBookSetting})]),p(Ft,null,{default:v(()=>[i[42]||(i[42]=h("div",{class:"d-flex w-100 mb-4"},[h("div",{class:"custom-flex-50"},[h("b",{class:""},"Column")]),h("div",{class:"custom-flex-50"},[h("b",{class:""},"Select Column")])],-1)),(R(!0),N(rt,null,kt(t.columnDefs,a=>(R(),N("div",S0,[h("div",w0,k(a?.headerName),1),h("div",T0,[p(or,{modelValue:t.selectedColumn[a?.field].columnVisible,"onUpdate:modelValue":s=>t.selectedColumn[a?.field].columnVisible=s},null,8,["modelValue","onUpdate:modelValue"])])]))),256))]),_:1}),p(Ft,{class:"d-flex flex-wrap justify-end gap-2 custom-no-scroll"},{default:v(()=>[p(Le,{class:"custom-flex-48 custom-flex-xs-100",color:"secondary",variant:"tonal",onClick:t.hideOrderBookSetting},{default:v(()=>i[43]||(i[43]=[M(" Cancel ")])),_:1}),p(Le,{class:"custom-flex-48 custom-flex-xs-100",onClick:t.saveOrderBookSetting},{default:v(()=>i[44]||(i[44]=[M(" Save Setting ")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),p(Ai,{modelValue:t.singleOrderHistoryModel,"onUpdate:modelValue":i[13]||(i[13]=a=>t.singleOrderHistoryModel=a),persistent:!0,scrollable:"","max-width":"800"},{default:v(()=>[p(ui,null,{default:v(()=>[h("div",O0,[h("h3",P0,"Order History : "+k(t.currentOrderHistoryId),1),p(_e,{class:"mt-1",icon:"bx-x-circle",onClick:t.hideSingleOrderDetailModel})]),p(Ft,null,{default:v(()=>[p(Zc,{headers:t.orderHistorycols,items:t.currentOrderHistory,density:"compact",loading:t.orderHistoryLoading,"items-per-page":10},null,8,["headers","items","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}const _0={__name:"OrderBook",props:["stTradingWindowId","orderBookData","getActiveTabData","showMessageOnOnlickWindow","cancelAllOrderButtonLoading","setCancelAllOrderButtonLoading","brokerData"],setup(n,{expose:i}){i(),he.tz.setDefault("Asia/Kolkata");const{global:e}=Yi(),t=n,r=_t(t),o=pi(),a=g([{field:"stSymbolName",headerName:"Symbol Name",sortable:!0,hide:!1,minWidth:220,cellStyle:{}},{field:"stOrderType",headerName:"Type",sortable:!0,hide:!1,minWidth:100,cellStyle:{},cellRenderer:H=>H.data.stOrderType!=null?H.data.stOrderType:"-"},{field:"stTransactionType",headerName:"Side",sortable:!0,hide:!1,minWidth:100,cellStyle:{},cellClass:H=>H.data.stTransactionType=="BUY"?"text-success":"text-error"},{field:"inQuantity",headerName:"Qty",sortable:!0,hide:!1,minWidth:70,cellStyle:{},cellRenderer:H=>H.data.inQuantity},{field:"inRemainingQuantity",headerName:"Rem Qty",sortable:!0,hide:!1,minWidth:70,cellStyle:{},cellRenderer:H=>H.data.inRemainingQuantity},{field:"inOrderPrice",headerName:"Order Price",sortable:!0,hide:!1,minWidth:95,cellStyle:{},cellRenderer:H=>H.data.inOrderPrice},{field:"inTradedPrice",headerName:"Traded Price",sortable:!0,hide:!1,minWidth:95,cellStyle:{},cellRenderer:H=>H.data.inTradedPrice!=0?H.data.inTradedPrice:"-"},{field:"inTriggerPrice",headerName:"Trigger Price",sortable:!0,hide:!1,minWidth:95,cellStyle:{},cellRenderer:H=>H.data.inTriggerPrice!=0?H.data.inTriggerPrice:"-"},{field:"stBrokerStatus",headerName:"Status",sortable:!0,hide:!1,minWidth:100,cellStyle:{},cellClass:H=>{let Ee="text-uppercase ";switch(H.data.stBrokerStatus){case"executed":Ee+="text-success";break;case"rejected":Ee+="text-error";break;case"cancelled":Ee+="text-info";break;case"pending":Ee+="text-warning";break;default:Ee+="text-secondary";break}return Ee}},{field:"stFetchTime",headerName:"Time/Date",sortable:!0,sort:"desc",hide:!1,minWidth:170,cellStyle:{},cellRenderer:H=>H.data.stFetchTime+" / "+he(H.data.stFetchDate,"YYYY-MM-DD",!0).format("DD-MM-YYYY")},{field:"stOrderId",headerName:"Order Id",sortable:!0,sort:"desc",hide:!1,minWidth:140,cellStyle:{},cellRenderer:H=>H.data.stOrderId},{field:"stMessage",headerName:"Error Msg.",sortable:!1,hide:!1,minWidth:100,cellStyle:{},cellRenderer:th},{field:"stActionColumn",headerName:"Action",sortable:!1,hide:!1,minWidth:100,cellStyle:{},cellRenderer:eh,cellRendererParams:{cancelOrder:H=>{ge(H)},editBtnClicked:H=>{fe(H)},showSingleOrderHistory:H=>{Kt(H)}}}]),s=g({stSymbolName:{columnVisible:!0},stOrderType:{columnVisible:!0},stTransactionType:{columnVisible:!0},inQuantity:{columnVisible:!0},inRemainingQuantity:{columnVisible:!0},inOrderPrice:{columnVisible:!0},inTradedPrice:{columnVisible:!0},inTriggerPrice:{columnVisible:!0},stBrokerStatus:{columnVisible:!0},stFetchTime:{columnVisible:!0},stOrderId:{columnVisible:!0},stMessage:{columnVisible:!0},stActionColumn:{columnVisible:!0}}),l=g([]),u=g({initialWidth:100,sortable:!1,resizable:!0}),c=g(null),d=g(null),f=g(30),y=g(null),S=g({suppressCellFocus:!0}),w=g({modelValue:!1,modalType:"success",orderData:{}}),E=g(r.brokerData.value?r.brokerData.value.stIdentificationToken:null),_=g(0),L=g(.05),P=g(null),V=g(null),ne=g(!1),ee=g({}),re=g(!1),F=g(!1),U=g(!1),Y=g([]),K=g(null),Ce=g([{title:"Date",key:"stFetchDate",sortable:!1,minWidth:125},{title:"Time",key:"stFetchTime",sortable:!1,minWidth:100},{title:"Quantity",key:"inQuantity",sortable:!1},{title:"Remaining Quantity",key:"inRemainingQuantity",sortable:!1},{title:"Filled Quantity",key:"inFilledQuantity",sortable:!1},{title:"Average Price",key:"inAvgPrice",sortable:!1},{title:"Status",key:"stStatus",sortable:!1,minWidth:150}]),Q=g({pending:0,executed:0,rejected:0,cancelled:0}),Ne=g(!1),xe=g(!1);Ke(r.orderBookData,(H,Ee)=>{l.value=H,Q.value={pending:0,executed:0,rejected:0,cancelled:0};for(let He=0;He<l.value.length;He++){const Ae=l.value[He];Ae.stBrokerStatus=="pending"?Q.value.pending++:Ae.stBrokerStatus=="executed"?Q.value.executed++:Ae.stBrokerStatus=="rejected"?Q.value.rejected++:Ae.stBrokerStatus=="cancelled"&&Q.value.cancelled++}setTimeout(()=>{c.value?.refreshCells({force:!0})},1)},{deep:!0}),Ke(r.brokerData,(H,Ee)=>{E.value=H?H.stIdentificationToken:null},{deep:!0}),Gt(async()=>{Si(),l.value=[...r.orderBookData.value]});const fe=async H=>{let Ee={stSymbolName:H.stSymbolName};ne.value=!0,await yt.post(ht.orderApiUrl+"/symbol/getsymbollotsize",Ee).then(He=>{He.data.status=="success"?(_.value=He.data.data.inLotSize,L.value=He.data.data.inTickSize,P.value=He.data.data.inLtp,V.value=He.data.data.stDpSymbolName):o.toastMessage({color:"error",message:He.data.msg})}).catch(He=>{console.log("err"),console.log(He)}).finally(()=>{ne.value=!1}),o.socketEmit("GET_TWD_DATA",{stSelectedSymbol:[V.value]},"TWD_"+V.value,q),w.value.modalType=H.stTransactionType=="BUY"?"success":"error",w.value.modelValue=!0,w.value.orderData={...H},w.value.previousOrderData=ot.deepCopy(H)};function q(H){try{const[Ee,He,Ae,Lt,ut,Ri]=H;P.value=He}catch(Ee){console.log("error",Ee)}}const Pe=()=>{o.socketEmit("STOP_DATA",{stEventName:"TWD_"+V.value}),V.value=null,w.value.modalType="",w.value.modelValue=!1,w.value.orderData={},_.value=null,L.value=.05,Ne.value=!1,xe.value=!1},Se=()=>{if(w.value.orderData.stOrderType=="LIMIT"&&w.value.orderData.inPrice==0){o.toastMessage({color:"error",message:"Order price cannot be 0 when order type is limit order,"});return}if(w.value.orderData.stOrderType=="SL-L"||w.value.orderData.stOrderType=="SL-M"){if(!isNaN(w.value.orderData.inTriggerPrice)&&Number(w.value.orderData.inTriggerPrice)<=0&&!w.value.orderData.inTriggerPrice)return o.toastMessage({color:"error",message:"Please enter valid trigger price."}),!1;if(w.value.orderData.stTransactionType=="BUY"){if(w.value.orderData.inPrice<=w.value.orderData.inTriggerPrice)return o.toastMessage({color:"error",message:"Order price should be more than trigger price."}),!1}else if(w.value.orderData.stTransactionType=="SELL"&&w.value.orderData.inPrice>=w.value.orderData.inTriggerPrice)return o.toastMessage({color:"error",message:"Order price should be less than trigger price."}),!1}let H=[];if(Ne.value||xe.value){let He=w.value.previousOrderData;He&&(H=l.value.filter(Ae=>{const Lt=w.value.orderData;if(Ae.stOrderId==Lt.stOrderId)return Ae.inPrice=Lt.inPrice,Ae.inQuantity=Lt.inQuantity,Ae.inTriggerPrice=Lt.inTriggerPrice,Ae.stOrderType=Lt.stOrderType,Ae.stTransactionType=Lt.stTransactionType,Ae;if(Ae.stOrderType==He.stOrderType&&Ae.stSymbolName==Lt.stSymbolName&&Ae.stTransactionType==Lt.stTransactionType&&Ae.stBrokerStatus=="pending")return Ne.value&&(Ae.inPrice=Lt.inPrice),xe.value&&(Ae.inQuantity=Lt.inQuantity),Ae.inTriggerPrice=Lt.inTriggerPrice,Ae.stOrderType=Lt.stOrderType,Ae.stTransactionType=Lt.stTransactionType,Ae}))}else H=[w.value.orderData];const Ee={stKey:E.value,stTradingWindowId:r?.stTradingWindowId?.value,stAction:"EDIT_ORDER_BUTTON",stOrders:H};o.editOrderApi(Ee).then(He=>{Pe(),r.getActiveTabData.value(),He.status=="success"?He?.data&&He.data?.["0"]?.msg&&r.showMessageOnOnlickWindow.value(He.data?.["0"]?.msg):r.showMessageOnOnlickWindow.value(He.msg)}).catch(He=>{console.log("err :>> ",He),Pe()})},ge=H=>{if(r.cancelAllOrderButtonLoading.value)o.toastMessage({color:"success",message:"Cancel order is already in progress. Please wait for it to complete."});else{r.setCancelAllOrderButtonLoading.value(!0);const Ee={stKey:E.value,stTradingWindowId:r?.stTradingWindowId?.value,stAction:"CANCEL_SINGLE_ORDER",stOrders:[H]};o.cancelOrderApi(Ee).then(He=>{r.getActiveTabData.value(),r.setCancelAllOrderButtonLoading.value(!1),He.status=="success"?He?.data&&He.data?.["0"]?.msg&&r.showMessageOnOnlickWindow.value(He.data?.["0"]?.msg):r.showMessageOnOnlickWindow.value(He.msg)}).catch(He=>{r.setCancelAllOrderButtonLoading.value(!1),console.log("err :>> ",He)})}},le=H=>{H=="MARKET"?(w.value.orderData.stOrderType="MARKET",w.value.orderData.inPrice=0):w.value.orderData.stOrderType=H},ie=()=>{c.value.sizeColumnsToFit()},ye=H=>{},Re=H=>{try{c.value=H.api,d.value=H.columnApi,c.value.sizeColumnsToFit()}catch(Ee){console.log(Ee)}},$=()=>{if(l.value.length>0){let H="data:text/csv;charset=utf-8,";H+=[["Symbol Name","Type","Side","Qty","Rem Qty","Order Price","Traded Price","Trigger Price","Status","Time/Date","Order Id","Message"].join(","),...l.value.map(ut=>[ut.stSymbolName,ut.stOrderType,ut.stTransactionType,ut.inQuantity,ut.inRemainingQuantity,ut.inOrderPrice,ut.inTradedPrice,ut.inTriggerPrice,ut.stBrokerStatus,ut.stFetchTime+" / "+he(ut.stFetchDate,"YYYY-MM-DD",!0).format("DD-MM-YYYY"),ut.stOrderId,ot.senitizeString(ut.stMessage)].join(","))].join(`
`).replace(/(^\[)|(\]$)/gm,"");let He="Order_book_"+he().format("YYYY-MM-DD HH:mm:ss")+".csv",Ae=encodeURI(H),Lt=document.createElement("a");Lt.setAttribute("href",Ae),Lt.setAttribute("download",He),Lt.click()}else o.toastMessage({color:"error",message:"No data available to export."})};function Qe(){_.value&&(w.value.orderData.inQuantity=ot.calculateLotSize(w.value.orderData.inQuantity,ht.maxLots,_.value))}function Ge(H){_.value&&(w.value.orderData.inQuantity=ot.incrementDecrementLotSize(w.value.orderData.inQuantity,ht.maxLots,_.value,H))}function et(){re.value=!0}function Je(){re.value=!1}async function it(){ee.value={settings:{themeMode:o.stFavouriteSetting?.settings?.themeMode?o.stFavouriteSetting.settings.themeMode:"light",sidebarLayout:o.stFavouriteSetting?.settings?.sidebarLayout?o.stFavouriteSetting.settings.sidebarLayout:"vertical-sidebar",isSidebarCompact:o.stFavouriteSetting?.settings?.isSidebarCompact?o.stFavouriteSetting.settings.isSidebarCompact:!1,isOpenPageInNewTab:o.stFavouriteSetting?.settings?.isOpenPageInNewTab?o.stFavouriteSetting.settings.isOpenPageInNewTab:!1,showTicker:o.stFavouriteSetting?.settings?.showTicker?o.stFavouriteSetting.settings.showTicker:!1,showDisciplinePopup:o.stFavouriteSetting?.settings?o.stFavouriteSetting.settings?.showDisciplinePopup==null||o.stFavouriteSetting.settings?.showDisciplinePopup==null?!0:o.stFavouriteSetting.settings?.showDisciplinePopup:!1},oneClick:{selectedSegment:o.stFavouriteSetting?.oneClick?.selectedSegment?o.stFavouriteSetting.oneClick.selectedSegment:"OPTIONS",selectedAsset:o.stFavouriteSetting?.oneClick?.selectedAsset?o.stFavouriteSetting.oneClick.selectedAsset:"BANKNIFTY",selectedProductType:o.stFavouriteSetting?.oneClick?.selectedProductType?o.stFavouriteSetting.oneClick.selectedProductType:"MARGIN",selectedOrderType:o.stFavouriteSetting?.oneClick?.selectedOrderType?o.stFavouriteSetting.oneClick.selectedOrderType:"MARKET",selectedClosePositionOrderType:o.stFavouriteSetting?.oneClick?.selectedClosePositionOrderType?o.stFavouriteSetting.oneClick.selectedClosePositionOrderType:"MARKET",selectedMarketProtectionPercentage:o.stFavouriteSetting?.oneClick?.selectedMarketProtectionPercentage?o.stFavouriteSetting.oneClick.selectedMarketProtectionPercentage:10,selectedTypeOfPositions:o.stFavouriteSetting?.oneClick?.selectedTypeOfPositions?o.stFavouriteSetting.oneClick.selectedTypeOfPositions:"Equity Derivatives",selectedCallStrikePrice:o.stFavouriteSetting?.oneClick?.selectedCallStrikePrice?o.stFavouriteSetting.oneClick.selectedCallStrikePrice:0,selectedPutStrikePrice:o.stFavouriteSetting?.oneClick?.selectedPutStrikePrice?o.stFavouriteSetting.oneClick.selectedPutStrikePrice:0,setPredefinedSl:o.stFavouriteSetting?.oneClick?.setPredefinedSl?o.stFavouriteSetting.oneClick.setPredefinedSl:!1,inPredefinedSl:o.stFavouriteSetting?.oneClick?.inPredefinedSl?o.stFavouriteSetting.oneClick.inPredefinedSl:null,setPredefinedTarget:o.stFavouriteSetting?.oneClick?.setPredefinedTarget?o.stFavouriteSetting.oneClick.setPredefinedTarget:!1,inPredefinedTarget:o.stFavouriteSetting?.oneClick?.inPredefinedTarget?o.stFavouriteSetting.oneClick.inPredefinedTarget:null,oneClickTradeWindow:{positions:o.stFavouriteSetting?.oneClick?.oneClickTradeWindow?.positions?o.stFavouriteSetting.oneClick.oneClickTradeWindow.positions:null,orderBook:s.value}}};let H=await jt(ee.value);if(H.status=="success"){re.value=!1;for(let Ee=0;Ee<a.value.length;Ee++){const He=a.value[Ee];a.value[Ee].hide=!s.value[He.field].columnVisible}setTimeout(()=>{c.value.sizeColumnsToFit()},1),o.toastMessage({color:H.status,message:"Order book settings saved successfully."})}else o.toastMessage({color:H.status,message:"Failed to save order book settings."})}async function jt(H){try{let Ee=await yt.post("/favourite-setting/savefavouritesetting",H);return Ee.data.status=="success"&&o.setFavoutiteSettings(H),Ee.data}catch(Ee){console.log(Ee)}}function Si(){o.stFavouriteSetting?.oneClick?.oneClickTradeWindow?.orderBook&&(s.value=o.stFavouriteSetting?.oneClick?.oneClickTradeWindow?.orderBook);for(let H=0;H<a.value.length;H++){const Ee=a.value[H];a.value[H].hide=!s.value[Ee.field].columnVisible}}function Kt(H){F.value=!0,U.value=!0,K.value=H.stOrderId;let Ee={stKey:E.value,stOrderId:H.stOrderId,stExtra:H.stExtra?H.stExtra:{}};o.getSingleOrderHistoryDetail(Ee).then(He=>{He.status=="success"?Y.value=He.data:o.toastMessage({color:He.status,message:He.msg})}).catch(He=>{console.log("err :>> ",He),o.toastMessage({color:"error",message:"error"})}).finally(()=>{U.value=!1})}function fi(){console.log("hideSingleOrderDetailModel"),F.value=!1,Y.value=[],K.value=null,U.value=!1}function gi(){w.value.orderData.inPrice=P.value}function tt(H){H.target.select()}function ae(H){H.key==="ArrowUp"?(H.preventDefault(),Ge("increment")):H.key==="ArrowDown"&&(H.preventDefault(),Ge("decrement"))}const G={global:e,definePropsData:t,props:r,store:o,columnDefs:a,selectedColumn:s,rowData:l,defaultColDef:u,gridApi:c,columnApi:d,rowHeight:f,getRowNodeId:y,gridOptions:S,options:w,stIdentificationToken:E,inLotSize:_,inTickSize:L,inLtp:P,stDpSymbolName:V,lotSizeLoading:ne,favouriteSetting:ee,orderBookSettingModel:re,singleOrderHistoryModel:F,orderHistoryLoading:U,currentOrderHistory:Y,currentOrderHistoryId:K,orderHistorycols:Ce,orderStatusCount:Q,isEditAllOrderPrice:Ne,isEditAllOrderQty:xe,editBtnClicked:fe,setRealTimeTableData:q,modalCancelButtonClick:Pe,modalUpdateButtonClick:Se,cancelOrderButtonClick:ge,radioButtonClick:le,onGridSizeChanged:ie,onFirstDataRendered:ye,onGridReady:Re,exportToCsv:$,changeEditModelQty:Qe,incrementDecrementLotSize:Ge,openOrderBookSetting:et,hideOrderBookSetting:Je,saveOrderBookSetting:it,saveFavouriteSettingApi:jt,applyorderBookColumnSetting:Si,openSingleOrderDetailModel:Kt,hideSingleOrderDetailModel:fi,updateLimitOrderPrice:gi,selectAllText:tt,handlePriceKeydown:ae,get AgGridVue(){return Eo},onMounted:Gt,ref:g,toRefs:_t,watch:Ke,get useAppStore(){return pi},OrderBookAction:eh,InfoCellRenderer:th,get useTheme(){return Yi},get sharedFunctions(){return ot},get DraggableResizableVue(){return Jo},get moment(){return he},get axios(){return yt},get config(){return ht}};return Object.defineProperty(G,"__isScriptSetup",{enumerable:!1,value:!0}),G}},b0=ki(_0,[["render",E0]]);function D0(n,i,e,t,r,o){return R(),at(t.AgGridVue,{style:{height:"425px"},class:Et(t.global.name.value=="dark"?"ag-theme-balham-dark":"ag-theme-balham"),columnDefs:t.columnDefs,rowData:t.rowData,defaultColDef:t.defaultColDef,rowHeight:t.rowHeight,getRowNodeId:t.getRowNodeId,gridOptions:t.gridOptions,onGridReady:t.onGridReady,onGridSizeChanged:t.onGridSizeChanged,onFirstDataRendered:t.onFirstDataRendered},null,8,["class","columnDefs","rowData","defaultColDef","rowHeight","getRowNodeId","gridOptions"])}const R0={__name:"TradeBook",props:["tradeBookData"],setup(n,{expose:i}){i(),he.tz.setDefault("Asia/Kolkata");const{global:e}=Yi(),t=n,r=_t(t),o=pi(),a=g([{field:"stSymbolName",headerName:"Symbol Name",sortable:!0,hide:!1,minWidth:150,cellStyle:{}},{field:"stProductType",headerName:"Product Type",sortable:!0,hide:!1,minWidth:80,cellStyle:{}},{field:"stTransactionType",headerName:"Side",sortable:!0,hide:!1,minWidth:80,cellStyle:{},cellClass:L=>L.data.stTransactionType=="BUY"?"text-success":L.data.stTransactionType=="SELL"?"text-error":""},{field:"inTradePrice",headerName:"Avg Price",sortable:!0,hide:!1,minWidth:80,cellStyle:{},cellRenderer:L=>L.data.inTradePrice},{field:"inTradedQuantity",headerName:"Net Qty",sortable:!0,hide:!1,minWidth:80,cellStyle:{},cellRenderer:L=>L.data.inTradedQuantity},{field:"stFetchTime",headerName:"Time/Date",sortable:!0,sort:"desc",hide:!1,minWidth:150,cellStyle:{},cellRenderer:L=>L.data.stFetchTime+" / "+he(L.data.stFetchDate,"YYYY-MM-DD",!0).format("DD-MM-YYYY")},{field:"stOrderId",headerName:"Order Id",sortable:!0,hide:!1,minWidth:150,cellStyle:{},cellRenderer:L=>L.data.stOrderId}]),s=g([]),l=g({initialWidth:100,sortable:!1,resizable:!0}),u=g(null),c=g(null),d=g(30),f=g(null),y=g({suppressCellFocus:!0});Gt(async()=>{s.value=[...r.tradeBookData.value]}),Ke(r.tradeBookData,(L,P)=>{s.value=L},{deep:!0});const _={global:e,definePropsData:t,props:r,store:o,columnDefs:a,rowData:s,defaultColDef:l,gridApi:u,columnApi:c,rowHeight:d,getRowNodeId:f,gridOptions:y,onGridSizeChanged:()=>{u.value.sizeColumnsToFit()},onFirstDataRendered:L=>{},onGridReady:L=>{try{u.value=L.api,c.value=L.columnApi,u.value.sizeColumnsToFit()}catch(P){console.log(P)}},nextTick:dr,onMounted:Gt,ref:g,toRefs:_t,watch:Ke,get AgGridVue(){return Eo},get useAppStore(){return pi},get moment(){return he},get useTheme(){return Yi}};return Object.defineProperty(_,"__isScriptSetup",{enumerable:!1,value:!0}),_}},x0=ki(R0,[["render",D0]]),A0={class:"mx-0 my-2"},L0={key:0},M0={class:"mx-0 mb-2 mt-4"},N0={key:1};function F0(n,i,e,t,r,o){return R(),N(rt,null,[h("div",A0,[p(Di,{style:{"font-size":"14px"}},{default:v(()=>[p(dt,{cols:"12",sm:"12",md:"3",lg:"6",class:"text-sm-center text-md-left px-3 py-2"},{default:v(()=>i[0]||(i[0]=[h("b",null,"Currently, we support only NSE F&O stock holdings:",-1)])),_:1}),p(dt,{cols:"12",sm:"4",md:"3",lg:"2",class:"text-sm-center text-md-right px-3 py-2"},{default:v(()=>[i[1]||(i[1]=M(" Total P&L: ")),i[2]||(i[2]=h("br",{class:"hidden-xs hidden-lg-and-up"},null,-1)),h("span",{class:Et([Number(t.supportedDataTable.inTotalPnl)>=0?"text-success":"text-error"])},[h("b",null,k(t.showHumanReadableMtm(t.supportedDataTable.inTotalPnl)),1)],2)]),_:1}),p(dt,{cols:"12",sm:"4",md:"3",lg:"2",class:"text-sm-center text-md-right px-3 py-2"},{default:v(()=>[i[3]||(i[3]=M(" Total Invested Value: ")),i[4]||(i[4]=h("br",{class:"hidden-xs hidden-lg-and-up"},null,-1)),M(" "+k(t.showHumanReadableMtm(t.supportedDataTable.inTotalInvestedValue)),1)]),_:1}),p(dt,{cols:"12",sm:"4",md:"3",lg:"2",class:"text-sm-center text-md-right px-3 pt-2 pb-3"},{default:v(()=>[i[5]||(i[5]=M(" Total Market Value: ")),i[6]||(i[6]=h("br",{class:"hidden-xs hidden-lg-and-up"},null,-1)),M(" "+k(t.showHumanReadableMtm(t.supportedDataTable.inTotalMarketValue)),1)]),_:1})]),_:1})]),h("div",null,[p(t.AgGridVue,{style:Xo("height:"+(t.unsupportedDataTable.rowData.length>0?"325px":"425px")),class:Et(t.global.name.value=="dark"?"ag-theme-balham-dark":"ag-theme-balham"),getRowId:t.getRowId,rowData:t.supportedDataTable.rowData,columnDefs:t.supportedDataTable.columnDefs,defaultColDef:t.supportedDataTable.defaultColDef,rowHeight:t.supportedDataTable.rowHeight,gridOptions:t.supportedDataTable.gridOptions,onGridReady:t.onSupportedHoldingsReady,onGridSizeChanged:t.onSupportedHoldingsSizeChanged},null,8,["style","class","rowData","columnDefs","defaultColDef","rowHeight","gridOptions"])]),t.unsupportedDataTable.rowData.length>0?(R(),N("div",L0,[h("div",M0,[p(Di,{style:{"font-size":"14px"}},{default:v(()=>[p(dt,{cols:"12",sm:"12",md:"3",lg:"6",class:"text-sm-center text-md-left px-3 py-1"},{default:v(()=>i[7]||(i[7]=[h("b",null,"The following stocks are currently in your holdings but are not supported by our platform:",-1),h("br",null,null,-1),M(" (Some broker do not provide LTP in holdings, in that case your P&L and Market value will be shown as Zero.) ")])),_:1}),p(dt,{cols:"12",sm:"4",md:"3",lg:"2",class:"text-sm-center text-md-right px-3 py-1"},{default:v(()=>[i[8]||(i[8]=M(" Total P&L: ")),i[9]||(i[9]=h("br",{class:"hidden-xs hidden-lg-and-up"},null,-1)),t.unsupportedDataTable.inTotalMarketValue>0?(R(),N("span",{key:0,class:Et([Number(t.unsupportedDataTable.inTotalPnl)>=0?"text-success":"text-error"])},[h("b",null,k(t.showHumanReadableMtm(t.unsupportedDataTable.inTotalPnl)),1)],2)):(R(),N("span",N0," 0 "))]),_:1}),p(dt,{cols:"12",sm:"4",md:"3",lg:"2",class:"text-sm-center text-md-right px-3 py-1"},{default:v(()=>[i[10]||(i[10]=M(" Total Invested Value: ")),i[11]||(i[11]=h("br",{class:"hidden-xs hidden-lg-and-up"},null,-1)),M(" "+k(t.showHumanReadableMtm(t.unsupportedDataTable.inTotalInvestedValue)),1)]),_:1}),p(dt,{cols:"12",sm:"4",md:"3",lg:"2",class:"text-sm-center text-md-right px-3 pt-1 pb-3"},{default:v(()=>[i[12]||(i[12]=M(" Total Market Value: ")),i[13]||(i[13]=h("br",{class:"hidden-xs hidden-lg-and-up"},null,-1)),M(" "+k(t.showHumanReadableMtm(t.unsupportedDataTable.inTotalMarketValue)),1)]),_:1})]),_:1})]),h("div",null,[p(t.AgGridVue,{style:{height:"325px"},class:Et(t.global.name.value=="dark"?"ag-theme-balham-dark":"ag-theme-balham"),getRowId:t.getRowId,rowData:t.unsupportedDataTable.rowData,columnDefs:t.unsupportedDataTable.columnDefs,defaultColDef:t.unsupportedDataTable.defaultColDef,rowHeight:t.unsupportedDataTable.rowHeight,gridOptions:t.unsupportedDataTable.gridOptions,onGridReady:t.onUnsupportedHoldingsGridReady,onGridSizeChanged:t.onUnsupportedHoldingsGridSizeChanged},null,8,["class","rowData","columnDefs","defaultColDef","rowHeight","gridOptions"])])])):De("",!0)],64)}const I0={__name:"Holdings",props:["holdingsData","socket","activeTab"],setup(n,{expose:i}){i(),he.tz.setDefault("Asia/Kolkata");const{global:e}=Yi(),t=n,r=_t(t),o=g([]),a=F=>F.data.stSymbolName+"_"+F.data.stExchange,s=g([{field:"stExchange",headerName:"Exchange",sortable:!0,hide:!1,minWidth:30,cellStyle:{}},{field:"stSymbolName",headerName:"Symbol Name",sortable:!0,hide:!1,minWidth:150,cellStyle:{}},{field:"inQuantity",headerName:"Qty",sortable:!0,hide:!1,minWidth:80,cellStyle:{},headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell",cellRenderer:F=>isNaN(F.data.inQuantity)?F.data.inQuantity:Number(F.data.inQuantity).toLocaleString("en-IN")},{field:"inLtp",headerName:"LTP",sortable:!0,hide:!1,minWidth:80,cellStyle:{},headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell",cellRenderer:F=>!isNaN(F.data.inLtp)&&typeof F.data.inLtp=="number"?F.data.inLtp.toFixed(2):F.data.inLtp},{field:"inAvgPrice",headerName:"Avg Price",sortable:!0,hide:!1,minWidth:80,cellStyle:{},headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell",cellRenderer:F=>isNaN(F.data.inAvgPrice)?F.data.inAvgPrice:F.data.inAvgPrice.toFixed(2)},{field:"inPnl",headerName:"P&L",sort:"desc",sortable:!0,hide:!1,minWidth:100,cellStyle:{},headerClass:"ag-right-aligned-header",cellClass:F=>F.data.inPnl>=0?"text-success ag-right-aligned-cell":"text-error ag-right-aligned-cell",cellRenderer:F=>E(F.data.inPnl)},{field:"inNetChangePercentage",headerName:"Net Change %",sortable:!0,hide:!1,minWidth:100,cellStyle:{},headerClass:"ag-right-aligned-header",cellClass:F=>F.data.inNetChangePercentage>=0?"text-success ag-right-aligned-cell":"text-error ag-right-aligned-cell",cellRenderer:F=>isNaN(F.data.inNetChangePercentage)?F.data.inNetChangePercentage:Number(F.data.inNetChangePercentage).toFixed(2)+" %"},{field:"inInvestedValue",headerName:"Invested Value",sortable:!0,hide:!1,minWidth:120,headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell",cellRenderer:F=>E(F.data.inInvestedValue)},{field:"inMarketValue",headerName:"Market Value",sortable:!0,hide:!1,minWidth:120,headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell",cellRenderer:F=>E(F.data.inMarketValue)}]),l=g({gridApi:null,columnApi:null,rowHeight:30,inTotalInvestedValue:0,inTotalMarketValue:0,inTotalPnl:0,rowData:[],columnDefs:s.value,gridOptions:{suppressCellFocus:!0},defaultColDef:{initialWidth:100,sortable:!1,resizable:!0}}),u=g({gridApi:null,columnApi:null,rowHeight:30,inTotalInvestedValue:0,inTotalMarketValue:0,inTotalPnl:0,rowData:[],columnDefs:s.value,gridOptions:{suppressCellFocus:!0},defaultColDef:{initialWidth:100,sortable:!1,resizable:!0}});Gt(async()=>{r.socket.value.io.on("error",F=>{console.log("Holding socket error:"),console.log(F)}),r.socket.value.io.on("reconnect",F=>{L()})}),Ke(r.activeTab,(F,U)=>{F!="holdings"&&o.value.length>0&&ee()},{deep:!0}),Ke(r.holdingsData,(F,U)=>{const Y=[],K=[];if(Array.isArray(F)&&F.length>0)for(let Ce=0;Ce<F.length;Ce++)F[Ce].isHoldingSupported?Y.push(F[Ce]):K.push(F[Ce]);l.value.rowData=Y,u.value.rowData=K,c(),d(),L()},{deep:!0});const c=()=>{let F=0,U=0,Y=0;if(l.value.rowData.length>0){for(let K=0;K<l.value.rowData.length;K++)F+=l.value.rowData[K].inInvestedValue,U+=l.value.rowData[K].inMarketValue;Y=U-F}l.value.inTotalInvestedValue=F,l.value.inTotalMarketValue=U,l.value.inTotalPnl=Y},d=()=>{let F=0,U=0,Y=0;if(u.value.rowData.length>0){for(let K=0;K<u.value.rowData.length;K++)F+=u.value.rowData[K].inInvestedValue,U+=u.value.rowData[K].inMarketValue;Y=U-F}u.value.inTotalInvestedValue=F,u.value.inTotalMarketValue=U,u.value.inTotalPnl=Y},f=F=>{try{u.value.gridApi=F.api,u.value.columnApi=F.columnApi,u.value.gridApi.sizeColumnsToFit()}catch(U){console.log(U)}},y=()=>{u.value.gridApi.sizeColumnsToFit()},S=F=>{try{l.value.gridApi=F.api,l.value.columnApi=F.columnApi,l.value.gridApi.sizeColumnsToFit()}catch(U){console.log(U)}},w=()=>{l.value.gridApi.sizeColumnsToFit()};function E(F){let U="0.00";if(F!=null&&F!=null){U=Number(F).toLocaleString("en-IN");let Y=U.split(".");Y.length==1?U=U+".00":Y[1].length==1&&(U=U+"0")}return U}const _=g({}),L=()=>{try{_.value={};for(let U=0;U<r.holdingsData.value.length;U++){const Y=r.holdingsData.value[U],K=Y.stSymbolName+"_"+(Y.stExchange=="NSE"?"NSE":"BSE");_.value[K]=Y}P();const F=Object.keys(_.value);F.length>0&&r.socket.value.emit("GET_THD_DATA",{stSelectedSymbol:F})}catch(F){console.log("error"),console.log(F)}},P=()=>{try{ee();let F=null,U=null,Y=Object.keys(_.value);for(let K=0;K<Y.length;K++)U=Y[K],F="THD_"+U,o.value.push(F),r.socket.value.on(F,Ce=>{ne(Ce)})}catch(F){console.log("error"),console.log(F)}},V=F=>{var U={};return Object.keys(F).forEach(function(Y){U[Y]=F[Y]}),U},ne=F=>{try{const[U,Y,K]=F;l.value.gridApi.flushAsyncTransactions();let Q={...l.value.gridApi.getRowNode(U).data};Q.inLtp=Number(Y.toFixed(2)),Q.inMarketValue=Q.inQuantity*Q.inLtp,Q.inPnl=Q.inMarketValue-Q.inInvestedValue,setTimeout(()=>{let xe=V(Q);l.value.gridApi.applyTransactionAsync({update:[xe]},fe=>{c()})},0)}catch(U){console.log("error"),console.log(U)}},ee=()=>{try{o.value=[...o.value];let F="";if(o.value.length>0){for(let U=0;U<o.value.length;U++)F=o.value[U],r.socket.value.emit("STOP_DATA",{stEventName:F}),r.socket.value.off(F);o.value=[]}F=null}catch(F){console.log("error"),console.log(F)}},re={global:e,definePropsData:t,props:r,socketSubscribedEvents:o,getRowId:a,columnDefs:s,supportedDataTable:l,unsupportedDataTable:u,calculateTotalStatsForSupportedHoldings:c,calculateTotalStatsForUnsupportedHoldings:d,onUnsupportedHoldingsGridReady:f,onUnsupportedHoldingsGridSizeChanged:y,onSupportedHoldingsReady:S,onSupportedHoldingsSizeChanged:w,showHumanReadableMtm:E,arSocketSubscribedSymbolName:_,connectSocketForRealtimeData:L,subscribeForDynamicEvents:P,copyObject:V,setRealTimeTableData:ne,unsubscribeForDynamicEvents:ee,get AgGridVue(){return Eo},onMounted:Gt,ref:g,toRefs:_t,watch:Ke,get moment(){return he},get useTheme(){return Yi}};return Object.defineProperty(re,"__isScriptSetup",{enumerable:!1,value:!0}),re}},k0=ki(I0,[["render",F0]]),G0=vi({__name:"Funds",props:["fundData"],setup(n,{expose:i}){i(),he.tz.setDefault("Asia/Kolkata");const e=n,t=_t(e),r=pi(),o={definePropsData:e,props:t,store:r,onMounted:Gt,ref:g,toRefs:_t,watch:Ke,get useAppStore(){return pi},get moment(){return he}};return Object.defineProperty(o,"__isScriptSetup",{enumerable:!1,value:!0}),o}}),V0={class:"d-flex flex-wrap justify-space-between gap-4 mt-2"},B0={class:"py-7 px-6"},H0={class:"text-md border-b py-3 d-flex"},W0={class:"custom-flex-50"},U0={class:"text-md border-b py-3 d-flex"},j0={class:"custom-flex-50"},z0={class:"text-md border-b py-3 d-flex"},Y0={class:"custom-flex-50"},K0={class:"text-md py-3 d-flex"},Q0={class:"custom-flex-50"},q0={class:"py-7 px-6"},X0={class:"text-md border-b py-3 d-flex"},J0={class:"custom-flex-50"},Z0={class:"text-md border-b py-3 d-flex"},$0={class:"custom-flex-50"},eM={class:"text-md border-b py-3 d-flex"},tM={class:"custom-flex-50"},iM={class:"text-md py-3 d-flex"},rM={class:"custom-flex-50"};function oM(n,i,e,t,r,o){return R(),N("div",V0,[p(ui,{class:"custom-flex-48 custom-flex-xs-100"},{default:v(()=>[h("div",B0,[i[4]||(i[4]=h("div",{class:"text-xl border-b pb-3"},"NSE - Derivatives",-1)),i[5]||(i[5]=h("div",{class:"text-md py-3 border-b d-flex"},[h("span",{class:"custom-flex-50"},[h("b",null,"Type")]),h("span",{class:"custom-flex-50"},[h("b",null,"Balance")])],-1)),h("div",H0,[i[0]||(i[0]=h("span",{class:"custom-flex-50"},"Total Balance ",-1)),h("span",W0,k(isNaN(t.props.fundData?.value?.derivatives?.nse?.futures?.inTotalBalance)?"-":Number(t.props.fundData?.value?.derivatives?.nse?.futures?.inTotalBalance).toLocaleString("en-IN")),1)]),h("div",U0,[i[1]||(i[1]=h("span",{class:"custom-flex-50"},"Used Margin ",-1)),h("span",j0,k(isNaN(t.props.fundData?.value?.derivatives?.nse?.futures?.inUsedMargin)?"-":Number(t.props.fundData?.value?.derivatives?.nse?.futures?.inUsedMargin).toLocaleString("en-IN")),1)]),h("div",z0,[i[2]||(i[2]=h("span",{class:"custom-flex-50"},"Realized P&L ",-1)),h("span",Y0,k(isNaN(t.props.fundData?.value?.derivatives?.nse?.futures?.inRealizedProfitAndLoss)?"-":Number(t.props.fundData?.value?.derivatives?.nse?.futures?.inRealizedProfitAndLoss).toLocaleString("en-IN")),1)]),h("div",K0,[i[3]||(i[3]=h("span",{class:"custom-flex-50"},"Available ",-1)),h("span",Q0,k(isNaN(t.props.fundData?.value?.derivatives?.nse?.futures?.inAvailableBalance)?"-":Number(t.props.fundData?.value?.derivatives?.nse?.futures?.inAvailableBalance).toLocaleString("en-IN")),1)])])]),_:1}),p(ui,{class:"custom-flex-48 custom-flex-xs-100"},{default:v(()=>[h("div",q0,[i[10]||(i[10]=h("div",{class:"text-xl border-b pb-3"},"NSE - Equity",-1)),i[11]||(i[11]=h("div",{class:"text-md border-b py-3 d-flex"},[h("span",{class:"custom-flex-50"},[h("b",null,"Type")]),h("span",{class:"custom-flex-50"},[h("b",null,"Balance")])],-1)),h("div",X0,[i[6]||(i[6]=h("span",{class:"custom-flex-50"},"Total Balance ",-1)),h("span",J0,k(isNaN(t.props.fundData?.value?.equity?.nse?.inTotalBalance)?"-":Number(t.props.fundData?.value?.equity?.nse?.inTotalBalance).toLocaleString("en-IN")),1)]),h("div",Z0,[i[7]||(i[7]=h("span",{class:"custom-flex-50"},"Used Margin ",-1)),h("span",$0,k(isNaN(t.props.fundData?.value?.equity?.nse?.inUsedMargin)?"-":Number(t.props.fundData?.value?.equity?.nse?.inUsedMargin).toLocaleString("en-IN")),1)]),h("div",eM,[i[8]||(i[8]=h("span",{class:"custom-flex-50"},"Realized P&L ",-1)),h("span",tM,k(isNaN(t.props.fundData?.value?.equity?.nse?.inRealizedProfitAndLoss)?"-":Number(t.props.fundData?.value?.equity?.nse?.inRealizedProfitAndLoss).toLocaleString("en-IN")),1)]),h("div",iM,[i[9]||(i[9]=h("span",{class:"custom-flex-50"},"Available ",-1)),h("span",rM,k(isNaN(t.props.fundData?.value?.equity?.nse?.inAvailableBalance)?"-":Number(t.props.fundData?.value?.equity?.nse?.inAvailableBalance).toLocaleString("en-IN")),1)])])]),_:1})])}const nM=ki(G0,[["render",oM]]),aM={class:"flex"},sM={key:0,class:"d-flex"},lM={key:1},uM=vi({__name:"CloseBtnCellRenderer",props:["params"],setup(n){pi();const e=_t(n);g(!1),g(null),Gt(()=>{});function t(){e.params.value.clicked(e.params.value.data)}return(r,o)=>(R(),N("span",aM,[n.params.data.inNetQuantity!=0?(R(),N("span",sM,[p(Dt,{location:"top"},{activator:v(({props:a})=>[p(_e,pt(a,{icon:"bx-x-circle",onClick:o[0]||(o[0]=s=>t()),class:"text-error cursor-pointer"}),null,16)]),default:v(()=>[o[1]||(o[1]=h("span",null,"Close full position",-1))]),_:1})])):(R(),N("span",lM,"-"))]))}});const ih=ki(uM,[["__scopeId","data-v-301b9131"]]),rh=vi({__name:"SymbolNameCellRenderer",props:["params"],setup(n){const e=_t(n);function t(){e.params.value.clicked(e.params.value.data)}return(r,o)=>(R(),N("span",{onClick:t,style:{cursor:"pointer"}},k(nt(e).params.value.data.stSymbolName),1))}});const cM=Fl({indeterminate:Boolean,inset:Boolean,flat:Boolean,loading:{type:[Boolean,String],default:!1},...ph(),...Yy()},"VSwitch"),is=fs()({name:"VSwitch",inheritAttrs:!1,props:cM(),emits:{"update:focused":n=>!0,"update:modelValue":n=>!0,"update:indeterminate":n=>!0},setup(n,i){let{attrs:e,slots:t}=i;const r=Oc(n,"indeterminate"),o=Oc(n,"modelValue"),{loaderClasses:a}=gy(n),{isFocused:s,focus:l,blur:u}=fh(n),c=g(),d=di(()=>typeof n.loading=="string"&&n.loading!==""?n.loading:n.color),f=yy(),y=di(()=>n.id||`switch-${f}`);function S(){r.value&&(r.value=!1)}function w(E){E.stopPropagation(),E.preventDefault(),c.value?.input?.click()}return Xc(()=>{const[E,_]=ch(e),L=dl.filterProps(n),P=Pp.filterProps(n);return p(dl,pt({class:["v-switch",{"v-switch--inset":n.inset},{"v-switch--indeterminate":r.value},a.value,n.class]},E,L,{modelValue:o.value,"onUpdate:modelValue":V=>o.value=V,id:y.value,focused:s.value,style:n.style}),{...t,default:V=>{let{id:ne,messagesId:ee,isDisabled:re,isReadonly:F,isValid:U}=V;return p(Pp,pt({ref:c},P,{modelValue:o.value,"onUpdate:modelValue":[Y=>o.value=Y,S],id:ne.value,"aria-describedby":ee.value,type:"checkbox","aria-checked":r.value?"mixed":void 0,disabled:re.value,readonly:F.value,onFocus:l,onBlur:u},_),{...t,default:Y=>{let{backgroundColorClasses:K,backgroundColorStyles:Ce}=Y;return p("div",{class:["v-switch__track",...K.value],style:Ce.value,onClick:w},null)},input:Y=>{let{inputNode:K,icon:Ce,backgroundColorClasses:Q,backgroundColorStyles:Ne}=Y;return p(rt,null,[K,p("div",{class:["v-switch__thumb",{"v-switch__thumb--filled":Ce||n.loading},n.inset?void 0:Q.value],style:n.inset?void 0:Ne.value},[p(my,null,{default:()=>[n.loading?p(Cy,{name:"v-switch",active:!0,color:U.value===!1?void 0:d.value},{default:xe=>t.loader?t.loader(xe):p(Ti,{active:xe.isActive,color:xe.color,indeterminate:!0,size:"16",width:"2"},null)}):Ce&&p(_e,{key:Ce,icon:Ce,size:"x-small"},null)]})])])}})}})}),{}}}),dM={key:0},pM={class:"d-flex custom-flex-wrap text-center my-1"},fM={class:"custom-flex-25 custom-flex-xs-50 custom-text-xs-start d-flex"},hM={class:"custom-flex-75 mt-2"},vM={key:1},gM={class:"d-flex custom-flex-wrap text-center my-1"},yM={class:"custom-flex-80"};function mM(n,i,e,t,r,o){return R(),N("div",null,[t.stIdentificationToken?(R(),N("div",vM,[h("div",gM,[p(is,{color:"primary",modelValue:t.isActive,"onUpdate:modelValue":i[1]||(i[1]=a=>t.isActive=a),class:"custom-flex-4 custom-flex-xs-15 ml-2"},null,8,["modelValue"]),h("div",{class:"custom-flex-20 custom-flex-xs-39 custom-text-xs-start d-flex cursor-pointer mt-2",onClick:t.openChildPositionPanel},[h("span",yM,k(e.brokerData.stBrokerName)+" - "+k(e.brokerData?.stBrokerUserId?t.sharedFunctions.formatBrokerUserId(e.brokerData.stBrokerUserId):""),1),t.isPositionLoading?(R(),at(Ti,{key:0,class:"custom-flex-10 mt-1",width:2,size:"small",indeterminate:""})):De("",!0)]),h("div",{class:"custom-flex-15 custom-flex-xs-39 custom-text-xs-end cursor-pointer mt-2",onClick:t.openChildPositionPanel},[i[3]||(i[3]=h("b",null,"Net Qty:",-1)),h("span",null,k(Number(t.inTotalNetQuantity).toLocaleString("en-IN")),1)]),h("div",{class:"d-flex gap-4 custom-flex-45 custom-flex-xs-60 justify-center custom-justify-start cursor-pointer mt-2",onClick:t.openChildPositionPanel},[h("span",null,[i[4]||(i[4]=h("b",null,"MTM:",-1)),h("span",{class:Et(`font-weight-bold ${t.inTotalPnl<0?"text-error":"text-success"}`)},k(t.showHumanReadableMtm(t.inTotalPnl)),3)])]),h("div",{class:"custom-flex-5 custom-flex-xs-10 text-end mt-2",onClick:t.openChildPositionPanel},[p(_e,pt({icon:t.isChildTableOpen?"bx-chevron-up":"bx-chevron-down",class:"cursor-pointer",color:"secondary",size:"large"},t.props),null,16,["icon"])]),i[6]||(i[6]=h("div",{class:"custom-flex-1 custom-flex-xs-0"},null,-1)),p(Le,{class:"cursor-pointer custom-flex-9 custom-flex-xs-29 mt-2",variant:"outlined",density:"compact",onClick:t.getPositions},{default:v(()=>i[5]||(i[5]=[M("Refresh ")])),_:1})])])):(R(),N("div",dM,[h("div",pM,[h("div",fM,[p(is,{color:"primary",modelValue:t.isActive,"onUpdate:modelValue":i[0]||(i[0]=a=>t.isActive=a),class:"custom-flex-4 custom-flex-xs-15 ml-2"},null,8,["modelValue"]),h("span",hM,k(e.brokerData.stBrokerName)+" - "+k(e.brokerData?.stBrokerUserId?t.sharedFunctions.formatBrokerUserId(e.brokerData.stBrokerUserId):""),1)]),i[2]||(i[2]=h("div",{class:"custom-flex-70 custom-flex-xs-100 mt-2"},"Please generate today's token.",-1))])])),mt(h("div",null,[p(t.AgGridVue,{style:{height:"310px"},class:Et(t.global.name.value=="dark"?"ag-theme-balham-dark":"ag-theme-balham"),columnDefs:t.columnDefs,rowData:t.rowData,defaultColDef:t.defaultColDef,rowHeight:t.rowHeight,getRowId:t.getRowId,gridOptions:t.gridOptions,onGridReady:t.onGridReady,onGridSizeChanged:t.onGridSizeChanged,onFirstDataRendered:t.onFirstDataRendered,onSelectionChanged:t.onSelectionChanged},null,8,["class","columnDefs","rowData","defaultColDef","rowHeight","gridOptions"])],512),[[hi,t.isChildTableOpen]])])}const CM={__name:"ChildPositions",props:["stTradingWindowId","showMessageOnOnlickWindow","disableOneClickShortcutsFn","setBuySellSymbol","cancelAllPositionButtonLoading","selectedClosePositionOrderType","setCloseAllPositionButtonLoading","cancelAllPositions","socket","socketEventUpdate","brokerData","brokerApiDelay","activeTab","positionFlagTrigger"],setup(n,{expose:i}){i(),he.tz.setDefault("Asia/Kolkata");const e=pi(),t=Za.connect(ht.websocketDataApiUrl,{autoConnect:!1,transports:["websocket"],query:{Authorization:"Bearer "+e.token,Platform:"1cliq"}}),{global:r}=Yi(),o=n,a=_t(o),s=g(a.brokerData.value?a.brokerData.value.stIdentificationToken:null),l=g([{field:"stSymbolName",headerName:"Symbol Name",sortable:!0,hide:!1,minWidth:240,cellStyle:{},cellRenderer:rh,cellRendererParams:{clicked:G=>{fi(G)}},headerCheckboxSelection:!0,checkboxSelection:!0,showDisabledCheckboxes:!0},{field:"stSide",headerName:"Side",sortable:!0,sort:"desc",hide:!1,minWidth:50,cellStyle:{},cellRenderer:G=>G.data.stSide!=null?G.data.stSide:"-"},{field:"inNetQuantity",headerName:"Net Qty",sortable:!0,hide:!1,minWidth:70,cellStyle:{},cellClass:G=>Number(G.data.inNetQuantity)>0?"text-success":Number(G.data.inNetQuantity)<0?"text-error":"",cellRenderer:G=>G.data.inNetQuantity},{field:"inNetAverage",headerName:"Avg Price",sortable:!1,hide:!1,minWidth:90,cellStyle:{},cellRenderer:G=>Number(G.data.inNetAverage).toFixed(2)},{field:"inLtp",headerName:"LTP",sortable:!1,hide:!1,minWidth:95,cellStyle:{},cellRenderer:G=>G.data.inLtp},{field:"inRealizedProfit",headerName:"R. P&L",sortable:!0,hide:!1,minWidth:100,cellStyle:{},cellClass:G=>Number(G.data.inRealizedProfit)>0?"text-success":Number(G.data.inRealizedProfit)<0?"text-error":"",cellRenderer:G=>G.data.inRealizedProfit!=null?Number(G.data.inRealizedProfit).toFixed(2):0},{field:"inUnRealizedProfit",headerName:"UR. P&L",sortable:!0,hide:!1,minWidth:100,cellStyle:{},cellClass:G=>Number(G.data.inUnRealizedProfit)>0?"text-success":Number(G.data.inUnRealizedProfit)<0?"text-error":"",cellRenderer:G=>G.data.inNetQuantity!=0?Number(G.data.inUnRealizedProfit).toFixed(2):G.data.inUnRealizedProfit},{field:"inProfitLoss",headerName:"P&L",sortable:!0,hide:!1,minWidth:100,cellStyle:{},cellClass:G=>Number(G.data.inProfitLoss)>0?"text-success":Number(G.data.inProfitLoss)<0?"text-error":"",cellRenderer:G=>Number(G.data.inProfitLoss)},{field:"stActionColumn",headerName:"Action",sortable:!1,hide:!1,minWidth:80,cellStyle:{},cellRenderer:ih,cellRendererParams:{clicked:(G,H=!0)=>{Kt(G,"CLOSE_SINGLE_POSITION_BUTTON",H)},showMessage:(G,H)=>{e.toastMessage({color:G,message:H})}}},{field:"inBuyQuantity",headerName:"Buy Qty",sortable:!1,hide:!1,minWidth:60,cellStyle:{},cellRenderer:G=>Number(G.data.inBuyQuantity)},{field:"inBuyPrice",headerName:"Buy Price",sortable:!1,hide:!1,minWidth:80,cellStyle:{},cellRenderer:G=>Number(G.data.inBuyPrice)!=0?Number(G.data.inBuyPrice).toFixed(2):Number(G.data.inBuyPrice)},{field:"inSellPrice",headerName:"Sell Price",sortable:!1,hide:!1,minWidth:80,cellStyle:{},cellRenderer:G=>Number(G.data.inSellPrice)!=0?Number(G.data.inSellPrice).toFixed(2):Number(G.data.inSellPrice)},{field:"inSellQuantity",headerName:"Sell Qty",sortable:!1,hide:!1,minWidth:60,cellStyle:{},cellRenderer:G=>Number(G.data.inSellQuantity)},{field:"stProductType",headerName:"Product",sortable:!0,hide:!1,minWidth:80,cellStyle:{}}]),u=g([]),c=g([]),d=g([]),f=g({}),y=g({}),S=g(null),w=g(null),E=g({}),_=g([]),L=g(null),P=g([]),V=g(!1),ne=g(!1),ee=g(null),re=g(0),F=g(null),U=g(a.brokerData.value?a.brokerData.value.stStatus=="active":!1);Gt(async()=>{Y(),setTimeout(()=>{ie()},50),K(),t.connect(),a.socketEventUpdate.value.on("reconnect",G=>{K()}),a.socketEventUpdate.value.on("error",G=>{console.log("position event socket error:"),console.log(G)}),t.io.on("error",G=>{console.log("position socket error:"),console.log(G)}),t.io.on("reconnect",G=>{Ne()})}),Ke(a.brokerData,(G,H)=>{s.value=G?G.stIdentificationToken:null,U.value=G?G?.stStatus=="active":!1},{deep:!0}),Ke(_,(G,H)=>{f.value={},setTimeout(()=>{for(let Ee=0;Ee<G.length;Ee++)G[Ee].stSymbolName+""+G[Ee].stProductType,f.value[G[Ee].stSymbolName]==null&&(f.value[G[Ee].stSymbolName]=[]),f.value[G[Ee].stSymbolName].push(Ee);c.value=JSON.parse(JSON.stringify(G)),setTimeout(()=>{$.value?.refreshCells({force:!0})},1),Q()},10),setTimeout(()=>{ie()},100),setTimeout(()=>{q()},100)},{deep:!0}),Ke(P,(G,H)=>{setTimeout(()=>{H.length&&G.length==0&&ye(),ie()},50)},{deep:!0}),Ke(L,(G,H)=>{try{G&&$.value&&$.value.forEachNode((Ee,He)=>{Ee.data.stSegment!=G})}catch(Ee){console.log("error"),console.log(Ee)}},{deep:!0}),Ke(a.positionFlagTrigger,(G,H)=>{Y()},{deep:!0}),Ke(U,(G,H)=>{tt(G?"active":"inactive")},{deep:!0});const Y=async()=>{s.value&&(ne.value=!0,await e.getPostion(s.value).then(G=>{ne.value=!1,G.status=="success"?L.value!=null?_.value=G.data.filter(H=>H.stSegment==L.value):_.value=G.data:e.toastMessage({color:G.status,message:G.msg})}).catch(G=>{ne.value=!1,console.log("err :>> ",G)}))};function K(){a.socketEventUpdate.value.emit("connectUserBroker",{stKey:a.brokerData.value?a.brokerData.value.stIdentificationToken:null}),a.socketEventUpdate.value.on("updateBrokerData",G=>{if(a.activeTab.value=="positions"&&G[`${a.brokerData.value.stBrokerUniqueCode}_${a.brokerData.value.stBrokerUserId}`]){ee.value&&(clearTimeout(ee.value),ee.value=null,re.value=re.value+1,re.value>40&&(Y(),re.value=0));const H=Ce();ee.value=setTimeout(()=>{re.value=0,clearTimeout(F.value),Y()},H)}})}function Ce(){let G=null;return G=a.brokerApiDelay.value?.[a.brokerData.value?.stBrokerUniqueCode],G=G||a.brokerApiDelay.value.DEFAULT,G=G||1e3,G}function Q(){try{if(_.value.length>0){const G={arSymbolNames:_.value.map(Ee=>Ee.stSymbolName)},H=ht.orderApiUrl+"/symbol/getsymbolsubscribnamedetails";yt.post(H,G).then(Ee=>{if(Ee.data.status=="success"){y.value={};for(let He=0;He<Ee.data.data.length;He++){const Ae=Ee.data.data[He];y.value[Ae.stSymbolName]=Ae.stExchangeScripName,E.value[Ae.stExchangeScripName]=Ae}}Ne()}).catch(Ee=>{console.log("err"),console.log(Ee)})}}catch(G){console.log("error"),console.log(G)}}function Ne(){try{xe(),t.emit("GET_TPD_DATA",{stSelectedSymbol:Object.keys(y.value)})}catch(G){console.log("error"),console.log(G)}}function xe(){try{Se();let G=null,H=null,Ee=Object.keys(y.value);for(let He=0;He<Ee.length;He++)H=Ee[He],G="TPD_"+H,d.value.push(G),t.on(G,Ae=>{fe(Ae)})}catch(G){console.log("error"),console.log(G)}}function fe(G){try{const[H,Ee]=G,He=y.value[H],Ae=f.value[He];for(let Lt=0;Lt<Ae.length;Lt++){const ut=Ae[Lt],Ri=_.value[ut].stSymbolName,Gi=_.value[ut].stProductType,me=Ri+"_"+Gi;$.value.flushAsyncTransactions();let Ht={...$.value.getRowNode(me).data};Ht.inLtp=Number(Ee.toFixed(2));let Pt=Math.min(Ht.inBuyQuantity,Ht.inSellQuantity),Z=(Ht.inSellPrice-Ht.inBuyPrice)*Pt;Pt!=0&&(Ht.inRealizedProfit=Z.toFixed(2)),Ht.inNetQuantity>0?Ht.inUnRealizedProfit=(Number(Ht.inLtp)-Number(Ht.inBuyPrice))*Number(Ht.inNetQuantity):Ht.inNetQuantity<0?Ht.inUnRealizedProfit=(Number(Ht.inLtp)-Number(Ht.inSellPrice))*Number(Ht.inNetQuantity):Ht.inUnRealizedProfit=0,Ht.inNetQuantity!=0&&(Ht.inProfitLoss=Z+Number(Ht.inUnRealizedProfit.toFixed(2)),Ht.inProfitLoss=Number(Ht.inProfitLoss.toFixed(2))),setTimeout(()=>{let yi=ge(Ht);$.value.applyTransactionAsync({update:[yi]},mi=>{q()})},0)}}catch(H){console.log("error"),console.log(H)}}function q(){try{let G=0,H=0;$.value?.forEachNode(function(Ee){G+=Number(Ee.data.inProfitLoss),H+=Number(Ee.data.inNetQuantity)}),S.value=G.toFixed(2),w.value=H}catch(G){console.log("error"),console.log(G)}}function Pe(G){let H="0.00";if(G!=null&&G!=null){H=Number(G).toLocaleString("en-IN");let Ee=H.split(".");Ee.length==1?H=H+".00":Ee[1].length==1&&(H=H+"0")}return H}function Se(){try{d.value=[...d.value];let G="";if(d.value.length>0){for(let H=0;H<d.value.length;H++)G=d.value[H],t.emit("STOP_DATA",{stEventName:G}),t.off(G);d.value=[]}G=null}catch(G){console.log("error"),console.log(G)}}function ge(G){var H={};return Object.keys(G).forEach(function(Ee){H[Ee]=G[Ee]}),H}const le=G=>{let H=G.api.getSelectedRows();P.value=H},ie=()=>{try{for(let G=0;G<P.value.length;G++){const H=P.value[G].stSymbolName+"_"+P.value[G].stProductType;$.value.flushAsyncTransactions();let Ee=$.value.getRowNode(H);Ee.data.inNetQuantity!=0&&Ee.setSelected(!0)}}catch(G){console.log("error"),console.log(G)}},ye=()=>{try{for(let G=0;G<c.value.length;G++){const H=c.value[G].stSymbolName+"_"+c.value[G].stProductType;$.value.flushAsyncTransactions(),$.value.getRowNode(H).setSelected(!1)}}catch(G){console.log("error"),console.log(G)}},Re=g({initialWidth:90,sortable:!1,resizable:!0}),$=g(null),Qe=g(null),Ge=g(30),et=G=>G.data.stSymbolName+"_"+G.data.stProductType,Je=g({rowSelection:"multiple",suppressCellFocus:!0,suppressRowClickSelection:!0,isRowSelectable:G=>!!(G.data&&!isNaN(G.data.inNetQuantity)&&G.data.inNetQuantity!=0)}),it=()=>{$.value.sizeColumnsToFit()},jt=G=>{},Si=G=>{try{$.value=G.api,Qe.value=G.columnApi,$.value.sizeColumnsToFit(),Qe.value.moveColumns(u.value,0)}catch(H){console.log(H)}};function Kt(G,H=null,Ee=!0){try{if(a.cancelAllPositionButtonLoading.value)e.toastMessage({color:"success",message:"Close all position is already in progress. Please wait for it to complete."});else{a.setCloseAllPositionButtonLoading.value(!0);let He=[];const Ae=Math.abs(G.inNetQuantity);He.push({stExchange:G.stExchange,stValidity:"DAY",stProductType:G.stProductType,stSymbolName:G.stSymbolName,stBrokerSymbolName:G.stBrokerSymbolName?G.stBrokerSymbolName:null,stOrderType:"MARKET",inQuantity:Ae,stBuySellType:G.inNetQuantity<0?"BUY":"SELL",inLimitPrice:0,inTakeProfit:0,inStoploss:0,stExtra:{stClosePositionOrderType:a.selectedClosePositionOrderType.value},isReverseEntry:G.isReverseEntry});const Lt={stKey:s.value,stTradingWindowId:a.stTradingWindowId?.value,stAction:H,stOrders:He};G.isConvertOptionType?e.exitOrderAndConvertOptionTypeApi(Lt).then(ut=>{a.setCloseAllPositionButtonLoading.value(!1),Y(),ut.status=="success"?ut?.data&&(ut.data?.buy?.["0"]?.msg?a.showMessageOnOnlickWindow.value(ut.data?.buy?.["0"]?.msg):ut.data?.sell?.["0"]?.msg&&a.showMessageOnOnlickWindow.value(ut.data?.sell?.["0"]?.msg)):a.showMessageOnOnlickWindow.value(ut.msg)}).catch(ut=>{a.setCloseAllPositionButtonLoading.value(!1),console.log("err :>> ",ut)}):e.exitOrderApi(Lt).then(ut=>{a.setCloseAllPositionButtonLoading.value(!1),Y.value(),ut.status=="success"?ut?.data&&(ut.data?.buy?.["0"]?.msg?a.showMessageOnOnlickWindow.value(ut.data?.buy?.["0"]?.msg):ut.data?.sell?.["0"]?.msg&&a.showMessageOnOnlickWindow.value(ut.data?.sell?.["0"]?.msg)):a.showMessageOnOnlickWindow.value(ut.msg)}).catch(ut=>{a.setCloseAllPositionButtonLoading.value(!1),console.log("err :>> ",ut)})}}catch(He){console.log("error"),console.log(He)}}function fi(G){if(E.value[G.stSymbolName]!=null){const H=E.value[G.stSymbolName],Ee={...H,stExpiryDate:he(H.stExpiryDate,"YYYY-MM-DD",!0).format("YYMMDD"),stProductType:G.stProductType};a.setBuySellSymbol.value(Ee)}}function gi(){s.value?V.value=!V.value:e.toastMessage({color:"error",message:"Please generate today's token."})}function tt(G){const H={inDittoAccountId:a.brokerData.value.inDittoAccountId,stStatus:G};yt.post("/ditto/updatechildstatus",H).then(Ee=>{e.toastMessage({color:Ee.data.status,message:Ee.data.msg}),Ee.data.status=="success"}).catch(Ee=>{})}const ae={store:e,socket:t,global:r,definePropsData:o,props:a,stIdentificationToken:s,columnDefs:l,columnPosition:u,rowData:c,socketSubscribedEvents:d,positionIndex:f,arPositionSymbolNamesForSocket:y,inTotalPnl:S,inTotalNetQuantity:w,symbolMetaData:E,positionsData:_,selectedTypeOfPositions:L,selectedPositionsData:P,isChildTableOpen:V,isPositionLoading:ne,socketEventUpdateTimeout:ee,socketDataUpdateCounter:re,getActiveTabDataAfterOrderPlacementTimeOutId:F,isActive:U,getPositions:Y,connectSocketEventForPosition:K,getBrokerDelayTime:Ce,getSymbolSubscribeNameDetails:Q,connectSocketForRealtimeData:Ne,subscribeForDynamicEvents:xe,setRealTimeTableData:fe,calculateTotalPnl:q,showHumanReadableMtm:Pe,unsubscribeForDynamicEvents:Se,copyObject:ge,onSelectionChanged:le,selectRowIfSelectionAvailable:ie,unSelectRows:ye,defaultColDef:Re,gridApi:$,columnApi:Qe,rowHeight:Ge,getRowId:et,gridOptions:Je,onGridSizeChanged:it,onFirstDataRendered:jt,onGridReady:Si,closePosition:Kt,setBuySellSymbol:fi,openChildPositionPanel:gi,updateStatus:tt,get config(){return ht},get socketIO(){return Za},get AgGridVue(){return Eo},onMounted:Gt,ref:g,toRefs:_t,watch:Ke,get useAppStore(){return pi},CloseBtnCellRenderer:ih,SymbolNameCellRenderer:rh,get axios(){return yt},get useTheme(){return Yi},get sharedFunctions(){return ot},get moment(){return he}};return Object.defineProperty(ae,"__isScriptSetup",{enumerable:!1,value:!0}),ae}},SM=ki(CM,[["render",mM]]),wM={class:"d-flex gap-1 mt-1"},oh=vi({__name:"OrderBookAction",props:["params"],setup(n){Gt(()=>{(e.params.value.data.stBrokerStatus=="pending"||e.params.value.data.stBrokerStatus=="partial")&&(t.value=!0)});const e=_t(n),t=g(!1),r=()=>{e.params.value.cancelOrder(e.params.value.data)},o=()=>{e.params.value.editBtnClicked(e.params.value.data)};return(a,s)=>(R(),N("span",wM,[t.value?(R(),at(Dt,{key:0,location:"top"},{activator:v(({props:l})=>[t.value?(R(),at(_e,pt({key:0},l,{icon:"bx-pencil",onClick:s[0]||(s[0]=u=>o()),class:"text-success cursor-pointer"}),null,16)):De("",!0)]),default:v(()=>[s[2]||(s[2]=h("span",null,"Edit Limit Order",-1))]),_:1})):De("",!0),t.value?(R(),at(Dt,{key:1,location:"top"},{activator:v(({props:l})=>[t.value?(R(),at(_e,pt({key:0},l,{icon:"bx-x-circle",onClick:s[1]||(s[1]=u=>r()),class:"text-error cursor-pointer"}),null,16)):De("",!0)]),default:v(()=>[s[3]||(s[3]=h("span",null,"Cancel order",-1))]),_:1})):De("",!0)]))}}),TM={class:"cursor-pointer"},nh=vi({__name:"InfoCellRenderer",props:["params"],setup(n){Gt(()=>{});const e=_t(n);return g(!1),(t,r)=>(R(),N("u",TM,[nt(e).params.value.data.stMessage?(R(),at(Dt,{key:0,activator:"parent",location:"top"},{default:v(()=>[M(k(nt(e).params.value.data.stMessage),1)]),_:1})):De("",!0),r[0]||(r[0]=M(" info "))]))}}),OM=vi({__name:"ChildOrderBook",props:["stTradingWindowId","showMessageOnOnlickWindow","cancelAllOrderButtonLoading","setCancelAllOrderButtonLoading","brokerData","socketEventUpdate","brokerApiDelay","activeTab"],setup(n,{expose:i}){i(),he.tz.setDefault("Asia/Kolkata");const{global:e}=Yi(),t=n,r=_t(t),o=pi(),a=g([{field:"stSymbolName",headerName:"Symbol Name",sortable:!0,hide:!1,minWidth:220,cellStyle:{}},{field:"stOrderType",headerName:"Type",sortable:!0,hide:!1,minWidth:100,cellStyle:{},cellRenderer:ae=>ae.data.stOrderType!=null?ae.data.stOrderType:"-"},{field:"stTransactionType",headerName:"Side",sortable:!0,hide:!1,minWidth:100,cellStyle:{},cellClass:ae=>ae.data.stTransactionType=="BUY"?"text-success":"text-error"},{field:"inQuantity",headerName:"Qty",sortable:!0,hide:!1,minWidth:70,cellStyle:{},cellRenderer:ae=>ae.data.inQuantity},{field:"inRemainingQuantity",headerName:"Rem Qty",sortable:!0,hide:!1,minWidth:70,cellStyle:{},cellRenderer:ae=>ae.data.inRemainingQuantity},{field:"inOrderPrice",headerName:"Order Price",sortable:!0,hide:!1,minWidth:95,cellStyle:{},cellRenderer:ae=>ae.data.inOrderPrice},{field:"inTradedPrice",headerName:"Traded Price",sortable:!0,hide:!1,minWidth:95,cellStyle:{},cellRenderer:ae=>ae.data.inTradedPrice!=0?ae.data.inTradedPrice:"-"},{field:"inTriggerPrice",headerName:"Trigger Price",sortable:!0,hide:!1,minWidth:95,cellStyle:{},cellRenderer:ae=>ae.data.inTriggerPrice!=0?ae.data.inTriggerPrice:"-"},{field:"stBrokerStatus",headerName:"Status",sortable:!0,hide:!1,minWidth:100,cellStyle:{},cellClass:ae=>{let G="text-uppercase ";switch(ae.data.stBrokerStatus){case"executed":G+="text-success";break;case"rejected":G+="text-error";break;case"cancelled":G+="text-info";break;case"pending":G+="text-warning";break;default:G+="text-secondary";break}return G}},{field:"stFetchTime",headerName:"Time/Date",sortable:!0,sort:"desc",hide:!1,minWidth:170,cellStyle:{},cellRenderer:ae=>ae.data.stFetchTime+" / "+he(ae.data.stFetchDate,"YYYY-MM-DD",!0).format("DD-MM-YYYY")},{field:"stOrderId",headerName:"Order Id",sortable:!0,sort:"desc",hide:!1,minWidth:140,cellStyle:{},cellRenderer:ae=>ae.data.stOrderId},{field:"stMessage",headerName:"Message",sortable:!1,hide:!1,minWidth:100,cellStyle:{},cellRenderer:nh},{field:"stActionColumn",headerName:"Action",sortable:!1,hide:!1,minWidth:100,cellStyle:{},cellRenderer:oh,cellRendererParams:{cancelOrder:ae=>{Se(ae)},editBtnClicked:ae=>{fe(ae)},showSingleOrderHistory:ae=>{it(ae)}}}]),s=g({stSymbolName:{columnVisible:!0},stOrderType:{columnVisible:!0},stTransactionType:{columnVisible:!0},inQuantity:{columnVisible:!0},inRemainingQuantity:{columnVisible:!0},inOrderPrice:{columnVisible:!0},inTradedPrice:{columnVisible:!0},inTriggerPrice:{columnVisible:!0},stBrokerStatus:{columnVisible:!0},stFetchTime:{columnVisible:!0},stOrderId:{columnVisible:!0},stMessage:{columnVisible:!0},stActionColumn:{columnVisible:!0}}),l=g([]),u=g({initialWidth:100,sortable:!1,resizable:!0}),c=g(null),d=g(null),f=g(30),y=g(null),S=g({suppressCellFocus:!0}),w=g({modelValue:!1,modalType:"success",orderData:{}}),E=g(r.brokerData.value?r.brokerData.value.stIdentificationToken:null),_=g(0),L=g(!1),P=g({}),V=g(!1),ne=g(!1),ee=g(!1),re=g([]),F=g(null),U=g([{title:"Date",key:"stFetchDate",sortable:!1,minWidth:125},{title:"Time",key:"stFetchTime",sortable:!1,minWidth:100},{title:"Quantity",key:"inQuantity",sortable:!1},{title:"Remaining Quantity",key:"inRemainingQuantity",sortable:!1},{title:"Filled Quantity",key:"inFilledQuantity",sortable:!1},{title:"Average Price",key:"inAvgPrice",sortable:!1},{title:"Status",key:"stStatus",sortable:!1,minWidth:150}]),Y=g(!1),K=g(!1),Ce=g([]),Q=g(null),Ne=g(0),xe=g(null);Gt(()=>{fi()}),Ke(Ce,(ae,G)=>{l.value=ae,setTimeout(()=>{c.value?.refreshCells({force:!0})},1)},{deep:!0}),Ke(r.brokerData,(ae,G)=>{E.value=ae?ae.stIdentificationToken:null},{deep:!0}),Ke(Y,(ae,G)=>{ae&&Kt()},{deep:!0}),Ke(r.activeTab,(ae,G)=>{ae!="orderBook"&&(Y.value=!1)},{deep:!0});const fe=ae=>{let G={stSymbolName:ae.stSymbolName};L.value=!0,yt.post(ht.orderApiUrl+"/symbol/getsymbollotsize",G).then(H=>{H.data.status=="success"?_.value=H.data.data.inLotSize:o.toastMessage({color:"error",message:H.data.msg})}).catch(H=>{console.log("err"),console.log(H)}).finally(()=>{L.value=!1}),w.value.modalType=ae.stTransactionType=="BUY"?"success":"error",w.value.modelValue=!0,w.value.orderData={...ae}},q=()=>{w.value.modalType="",w.value.modelValue=!1,w.value.orderData={},_.value=null},Pe=()=>{if(w.value.orderData.stOrderType=="LIMIT"&&w.value.orderData.inPrice==0){o.toastMessage({color:"error",message:"Order price cannot be 0 when order type is limit order,"});return}if(w.value.orderData.stOrderType=="SL-L"||w.value.orderData.stOrderType=="SL-M"){if(!isNaN(w.value.orderData.inTriggerPrice)&&Number(w.value.orderData.inTriggerPrice)<=0&&!w.value.orderData.inTriggerPrice)return o.toastMessage({color:"error",message:"Please enter valid trigger price."}),!1;if(w.value.orderData.stTransactionType=="BUY"){if(w.value.orderData.inPrice<=w.value.orderData.inTriggerPrice)return o.toastMessage({color:"error",message:"Order price should be more than trigger price."}),!1}else if(w.value.orderData.stTransactionType=="SELL"&&w.value.orderData.inPrice>=w.value.orderData.inTriggerPrice)return o.toastMessage({color:"error",message:"Order price should be less than trigger price."}),!1}const ae={stKey:E.value,stTradingWindowId:r?.stTradingWindowId?.value,stAction:"EDIT_ORDER_BUTTON",stOrders:[w.value.orderData]};o.editOrderApi(ae).then(G=>{q(),Kt(),G.status=="success"?G?.data&&G.data?.["0"]?.msg&&r.showMessageOnOnlickWindow.value(G.data?.["0"]?.msg):r.showMessageOnOnlickWindow.value(G.msg)}).catch(G=>{console.log("err :>> ",G),q()})},Se=ae=>{if(r.cancelAllOrderButtonLoading.value)o.toastMessage({color:"success",message:"Cancel order is already in progress. Please wait for it to complete."});else{r.setCancelAllOrderButtonLoading.value(!0);const G={stKey:E.value,stTradingWindowId:r?.stTradingWindowId?.value,stAction:"CANCEL_SINGLE_ORDER",stOrders:[ae]};o.cancelOrderApi(G).then(H=>{Kt(),r.setCancelAllOrderButtonLoading.value(!1),H.status=="success"?H?.data&&H.data?.["0"]?.msg&&r.showMessageOnOnlickWindow.value(H.data?.["0"]?.msg):r.showMessageOnOnlickWindow.value(H.msg)}).catch(H=>{r.setCancelAllOrderButtonLoading.value(!1),console.log("err :>> ",H)})}},ge=ae=>{ae=="MARKET"?(w.value.orderData.stOrderType="MARKET",w.value.orderData.inPrice=0):w.value.orderData.stOrderType=ae},le=()=>{c.value.sizeColumnsToFit()},ie=ae=>{},ye=ae=>{try{c.value=ae.api,d.value=ae.columnApi,c.value.sizeColumnsToFit()}catch(G){console.log(G)}},Re=async()=>{if(await Kt(),l.value.length>0){let ae="data:text/csv;charset=utf-8,";ae+=[["Symbol Name","Type","Side","Qty","Rem Qty","Order Price","Traded Price","Trigger Price","Status","Time/Date","Order Id","Message"].join(","),...l.value.map(Ae=>[Ae.stSymbolName,Ae.stOrderType,Ae.stTransactionType,Ae.inQuantity,Ae.inRemainingQuantity,Ae.inOrderPrice,Ae.inTradedPrice,Ae.inTriggerPrice,Ae.stBrokerStatus,Ae.stFetchTime+" / "+he(Ae.stFetchDate,"YYYY-MM-DD",!0).format("DD-MM-YYYY"),Ae.stOrderId,ot.senitizeString(Ae.stMessage)].join(","))].join(`
`).replace(/(^\[)|(\]$)/gm,"");let H="Order_book_"+he().format("YYYY-MM-DD HH:mm:ss")+".csv",Ee=encodeURI(ae),He=document.createElement("a");He.setAttribute("href",Ee),He.setAttribute("download",H),He.click()}else o.toastMessage({color:"error",message:"No data available to export."})};function $(){_.value&&(w.value.orderData.inQuantity=ot.calculateLotSize(w.value.orderData.inQuantity,ht.maxLots,_.value))}function Qe(ae){_.value&&(w.value.orderData.inQuantity=ot.incrementDecrementLotSize(w.value.orderData.inQuantity,ht.maxLots,_.value,ae))}function Ge(){V.value=!0}function et(){V.value=!1}async function Je(ae){try{let G=await yt.post("/favourite-setting/savefavouritesetting",ae);return G.data.status=="success"&&o.setFavoutiteSettings(ae),G.data}catch(G){console.log(G)}}function it(ae){ne.value=!0,ee.value=!0,F.value=ae.stOrderId;let G={stKey:E.value,stOrderId:ae.stOrderId,stExtra:ae.stExtra?ae.stExtra:{}};o.getSingleOrderHistoryDetail(G).then(H=>{H.status=="success"?re.value=H.data:o.toastMessage({color:H.status,message:H.msg})}).catch(H=>{console.log("err :>> ",H),o.toastMessage({color:"error",message:"error"})}).finally(()=>{ee.value=!1})}function jt(){console.log("hideSingleOrderDetailModel"),ne.value=!1,re.value=[],F.value=null,ee.value=!1}function Si(){E.value?Y.value=!Y.value:o.toastMessage({color:"error",message:"Please generate today's token."})}const Kt=async()=>{E.value&&(K.value=!0,await o.getOrderBook(E.value).then(ae=>{K.value=!1,ae.status=="success"?Ce.value=ae.data:o.toastMessage({color:ae.status,message:ae.msg})}).catch(ae=>{K.value=!1,console.log("err :>> ",ae)}))};function fi(){r.socketEventUpdate.value.on("updateBrokerData",ae=>{if(r.activeTab.value=="orderBook"&&Y.value&&ae[`${r.brokerData.value.stBrokerUniqueCode}_${r.brokerData.value.stBrokerUserId}`]){Q.value&&(clearTimeout(Q.value),Q.value=null,Ne.value=Ne.value+1,Ne.value>40&&(Kt(),Ne.value=0));const G=gi();Q.value=setTimeout(()=>{Ne.value=0,clearTimeout(xe.value),Kt()},G)}})}function gi(){let ae=null;return ae=r.brokerApiDelay.value?.[r.brokerData.value?.stBrokerUniqueCode],ae=ae||r.brokerApiDelay.value.DEFAULT,ae=ae||1e3,ae}const tt={global:e,definePropsData:t,props:r,store:o,columnDefs:a,selectedColumn:s,rowData:l,defaultColDef:u,gridApi:c,columnApi:d,rowHeight:f,getRowNodeId:y,gridOptions:S,options:w,stIdentificationToken:E,inLotSize:_,lotSizeLoading:L,favouriteSetting:P,orderBookSettingModel:V,singleOrderHistoryModel:ne,orderHistoryLoading:ee,currentOrderHistory:re,currentOrderHistoryId:F,orderHistorycols:U,isChildTableOpen:Y,loading:K,orderBookData:Ce,socketEventUpdateTimeout:Q,socketDataUpdateCounter:Ne,getActiveTabDataAfterOrderPlacementTimeOutId:xe,editBtnClicked:fe,modalCancelButtonClick:q,modalUpdateButtonClick:Pe,cancelOrderButtonClick:Se,radioButtonClick:ge,onGridSizeChanged:le,onFirstDataRendered:ie,onGridReady:ye,exportToCsv:Re,changeEditModelQty:$,incrementDecrementLotSize:Qe,openOrderBookSetting:Ge,hideOrderBookSetting:et,saveFavouriteSettingApi:Je,openSingleOrderDetailModel:it,hideSingleOrderDetailModel:jt,openChildPanel:Si,getOrderBook:Kt,connectSocketEventForOrderBook:fi,getBrokerDelayTime:gi,get AgGridVue(){return Eo},onMounted:Gt,ref:g,toRefs:_t,watch:Ke,get useAppStore(){return pi},OrderBookAction:oh,InfoCellRenderer:nh,get useTheme(){return Yi},get sharedFunctions(){return ot},get DraggableResizableVue(){return Jo},get moment(){return he},get axios(){return yt},get config(){return ht}};return Object.defineProperty(tt,"__isScriptSetup",{enumerable:!1,value:!0}),tt}}),PM={key:0,class:"d-flex custom-flex-wrap text-center my-1"},EM={class:"custom-flex-30 custom-flex-xs-40 custom-text-xs-start d-flex"},_M={class:"custom-flex-80"},bM={key:1,class:"d-flex custom-flex-wrap text-center my-1"},DM={class:"custom-flex-80"},RM={class:"custom-flex-60 custom-flex-xs-60 text-end cursor-pointer d-flex"},xM={key:2},AM={class:"text-white"},LM={class:"d-flex flex-wrap gap-4"},MM={class:"custom-flex-xs-100 custom-flex-sm-49 custom-flex-md-32 custom-flex-lg-32"},NM={class:"custom-flex-xs-100 custom-flex-sm-49 custom-flex-md-32 custom-flex-lg-32"},FM={key:0,class:"custom-flex-xs-100 custom-flex-sm-49 custom-flex-md-32 custom-flex-lg-32"},IM={class:"bg-primary px-2 py-2 d-flex justify-space-between"},kM={class:"d-flex w-100"},GM={class:"custom-flex-50"},VM={class:"custom-flex-50"},BM={class:"bg-primary px-2 py-2 d-flex justify-space-between"},HM={class:"text-white"};function WM(n,i,e,t,r,o){return R(),N("div",null,[t.stIdentificationToken?(R(),N("div",bM,[h("div",{class:"custom-flex-30 custom-flex-xs-40 custom-text-xs-start d-flex cursor-pointer",onClick:t.openChildPanel},[h("span",DM,k(e.brokerData.stBrokerName)+" - "+k(e.brokerData?.stBrokerUserId?t.sharedFunctions.formatBrokerUserId(e.brokerData.stBrokerUserId):""),1),t.loading?(R(),at(Ti,{key:0,class:"custom-flex-10 mt-1",width:2,size:"small",indeterminate:""})):De("",!0)]),h("div",RM,[h("div",{class:"flex-grow-1",onClick:t.openChildPanel}),p(_e,pt({icon:t.isChildTableOpen?"bx-chevron-up":"bx-chevron-down",class:"cursor-pointer mr-1",color:"secondary",size:"large"},t.props,{onClick:t.openChildPanel}),null,16,["icon"]),p(Le,{density:"compact",variant:"outlined",onClick:t.exportToCsv,class:"mr-2"},{default:v(()=>i[13]||(i[13]=[M("Export CSV")])),_:1})]),p(Le,{class:"cursor-pointer custom-flex-10 custom-flex-xs-100",variant:"outlined",density:"compact",onClick:t.getOrderBook},{default:v(()=>i[14]||(i[14]=[M("Refresh ")])),_:1})])):(R(),N("div",PM,[h("div",EM,[h("span",_M,k(e.brokerData.stBrokerName)+" - "+k(e.brokerData?.stBrokerUserId?t.sharedFunctions.formatBrokerUserId(e.brokerData.stBrokerUserId):""),1),t.loading?(R(),at(Ti,{key:0,class:"custom-flex-10 mt-1",width:2,size:"small",indeterminate:""})):De("",!0)]),i[12]||(i[12]=h("div",{class:"custom-flex-60 custom-flex-xs-100"},"Please generate today's token.",-1))])),t.isChildTableOpen?(R(),N("div",xM,[p(t.AgGridVue,{style:{height:"425px"},class:Et(t.global.name.value=="dark"?"ag-theme-balham-dark":"ag-theme-balham"),columnDefs:t.columnDefs,rowData:t.rowData,defaultColDef:t.defaultColDef,rowHeight:t.rowHeight,getRowNodeId:t.getRowNodeId,gridOptions:t.gridOptions,onGridReady:t.onGridReady,onGridSizeChanged:t.onGridSizeChanged,onFirstDataRendered:t.onFirstDataRendered},null,8,["class","columnDefs","rowData","defaultColDef","rowHeight","getRowNodeId","gridOptions"])])):De("",!0),p(Ai,{modelValue:t.options.modelValue,"onUpdate:modelValue":i[9]||(i[9]=a=>t.options.modelValue=a),persistent:"",width:"540"},{default:v(()=>[p(t.DraggableResizableVue,{className:"",resizable:!1,"drag-handle":".handle"},{default:v(()=>[p(ui,null,{default:v(()=>[h("div",{class:Et(`bg-${t.options.modalType} px-2 py-2 d-flex justify-space-between handle`)},[h("h3",AM,k(t.options.orderData.stTransactionType)+" : "+k(t.options.orderData.stSymbolName),1),p(_e,{class:"mt-1",icon:"bx-x-circle",onClick:t.modalCancelButtonClick})],2),p(Ft,null,{default:v(()=>[p(Di,null,{default:v(()=>[p(dt,{xs:"12",sm:"12",md:"12"},{default:v(()=>[h("div",LM,[p(ei,{variant:t.options.orderData.stOrderType=="LIMIT"?"flat":"outlined",onClick:i[0]||(i[0]=a=>t.options.orderData.stOrderType="LIMIT"),density:"compact",color:t.options.orderData.stTransactionType=="BUY"?"success":"error",ripple:!1},{default:v(()=>i[15]||(i[15]=[M(" Limit ")])),_:1},8,["variant","color"]),p(ei,{variant:t.options.orderData.stOrderType=="MARKET"?"flat":"outlined",onClick:i[1]||(i[1]=a=>t.options.orderData.stOrderType="MARKET"),density:"compact",color:t.options.orderData.stTransactionType=="BUY"?"success":"error",ripple:!1},{default:v(()=>i[16]||(i[16]=[M(" Market ")])),_:1},8,["variant","color"]),p(ei,{variant:t.options.orderData.stOrderType=="SL-L"?"flat":"outlined",onClick:i[2]||(i[2]=a=>t.options.orderData.stOrderType="SL-L"),density:"compact",color:t.options.orderData.stTransactionType=="BUY"?"success":"error",ripple:!1},{default:v(()=>i[17]||(i[17]=[M(" SL-L ")])),_:1},8,["variant","color"]),p(ei,{variant:t.options.orderData.stOrderType=="SL-M"?"flat":"outlined",onClick:i[3]||(i[3]=a=>t.options.orderData.stOrderType="SL-M"),density:"compact",color:t.options.orderData.stTransactionType=="BUY"?"success":"error",ripple:!1},{default:v(()=>i[18]||(i[18]=[M(" SL-M ")])),_:1},8,["variant","color"])])]),_:1})]),_:1})]),_:1}),p(Ft,{class:"d-flex flex-wrap gap-2"},{default:v(()=>[h("div",MM,[p(Hi,null,{default:v(()=>[M("Qty (Lot size:"+k(t.options.orderData.inQuantity/t.inLotSize)+" ",1),t.lotSizeLoading?(R(),at(Ti,{key:0,size:16,width:"3",color:"primary",indeterminate:"",class:"ml-1"})):De("",!0),i[19]||(i[19]=M(") "))]),_:1}),p(Jt,{density:"compact",class:"custom-remove-input-arrow",modelValue:t.options.orderData.inQuantity,"onUpdate:modelValue":i[6]||(i[6]=a=>t.options.orderData.inQuantity=a),type:"number",placeholder:"Enter Qty",onChange:t.changeEditModelQty},{"prepend-inner":v(()=>[p(_e,{class:"cursor-pointer",disabled:"",icon:"bx-minus",onClick:i[4]||(i[4]=a=>t.incrementDecrementLotSize("decrement"))})]),"append-inner":v(()=>[p(_e,{class:"cursor-pointer",icon:"bx-plus",onClick:i[5]||(i[5]=a=>t.incrementDecrementLotSize("increment"))})]),_:1},8,["modelValue"])]),h("div",NM,[p(Hi,null,{default:v(()=>i[20]||(i[20]=[M("Price")])),_:1}),p(Jt,{density:"compact",modelValue:t.options.orderData.inPrice,"onUpdate:modelValue":i[7]||(i[7]=a=>t.options.orderData.inPrice=a),type:"number",placeholder:"Enter Price",disabled:t.options.orderData.stOrderType=="MARKET"||t.options.orderData.stOrderType=="MARKET_PROTECTION"||t.options.orderData.stOrderType=="SL-M",min:"0",step:"0.05",onKeyup:Ei(t.modalUpdateButtonClick,["enter"])},null,8,["modelValue","disabled"])]),t.options.orderData.stOrderType=="SL-L"||t.options.orderData.stOrderType=="SL-M"?(R(),N("div",FM,[p(Hi,null,{default:v(()=>i[21]||(i[21]=[M("Trigger Price")])),_:1}),p(Jt,{density:"compact",modelValue:t.options.orderData.inTriggerPrice,"onUpdate:modelValue":i[8]||(i[8]=a=>t.options.orderData.inTriggerPrice=a),type:"number",placeholder:"Enter trigger price",min:"0",step:"0.05",onKeyup:Ei(t.modalUpdateButtonClick,["enter"])},null,8,["modelValue"])])):De("",!0)]),_:1}),p(Ft,{class:"d-flex justify-end gap-2"},{default:v(()=>[p(Le,{class:"custom-flex-50",color:"secondary",variant:"tonal",onClick:t.modalCancelButtonClick},{default:v(()=>i[22]||(i[22]=[M(" Cancel ")])),_:1}),p(Le,{color:t.options.modalType,class:"custom-flex-50",onClick:t.modalUpdateButtonClick},{default:v(()=>i[23]||(i[23]=[M(" Update Order ")])),_:1},8,["color"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),p(Ai,{modelValue:t.orderBookSettingModel,"onUpdate:modelValue":i[10]||(i[10]=a=>t.orderBookSettingModel=a),class:"v-dialog-sm",persistent:!0,scrollable:"","max-width":"350"},{default:v(()=>[p(ui,null,{default:v(()=>[h("div",IM,[i[24]||(i[24]=h("h3",{class:"text-white"},"Column Setting",-1)),p(_e,{class:"mt-1",icon:"bx-x-circle",onClick:t.hideOrderBookSetting})]),p(Ft,null,{default:v(()=>[i[25]||(i[25]=h("div",{class:"d-flex w-100 mb-4"},[h("div",{class:"custom-flex-50"},[h("b",{class:""},"Column")]),h("div",{class:"custom-flex-50"},[h("b",{class:""},"Select Column")])],-1)),(R(!0),N(rt,null,kt(t.columnDefs,a=>(R(),N("div",kM,[h("div",GM,k(a?.headerName),1),h("div",VM,[p(or,{modelValue:t.selectedColumn[a?.field].columnVisible,"onUpdate:modelValue":s=>t.selectedColumn[a?.field].columnVisible=s},null,8,["modelValue","onUpdate:modelValue"])])]))),256))]),_:1}),p(Ft,{class:"d-flex flex-wrap justify-end gap-2 custom-no-scroll"},{default:v(()=>[p(Le,{class:"custom-flex-48 custom-flex-xs-100",color:"secondary",variant:"tonal",onClick:t.hideOrderBookSetting},{default:v(()=>i[26]||(i[26]=[M(" Cancel ")])),_:1}),p(Le,{class:"custom-flex-48 custom-flex-xs-100",onClick:n.saveOrderBookSetting},{default:v(()=>i[27]||(i[27]=[M(" Save Setting ")])),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),p(Ai,{modelValue:t.singleOrderHistoryModel,"onUpdate:modelValue":i[11]||(i[11]=a=>t.singleOrderHistoryModel=a),persistent:!0,scrollable:"","max-width":"800"},{default:v(()=>[p(ui,null,{default:v(()=>[h("div",BM,[h("h3",HM,"Order History : "+k(t.currentOrderHistoryId),1),p(_e,{class:"mt-1",icon:"bx-x-circle",onClick:t.hideSingleOrderDetailModel})]),p(Ft,null,{default:v(()=>[p(Zc,{headers:t.orderHistorycols,items:t.currentOrderHistory,density:"compact",loading:t.orderHistoryLoading},{bottom:v(()=>i[28]||(i[28]=[])),_:1},8,["headers","items","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}const UM=ki(OM,[["render",WM]]),jM=vi({__name:"ChildTradeBook",props:["brokerData","activeTab","socketEventUpdate","brokerApiDelay"],setup(n,{expose:i}){i(),he.tz.setDefault("Asia/Kolkata");const{global:e}=Yi(),t=n,r=_t(t),o=pi(),a=g([{field:"stSymbolName",headerName:"Symbol Name",sortable:!0,hide:!1,minWidth:150,cellStyle:{}},{field:"stProductType",headerName:"Product Type",sortable:!0,hide:!1,minWidth:80,cellStyle:{}},{field:"stTransactionType",headerName:"Side",sortable:!0,hide:!1,minWidth:80,cellStyle:{},cellClass:Q=>Q.data.stTransactionType=="BUY"?"text-success":Q.data.stTransactionType=="SELL"?"text-error":""},{field:"inTradePrice",headerName:"Avg Price",sortable:!0,hide:!1,minWidth:80,cellStyle:{},cellRenderer:Q=>Q.data.inTradePrice},{field:"inTradedQuantity",headerName:"Net Qty",sortable:!0,hide:!1,minWidth:80,cellStyle:{},cellRenderer:Q=>Q.data.inTradedQuantity},{field:"stFetchTime",headerName:"Time/Date",sortable:!0,sort:"desc",hide:!1,minWidth:150,cellStyle:{},cellRenderer:Q=>Q.data.stFetchTime+" / "+he(Q.data.stFetchDate,"YYYY-MM-DD",!0).format("DD-MM-YYYY")},{field:"stOrderId",headerName:"Order Id",sortable:!0,hide:!1,minWidth:150,cellStyle:{},cellRenderer:Q=>Q.data.stOrderId}]),s=g([]),l=g({initialWidth:100,sortable:!1,resizable:!0}),u=g(null),c=g(null),d=g(30),f=g(null),y=g({suppressCellFocus:!0}),S=g(r.brokerData.value?r.brokerData.value.stIdentificationToken:null),w=g([]),E=g(!1),_=g(!1),L=g(null),P=g(0),V=g(null);Gt(async()=>{Y()}),Ke(r.activeTab,(Q,Ne)=>{Q!="tradeBook"&&(_.value=!1)},{deep:!0}),Ke(w,(Q,Ne)=>{s.value=Q},{deep:!0}),Ke(r.brokerData,(Q,Ne)=>{S.value=Q?Q.stIdentificationToken:null},{deep:!0}),Ke(_,(Q,Ne)=>{Q&&F()},{deep:!0});const ne=()=>{u.value.sizeColumnsToFit()},ee=Q=>{},re=Q=>{try{u.value=Q.api,c.value=Q.columnApi,u.value.sizeColumnsToFit()}catch(Ne){console.log(Ne)}},F=async()=>{S.value&&(E.value=!0,await o.getTradeBook(S.value).then(Q=>{E.value=!1,Q.status=="success"?w.value=Q.data:o.toastMessage({color:Q.status,message:Q.msg})}).catch(Q=>{E.value=!1,console.log("err :>> ",Q)}))};function U(){S.value?_.value=!_.value:o.toastMessage({color:"error",message:"Please generate today's token."})}function Y(){r.socketEventUpdate.value.on("updateBrokerData",Q=>{if(r.activeTab.value=="tradeBook"&&_.value&&Q[`${r.brokerData.value.stBrokerUniqueCode}_${r.brokerData.value.stBrokerUserId}`]){L.value&&(clearTimeout(L.value),L.value=null,P.value=P.value+1,P.value>40&&(F(),P.value=0));const Ne=K();L.value=setTimeout(()=>{P.value=0,clearTimeout(V.value),F()},Ne)}})}function K(){let Q=null;return Q=r.brokerApiDelay.value?.[r.brokerData.value?.stBrokerUniqueCode],Q=Q||r.brokerApiDelay.value.DEFAULT,Q=Q||1e3,Q}const Ce={global:e,definePropsData:t,props:r,store:o,columnDefs:a,rowData:s,defaultColDef:l,gridApi:u,columnApi:c,rowHeight:d,getRowNodeId:f,gridOptions:y,stIdentificationToken:S,tradeBookData:w,loading:E,isChildTableOpen:_,socketEventUpdateTimeout:L,socketDataUpdateCounter:P,getActiveTabDataAfterOrderPlacementTimeOutId:V,onGridSizeChanged:ne,onFirstDataRendered:ee,onGridReady:re,getTradeBook:F,openChildPanel:U,connectSocketEventForOrderBook:Y,getBrokerDelayTime:K,get AgGridVue(){return Eo},onMounted:Gt,ref:g,toRefs:_t,watch:Ke,get useAppStore(){return pi},get moment(){return he},get useTheme(){return Yi},get sharedFunctions(){return ot}};return Object.defineProperty(Ce,"__isScriptSetup",{enumerable:!1,value:!0}),Ce}}),zM={key:0,class:"d-flex custom-flex-wrap text-center my-1"},YM={class:"custom-flex-40 custom-flex-xs-50 custom-text-xs-start d-flex"},KM={class:"custom-flex-80"},QM={key:1,class:"d-flex custom-flex-wrap text-center my-1"},qM={class:"custom-flex-80"},XM={key:2};function JM(n,i,e,t,r,o){return R(),N("div",null,[t.stIdentificationToken?(R(),N("div",QM,[h("div",{class:"custom-flex-40 custom-flex-xs-50 custom-text-xs-start d-flex cursor-pointer",onClick:t.openChildPanel},[h("span",qM,k(e.brokerData.stBrokerName)+" - "+k(e.brokerData?.stBrokerUserId?t.sharedFunctions.formatBrokerUserId(e.brokerData.stBrokerUserId):""),1),t.loading?(R(),at(Ti,{key:0,class:"custom-flex-10 mt-1",width:2,size:"small",indeterminate:""})):De("",!0)]),h("div",{class:"custom-flex-sm-50 custom-flex-md-50 custom-flex-lg-50 custom-flex-xs-10 text-end cursor-pointer d-flex",onClick:t.openChildPanel},[i[1]||(i[1]=h("div",{class:"flex-grow-1 custom-display-none"},null,-1)),p(_e,pt({icon:t.isChildTableOpen?"bx-chevron-up":"bx-chevron-down",class:"cursor-pointer",color:"secondary",size:"large"},t.props,{onClick:t.openChildPanel}),null,16,["icon"])]),i[3]||(i[3]=h("div",{class:"custom-flex-1 custom-flex-xs-0"},null,-1)),p(Le,{class:"cursor-pointer custom-flex-9 custom-flex-xs-39",variant:"outlined",density:"compact",onClick:t.getTradeBook},{default:v(()=>i[2]||(i[2]=[M("Refresh ")])),_:1})])):(R(),N("div",zM,[h("div",YM,[h("span",KM,k(e.brokerData.stBrokerName)+" - "+k(e.brokerData?.stBrokerUserId?t.sharedFunctions.formatBrokerUserId(e.brokerData.stBrokerUserId):""),1),t.loading?(R(),at(Ti,{key:0,class:"custom-flex-10 mt-1",width:2,size:"small",indeterminate:""})):De("",!0)]),i[0]||(i[0]=h("div",{class:"custom-flex-60 custom-flex-xs-100"},"Please generate today's token.",-1))])),t.isChildTableOpen?(R(),N("div",XM,[p(t.AgGridVue,{style:{height:"425px"},class:Et(t.global.name.value=="dark"?"ag-theme-balham-dark":"ag-theme-balham"),columnDefs:t.columnDefs,rowData:t.rowData,defaultColDef:t.defaultColDef,rowHeight:t.rowHeight,getRowNodeId:t.getRowNodeId,gridOptions:t.gridOptions,onGridReady:t.onGridReady,onGridSizeChanged:t.onGridSizeChanged,onFirstDataRendered:t.onFirstDataRendered},null,8,["class","columnDefs","rowData","defaultColDef","rowHeight","getRowNodeId","gridOptions"])])):De("",!0)])}const ZM=ki(jM,[["render",JM]]),$M=vi({__name:"ChildFunds",props:["brokerData","activeTab","socketEventUpdate","brokerApiDelay"],setup(n,{expose:i}){i(),he.tz.setDefault("Asia/Kolkata");const e=n,t=_t(e),r=pi(),o=g(t.brokerData.value?t.brokerData.value.stIdentificationToken:null),a=g([]),s=g(!1),l=g(!1),u=g(null),c=g(0),d=g(null);Gt(async()=>{S()}),Ke(t.brokerData,(_,L)=>{o.value=_?_.stIdentificationToken:null},{deep:!0}),Ke(l,(_,L)=>{_&&f()},{deep:!0}),Ke(t.activeTab,(_,L)=>{_!="funds"&&(l.value=!1)},{deep:!0});const f=async()=>{o.value&&(s.value=!0,await r.getFund(o.value).then(_=>{s.value=!1,_.status=="success"?a.value=_.data:r.toastMessage({color:_.status,message:_.msg})}).catch(_=>{s.value=!1,console.log("err :>> ",_)}))};function y(){o.value?l.value=!l.value:r.toastMessage({color:"error",message:"Please generate today's token."})}function S(){t.socketEventUpdate.value.on("updateBrokerData",_=>{if(t.activeTab.value=="funds"&&l.value&&_[`${t.brokerData.value.stBrokerUniqueCode}_${t.brokerData.value.stBrokerUserId}`]){u.value&&(clearTimeout(u.value),u.value=null,c.value=c.value+1,c.value>40&&(f(),c.value=0));const L=w();u.value=setTimeout(()=>{c.value=0,clearTimeout(d.value),f()},L)}})}function w(){let _=null;return _=t.brokerApiDelay.value?.[t.brokerData.value?.stBrokerUniqueCode],_=_||t.brokerApiDelay.value.DEFAULT,_=_||1e3,_}const E={definePropsData:e,props:t,store:r,stIdentificationToken:o,fundData:a,loading:s,isChildTableOpen:l,socketEventUpdateTimeout:u,socketDataUpdateCounter:c,getActiveTabDataAfterOrderPlacementTimeOutId:d,getFunds:f,openChildPanel:y,connectSocketEventForOrderBook:S,getBrokerDelayTime:w,onMounted:Gt,ref:g,toRefs:_t,watch:Ke,get useAppStore(){return pi},get sharedFunctions(){return ot},get moment(){return he}};return Object.defineProperty(E,"__isScriptSetup",{enumerable:!1,value:!0}),E}}),eN={key:0,class:"d-flex custom-flex-wrap text-center my-1"},tN={class:"custom-flex-40 custom-flex-xs-50 custom-text-xs-start d-flex"},iN={class:"custom-flex-80"},rN={key:1,class:"d-flex custom-flex-wrap text-center my-1"},oN={class:"custom-flex-80"},nN={key:2,class:"d-flex flex-wrap justify-space-between gap-4 mt-2"},aN={class:"py-7 px-6"},sN={class:"text-md border-b py-3 d-flex"},lN={class:"custom-flex-50"},uN={class:"text-md border-b py-3 d-flex"},cN={class:"custom-flex-50"},dN={class:"text-md border-b py-3 d-flex"},pN={class:"custom-flex-50"},fN={class:"text-md py-3 d-flex"},hN={class:"custom-flex-50"},vN={class:"py-7 px-6"},gN={class:"text-md border-b py-3 d-flex"},yN={class:"custom-flex-50"},mN={class:"text-md border-b py-3 d-flex"},CN={class:"custom-flex-50"},SN={class:"text-md border-b py-3 d-flex"},wN={class:"custom-flex-50"},TN={class:"text-md py-3 d-flex"},ON={class:"custom-flex-50"};function PN(n,i,e,t,r,o){return R(),N("div",null,[t.stIdentificationToken?(R(),N("div",rN,[h("div",{class:"custom-flex-40 custom-flex-xs-50 custom-text-xs-start d-flex cursor-pointer",onClick:t.openChildPanel},[h("span",oN,k(e.brokerData.stBrokerName)+" - "+k(e.brokerData?.stBrokerUserId?t.sharedFunctions.formatBrokerUserId(e.brokerData.stBrokerUserId):""),1),t.loading?(R(),at(Ti,{key:0,class:"custom-flex-10 mt-1",width:2,size:"small",indeterminate:""})):De("",!0)]),h("div",{class:"custom-flex-sm-50 custom-flex-md-50 custom-flex-lg-50 custom-flex-xs-10 text-end cursor-pointer d-flex",onClick:t.openChildPanel},[i[1]||(i[1]=h("div",{class:"flex-grow-1"},null,-1)),p(_e,pt({icon:t.isChildTableOpen?"bx-chevron-up":"bx-chevron-down",class:"cursor-pointer",color:"secondary",size:"large"},t.props,{onClick:t.openChildPanel}),null,16,["icon"])]),i[3]||(i[3]=h("div",{class:"custom-flex-1 custom-flex-xs-0"},null,-1)),p(Le,{class:"cursor-pointer custom-flex-9 custom-flex-xs-39",variant:"outlined",density:"compact",onClick:t.getFunds},{default:v(()=>i[2]||(i[2]=[M("Refresh ")])),_:1})])):(R(),N("div",eN,[h("div",tN,[h("span",iN,k(e.brokerData.stBrokerName)+" - "+k(e.brokerData?.stBrokerUserId?t.sharedFunctions.formatBrokerUserId(e.brokerData.stBrokerUserId):""),1),t.loading?(R(),at(Ti,{key:0,class:"custom-flex-10 mt-1",width:2,size:"small",indeterminate:""})):De("",!0)]),i[0]||(i[0]=h("div",{class:"custom-flex-60 custom-flex-xs-100"},"Please generate today's token.",-1))])),t.isChildTableOpen?(R(),N("div",nN,[p(ui,{class:"custom-flex-48 custom-flex-xs-100"},{default:v(()=>[h("div",aN,[i[8]||(i[8]=h("div",{class:"text-xl border-b pb-3"},"NSE - Derivatives",-1)),i[9]||(i[9]=h("div",{class:"text-md py-3 border-b d-flex"},[h("span",{class:"custom-flex-50"},[h("b",null,"Type")]),h("span",{class:"custom-flex-50"},[h("b",null,"Balance")])],-1)),h("div",sN,[i[4]||(i[4]=h("span",{class:"custom-flex-50"},"Total Balance ",-1)),h("span",lN,k(isNaN(t.fundData?.derivatives?.nse?.futures?.inTotalBalance)?"-":Number(t.fundData?.derivatives?.nse?.futures?.inTotalBalance).toLocaleString("en-IN")),1)]),h("div",uN,[i[5]||(i[5]=h("span",{class:"custom-flex-50"},"Used Margin ",-1)),h("span",cN,k(isNaN(t.fundData?.derivatives?.nse?.futures?.inUsedMargin)?"-":Number(t.fundData?.derivatives?.nse?.futures?.inUsedMargin).toLocaleString("en-IN")),1)]),h("div",dN,[i[6]||(i[6]=h("span",{class:"custom-flex-50"},"Realized P&L ",-1)),h("span",pN,k(isNaN(t.fundData?.derivatives?.nse?.futures?.inRealizedProfitAndLoss)?"-":Number(t.fundData?.derivatives?.nse?.futures?.inRealizedProfitAndLoss).toLocaleString("en-IN")),1)]),h("div",fN,[i[7]||(i[7]=h("span",{class:"custom-flex-50"},"Available ",-1)),h("span",hN,k(isNaN(t.fundData?.derivatives?.nse?.futures?.inAvailableBalance)?"-":Number(t.fundData?.derivatives?.nse?.futures?.inAvailableBalance).toLocaleString("en-IN")),1)])])]),_:1}),p(ui,{class:"custom-flex-48 custom-flex-xs-100"},{default:v(()=>[h("div",vN,[i[14]||(i[14]=h("div",{class:"text-xl border-b pb-3"},"NSE - Equity",-1)),i[15]||(i[15]=h("div",{class:"text-md border-b py-3 d-flex"},[h("span",{class:"custom-flex-50"},[h("b",null,"Type")]),h("span",{class:"custom-flex-50"},[h("b",null,"Balance")])],-1)),h("div",gN,[i[10]||(i[10]=h("span",{class:"custom-flex-50"},"Total Balance ",-1)),h("span",yN,k(isNaN(t.fundData?.equity?.nse?.inTotalBalance)?"-":Number(t.fundData?.equity?.nse?.inTotalBalance).toLocaleString("en-IN")),1)]),h("div",mN,[i[11]||(i[11]=h("span",{class:"custom-flex-50"},"Used Margin ",-1)),h("span",CN,k(isNaN(t.fundData?.equity?.nse?.inUsedMargin)?"-":Number(t.fundData?.equity?.nse?.inUsedMargin).toLocaleString("en-IN")),1)]),h("div",SN,[i[12]||(i[12]=h("span",{class:"custom-flex-50"},"Realized P&L ",-1)),h("span",wN,k(isNaN(t.fundData?.equity?.nse?.inRealizedProfitAndLoss)?"-":Number(t.fundData?.equity?.nse?.inRealizedProfitAndLoss).toLocaleString("en-IN")),1)]),h("div",TN,[i[13]||(i[13]=h("span",{class:"custom-flex-50"},"Available ",-1)),h("span",ON,k(isNaN(t.fundData?.equity?.nse?.inAvailableBalance)?"-":Number(t.fundData?.equity?.nse?.inAvailableBalance).toLocaleString("en-IN")),1)])])]),_:1})])):De("",!0)])}const EN=ki($M,[["render",PN]]),_N={key:0,style:{"margin-bottom":"2px"}},bN={class:"high-low-label"},DN={class:"high-low-label label-green"},RN={class:"chart-container"},xN={class:"chart-wrapper"},AN={class:"high-low-label label-red"},LN={key:1,class:"range-area"},MN={style:{"font-size":"12px",float:"left"}},NN={class:"high-low-label label-red"},FN={style:{"font-size":"12px",float:"right"}},IN={class:"high-low-label label-green"},kN={class:"ltp-pointer-line"};function GN(n,i,e,t,r,o){return R(),N("div",null,[t.typeOfLtpRangeBar=="LINE_CHART"?(R(),N("div",_N,[p(Di,{class:"range-area"},{default:v(()=>[p(dt,{class:"text-left",style:{"font-size":"12px"}},{default:v(()=>[h("span",bN,[i[0]||(i[0]=h("span",{class:"text-warning"},"O:",-1)),M(" "+k(t.inDayOpen),1)])]),_:1}),p(dt,{class:"text-right",style:{"font-size":"12px"}},{default:v(()=>[h("span",DN,k(t.inDayHigh==t.inDayOpen?"O=H:":"H:"),1),M(" "+k(t.inDayHigh?t.inDayHigh:""),1)]),_:1})]),_:1}),h("div",RN,[h("div",xN,[p(t.VChart,{ref:"chartRef",option:t.chartOptions,autoresize:!0,loading:t.loading,"loading-options":t.loadingOptions},null,8,["option","loading","loading-options"])])]),p(Di,{class:"range-area"},{default:v(()=>[p(dt,{class:"text-right",style:{"font-size":"12px"}},{default:v(()=>[h("span",AN,k(t.inDayLow==t.inDayOpen?"O=L:":"L:"),1),M(" "+k(t.inDayLow?t.inDayLow:""),1)]),_:1})]),_:1})])):De("",!0),t.typeOfLtpRangeBar=="RANGE_BAR"?(R(),N("div",LN,[h("div",MN,[h("span",NN,k(t.inDayLow==t.inDayOpen?"O=L:":"L:"),1),M(" "+k(t.inDayLow?t.inDayLow:""),1)]),h("div",FN,[M(k(t.inDayHigh?t.inDayHigh:"")+" ",1),h("span",IN,k(t.inDayHigh==t.inDayOpen?":O=H":":H"),1)]),h("span",kN,[h("strong",{class:"ltp-pointer",style:Xo({left:(t.inLtp-t.inDayLow)/(t.inDayHigh-t.inDayLow)*100+"%"})},null,4),h("strong",{class:"day-open-pointer",style:Xo({left:(t.inDayOpen-t.inDayLow)/(t.inDayHigh-t.inDayLow)*100+"%"})},null,4)])])):De("",!0)])}const VN={__name:"SparklineChart",props:["typeOfLtpRangeBar","chartData","inLtp","inPrevDayClose","inDayOpen","inDayHigh","inDayLow"],setup(n,{expose:i}){i();const e=pi();rs([Pc,bc,_c,Ec,Dc]);const t=n,{typeOfLtpRangeBar:r,chartData:o,inLtp:a,inPrevDayClose:s,inDayOpen:l,inDayHigh:u,inDayLow:c}=_t(t),d=g(!1),f=g({text:"Loading Chart",color:"#c42b1e",textColor:"#c2c6dc",maskColor:"#333333"}),y=g(null),S=g(null),w=g(null),E=g(V()),_=g({}),L=g(0),P=g({darkMode:e.isDarkTheme,grid:{left:0,right:"65px",top:0,bottom:"15px"},xAxis:{type:"category",show:!1,data:[],axisPointer:{label:{show:!0,color:e.isDarkTheme?"#FFFFFF":"#6E3B37"}}},yAxis:{scale:!0,show:!1,type:"value",position:"right",axisPointer:{label:{show:!0,color:e.isDarkTheme?"#FFFFFF":"#6E3B37"}},min:function(re){if(re.min&&s.value)if(re.min>=s.value){let F=parseInt(s.value*.1);return F=F<50?F:50,s.value-F}else return null;else return null},max:function(re){if(re.max&&s.value)if(re.max<=s.value){let F=parseInt(s.value*.1);return F=F<50?F:50,s.value+F}else return null;else return null}},series:[{symbol:"none",name:"Price",data:[],type:"line",smooth:!0,connectNulls:!0,markLine:{silent:!1,symbol:"none",data:[],label:{show:!0},lineStyle:{type:"dotted",color:"#9f9f9f",width:1.25}}}],visualMap:{show:!1,seriesIndex:0,pieces:[{gt:0,lte:50,color:"#dc3545"},{gt:100,color:"#28a745"}],outOfRange:{color:"#999"}},tooltip:{show:!0,backgroundColor:"rgba(50, 50, 50, 0.5)",axisPointer:{type:"cross",crossStyle:{color:"#999"},label:{show:!0,backgroundColor:"transparent",padding:[0,1,0,0]}},textStyle:{color:"#fff"}}});function V(){const re=new Date("1970-01-01T09:16:00Z"),F={};for(let U=0;U<375;U++){const K=new Date(re.getTime()+U*6e4).toISOString().substr(11,8);F[K]=null}return F}const ne=()=>{const re=new Date(new Date().toLocaleString("en-US",{timeZone:"Asia/Kolkata"}));return{date:re.toISOString().slice(0,10),time:re.toTimeString().slice(0,5)+":00"}};Ke(a,(re,F)=>{try{const U=ne(),Y=U.date,K=U.time;F&&(w.value!=Y&&(_.value={...E.value},w.value=Y),_.value[K]!==void 0&&(_.value[K]=re),S.value!=K&&y.value.setOption({xAxis:{data:Object.keys(_.value)},series:[{data:Object.values(_.value),seriesIndex:0}]},!1,!0),S.value=K)}catch(U){console.log("error"),console.log(U)}},{deep:!0}),Ke(s,()=>{try{s.value&&(P.value.visualMap.pieces[0].lte=s.value,P.value.visualMap.pieces[1].gt=s.value,P.value.series[0].markLine.data=[{name:"Prev Close",yAxis:s.value,label:{show:!0,formatter:s.value,position:"end",color:"#9f9f9f"}}])}catch(re){console.log("error"),console.log(re)}finally{}},{deep:!0}),Ke(o,()=>{try{_.value={...E.value},o.value&&o.value.length>0&&(d.value=!0,o.value.forEach(re=>{re.C&&(_.value[re.T]=re.C,L.value=re.C),w.value=re.D}),P.value.xAxis.data=Object.keys(_.value),P.value.series[0].data=Object.values(_.value),P.value.visualMap.pieces[0].lte=s.value,P.value.visualMap.pieces[1].gt=s.value,P.value.series[0].markLine.data=[{name:"Prev Close",yAxis:s.value,label:{show:!0,formatter:s.value,position:"end",color:"#9f9f9f"}}])}catch(re){console.log("error"),console.log(re)}finally{d.value=!1}},{deep:!0}),Oo(()=>{y.value&&y.value.dispose()});const ee={store:e,definePropsData:t,typeOfLtpRangeBar:r,chartData:o,inLtp:a,inPrevDayClose:s,inDayOpen:l,inDayHigh:u,inDayLow:c,loading:d,loadingOptions:f,chartRef:y,lastLtpFetchTime:S,lastLtpFetchDate:w,defaultChartTimeline:E,usedChartTimeline:_,lastValue:L,chartOptions:P,generateXAxis:V,getCurrentDateAndTime:ne,onBeforeUnmount:Oo,ref:g,toRefs:_t,watch:Ke,get use(){return rs},get CanvasRenderer(){return Pc},get LineChart(){return bc},get GridComponent(){return _c},get TooltipComponent(){return Ec},get MarkLineComponent(){return Dc},get VChart(){return dh},get useAppStore(){return pi}};return Object.defineProperty(ee,"__isScriptSetup",{enumerable:!1,value:!0}),ee}},BN=ki(VN,[["render",GN]]),HN={style:{"font-size":"14px"}},WN={key:0},UN={key:1};function jN(n,i,e,t,r,o){return R(),N("span",HN,[t.time?(R(),N("span",WN,k(t.time),1)):(R(),N("span",UN,"Loading accurate time..."))])}const zN={__name:"ClockTime",setup(n,{expose:i}){i();const e=g(""),t=g(null),r=g(null);let o=null;async function a(){try{const u=performance.now(),d=(await yt.post("/one-click/getutctime",{}).then(w=>{if(w.data.status=="success")return{utc:w.data.data.utc}})).utc,f=performance.now(),S=(f-u)/2;t.value=d+S,r.value=(u+f)/2}catch(u){console.error("Failed to sync with server:",u)}}function s(){if(t.value==null||r.value==null)return;const u=performance.now()-r.value,c=t.value+u,d=new Date(c),f=String(d.getDate()).padStart(2,"0"),y=String(d.getMonth()+1).padStart(2,"0"),S=d.getFullYear(),w=String(d.getHours()).padStart(2,"0"),E=String(d.getMinutes()).padStart(2,"0"),_=String(d.getSeconds()).padStart(2,"0");e.value=`${f}-${y}-${S} / ${w}:${E}:${_}`}Gt(async()=>{await a(),s();const u=1e3-Date.now()%1e3;setTimeout(()=>{s(),o=setInterval(s,1e3)},u)}),Oo(()=>{clearInterval(o)});const l={time:e,baseUtc:t,basePerf:r,get intervalId(){return o},set intervalId(u){o=u},syncServerTime:a,updateClock:s,ref:g,onMounted:Gt,onBeforeUnmount:Oo,get axios(){return yt}};return Object.defineProperty(l,"__isScriptSetup",{enumerable:!1,value:!0}),l}},YN=ki(zN,[["render",jN]]);const eg=Symbol.for("vuetify:v-item-group"),KN=Fl({...ah(),...Sy({selectedClass:"v-item--selected"}),...sh(),...wy()},"VItemGroup"),wc=fs()({name:"VItemGroup",props:KN(),emits:{"update:modelValue":n=>!0},setup(n,i){let{slots:e}=i;const{themeClasses:t}=Ty(n),{isSelected:r,select:o,next:a,prev:s,selected:l}=Oy(n,eg);return()=>p(n.tag,{class:["v-item-group",t.value,n.class],style:n.style},{default:()=>[e.default?.({isSelected:r,select:o,next:a,prev:s,selected:l.value})]})}}),Wr=fs()({name:"VItem",props:Py(),emits:{"group:selected":n=>!0},setup(n,i){let{slots:e}=i;const{isSelected:t,select:r,toggle:o,selectedClass:a,value:s,disabled:l}=Ey(n,eg);return()=>e.default?.({isSelected:t.value,selectedClass:a.value,select:r,toggle:o,value:s.value,disabled:l.value})}}),QN={class:"pa-2 one-click-trade-window"},qN={class:"d-flex justify-space-between"},XN={class:"d-flex flex-wrap justify-space-between mb-1"},JN={class:"d-flex align-center"},ZN={class:"d-flex align-center"},$N=["selected","value"],eF={class:"d-flex align-center ml-4"},tF={key:0,class:"text-error"},iF={class:"mt-0"},rF={class:"custom-select"},oF=["value"],nF={class:"custom-select"},aF=["value"],sF={class:"custom-select"},lF=["label"],uF=["value"],cF={class:"custom-select"},dF=["value"],pF={class:"custom-select"},fF=["value"],hF={class:"custom-select"},vF=["value"],gF={class:"custom-input-group"},yF={key:0},mF={class:"custom-label"},CF={class:"custom-input-group"},SF={key:1},wF={class:"custom-label"},TF={class:"custom-input-group"},OF={class:"custom-select"},PF=["value"],EF={class:"custom-select"},_F=["value"],bF={class:"custom-select"},DF=["disabled"],RF=["value"],xF={class:"d-flex custom-input-group"},AF={class:"custom-flex-xs-5 custom-flex-sm-5 custom-flex-md-5 custom-flex-lg-5"},LF={class:"custom-flex-xs-50 custom-flex-sm-50 custom-flex-md-50 custom-flex-lg-50 mr-2"},MF={class:"custom-flex-xs-45 custom-flex-sm-45 custom-flex-md-45 custom-flex-lg-45"},NF={class:"custom-select"},FF=["disabled"],IF={class:"d-flex custom-input-group"},kF={class:"custom-flex-xs-5 custom-flex-sm-5 custom-flex-md-5 custom-flex-lg-5"},GF={class:"custom-flex-xs-50 custom-flex-sm-50 custom-flex-md-50 custom-flex-lg-50 mr-2"},VF={class:"custom-flex-xs-45 custom-flex-sm-45 custom-flex-md-45 custom-flex-lg-45"},BF={class:"custom-select"},HF=["disabled"],WF={class:"custom-select"},UF=["value"],jF={class:"custom-select"},zF=["value"],YF={class:"d-flex justify-end"},KF={style:{"font-size":"13px"}},QF={class:"custom-grid custom-grid-cols-xs-1 custom-grid-cols-sm-100 custom-grid-cols-md-100 custom-grid-cols-lg-100 gap-1"},qF={class:"text-center text-md-left pr-md-4",style:{"grid-column":"span 32"}},XF={key:0,class:"custom-break-word"},JF={key:0},ZF={key:0},$F={class:"mb-1"},eI={key:1},tI={key:1,class:"custom-break-word"},iI=["value"],rI={key:0},oI={key:0},nI={class:"mb-1"},aI={key:1},sI={key:2,class:"custom-break-word"},lI={key:0},uI={key:0},cI={key:1},dI={class:"d-flex flex-wrap gap-1 justify-sm-start justify-md-start"},pI={class:"d-flex custom-flex-xs-100 custom-flex-sm-48 custom-flex-md-65 custom-flex-lg-30"},fI={class:"d-flex custom-flex-xs-20 custom-flex-sm-20 custom-flex-md-20 custom-flex-lg-30"},hI={class:"d-flex custom-flex-xs-100 custom-flex-sm-48 custom-flex-md-65 custom-flex-lg-30"},vI={class:"d-flex custom-flex-xs-20 custom-flex-sm-20 custom-flex-md-20 custom-flex-lg-30"},gI={class:"text-center pl-md-4 pr-md-4",style:{"grid-column":"span 36"}},yI={class:"text-center custom-flex-xs-100 custom-flex-sm-32 custom-flex-md-32 mb-4"},mI={key:0},CI={key:0},SI={class:"d-flex flex-wrap gap-2 justify-center mt-1"},wI={class:"d-flex custom-flex-xs-100 custom-flex-sm-46 custom-flex-md-65"},TI={class:"d-flex custom-flex-xs-100 custom-flex-sm-46 custom-flex-md-65"},OI={class:"mt-1",style:{"font-size":"13px"}},PI={class:"text-center text-md-right pl-md-4",style:{"grid-column":"span 32"}},EI={key:0},_I={key:0},bI=["value"],DI={key:0},RI={key:0},xI={class:"mb-1"},AI={key:1},LI={class:"d-flex flex-wrap gap-1 justify-end justify-sm-end justify-md-end custom-md-padding"},MI={class:"d-flex custom-flex-xs-100 custom-flex-sm-48 custom-flex-md-65 custom-flex-lg-30 order-md-1 order-sm-1 order-lg-0"},NI={class:"d-flex custom-flex-xs-20 custom-flex-sm-20 custom-flex-md-20 custom-flex-lg-30"},FI={class:"d-flex custom-flex-xs-100 custom-flex-sm-48 custom-flex-md-65 custom-flex-lg-30 order-md-0 order-sm-0"},II={class:"d-flex custom-flex-xs-20 custom-flex-sm-20 custom-flex-md-20 custom-flex-lg-30"},kI={class:"mt-5 mt-sm-6 mt-md-3 one-click-tab-section"},GI={key:1,class:"mt-2"},VI={key:0,class:"text-center mb-1"},BI={key:1,class:"text-center mb-1"},HI={class:"text-white"},WI={key:0,class:"mb-4 text-center"},UI={class:"d-flex justify-space-between"},jI={key:0,class:"mt-2"},zI={key:0},YI={key:1},KI={class:"mt-2"},QI={class:"d-flex gap-1 custom-switch"},qI={class:"d-flex justify-space-between flex-wrap"},XI={class:"d-flex flex-wrap gap-2"},JI={class:"custom-flex-xs-100 custom-flex-sm-49 custom-flex-md-32 custom-flex-lg-32"},ZI={key:0},$I={key:1},ek={class:"custom-flex-xs-100 custom-flex-sm-49 custom-flex-md-32 custom-flex-lg-32"},tk={class:"custom-flex-xs-100 custom-flex-sm-49 custom-flex-md-32 custom-flex-lg-32"},ik={key:0,class:"custom-flex-xs-100 custom-flex-sm-49 custom-flex-md-32 custom-flex-lg-32"},rk={class:"mt-2",style:{height:"20px","font-size":"13px"}},ok={key:0,class:"font-weight-bold"},nk={key:0},ak={key:1,class:"font-weight-bold"},sk={key:2,class:"font-weight-bold"},lk={key:0},uk={class:"text-white"},ck={key:0,class:"mb-4 text-center"},dk={class:"d-flex justify-space-between"},pk={class:"mt-2"},fk={class:"d-flex gap-1 custom-switch"},hk={class:"d-flex justify-space-between flex-wrap"},vk={class:"d-flex flex-wrap gap-2"},gk={class:"custom-flex-xs-100 custom-flex-sm-49 custom-flex-md-32 custom-flex-lg-32"},yk={key:0},mk={key:1},Ck={class:"custom-flex-xs-100 custom-flex-sm-49 custom-flex-md-32 custom-flex-lg-32"},Sk={class:"custom-flex-xs-100 custom-flex-sm-49 custom-flex-md-32 custom-flex-lg-32"},wk={key:0,class:"custom-flex-xs-100 custom-flex-sm-49 custom-flex-md-32 custom-flex-lg-32"},Tk={class:"d-flex mt-4"},Ok={class:"custom-flex-xs-100 custom-flex-sm-49 custom-flex-md-32 custom-flex-lg-32"},Pk={key:0},Ek={class:"bg-error px-2 py-2 d-flex justify-space-between handle"},_k={class:"text-error"},bk={key:0,class:"text-center"},Dk={key:1,class:"text-center"},Rk={class:"d-flex justify-space-between"},xk={class:"bg-primary px-2 py-2 d-flex justify-space-between handle"},Ak={class:"bg-primary px-2 py-2 d-flex justify-space-between handle"},Lk={key:1},Mk={class:"bg-primary px-2 py-2 d-flex justify-space-between gap-4 handle custom-sticky-model-header"};function Nk(n,i,e,t,r,o){return R(),N("div",QN,[p(Op,{modelValue:t.showNotification,"onUpdate:modelValue":i[0]||(i[0]=a=>t.showNotification=a),title:"Alert",class:"mb-3",color:t.stNotificationType,icon:"$"+t.stNotificationType,border:"start",closable:""},{default:v(()=>[M(k(t.stNotification),1)]),_:1},8,["modelValue","color","icon"]),t.showMtmThresholdAlert?(R(),at(Op,{key:0,color:"info",icon:"bx-info-circle",class:"mb-3"},{default:v(()=>[h("div",qN,[h("div",null,[i[110]||(i[110]=M(" Historical data indicates that when your MTM swing exceeds ")),h("u",null,[h("b",null,k(t.inMtmThreshold),1)]),i[111]||(i[111]=M(", there's a ")),h("u",null,[h("b",null,k(t.inMtmThresholdPercentage)+"%",1)]),i[112]||(i[112]=M(" likelihood that the day will close in loss OR more than expected loss. ")),i[113]||(i[113]=h("br",null,null,-1)),i[114]||(i[114]=M("We strongly recommend considering a pause in trading for the day or implementing enhanced risk management measures to help mitigate further downside risk. "))]),h("div",null,[p(Le,{variant:"flat",color:"info",size:"25",onClick:i[1]||(i[1]=a=>t.showMtmThresholdAlert=!1),icon:"bx-x"})])])]),_:1})):De("",!0),p(Di,null,{default:v(()=>[p(dt,null,{default:v(()=>[h("div",XN,[h("div",JN,[h("div",ZN,[i[115]||(i[115]=h("span",null,"Broker:",-1)),t.availableBrokersToTrade.length>0?(R(),N("div",{key:0,class:"custom-select broker-select ml-2",onChange:t.handleOnBrokerChange},[mt(h("select",{"onUpdate:modelValue":i[2]||(i[2]=a=>t.selectedUserBrokerId=a)},[(R(!0),N(rt,null,kt(t.availableBrokersToTrade,(a,s)=>(R(),N("option",{class:"text-primary",key:"broker_"+s,selected:a.inUserBrokerId==t.brokerData?.inUserBrokerId,value:a.inUserBrokerId},k(a.stBrokerName)+"(User: "+k(t.formatStUserId(a.stBrokerUserId))+") ",9,$N))),128))],512),[[bi,t.selectedUserBrokerId]])],32)):De("",!0)]),h("div",eF,[p(yr,{location:"top left",transition:!1},{activator:v(({props:a})=>[p(_e,pt({icon:"bx-cog",class:"cursor-pointer",color:"secondary",size:"small"},a),null,16)]),default:v(()=>[p(rr,null,{default:v(()=>[p(It,{class:"cursor-pointer custom-dropdown-hover",onClick:t.openStopBrokerTradingModel},{default:v(()=>[p(Ci,null,{default:v(()=>i[116]||(i[116]=[M(" Disable Trading For The Day ")])),_:1})]),_:1})]),_:1})]),_:1}),!t.brokerData&&!t.selectBrokerLoader?(R(),N("b",tF," Please select broker to trade ")):De("",!0),t.selectBrokerLoader?(R(),at(Ti,{key:1,size:30,width:"3",color:"primary",indeterminate:""})):De("",!0),t.activeChildBrokers?.length?(R(),at(Le,{key:2,class:"text-none ml-2",size:"small",variant:"flat",onClick:t.showDittorderModalFn},{default:v(()=>i[117]||(i[117]=[M(" Show Ditto Orders ")])),_:1})):De("",!0)])]),h("div",iF,[p(t.ClockTime)])])]),_:1})]),_:1}),p(Di,{class:"custom-grid custom-grid-cols-xs-1 custom-grid-cols-sm-3 custom-grid-cols-md-6 custom-grid-cols-lg-8 gap-3","no-gutters":""},{default:v(()=>[p(dt,null,{default:v(()=>[i[118]||(i[118]=h("label",{class:"custom-label"},"Exchange",-1)),h("div",rF,[mt(h("select",{"onUpdate:modelValue":i[3]||(i[3]=a=>t.selectedExchange=a),onChange:t.handleOnExchangeChange},[(R(),N(rt,null,kt(t.availableExchanges,(a,s)=>h("option",{key:"exchange_"+s,value:a.value},k(a.text),9,oF)),64))],544),[[bi,t.selectedExchange]])])]),_:1}),p(dt,null,{default:v(()=>[i[119]||(i[119]=h("label",{class:"custom-label"},"Segment",-1)),h("div",nF,[mt(h("select",{"onUpdate:modelValue":i[4]||(i[4]=a=>t.selectedSegment=a),onChange:i[5]||(i[5]=a=>t.handleOnSegmentChange(null,null,!1))},[(R(!0),N(rt,null,kt(t.availableSegments,(a,s)=>(R(),N("option",{key:"segment_"+s,value:a.value},k(a.text),9,aF))),128))],544),[[bi,t.selectedSegment]])])]),_:1}),p(dt,null,{default:v(()=>[i[120]||(i[120]=h("label",{class:"custom-label"},"Symbol",-1)),h("div",sF,[mt(h("select",{"onUpdate:modelValue":i[6]||(i[6]=a=>t.selectedOptions=a),onChange:t.handleOnOptionsDataChange},[(R(!0),N(rt,null,kt(t.availableOptionsData,(a,s)=>(R(),N("optgroup",{label:s,key:"groupName_"+s},[(R(!0),N(rt,null,kt(a,(l,u)=>(R(),N("option",{key:"symbol_"+u,value:l.value},k(l.text),9,uF))),128))],8,lF))),128))],544),[[bi,t.selectedOptions]])])]),_:1}),p(dt,null,{default:v(()=>[i[121]||(i[121]=h("label",{class:"custom-label"},"Expiry Date",-1)),h("div",cF,[mt(h("select",{"onUpdate:modelValue":i[7]||(i[7]=a=>t.selectedAvailableExpiryDate=a),onChange:t.handleOnExpiryDateChange},[(R(!0),N(rt,null,kt(t.availableExpiryDate,(a,s)=>(R(),N("option",{key:"expiry_"+s,value:a.value},k(a.text),9,dF))),128))],544),[[bi,t.selectedAvailableExpiryDate]])])]),_:1}),p(dt,null,{default:v(()=>[i[122]||(i[122]=h("label",{class:"custom-label"},"Call Strike",-1)),h("div",pF,[mt(h("select",{"onUpdate:modelValue":i[8]||(i[8]=a=>t.selectedCallStrikePrice=a),onChange:t.handleOnCallStrikePriceChange},[(R(!0),N(rt,null,kt(t.availableStrikePrices,(a,s)=>(R(),N("option",{key:"call_strike_"+s,value:a.value},k(a.text),9,fF))),128))],544),[[bi,t.selectedCallStrikePrice]])])]),_:1}),p(dt,null,{default:v(()=>[i[123]||(i[123]=h("label",{class:"custom-label"},"Put Strike",-1)),h("div",hF,[mt(h("select",{"onUpdate:modelValue":i[9]||(i[9]=a=>t.selectedPutStrikePrice=a),onChange:t.handleOnPutStrikePriceChange},[(R(!0),N(rt,null,kt(t.availableStrikePrices,(a,s)=>(R(),N("option",{key:"put_strike_"+s,value:a.value},k(a.text),9,vF))),128))],544),[[bi,t.selectedPutStrikePrice]])])]),_:1}),t.selectedSegment=="EQUITY"?(R(),at(dt,{key:0},{default:v(()=>[i[125]||(i[125]=h("label",{class:"custom-label"},"Qty",-1)),h("div",gF,[p(Jt,{modelValue:t.selectedQty,"onUpdate:modelValue":i[10]||(i[10]=a=>t.selectedQty=a),onChange:t.changeSelectedQty,density:"compact",variant:"solo"},{append:v(()=>[p(yr,{location:"bottom",transition:!1},{activator:v(({props:a})=>[p(Le,pt({class:"text-none",variant:"flat"},a,{style:{padding:"0px"}}),{default:v(()=>[i[124]||(i[124]=M(" Qty ")),p(_e,{icon:"bx-caret-down"})]),_:2},1040)]),default:v(()=>[p(rr,{density:"compact",height:"145px",onClick:t.editLotSize,color:"primary"},{default:v(()=>[(R(),N(rt,null,kt([1,50,100,250,500,1e3],a=>p(It,null,{default:v(()=>[p(Ci,{class:"cursor-pointer custom-dropdown-hover"},{default:v(()=>[M(k(a)+" Qty ",1)]),_:2},1024)]),_:2},1024)),64))]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),_:1})):(R(),at(dt,{key:1},{default:v(()=>[t.typeOfQunatity=="QTY"?(R(),N("div",yF,[h("label",mF,k(`Qty (In Lot: ${(t.selectedQty/t.inLotSize).toFixed(0)})`),1),h("div",CF,[p(Jt,{modelValue:t.selectedQty,"onUpdate:modelValue":i[11]||(i[11]=a=>t.selectedQty=a),onChange:t.changeSelectedQty,density:"compact",variant:"solo"},{append:v(()=>[p(yr,{location:"bottom",transition:!1},{activator:v(({props:a})=>[p(Le,pt({class:"text-none",variant:"flat"},a,{style:{padding:"0px"}}),{default:v(()=>[i[126]||(i[126]=M(" Qty ")),p(_e,{icon:"bx-caret-down"})]),_:2},1040)]),default:v(()=>[p(rr,{density:"compact",height:"145px",onClick:t.editLotSize,color:"primary"},{default:v(()=>[(R(),N(rt,null,kt(t.inMaxAllowedLot,a=>p(It,{class:"cursor-pointer custom-dropdown-hover"},{default:v(()=>[p(Ci,null,{default:v(()=>[M(k(a*t.inLotSize)+" Qty ",1)]),_:2},1024)]),_:2},1024)),64))]),_:1}),h("span",null,[t.selectedSegment=="OPTIONS"?(R(),at(Sn,{key:0})):De("",!0),t.selectedSegment=="OPTIONS"?(R(),at(rr,{key:1},{default:v(()=>[p(It,{title:"Change to Buy as per fund",color:"primary",class:"cursor-pointer custom-dropdown-hover",onClick:t.changeTypeOfQunatity},{prepend:v(()=>[p(_e,{icon:"bx-rupee"})]),_:1})]),_:1})):De("",!0)])]),_:1})]),_:1},8,["modelValue"])])])):t.typeOfQunatity=="FUND"?(R(),N("div",SF,[h("label",wF,k(`Fund (${t.selectedSegment=="OPTIONS"?"CE: "+t.ceLotSize+", PE: "+t.peLotSize:"FUT: "+n.futuresLotSize} lot)`),1),h("div",TF,[p(Jt,{modelValue:t.selectedFund,"onUpdate:modelValue":i[12]||(i[12]=a=>t.selectedFund=a),onChange:t.changeSelectedFund,density:"compact",variant:"solo"},{append:v(()=>[p(yr,{location:"bottom",transition:!1},{activator:v(({props:a})=>[p(Le,pt({class:"text-none",variant:"flat"},a,{style:{padding:"0px"}}),{default:v(()=>[i[127]||(i[127]=M(" Fund ")),p(_e,{icon:"bx-caret-down"})]),_:2},1040)]),default:v(()=>[p(rr,{density:"compact",height:"145px",onClick:t.setFund,color:"primary"},{default:v(()=>[p(It,null,{default:v(()=>[p(Ci,{class:"cursor-pointer custom-dropdown-hover"},{default:v(()=>i[128]||(i[128]=[M("10000")])),_:1})]),_:1}),p(It,null,{default:v(()=>[p(Ci,{class:"cursor-pointer custom-dropdown-hover"},{default:v(()=>i[129]||(i[129]=[M("20000")])),_:1})]),_:1}),p(It,null,{default:v(()=>[p(Ci,{class:"cursor-pointer custom-dropdown-hover"},{default:v(()=>i[130]||(i[130]=[M("30000")])),_:1})]),_:1}),p(It,null,{default:v(()=>[p(Ci,{class:"cursor-pointer custom-dropdown-hover"},{default:v(()=>i[131]||(i[131]=[M("40000")])),_:1})]),_:1}),p(It,null,{default:v(()=>[p(Ci,{class:"cursor-pointer custom-dropdown-hover"},{default:v(()=>i[132]||(i[132]=[M("50000")])),_:1})]),_:1}),p(It,null,{default:v(()=>[p(Ci,{class:"cursor-pointer custom-dropdown-hover"},{default:v(()=>i[133]||(i[133]=[M("60000")])),_:1})]),_:1}),p(It,null,{default:v(()=>[p(Ci,{class:"cursor-pointer custom-dropdown-hover"},{default:v(()=>i[134]||(i[134]=[M("70000")])),_:1})]),_:1}),p(It,null,{default:v(()=>[p(Ci,{class:"cursor-pointer custom-dropdown-hover"},{default:v(()=>i[135]||(i[135]=[M("80000")])),_:1})]),_:1}),p(It,null,{default:v(()=>[p(Ci,{class:"cursor-pointer custom-dropdown-hover"},{default:v(()=>i[136]||(i[136]=[M("90000")])),_:1})]),_:1}),p(It,null,{default:v(()=>[p(Ci,{class:"cursor-pointer custom-dropdown-hover"},{default:v(()=>i[137]||(i[137]=[M("100000")])),_:1})]),_:1})]),_:1}),p(Sn),p(rr,null,{default:v(()=>[p(It,{title:"Change to Quantity",color:"primary",class:"cursor-pointer custom-dropdown-hover",onClick:t.changeTypeOfQunatity},{prepend:v(()=>[p(_e,{icon:"bx-pie-chart"})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])])):De("",!0)]),_:1})),p(dt,null,{default:v(()=>[i[138]||(i[138]=h("label",{class:"custom-label"},"Product Type",-1)),h("div",OF,[mt(h("select",{"onUpdate:modelValue":i[13]||(i[13]=a=>t.selectedProductType=a)},[(R(!0),N(rt,null,kt(t.availableProductType,(a,s)=>(R(),N("option",{key:"product_type_"+s,value:a.value},k(a.text),9,PF))),128))],512),[[bi,t.selectedProductType]])])]),_:1}),p(dt,null,{default:v(()=>[i[139]||(i[139]=h("label",{class:"custom-label"},"Order Type",-1)),h("div",EF,[mt(h("select",{"onUpdate:modelValue":i[14]||(i[14]=a=>t.selectedOrderType=a),onChange:t.handleOnOrderTypeChange},[(R(!0),N(rt,null,kt(t.availableOrderType,(a,s)=>(R(),N("option",{key:"order_type_"+s,value:a.value},k(a.text),9,_F))),128))],544),[[bi,t.selectedOrderType]])])]),_:1}),p(dt,null,{default:v(()=>[i[140]||(i[140]=h("label",{class:"custom-label"},"Market Protection %",-1)),h("div",bF,[mt(h("select",{"onUpdate:modelValue":i[15]||(i[15]=a=>t.selectedMarketProtectionPercentage=a),disabled:t.selectedOrderType!="MARKET_PROTECTION"},[(R(),N(rt,null,kt(16,a=>h("option",{key:"market_protection_"+a,value:a-1},k(a-1)+"% ",9,RF)),64))],8,DF),[[bi,t.selectedMarketProtectionPercentage]])])]),_:1}),p(dt,null,{default:v(()=>[i[142]||(i[142]=h("div",null,[h("label",{class:"custom-label"},"Predefined SL")],-1)),h("div",xF,[h("div",AF,[p(Ep,{modelValue:t.setPredefinedSl,"onUpdate:modelValue":i[16]||(i[16]=a=>t.setPredefinedSl=a)},null,8,["modelValue"])]),h("div",LF,[p(Jt,{modelValue:t.inPredefinedSl,"onUpdate:modelValue":i[17]||(i[17]=a=>t.inPredefinedSl=a),class:"custom-text-field",type:"number",min:"1",step:"1",disabled:!t.setPredefinedSl,variant:"solo"},null,8,["modelValue","disabled"])]),h("div",MF,[h("span",NF,[mt(h("select",{"onUpdate:modelValue":i[18]||(i[18]=a=>t.stTypeOfPredefinedSl=a),disabled:!t.setPredefinedSl},i[141]||(i[141]=[h("option",{value:"ABSOLUTE_POINTS"},"Pts.",-1),h("option",{value:"PERCENTAGE"},"%",-1)]),8,FF),[[bi,t.stTypeOfPredefinedSl]])])])])]),_:1}),p(dt,null,{default:v(()=>[i[144]||(i[144]=h("label",{class:"custom-label"},"Predefined Target",-1)),h("div",IF,[h("div",kF,[p(Ep,{modelValue:t.setPredefinedTarget,"onUpdate:modelValue":i[19]||(i[19]=a=>t.setPredefinedTarget=a)},null,8,["modelValue"])]),h("div",GF,[p(Jt,{modelValue:t.inPredefinedTarget,"onUpdate:modelValue":i[20]||(i[20]=a=>t.inPredefinedTarget=a),class:"custom-text-field",type:"number",min:"1",step:"1",disabled:!t.setPredefinedTarget,variant:"solo"},null,8,["modelValue","disabled"])]),h("div",VF,[h("div",BF,[mt(h("select",{"onUpdate:modelValue":i[21]||(i[21]=a=>t.stTypeOfPredefinedTarget=a),disabled:!t.setPredefinedTarget},i[143]||(i[143]=[h("option",{value:"ABSOLUTE_POINTS"},"Pts.",-1),h("option",{value:"PERCENTAGE"},"%",-1)]),8,HF),[[bi,t.stTypeOfPredefinedTarget]])])])])]),_:1}),p(dt,null,{default:v(()=>[i[145]||(i[145]=h("label",{class:"custom-label"},"Position Type",-1)),h("div",WF,[mt(h("select",{"onUpdate:modelValue":i[22]||(i[22]=a=>t.selectedTypeOfPositions=a),onChange:t.handleOnTypeOfPositionsChange},[(R(!0),N(rt,null,kt(t.availableTypeOfPositions,(a,s)=>(R(),N("option",{key:"position_type_"+s,value:a.value},k(a.text),9,UF))),128))],544),[[bi,t.selectedTypeOfPositions]])]),i[146]||(i[146]=h("div",{style:{"margin-top":"3px","font-size":"11px"}}," Changing type will reset all SL & Target ",-1))]),_:1}),p(dt,null,{default:v(()=>[i[147]||(i[147]=h("label",{class:"custom-label"},"Position View",-1)),h("div",jF,[mt(h("select",{"onUpdate:modelValue":i[23]||(i[23]=a=>t.selectedPositionView=a)},[(R(!0),N(rt,null,kt(t.availablePositionView,(a,s)=>(R(),N("option",{key:"position_view_"+s,value:a.value},k(a.text),9,zF))),128))],512),[[bi,t.selectedPositionView]])])]),_:1}),p(dt,null,{default:v(()=>[i[149]||(i[149]=h("label",{class:"custom-label"},"Action",-1)),h("div",null,[p(Le,{class:"text-none",size:"small",variant:"outlined",onClick:i[24]||(i[24]=a=>t.isDialogVisible=!0)},{default:v(()=>i[148]||(i[148]=[M(" Show Options List ")])),_:1})])]),_:1}),p(dt,{class:"custom-grid-col-span-lg-1 custom-grid-col-span-md-3 custom-grid-col-span-sm-3 custom-grid-col-span-xs-1"},{default:v(()=>[h("div",YF,[p(or,{modelValue:t.isOneClickEnabled,"onUpdate:modelValue":i[25]||(i[25]=a=>t.isOneClickEnabled=a)},{label:v(()=>[h("span",KF,[i[150]||(i[150]=M(" One click:")),h("b",null,k(t.isOneClickEnabled?"Enabled":"Disabled"),1)])]),_:1},8,["modelValue"])])]),_:1})]),_:1}),h("div",QF,[h("div",qF,[t.selectedSegment=="FUTURES"?(R(),N("span",XF,[h("div",null,[p(wc,{class:"symbol-name-group",density:"compact",variant:"outlined"},{default:v(()=>[p(Wr,null,{default:v(()=>[p(Le,{density:"compact",variant:"flat",color:"dark",loading:!t.selectedOptions},{default:v(()=>[M(k(t.selectedOptions),1)]),_:1},8,["loading"])]),_:1}),p(Wr,null,{default:v(()=>[p(Le,{density:"compact",variant:"flat",color:"dark",loading:!t.selectedAvailableExpiryDate},{default:v(()=>[M(k(t.selectedAvailableExpiryDate),1)]),_:1},8,["loading"])]),_:1}),p(Wr,null,{default:v(()=>[p(Le,{class:"symbol-name-option-type",density:"compact",variant:"flat",color:"dark"},{default:v(()=>i[151]||(i[151]=[M("FUT")])),_:1})]),_:1})]),_:1})]),t.strikePriceData[t.stFuturesSymbol]!=null?(R(),N("div",JF,[t.showLtpRangeBar?(R(),N("div",ZF,[p(t.SparklineChart,{typeOfLtpRangeBar:t.typeOfLtpRangeBar,chartData:t.strikePriceData[t.stFuturesSymbol].inPrevDayClose?t.futuresSparklineData:[],inPrevDayClose:t.strikePriceData[t.stFuturesSymbol]?.inPrevDayClose,inLtp:t.strikePriceData[t.stFuturesSymbol].inLtp,inDayOpen:t.strikePriceData[t.stFuturesSymbol].inDayOpen,inDayHigh:t.strikePriceData[t.stFuturesSymbol].inDayHigh,inDayLow:t.strikePriceData[t.stFuturesSymbol].inDayLow},null,8,["typeOfLtpRangeBar","chartData","inPrevDayClose","inLtp","inDayOpen","inDayHigh","inDayLow"])])):De("",!0),h("div",$F,[i[152]||(i[152]=M(" LTP: ")),h("b",null,k(t.strikePriceData[t.stFuturesSymbol].inLtp?t.strikePriceData[t.stFuturesSymbol].inLtp.toFixed(2):""),1),i[153]||(i[153]=M("  ")),h("span",{class:Et(t.strikePriceData[t.stFuturesSymbol].inLtp>t.strikePriceData[t.stFuturesSymbol].inPrevDayClose?"text-success":"text-error"),style:{"font-size":"13px","vertical-align":"middle"}},[h("b",null,"("+k(t.strikePriceData[t.stFuturesSymbol].inLtpDiff)+" / "+k(t.strikePriceData[t.stFuturesSymbol].inLtpDiffInPercentage)+"%)",1)],2)])])):(R(),N("div",eI,i[154]||(i[154]=[M(" LTP: "),h("b",null,"Loading...",-1)])))])):t.selectedSegment=="OPTIONS"?(R(),N("span",tI,[h("div",null,[p(wc,{class:"symbol-name-group",density:"compact",variant:"outlined"},{default:v(()=>[p(Wr,null,{default:v(()=>[p(Le,{density:"compact",variant:"flat",color:"dark",loading:!t.selectedOptions},{default:v(()=>[M(k(t.selectedOptions),1)]),_:1},8,["loading"])]),_:1}),p(Wr,null,{default:v(()=>[p(Le,{density:"compact",variant:"flat",color:"dark",loading:!t.selectedAvailableExpiryDate},{default:v(()=>[M(k(t.selectedAvailableExpiryDate),1)]),_:1},8,["loading"])]),_:1}),p(Wr,null,{default:v(()=>[mt(h("span",null,[p(Le,{density:"compact",variant:"flat",color:"dark",loading:!t.selectedCallStrikePrice},{default:v(()=>[M(k(t.selectedCallStrikePrice),1)]),_:1},8,["loading"])],512),[[hi,!t.selectedCallStrikePrice]]),mt(h("span",null,[mt(h("select",{class:"symbol-name-strike-selection","onUpdate:modelValue":i[26]||(i[26]=a=>t.selectedCallStrikePrice=a),onChange:t.handleOnCallStrikePriceChange},[(R(!0),N(rt,null,kt(t.availableStrikePrices,(a,s)=>(R(),N("option",{key:"call_strike_sk_"+s,value:a.value},k(a.text),9,iI))),128))],544),[[bi,t.selectedCallStrikePrice]])],512),[[hi,!!t.selectedCallStrikePrice]])]),_:1}),p(Wr,null,{default:v(()=>[p(Le,{class:"symbol-name-option-type",density:"compact",variant:"flat",color:"dark"},{default:v(()=>i[155]||(i[155]=[M("CE")])),_:1})]),_:1})]),_:1})]),t.strikePriceData[t.stCallStrikePrice]!=null?(R(),N("div",rI,[t.showLtpRangeBar?(R(),N("div",oI,[p(t.SparklineChart,{typeOfLtpRangeBar:t.typeOfLtpRangeBar,chartData:t.strikePriceData[t.stCallStrikePrice].inPrevDayClose?t.callSparklineData:[],inLtp:t.strikePriceData[t.stCallStrikePrice].inLtp,inPrevDayClose:t.strikePriceData[t.stCallStrikePrice]?.inPrevDayClose,inDayOpen:t.strikePriceData[t.stCallStrikePrice].inDayOpen,inDayHigh:t.strikePriceData[t.stCallStrikePrice].inDayHigh,inDayLow:t.strikePriceData[t.stCallStrikePrice].inDayLow},null,8,["typeOfLtpRangeBar","chartData","inLtp","inPrevDayClose","inDayOpen","inDayHigh","inDayLow"])])):De("",!0),h("div",nI,[i[156]||(i[156]=M(" LTP: ")),h("b",null,k(t.strikePriceData[t.stCallStrikePrice].inLtp?t.strikePriceData[t.stCallStrikePrice].inLtp.toFixed(2):""),1),i[157]||(i[157]=M("  ")),h("span",{class:Et(t.strikePriceData[t.stCallStrikePrice].inLtp>t.strikePriceData[t.stCallStrikePrice].inPrevDayClose?"text-success":"text-error"),style:{"font-size":"13px","vertical-align":"middle"}},[h("b",null,"("+k(t.strikePriceData[t.stCallStrikePrice].inLtpDiff)+" / "+k(t.strikePriceData[t.stCallStrikePrice].inLtpDiffInPercentage)+"%)",1)],2)])])):(R(),N("div",aI,i[158]||(i[158]=[M(" LTP: "),h("b",null,"Loading...",-1)])))])):t.selectedSegment=="EQUITY"?(R(),N("span",sI,[t.underLyingAssetData!=null?(R(),N("span",lI,[h("div",null,k(t.underLyingAssetData.stUnderLyingAsset),1),t.showLtpRangeBar?(R(),N("div",uI,[p(t.SparklineChart,{typeOfLtpRangeBar:t.typeOfLtpRangeBar,chartData:t.underLyingAssetData?.inPrevDayClose?t.underlyingSparklineData:[],inLtp:t.underLyingAssetData.inLtp,inPrevDayClose:t.underLyingAssetData?.inPrevDayClose,inDayOpen:t.underLyingAssetData.inDayOpen,inDayHigh:t.underLyingAssetData.inDayHigh,inDayLow:t.underLyingAssetData.inDayLow},null,8,["typeOfLtpRangeBar","chartData","inLtp","inPrevDayClose","inDayOpen","inDayHigh","inDayLow"])])):De("",!0),h("div",null,[i[159]||(i[159]=M(" LTP: ")),h("b",null,k(t.underLyingAssetData.inLtp),1),i[160]||(i[160]=M("  ")),h("span",{class:Et(t.underLyingAssetData.inLtp>t.underLyingAssetData.inPrevDayClose?"text-success":"text-error")},[h("b",null,"("+k(t.underLyingAssetData.inLtpDiff)+"/"+k(t.underLyingAssetData.inLtpDiffInPercentage)+"%)",1)],2)])])):(R(),N("div",cI,i[161]||(i[161]=[M(" LTP: "),h("b",null,"Loading...",-1)])))])):De("",!0),h("div",dI,[h("div",pI,[p(Le,{class:"text-none rounded-e-0 custom-flex-xs-80 custom-flex-sm-76 custom-flex-md-80 custom-flex-lg-65",color:"error","prepend-icon":"mdi-arrow-left",onClick:i[27]||(i[27]=a=>t.preparePlaceOrderObject("SELL","CALL","BUY_SELL_BUTTON")),disabled:t.typeOfQunatity=="FUND"},{default:v(()=>[M(" Sell "+k(t.selectedSegment=="OPTIONS"?"Call":t.selectedSegment=="EQUITY"?"Stock":""),1)]),_:1},8,["disabled"]),h("div",fI,[p(yr,{location:"bottom right",transition:!1},{activator:v(({props:a})=>[p(Le,pt({color:"none"},a,{class:"rounded-s-0 custom-flex-xs-100 custom-flex-sm-100 custom-flex-md-100 buy-sell-menu-button"}),{default:v(()=>[p(_e,{icon:"mdi-menu-down"})]),_:2},1040)]),default:v(()=>[p(rr,null,{default:v(()=>[p(It,{class:"cursor-pointer custom-dropdown-hover",onClick:i[28]||(i[28]=a=>t.openLimitOrderModal("SELL","CALL"))},{default:v(()=>[p(Ci,null,{default:v(()=>i[162]||(i[162]=[M(" Place limit order ")])),_:1})]),_:1}),p(It,{class:"cursor-pointer custom-dropdown-hover",onClick:i[29]||(i[29]=a=>t.addOrderObjectToBasketOrder("SELL","CALL"))},{default:v(()=>[p(Ci,null,{default:v(()=>i[163]||(i[163]=[M(" Add to basket ")])),_:1})]),_:1})]),_:1})]),_:1})])]),h("div",hI,[p(Le,{color:"success","prepend-icon":"mdi-arrow-up",class:"text-none rounded-e-0 custom-flex-xs-80 custom-flex-sm-76 custom-flex-md-80 custom-flex-lg-65",onClick:i[30]||(i[30]=a=>t.preparePlaceOrderObject("BUY","CALL","BUY_SELL_BUTTON"))},{default:v(()=>[M(" Buy "+k(t.selectedSegment=="OPTIONS"?"Call":t.selectedSegment=="EQUITY"?"Stock":""),1)]),_:1}),h("div",vI,[p(yr,{location:"bottom right",transition:!1},{activator:v(({props:a})=>[p(Le,pt({color:"none"},a,{class:"rounded-s-0 custom-flex-xs-100 custom-flex-sm-100 custom-flex-md-100 buy-sell-menu-button"}),{default:v(()=>[p(_e,{icon:"mdi-menu-down"})]),_:2},1040)]),default:v(()=>[p(rr,null,{default:v(()=>[p(It,{class:"cursor-pointer custom-dropdown-hover",onClick:i[31]||(i[31]=a=>t.openLimitOrderModal("BUY","CALL"))},{default:v(()=>[p(Ci,null,{default:v(()=>i[164]||(i[164]=[M(" Place limit order ")])),_:1})]),_:1}),p(It,{class:"cursor-pointer custom-dropdown-hover",onClick:i[32]||(i[32]=a=>t.addOrderObjectToBasketOrder("BUY","CALL"))},{default:v(()=>[p(Ci,null,{default:v(()=>i[165]||(i[165]=[M(" Add to basket ")])),_:1})]),_:1})]),_:1})]),_:1})])])])]),h("div",gI,[h("div",yI,[t.underLyingAssetData!=null?(R(),N("span",mI,[h("div",null,k(t.underLyingAssetData.stUnderLyingAsset),1),t.showLtpRangeBar?(R(),N("div",CI,[p(t.SparklineChart,{typeOfLtpRangeBar:t.typeOfLtpRangeBar,chartData:t.underLyingAssetData?.inPrevDayClose?t.underlyingSparklineData:[],inLtp:t.underLyingAssetData.inLtp,inPrevDayClose:t.underLyingAssetData?.inPrevDayClose,inDayOpen:t.underLyingAssetData.inDayOpen,inDayHigh:t.underLyingAssetData.inDayHigh,inDayLow:t.underLyingAssetData.inDayLow},null,8,["typeOfLtpRangeBar","chartData","inLtp","inPrevDayClose","inDayOpen","inDayHigh","inDayLow"])])):De("",!0),h("div",null,[i[166]||(i[166]=M(" LTP: ")),h("b",null,k(t.underLyingAssetData.inLtp),1),i[167]||(i[167]=M("  ")),h("span",{class:Et(t.underLyingAssetData.inLtp>t.underLyingAssetData.inPrevDayClose?"text-success":"text-error")},[h("b",null,"("+k(t.underLyingAssetData.inLtpDiff)+"/"+k(t.underLyingAssetData.inLtpDiffInPercentage)+"%)",1)],2)])])):De("",!0),h("div",SI,[h("div",wI,[p(Le,{color:"primary",variant:"outlined",class:"text-none custom-flex-xs-100 custom-flex-sm-100 custom-flex-md-100",onClick:i[33]||(i[33]=a=>t.cancelAllPositions("CLOSE_ALL_POSITIONS_BUTTON")),disabled:t.cancelAllPositionButtonLoading},As({default:v(()=>[M(k(t.selectedPositionsData.length?"Close Selected Positions / F6":"Close All Positions / F6")+" ",1)]),_:2},[t.cancelAllPositionButtonLoading?{name:"append",fn:v(()=>[p(Ti,{size:24,color:"error",indeterminate:""})]),key:"0"}:void 0]),1032,["disabled"])]),h("div",TI,[p(Le,{color:"primary",variant:"outlined",class:"text-none custom-flex-xs-100 custom-flex-sm-100 custom-flex-md-100",onClick:i[34]||(i[34]=a=>t.cancelAllOrder("CANCEL_ALL_ORDERS_BUTTON")),disabled:t.cancelAllOrderButtonLoading},As({default:v(()=>[i[168]||(i[168]=M(" Cancel All Orders / F7 "))]),_:2},[t.cancelAllOrderButtonLoading?{name:"append",fn:v(()=>[p(Ti,{size:24,color:"error",indeterminate:""})]),key:"0"}:void 0]),1032,["disabled"])]),p(Le,{color:"primary",variant:"outlined",class:"custom-refresh-button",onClick:t.getActiveTabData},{default:v(()=>[p(Dt,{activator:"parent",location:"top"},{default:v(()=>i[169]||(i[169]=[M(" Refresh Tab / F8 ")])),_:1}),p(_e,{icon:"bx-refresh",size:"large"})]),_:1})]),h("div",OI,[h("b",null,"Message: "+k(t.oneCLickwindowMessage),1)])])]),h("div",PI,[t.selectedSegment!="EQUITY"?(R(),N("div",EI,[t.disableOptionsSegmentPart?De("",!0):(R(),N("div",_I,[h("div",null,[p(wc,{class:"symbol-name-group",density:"compact",variant:"outlined"},{default:v(()=>[p(Wr,null,{default:v(()=>[p(Le,{density:"compact",variant:"flat",color:"dark",loading:!t.selectedOptions},{default:v(()=>[M(k(t.selectedOptions),1)]),_:1},8,["loading"])]),_:1}),p(Wr,null,{default:v(()=>[p(Le,{density:"compact",variant:"flat",color:"dark",loading:!t.selectedAvailableExpiryDate},{default:v(()=>[M(k(t.selectedAvailableExpiryDate),1)]),_:1},8,["loading"])]),_:1}),p(Wr,null,{default:v(()=>[mt(h("span",null,[p(Le,{density:"compact",variant:"flat",color:"dark",loading:!t.selectedPutStrikePrice},{default:v(()=>[M(k(t.selectedPutStrikePrice),1)]),_:1},8,["loading"])],512),[[hi,!t.selectedPutStrikePrice]]),mt(h("span",null,[mt(h("select",{class:"symbol-name-strike-selection","onUpdate:modelValue":i[35]||(i[35]=a=>t.selectedPutStrikePrice=a),onChange:t.handleOnPutStrikePriceChange},[(R(!0),N(rt,null,kt(t.availableStrikePrices,(a,s)=>(R(),N("option",{key:"call_strike_sk_"+s,value:a.value},k(a.text),9,bI))),128))],544),[[bi,t.selectedPutStrikePrice]])],512),[[hi,!!t.selectedPutStrikePrice]])]),_:1}),p(Wr,null,{default:v(()=>[p(Le,{class:"symbol-name-option-type",density:"compact",variant:"flat",color:"dark"},{default:v(()=>i[170]||(i[170]=[M("PE")])),_:1})]),_:1})]),_:1})]),t.strikePriceData[t.stPutStrikePrice]!=null?(R(),N("div",DI,[t.showLtpRangeBar?(R(),N("div",RI,[p(t.SparklineChart,{typeOfLtpRangeBar:t.typeOfLtpRangeBar,chartData:t.strikePriceData[t.stPutStrikePrice].inPrevDayClose?t.putSparklineData:[],inLtp:t.strikePriceData[t.stPutStrikePrice].inLtp,inPrevDayClose:t.strikePriceData[t.stPutStrikePrice]?.inPrevDayClose,inDayOpen:t.strikePriceData[t.stPutStrikePrice].inDayOpen,inDayHigh:t.strikePriceData[t.stPutStrikePrice].inDayHigh,inDayLow:t.strikePriceData[t.stPutStrikePrice].inDayLow},null,8,["typeOfLtpRangeBar","chartData","inLtp","inPrevDayClose","inDayOpen","inDayHigh","inDayLow"])])):De("",!0),h("div",xI,[h("span",{class:Et(t.strikePriceData[t.stPutStrikePrice].inLtp>t.strikePriceData[t.stPutStrikePrice].inPrevDayClose?"text-success":"text-error"),style:{"font-size":"13px","vertical-align":"middle"}},[h("b",null,"("+k(t.strikePriceData[t.stPutStrikePrice].inLtpDiff)+" / "+k(t.strikePriceData[t.stPutStrikePrice].inLtpDiffInPercentage)+"%)",1)],2),i[171]||(i[171]=M("  ")),h("b",null,k(t.strikePriceData[t.stPutStrikePrice].inLtp?t.strikePriceData[t.stPutStrikePrice].inLtp.toFixed(2):""),1),i[172]||(i[172]=M(" :LTP "))])])):(R(),N("div",AI,i[173]||(i[173]=[h("b",null,"Loading...",-1),M(" :LTP ")]))),h("div",LI,[h("div",MI,[p(Le,{color:"success","prepend-icon":"mdi-arrow-down",class:"text-none rounded-e-0 custom-flex-xs-80 custom-flex-sm-76 custom-flex-md-80 custom-flex-lg-65",onClick:i[36]||(i[36]=a=>t.preparePlaceOrderObject("BUY","PUT","BUY_SELL_BUTTON"))},{default:v(()=>i[174]||(i[174]=[M(" Buy Put ")])),_:1}),h("div",NI,[p(yr,{location:"bottom right",transition:!1},{activator:v(({props:a})=>[p(Le,pt({color:"none"},a,{class:"rounded-s-0 custom-flex-xs-100 custom-flex-sm-100 custom-flex-md-100 buy-sell-menu-button"}),{default:v(()=>[p(_e,{icon:"mdi-menu-down"})]),_:2},1040)]),default:v(()=>[p(rr,null,{default:v(()=>[p(It,{class:"cursor-pointer custom-dropdown-hover",onClick:i[37]||(i[37]=a=>t.openLimitOrderModal("BUY","PUT"))},{default:v(()=>[p(Ci,null,{default:v(()=>i[175]||(i[175]=[M(" Place limit order ")])),_:1})]),_:1}),p(It,{class:"cursor-pointer custom-dropdown-hover",onClick:i[38]||(i[38]=a=>t.addOrderObjectToBasketOrder("BUY","PUT"))},{default:v(()=>[p(Ci,null,{default:v(()=>i[176]||(i[176]=[M(" Add to basket ")])),_:1})]),_:1})]),_:1})]),_:1})])]),h("div",FI,[p(Le,{color:"error","prepend-icon":"mdi-arrow-right",class:"text-none rounded-e-0 custom-flex-xs-80 custom-flex-sm-76 custom-flex-md-80 custom-flex-lg-65",onClick:i[39]||(i[39]=a=>t.preparePlaceOrderObject("SELL","PUT","BUY_SELL_BUTTON")),disabled:t.typeOfQunatity=="FUND"},{default:v(()=>i[177]||(i[177]=[M(" Sell Put ")])),_:1},8,["disabled"]),h("div",II,[p(yr,{location:"bottom right",transition:!1},{activator:v(({props:a})=>[p(Le,pt({color:"none"},a,{class:"rounded-s-0 custom-flex-xs-100 custom-flex-sm-100 custom-flex-md-100 buy-sell-menu-button"}),{default:v(()=>[p(_e,{icon:"mdi-menu-down"})]),_:2},1040)]),default:v(()=>[p(rr,null,{default:v(()=>[p(It,{class:"cursor-pointer custom-dropdown-hover",onClick:i[40]||(i[40]=a=>t.openLimitOrderModal("SELL","PUT"))},{default:v(()=>[p(Ci,null,{default:v(()=>i[178]||(i[178]=[M(" Place limit order ")])),_:1})]),_:1}),p(It,{class:"cursor-pointer custom-dropdown-hover",onClick:i[41]||(i[41]=a=>t.addOrderObjectToBasketOrder("SELL","PUT"))},{default:v(()=>[p(Ci,null,{default:v(()=>i[179]||(i[179]=[M(" Add to basket ")])),_:1})]),_:1})]),_:1})]),_:1})])])])]))])):De("",!0)])]),h("div",kI,[p(Qy,{modelValue:t.activeTab,"onUpdate:modelValue":i[42]||(i[42]=a=>t.activeTab=a),"align-tabs":"left",density:"compact","hide-slider":"",mandatory:"","show-arrows":!0},{default:v(()=>[p(dn,{value:"positions",onClick:t.getActiveTabData,"min-width":"140px",size:"small",class:"text-none custom-tab-button"},{default:v(()=>[i[180]||(i[180]=M(" Positions ")),t.loading&&t.activeTab=="positions"?(R(),at(Ti,{key:0,class:"ml-2 custom-tab-loader",width:2,size:15,indeterminate:""})):De("",!0)]),_:1}),p(dn,{value:"orderBook",onClick:t.getActiveTabData,"min-width":"140px",size:"small",class:"text-none custom-tab-button"},{default:v(()=>[i[181]||(i[181]=M(" Order book ")),t.loading&&t.activeTab=="orderBook"?(R(),at(Ti,{key:0,class:"ml-2 custom-tab-loader",width:2,size:15,indeterminate:""})):De("",!0)]),_:1}),p(dn,{value:"tradeBook",onClick:t.getActiveTabData,"min-width":"140px",size:"small",class:"text-none custom-tab-button"},{default:v(()=>[i[182]||(i[182]=M(" Trade Book ")),t.loading&&t.activeTab=="tradeBook"?(R(),at(Ti,{key:0,class:"ml-2 custom-tab-loader",width:2,size:15,indeterminate:""})):De("",!0)]),_:1}),p(dn,{value:"holdings",onClick:t.getActiveTabData,"min-width":"140px",size:"small",class:"text-none custom-tab-button"},{default:v(()=>[i[183]||(i[183]=M(" Holdings ")),t.loading&&t.activeTab=="holdings"?(R(),at(Ti,{key:0,class:"ml-2 custom-tab-loader",width:2,size:15,indeterminate:""})):De("",!0)]),_:1}),p(dn,{value:"funds",onClick:t.getActiveTabData,"min-width":"140px",size:"small",class:"text-none custom-tab-button"},{default:v(()=>[i[184]||(i[184]=M(" Funds ")),t.loading&&t.activeTab=="funds"?(R(),at(Ti,{key:0,class:"ml-2 custom-tab-loader",width:2,size:15,indeterminate:""})):De("",!0)]),_:1}),p(dn,{value:"basketOrder",onClick:t.getActiveTabData,"min-width":"140px",size:"small",class:"text-none custom-tab-button"},{default:v(()=>[M(" Basket order "+k(t.arBasketOrders.length?`(${t.arBasketOrders.length})`:""),1)]),_:1}),p(dn,{value:"refreshData",onClick:t.getActiveTabData,"min-width":"140px",size:"small",class:"text-none custom-tab-button"},{default:v(()=>i[185]||(i[185]=[M(" Refresh Data ")])),_:1})]),_:1},8,["modelValue"])]),h("div",null,[mt(h("div",null,[p(t.Positions,{socket:t.socket,isDittoEnabled:!!t.activeChildBrokers?.length,positionsData:t.positionsData,getActiveTabData:t.getActiveTabDataAfterOrderPlacement,showMessageOnOnlickWindow:t.showMessageOnOnlickWindow,setSelectedPositions:t.setSelectedPositions,selectedPositionsData:t.selectedPositionsData,disableOneClickShortcutsFn:t.disableOneClickShortcutsFn,setPredefinedTarget:t.setPredefinedTarget,inPredefinedTarget:t.inPredefinedTarget,stTypeOfPredefinedTarget:t.stTypeOfPredefinedTarget,setPredefinedSl:t.setPredefinedSl,inPredefinedSl:t.inPredefinedSl,isTrailingStoplossSet:t.isTrailingStoplossSet,inTrailingStoplossStep:t.inTrailingStoplossStep,stTypeOfPredefinedSl:t.stTypeOfPredefinedSl,setBuySellSymbol:t.setBuySellSymbol,selectedClosePositionOrderType:t.selectedClosePositionOrderType,cancelAllPositionButtonLoading:t.cancelAllPositionButtonLoading,cancelAllPositions:t.cancelAllPositions,setCloseAllPositionButtonLoading:t.setCloseAllPositionButtonLoading,brokerData:t.brokerData,removeMtmLevelSlFlag:t.removeMtmLevelSlFlag,selectedTypeOfPositions:t.selectedTypeOfPositions,stTradingWindowId:t.stTradingWindowId,openLimitOrderModalForPosition:t.openLimitOrderModalForPosition,openChangeStrikeModal:t.openChangeStrikeModal,convertOptionsTypeWithSameLegDistance:t.convertOptionsTypeWithSameLegDistance,cancelAllOrder:t.cancelAllOrder,checkCurrentPosition:t.checkCurrentPosition,selectedPositionView:t.selectedPositionView,isMtmThresholdAvailable:t.isMtmThresholdAvailable,inMtmThreshold:t.inMtmThreshold,inMtmThresholdPercentage:t.inMtmThresholdPercentage,showMtmThresholdAlert:t.showMtmThresholdAlert,setMtmThresholdAlert:t.setMtmThresholdAlert,isMtmThresholdShowed:t.isMtmThresholdShowed,allAssetWiseSlAndTarget:t.allAssetWiseSlAndTarget},null,8,["socket","isDittoEnabled","positionsData","selectedPositionsData","setPredefinedTarget","inPredefinedTarget","stTypeOfPredefinedTarget","setPredefinedSl","inPredefinedSl","isTrailingStoplossSet","inTrailingStoplossStep","stTypeOfPredefinedSl","selectedClosePositionOrderType","cancelAllPositionButtonLoading","brokerData","removeMtmLevelSlFlag","selectedTypeOfPositions","checkCurrentPosition","selectedPositionView","isMtmThresholdAvailable","inMtmThreshold","inMtmThresholdPercentage","showMtmThresholdAlert","isMtmThresholdShowed","allAssetWiseSlAndTarget"])],512),[[hi,t.activeTab=="positions"]]),mt(h("div",null,[p(t.TradeBook,{tradeBookData:t.tradeBookData,getActiveTabData:t.getActiveTabData,showMessageOnOnlickWindow:t.showMessageOnOnlickWindow},null,8,["tradeBookData"])],512),[[hi,t.activeTab=="tradeBook"]]),mt(h("div",null,[p(t.Holdings,{holdingsData:t.holdingsData,socket:t.socket,activeTab:t.activeTab},null,8,["holdingsData","socket","activeTab"])],512),[[hi,t.activeTab=="holdings"]]),mt(h("div",null,[p(t.OrderBook,{orderBookData:t.orderBookData,getActiveTabData:t.getActiveTabDataAfterOrderPlacement,showMessageOnOnlickWindow:t.showMessageOnOnlickWindow,cancelAllOrderButtonLoading:t.cancelAllOrderButtonLoading,setCancelAllOrderButtonLoading:t.setCancelAllOrderButtonLoading,brokerData:t.brokerData,stTradingWindowId:t.stTradingWindowId},null,8,["orderBookData","cancelAllOrderButtonLoading","brokerData"])],512),[[hi,t.activeTab=="orderBook"]]),mt(h("div",null,[p(t.BasketOrder,{BasketOrderData:t.arBasketOrders,modifyBasketOrderQty:t.modifyBasketOrderQty,modifyBasketOrderQtyField:t.modifyBasketOrderQtyField,addBasketOrderFromSavedBasket:t.addBasketOrderFromSavedBasket,modifyBasketOrderBuySellType:t.modifyBasketOrderBuySellType,removeOrderFromBasket:t.removeOrderFromBasket,getActiveTabData:t.getActiveTabData,showMessageOnOnlickWindow:t.showMessageOnOnlickWindow,clearAllBasketOrders:t.clearAllBasketOrders,placeAllBasketOrders:t.placeAllBasketOrders,modifyBasketOrderMarketProtectionPercentage:t.modifyBasketOrderMarketProtectionPercentage,socket:t.socket,addStrategyToBasketOrder:t.addStrategyToBasketOrder,selectedOptions:t.selectedOptions,spotPrice:t.underLyingAssetData?.inLtp,modifyBasketOrderOptionType:t.modifyBasketOrderOptionType,modifyBasketOrderProductTypeField:t.modifyBasketOrderProductTypeField,modifyBasketOrderExpiryDate:t.modifyBasketOrderExpiryDate,modifyBasketOrderStrikePrice:t.modifyBasketOrderStrikePrice,modifyBasketOrderLtpField:t.modifyBasketOrderLtpField,modifyBasketOrderType:t.modifyBasketOrderType,modifyBasketOrderTypeMarketProtectionPercentage:t.modifyBasketOrderTypeMarketProtectionPercentage,availableExpiryDate:t.availableExpiryDate,brokerData:t.brokerData,availableOrderType:t.availableOrderType,modifySelectedBasketOrder:t.modifySelectedBasketOrder,activeTab:t.activeTab},null,8,["BasketOrderData","socket","selectedOptions","spotPrice","availableExpiryDate","brokerData","availableOrderType","activeTab"])],512),[[hi,t.activeTab=="basketOrder"]]),mt(h("div",null,[p(t.Funds,{fundData:t.fundData,getActiveTabData:t.getActiveTabData,showMessageOnOnlickWindow:t.showMessageOnOnlickWindow},null,8,["fundData"])],512),[[hi,t.activeTab=="funds"]])]),t.brokerData?.isAssistantEnabled?(R(),N("div",GI,[t.activeChildBrokers?.length?(R(),N("h3",VI,"Ditto Brokers List")):(R(),N("h3",BI,"No Active Ditto Found")),mt(h("div",null,[(R(!0),N(rt,null,kt(t.activeChildBrokers,(a,s)=>(R(),N("div",{class:"my-3 border-sm",key:"Child_"+s},[p(t.ChildPositions,{socket:t.socket,socketEventUpdate:t.socketEventUpdate,showMessageOnOnlickWindow:t.showMessageOnOnlickWindow,disableOneClickShortcutsFn:t.disableOneClickShortcutsFn,setBuySellSymbol:t.setBuySellSymbol,selectedClosePositionOrderType:t.selectedClosePositionOrderType,cancelAllPositionButtonLoading:t.cancelAllPositionButtonLoading,cancelAllPositions:t.cancelAllPositions,setCloseAllPositionButtonLoading:t.setCloseAllPositionButtonLoading,brokerData:a,stTradingWindowId:t.stTradingWindowId,brokerApiDelay:t.brokerApiDelay,activeTab:t.activeTab,positionFlagTrigger:t.positionFlagTrigger},null,8,["socket","socketEventUpdate","selectedClosePositionOrderType","cancelAllPositionButtonLoading","brokerData","activeTab","positionFlagTrigger"])]))),128))],512),[[hi,t.activeTab=="positions"]]),mt(h("div",null,[(R(!0),N(rt,null,kt(t.activeChildBrokers,(a,s)=>(R(),N("div",{class:"my-3 border-sm",key:"Child_"+s},[p(t.ChildOrderBook,{showMessageOnOnlickWindow:t.showMessageOnOnlickWindow,cancelAllOrderButtonLoading:t.cancelAllOrderButtonLoading,setCancelAllOrderButtonLoading:t.setCancelAllOrderButtonLoading,brokerData:a,stTradingWindowId:t.stTradingWindowId,socketEventUpdate:t.socketEventUpdate,brokerApiDelay:t.brokerOrderBookApiDelay,activeTab:t.activeTab},null,8,["cancelAllOrderButtonLoading","brokerData","socketEventUpdate","activeTab"])]))),128))],512),[[hi,t.activeTab=="orderBook"]]),mt(h("div",null,[(R(!0),N(rt,null,kt(t.activeChildBrokers,(a,s)=>(R(),N("div",{class:"my-3 border-sm",key:"Child_"+s},[p(t.ChildTradeBook,{brokerData:a,socketEventUpdate:t.socketEventUpdate,brokerApiDelay:t.brokerOrderBookApiDelay,activeTab:t.activeTab},null,8,["brokerData","socketEventUpdate","activeTab"])]))),128))],512),[[hi,t.activeTab=="tradeBook"]]),mt(h("div",null,[(R(!0),N(rt,null,kt(t.activeChildBrokers,(a,s)=>(R(),N("div",{class:"my-3 border-sm",key:"Child_"+s},[p(t.ChildFunds,{brokerData:a,socketEventUpdate:t.socketEventUpdate,brokerApiDelay:t.brokerOrderBookApiDelay,activeTab:t.activeTab},null,8,["brokerData","socketEventUpdate","activeTab"])]))),128))],512),[[hi,t.activeTab=="funds"]])])):De("",!0),p(Di,{class:"mt-3",align:"start","no-gutters":"",style:{"font-size":"14px"}},{default:v(()=>[p(dt,{cols:"12"},{default:v(()=>i[186]||(i[186]=[M(" Notes & Disclaimer: ")])),_:1}),(R(!0),N(rt,null,kt(t.arNotes,(a,s)=>(R(),at(dt,{cols:"12",key:"Note_"+s},{default:v(()=>[M(k(s+1)+". "+k(a),1)]),_:2},1024))),128))]),_:1}),p(Ai,{modelValue:t.limitOrderModel,"onUpdate:modelValue":i[70]||(i[70]=a=>t.limitOrderModel=a),width:"540",persistent:"",transition:"none"},{default:v(()=>[p(t.DraggableResizableVue,{className:"",resizable:!1,"drag-handle":".handle"},{default:v(()=>[p(ui,{loading:t.isPlacingOrderLoading},{loader:v(({isActive:a})=>[p(mu,{active:a,height:"4",indeterminate:""},null,8,["active"])]),default:v(()=>[h("div",{class:Et(`${t.limitOrderDetails.stBuySellType=="BUY"?"bg-success":"bg-error"} px-2 py-2 d-flex justify-space-between gap-4 handle`)},[h("h4",HI,k(t.limitOrderDetails.stBuySellType)+": "+k(t.limitOrderDetails.stFullSymbolName),1),p(_e,{class:"mt-1",icon:"bx-x-circle",onClick:i[43]||(i[43]=a=>t.hideLimitOrderModalFn(!0))})],2),p(Ft,null,{default:v(()=>[p(Di,null,{default:v(()=>[p(dt,null,{default:v(()=>[t.oneCLickwindowMessage!="-"?(R(),N("div",WI,k(t.oneCLickwindowMessage),1)):De("",!0),h("div",UI,[t.limitOrderDetails&&t.limitOrderDetails.stSymbolForLiveLtp!=null?(R(),N("div",jI,[p(Hi,null,{default:v(()=>i[187]||(i[187]=[M("LTP")])),_:1}),i[188]||(i[188]=M(": ")),t.limitOrderDetails.stSubSegment=="EQUITY"?(R(),N("span",zI,[h("b",null,k(t.underLyingAssetData.inLtp),1)])):(R(),N("span",YI,[h("b",null,k(t.strikePriceData[t.limitOrderDetails.stSymbolForLiveLtp]?.inLtp),1)]))])):De("",!0),h("div",KI,[p(ei,{variant:t.limitOrderDetails.stProductType=="MARGIN"?"flat":"outlined",onClick:i[44]||(i[44]=a=>t.limitOrderDetails.stProductType="MARGIN"),density:"compact",color:t.limitOrderDetails.stBuySellType=="BUY"?"success":"error",ripple:!1,class:"mx-2"},{default:v(()=>i[189]||(i[189]=[M(" Margin ")])),_:1},8,["variant","color"]),p(ei,{variant:t.limitOrderDetails.stProductType=="INTRADAY"?"flat":"outlined",onClick:i[45]||(i[45]=a=>t.limitOrderDetails.stProductType="INTRADAY"),density:"compact",color:t.limitOrderDetails.stBuySellType=="BUY"?"success":"error",ripple:!1},{default:v(()=>i[190]||(i[190]=[M(" Intraday ")])),_:1},8,["variant","color"])]),h("div",QI,[p(Hi,null,{default:v(()=>i[191]||(i[191]=[M("BUY")])),_:1}),p(is,{color:"error",modelValue:t.limitOrderDetails.isSell,"onUpdate:modelValue":i[46]||(i[46]=a=>t.limitOrderDetails.isSell=a)},null,8,["modelValue"]),p(Hi,null,{default:v(()=>i[192]||(i[192]=[M("SELL")])),_:1})])])]),_:1})]),_:1}),p(Di,null,{default:v(()=>[p(dt,{xs:"12",sm:"12",md:"12"},{default:v(()=>[h("div",qI,[p(ei,{variant:t.limitOrderDetails.stOrderType=="LIMIT"?"flat":"outlined",onClick:i[47]||(i[47]=a=>t.limitOrderDetails.stOrderType="LIMIT"),density:"compact",color:t.limitOrderDetails.stBuySellType=="BUY"?"success":"error",ripple:!1},{default:v(()=>i[193]||(i[193]=[M(" Limit ")])),_:1},8,["variant","color"]),p(ei,{variant:t.limitOrderDetails.stOrderType=="MARKET"?"flat":"outlined",onClick:i[48]||(i[48]=a=>t.limitOrderDetails.stOrderType="MARKET"),density:"compact",color:t.limitOrderDetails.stBuySellType=="BUY"?"success":"error",ripple:!1},{default:v(()=>i[194]||(i[194]=[M(" Market ")])),_:1},8,["variant","color"]),p(ei,{variant:t.limitOrderDetails.stOrderType=="MARKET_PROTECTION"?"flat":"outlined",onClick:i[49]||(i[49]=a=>t.limitOrderDetails.stOrderType="MARKET_PROTECTION"),density:"compact",color:t.limitOrderDetails.stBuySellType=="BUY"?"success":"error",ripple:!1},{default:v(()=>i[195]||(i[195]=[M(" Market Protection ")])),_:1},8,["variant","color"]),p(ei,{variant:t.limitOrderDetails.stOrderType=="SL-L"?"flat":"outlined",onClick:i[50]||(i[50]=a=>t.limitOrderDetails.stOrderType="SL-L"),density:"compact",color:t.limitOrderDetails.stBuySellType=="BUY"?"success":"error",ripple:!1},{default:v(()=>i[196]||(i[196]=[M(" SL-L ")])),_:1},8,["variant","color"]),p(ei,{variant:t.limitOrderDetails.stOrderType=="SL-M"?"flat":"outlined",onClick:i[51]||(i[51]=a=>t.limitOrderDetails.stOrderType="SL-M"),density:"compact",color:t.limitOrderDetails.stBuySellType=="BUY"?"success":"error",ripple:!1},{default:v(()=>i[197]||(i[197]=[M(" SL-M ")])),_:1},8,["variant","color"])])]),_:1})]),_:1}),p(Di,null,{default:v(()=>[p(dt,{xs:"12",sm:"12",md:"12"},{default:v(()=>[h("div",XI,[h("div",JI,[t.limitOrderDetails.stSubSegment=="EQUITY"?(R(),N("span",ZI,[p(Jt,{modelValue:t.limitOrderDetails.inQuantity,"onUpdate:modelValue":i[54]||(i[54]=a=>t.limitOrderDetails.inQuantity=a),class:"custom-remove-input-arrow",type:"number",label:"Quantity",variant:"outlined",density:"compact",onChange:i[55]||(i[55]=a=>t.changeLimitModelEquityQty()),onKeyup:i[56]||(i[56]=Ei(a=>t.placeLimitOrder("PLACE_LIMIT_ORDER_ENTER_BUTTON"),["enter"]))},{"prepend-inner":v(()=>[p(_e,{class:"cursor-pointer",icon:"bx-minus",onClick:i[52]||(i[52]=a=>t.incrementDecrementEquityQuantity("decrement"))})]),"append-inner":v(()=>[p(_e,{class:"cursor-pointer",icon:"bx-plus",onClick:i[53]||(i[53]=a=>t.incrementDecrementEquityQuantity("increment"))})]),_:1},8,["modelValue"])])):(R(),N("span",$I,[p(Jt,{variant:"outlined",density:"compact",modelValue:t.limitOrderDetails.inQuantity,"onUpdate:modelValue":i[59]||(i[59]=a=>t.limitOrderDetails.inQuantity=a),type:"number",label:`Qty (Lot size: ${t.limitOrderDetails.inQuantity/t.limitOrderDetails.inLotSize})`,onKeydown:t.handlePriceKeydown,onChange:t.changeLimitModelQty,class:"custom-remove-input-arrow",onKeyup:i[60]||(i[60]=Ei(a=>t.placeLimitOrder("PLACE_LIMIT_ORDER_ENTER_BUTTON"),["enter"]))},{"prepend-inner":v(()=>[p(_e,{class:"cursor-pointer",icon:"bx-minus",onClick:i[57]||(i[57]=a=>t.incrementDecrementLotSize("decrement"))})]),"append-inner":v(()=>[p(_e,{class:"cursor-pointer",icon:"bx-plus",onClick:i[58]||(i[58]=a=>t.incrementDecrementLotSize("increment"))})]),_:1},8,["modelValue","label"])]))]),h("div",ek,[p(Jt,{variant:"outlined",modelValue:t.limitOrderDetails.inLimitPrice,"onUpdate:modelValue":i[61]||(i[61]=a=>t.limitOrderDetails.inLimitPrice=a),type:"number",min:"0",label:`Price(Tick size: ${t.limitOrderDetails.inTickSize})`,density:"compact",clearable:"",disabled:t.limitOrderDetails.stOrderType=="MARKET"||t.limitOrderDetails.stOrderType=="MARKET_PROTECTION"||t.limitOrderDetails.stOrderType=="SL-M",onKeyup:i[62]||(i[62]=Ei(a=>t.placeLimitOrder("PLACE_LIMIT_ORDER_ENTER_BUTTON"),["enter"])),step:t.limitOrderDetails.inTickSize,autofocus:""},null,8,["modelValue","label","disabled","step"])]),mt(h("div",tk,[p(Xn,{density:"compact",label:"Market Protection %",items:Array.from({length:15},(a,s)=>({text:`${s+1} %`,value:s+1})),modelValue:t.limitOrderDetails.inMarketProtectionPercentage,"onUpdate:modelValue":i[63]||(i[63]=a=>t.limitOrderDetails.inMarketProtectionPercentage=a),"item-title":"text","item-value":"value"},null,8,["items","modelValue"])],512),[[hi,t.limitOrderDetails.stOrderType=="MARKET_PROTECTION"]]),t.limitOrderDetails.stOrderType=="SL-L"||t.limitOrderDetails.stOrderType=="SL-M"?(R(),N("div",ik,[p(Jt,{variant:"outlined",modelValue:t.limitOrderDetails.inTriggerPrice,"onUpdate:modelValue":i[64]||(i[64]=a=>t.limitOrderDetails.inTriggerPrice=a),type:"number",min:"0",label:"Trigger price",step:t.limitOrderDetails.inTickSize,density:"compact",clearable:"",onKeyup:i[65]||(i[65]=Ei(a=>t.placeLimitOrder("PLACE_LIMIT_ORDER_ENTER_BUTTON"),["enter"]))},null,8,["modelValue","step"])])):De("",!0)]),h("div",rk,[t.isMarginApiNotAvailable==!1?(R(),N(rt,{key:0},[t.isMarginLoading==!1?(R(),N("span",ok,[t.inMarginWithExistingPosition&&!isNaN(t.inMarginWithExistingPosition)||t.inMarginWithExistingPosition==0?(R(),N("span",nk," Margin Req. : "+k(t.inMarginWithExistingPosition.toLocaleString("en-IN")),1)):De("",!0)])):t.isMarginLoading==!0?(R(),N("span",ak,[i[198]||(i[198]=M(" Margin Req. : ")),p(Ti,{size:18,indeterminate:"",color:t.limitOrderDetails.stBuySellType=="BUY"?"success":"error"},null,8,["color"])])):(R(),N("span",sk," - "))],64)):(R(),N(rt,{key:1},[M(k(t.marginApiNotAvailableMsg),1)],64))])]),_:1})]),_:1}),p(Di,null,{default:v(()=>[p(dt,{cols:"12",sm:"12",md:"12",lg:"12",style:{padding:"2px 12px 6px 12px"}},{default:v(()=>[p(or,{color:t.limitOrderDetails.stBuySellType=="BUY"?"success":"error",modelValue:t.limitOrderDetails.isAmo,"onUpdate:modelValue":i[66]||(i[66]=a=>t.limitOrderDetails.isAmo=a),label:"Is AMO Order"},null,8,["color","modelValue"])]),_:1}),p(dt,{cols:"12",sm:"12",md:"12",lg:"12",style:{padding:"2px 12px 6px 12px"}},{default:v(()=>[p(or,{color:t.limitOrderDetails.stBuySellType=="BUY"?"success":"error",modelValue:t.isStickyPlaceOrderModal,"onUpdate:modelValue":i[67]||(i[67]=a=>t.isStickyPlaceOrderModal=a),label:"Keep this window open after placing the order"},null,8,["color","modelValue"])]),_:1})]),_:1})]),_:1}),p(Ft,null,{default:v(()=>[p(Di,null,{default:v(()=>[p(dt,{cols:"12",sm:"12",md:"12",lg:"12",class:"text-sm",style:{padding:"2px 12px"}},{default:v(()=>i[199]||(i[199]=[M(" - If the user places a limit order and it goes into pending status, the Positions will not automatically update after the pending limit order is executed, and the user must click the refresh button located near the funds tab. ")])),_:1})]),_:1})]),_:1}),p(Ft,{class:"d-flex justify-end gap-2"},{default:v(()=>[p(Le,{class:"custom-flex-50",color:"secondary",variant:"tonal",onClick:i[68]||(i[68]=a=>t.hideLimitOrderModalFn(!0))},{default:v(()=>i[200]||(i[200]=[M(" Cancel ")])),_:1}),p(Le,{color:t.limitOrderDetails.stBuySellType=="BUY"?"success":"error",class:"custom-flex-50",onClick:i[69]||(i[69]=a=>t.placeLimitOrder("PLACE_LIMIT_ORDER_BUTTON")),disabled:t.isPlacingOrderLoading},As({default:v(()=>[t.isPlacingOrderLoading?De("",!0):(R(),N("span",lk," Place Order "))]),_:2},[t.isPlacingOrderLoading?{name:"append",fn:v(()=>[p(Ti,{size:24,indeterminate:""})]),key:"0"}:void 0]),1032,["color","disabled"])]),_:1})]),_:1},8,["loading"])]),_:1})]),_:1},8,["modelValue"]),p(Ai,{modelValue:t.changeStikeModel,"onUpdate:modelValue":i[101]||(i[101]=a=>t.changeStikeModel=a),width:"540",persistent:"",transition:"none"},{default:v(()=>[p(t.DraggableResizableVue,{className:"",resizable:!1,"drag-handle":".handle"},{default:v(()=>[p(ui,{loading:t.isPlacingOrderLoading},{loader:v(({isActive:a})=>[p(mu,{active:a,height:"4",indeterminate:""},null,8,["active"])]),default:v(()=>[h("div",{class:Et(`${t.changeStrikeOrderDetails.stBuySellType=="BUY"?"bg-success":"bg-error"} px-2 py-2 d-flex justify-space-between gap-4 handle`)},[h("h4",uk,k(t.changeStrikeOrderDetails.stBuySellType)+": "+k(t.changeStrikeOrderDetails.stFullSymbolName),1),p(_e,{class:"mt-1",icon:"bx-x-circle",onClick:i[71]||(i[71]=a=>t.hideLimitOrderModalFn(!0))})],2),p(Ft,null,{default:v(()=>[p(Di,null,{default:v(()=>[p(dt,null,{default:v(()=>[t.oneCLickwindowMessage!="-"?(R(),N("div",ck,k(t.oneCLickwindowMessage),1)):De("",!0),h("div",dk,[i[205]||(i[205]=h("div",{class:"mt-2"},null,-1)),h("div",pk,[p(ei,{variant:t.changeStrikeOrderDetails.stProductType=="MARGIN"?"flat":"outlined",onClick:i[72]||(i[72]=a=>t.changeStrikeOrderDetails.stProductType="MARGIN"),density:"compact",color:t.changeStrikeOrderDetails.stBuySellType=="BUY"?"success":"error",ripple:!1,class:"mx-2"},{default:v(()=>i[201]||(i[201]=[M(" Margin ")])),_:1},8,["variant","color"]),p(ei,{variant:t.changeStrikeOrderDetails.stProductType=="INTRADAY"?"flat":"outlined",onClick:i[73]||(i[73]=a=>t.changeStrikeOrderDetails.stProductType="INTRADAY"),density:"compact",color:t.changeStrikeOrderDetails.stBuySellType=="BUY"?"success":"error",ripple:!1},{default:v(()=>i[202]||(i[202]=[M(" Intraday ")])),_:1},8,["variant","color"])]),h("div",fk,[p(Hi,null,{default:v(()=>i[203]||(i[203]=[M("BUY")])),_:1}),p(is,{color:"error",modelValue:t.changeStrikeOrderDetails.isSell,"onUpdate:modelValue":i[74]||(i[74]=a=>t.changeStrikeOrderDetails.isSell=a)},null,8,["modelValue"]),p(Hi,null,{default:v(()=>i[204]||(i[204]=[M("SELL")])),_:1})])])]),_:1})]),_:1}),p(Di,null,{default:v(()=>[p(dt,{xs:"12",sm:"12",md:"12"},{default:v(()=>[h("div",hk,[p(ei,{variant:t.changeStrikeOrderDetails.stOrderType=="LIMIT"?"flat":"outlined",onClick:i[75]||(i[75]=a=>t.changeStrikeOrderDetails.stOrderType="LIMIT"),density:"compact",color:t.changeStrikeOrderDetails.stBuySellType=="BUY"?"success":"error",ripple:!1},{default:v(()=>i[206]||(i[206]=[M(" Limit ")])),_:1},8,["variant","color"]),p(ei,{variant:t.changeStrikeOrderDetails.stOrderType=="MARKET"?"flat":"outlined",onClick:i[76]||(i[76]=a=>t.changeStrikeOrderDetails.stOrderType="MARKET"),density:"compact",color:t.changeStrikeOrderDetails.stBuySellType=="BUY"?"success":"error",ripple:!1},{default:v(()=>i[207]||(i[207]=[M(" Market ")])),_:1},8,["variant","color"]),p(ei,{variant:t.changeStrikeOrderDetails.stOrderType=="MARKET_PROTECTION"?"flat":"outlined",onClick:i[77]||(i[77]=a=>t.changeStrikeOrderDetails.stOrderType="MARKET_PROTECTION"),density:"compact",color:t.changeStrikeOrderDetails.stBuySellType=="BUY"?"success":"error",ripple:!1},{default:v(()=>i[208]||(i[208]=[M(" Market Protection ")])),_:1},8,["variant","color"]),p(ei,{variant:t.changeStrikeOrderDetails.stOrderType=="SL-L"?"flat":"outlined",onClick:i[78]||(i[78]=a=>t.changeStrikeOrderDetails.stOrderType="SL-L"),density:"compact",color:t.changeStrikeOrderDetails.stBuySellType=="BUY"?"success":"error",ripple:!1},{default:v(()=>i[209]||(i[209]=[M(" SL-L ")])),_:1},8,["variant","color"]),p(ei,{variant:t.changeStrikeOrderDetails.stOrderType=="SL-M"?"flat":"outlined",onClick:i[79]||(i[79]=a=>t.changeStrikeOrderDetails.stOrderType="SL-M"),density:"compact",color:t.changeStrikeOrderDetails.stBuySellType=="BUY"?"success":"error",ripple:!1},{default:v(()=>i[210]||(i[210]=[M(" SL-M ")])),_:1},8,["variant","color"])])]),_:1})]),_:1}),p(Di,null,{default:v(()=>[p(dt,{xs:"12",sm:"12",md:"12"},{default:v(()=>[h("div",vk,[h("div",gk,[t.changeStrikeOrderDetails.stSubSegment=="EQUITY"?(R(),N("span",yk,[p(Jt,{modelValue:t.changeStrikeOrderDetails.inQuantity,"onUpdate:modelValue":i[82]||(i[82]=a=>t.changeStrikeOrderDetails.inQuantity=a),class:"custom-remove-input-arrow",type:"number",label:"Quantity",variant:"outlined",density:"compact",onChange:i[83]||(i[83]=a=>t.changeLimitModelEquityQtyForChangeStrikeOrder()),onKeyup:i[84]||(i[84]=Ei(a=>t.placeLimitOrder("PLACE_LIMIT_ORDER_ENTER_BUTTON"),["enter"]))},{"prepend-inner":v(()=>[p(_e,{class:"cursor-pointer",icon:"bx-minus",onClick:i[80]||(i[80]=a=>t.incrementDecrementEquityQuantityForChangeStrikeOrder("decrement"))})]),"append-inner":v(()=>[p(_e,{class:"cursor-pointer",icon:"bx-plus",onClick:i[81]||(i[81]=a=>t.incrementDecrementEquityQuantityForChangeStrikeOrder("increment"))})]),_:1},8,["modelValue"])])):(R(),N("span",mk,[p(Jt,{variant:"outlined",density:"compact",modelValue:t.changeStrikeOrderDetails.inQuantity,"onUpdate:modelValue":i[87]||(i[87]=a=>t.changeStrikeOrderDetails.inQuantity=a),type:"number",label:`Qty (Lot size: ${t.changeStrikeOrderDetails.inQuantity/t.changeStrikeOrderDetails.inLotSize})`,onChange:t.changeLimitModelQtyForChangeStrikeOrder,class:"custom-remove-input-arrow",onKeyup:i[88]||(i[88]=Ei(a=>t.placeLimitOrder("PLACE_LIMIT_ORDER_ENTER_BUTTON"),["enter"]))},{"prepend-inner":v(()=>[p(_e,{class:"cursor-pointer",icon:"bx-minus",onClick:i[85]||(i[85]=a=>t.incrementDecrementLotSizeForChangeStrikeOrder("decrement"))})]),"append-inner":v(()=>[p(_e,{class:"cursor-pointer",icon:"bx-plus",onClick:i[86]||(i[86]=a=>t.incrementDecrementLotSizeForChangeStrikeOrder("increment"))})]),_:1},8,["modelValue","label"])]))]),h("div",Ck,[p(Jt,{variant:"outlined",modelValue:t.changeStrikeOrderDetails.inLimitPrice,"onUpdate:modelValue":i[89]||(i[89]=a=>t.changeStrikeOrderDetails.inLimitPrice=a),type:"number",min:"0",label:`Price(Tick size: ${t.changeStrikeOrderDetails.inTickSize})`,density:"compact",clearable:"",disabled:t.changeStrikeOrderDetails.stOrderType=="MARKET"||t.changeStrikeOrderDetails.stOrderType=="MARKET_PROTECTION"||t.changeStrikeOrderDetails.stOrderType=="SL-M",onKeyup:i[90]||(i[90]=Ei(a=>t.placeLimitOrder("PLACE_LIMIT_ORDER_ENTER_BUTTON"),["enter"])),step:t.changeStrikeOrderDetails.inTickSize,autofocus:""},null,8,["modelValue","label","disabled","step"])]),mt(h("div",Sk,[p(Xn,{density:"compact",label:"Market Protection %",items:Array.from({length:15},(a,s)=>({text:`${s+1} %`,value:s+1})),modelValue:t.changeStrikeOrderDetails.inMarketProtectionPercentage,"onUpdate:modelValue":i[91]||(i[91]=a=>t.changeStrikeOrderDetails.inMarketProtectionPercentage=a),"item-title":"text","item-value":"value"},null,8,["items","modelValue"])],512),[[hi,t.changeStrikeOrderDetails.stOrderType=="MARKET_PROTECTION"]]),t.changeStrikeOrderDetails.stOrderType=="SL-L"||t.changeStrikeOrderDetails.stOrderType=="SL-M"?(R(),N("div",wk,[p(Jt,{variant:"outlined",modelValue:t.changeStrikeOrderDetails.inTriggerPrice,"onUpdate:modelValue":i[92]||(i[92]=a=>t.changeStrikeOrderDetails.inTriggerPrice=a),type:"number",min:"0",label:"Trigger price",step:t.changeStrikeOrderDetails.inTickSize,density:"compact",clearable:"",onKeyup:i[93]||(i[93]=Ei(a=>t.placeLimitOrder("PLACE_LIMIT_ORDER_ENTER_BUTTON"),["enter"]))},null,8,["modelValue","step"])])):De("",!0)]),h("div",Tk,[h("span",Ok,[p(Jt,{variant:"outlined",density:"compact",modelValue:t.changeStrikeOrderDetails.inStrikePrice,"onUpdate:modelValue":i[96]||(i[96]=a=>t.changeStrikeOrderDetails.inStrikePrice=a),type:"number",label:"Strike price",onChange:i[97]||(i[97]=a=>t.onStrikePriceChange(a,null)),class:"custom-remove-input-arrow",onKeyup:i[98]||(i[98]=Ei(a=>t.placeLimitOrder("PLACE_LIMIT_ORDER_ENTER_BUTTON"),["enter"]))},{"prepend-inner":v(()=>[p(_e,{class:"cursor-pointer",icon:"bx-minus",onClick:i[94]||(i[94]=a=>t.onStrikePriceChange(null,"decrement"))})]),"append-inner":v(()=>[p(_e,{class:"cursor-pointer",icon:"bx-plus",onClick:i[95]||(i[95]=a=>t.onStrikePriceChange(null,"increment"))})]),_:1},8,["modelValue"])])])]),_:1})]),_:1})]),_:1}),p(Ft,null,{default:v(()=>[p(Di,null,{default:v(()=>[p(dt,{cols:"12",sm:"12",md:"12",lg:"12",class:"text-sm"},{default:v(()=>i[211]||(i[211]=[M(" - If the user places a limit order and it goes into pending status, the Positions will not automatically update after the pending limit order is executed, and the user must click the refresh button located near the funds tab. ")])),_:1})]),_:1})]),_:1}),p(Ft,{class:"d-flex justify-end gap-2"},{default:v(()=>[p(Le,{class:"custom-flex-50",color:"secondary",variant:"tonal",onClick:i[99]||(i[99]=a=>t.hideChangeStikeModalFn(!0))},{default:v(()=>i[212]||(i[212]=[M(" Cancel ")])),_:1}),p(Le,{color:t.changeStrikeOrderDetails.stBuySellType=="BUY"?"success":"error",class:"custom-flex-50",onClick:i[100]||(i[100]=a=>t.placeChangeStrikeOrder("PLACE_CHANGE_STRIKE_ORDER_BUTTON")),disabled:t.isPlacingOrderLoading},As({default:v(()=>[t.isPlacingOrderLoading?De("",!0):(R(),N("span",Pk," Place Order "))]),_:2},[t.isPlacingOrderLoading?{name:"append",fn:v(()=>[p(Ti,{size:24,indeterminate:""})]),key:"0"}:void 0]),1032,["color","disabled"])]),_:1})]),_:1},8,["loading"])]),_:1})]),_:1},8,["modelValue"]),p(Ai,{modelValue:t.tranchModelOptions,"onUpdate:modelValue":i[102]||(i[102]=a=>t.tranchModelOptions=a),class:"v-dialog-sm",persistent:!0},{default:v(()=>[p(t.DraggableResizableVue,{className:"",resizable:!1,"drag-handle":".handle"},{default:v(()=>[p(ui,null,{default:v(()=>[h("div",Ek,[i[213]||(i[213]=h("h3",{class:"text-white"},"Tranching basket orders",-1)),p(_e,{class:"mt-1",icon:"bx-x-circle",onClick:t.hideTranchOrderModalFn})]),p(Ft,{class:""},{default:v(()=>[i[216]||(i[216]=h("p",null,"Placing orders in tranches",-1)),p(mu,{"model-value":t.inTranchesProgress,height:"20",color:"error",rounded:"",class:"mb-4"},{default:v(({value:a})=>[h("strong",{class:Et(a>45?"text-white":"")},k(Math.ceil(a))+"%",3)]),_:1},8,["model-value"]),h("p",null,"Total tranches: "+k(t.arTranches.length),1),h("p",null,"Successful Tranches: "+k(t.getSuccessfulTranchCount(t.arTranches)),1),h("div",_k,[t.inTranchesProgress!=100?(R(),N("div",bk,i[214]||(i[214]=[h("b",null,"(Do not close this window while process is running)",-1)]))):(R(),N("div",Dk,i[215]||(i[215]=[h("b",null,"(Process is complete, Now you can close the window.)",-1)])))])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),p(Ai,{modelValue:t.isDialogVisible,"onUpdate:modelValue":i[104]||(i[104]=a=>t.isDialogVisible=a),fullscreen:"",scrim:!1,transition:"dialog-left-transition"},{default:v(()=>[p(ui,null,{default:v(()=>[p(Ft,null,{default:v(()=>[h("div",Rk,[p(Le,{icon:"",variant:"plain",onClick:i[103]||(i[103]=a=>t.isDialogVisible=!1)},{default:v(()=>[p(_e,{icon:"bx-x"})]),_:1}),i[217]||(i[217]=h("h2",null,"Add to basket",-1))]),h("div",null,[p(t.OptionsList,{socket:t.socket,selectedExchange:t.selectedExchange,selectedAvailableDate:t.selectedAvailableDate,selectedOptions:t.selectedOptions,addOrderObjectToBasketOrderFromList:t.addOrderObjectToBasketOrderFromList,BasketOrderData:t.arBasketOrders,modifyBasketOrderQty:t.modifyBasketOrderQty,modifyBasketOrderQtyField:t.modifyBasketOrderQtyField,addBasketOrderFromSavedBasket:t.addBasketOrderFromSavedBasket,modifyBasketOrderBuySellType:t.modifyBasketOrderBuySellType,removeOrderFromBasket:t.removeOrderFromBasket,getActiveTabData:t.getActiveTabData,showMessageOnOnlickWindow:t.showMessageOnOnlickWindow,clearAllBasketOrders:t.clearAllBasketOrders,placeAllBasketOrders:t.placeAllBasketOrders,modifyBasketOrderMarketProtectionPercentage:t.modifyBasketOrderMarketProtectionPercentage,addStrategyToBasketOrder:t.addStrategyToBasketOrder,spotPrice:t.underLyingAssetData?.inLtp,modifyBasketOrderOptionType:t.modifyBasketOrderOptionType,modifyBasketOrderProductTypeField:t.modifyBasketOrderProductTypeField,modifyBasketOrderExpiryDate:t.modifyBasketOrderExpiryDate,modifyBasketOrderStrikePrice:t.modifyBasketOrderStrikePrice,modifyBasketOrderLtpField:t.modifyBasketOrderLtpField,modifyBasketOrderType:t.modifyBasketOrderType,modifyBasketOrderTypeMarketProtectionPercentage:t.modifyBasketOrderTypeMarketProtectionPercentage,availableExpiryDate:t.availableExpiryDate,brokerData:t.brokerData,availableOrderType:t.availableOrderType,modifySelectedBasketOrder:t.modifySelectedBasketOrder,activeTab:t.activeTab},null,8,["socket","selectedExchange","selectedAvailableDate","selectedOptions","BasketOrderData","spotPrice","availableExpiryDate","brokerData","availableOrderType","activeTab"])])]),_:1})]),_:1})]),_:1},8,["modelValue"]),p(Ai,{modelValue:t.selectBrokerModel,"onUpdate:modelValue":i[106]||(i[106]=a=>t.selectBrokerModel=a),onAfterLeave:t.hideChangeBrokerModel,class:"v-dialog-sm"},{default:v(()=>[p(t.DraggableResizableVue,{className:"",resizable:!1,"drag-handle":".handle"},{default:v(()=>[p(ui,null,{default:v(()=>[h("div",xk,[i[218]||(i[218]=h("h3",{class:"text-white"},"Select Broker",-1)),p(_e,{class:"mt-1",icon:"bx-x-circle",onClick:t.hideChangeBrokerModel})]),p(Ft,null,{default:v(()=>i[219]||(i[219]=[h("p",null,"Changing broker will remove all your Stoploss and targets including MTM SL/TARGET.",-1),h("p",null,"Are you sure do you want to change broker?",-1)])),_:1}),p(Ft,{class:"d-flex flex-wrap justify-end gap-2"},{default:v(()=>[p(Le,{class:"custom-flex-48 custom-flex-xs-100",color:"secondary",variant:"tonal",onClick:t.hideChangeBrokerModel},{default:v(()=>i[220]||(i[220]=[M(" Cancel ")])),_:1}),p(Le,{class:"custom-flex-48 custom-flex-xs-100",onClick:i[105]||(i[105]=a=>t.changeBroker())},{default:v(()=>i[221]||(i[221]=[M(" Yes, Change the Broker ")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),p(Ai,{modelValue:t.stopBrokerTradingModel,"onUpdate:modelValue":i[108]||(i[108]=a=>t.stopBrokerTradingModel=a),onAfterLeave:t.hideStopBrokerTradingModel,class:"v-dialog-sm"},{default:v(()=>[p(t.DraggableResizableVue,{className:"",resizable:!1,"drag-handle":".handle"},{default:v(()=>[p(ui,null,{default:v(()=>[h("div",Ak,[i[222]||(i[222]=h("h3",{class:"text-white"},"Disable trading for today",-1)),p(_e,{class:"mt-1",icon:"bx-x-circle",onClick:t.hideStopBrokerTradingModel})]),p(Ft,null,{default:v(()=>[i[224]||(i[224]=h("p",null,"Are you sure do you want to disable trading for the day in this broker account?",-1)),t.selectedUserBrokerId?(R(),at(is,{key:0,modelValue:t.isStopBrokerTrading,"onUpdate:modelValue":i[107]||(i[107]=a=>t.isStopBrokerTrading=a),label:"De-activate trading in this broker account",class:"single-line-label",color:"primary"},null,8,["modelValue"])):De("",!0),t.isStopBrokerTrading?(R(),N("span",Lk,i[223]||(i[223]=[h("p",{class:"mt-4"},[h("b",null,"All trading operations for the chosen broker account will be deactivated for the remainder of todays session.")],-1),h("p",{class:"mt-2"},[h("b",null,"Once deactivated, you will not be able to activate trading in this broker account for rest of the day.")],-1)]))):De("",!0)]),_:1}),p(Ft,{class:"d-flex flex-wrap justify-end gap-2"},{default:v(()=>[p(Le,{class:"custom-flex-36 custom-flex-xs-100",color:"secondary",variant:"tonal",onClick:t.hideStopBrokerTradingModel},{default:v(()=>i[225]||(i[225]=[M(" Cancel ")])),_:1}),p(Le,{class:"custom-flex-60 custom-flex-xs-100",onClick:t.stopBrokerTrading,disabled:!t.isStopBrokerTrading},{default:v(()=>i[226]||(i[226]=[M(" Yes, De-activate The Trading ")])),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),t.DittoOrderModel?(R(),at(Ai,{key:2,modelValue:t.DittoOrderModel,"onUpdate:modelValue":i[109]||(i[109]=a=>t.DittoOrderModel=a),width:"1400",persistent:"",transition:"none"},{default:v(()=>[p(ui,null,{default:v(()=>[h("div",Mk,[i[227]||(i[227]=h("h4",{class:"text-white"}," Ditto Orders ",-1)),p(_e,{class:"mt-1",icon:"bx-x-circle",onClick:t.hideDittoOrderModalFn})]),p(Ft,{style:{padding:"10px"}},{default:v(()=>[p(t.DittoOrders)]),_:1})]),_:1})]),_:1},8,["modelValue"])):De("",!0)])}const Fk=300,Ik={__name:"1CliqTradeWindow",setup(n,{expose:i}){i(),he.tz.setDefault("Asia/Kolkata");const e=he().format("DD-MM-YYYY_HH:mm:ss")+"_"+ot.randomString(5),t=pi(),r=g(null),o=g([]),a=g([]),s=Za.connect(ht.websocketDataApiUrl,{autoConnect:!1,transports:["websocket"],query:{Authorization:"Bearer "+t.token,Platform:"1cliq"}}),l=g(null);let u=null;Gt(()=>{Vd(),s.connect(),s.io.on("error",m=>{console.log("socket error:"),console.log(m)}),s.io.on("reconnect",m=>{xo()}),xo(),Zd(),Ps(null,null,!1),iu(),t.connectSocket()}),cl(()=>{window.addEventListener("keydown",pu,null),document.addEventListener("focusin",un),document.addEventListener("focusout",Pr)}),Oo(()=>{window.removeEventListener("keydown",pu),document.removeEventListener("focusin",un),document.removeEventListener("focusout",Pr)});const c=g(!1),d=g(0),f=g(0),y=g(!1),S=g(!1),w=g({}),E=g({}),_=g({}),L=g({}),P=g(!1),V=g(""),ne=g("error"),ee=g("positions"),re=g([]),F=g([]),U=g([]),Y=g([]),K=g({}),Ce=g({}),Q=g(!1),Ne=g("-"),xe=g(!1),fe=g(null),q=g(!1),Pe=g(null),Se=g(!1),ge=g(!1),le=g(!1),ie=g(!1),ye=g(!1),Re=t.stFavouriteSetting,$=g(Re?Re.oneClick:{showLtpRangeBar:!0,typeOfLtpRangeBar:"RANGE_BAR",selectedSegment:"OPTIONS",selectedAsset:"BANKNIFTY",selectedOrderType:"MARKET_PROTECTION",selectedMarketProtectionPercentage:5,selectedTypeOfPositions:"Equity Derivatives",selectedClosePositionOrderType:"MARKET",selectedProductType:"MARGIN",setPredefinedTarget:!1,inPredefinedTarget:null,stTypeOfPredefinedTarget:"ABSOLUTE_POINTS",setPredefinedSl:!1,inPredefinedSl:null,isTrailingStoplossSet:!1,inTrailingStoplossStep:1,stTypeOfPredefinedSl:"ABSOLUTE_POINTS",selectedPutStrikePrice:1,selectedCallStrikePrice:-1,allAssetWiseSlAndTarget:null}),Qe=g(!0),Ge=g("RANGE_BAR"),et=g(null),Je=g(!1),it=g(!1),jt=g(!1),Si=g(!1),Kt=g(!1),fi=g(!1),gi=g(!1),tt=g(!1),ae=g(!1),G=g(null),H=g(null),Ee=g(!0),He=g(!1),Ae=g(null),Lt=g(null),ut=g([]),Ri=g([]),Gi=g([]),me=g([]),fr=g([]),Ht=g({}),Pt=g({}),Z=g({}),ze=g({}),yi=g(null),mi=g(null),ce=g([]),Ze=g(he().format("YYYY-MM-DD")),we=g("live"),wt=g("NSE"),We=g("OPTIONS"),lt=g("BANKNIFTY"),_i=g(null),ti=g(null),oi=g(null),Rt=g(null),qr=g(null),_o=g(3),si=g(null),D=g("MARGIN"),C=g("MARKET_PROTECTION"),de=g(5),Tt=g(null),Fe=g(null),ct=g({Index:[{value:null,text:"Please select a options name"},{value:"BANKNIFTY",text:"BANKNIFTY"},{value:"NIFTY",text:"NIFTY"},{value:"FINNIFTY",text:"FINNIFTY"},{value:"MIDCPNIFTY",text:"MIDCPNIFTY"}]}),Qt=g([{value:null,text:"Please select a date"}]),Bt=g([{value:null,text:"Select an expiry date"}]),zt=g([{value:null,text:"Select Strike"}]),Qi=[{value:"NSE",text:"NSE"},{value:"BSE",text:"BSE"}],z=g([{value:"EQUITY",text:"Equity (Beta)"},{value:"OPTIONS",text:"Options"},{value:"FUTURES",text:"Futures"}]),pe=g([{value:"INTRADAY",text:"Intraday"},{value:"MARGIN",text:"Margin"}]),Ye=g([{value:"MARKET",text:"Market"},{value:"MARKET_PROTECTION",text:"Market Protection"},{value:"LIMIT_AT_LTP",text:"Limit at LTP"},{value:"LIMIT_ORDER",text:"Limit Order"}]),$e=g([{value:null,text:"All positions"},{value:"Equity Derivatives",text:"F&O positions only"},{value:"Capital Market",text:"Equity positions only"}]),x=g(null),Wt=g("MARKET"),Vt=g({}),Ui=g(0),Vi=g(!1),An=g(null),co=g(null),bo=g(!1),ys=g(null),ms=g(!1),on=g(1),nn=g(null),Cs=g(null),Zl=g(0),$l=g(["Stoploss and Trailing Stoploss feature will only work if 1Cliq trading window is opened.","Stoploss and Trailing Stoploss will be removed if 1Cliq window has been reloaded.","Orders placed after market hours for any/testing purposes will be placed by 1Cliq with the AMO flag enabled; therefore, if you do not want those orders to be executed on the following trading day, be sure to cancel them.","We are not responsible for any of Losses you may incur by using 1Cliq.","We are not SEBI registered investment/financial advisers. Please consult your investment/financial adviser before trading/investing."]),Ln={DEFAULT:700,TRADE_SMART_V2:825,FINVASIA:950,FLAT_TRADE:950,JAINAM_DUCK:950,FYERS:950,DHAN:950,ASTHA_TRADE:900,GOODWILL:750,CHOICE_INDIA:800},Ss={DEFAULT:700,TRADE_SMART_V2:850,FINVASIA:850,FLAT_TRADE:850,JAINAM_DUCK:850,CHOICE_INDIA:800,ASTHA_TRADE:900},Tr=g("QTY"),Or=g(null),Do=g(null),an=g(null),Ro=g(null),Mn=g(!1),sn=g(null),ln=g(!1),la=g(null),Nn=()=>{Tr.value=Tr.value=="QTY"?"FUND":"QTY",Tr.value=="FUND"&&((Or.value==null||Or.value==0)&&(Or.value=5e4),Xr())};function ua(m){let A=String(m.target.innerText);Or.value=Number(A),Xr()}function ws(m){Xr()}const Xr=()=>{if(Pt.value?.[yi.value]?.inLtp>0){let m=Or.value/(Pt.value[yi.value].inLtp*et.value);m=m>=ht.maxLots?ht.maxLots:m,Do.value=m>=1?Math.floor(m):0}if(Pt.value?.[mi.value]?.inLtp>0){let m=Or.value/(Pt.value[mi.value].inLtp*et.value);m=m>=ht.maxLots?ht.maxLots:m,an.value=m>=1?Math.floor(m):0}},Ts=g({}),ca=g({}),da=g(!1),Os=g(!1),eu=g(!1),tu=g(!1),Fn=g(null),O=g(0),W=g(!1),te=g(!1),Me=g(null),j=g(!1),Te=g(!1),Ve=g(!1),qe=g(!1),Ct=g(!1),st=g("ALL"),Pi=g([{value:"ALL",text:"All positions"},{value:"ASSET_WISE",text:"Asset Wise"}]),qt=g(!1),po=g(!1),ft=g(!1),fo=()=>{let m=t.getUserDetails?.stEmail;return ht.allowRestrictedFeatures.indexOf(m)!=-1};Ke(ee,(m,A)=>{sp(m,A)}),Ke(Z,m=>{try{m.isSell?Z.value.stBuySellType="SELL":Z.value.stBuySellType="BUY";let A=!1;switch(m.stOrderType){case"LIMIT":Z.value.inLimitPrice=m.inLimitPrice?Number(m.inLimitPrice):null,Z.value.inTriggerPrice=null,Z.value.inLimitPrice&&(A=!0);break;case"MARKET":Z.value.inLimitPrice=null,Z.value.inTriggerPrice=null,A=!0;break;case"SL-L":Z.value.inLimitPrice&&Z.value.inTriggerPrice&&(A=!0);break;case"SL-M":Z.value.inLimitPrice=null,Z.value.inTriggerPrice&&(A=!0);break;default:break}A&&yp()}catch(A){console.log("error"),console.log(A)}},{deep:!0}),Ke(ze,(m,A)=>{switch(m.isSell?ze.value.stBuySellType="SELL":ze.value.stBuySellType="BUY",m.stOrderType){case"LIMIT":ze.value.inLimitPrice=m.inLimitPrice?Number(m.inLimitPrice):null,ze.value.inTriggerPrice=null;break;case"MARKET":ze.value.inLimitPrice=null,ze.value.inTriggerPrice=null;break;case"SL-L":break;case"SL-M":ze.value.inLimitPrice=null;break}},{deep:!0});function un(m){const A=m.target;A&&["chcekbox","number","text","radio"].indexOf(A.type)!=-1&&(A.tagName=="INPUT"||A.className?.includes("v-list-item"))&&Ds(null,!0)}function Pr(m){const A=m.target;(A.tagName=="INPUT"||A.className?.includes&&A.className.includes("v-list-item"))&&Ds(null,!1)}async function Gr(){u=Za.connect(ht.userBrokerWsUpdateUrl,{autoConnect:!0,transports:["websocket"],query:{Authorization:"Bearer "+t.token}}),u.connect(),u.on("connect",()=>{u.emit("connectUserBroker",{stKey:r.value?r.value.stIdentificationToken:null})}),u.on("brokerConnection",async m=>{j.value=m?.connected}),u.on("1CLIQ_NOTIFICATION",async m=>{P.value=m.notify,ne.value=m.type,V.value=m.msg}),u.on("updateBrokerData",async m=>{if(m[`${r.value.stBrokerUniqueCode}_${r.value.stBrokerUserId}`]){l.value&&(clearTimeout(l.value),l.value=null,O.value=O.value+1,O.value>40&&(vo(),O.value=0));const A=ru();l.value=setTimeout(()=>{O.value=0,clearTimeout(Fn.value),vo()},A)}})}function iu(){try{const m={stBrokerUniqueCode:null};yt.post("/one-click/getoneclicknotification",m).then(A=>{if(A.data.status=="success")if(A.data?.data?.oneClickNotifications?.length>0){let I=A.data.data.oneClickNotifications;ne.value=I[0].stNotificationType,V.value=I[0].stNotification,P.value=!0}else ne.value="error",V.value=null,P.value=!1;else t.toastMessage({color:A.data.status,message:A.data.msg})}).catch(A=>{})}catch(m){console.log("error"),console.log(m)}}function ru(){let m=null;return ee.value=="positions"?(m=Ln?.[r.value?.stBrokerUniqueCode],m=m||Ln.DEFAULT):ee.value=="orderBook"?(m=Ln?.[r.value?.stBrokerUniqueCode],m=m||Ss.DEFAULT):m=1e3,m}async function Vd(){W.value=!0,await yt.post("/user-broker/getuserbrokeractivetradingtokens",{}).then(m=>{m.data.status=="success"?(a.value=m.data.data.availableBrokersToTrade,a.value.length>0?m.data.data.selectedBroker!=null?(r.value=m.data.data.selectedBroker,Me.value=r.value.inUserBrokerId,Ae.value=r.value?r.value.stIdentificationToken:null,o.value=m.data.data.activeChildBrokers,qt.value=!r.value?.isBrokerTradingAllowed):(t.toastMessage({color:"error",message:"Please select broker first."}),r.value=null,Me.value=null,Ae.value=null):(r.value=null,Me.value=null,Ae.value=null),Ae.value&&(vo(),fu(),ou()),Gr()):t.toastMessage({color:m.data.status,message:m.data.msg})}).catch(m=>{console.log(m)}).finally(()=>{W.value=!1})}function tg(m){Bd(),Me.value=m.target.value}function ig(){W.value=!0;const m={inUserBrokerId:Me.value};yt.post("/user-broker/getuserbrokertradingtoken",m).then(A=>{pa(),A.data.status=="success"?(Je.value=!Je.value,u.emit("disconnectUserBroker",{stKey:r.value?r.value.stIdentificationToken:null}),o.value.length>0&&o.value.forEach(I=>{u.emit("disconnectUserBroker",{stKey:I.stIdentificationToken})}),re.value=[],F.value=[],U.value=[],Y.value=[],K.value={},r.value=A.data.data.selectedBroker,o.value=A.data.data.activeChildBrokers,Me.value=r.value.inUserBrokerId,Ae.value=r.value?r.value.stIdentificationToken:null,qt.value=!r.value?.isBrokerTradingAllowed,ln.value=!1,la.value=null,u.emit("connectUserBroker",{stKey:r.value?r.value.stIdentificationToken:null}),vo(),fu(),ou(),t.toastMessage({color:A.data.status,message:"Broker changed successfully."})):t.toastMessage({color:A.data.status,message:A.data.msg})}).catch(A=>{console.log("error :>> ",A),pa()}).finally(()=>{W.value=!1})}function ou(){if(fo()){const m={inUserBrokerId:Me.value};yt.post("/trade-analyser/getmtmthresholddetails",m).then(A=>{pa(),c.value=!1,d.value=0,f.value=0,A.data.status=="success"?(c.value=!0,d.value=A.data.data.inDrawdownThreshold,f.value=A.data.data.inLossPercentage):t.toastMessage({color:A.data.status,message:A.data.msg})}).catch(A=>{console.log("error :>> ",A),pa()}).finally(()=>{W.value=!1})}}function pa(){te.value=!1,Me.value=r.value?.inUserBrokerId}function Bd(){te.value=!0}function rg(m){xe.value=m}function og(m){q.value=m}async function Hd(m=null,A=null){try{await Ps(null,A,!0)}catch(I){console.log("error"),console.log(I)}}async function Ps(m=null,A=null,I=!1){try{switch(We.value){case"OPTIONS":jt.value=!1,await Wd();break;case"FUTURES":jt.value=!0,Tr.value=="FUND"&&(Tr.value="QTY",t.toastMessage({color:"warning",message:"Type of lot size is changed to QTY."})),await Ud();break;case"EQUITY":et.value=1,si.value=1,jt.value=!0,await jd();break;default:break}if(I&&(wt.value=="BSE"?dr(()=>{lt.value="SENSEX"}):wt.value=="NSE"&&dr(()=>{lt.value="BANKNIFTY"})),We.value=="EQUITY"&&ct.value?.Stock&&ct.value.Stock.length>0){let B=!1;for(let X=0;X<ct.value.Stock.length;X++)if(ct.value.Stock[X]==lt.value){B=!0;break}B||ct.value.Stock.length>1&&(lt.value=ct.value.Stock[1].value)}A==null&&_s(null,null)}catch(B){console.log("error"),console.log(B)}}async function Wd(){wt.value=="NSE"?await yt.post("/one-click/getavailableoptionsdata",{stSelectedModeOfData:we.value}).then(m=>{m.data.status=="success"?m.data.data.length>0?ct.value=Es(m.data.data):ct.value=[]:t.toastMessage({color:m.data.status,message:m.data.msg})}).catch(m=>{}):wt.value=="BSE"&&(ct.value={Index:[{value:null,text:"Please select a options name"},{value:"SENSEX",text:"SENSEX"},{value:"BANKEX",text:"BANKEX"},{value:"SENSEX50",text:"SENSEX50"}]})}async function Ud(){wt.value=="NSE"?await yt.post("/one-click/getavailablefuturesdata",{stSelectedModeOfData:we.value}).then(m=>{m.data.status=="success"?m.data.data.length>0?ct.value=Es(m.data.data):ct.value=[]:t.toastMessage({color:m.data.status,message:m.data.msg})}).catch(m=>{}):wt.value=="BSE"&&(ct.value={Index:[{value:null,text:"Please select a options name"},{value:"SENSEX",text:"SENSEX"},{value:"BANKEX",text:"BANKEX"},{value:"SENSEX50",text:"SENSEX50"}]})}async function jd(){wt.value=="NSE"?await yt.post("/one-click/getavailableequitydata",{stSelectedModeOfData:we.value}).then(m=>{m.data.status=="success"?m.data.data.length>0?ct.value=Es(m.data.data):ct.value=[]:t.toastMessage({color:m.data.status,message:m.data.msg})}).catch(m=>{}):wt.value=="BSE"&&(ct.value={Stock:[{value:null,text:"No equity available"}]})}function Es(m){let A=[],I=[];for(let X=0;X<m.length;X++)m[X].type=="FUTIDX"?A.push({text:m[X].text,value:m[X].text}):I.push({text:m[X].text,value:m[X].text});const B={};return A.length>0&&(B.Index=[...A]),I.length>0&&(B.Stock=[...I]),B}async function _s(m=null,A=null){try{ti.value=null,oi.value=null,Rt.value=null,Bt.value=[{value:null,text:"Please select an expiry date"}],zt.value=[{value:null,text:"Select Strike"}],await zd(),_i.value=Qt.value.length>1?Qt.value[1].value:he().format("YYYY-MM-DD"),A==null&&await bs()}catch(I){console.log("error"),console.log(I)}}async function zd(){const m={stSelectedOptions:lt.value,stSelectedModeOfData:we.value};await yt.post("/one-click/getselectedoptionsdate",m).then(A=>{A.data.status=="success"?Qt.value=[{value:null,text:"Please select a date"},...A.data.data]:(Qt.value=[{value:null,text:"No date available."}],t.toastMessage({color:A.data.status,message:"No date available."}))}).catch(A=>{})}async function bs(m=null,A=null){try{ti.value=null,oi.value=null,Rt.value=null,await Yd(),We.value=="OPTIONS"?await Kd():We.value=="FUTURES"?await Qd():Bt.value=[{text:"No expiry Available",value:null}],A==null&&(Rt.value=Bt.value.length>1?Bt.value[1].value:null,await au())}catch(I){console.log("error"),console.log(I)}}async function Yd(){const m={stSelectedModeOfData:we.value,stSelectedOptions:lt.value,stSelectedAvailableDate:_i.value};await yt.post("/one-click/getunderlyingdata",m).then(async A=>{A.data.status=="success"?(Fe.value=A.data.data,Fe.value.inLtp=Fe.value.inLtp.toFixed(2),Fe.value.inLtpDiff=(Number(Fe.value.inLtp)-Number(Fe.value.inPrevDayClose)).toFixed(2),Fe.value.inLtpDiffInPercentage=(Number(Fe.value.inLtpDiff)*100/Number(Fe.value.inPrevDayClose)).toFixed(2),Qe.value&&Ge.value=="LINE_CHART"&&(L.value=await Ca("EQUITY",null,Fe.value.stUnderLyingAsset))):t.toastMessage({color:A.data.status,message:A.data.msg})}).catch(A=>{})}async function Kd(){const m={stSelectedOptions:lt.value,stSelectedAvailableDate:_i.value,stSelectedModeOfData:we.value};await yt.post("/one-click/getoptionsdataexpirydate",m).then(async A=>{A.data.status=="success"?Bt.value=await nu(A.data.data):(Bt.value=[{value:null,text:"No expiry date available"}],Rt.value=null,t.toastMessage({color:A.data.status,message:A.data.msg}))}).catch(A=>{})}async function Qd(){let m={stSelectedFutures:lt.value,stSelectedAvailableDate:_i.value,stSelectedModeOfData:we.value};await yt.post("/one-click/getfuturesdataexpirydate",m).then(async A=>{A.data.status=="success"?(Bt.value=await nu(A.data.data),Rt.value=Bt.value.length>1?Bt.value[1].value:null):(Bt.value=[{value:null,text:"No expiry date available"}],Rt.value=null,t.toastMessage({color:A.data.status,message:A.data.msg}))}).catch(A=>{console.log(A)})}async function nu(m){let A=[];return A=m.map(I=>({text:he(I.value,"YYMMDD").format("DD-MMM-YYYY"),value:I.value,inLotSize:I.inLotSize})),A=[{value:null,text:"Please select an expiry date"},...A],A}async function au(m=null,A=null){try{ti.value=null,oi.value=null,Xd(),We.value=="OPTIONS"?await Jd(A):We.value=="FUTURES"?qd():We.value=="EQUITY"&&xo()}catch(I){console.log("error"),console.log(I)}}async function qd(){Tt.value=`${lt.value}${he(Rt.value,"YYMMDD",!0).format("YYMMM").toUpperCase()}FUT`,xo(),Qe.value&&Ge.value=="LINE_CHART"&&(w.value=await Ca("FUTURES",null,Tt.value))}function Xd(){try{if(We.value=="EQUITY")et.value=1,si.value=1;else for(let m=0;m<Bt.value.length;m++)if(Rt.value==Bt.value[m].value){let A=0;si.value&&et.value&&(A=Number((si.value/et.value).toFixed(0))),et.value=Bt.value[m].inLotSize,A?si.value=et.value*A:si.value=et.value}}catch(m){console.log("error"),console.log(m)}}async function Jd(m=null){try{let A={stSelectedOptions:lt.value,stSelectedAvailableDate:_i.value,stSelectedAvailableExpiryDate:Rt.value,stSelectedModeOfData:we.value};await yt.post("/one-click/getselectedoptionsstrikepricedata",A).then(I=>{if(I.data.status=="success"){if(zt.value=[{value:null,text:"Select Strike"},...I.data.data],Fe.value=I.data.underlyingDetails,Fe.value&&Fe.value.inLtp&&zt.value.length>1){let B=null,X=null,se=0,Ie=0,Be=null;for(let ke=1;ke<zt.value.length;ke++)zt.value[ke].value<Fe.value.inLtp-Fe.value.inLtp*.005&&(B=zt.value[ke].value),zt.value[ke].value<Fe.value.inLtp&&(se=ke),zt.value[ke].value<Fe.value.inLtp+Fe.value.inLtp*.005&&(X=zt.value[ke].value),zt.value[ke].value<Fe.value.inLtp&&(Ie=ke),m&&m.inStrikePrice==zt.value[ke].value&&(Be=ke);$.value?.selectedCallStrikePrice!=null&&$.value?.selectedCallStrikePrice!=null&&(B=zt.value[se+$.value.selectedCallStrikePrice].value),$.value?.selectedPutStrikePrice!=null&&$.value?.selectedPutStrikePrice!=null&&(X=zt.value[Ie+$.value.selectedPutStrikePrice].value),m&&m.stOptionsType=="CE"&&(Be!=null?B=zt.value[Be].value:t.toastMessage({color:"error",message:"Call Strike price did not found. Deafult strike price is selected."})),ti.value=B,m&&m.stOptionsType=="PE"&&(Be!=null?X=zt.value[Be].value:t.toastMessage({color:"error",message:"Put Strike price did not found. Deafult strike price is selected."})),oi.value=X,Fe.value.inLtp=Fe.value.inLtp.toFixed(2),Fe.value.inLtpDiff=(Number(Fe.value.inLtp)-Number(Fe.value.inPrevDayClose)).toFixed(2),Fe.value.inLtpDiffInPercentage=(Number(Fe.value.inLtpDiff)*100/Number(Fe.value.inPrevDayClose)).toFixed(2),su(null,!1),lu(null,!1),xo()}}else zt.value=[{value:null,text:"No strike price available"}],t.toastMessage({color:I.data.status,message:I.data.msg})}).catch(I=>{console.log("error"),console.log(I)})}catch(A){console.log("error"),console.log(A)}}async function su(m=null,A=!0){yi.value=lt.value+Rt.value+ti.value+"CE",A&&xo(),Qe.value&&Ge.value=="LINE_CHART"&&(E.value=await Ca("OPTIONS","CALL",yi.value))}async function lu(m=null,A=!0){mi.value=lt.value+Rt.value+oi.value+"PE",A&&xo(),Qe.value&&Ge.value=="LINE_CHART"&&(_.value=await Ca("OPTIONS","PUT",mi.value))}function ng(){C.value!="MARKET_PROTECTION"?de.value=0:de.value=de.value!=0?de.value:1}function ag(){Je.value=!Je.value,vo()}function sg(){si.value=ot.calculateLotSize(si.value,ht.maxLots,et.value)}function Zd(){try{if($.value!=null){if($.value.selectedSegment&&(We.value=$.value.selectedSegment,We.value=="OPTIONS"?jt.value=!1:jt.value=!0),Qe.value=$.value.showLtpRangeBar!=null?$.value.showLtpRangeBar:!0,Ge.value=$.value.typeOfLtpRangeBar!=null?$.value.typeOfLtpRangeBar:"RANGE_BAR",C.value=$.value.selectedOrderType,Wt.value=$.value.selectedClosePositionOrderType,de.value=$.value.selectedMarketProtectionPercentage,x.value=$.value.selectedTypeOfPositions,st.value=$.value?.selectedPositionView!=null?$.value.selectedPositionView:"ALL",D.value=$.value.selectedProductType,Vi.value=!!$.value.setPredefinedTarget,An.value=Vi.value?$.value.inPredefinedTarget:null,co.value=$.value.stTypeOfPredefinedTarget?$.value.stTypeOfPredefinedTarget:"ABSOLUTE_POINTS",bo.value=!!$.value.setPredefinedSl,ys.value=bo.value?$.value.inPredefinedSl:null,ms.value=bo.value?!!$.value.isTrailingStoplossSet:!1,on.value=bo.value?$.value.inTrailingStoplossStep:1,nn.value=$.value.stTypeOfPredefinedSl?$.value.stTypeOfPredefinedSl:"ABSOLUTE_POINTS",$.value.selectedAsset!=null&&ct?.value?.Index?.length>1){if(ct?.value?.Index&&ct?.value?.Index?.length>0){for(let A of ct.value.Index)if(A.value==$.value.selectedAsset){lt.value=$.value.selectedAsset;break}}lt.value==null&&(lt.value=ct.value[2].value)}const m=Object.keys($.value.allAssetWiseSlAndTarget);Cs.value=m.length>0?$.value.allAssetWiseSlAndTarget:null}else lt.value=ct.value.length>1?ct.value[2].value:null}catch(m){console.log("error"),console.log(m)}}const fa=function(m,A,I){try{if(We.value=="OPTIONS"&&(lt.value==null||Rt.value==null||ti.value==null||oi.value==null)){t.toastMessage({color:"error",message:"Please select all options details."});return}if(We.value=="FUTURES"&&(lt.value==null||Rt.value==null)){t.toastMessage({color:"error",message:"Please select all futures details."});return}if(C.value=="LIMIT_ORDER")uu(m,A);else{let B=null,X=null;if(C.value=="LIMIT_AT_LTP"){if(We.value=="FUTURES"){let ci=he(Rt.value,"YYMMDD",!0).format("YYMMM").toUpperCase();B=`${lt.value}${ci}FUT`}else We.value=="OPTIONS"&&(A=="CALL"?B=`${lt.value}${Rt.value}${ti.value}CE`:B=`${lt.value}${Rt.value}${oi.value}PE`);if(X=Pt.value[B]?Number(Pt.value[B].inLtp):null,X==null||X==null)return t.toastMessage({color:"error",message:"LTP is not available. Please wait for LTP to be available."}),!1}const se=In(C.value);if(si.value%et.value!=0)return t.toastMessage({color:"error",message:"Invalid qty. Please enter qty in lot size multiple."}),!1;let Ie=0,Be=null,ke=null,Xe=null,Ot=We.value=="OPTIONS"?A=="CALL"?ti.value:oi.value:null,At=We.value=="OPTIONS"?A=="CALL"?"CALL":"PUT":null;if(We.value=="OPTIONS"||We.value=="FUTURES"){if(Be="FO",Tr.value=="QTY")Ie=Number((si.value/et.value).toFixed(0));else if(We.value=="OPTIONS")if(A=="CALL")if(Do.value&&Do.value>0)Ie=Do.value;else{t.toastMessage({color:"info",message:"Given fund is not sufficient to place the CALL order."});return}else if(an.value&&an.value>0)Ie=an.value;else{t.toastMessage({color:"info",message:"Given fund is not sufficient to place the PUT order."});return}else Ie=Number((si.value/et.value).toFixed(0));ke=he(Rt.value,"YYMMDD",!0).format("YYYY-MM-DD"),Xe=D.value}else Be="EQ",Ie=si.value,Xe=D.value=="MARGIN"?"CNC":"INTRADAY";const ii=[{stBuySellType:m,stSegment:Be,inQuantity:Ie,inStoploss:0,inTakeProfit:0,stExchange:wt.value,stValidity:"DAY",stProductType:Xe,stSubSegment:We.value,stSymbolName:lt.value,stExpiryDate:ke,inStrikePrice:Ot,stOptionType:At,stOrderType:se.stOrderType,inLimitPrice:se.stOrderType=="MARKET"?0:X,isMarketProtectionOrder:se.isMarketProtectionOrder,inMarketProtectionPercentage:se.stOrderType=="MARKET"?de.value:0}];va(ii,I)}}catch{}},lg=function(m,A,I){try{if(We.value=="FUTURES"||lt.value!=null&&Rt.value!=null&&ti.value!=null&&oi.value!=null)if(C.value=="LIMIT_ORDER")uu(m,A);else{let B=null,X=null;if(C.value=="LIMIT_AT_LTP"){if(We.value=="FUTURES"){let ke=he(Rt.value,"YYMMDD",!0).format("YYMMM").toUpperCase();B=`${lt.value}${ke}FUT`}else We.value=="OPTIONS"&&(A=="CALL"?B=`${lt.value}${Rt.value}${ti.value}CE`:B=`${lt.value}${Rt.value}${oi.value}PE`);if(X=Pt.value[B]?Number(Pt.value[B].inLtp):null,X==null||X==null)return t.toastMessage({color:"error",message:"LTP is not available. Please wait for LTP to be available."}),!1}const se=In(C.value);if(si.value%et.value!=0)return t.toastMessage({color:"error",message:"Invalid qty. Please enter qty in lot size multiple."}),!1;let Ie=Number((si.value/et.value).toFixed(0));const Be=[{stBuySellType:m,stSegment:"FO",inQuantity:Ie,inStoploss:0,inTakeProfit:0,stExchange:wt.value,stValidity:"DAY",stProductType:D.value,stSubSegment:We.value,stSymbolName:lt.value,stExpiryDate:he(Rt.value,"YYMMDD",!0).format("YYYY-MM-DD"),inStrikePrice:We.value=="OPTIONS"?A=="CALL"?ti.value:oi.value:null,stOptionType:We.value=="OPTIONS"?A=="CALL"?"CALL":"PUT":null,stOrderType:se.stOrderType,inLimitPrice:se.stOrderType=="MARKET"?0:X,isMarketProtectionOrder:se.isMarketProtectionOrder,inMarketProtectionPercentage:se.stOrderType=="MARKET"?de.value:0}];console.log("stOrders"),console.log(Be)}else t.toastMessage({color:"error",message:"Please select all options details."})}catch{}};function In(m){let A={stOrderType:null,isMarketProtectionOrder:null};switch(m){case"MARKET":A.stOrderType="MARKET",A.isMarketProtectionOrder=!1;break;case"MARKET_PROTECTION":A.stOrderType="MARKET",A.isMarketProtectionOrder=!0;break;case"LIMIT":case"LIMIT_AT_LTP":case"LIMIT_ORDER":A.stOrderType="LIMIT",A.isMarketProtectionOrder=!1;break}return A}const uu=(m,A)=>{try{if(We.value=="OPTIONS"&&(lt.value==null||Rt.value==null||ti.value==null||oi.value==null)){t.toastMessage({color:"error",message:"Please select all options details."});return}if(We.value=="FUTURES"&&(lt.value==null||Rt.value==null)){t.toastMessage({color:"error",message:"Please select all futures details."});return}let I=0,B=null,X=null,se=null,Ie=We.value=="OPTIONS"?A=="CALL"?ti.value:oi.value:null,Be=We.value=="OPTIONS"?A=="CALL"?"CALL":"PUT":null;if(We.value=="OPTIONS"||We.value=="FUTURES"?(B="FO",I=si.value,X=he(Rt.value,"YYMMDD",!0).format("YYYY-MM-DD"),se=D.value):(B="EQ",I=si.value,se=D.value=="MARGIN"?"CNC":"INTRADAY"),Z.value={},Z.value={stPreOrderId:ot.randomString(10),stSegment:B,stExchange:wt.value,stValidity:"DAY",stBuySellType:m,isSell:m=="SELL",inQuantity:I,stProductType:se,stSubSegment:We.value,stSymbolName:lt.value,stExpiryDate:X,inStrikePrice:Ie,stOptionType:Be,stOrderType:"LIMIT",inLimitPrice:null,inTriggerPrice:null,inStoploss:0,inTakeProfit:0,inMarketProtectionPercentage:de.value>0?de.value:5,inLotSize:et.value},Z.value.stSubSegment=="FUTURES"){let Xe=he(Z.value.stExpiryDate,"YYYY-MM-DD",!0).format("DD-MMM-YY").toUpperCase();Z.value.stFullSymbolName=`${Z.value.stSymbolName}-${Xe}-FUT`,Xe=he(Z.value.stExpiryDate,"YYYY-MM-DD",!0).format("YYMMM").toUpperCase(),Z.value.stSymbolForLiveLtp=`${Z.value.stSymbolName}${Xe}FUT`}else if(Z.value.stSubSegment=="OPTIONS"){let Xe=he(Z.value.stExpiryDate,"YYYY-MM-DD",!0).format("DD-MMM-YY").toUpperCase(),Ot=Z.value.stOptionType=="CALL"?"CE":"PE";Z.value.stFullSymbolName=`${Z.value.stSymbolName}-${Xe}-${Z.value.inStrikePrice}-${Ot}`,Xe=he(Z.value.stExpiryDate,"YYYY-MM-DD",!0).format("YYMMDD"),Ot=Z.value.stOptionType=="CALL"?"CE":"PE",Z.value.stSymbolForLiveLtp=`${Z.value.stSymbolName}${Xe}${Z.value.inStrikePrice}${Ot}`}else Z.value.stSubSegment=="EQUITY"&&(Z.value.stFullSymbolName=`${Z.value.stSymbolName}-${Z.value.stSegment}`,Z.value.stSymbolForLiveLtp=`${Z.value.stSymbolName}`);let ke={stSymbolName:Z.value.stSymbolForLiveLtp};yt.post(ht.orderApiUrl+"/symbol/getdpsymbollotsize",ke).then(Xe=>{Xe.data.status=="success"?(Z.value.inLotSize=Xe.data.data.inLotSize,Z.value.inTickSize=Xe.data.data.inTickSize):t.toastMessage({color:"error",message:Xe.data.msg})}).catch(Xe=>{console.log("err"),console.log(Xe)}).finally(()=>{}),cu()}catch(I){console.log("error"),console.log(I)}},ug=(m,A=!1)=>{try{const I=A?m.stSide=="BUY"?"SELL":"BUY":m.stSide;let B=m.symbolMetaData,X=B.stOptionsType,se=0,Ie=null,Be=null,ke=null,Xe=B.inStrikePrice,Ot=B.stSubSegment=="OPTIONS"?X=="CE"?"CALL":"PUT":null;if(B.stSubSegment=="OPTIONS"||B.stSubSegment=="FUTURES"?(Ie="FO",se=Math.abs(m.inNetQuantity),Be=B.stExpiryDate,ke=m.stProductType):(Ie="EQ",se=m.inQuantity,ke=m.stProductType=="MARGIN"?"CNC":"INTRADAY"),Z.value={},Z.value={stPreOrderId:ot.randomString(10),stSegment:Ie,stExchange:B.stExchange,stValidity:"DAY",isSell:I=="SELL",stBuySellType:I,inQuantity:se,stProductType:ke,stSubSegment:B.stSubSegment,stSymbolName:B.stAssetName,stExpiryDate:Be,inStrikePrice:Xe,stOptionType:Ot,stOrderType:"LIMIT",inLimitPrice:null,inTriggerPrice:null,inStoploss:0,inTakeProfit:0,inMarketProtectionPercentage:de.value>0?de.value:5,inLotSize:m.inLotSize},Z.value.stSubSegment=="FUTURES"){let At=he(Z.value.stExpiryDate,"YYYY-MM-DD",!0).format("DD-MMM-YY").toUpperCase();Z.value.stFullSymbolName=`${Z.value.stSymbolName}-${At}-FUT`,At=he(Z.value.stExpiryDate,"YYYY-MM-DD",!0).format("YYMMM").toUpperCase(),Z.value.stSymbolForLiveLtp=`${Z.value.stSymbolName}${At}FUT`}else if(Z.value.stSubSegment=="OPTIONS"){let At=he(Z.value.stExpiryDate,"YYYY-MM-DD",!0).format("DD-MMM-YY").toUpperCase(),ii=Z.value.stOptionType=="CALL"?"CE":"PE";Z.value.stFullSymbolName=`${Z.value.stSymbolName}-${At}-${Z.value.inStrikePrice}-${ii}`,At=he(Z.value.stExpiryDate,"YYYY-MM-DD",!0).format("YYMMDD"),ii=Z.value.stOptionType=="CALL"?"CE":"PE",Z.value.stSymbolForLiveLtp=`${Z.value.stSymbolName}${At}${Z.value.inStrikePrice}${ii}`}else Z.value.stSubSegment=="EQUITY"&&(Z.value.stFullSymbolName=`${Z.value.stSymbolName}-${Z.value.stSegment}`,Z.value.stSymbolForLiveLtp=`${Z.value.stSymbolName}`);cu()}catch(I){console.log("error"),console.log(I)}},cu=()=>{Se.value=!0},$d=(m=!1)=>{m?(Se.value=!1,Ro.value=null,Mn.value=!1):Ve.value||(Ve.value=!1,Se.value=!1)},cg=async m=>{try{let A=m.symbolMetaData;A.stSubSegment!="OPTIONS"&&t.toastMessage({color:"error",message:"Orders with options type can only change strike price"});let I=[];const B={stSelectedOptions:A?.stAssetName,stSelectedAvailableDate:he().format("YYYY-MM-DD"),stSelectedAvailableExpiryDate:he(A?.stExpiryDate,"YYYY-MM-DD",!0).format("YYMMDD"),stSelectedModeOfData:"live"};await yt.post("/one-click/getselectedoptionsstrikepricedata",B).then(Mt=>{Array.isArray(Mt.data.data)&&Mt.data.data.forEach(ri=>{I.push(ri.value)})}).catch(Mt=>{console.log("err :>> ",Mt)});let X=null;const se=[A.stSymbolName];await yt.post(ht.orderApiUrl+"/symbol/getsymbolltpdetails",{arSymbolNames:se}).then(Mt=>{if(Mt.data.status=="success"){const ni=Mt.data.data;for(let ri=0;ri<se.length;ri++){const Mi=se[ri];X=ni?.[Mi]?.inLtp?ni[Mi].inLtp:null}}}).catch(Mt=>{console.log("err"),console.log(Mt)});const Ie=m.stSide=="BUY"?"SELL":"BUY";let Be=A.stOptionsType,ke=0,Xe=null,Ot=null,At=null,ii=A.inStrikePrice,ci=A.stSubSegment=="OPTIONS"?Be=="CE"?"CALL":"PUT":null;if(A.stSubSegment=="OPTIONS"||A.stSubSegment=="FUTURES"?(Xe="FO",ke=Math.abs(m.inNetQuantity),Ot=A.stExpiryDate,At=m.stProductType):(Xe="EQ",ke=m.inQuantity,At=m.stProductType=="MARGIN"?"CNC":"INTRADAY"),ze.value={},ze.value={stPreOrderId:ot.randomString(10),stSegment:Xe,stExchange:A.stExchange,stValidity:"DAY",isSell:m.stSide=="SELL",stBuySellType:m.stSide,inQuantity:ke,stProductType:At,stSubSegment:A.stSubSegment,stSymbolName:A.stAssetName,stExpiryDate:Ot,inStrikePrice:ii,stOptionType:ci,stOrderType:"LIMIT",inLimitPrice:X,inTriggerPrice:null,inStoploss:0,inTakeProfit:0,inMarketProtectionPercentage:de.value>0?de.value:5,inLotSize:m.inLotSize,availableStrikePrices:I},ze.value.stSubSegment=="FUTURES"){let Mt=he(ze.value.stExpiryDate,"YYYY-MM-DD",!0).format("DD-MMM-YY").toUpperCase();ze.value.stFullSymbolName=`${ze.value.stSymbolName}-${Mt}-FUT`,Mt=he(ze.value.stExpiryDate,"YYYY-MM-DD",!0).format("YYMMM").toUpperCase(),ze.value.stSymbolForLiveLtp=`${ze.value.stSymbolName}${Mt}FUT`}else if(ze.value.stSubSegment=="OPTIONS"){let Mt=he(ze.value.stExpiryDate,"YYYY-MM-DD",!0).format("DD-MMM-YY").toUpperCase(),ni=ze.value.stOptionType=="CALL"?"CE":"PE";ze.value.stFullSymbolName=`${ze.value.stSymbolName}-${Mt}-${ze.value.inStrikePrice}-${ni}`,Mt=he(ze.value.stExpiryDate,"YYYY-MM-DD",!0).format("YYMMDD"),ni=ze.value.stOptionType=="CALL"?"CE":"PE",ze.value.stSymbolForLiveLtp=`${ze.value.stSymbolName}${Mt}${ze.value.inStrikePrice}${ni}`}else ze.value.stSubSegment=="EQUITY"&&(ze.value.stFullSymbolName=`${ze.value.stSymbolName}-${ze.value.stSegment}`,ze.value.stSymbolForLiveLtp=`${ze.value.stSymbolName}`);ze.value.exitOrder=ot.deepCopy(ze.value),ze.value.exitOrder.stPreOrderId=ot.randomString(10),ze.value.exitOrder.isSell=Ie=="SELL",ze.value.exitOrder.stBuySellType=Ie,ze.value.exitOrder.stOrderType="MARKET",ze.value.exitOrder.inLimitPrice=null,ip()}catch(A){console.log("error"),console.log(A)}},dg=async m=>{try{let A={},I=m.symbolMetaData;I.stSubSegment!="OPTIONS"&&t.toastMessage({color:"error",message:"Orders with options type can only change convert options type"});const B=await ep(I?.stAssetName);if(!B){t.toastMessage({color:"error",message:"ATM Strike not found."});return}let X=[],se=null,Ie=null,Be=null;const ke={stSelectedOptions:I?.stAssetName,stSelectedAvailableDate:he().format("YYYY-MM-DD"),stSelectedAvailableExpiryDate:he(I?.stExpiryDate,"YYYY-MM-DD",!0).format("YYMMDD"),stSelectedModeOfData:"live"};if(await yt.post("/one-click/getselectedoptionsstrikepricedata",ke).then(Xe=>{Array.isArray(Xe.data.data)&&Xe.data.data.forEach((At,ii)=>{X.push(At.value),I?.inStrikePrice==At.value&&(se=ii),B?.inAtmStrikePrice==At.value&&(Ie=ii)})}).catch(Xe=>{console.log("err :>> ",Xe)}),se&&Ie){const Xe=m.stSide=="BUY"?"SELL":"BUY";let Ot=I.stOptionsType,At=0,ii=null,ci=null,Mt=null,ni=I.inStrikePrice,ri=I.stSubSegment=="OPTIONS"?Ot=="CE"?"CALL":"PUT":null,Mi=ri=="CALL"?"PUT":"CALL";Mi=="CALL"?(Be=Ie-(se-Ie),Be<0&&(Be=0)):Mi=="PUT"&&(Be=Ie+(Ie-se),Be>X.length&&(Be=X.length)),(I.stSubSegment=="OPTIONS"||I.stSubSegment=="FUTURES")&&(ii="FO",At=Math.abs(m.inNetQuantity),ci=I.stExpiryDate,Mt=m.stProductType),A={},A={stPreOrderId:ot.randomString(10),stSegment:ii,stExchange:I.stExchange,stValidity:"DAY",isSell:m.stSide=="SELL",stBuySellType:m.stSide,inQuantity:At,stProductType:Mt,stSubSegment:I.stSubSegment,stSymbolName:I.stAssetName,stExpiryDate:ci,inStrikePrice:X[Be],stOptionType:Mi,stOrderType:"MARKET",inLimitPrice:null,inTriggerPrice:null,inStoploss:0,inTakeProfit:0,inMarketProtectionPercentage:de.value>0?de.value:5,inLotSize:m.inLotSize,availableStrikePrices:X},A.exitOrder=ot.deepCopy(A),A.exitOrder.stPreOrderId=ot.randomString(10),A.exitOrder.isSell=Xe=="SELL",A.exitOrder.stBuySellType=Xe,A.exitOrder.stOrderType="MARKET",A.exitOrder.inLimitPrice=null,A.exitOrder.inStrikePrice=ni,A.exitOrder.stOptionType=ri,tp(A,"CONVERT_OPTIONS_TYPE_AT_SAME_DISTANCE")}else t.toastMessage({color:"error",message:"Cannot find current strike or atm stike."})}catch(A){console.log("error"),console.log(A)}};async function ep(m){return yt.post("/strategy-builder/getassetdetailsforstrategybuilder",{stAssetName:m}).then(I=>(I.data.status="success")?I.data.data:null).catch(I=>(console.log("err :>> ",I),null))}async function tp(m,A=null){try{ha(m.exitOrder,A),setTimeout(()=>{ha(m,A)},1e3)}catch(I){console.log("error"),console.log(I)}}const pg=(m,A)=>{let I=null,B=ot.deepCopy(ze.value.availableStrikePrices);if(m&&(I=m.target.value,I.toString().includes("e")&&(I=B[0]),I=Number(I)),I==0&&(I=B[0]),B.indexOf(I)==-1){let X=null,se=0;for(let Ie=0;Ie<B.length;Ie++){const Be=B[Ie];let ke=Math.abs(Be-ze.value.inStrikePrice);X==null&&(X=ke),X>ke&&(X=ke,se=Ie)}I=B[se]}if(A=="increment"){let X=B.indexOf(ze.value.inStrikePrice);X==B.length-1?I=ze.value.inStrikePrice:I=B[X+1]}else if(A=="decrement"){let X=B.indexOf(ze.value.inStrikePrice);X==0?I=ze.value.inStrikePrice:I=B[X-1]}ze.value.inStrikePrice=I},ip=()=>{ge.value=!0},rp=(m=!1)=>{m?ge.value=!1:Ve.value||(Ve.value=!1,ge.value=!1)},fg=()=>{le.value=!0},hg=()=>{le.value=!1};function vg(){Z.value.inLimitPrice=Z.value.stOrderType=="LIMIT"?Number(Z.value.inLimitPrice):null}function gg(){Z.value.inQuantity=ot.calculateLotSize(Z.value.inQuantity,ht.maxLots,et.value)}function du(m){Z.value.inQuantity=ot.incrementDecrementLotSize(Z.value.inQuantity,ht.maxLots,Z.value.inLotSize,m)}const yg=()=>{Z.value.inQuantity=ot.calculateLotSize(Z.value.inQuantity,ht.maxEquityQuantity,1)},mg=m=>{Z.value.inQuantity=ot.incrementDecrementLotSize(Z.value.inQuantity,ht.maxEquityQuantity,1,m)};function Cg(){ze.value.inLimitPrice=ze.value.stOrderType=="LIMIT"?Number(ze.value.inLimitPrice):null}function Sg(){ze.value.inQuantity=ot.calculateLotSize(ze.value.inQuantity,ht.maxLots,et.value)}function wg(m){ze.value.inQuantity=ot.incrementDecrementLotSize(ze.value.inQuantity,ht.maxLots,ze.value.inLotSize,m)}const Tg=()=>{ze.value.inQuantity=ot.calculateLotSize(ze.value.inQuantity,ht.maxEquityQuantity,1)},Og=m=>{ze.value.inQuantity=ot.incrementDecrementLotSize(ze.value.inQuantity,ht.maxEquityQuantity,1,m)};async function Pg(m=null){try{ha(ze.value.exitOrder,m),setTimeout(()=>{ha(ze.value,m)},1e3)}catch(A){console.log("error"),console.log(A)}}function ha(m,A=null){try{if(!isNaN(m.inQuantity)&&m.inQuantity>0){let I=ht.maxLots*et.value;if(m.stSubSegment=="EQUITY"&&(I=ht.maxEquityQuantity),m.inQuantity<=I){if(m.stOrderType=="LIMIT"&&!isNaN(m.inLimitPrice)&&Number(m.inLimitPrice)<=0&&!m.inLimitPrice)return t.toastMessage({color:"error",message:"Please enter valid limit price."}),!1;if(m.stOrderType=="SL-L"||m.stOrderType=="SL-M"){if(!isNaN(m.inTriggerPrice)&&Number(m.inTriggerPrice)<=0&&!m.inTriggerPrice)return t.toastMessage({color:"error",message:"Please enter valid trigger price."}),!1;if(m.stOrderType=="SL-L"){if(m.stBuySellType=="BUY"){if(m.inLimitPrice<=m.inTriggerPrice)return t.toastMessage({color:"error",message:"Order price should be more than trigger price."}),!1}else if(m.stBuySellType=="SELL"&&m.inLimitPrice>=m.inTriggerPrice)return t.toastMessage({color:"error",message:"Order price should be less than trigger price."}),!1}}if(m.inQuantity%m.inLotSize!=0)return t.toastMessage({color:"error",message:"Invalid qty. Please enter qty in lot size multiple."}),!1;const B=Number((m.inQuantity/m.inLotSize).toFixed(0));let X={stValidity:"DAY",stSegment:m.stSegment,stExchange:wt.value,stBuySellType:m.stBuySellType,inQuantity:B,stProductType:m.stProductType,stSubSegment:m.stSubSegment,stSymbolName:m.stSymbolName,stExpiryDate:m.stExpiryDate,inStrikePrice:m.inStrikePrice,stOptionType:m.stOptionType,stOrderType:m.stOrderType,inLimitPrice:0,inTriggerPrice:0,inStoploss:0,inTakeProfit:0,isMarketProtectionOrder:!1,inMarketProtectionPercentage:0};switch(m.stOrderType){case"LIMIT":X.inLimitPrice=Number(m.inLimitPrice),X.inTriggerPrice=0;break;case"MARKET":X.inLimitPrice=0,X.inTriggerPrice=0;break;case"MARKET_PROTECTION":X.stOrderType="MARKET",X.isMarketProtectionOrder=!0,X.inMarketProtectionPercentage=orderketProtectionPercentage>0?orderketProtectionPercentage:5,X.inLimitPrice=0,X.inTriggerPrice=0;break;case"SL-L":X.inLimitPrice=Number(m.inLimitPrice),X.inTriggerPrice=Number(m.inTriggerPrice);break;case"SL-M":X.inLimitPrice=0,X.inTriggerPrice=Number(m.inTriggerPrice);break;default:break}va([X],A),rp()}else return t.toastMessage({color:"error",message:`Maximum allowed lot quantity is ${I}.`}),!1}else return t.toastMessage({color:"error",message:"Please enter valid quantity."}),!1}catch(I){console.log("error"),console.log(I)}}function Eg(m=null){try{if(!isNaN(Z.value.inQuantity)&&Z.value.inQuantity>0){let A=ht.maxLots*et.value;if(Z.value.stSubSegment=="EQUITY"&&(A=ht.maxEquityQuantity),Z.value.inQuantity<=A){if(Z.value.stOrderType=="LIMIT"&&!isNaN(Z.value.inLimitPrice)&&Number(Z.value.inLimitPrice)<=0&&!Z.value.inLimitPrice)return t.toastMessage({color:"error",message:"Please enter valid limit price."}),!1;if(Z.value.stOrderType=="SL-L"||Z.value.stOrderType=="SL-M"){if(!isNaN(Z.value.inTriggerPrice)&&Number(Z.value.inTriggerPrice)<=0&&!Z.value.inTriggerPrice)return t.toastMessage({color:"error",message:"Please enter valid trigger price."}),!1;if(Z.value.stOrderType=="SL-L"){if(Z.value.stBuySellType=="BUY"){if(Z.value.inLimitPrice<=Z.value.inTriggerPrice)return t.toastMessage({color:"error",message:"Order price should be more than trigger price."}),!1}else if(Z.value.stBuySellType=="SELL"&&Z.value.inLimitPrice>=Z.value.inTriggerPrice)return t.toastMessage({color:"error",message:"Order price should be less than trigger price."}),!1}}if(Z.value.inQuantity%Z.value.inLotSize!=0)return t.toastMessage({color:"error",message:"Invalid qty. Please enter qty in lot size multiple."}),!1;const I=Number((Z.value.inQuantity/Z.value.inLotSize).toFixed(0));let B={stValidity:"DAY",stSegment:Z.value.stSegment,stExchange:wt.value,stBuySellType:Z.value.stBuySellType,inQuantity:I,stProductType:Z.value.stProductType,stSubSegment:Z.value.stSubSegment,stSymbolName:Z.value.stSymbolName,stExpiryDate:Z.value.stExpiryDate,inStrikePrice:Z.value.inStrikePrice,stOptionType:Z.value.stOptionType,stOrderType:Z.value.stOrderType,inLimitPrice:0,inTriggerPrice:0,inStoploss:0,inTakeProfit:0,isMarketProtectionOrder:!1,inMarketProtectionPercentage:0,isAmo:!!Z.value.isAmo};switch(Z.value.stOrderType){case"LIMIT":B.inLimitPrice=Number(Z.value.inLimitPrice),B.inTriggerPrice=0;break;case"MARKET":B.inLimitPrice=0,B.inTriggerPrice=0;break;case"MARKET_PROTECTION":B.stOrderType="MARKET",B.isMarketProtectionOrder=!0,B.inMarketProtectionPercentage=Z.inMarketProtectionPercentage>0?Z.inMarketProtectionPercentage:5,B.inLimitPrice=0,B.inTriggerPrice=0;break;case"SL-L":B.inLimitPrice=Number(Z.value.inLimitPrice),B.inTriggerPrice=Number(Z.value.inTriggerPrice);break;case"SL-M":B.inLimitPrice=0,B.inTriggerPrice=Number(Z.value.inTriggerPrice);break;default:break}va([B],m),$d()}else return t.toastMessage({color:"error",message:`Maximum allowed lot quantity is ${A}.`}),!1}else return t.toastMessage({color:"error",message:"Please enter valid quantity."}),!1}catch(A){console.log("error"),console.log(A)}}const va=function(m,A=null){if(Ae.value){const I={stKey:Ae.value,stTradingWindowId:e,stAction:A,stOrders:m};qe.value=!0,t.placeOrderApi(I).then(B=>{if(B.status=="success"){let X=null;B.data[0]?X=B.data[0].msg:B.data.buy&&B.data.buy[0]?X=B.data.buy[0].msg:B.data.sell&&B.data.sell[0]&&(X=B.data.sell[0].msg),ho(X)}else t.toastMessage({color:B.status,message:B.msg})}).catch(B=>{console.log("error"),console.log(B)}).finally(()=>{qe.value=!1,ga()})}else t.toastMessage({color:"error",message:"Please select broker first."})};function pu(m){if(!gi.value&&He.value&&!da.value){if(!m.repeat)switch(m.keyCode){case 37:fa("SELL","CALL","SELL_CALL_SK_BUTTON_ORDER");break;case 38:fa("BUY","CALL","BUY_CALL_SK_BUTTON_ORDER");break;case 39:We.value=="OPTIONS"&&fa("SELL","PUT","SELL_PUT_SK_BUTTON_ORDER");break;case 40:We.value=="OPTIONS"&&fa("BUY","PUT","BUY_PUT_SK_BUTTON_ORDER");break;case 117:up("ONE_CLICK_CLOSE_ALL_POSITIONS");break;case 118:lp("ONE_CLICK_CANCEL_ALL_ORDERS");break;case 119:vo();break}m.preventDefault()}}function Ds(m,A){m==null||m==null?gi.value=A:(m.type=="focus"||m.type=="blur")&&(gi.value=A,m.preventDefault())}function _g(m,A){if(We.value=="FUTURES"&&Rt.value!=null||lt.value!=null&&Rt.value!=null&&ti.value!=null&&oi.value!=null||We.value=="EQUITY"){let I=null,B=lt.value,X=Rt.value,se=null,Ie=[];if(We.value=="OPTIONS"){let Mt=A=="CALL"?ti.value:oi.value,ni=A=="CALL"?"CE":"PE";I=`${B}${X}${Mt}${ni}`;for(let ri=0;ri<zt.value.length;ri++){const Mi=zt.value[ri];Mi.value&&Ie.push(Mi.value)}}else We.value=="FUTURES"&&(X=he(Rt.value,"YYMMDD",!0).format("YYMMM").toUpperCase(),I=`${B}${X}FUT`);se=I?Pt.value[I].inLtp:null;let Be=[];for(let Mt=0;Mt<Bt.value.length;Mt++){const ni=Bt.value[Mt];if(ni.value){const ri=he(ni.value,"YYMMDD",!0);Be.push({text:ri.format("DD MMM"),value:ri.format("YYYY-MM-DD")})}}const ke=In(C.value);let Xe=Number(si.value),Ot=null,At=null,ii=We.value=="OPTIONS"?A=="CALL"?ti.value:oi.value:null,ci=We.value=="OPTIONS"?A=="CALL"?"CALL":"PUT":null;We.value=="OPTIONS"||We.value=="FUTURES"?(Ot="FO",Xe=si.value,X=he(Rt.value,"YYMMDD",!0).format("YYYY-MM-DD"),At=D.value):(Ot="EQ",Xe=si.value,At=D.value=="MARGIN"?"CNC":"INTRADAY"),me.value.push({stSubscribeSymbolName:I,stPreOrderId:ot.randomString(10),stSegment:Ot,stExchange:wt.value,stValidity:"DAY",stBuySellType:m,inQuantity:Xe,stProductType:At,stSubSegment:We.value,stSymbolName:lt.value,stExpiryDate:X,inStrikePrice:ii,stOptionType:ci,stOrderType:ke.stOrderType,inLimitPrice:se,inStoploss:0,inTakeProfit:0,inLtp:se,isMarketProtectionOrder:ke.isMarketProtectionOrder,inMarketProtectionPercentage:ke.stOrderType=="MARKET"?de.value:0,inLotSize:et.value,availableExpiryDate:Be,availableStrikePrices:Ie,isSelected:!1})}else ho("Please select all options details.")}async function bg(m,A,I){try{let B=[],X=[],se=[],Ie=[];for(let Be=0;Be<Bt.value.length;Be++){const ke=Bt.value[Be];if(ke.value){const Xe=he(ke.value,"YYMMDD",!0);se.push({text:Xe.format("DD MMM"),value:Xe.format("YYYY-MM-DD")})}}for(let Be=0;Be<m.length;Be++){const ke=m[Be];let Xe=null,Ot=lt.value,At=ke.stExpiryDate,ii=null,ci=null;if(ke.stSegment=="OPTIONS"){let yo=ke.inStrikePrice,xs=ke.stOptionsType;Xe=`${Ot}${At}${yo}${xs}`;for(let vu=0;vu<zt.value.length;vu++){const Cp=zt.value[vu];Cp.value&&Ie.push(Cp.value)}}else ke.stSegment=="FUTURES"&&(At=he(At,"YYMMDD",!0).format("YYMMM").toUpperCase(),Xe=`${Ot}${At}FUT`);for(let yo=0;yo<Bt.value.length;yo++){const xs=Bt.value[yo];xs.value==At&&(ci=xs.inLotSize)}const Mt=In(A);let ni=Number(ke.inQty*ci);X.push(Xe);let ri=null,Mi=null,go=We.value=="OPTIONS"?ke.inStrikePrice:null,hu=We.value=="OPTIONS"?ke.stOptionsType=="CALL"||ke.stOptionsType=="CE"?"CALL":"PUT":null;We.value=="OPTIONS"||We.value=="FUTURES"?(ri="FO",ni=ke.inQty*ci,At=he(ke.stExpiryDate,"YYMMDD",!0).format("YYYY-MM-DD"),Mi=D.value):(ri="EQ",ni=ke.inQty*ci,Mi=D.value=="MARGIN"?"CNC":"INTRADAY"),B.push({stSubscribeSymbolName:Xe,stPreOrderId:ot.randomString(10),stSegment:ri,stExchange:wt.value,stValidity:"DAY",stBuySellType:ke.stTransactionType,inQuantity:ni,stProductType:Mi,stSubSegment:ke.stSegment,stSymbolName:lt.value,stExpiryDate:At,inStrikePrice:go,stOptionType:hu,stOrderType:Mt.stOrderType,inLimitPrice:ii,inStoploss:0,inTakeProfit:0,inLtp:ii,isMarketProtectionOrder:Mt.isMarketProtectionOrder,inMarketProtectionPercentage:Mt.stOrderType=="MARKET"?I:0,inLotSize:ci,availableExpiryDate:se,availableStrikePrices:Ie,isSelected:!1})}X.length>0&&await yt.post(ht.orderApiUrl+"/symbol/getsymbolltpdetails",{arSymbolNames:X}).then(Be=>{if(Be.data.status=="success"){const ke=Be.data.data;for(let Xe=0;Xe<B.length;Xe++){const Ot=B[Xe];B[Xe].inLtp=ke?.[Ot?.stSubscribeSymbolName]?.inLtp?ke?.[Ot?.stSubscribeSymbolName].inLtp:null,B[Xe].inLimitPrice=B[Xe].inLtp}}}).catch(Be=>{console.log("err"),console.log(Be)}),me.value=B}catch(B){console.log("error"),console.log(B)}}function Dg(m,A,I){for(let B=0;B<me.value.length;B++)me.value[B].stPreOrderId==m&&(A?(me.value[B].inQuantity+=Number(I),me.value[B].inQuantity>ht.maxLots&&(me.value[B].inQuantity=ht.maxLots)):Number(me.value[B].inQuantity)>1&&(me.value[B].inQuantity-=Number(I)))}function Rg(m,A){for(let I=0;I<me.value.length;I++)me.value[I].stPreOrderId==m&&A&&(me.value[I].inQuantity=Number(A))}function xg(m,A){for(let I=0;I<me.value.length;I++)if(me.value[I].stPreOrderId==m)switch(A){case"MARKET":me.value[I].stOrderType="MARKET",me.value[I].isMarketProtectionOrder=!1;break;case"LIMIT":me.value[I].stOrderType="LIMIT",me.value[I].isMarketProtectionOrder=!1;break;case"MARKET_PROTECTION":me.value[I].stOrderType="MARKET",me.value[I].isMarketProtectionOrder=!0,me.value[I].inMarketProtectionPercentage=de.value;break}}function Ag(m,A){for(let I=0;I<me.value.length;I++)me.value[I].stPreOrderId==m&&(me.value[I].stOrderType="MARKET",me.value[I].isMarketProtectionOrder=!0,me.value[I].inMarketProtectionPercentage=A)}function Lg(m,A){for(let I=0;I<me.value.length;I++)me.value[I].stPreOrderId==m&&A&&(me.value[I].inLimitPrice=Number(A))}function Mg(m,A){for(let I=0;I<me.value.length;I++)me.value[I].stPreOrderId==m&&(me.value[I].isSelected=A)}function Ng(m,A){for(let I=0;I<me.value.length;I++)me.value[I].stPreOrderId==m&&A&&(me.value[I].stProductType=A)}async function Fg(m,A){for(let I=0;I<me.value.length;I++)if(me.value[I].stPreOrderId==m&&A){const B=me.value[I];let X=null,se=B.stSymbolName,Ie=he(B.stExpiryDate,"YYYY-MM-DD",!0).format("YYMMDD");if(B.stSubSegment=="OPTIONS"){let ke=B.inStrikePrice,Xe=A=="CALL"?"CE":"PE";X=`${se}${Ie}${ke}${Xe}`}else B.stSubSegment=="FUTURES"&&(Ie=he(Ie,"YYMMDD",!0).format("YYMMM").toUpperCase(),X=`${se}${Ie}FUT`);me.value[I].stOptionType=A,me.value[I].stSubscribeSymbolName=X;const Be=[X];await yt.post(ht.orderApiUrl+"/symbol/getsymbolltpdetails",{arSymbolNames:Be}).then(ke=>{if(ke.data.status=="success"){const Xe=ke.data.data;for(let Ot=0;Ot<Be.length;Ot++){const At=Be[Ot];me.value[I].inLtp=Xe?.[At]?.inLtp?Xe[At].inLtp:null,me.value[I].inLimitPrice=me.value[I].inLtp}}}).catch(ke=>{console.log("err"),console.log(ke)})}}async function Ig(m,A){for(let I=0;I<me.value.length;I++)if(me.value[I].stPreOrderId==m&&A){let B=[];const X=me.value[I];X.stExpiryDate=A;let se=null,Ie=X.stSymbolName,Be=he(X.stExpiryDate,"YYYY-MM-DD",!0).format("YYMMDD"),ke=et.value,Xe=me.value[I].inQuantity,Ot=me.value[I].inLotSize;for(let ii=0;ii<Bt.value.length;ii++){const ci=Bt.value[ii];ci.value==Be&&(ke=ci.inLotSize)}if(ke!=Ot&&(Xe=ke),X.stSubSegment=="OPTIONS"){let ii={stSelectedOptions:X.stSymbolName,stSelectedAvailableDate:_i.value,stSelectedAvailableExpiryDate:Be,stSelectedModeOfData:we.value};if(await yt.post("/one-click/getselectedoptionsstrikepricedata",ii).then(ri=>{if(ri.data.status=="success")for(let Mi=0;Mi<ri.data.data.length;Mi++){const go=ri.data.data[Mi];go.value&&B.push(go.value)}}).catch(ri=>{console.log("error :>> ",ri)}),B.indexOf(X.inStrikePrice)==-1){let ri=null,Mi=0;for(let go=0;go<B.length;go++){const hu=B[go];let yo=Math.abs(hu-X.inStrikePrice);ri==null&&(ri=yo),ri>yo&&(ri=yo,Mi=go)}X.inStrikePrice=B[Mi]}let Mt=X.inStrikePrice,ni=X.stOptionType=="CALL"?"CE":"PE";se=`${Ie}${Be}${Mt}${ni}`}else X.stSubSegment=="FUTURES"&&(Be=he(Be,"YYMMDD",!0).format("YYMMM").toUpperCase(),se=`${Ie}${Be}FUT`);me.value[I].stExpiryDate=A,me.value[I].availableStrikePrices=B,me.value[I].stSubscribeSymbolName=se,me.value[I].inLotSize=ke,me.value[I].inQuantity=Xe;const At=[se];await yt.post(ht.orderApiUrl+"/symbol/getsymbolltpdetails",{arSymbolNames:At}).then(ii=>{if(ii.data.status=="success"){const ci=ii.data.data;for(let Mt=0;Mt<At.length;Mt++){const ni=At[Mt];me.value[I].inLtp=ci?.[ni]?.inLtp?ci[ni].inLtp:null,me.value[I].inLimitPrice=me.value[I].inLtp}}}).catch(ii=>{console.log("err"),console.log(ii)})}}async function kg(m,A){for(let I=0;I<me.value.length;I++)if(me.value[I].stPreOrderId==m&&A){const B=me.value[I];B.inStrikePrice=A;let X=null,se=B.stSymbolName,Ie=he(B.stExpiryDate,"YYYY-MM-DD",!0).format("YYMMDD");if(B.stSubSegment=="OPTIONS"){let ke=B.inStrikePrice,Xe=B.stOptionType=="CALL"?"CE":"PE";X=`${se}${Ie}${ke}${Xe}`}else B.stSubSegment=="FUTURES"&&(Ie=he(Ie,"YYMMDD",!0).format("YYMMM").toUpperCase(),X=`${se}${Ie}FUT`);me.value[I].inStrikePrice=A,me.value[I].stSubscribeSymbolName=X;const Be=[X];await yt.post(ht.orderApiUrl+"/symbol/getsymbolltpdetails",{arSymbolNames:Be}).then(ke=>{if(ke.data.status=="success"){const Xe=ke.data.data;for(let Ot=0;Ot<Be.length;Ot++){const At=Be[Ot];me.value[I].inLtp=Xe?.[At]?.inLtp?Xe[At].inLtp:null,me.value[I].inLimitPrice=me.value[I].inLtp}}}).catch(ke=>{console.log("err"),console.log(ke)})}}function Gg(m,A){for(let I=0;I<me.value.length;I++)me.value[I].stPreOrderId==m&&(isNaN(A)||(me.value[I].inMarketProtectionPercentage=Number(A)))}function Vg(m,A){for(let I=0;I<me.value.length;I++)me.value[I].stPreOrderId==m&&(me.value[I].stBuySellType=A)}function Bg(m){try{me.value=[...m]}catch(A){console.log("error"),console.log(A)}}function Hg(m){for(let A=0;A<me.value.length;A++)me.value[A].stPreOrderId==m&&me.value.splice(A,1)}function Wg(m=!0){let A=JSON.parse(JSON.stringify([...me.value])),I=[];if(!m)for(let B=0;B<A.length;B++)A[B].isSelected||I.push(A[B]);me.value=I}async function Ug(m,A=!0){try{if(me.value.length>0){let I=JSON.parse(JSON.stringify([...me.value])),B=[];for(let X=0;X<I.length;X++){const se=I[X];se.inQuantity=se.inQuantity/se.inLotSize,se?.availableExpiryDate&&delete se.availableExpiryDate,se?.availableStrikePrices&&delete se.availableStrikePrices,(A||se.isSelected)&&B.push(se)}if(I=B,I.length==0&&t.toastMessage({color:"error",message:"Please select atleast 1 order(s) to place."}),m.inTranches!=null){Vt.value={};for(let X=0;X<I.length;X++){let se=0;for(;I[X].inQuantity!=0;){Vt.value[se]==null&&(Vt.value[se]={status:"pending",orders:[]});let Ie=0;I[X].inQuantity>m.inTranches?(Ie=m.inTranches,I[X].inQuantity=I[X].inQuantity-m.inTranches):(Ie=I[X].inQuantity,I[X].inQuantity=0),I[X].stBuySellType=="BUY"?Vt.value[se].orders.unshift({...I[X],inQuantity:Ie}):Vt.value[se].orders.push({...I[X],inQuantity:Ie}),se++}}Vt.value=Object.values(Vt.value),Ui.value=0,ap();for(let X=0;X<Vt.value.length;X++){const se=await op(Vt.value[X].orders);Vt.value[X].status=se.status,Ui.value=Math.floor((X+1)/Vt.value.length*100),X-1!=Vt.value.length&&await np(1050)}Ui.value=100}else{let X=[],se=[];for(let Be=0;Be<I.length;Be++)I[Be].stBuySellType=="BUY"?X.push(I[Be]):se.push(I[Be]);const Ie=[...X,...se];va(Ie,m.doClearBasket?"BASKET_PLACE_ALL_ORDER_AND_CLEAR_ALL_ORDER":"BASKET_PLACE_ALL_ORDER"),X=[],se=[]}m.doClearBasket&&(me.value=[])}else t.toastMessage({color:"error",message:"Please add atleast 1 order(s) to basket."})}catch(I){console.log("error"),console.log(I)}}async function op(m){let A={status:"error",msg:"Something went wrong."};try{if(Ae.value){const I={stKey:Ae.value,stTradingWindowId:e,stAction:"PLACE_ASYNC_ORDER",stOrders:m};A=await t.placeOrderApi(I).then(B=>B.status=="success"?{status:"success",msg:"Order(s) placed successfully.",data:B.data}:{status:"error",msg:B.msg?B.msg:"Problem in placing order."}).catch(B=>{console.log("error"),console.log(B)}).finally(()=>{ga()})}else t.toastMessage({color:"error",message:"Please select broker first."})}catch(I){console.log("error"),console.log(I)}finally{return A}}function ga(){try{const m=ru();Fn.value=setTimeout(()=>{vo()},m)}catch(m){console.log("error"),console.log(m)}}function jg(m){let A=0;for(let I=0;I<m.length;I++)m[I].status=="success"&&A++;return A}function np(m){return new Promise(A=>setTimeout(A,m))}function ap(){ie.value=!0}function zg(){ie.value=!1}const ho=m=>{clearTimeout(H.value),Ne.value=m,H.value=setTimeout(()=>{Ne.value="-"},5e3)},sp=(m,A)=>{m=="refreshData"&&(ee.value=A,vo())},Yg=m=>{Y.value=m},lp=async(m,A=!1,I=null)=>{let B=[];xe.value=!0,A?await cn():fe.value!=null?(clearTimeout(fe.value),fe.value=null,fe.value=setTimeout(()=>{fe.value=null},6e4),await cn()):ee.value!="orderBook"?await cn():(F.value.length==0&&await cn(),fe.value=setTimeout(()=>{fe.value=null},6e4)),B=F.value;let X=[];if(B.forEach(se=>{if(se.stBrokerStatus=="pending"){let Ie=null;I!=null?se.stSymbolName==I&&(Ie={stExchange:se.stExchange,stOrderId:se.stOrderId,stSymbolName:se.stSymbolName,stExtra:se.stExtra?se.stExtra:{}},X.push(Ie)):(Ie={stExchange:se.stExchange,stOrderId:se.stOrderId,stSymbolName:se.stSymbolName,stExtra:se.stExtra?se.stExtra:{}},X.push(Ie))}}),X.length>0){const se={stKey:Ae.value,stTradingWindowId:e,stAction:m,stOrders:X};t.cancelOrderApi(se).then(Ie=>{xe.value=!1,ee.value=="orderBook"?ga():cn(),Ie.status=="success"?Ie?.data&&Ie.data?.["0"]?.msg&&ho(Ie.data?.["0"]?.msg):ho(Ie.msg)}).catch(Ie=>{xe.value=!1,console.log("err :>> ",Ie)})}else xe.value=!1,t.toastMessage({color:"error",message:"No pending order found."})},up=async(m,A,I=!1)=>{try{let B=[];q.value=!0,Y.value.length?(Ct.value=!Ct.value,await dr(),B=Y.value):(Pe.value!=null?(clearTimeout(Pe.value),Pe.value=null,Pe.value=setTimeout(()=>{Pe.value=null},6e4),await ya()):(U.value.length==0&&await ya(),Pe.value=setTimeout(()=>{Pe.value=null},6e4)),B=U.value);let X=[];if(B.forEach(se=>{if(se&&!isNaN(se.inNetQuantity)&&se.inNetQuantity!=0){const Ie=Math.abs(se.inNetQuantity);X.push({stExchange:se.stExchange,stValidity:"DAY",stProductType:se.stProductType,stSymbolName:se.stSymbolName,stBrokerSymbolName:se.stBrokerSymbolName?se.stBrokerSymbolName:null,stOrderType:"MARKET",inQuantity:Ie,stBuySellType:se.inNetQuantity<0?"BUY":"SELL",inLimitPrice:0,inTakeProfit:0,inStoploss:0,stExtra:{stClosePositionOrderType:Wt.value},isReverseEntry:I})}}),X.length){const se={stKey:Ae.value,stTradingWindowId:e,stAction:m,stOrders:X};(m=="MTM_TARGET_HIT_CLOSE_ALL_POSITIONS"||m=="MTM_STOPLOSS_HIT_CLOSE_ALL_POSITIONS")&&A!=null&&(se.mtmLevelDetails=A);const Ie="Your position SL and Target is removed and Reverse position order is failed. Please add new SL and Target";t.exitOrderApi(se).then(Be=>{q.value=!1,Y.value=[],ee.value=="positions"?ga():ya(),Be.status=="success"?Be?.data&&(Be.data?.buy?.["0"]?.msg?ho(Be.data?.buy?.["0"]?.msg):Be.data?.sell?.["0"]?.msg&&ho(Be.data?.sell?.["0"]?.msg),Be.data?.buy?.["0"]?.status=="error"&&I?t.toastMessage({color:"error",message:Ie}):Be.data?.sell?.["0"]?.status=="error"&&I&&t.toastMessage({color:"error",message:Ie})):(ho(Be.msg),t.toastMessage({color:"error",message:Ie}))}).catch(Be=>{q.value=!1,ho(res.msg),t.toastMessage({color:"error",message:Ie}),console.log("err :>> ",Be)})}else q.value=!1,t.toastMessage({color:"error",message:"No open positions found."})}catch(B){console.log("error"),console.log(B)}},vo=()=>{switch(ee.value){case"positions":ya();break;case"orderBook":cn();break;case"tradeBook":cp();break;case"holdings":dp();break;case"funds":pp();break}},cp=async()=>{Q.value=!0,await t.getTradeBook(Ae.value).then(m=>{Q.value=!1,m.status=="success"?re.value=m.data:t.toastMessage({color:m.status,message:m.msg})}).catch(m=>{Q.value=!1,console.log("err :>> ",m)})},cn=async()=>{Q.value=!0,await t.getOrderBook(Ae.value).then(m=>{Q.value=!1,m.status=="success"?F.value=m.data:t.toastMessage({color:m.status,message:m.msg})}).catch(m=>{Q.value=!1,console.log("err :>> ",m)})},ya=async()=>{Te.value=!Te.value,Q.value=!0,await t.getPostion(Ae.value).then(m=>{Q.value=!1,m.status=="success"?x.value!=null?U.value=m.data.filter(A=>A.stSegment==x.value):U.value=m.data:t.toastMessage({color:m.status,message:m.msg})}).catch(m=>{Q.value=!1,console.log("err :>> ",m)})},dp=async()=>{Q.value=!0,await t.getHoldings(Ae.value).then(m=>{Q.value=!1,m.status=="success"?Ce.value=m.data:t.toastMessage({color:m.status,message:m.msg})}).catch(m=>{Q.value=!1,console.log("err :>> ",m)})},pp=async()=>{Q.value=!0,await t.getFund(Ae.value).then(m=>{Q.value=!1,m.status=="success"?K.value=m.data:t.toastMessage({color:m.status,message:m.msg})}).catch(m=>{Q.value=!1,console.log("err :>> ",m)})},Kg=m=>{const A=m.slice(0,2),I=m.length,B=m.slice(I-2,I);return A+"****"+B},ma=g(!1);async function Qg(m){try{if(ma.value)t.toastMessage({color:"warning",message:"Please wait. Your previous symbol is still loading."});else{ma.value=!0;let A=!1;if(wt.value!==m.stExchange&&(A=!0,wt.value=m.stExchange,await Hd(null,m)),We.value!==m.stSubSegment&&(We.value=m.stSubSegment,await Ps(null,m,!1)),lt.value!==m.stAssetName){const I=Object.values(ct.value).flat();if(lt.value=I.find(B=>B.value===m.stAssetName)?.value||null,!lt.value){t.toastMessage({color:"error",message:"Selected symbol is not available. Please try another symbol."});return}await _s(null,m),await bs(null,m)}else A&&(await _s(null,m),await bs(null,m));if(Rt.value!==m.stExpiryDate){if(Rt.value=Bt.value.find(I=>I.value===m.stExpiryDate)?.value||null,!Rt.value){t.toastMessage({color:"error",message:"Selected symbol expiry is not available. Please try another symbol."});return}await au(null,m)}m.stOptionsType==="CE"?(ti.value=m.inStrikePrice,su()):m.stOptionsType==="PE"&&(oi.value=m.inStrikePrice,lu()),ma.value=!1}}catch(A){ma.value=!1,console.error("Error setting buy/sell symbol:",A)}}function xo(){try{Pt.value={},fp(),gp();let m={stSelectedUnderLyingAsset:Fe.value!=null?Fe.value.stUnderLyingAsset:null};We.value=="OPTIONS"?(m.stSelectedSymbol=[],yi.value!=null&&m.stSelectedSymbol.push(yi.value),mi.value!=null&&m.stSelectedSymbol.push(mi.value)):We.value=="FUTURES"?m.stSelectedSymbol=[Tt.value]:We.value=="EQUITY",s.emit("GET_TWD_DATA",m)}catch(m){console.log("error"),console.log(m)}}function fp(){try{if(vp(),We.value=="OPTIONS"){let m=null;yi.value!=null&&(m="TWD_"+yi.value,Pt.value[yi.value]={stSymbolSubscribeName:yi.value,inLtp:null,inDayOpen:null,inDayHigh:null,inDayLow:null,inPrevDayClose:null,inBid:null,inAsk:null,checkTickDataWithRestData:!0},ce.value.push(m),s.on(m,A=>{Rs(A)})),mi.value!=null&&(m="TWD_"+mi.value,Pt.value[mi.value]={stSymbolSubscribeName:mi.value,inLtp:null,inDayOpen:null,inDayHigh:null,inDayLow:null,inPrevDayClose:null,inBid:null,inAsk:null,checkTickDataWithRestData:!0},ce.value.push(m),s.on(m,A=>{Rs(A)}))}else if(We.value=="FUTURES"){let m="TWD_"+Tt.value;Pt.value[Tt.value]={stSymbolSubscribeName:Tt.value,inLtp:null,inDayOpen:null,inDayHigh:null,inDayLow:null,inPrevDayClose:null,inBid:null,inAsk:null,checkTickDataWithRestData:!0},ce.value.push(m),s.on(m,A=>{Rs(A)})}if(Fe.value&&Fe.value.stUnderLyingAsset){let m="TSD_"+Fe.value.stUnderLyingAsset;ce.value.push(m),s.on(m,A=>{hp(A)})}}catch(m){console.log("error"),console.log(m)}}function Rs(m){try{const[A,I,B,X,se,Ie,Be,ke]=m,Xe=A;let Ot={...Pt.value[Xe]};Ot.inLtp=I,Ot.inPrevDayClose=Ie,B!=0&&(Ot.inDayOpen=B,Ot.inDayHigh=X,Ot.inDayLow=se),Ot.inLtpDiff=(Number(I)-Number(Ot.inPrevDayClose)).toFixed(2),Ot.inLtpDiffInPercentage=(Number(Ot.inLtpDiff)*100/Number(Ot.inPrevDayClose)).toFixed(2),Ot.inBid=Be,Ot.inAsk=ke,Pt.value[Xe]={...Ot},Tr.value=="FUND"&&Xr()}catch(A){console.log("error"),console.log(A)}}function hp(m){try{const[A,I,B,X,se,Ie]=m;Fe.value.inLtp=I.toFixed(2),Fe.value.inPrevDayClose=Ie,B!=0&&(Fe.value.inDayOpen=B,Fe.value.inDayHigh=X,Fe.value.inDayLow=se),Fe.value.inLtpDiff=(Number(I)-Number(Fe.value.inPrevDayClose)).toFixed(2),Fe.value.inLtpDiffInPercentage=(Number(Fe.value.inLtpDiff)*100/Number(Fe.value.inPrevDayClose)).toFixed(2)}catch(A){console.log("error"),console.log(A)}}function vp(){try{ce.value=[...ce.value];let m="";if(ce.value.length>0){for(let A=0;A<ce.value.length;A++)m=ce.value[A],s.emit("STOP_DATA",{stEventName:m}),s.off(m),delete Pt.value[m];ce.value=[]}m=null}catch(m){console.log("error"),console.log(m)}}function qg(m){let A=String(m.target.innerText);A=A.replace(" Qty",""),si.value=Number(A),Tr.value="QTY"}async function Ca(m,A,I){try{const B={stFetchDate:_i.value,stSubSegment:m,stSymbolName:I,stAssetName:lt.value,stExpiryDate:Rt.value};return await yt.post(ht.baseUrl+"/api/chart-data/getsparklinechartdata",B).then(X=>X.data.status=="success"?X.data.data:[]).catch(X=>(console.log("err"),console.log(X),[]))}catch(B){console.log("error"),console.log(B)}}function gp(){try{let m={arSymbolNames:Object.values(Pt.value).filter(A=>A.inLtp==null).map(A=>A.stSymbolSubscribeName)};m.arSymbolNames.length>0&&yt.post(ht.orderApiUrl+"/symbol/getsymbolltpdetailswithextradata",m).then(A=>{if(A.data.status=="success"){const I=A.data.data,B=Object.keys(A.data.data);for(let X=0;X<B.length;X++){const se=B[X];Pt.value[se]&&Pt.value[se].inLtp==null&&(Pt.value[se].inLtp=I[se].inLtp,Pt.value[se].inDayOpen=I[se].inDayOpen,Pt.value[se].inDayHigh=I[se].inDayHigh,Pt.value[se].inDayLow=I[se].inDayLow,Pt.value[se].inPrevDayClose=I[se].inPrevDayClose,Pt.value[se].stTimestamp=I[se].stTimestamp,Pt.value[se].inLtpDiff=(Number(I[se].inLtp)-Number(I[se].inPrevDayClose)).toFixed(2),Pt.value[se].inLtpDiffInPercentage=(Number(Pt.value[se].inLtpDiff)*100/Number(I[se].inPrevDayClose)).toFixed(2))}Pt.value={...Pt.value},Tr.value=="FUND"&&Xr()}}).catch(A=>{console.log("err"),console.log(A)})}catch(m){console.log("error"),console.log(m)}}function Xg(m){try{if(m.stSubSegment=="FUTURES"||m.stSymbolName!=null&&m.stExpiryDate!=null&&m.inStrikePrice!=null||m.stSubSegment=="EQUITY"){let A=[],I=[],B=null,X=lt.value,se=m.stExpiryDate,Ie=null,Be=null;if(m.stSubSegment=="OPTIONS"){let ci=m.inStrikePrice,Mt=m.stOptionType=="CALL"?"CE":"PE";B=`${X}${se}${ci}${Mt}`;for(let ni=0;ni<zt.value.length;ni++){const ri=zt.value[ni];ri.value&&I.push(ri.value)}}else m.stSubSegment=="FUTURES"&&(se=he(se,"YYMMDD",!0).format("YYMMM").toUpperCase(),B=`${X}${se}FUT`);for(let ci=0;ci<Bt.value.length;ci++){const Mt=Bt.value[ci];if(Mt.value){const ni=he(Mt.value,"YYMMDD",!0);A.push({text:ni.format("DD MMM"),value:ni.format("YYYY-MM-DD")}),Mt.value==m.stExpiryDate&&(Be=Mt.inLotSize)}}let ke=null,Xe=null,Ot=m.stSubSegment=="OPTIONS"?m.inStrikePrice:null,At=m.stSubSegment=="OPTIONS"?m.stOptionType:null;m.stSubSegment=="OPTIONS"||m.stSubSegment=="FUTURES"?(ke="FO",se=he(Rt.value,"YYMMDD",!0).format("YYYY-MM-DD"),Xe=m.stProductType):(ke="EQ",Xe=m.stProductType=="MARGIN"?"CNC":"INTRADAY");const ii=In(m.stOrderType);me.value.push({stSubscribeSymbolName:B,stPreOrderId:ot.randomString(10),stSegment:ke,stExchange:m.stExchange,stValidity:"DAY",stBuySellType:m.stBuySellType,inQuantity:Number(m.inQuantity),stProductType:Xe,stSubSegment:m.stSubSegment,stSymbolName:m.stSymbolName,stExpiryDate:he(m.stExpiryDate,"YYMMDD",!0).format("YYYY-MM-DD"),inStrikePrice:Ot,stOptionType:At,stOrderType:ii.stOrderType,inLimitPrice:Number(m.inLimitPrice),inStoploss:0,inTakeProfit:0,inLtp:Number(m.inLimitPrice),isMarketProtectionOrder:ii.isMarketProtectionOrder,inMarketProtectionPercentage:ii.stOrderType=="MARKET"?m.inMarketProtectionPercentage:0,inLotSize:Be,availableExpiryDate:A,availableStrikePrices:I}),t.toastMessage({color:"success",message:"Order has been added to basket."})}else t.toastMessage({color:"error",message:"Please select all options details."})}catch(A){console.log("error"),console.log(A)}}const fu=()=>{S.value=!1,y.value=!1,d.value=0,f.value=0},Jg=()=>{y.value=!0,S.value=!0},Zg=()=>{qt.value?t.toastMessage({color:"error",message:"You have already deactivated the trading in this account for the day."}):po.value=!0},$g=()=>{ft.value=!0,setTimeout(()=>{ft.value=!1},1e3),po.value=!1,yt.post(ht.orderApiUrl+"/order/v2/stop-trading",{stKey:Ae.value}).then(m=>{t.toastMessage({color:m.data.status,message:m.data.msg}),m.data.status=="success"?(qt.value=!0,r.value.isBrokerTradingAllowed=!1,a.value=a.value.map(A=>(A.stIdentificationToken==r.value.stIdentificationToken&&(A.isBrokerTradingAllowed=!1),A))):qt.value=!1}).catch(m=>{console.log(m),qt.value=!1,t.toastMessage({color:"error",message:"Failed to stop broker trading."})})},ey=()=>{ft.value||(po.value=!1,qt.value=!1)};function ty(m){m.key==="ArrowUp"?(m.preventDefault(),du("increment")):m.key==="ArrowDown"&&(m.preventDefault(),du("decrement"))}function yp(){try{if(Ae.value)if(ln.value)Ro.value=null;else{let m={stValidity:"DAY",stSegment:Z.value.stSegment,stExchange:wt.value,stBuySellType:Z.value.stBuySellType,inQuantity:Z.value.inQuantity,stProductType:Z.value.stProductType,stSubSegment:Z.value.stSubSegment,stSymbolName:Z.value.stSymbolName,stExpiryDate:Z.value.stExpiryDate,inStrikePrice:Z.value.inStrikePrice,stOptionType:Z.value.stOptionType,stOrderType:Z.value.stOrderType,inLimitPrice:0,inTriggerPrice:0,inStoploss:0,inTakeProfit:0,isMarketProtectionOrder:!1,inMarketProtectionPercentage:0};switch(Z.value.stOrderType){case"LIMIT":m.inLimitPrice=Number(Z.value.inLimitPrice),m.inTriggerPrice=0;break;case"MARKET":m.inLimitPrice=0,m.inTriggerPrice=0;break;case"MARKET_PROTECTION":m.stOrderType="MARKET",m.isMarketProtectionOrder=!0,m.inMarketProtectionPercentage=Z.inMarketProtectionPercentage>0?Z.inMarketProtectionPercentage:5,m.inLimitPrice=0,m.inTriggerPrice=0;break;case"SL-L":m.inLimitPrice=Number(Z.value.inLimitPrice),m.inTriggerPrice=Number(Z.value.inTriggerPrice);break;case"SL-M":m.inLimitPrice=0,m.inTriggerPrice=Number(Z.value.inTriggerPrice);break;default:break}const A=[m],I={stKey:Ae.value,stOrders:A};Mn.value=!0,sn.value&&clearTimeout(sn.value),sn.value=setTimeout(()=>{sn.value=null,t.getMarginApi(I).then(B=>{B?.isMarginApiNotAvailable?(la.value=B.msg,ln.value=B.isMarginApiNotAvailable):B.status=="success"?Ro.value=B?.data?.inMarginWithExistingPosition:t.toastMessage({color:B.status,message:B.msg})}).catch(B=>{console.log("error"),console.log(B)}).finally(()=>{Mn.value=!1})},1e3)}else t.toastMessage({color:"error",message:"Please select broker first."})}catch(m){console.log("error"),console.log(m)}}const mp={stTradingWindowId:e,store:t,brokerData:r,activeChildBrokers:o,availableBrokersToTrade:a,socket:s,socketEventUpdateTimeout:l,get socketEventUpdate(){return u},set socketEventUpdate(m){u=m},isMtmThresholdAvailable:c,inMtmThreshold:d,inMtmThresholdPercentage:f,showMtmThresholdAlert:y,isMtmThresholdShowed:S,futuresSparklineData:w,callSparklineData:E,putSparklineData:_,underlyingSparklineData:L,showNotification:P,stNotification:V,stNotificationType:ne,inMaxAllowedLot:Fk,activeTab:ee,tradeBookData:re,orderBookData:F,positionsData:U,selectedPositionsData:Y,fundData:K,holdingsData:Ce,loading:Q,oneCLickwindowMessage:Ne,cancelAllOrderButtonLoading:xe,cancelAllOrderButtonTimer:fe,cancelAllPositionButtonLoading:q,cancelAllPositionButtonTimer:Pe,limitOrderModel:Se,changeStikeModel:ge,DittoOrderModel:le,tranchModelOptions:ie,socketDataFetching:ye,favouriteSetting:Re,oneClickSetting:$,showLtpRangeBar:Qe,typeOfLtpRangeBar:Ge,inLotSize:et,removeMtmLevelSlFlag:Je,showLimitOrderModal:it,disableOptionsSegmentPart:jt,disablePositionRefresh:Si,disableOrderBookRefresh:Kt,disableTradeBookRefresh:fi,disableOneClickShortcuts:gi,disableFundRefresh:tt,showCloseSelectedPositionBtn:ae,stMessage:G,stMessageTimeoutId:H,getRealTimePosition:Ee,isOneClickEnabled:He,stIdentificationToken:Ae,stBrokerUniqueCode:Lt,arPositions:ut,arOrders:Ri,arTrades:Gi,arBasketOrders:me,arSelectedPositions:fr,arFunds:Ht,strikePriceData:Pt,limitOrderDetails:Z,changeStrikeOrderDetails:ze,stCallStrikePrice:yi,stPutStrikePrice:mi,socketSubscribedEvents:ce,maxAvailableDate:Ze,selectedModeOfData:we,selectedExchange:wt,selectedSegment:We,selectedOptions:lt,selectedAvailableDate:_i,selectedCallStrikePrice:ti,selectedPutStrikePrice:oi,selectedAvailableExpiryDate:Rt,selectedStrikePriceForTable:qr,selectedTimeInterval:_o,selectedQty:si,selectedProductType:D,selectedOrderType:C,selectedMarketProtectionPercentage:de,stFuturesSymbol:Tt,underLyingAssetData:Fe,availableOptionsData:ct,availableDate:Qt,availableExpiryDate:Bt,availableStrikePrices:zt,availableExchanges:Qi,availableSegments:z,availableProductType:pe,availableOrderType:Ye,availableTypeOfPositions:$e,selectedTypeOfPositions:x,selectedClosePositionOrderType:Wt,arTranches:Vt,inTranchesProgress:Ui,setPredefinedTarget:Vi,inPredefinedTarget:An,stTypeOfPredefinedTarget:co,setPredefinedSl:bo,inPredefinedSl:ys,isTrailingStoplossSet:ms,inTrailingStoplossStep:on,stTypeOfPredefinedSl:nn,allAssetWiseSlAndTarget:Cs,tabIndex:Zl,arNotes:$l,brokerApiDelay:Ln,brokerOrderBookApiDelay:Ss,typeOfQunatity:Tr,selectedFund:Or,ceLotSize:Do,peLotSize:an,inMarginWithExistingPosition:Ro,isMarginLoading:Mn,marginApiTimeOut:sn,isMarginApiNotAvailable:ln,marginApiNotAvailableMsg:la,changeTypeOfQunatity:Nn,setFund:ua,changeSelectedFund:ws,calculateFundQty:Xr,inProgressClosePositionRequests:Ts,inProgressCancelAllOrderRequests:ca,showOptionChain:da,selectOpen:Os,selectOptionOpen:eu,isDialogVisible:tu,getActiveTabDataAfterOrderPlacementTimeOutId:Fn,socketDataUpdateCounter:O,selectBrokerLoader:W,selectBrokerModel:te,selectedUserBrokerId:Me,brokerWebsocketConnection:j,positionFlagTrigger:Te,isStickyPlaceOrderModal:Ve,isPlacingOrderLoading:qe,checkCurrentPosition:Ct,selectedPositionView:st,availablePositionView:Pi,isStopBrokerTrading:qt,stopBrokerTradingModel:po,isYesStopBrokerTradingClicked:ft,checkIfRestrictedFeature:fo,focusIn:un,focusOut:Pr,connectSocketEventUpdate:Gr,getOneClickNotification:iu,getBrokerDelayTime:ru,getSelectedUserBrokerTokenDetails:Vd,handleOnBrokerChange:tg,changeBroker:ig,getMtmThresholdDetails:ou,hideChangeBrokerModel:pa,openChangeBrokerModel:Bd,setCancelAllOrderButtonLoading:rg,setCloseAllPositionButtonLoading:og,handleOnExchangeChange:Hd,handleOnSegmentChange:Ps,getAvailableOptionsData:Wd,getAvailableFuturesData:Ud,getAvailableEquityData:jd,createAvailableOptionsDataMenu:Es,handleOnOptionsDataChange:_s,getSelectedOptionsDate:zd,handleOnDateChange:bs,getUnderlyingData:Yd,getOptionsDataExpiryDate:Kd,getFuturesDataExpiryDate:Qd,createAvailableOptionsExpiryDateMenu:nu,handleOnExpiryDateChange:au,handleOnFuturesExpiryChange:qd,getLotSizeFromExpiry:Xd,getSelectedOptionsStrikePriceData:Jd,handleOnCallStrikePriceChange:su,handleOnPutStrikePriceChange:lu,handleOnOrderTypeChange:ng,handleOnTypeOfPositionsChange:ag,changeSelectedQty:sg,setFavouriteSelectionValues:Zd,preparePlaceOrderObject:fa,old_working_preparePlaceOrderObject:lg,getOrderTypeDetails:In,openLimitOrderModal:uu,openLimitOrderModalForPosition:ug,showLimitOrderModalFn:cu,hideLimitOrderModalFn:$d,openChangeStrikeModal:cg,convertOptionsTypeWithSameLegDistance:dg,getAssetDetails:ep,placeConvertPositionOrder:tp,onStrikePriceChange:pg,showChangeStikeModalFn:ip,hideChangeStikeModalFn:rp,showDittorderModalFn:fg,hideDittoOrderModalFn:hg,setLimitPrice:vg,changeLimitModelQty:gg,incrementDecrementLotSize:du,changeLimitModelEquityQty:yg,incrementDecrementEquityQuantity:mg,setLimitPriceForChangeStrikeOrder:Cg,changeLimitModelQtyForChangeStrikeOrder:Sg,incrementDecrementLotSizeForChangeStrikeOrder:wg,changeLimitModelEquityQtyForChangeStrikeOrder:Tg,incrementDecrementEquityQuantityForChangeStrikeOrder:Og,placeChangeStrikeOrder:Pg,placeOrderforStrikeChange:ha,placeLimitOrder:Eg,placeOrder:va,handleKeydown:pu,disableOneClickShortcutsFn:Ds,addOrderObjectToBasketOrder:_g,addStrategyToBasketOrder:bg,modifyBasketOrderQty:Dg,modifyBasketOrderQtyField:Rg,modifyBasketOrderType:xg,modifyBasketOrderTypeMarketProtectionPercentage:Ag,modifyBasketOrderLtpField:Lg,modifySelectedBasketOrder:Mg,modifyBasketOrderProductTypeField:Ng,modifyBasketOrderOptionType:Fg,modifyBasketOrderExpiryDate:Ig,modifyBasketOrderStrikePrice:kg,modifyBasketOrderMarketProtectionPercentage:Gg,modifyBasketOrderBuySellType:Vg,addBasketOrderFromSavedBasket:Bg,removeOrderFromBasket:Hg,clearAllBasketOrders:Wg,placeAllBasketOrders:Ug,placeOrderAsync:op,getActiveTabDataAfterOrderPlacement:ga,getSuccessfulTranchCount:jg,sleep:np,showTranchOrderModalFn:ap,hideTranchOrderModalFn:zg,showMessageOnOnlickWindow:ho,onChangeActiveTab:sp,setSelectedPositions:Yg,cancelAllOrder:lp,cancelAllPositions:up,getActiveTabData:vo,getTradeBook:cp,getOrderBook:cn,getPositions:ya,getHoldings:dp,getFunds:pp,formatStUserId:Kg,isSymbolIsChanging:ma,setBuySellSymbol:Qg,connectSocketForRealtimeData:xo,subscribeForDynamicEvents:fp,setRealTimeTableData:Rs,setRealTimeSpotPriceData:hp,unsubscribeForDynamicEvents:vp,editLotSize:qg,getSparklineChartData:Ca,getSymbolLtpDetails:gp,addOrderObjectToBasketOrderFromList:Xg,resetMtmThresholdAlert:fu,setMtmThresholdAlert:Jg,openStopBrokerTradingModel:Zg,stopBrokerTrading:$g,hideStopBrokerTradingModel:ey,handlePriceKeydown:ty,getMargin:yp,get useAppStore(){return pi},nextTick:dr,onBeforeMount:cl,onBeforeUnmount:Oo,onMounted:Gt,ref:g,watch:Ke,get moment(){return he},get axios(){return yt},get config(){return ht},get socketIO(){return Za},OptionsList:RA,Positions:t0,OrderBook:b0,TradeBook:x0,Holdings:k0,BasketOrder:$v,Funds:nM,get sharedFunctions(){return ot},get DraggableResizableVue(){return Jo},ChildPositions:SM,ChildOrderBook:UM,ChildTradeBook:ZM,ChildFunds:EN,DittoOrders:Ky,SparklineChart:BN,ClockTime:YN};return Object.defineProperty(mp,"__isScriptSetup",{enumerable:!1,value:!0}),mp}},v1=ki(Ik,[["render",Nk]]);export{v1 as default};
