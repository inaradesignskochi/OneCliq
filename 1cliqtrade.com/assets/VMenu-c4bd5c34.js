import{z as D,a0 as M,dw as T,L as k,_ as A,dx as S,cJ as I,y as f,r as K,M as O,G as U,I as F,v as G,m,O as L,cG as p,a as y,a6 as R,a8 as N,dG as g,dH as $,cX as V,dF as w,a3 as j}from"./index-8e4e81f1.js";import{V as z}from"./dialog-transition-d4838f6c.js";const H=D({id:String,...M(T({closeDelay:250,closeOnContentClick:!0,locationStrategy:"connected",openDelay:300,scrim:!1,scrollStrategy:"reposition",transition:{component:z}}),["absolute"])},"VMenu"),q=k()({name:"VMenu",props:H(),emits:{"update:modelValue":n=>!0},setup(n,P){let{slots:i}=P;const o=A(n,"modelValue"),{scopeId:b}=S(),E=I(),c=f(()=>n.id||`v-menu-${E}`),a=K(),l=O(g,null),u=U(0);F(g,{register(){++u.value},unregister(){--u.value},closeParents(){setTimeout(()=>{u.value||(o.value=!1,l?.closeParents())},40)}});async function d(e){const t=e.relatedTarget,s=e.target;await j(),o.value&&t!==s&&a.value?.contentEl&&a.value?.globalTop&&![document,a.value.contentEl].includes(s)&&!a.value.contentEl.contains(s)&&V(a.value.contentEl)[0]?.focus()}G(o,e=>{e?(l?.register(),document.addEventListener("focusin",d,{once:!0})):(l?.unregister(),document.removeEventListener("focusin",d))});function x(){l?.closeParents()}function h(e){n.disabled||e.key==="Tab"&&($(V(a.value?.contentEl,!1),e.shiftKey?"prev":"next",s=>s.tabIndex>=0)||(o.value=!1,a.value?.activatorEl?.focus()))}function v(e){if(n.disabled)return;const t=a.value?.contentEl;t&&o.value?e.key==="ArrowDown"?(e.preventDefault(),w(t,"next")):e.key==="ArrowUp"&&(e.preventDefault(),w(t,"prev")):["ArrowDown","ArrowUp"].includes(e.key)&&(o.value=!0,e.preventDefault(),setTimeout(()=>setTimeout(()=>v(e))))}const C=f(()=>m({"aria-haspopup":"menu","aria-expanded":String(o.value),"aria-owns":c.value,onKeydown:v},n.activatorProps));return L(()=>{const e=p.filterProps(n);return y(p,m({ref:a,class:["v-menu",n.class],style:n.style},e,{modelValue:o.value,"onUpdate:modelValue":t=>o.value=t,absolute:!0,activatorProps:C.value,"onClick:outside":x,onKeydown:h},b),{activator:i.activator,default:function(){for(var t=arguments.length,s=new Array(t),r=0;r<t;r++)s[r]=arguments[r];return y(R,{root:"VMenu"},{default:()=>[i.default?.(...s)]})}})}),N({id:c,Î¨openChildren:u},a)}});export{q as V};
